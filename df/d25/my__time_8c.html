<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Azerotcore-wotlk: deps/mysqllite/sql-common/my_time.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Azerotcore-wotlk
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_94a36784afa54c0b50996002372b429e.html">deps</a></li><li class="navelem"><a class="el" href="../../dir_c19b06727b8b6746540d83e2aa4b49f4.html">mysqllite</a></li><li class="navelem"><a class="el" href="../../dir_0d59f52926e4348628c277fdf6154047.html">sql-common</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">my_time.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="../../da/d9e/my__time_8h_source.html">my_time.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d6/dda/m__string_8h_source.html">m_string.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d8/dd3/m__ctype_8h_source.html">m_ctype.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../da/da8/my__pthread_8h_source.html">my_pthread.h</a>&gt;</code><br />
</div>
<p><a href="../../df/d25/my__time_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a7e05a26646709f9b4134f98562e3e631"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d25/my__time_8c.html#a7e05a26646709f9b4134f98562e3e631">MAX_DATE_PARTS</a>&#160;&#160;&#160;8</td></tr>
<tr class="separator:a7e05a26646709f9b4134f98562e3e631"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0b164292099dd8f00092646b26017e00"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d25/my__time_8c.html#a0b164292099dd8f00092646b26017e00">calc_days_in_year</a> (<a class="el" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> year)</td></tr>
<tr class="separator:a0b164292099dd8f00092646b26017e00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a520faad052bc2f86fa6276a8a93e4fc0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/df6/my__global_8h.html#a74cd599039dcf29c6e6d342cf4efd0a8">my_bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d25/my__time_8c.html#a520faad052bc2f86fa6276a8a93e4fc0">check_date</a> (<a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d2/d90/mysql__time_8h.html#ac0e2ef0b90aaa480d60b90341891c4fd">MYSQL_TIME</a> *ltime, <a class="el" href="../../d9/df6/my__global_8h.html#a74cd599039dcf29c6e6d342cf4efd0a8">my_bool</a> not_zero_date, <a class="el" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a> flags, int *was_cut)</td></tr>
<tr class="memdesc:a520faad052bc2f86fa6276a8a93e4fc0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check datetime value for validity according to flags.  <a href="../../df/d25/my__time_8c.html#a520faad052bc2f86fa6276a8a93e4fc0">More...</a><br /></td></tr>
<tr class="separator:a520faad052bc2f86fa6276a8a93e4fc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f330ccaa295a2a7b14c3920314680ba"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73">enum_mysql_timestamp_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d25/my__time_8c.html#a8f330ccaa295a2a7b14c3920314680ba">str_to_datetime</a> (<a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *str, <a class="el" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> length, <a class="el" href="../../d2/d90/mysql__time_8h.html#ac0e2ef0b90aaa480d60b90341891c4fd">MYSQL_TIME</a> *l_time, <a class="el" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a> flags, int *was_cut)</td></tr>
<tr class="separator:a8f330ccaa295a2a7b14c3920314680ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6265f7d0340bbb8c511818f105e893ed"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/df6/my__global_8h.html#a74cd599039dcf29c6e6d342cf4efd0a8">my_bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d25/my__time_8c.html#a6265f7d0340bbb8c511818f105e893ed">str_to_time</a> (<a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *str, <a class="el" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> length, <a class="el" href="../../d2/d90/mysql__time_8h.html#ac0e2ef0b90aaa480d60b90341891c4fd">MYSQL_TIME</a> *l_time, int *warning)</td></tr>
<tr class="separator:a6265f7d0340bbb8c511818f105e893ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b555d984ccd71c8be3236cb7468fa22"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d25/my__time_8c.html#a0b555d984ccd71c8be3236cb7468fa22">check_time_range</a> (struct <a class="el" href="../../df/d63/structst__mysql__time.html">st_mysql_time</a> *<a class="el" href="../../df/d08/my__getsystime_8c.html#a0189ef2404e3c69e1cdf427f13abd170">my_time</a>, int *warning)</td></tr>
<tr class="separator:a0b555d984ccd71c8be3236cb7468fa22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a969248840622da995efe7c5f3dc4e832"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d25/my__time_8c.html#a969248840622da995efe7c5f3dc4e832">my_init_time</a> (void)</td></tr>
<tr class="separator:a969248840622da995efe7c5f3dc4e832"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95bdcc2f9663dea81b80813cb8d91a4f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d25/my__time_8c.html#a95bdcc2f9663dea81b80813cb8d91a4f">year_2000_handling</a> (<a class="el" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> year)</td></tr>
<tr class="separator:a95bdcc2f9663dea81b80813cb8d91a4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0b925f42e43909aff9adaad596fcb5a"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d25/my__time_8c.html#af0b925f42e43909aff9adaad596fcb5a">calc_daynr</a> (<a class="el" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> year, <a class="el" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> month, <a class="el" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> day)</td></tr>
<tr class="separator:af0b925f42e43909aff9adaad596fcb5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0b6420fddca5e1b9eba75c5ff382540"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d9e/my__time_8h.html#ae891eefe39a2b77a96f9525760e70a16">my_time_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d25/my__time_8c.html#ae0b6420fddca5e1b9eba75c5ff382540">my_system_gmt_sec</a> (<a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d2/d90/mysql__time_8h.html#ac0e2ef0b90aaa480d60b90341891c4fd">MYSQL_TIME</a> *t_src, long *my_timezone, <a class="el" href="../../d9/df6/my__global_8h.html#a74cd599039dcf29c6e6d342cf4efd0a8">my_bool</a> *in_dst_time_gap)</td></tr>
<tr class="separator:ae0b6420fddca5e1b9eba75c5ff382540"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf5b50d4400aaa2db9a84cd36951da34"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d25/my__time_8c.html#adf5b50d4400aaa2db9a84cd36951da34">set_zero_time</a> (<a class="el" href="../../d2/d90/mysql__time_8h.html#ac0e2ef0b90aaa480d60b90341891c4fd">MYSQL_TIME</a> *tm, enum <a class="el" href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73">enum_mysql_timestamp_type</a> time_type)</td></tr>
<tr class="separator:adf5b50d4400aaa2db9a84cd36951da34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a365d6a82b3ca526017716b35419c4a7b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d25/my__time_8c.html#a365d6a82b3ca526017716b35419c4a7b">my_time_to_str</a> (<a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d2/d90/mysql__time_8h.html#ac0e2ef0b90aaa480d60b90341891c4fd">MYSQL_TIME</a> *l_time, char *to)</td></tr>
<tr class="separator:a365d6a82b3ca526017716b35419c4a7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a734ad69ea994acd6d4793154d6c6ee9a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d25/my__time_8c.html#a734ad69ea994acd6d4793154d6c6ee9a">my_date_to_str</a> (<a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d2/d90/mysql__time_8h.html#ac0e2ef0b90aaa480d60b90341891c4fd">MYSQL_TIME</a> *l_time, char *to)</td></tr>
<tr class="separator:a734ad69ea994acd6d4793154d6c6ee9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a047556980f85ede672a37e3caf702697"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d25/my__time_8c.html#a047556980f85ede672a37e3caf702697">my_datetime_to_str</a> (<a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d2/d90/mysql__time_8h.html#ac0e2ef0b90aaa480d60b90341891c4fd">MYSQL_TIME</a> *l_time, char *to)</td></tr>
<tr class="separator:a047556980f85ede672a37e3caf702697"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af17df617a2753169666bb4861d278ac8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d25/my__time_8c.html#af17df617a2753169666bb4861d278ac8">my_TIME_to_str</a> (<a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d2/d90/mysql__time_8h.html#ac0e2ef0b90aaa480d60b90341891c4fd">MYSQL_TIME</a> *l_time, char *to)</td></tr>
<tr class="separator:af17df617a2753169666bb4861d278ac8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad94f85587eca8a0c2c1cb7989fcf5587"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/df6/my__global_8h.html#aec67c7fb857b590c82cd4155cd21d7e7">longlong</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d25/my__time_8c.html#ad94f85587eca8a0c2c1cb7989fcf5587">number_to_datetime</a> (<a class="el" href="../../d9/df6/my__global_8h.html#aec67c7fb857b590c82cd4155cd21d7e7">longlong</a> nr, <a class="el" href="../../d2/d90/mysql__time_8h.html#ac0e2ef0b90aaa480d60b90341891c4fd">MYSQL_TIME</a> *time_res, <a class="el" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a> flags, int *was_cut)</td></tr>
<tr class="separator:ad94f85587eca8a0c2c1cb7989fcf5587"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21ae158cc19a11c1d191b2b913df4624"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d25/my__time_8c.html#a21ae158cc19a11c1d191b2b913df4624">TIME_to_ulonglong_datetime</a> (<a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d2/d90/mysql__time_8h.html#ac0e2ef0b90aaa480d60b90341891c4fd">MYSQL_TIME</a> *<a class="el" href="../../df/d08/my__getsystime_8c.html#a0189ef2404e3c69e1cdf427f13abd170">my_time</a>)</td></tr>
<tr class="separator:a21ae158cc19a11c1d191b2b913df4624"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc8ac68021c33036b1dfaf5c67507d95"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d25/my__time_8c.html#acc8ac68021c33036b1dfaf5c67507d95">TIME_to_ulonglong_date</a> (<a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d2/d90/mysql__time_8h.html#ac0e2ef0b90aaa480d60b90341891c4fd">MYSQL_TIME</a> *<a class="el" href="../../df/d08/my__getsystime_8c.html#a0189ef2404e3c69e1cdf427f13abd170">my_time</a>)</td></tr>
<tr class="separator:acc8ac68021c33036b1dfaf5c67507d95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3848a95ec20f44373155194145cb6af9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d25/my__time_8c.html#a3848a95ec20f44373155194145cb6af9">TIME_to_ulonglong_time</a> (<a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d2/d90/mysql__time_8h.html#ac0e2ef0b90aaa480d60b90341891c4fd">MYSQL_TIME</a> *<a class="el" href="../../df/d08/my__getsystime_8c.html#a0189ef2404e3c69e1cdf427f13abd170">my_time</a>)</td></tr>
<tr class="separator:a3848a95ec20f44373155194145cb6af9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab28393ef12ecf32d0c88cb25bc3d9ce5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d25/my__time_8c.html#ab28393ef12ecf32d0c88cb25bc3d9ce5">TIME_to_ulonglong</a> (<a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d2/d90/mysql__time_8h.html#ac0e2ef0b90aaa480d60b90341891c4fd">MYSQL_TIME</a> *<a class="el" href="../../df/d08/my__getsystime_8c.html#a0189ef2404e3c69e1cdf427f13abd170">my_time</a>)</td></tr>
<tr class="separator:ab28393ef12ecf32d0c88cb25bc3d9ce5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a3b0670d47f03ef8afdb725e2ca53d9e1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d25/my__time_8c.html#a3b0670d47f03ef8afdb725e2ca53d9e1">log_10_int</a> [20]</td></tr>
<tr class="separator:a3b0670d47f03ef8afdb725e2ca53d9e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a256105598e7e1facfb2ac2a3bc111ee7"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d9/df6/my__global_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d25/my__time_8c.html#a256105598e7e1facfb2ac2a3bc111ee7">internal_format_positions</a> []</td></tr>
<tr class="separator:a256105598e7e1facfb2ac2a3bc111ee7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6eb4181511414f87e37c0b1f9a661833"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d25/my__time_8c.html#a6eb4181511414f87e37c0b1f9a661833">time_separator</a> =':'</td></tr>
<tr class="separator:a6eb4181511414f87e37c0b1f9a661833"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7840188fd5d425eb572a915e753d42f"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d9/df6/my__global_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d25/my__time_8c.html#ad7840188fd5d425eb572a915e753d42f">days_at_timestart</a> =719528</td></tr>
<tr class="separator:ad7840188fd5d425eb572a915e753d42f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a499204c2692d90e4d5ba03eb7b7b977e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/df6/my__global_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d25/my__time_8c.html#a499204c2692d90e4d5ba03eb7b7b977e">days_in_month</a> [] = {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31, 0}</td></tr>
<tr class="separator:a499204c2692d90e4d5ba03eb7b7b977e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cb5cfcf13494ccfd9c852061a626ae0"><td class="memItemLeft" align="right" valign="top">static long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d25/my__time_8c.html#a4cb5cfcf13494ccfd9c852061a626ae0">my_time_zone</a> =0</td></tr>
<tr class="separator:a4cb5cfcf13494ccfd9c852061a626ae0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a7e05a26646709f9b4134f98562e3e631"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e05a26646709f9b4134f98562e3e631">&#9670;&nbsp;</a></span>MAX_DATE_PARTS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_DATE_PARTS&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d25/my__time_8c_source.html#l00157">157</a> of file <a class="el" href="../../df/d25/my__time_8c_source.html">my_time.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="af0b925f42e43909aff9adaad596fcb5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0b925f42e43909aff9adaad596fcb5a">&#9670;&nbsp;</a></span>calc_daynr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long calc_daynr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>year</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>month</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>day</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d25/my__time_8c_source.html#l00768">768</a> of file <a class="el" href="../../df/d25/my__time_8c_source.html">my_time.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;{</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  <span class="keywordtype">long</span> delsum;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  <span class="keywordtype">int</span> temp;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a>= year;                                  <span class="comment">/* may be &lt; 0 temporarily */</span></div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  <a class="code" href="../../d1/d35/dbug__long_8h.html#a56a51e0edb39d13c83021fd4e7bdc9e9">DBUG_ENTER</a>(<span class="stringliteral">&quot;calc_daynr&quot;</span>);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160; </div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a> == 0 &amp;&amp; month == 0 &amp;&amp; day == 0)</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <a class="code" href="../../d1/d35/dbug__long_8h.html#af63d1bddf8957387d14fe70b8db22b96">DBUG_RETURN</a>(0);             <span class="comment">/* Skip errors */</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <span class="comment">/* Cast to int to be able to handle month == 0 */</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  delsum= (long) (365 * <a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a> + 31 *((<span class="keywordtype">int</span>) month - 1) + (int) day);</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  <span class="keywordflow">if</span> (month &lt;= 2)</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      <a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a>--;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    delsum-= (long) ((<span class="keywordtype">int</span>) month * 4 + 23) / 10;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  temp=(int) ((<a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a>/100+1)*3)/4;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <a class="code" href="../../d1/d35/dbug__long_8h.html#a3770d2ff545ed3e4b714d20014e663df">DBUG_PRINT</a>(<span class="stringliteral">&quot;exit&quot;</span>,(<span class="stringliteral">&quot;year: %d  month: %d  day: %d -&gt; daynr: %ld&quot;</span>,</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;             <a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a>+(month &lt;= 2),month,day,delsum+<a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a>/4-temp));</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  <a class="code" href="../../d1/d35/dbug__long_8h.html#af63d1bddf8957387d14fe70b8db22b96">DBUG_RETURN</a>(delsum+(<span class="keywordtype">int</span>) <a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a>/4-temp);</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;} <span class="comment">/* calc_daynr */</span></div>
<div class="ttc" id="adbug__long_8h_html_a3770d2ff545ed3e4b714d20014e663df"><div class="ttname"><a href="../../d1/d35/dbug__long_8h.html#a3770d2ff545ed3e4b714d20014e663df">DBUG_PRINT</a></div><div class="ttdeci">#define DBUG_PRINT(keyword, arglist)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d35/dbug__long_8h_source.html#l00143">dbug_long.h:143</a></div></div>
<div class="ttc" id="adbug__long_8h_html_a56a51e0edb39d13c83021fd4e7bdc9e9"><div class="ttname"><a href="../../d1/d35/dbug__long_8h.html#a56a51e0edb39d13c83021fd4e7bdc9e9">DBUG_ENTER</a></div><div class="ttdeci">#define DBUG_ENTER(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d35/dbug__long_8h_source.html#l00131">dbug_long.h:131</a></div></div>
<div class="ttc" id="adbug__long_8h_html_af63d1bddf8957387d14fe70b8db22b96"><div class="ttname"><a href="../../d1/d35/dbug__long_8h.html#af63d1bddf8957387d14fe70b8db22b96">DBUG_RETURN</a></div><div class="ttdeci">#define DBUG_RETURN(a1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d35/dbug__long_8h_source.html#l00138">dbug_long.h:138</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_a8942ba929b21cfdf30bd22fe36baaefa"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">G3D::y</a></div><div class="ttdeci">G3D::int16 y</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d14/_vector2int16_8h_source.html#l00038">Vector2int16.h:38</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d1/d35/dbug__long_8h_source.html#l00131">DBUG_ENTER</a>, <a class="el" href="../../d1/d35/dbug__long_8h_source.html#l00143">DBUG_PRINT</a>, <a class="el" href="../../d1/d35/dbug__long_8h_source.html#l00138">DBUG_RETURN</a>, and <a class="el" href="../../d8/d14/_vector2int16_8h_source.html#l00038">G3D::y</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d25/my__time_8c_source.html#l00813">my_system_gmt_sec()</a>.</p>

</div>
</div>
<a id="a0b164292099dd8f00092646b26017e00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b164292099dd8f00092646b26017e00">&#9670;&nbsp;</a></span>calc_days_in_year()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> calc_days_in_year </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>year</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d25/my__time_8c_source.html#l00051">51</a> of file <a class="el" href="../../df/d25/my__time_8c_source.html">my_time.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;{</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="keywordflow">return</span> ((year &amp; 3) == 0 &amp;&amp; (year%100 || (year%400 == 0 &amp;&amp; year)) ?</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;          366 : 365);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../df/d25/my__time_8c_source.html#l00078">check_date()</a>.</p>

</div>
</div>
<a id="a520faad052bc2f86fa6276a8a93e4fc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a520faad052bc2f86fa6276a8a93e4fc0">&#9670;&nbsp;</a></span>check_date()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/df6/my__global_8h.html#a74cd599039dcf29c6e6d342cf4efd0a8">my_bool</a> check_date </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d2/d90/mysql__time_8h.html#ac0e2ef0b90aaa480d60b90341891c4fd">MYSQL_TIME</a> *&#160;</td>
          <td class="paramname"><em>ltime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#a74cd599039dcf29c6e6d342cf4efd0a8">my_bool</a>&#160;</td>
          <td class="paramname"><em>not_zero_date</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a>&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>was_cut</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check datetime value for validity according to flags. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ltime</td><td>Date to check. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">not_zero_date</td><td>ltime is not the zero date </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>flags to check (see <a class="el" href="../../df/d25/my__time_8c.html#a8f330ccaa295a2a7b14c3920314680ba">str_to_datetime()</a> flags in <a class="el" href="../../da/d9e/my__time_8h.html">my_time.h</a>) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">was_cut</td><td>set to 2 if value was invalid according to flags. (Feb 29 in non-leap etc.) This remains unchanged if value is not invalid.</td></tr>
  </table>
  </dd>
</dl>
<p>Here we assume that year and month is ok! If month is 0 we allow any date. (This only happens if we allow zero date parts in <a class="el" href="../../df/d25/my__time_8c.html#a8f330ccaa295a2a7b14c3920314680ba">str_to_datetime()</a>) Disallow dates with zero year and non-zero month and/or day.</p>
<dl class="section return"><dt>Returns</dt><dd>0 OK 1 error </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../df/d25/my__time_8c_source.html#l00078">78</a> of file <a class="el" href="../../df/d25/my__time_8c_source.html">my_time.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;{</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keywordflow">if</span> (not_zero_date)</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  {</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordflow">if</span> ((((flags &amp; <a class="code" href="../../da/d9e/my__time_8h.html#a6cf1033fd2ab1ade0a268dcd67512af1">TIME_NO_ZERO_IN_DATE</a>) || !(flags &amp; <a class="code" href="../../da/d9e/my__time_8h.html#a5e4d9dd49e7baff05f7609c78df3cba8">TIME_FUZZY_DATE</a>)) &amp;&amp;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;         (ltime-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a45f08f891e62f744268670f8ca6a35e1">month</a> == 0 || ltime-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a90fc6fbcdaccf2fed84fc1ce94832df5">day</a> == 0)) ||</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        (!(flags &amp; <a class="code" href="../../da/d9e/my__time_8h.html#a6ed053403c9e564208e0247e06aa3fce">TIME_INVALID_DATES</a>) &amp;&amp;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;         ltime-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a45f08f891e62f744268670f8ca6a35e1">month</a> &amp;&amp; ltime-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a90fc6fbcdaccf2fed84fc1ce94832df5">day</a> &gt; <a class="code" href="../../df/d25/my__time_8c.html#a499204c2692d90e4d5ba03eb7b7b977e">days_in_month</a>[ltime-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a45f08f891e62f744268670f8ca6a35e1">month</a>-1] &amp;&amp;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;         (ltime-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a45f08f891e62f744268670f8ca6a35e1">month</a> != 2 || <a class="code" href="../../df/d25/my__time_8c.html#a0b164292099dd8f00092646b26017e00">calc_days_in_year</a>(ltime-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a2fb9953d417685aaf398eec5d437374a">year</a>) != 366 ||</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;          ltime-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a90fc6fbcdaccf2fed84fc1ce94832df5">day</a> != 29)))</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      *was_cut= 2;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d8/dec/mpq-internal_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    }</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  }</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (flags &amp; <a class="code" href="../../da/d9e/my__time_8h.html#a2e555131ba58cc767327b025993d60a0">TIME_NO_ZERO_DATE</a>)</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">      We don&#39;t set *was_cut here to signal that the problem was a zero date</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">      and not an invalid date</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/dec/mpq-internal_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  }</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d8/dec/mpq-internal_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;}</div>
<div class="ttc" id="ampq-internal_8h_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="../../d8/dec/mpq-internal_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dec/mpq-internal_8h_source.html#l00062">mpq-internal.h:62</a></div></div>
<div class="ttc" id="ampq-internal_8h_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="../../d8/dec/mpq-internal_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dec/mpq-internal_8h_source.html#l00059">mpq-internal.h:59</a></div></div>
<div class="ttc" id="amy__time_8c_html_a0b164292099dd8f00092646b26017e00"><div class="ttname"><a href="../../df/d25/my__time_8c.html#a0b164292099dd8f00092646b26017e00">calc_days_in_year</a></div><div class="ttdeci">uint calc_days_in_year(uint year)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d25/my__time_8c_source.html#l00051">my_time.c:51</a></div></div>
<div class="ttc" id="amy__time_8c_html_a499204c2692d90e4d5ba03eb7b7b977e"><div class="ttname"><a href="../../df/d25/my__time_8c.html#a499204c2692d90e4d5ba03eb7b7b977e">days_in_month</a></div><div class="ttdeci">uchar days_in_month[]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d25/my__time_8c_source.html#l00040">my_time.c:40</a></div></div>
<div class="ttc" id="amy__time_8h_html_a2e555131ba58cc767327b025993d60a0"><div class="ttname"><a href="../../da/d9e/my__time_8h.html#a2e555131ba58cc767327b025993d60a0">TIME_NO_ZERO_DATE</a></div><div class="ttdeci">#define TIME_NO_ZERO_DATE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d9e/my__time_8h_source.html#l00059">my_time.h:59</a></div></div>
<div class="ttc" id="amy__time_8h_html_a5e4d9dd49e7baff05f7609c78df3cba8"><div class="ttname"><a href="../../da/d9e/my__time_8h.html#a5e4d9dd49e7baff05f7609c78df3cba8">TIME_FUZZY_DATE</a></div><div class="ttdeci">#define TIME_FUZZY_DATE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d9e/my__time_8h_source.html#l00054">my_time.h:54</a></div></div>
<div class="ttc" id="amy__time_8h_html_a6cf1033fd2ab1ade0a268dcd67512af1"><div class="ttname"><a href="../../da/d9e/my__time_8h.html#a6cf1033fd2ab1ade0a268dcd67512af1">TIME_NO_ZERO_IN_DATE</a></div><div class="ttdeci">#define TIME_NO_ZERO_IN_DATE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d9e/my__time_8h_source.html#l00057">my_time.h:57</a></div></div>
<div class="ttc" id="amy__time_8h_html_a6ed053403c9e564208e0247e06aa3fce"><div class="ttname"><a href="../../da/d9e/my__time_8h.html#a6ed053403c9e564208e0247e06aa3fce">TIME_INVALID_DATES</a></div><div class="ttdeci">#define TIME_INVALID_DATES</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d9e/my__time_8h_source.html#l00060">my_time.h:60</a></div></div>
<div class="ttc" id="astructst__mysql__time_html_a2fb9953d417685aaf398eec5d437374a"><div class="ttname"><a href="../../df/d63/structst__mysql__time.html#a2fb9953d417685aaf398eec5d437374a">st_mysql_time::year</a></div><div class="ttdeci">unsigned int year</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d90/mysql__time_8h_source.html#l00049">mysql_time.h:49</a></div></div>
<div class="ttc" id="astructst__mysql__time_html_a45f08f891e62f744268670f8ca6a35e1"><div class="ttname"><a href="../../df/d63/structst__mysql__time.html#a45f08f891e62f744268670f8ca6a35e1">st_mysql_time::month</a></div><div class="ttdeci">unsigned int month</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d90/mysql__time_8h_source.html#l00049">mysql_time.h:49</a></div></div>
<div class="ttc" id="astructst__mysql__time_html_a90fc6fbcdaccf2fed84fc1ce94832df5"><div class="ttname"><a href="../../df/d63/structst__mysql__time.html#a90fc6fbcdaccf2fed84fc1ce94832df5">st_mysql_time::day</a></div><div class="ttdeci">unsigned int day</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d90/mysql__time_8h_source.html#l00049">mysql_time.h:49</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d25/my__time_8c_source.html#l00051">calc_days_in_year()</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::day</a>, <a class="el" href="../../df/d25/my__time_8c_source.html#l00040">days_in_month</a>, <a class="el" href="../../d8/dec/mpq-internal_8h_source.html#l00059">FALSE</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::month</a>, <a class="el" href="../../da/d9e/my__time_8h_source.html#l00054">TIME_FUZZY_DATE</a>, <a class="el" href="../../da/d9e/my__time_8h_source.html#l00060">TIME_INVALID_DATES</a>, <a class="el" href="../../da/d9e/my__time_8h_source.html#l00059">TIME_NO_ZERO_DATE</a>, <a class="el" href="../../da/d9e/my__time_8h_source.html#l00057">TIME_NO_ZERO_IN_DATE</a>, <a class="el" href="../../d8/dec/mpq-internal_8h_source.html#l00062">TRUE</a>, and <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::year</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d25/my__time_8c_source.html#l01102">number_to_datetime()</a>.</p>

</div>
</div>
<a id="a0b555d984ccd71c8be3236cb7468fa22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b555d984ccd71c8be3236cb7468fa22">&#9670;&nbsp;</a></span>check_time_range()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int check_time_range </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d63/structst__mysql__time.html">st_mysql_time</a> *&#160;</td>
          <td class="paramname"><em>my_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>warning</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d25/my__time_8c_source.html#l00684">684</a> of file <a class="el" href="../../df/d25/my__time_8c_source.html">my_time.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;{</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <a class="code" href="../../d9/df6/my__global_8h.html#aec67c7fb857b590c82cd4155cd21d7e7">longlong</a> hour;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160; </div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>-&gt;minute &gt;= 60 || <a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>-&gt;second &gt;= 60)</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160; </div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  hour= <a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>-&gt;hour + (24*<a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>-&gt;day);</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <span class="keywordflow">if</span> (hour &lt;= <a class="code" href="../../da/d9e/my__time_8h.html#a9e4233e88c88d7a9b4f14493610a6447">TIME_MAX_HOUR</a> &amp;&amp;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;      (hour != <a class="code" href="../../da/d9e/my__time_8h.html#a9e4233e88c88d7a9b4f14493610a6447">TIME_MAX_HOUR</a> || <a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>-&gt;minute != <a class="code" href="../../da/d9e/my__time_8h.html#acc8bbcb865b261162e0842aa363a8f4f">TIME_MAX_MINUTE</a> ||</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;       <a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>-&gt;second != <a class="code" href="../../da/d9e/my__time_8h.html#a496951ecb8ab14e1a329025ba199539f">TIME_MAX_SECOND</a> || !<a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>-&gt;second_part))</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160; </div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>-&gt;day= 0;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>-&gt;hour= <a class="code" href="../../da/d9e/my__time_8h.html#a9e4233e88c88d7a9b4f14493610a6447">TIME_MAX_HOUR</a>;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>-&gt;minute= <a class="code" href="../../da/d9e/my__time_8h.html#acc8bbcb865b261162e0842aa363a8f4f">TIME_MAX_MINUTE</a>;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>-&gt;second= <a class="code" href="../../da/d9e/my__time_8h.html#a496951ecb8ab14e1a329025ba199539f">TIME_MAX_SECOND</a>;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>-&gt;second_part= 0;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  *warning|= <a class="code" href="../../da/d9e/my__time_8h.html#a3f9814b3f4f2923a21cb6ca47c190da2">MYSQL_TIME_WARN_OUT_OF_RANGE</a>;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;}</div>
<div class="ttc" id="amy__global_8h_html_aec67c7fb857b590c82cd4155cd21d7e7"><div class="ttname"><a href="../../d9/df6/my__global_8h.html#aec67c7fb857b590c82cd4155cd21d7e7">longlong</a></div><div class="ttdeci">long longlong</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df6/my__global_8h_source.html#l00921">my_global.h:921</a></div></div>
<div class="ttc" id="amy__sys_8h_html_a41d5683d936fc7d39c10fca168e1fbb5"><div class="ttname"><a href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a></div><div class="ttdeci">time_t my_time(myf flags)</div></div>
<div class="ttc" id="amy__time_8h_html_a3f9814b3f4f2923a21cb6ca47c190da2"><div class="ttname"><a href="../../da/d9e/my__time_8h.html#a3f9814b3f4f2923a21cb6ca47c190da2">MYSQL_TIME_WARN_OUT_OF_RANGE</a></div><div class="ttdeci">#define MYSQL_TIME_WARN_OUT_OF_RANGE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d9e/my__time_8h_source.html#l00063">my_time.h:63</a></div></div>
<div class="ttc" id="amy__time_8h_html_a496951ecb8ab14e1a329025ba199539f"><div class="ttname"><a href="../../da/d9e/my__time_8h.html#a496951ecb8ab14e1a329025ba199539f">TIME_MAX_SECOND</a></div><div class="ttdeci">#define TIME_MAX_SECOND</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d9e/my__time_8h_source.html#l00068">my_time.h:68</a></div></div>
<div class="ttc" id="amy__time_8h_html_a9e4233e88c88d7a9b4f14493610a6447"><div class="ttname"><a href="../../da/d9e/my__time_8h.html#a9e4233e88c88d7a9b4f14493610a6447">TIME_MAX_HOUR</a></div><div class="ttdeci">#define TIME_MAX_HOUR</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d9e/my__time_8h_source.html#l00066">my_time.h:66</a></div></div>
<div class="ttc" id="amy__time_8h_html_acc8bbcb865b261162e0842aa363a8f4f"><div class="ttname"><a href="../../da/d9e/my__time_8h.html#acc8bbcb865b261162e0842aa363a8f4f">TIME_MAX_MINUTE</a></div><div class="ttdeci">#define TIME_MAX_MINUTE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d9e/my__time_8h_source.html#l00067">my_time.h:67</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time()</a>, <a class="el" href="../../da/d9e/my__time_8h_source.html#l00063">MYSQL_TIME_WARN_OUT_OF_RANGE</a>, <a class="el" href="../../da/d9e/my__time_8h_source.html#l00066">TIME_MAX_HOUR</a>, <a class="el" href="../../da/d9e/my__time_8h_source.html#l00067">TIME_MAX_MINUTE</a>, and <a class="el" href="../../da/d9e/my__time_8h_source.html#l00068">TIME_MAX_SECOND</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d25/my__time_8c_source.html#l00484">str_to_time()</a>.</p>

</div>
</div>
<a id="a734ad69ea994acd6d4793154d6c6ee9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a734ad69ea994acd6d4793154d6c6ee9a">&#9670;&nbsp;</a></span>my_date_to_str()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int my_date_to_str </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d2/d90/mysql__time_8h.html#ac0e2ef0b90aaa480d60b90341891c4fd">MYSQL_TIME</a> *&#160;</td>
          <td class="paramname"><em>l_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d25/my__time_8c_source.html#l01031">1031</a> of file <a class="el" href="../../df/d25/my__time_8c_source.html">my_time.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;{</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/d6b/printf_8h.html#aa7d2e7e454d3fe606a71504a119dc894">sprintf</a>(to, <span class="stringliteral">&quot;%04u-%02u-%02u&quot;</span>,</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;                 l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a2fb9953d417685aaf398eec5d437374a">year</a>, l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a45f08f891e62f744268670f8ca6a35e1">month</a>, l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a90fc6fbcdaccf2fed84fc1ce94832df5">day</a>);</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;}</div>
<div class="ttc" id="aprintf_8h_html_aa7d2e7e454d3fe606a71504a119dc894"><div class="ttname"><a href="../../d3/d6b/printf_8h.html#aa7d2e7e454d3fe606a71504a119dc894">sprintf</a></div><div class="ttdeci">auto sprintf(const S &amp;fmt, const T &amp;... args) -&gt; std::basic_string&lt; Char &gt;</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/printf_8h_source.html#l00574">printf.h:574</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::day</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::month</a>, <a class="el" href="../../d3/d6b/printf_8h_source.html#l00574">sprintf()</a>, and <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::year</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d25/my__time_8c_source.html#l01056">my_TIME_to_str()</a>.</p>

</div>
</div>
<a id="a047556980f85ede672a37e3caf702697"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a047556980f85ede672a37e3caf702697">&#9670;&nbsp;</a></span>my_datetime_to_str()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int my_datetime_to_str </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d2/d90/mysql__time_8h.html#ac0e2ef0b90aaa480d60b90341891c4fd">MYSQL_TIME</a> *&#160;</td>
          <td class="paramname"><em>l_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d25/my__time_8c_source.html#l01037">1037</a> of file <a class="el" href="../../df/d25/my__time_8c_source.html">my_time.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;{</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/d6b/printf_8h.html#aa7d2e7e454d3fe606a71504a119dc894">sprintf</a>(to, <span class="stringliteral">&quot;%04u-%02u-%02u %02u:%02u:%02u&quot;</span>,</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;                 l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a2fb9953d417685aaf398eec5d437374a">year</a>, l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a45f08f891e62f744268670f8ca6a35e1">month</a>, l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a90fc6fbcdaccf2fed84fc1ce94832df5">day</a>,</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;                 l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#aa5b5cd234b2fbd7b59a9f6a5fb7973f4">hour</a>, l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a41f0b1ccc6e087271c9569956ef57634">minute</a>, l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a01759e2debb2c19a1116f2e2428c5a28">second</a>);</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;}</div>
<div class="ttc" id="astructst__mysql__time_html_a01759e2debb2c19a1116f2e2428c5a28"><div class="ttname"><a href="../../df/d63/structst__mysql__time.html#a01759e2debb2c19a1116f2e2428c5a28">st_mysql_time::second</a></div><div class="ttdeci">unsigned int second</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d90/mysql__time_8h_source.html#l00049">mysql_time.h:49</a></div></div>
<div class="ttc" id="astructst__mysql__time_html_a41f0b1ccc6e087271c9569956ef57634"><div class="ttname"><a href="../../df/d63/structst__mysql__time.html#a41f0b1ccc6e087271c9569956ef57634">st_mysql_time::minute</a></div><div class="ttdeci">unsigned int minute</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d90/mysql__time_8h_source.html#l00049">mysql_time.h:49</a></div></div>
<div class="ttc" id="astructst__mysql__time_html_aa5b5cd234b2fbd7b59a9f6a5fb7973f4"><div class="ttname"><a href="../../df/d63/structst__mysql__time.html#aa5b5cd234b2fbd7b59a9f6a5fb7973f4">st_mysql_time::hour</a></div><div class="ttdeci">unsigned int hour</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d90/mysql__time_8h_source.html#l00049">mysql_time.h:49</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::day</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::hour</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::minute</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::month</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::second</a>, <a class="el" href="../../d3/d6b/printf_8h_source.html#l00574">sprintf()</a>, and <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::year</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d25/my__time_8c_source.html#l01056">my_TIME_to_str()</a>.</p>

</div>
</div>
<a id="a969248840622da995efe7c5f3dc4e832"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a969248840622da995efe7c5f3dc4e832">&#9670;&nbsp;</a></span>my_init_time()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void my_init_time </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d25/my__time_8c_source.html#l00713">713</a> of file <a class="el" href="../../df/d25/my__time_8c_source.html">my_time.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;{</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  time_t <a class="code" href="../../d0/dc5/namespace_g3_d_1_1units.html#a0ca6270913320f6655ea7dfe8f28659d">seconds</a>;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  <span class="keyword">struct </span>tm *l_time,tm_tmp;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  <a class="code" href="../../df/d63/structst__mysql__time.html">MYSQL_TIME</a> <a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  <a class="code" href="../../d9/df6/my__global_8h.html#a74cd599039dcf29c6e6d342cf4efd0a8">my_bool</a> not_used;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160; </div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  <a class="code" href="../../d0/dc5/namespace_g3_d_1_1units.html#a0ca6270913320f6655ea7dfe8f28659d">seconds</a>= (time_t) time((time_t*) 0);</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <a class="code" href="../../da/da8/my__pthread_8h.html#aa01b6a6e462ed168982d728cc250245c">localtime_r</a>(&amp;<a class="code" href="../../d0/dc5/namespace_g3_d_1_1units.html#a0ca6270913320f6655ea7dfe8f28659d">seconds</a>,&amp;tm_tmp);</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  l_time= &amp;tm_tmp;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <a class="code" href="../../df/d25/my__time_8c.html#a4cb5cfcf13494ccfd9c852061a626ae0">my_time_zone</a>=     3600;       <span class="comment">/* Comp. for -3600 in my_gmt_sec */</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>.year=     (<a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) l_time-&gt;tm_year+1900;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>.month=    (<a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) l_time-&gt;tm_mon+1;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  <a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>.day=      (<a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) l_time-&gt;tm_mday;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  <a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>.hour=     (<a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) l_time-&gt;tm_hour;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>.minute=   (<a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) l_time-&gt;tm_min;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>.second=   (<a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) l_time-&gt;tm_sec;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <a class="code" href="../../df/d25/my__time_8c.html#ae0b6420fddca5e1b9eba75c5ff382540">my_system_gmt_sec</a>(&amp;<a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>, &amp;<a class="code" href="../../df/d25/my__time_8c.html#a4cb5cfcf13494ccfd9c852061a626ae0">my_time_zone</a>, &amp;not_used); <span class="comment">/* Init my_time_zone */</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;}</div>
<div class="ttc" id="amy__global_8h_html_a74cd599039dcf29c6e6d342cf4efd0a8"><div class="ttname"><a href="../../d9/df6/my__global_8h.html#a74cd599039dcf29c6e6d342cf4efd0a8">my_bool</a></div><div class="ttdeci">char my_bool</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df6/my__global_8h_source.html#l00992">my_global.h:992</a></div></div>
<div class="ttc" id="amy__global_8h_html_a91ad9478d81a7aaf2593e8d9c3d06a14"><div class="ttname"><a href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a></div><div class="ttdeci">unsigned int uint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df6/my__global_8h_source.html#l00475">my_global.h:475</a></div></div>
<div class="ttc" id="amy__pthread_8h_html_aa01b6a6e462ed168982d728cc250245c"><div class="ttname"><a href="../../da/da8/my__pthread_8h.html#aa01b6a6e462ed168982d728cc250245c">localtime_r</a></div><div class="ttdeci">struct tm * localtime_r(const time_t *clock, struct tm *res)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/daa/my__pthread_8c_source.html#l00075">my_pthread.c:75</a></div></div>
<div class="ttc" id="amy__time_8c_html_a4cb5cfcf13494ccfd9c852061a626ae0"><div class="ttname"><a href="../../df/d25/my__time_8c.html#a4cb5cfcf13494ccfd9c852061a626ae0">my_time_zone</a></div><div class="ttdeci">static long my_time_zone</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d25/my__time_8c_source.html#l00046">my_time.c:46</a></div></div>
<div class="ttc" id="amy__time_8c_html_ae0b6420fddca5e1b9eba75c5ff382540"><div class="ttname"><a href="../../df/d25/my__time_8c.html#ae0b6420fddca5e1b9eba75c5ff382540">my_system_gmt_sec</a></div><div class="ttdeci">my_time_t my_system_gmt_sec(const MYSQL_TIME *t_src, long *my_timezone, my_bool *in_dst_time_gap)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d25/my__time_8c_source.html#l00813">my_time.c:813</a></div></div>
<div class="ttc" id="anamespace_g3_d_1_1units_html_a0ca6270913320f6655ea7dfe8f28659d"><div class="ttname"><a href="../../d0/dc5/namespace_g3_d_1_1units.html#a0ca6270913320f6655ea7dfe8f28659d">G3D::units::seconds</a></div><div class="ttdeci">float seconds()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dfa/units_8h_source.html#l00097">units.h:97</a></div></div>
<div class="ttc" id="astructst__mysql__time_html"><div class="ttname"><a href="../../df/d63/structst__mysql__time.html">st_mysql_time</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d90/mysql__time_8h_source.html#l00047">mysql_time.h:48</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d4/daa/my__pthread_8c_source.html#l00075">localtime_r()</a>, <a class="el" href="../../df/d25/my__time_8c_source.html#l00813">my_system_gmt_sec()</a>, <a class="el" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time()</a>, <a class="el" href="../../df/d25/my__time_8c_source.html#l00046">my_time_zone</a>, and <a class="el" href="../../d3/dfa/units_8h_source.html#l00097">G3D::units::seconds()</a>.</p>

</div>
</div>
<a id="ae0b6420fddca5e1b9eba75c5ff382540"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0b6420fddca5e1b9eba75c5ff382540">&#9670;&nbsp;</a></span>my_system_gmt_sec()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d9e/my__time_8h.html#ae891eefe39a2b77a96f9525760e70a16">my_time_t</a> my_system_gmt_sec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d2/d90/mysql__time_8h.html#ac0e2ef0b90aaa480d60b90341891c4fd">MYSQL_TIME</a> *&#160;</td>
          <td class="paramname"><em>t_src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long *&#160;</td>
          <td class="paramname"><em>my_timezone</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#a74cd599039dcf29c6e6d342cf4efd0a8">my_bool</a> *&#160;</td>
          <td class="paramname"><em>in_dst_time_gap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d25/my__time_8c_source.html#l00813">813</a> of file <a class="el" href="../../df/d25/my__time_8c_source.html">my_time.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;{</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  <a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> loop;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  time_t tmp= 0;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <span class="keywordtype">int</span> shift= 0;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <a class="code" href="../../df/d63/structst__mysql__time.html">MYSQL_TIME</a> tmp_time;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <a class="code" href="../../df/d63/structst__mysql__time.html">MYSQL_TIME</a> *t= &amp;tmp_time;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  <span class="keyword">struct </span>tm *l_time,tm_tmp;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  <span class="keywordtype">long</span> <a class="code" href="../../d9/d39/dtoa_8c.html#a158860430cb5f139d88fdf19cf9ad511">diff</a>, current_timezone;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160; </div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  <span class="comment">/*</span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<span class="comment">    Use temp variable to avoid trashing input data, which could happen in</span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;<span class="comment">    case of shift required for boundary dates processing.</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;<span class="comment">  */</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  <a class="code" href="../../d6/dda/m__string_8h.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a>(&amp;tmp_time, t_src, <span class="keyword">sizeof</span>(<a class="code" href="../../df/d63/structst__mysql__time.html">MYSQL_TIME</a>));</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160; </div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../da/d9e/my__time_8h.html#a0d35c0b904ebf88f9d92edfdead88628">validate_timestamp_range</a>(t))</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160; </div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  <span class="comment">/*</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;<span class="comment">    Calculate the gmt time based on current time and timezone</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;<span class="comment">    The -1 on the end is to ensure that if have a date that exists twice</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;<span class="comment">    (like 2002-10-27 02:00:0 MET), we will find the initial date.</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;<span class="comment">    By doing -3600 we will have to call localtime_r() several times, but</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;<span class="comment">    I couldn&#39;t come up with a better way to get a repeatable result :(</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;<span class="comment">    We can&#39;t use mktime() as it&#39;s buggy on many platforms and not thread safe.</span></div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;<span class="comment">    Note: this code assumes that our time_t estimation is not too far away</span></div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;<span class="comment">    from real value (we assume that localtime_r(tmp) will return something</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;<span class="comment">    within 24 hrs from t) which is probably true for all current time zones.</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;<span class="comment">    Note2: For the dates, which have time_t representation close to</span></div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="comment">    MAX_INT32 (efficient time_t limit for supported platforms), we should</span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="comment">    do a small trick to avoid overflow. That is, convert the date, which is</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="comment">    two days earlier, and then add these days to the final value.</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="comment">    The same trick is done for the values close to 0 in time_t</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="comment">    representation for platfroms with unsigned time_t (QNX).</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="comment">    To be more verbose, here is a sample (extracted from the code below):</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="comment">    (calc_daynr(2038, 1, 19) - (long) days_at_timestart)*86400L + 4*3600L</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="comment">    would return -2147480896 because of the long type overflow. In result</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="comment">    we would get 1901 year in localtime_r(), which is an obvious error.</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;<span class="comment">    Alike problem raises with the dates close to Epoch. E.g.</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="comment">    (calc_daynr(1969, 12, 31) - (long) days_at_timestart)*86400L + 23*3600L</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="comment">    will give -3600.</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="comment">    On some platforms, (E.g. on QNX) time_t is unsigned and localtime(-3600)</span></div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="comment">    wil give us a date around 2106 year. Which is no good.</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;<span class="comment">    Theoreticaly, there could be problems with the latter conversion:</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="comment">    there are at least two timezones, which had time switches near 1 Jan</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;<span class="comment">    of 1970 (because of political reasons). These are America/Hermosillo and</span></div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="comment">    America/Mazatlan time zones. They changed their offset on</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="comment">    1970-01-01 08:00:00 UTC from UTC-8 to UTC-7. For these zones</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="comment">    the code below will give incorrect results for dates close to</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="comment">    1970-01-01, in the case OS takes into account these historical switches.</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="comment">    Luckily, it seems that we support only one platform with unsigned</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="comment">    time_t. It&#39;s QNX. And QNX does not support historical timezone data at all.</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="comment">    E.g. there are no /usr/share/zoneinfo/ files or any other mean to supply</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="comment">    historical information for localtime_r() etc. That is, the problem is not</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="comment">    relevant to QNX.</span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="comment">    We are safe with shifts close to MAX_INT32, as there are no known</span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;<span class="comment">    time switches on Jan 2038 yet :)</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;<span class="comment">  */</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  <span class="keywordflow">if</span> ((t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a2fb9953d417685aaf398eec5d437374a">year</a> == <a class="code" href="../../da/d9e/my__time_8h.html#ab1f231ca7aa25cbba68fe141779bb257">TIMESTAMP_MAX_YEAR</a>) &amp;&amp; (t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a45f08f891e62f744268670f8ca6a35e1">month</a> == 1) &amp;&amp; (t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a90fc6fbcdaccf2fed84fc1ce94832df5">day</a> &gt; 4))</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  {</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="comment">      Below we will pass (uint) (t-&gt;day - shift) to calc_daynr.</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="comment">      As we don&#39;t want to get an overflow here, we will shift</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;<span class="comment">      only safe dates. That&#39;s why we have (t-&gt;day &gt; 4) above.</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a90fc6fbcdaccf2fed84fc1ce94832df5">day</a>-= 2;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    shift= 2;</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  }</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="preprocessor">#ifdef TIME_T_UNSIGNED</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  {</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="comment">      We can get 0 in time_t representaion only on 1969, 31 of Dec or on</span></div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="comment">      1970, 1 of Jan. For both dates we use shift, which is added</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;<span class="comment">      to t-&gt;day in order to step out a bit from the border.</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;<span class="comment">      This is required for platforms, where time_t is unsigned.</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;<span class="comment">      As far as I know, among the platforms we support it&#39;s only QNX.</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;<span class="comment">      Note: the order of below if-statements is significant.</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160; </div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    <span class="keywordflow">if</span> ((t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a2fb9953d417685aaf398eec5d437374a">year</a> == <a class="code" href="../../da/d9e/my__time_8h.html#af353b8f2482f54f1f9a6f4442ec99f83">TIMESTAMP_MIN_YEAR</a> + 1) &amp;&amp; (t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a45f08f891e62f744268670f8ca6a35e1">month</a> == 1)</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;        &amp;&amp; (t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a90fc6fbcdaccf2fed84fc1ce94832df5">day</a> &lt;= 10))</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    {</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a90fc6fbcdaccf2fed84fc1ce94832df5">day</a>+= 2;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;      shift= -2;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    }</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160; </div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <span class="keywordflow">if</span> ((t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a2fb9953d417685aaf398eec5d437374a">year</a> == <a class="code" href="../../da/d9e/my__time_8h.html#af353b8f2482f54f1f9a6f4442ec99f83">TIMESTAMP_MIN_YEAR</a>) &amp;&amp; (t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a45f08f891e62f744268670f8ca6a35e1">month</a> == 12)</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        &amp;&amp; (t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a90fc6fbcdaccf2fed84fc1ce94832df5">day</a> == 31))</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    {</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;      t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a2fb9953d417685aaf398eec5d437374a">year</a>++;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a45f08f891e62f744268670f8ca6a35e1">month</a>= 1;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;      t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a90fc6fbcdaccf2fed84fc1ce94832df5">day</a>= 2;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      shift= -2;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    }</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  }</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160; </div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  tmp= (time_t) (((<a class="code" href="../../df/d25/my__time_8c.html#af0b925f42e43909aff9adaad596fcb5a">calc_daynr</a>((<a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a2fb9953d417685aaf398eec5d437374a">year</a>, (<a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a45f08f891e62f744268670f8ca6a35e1">month</a>, (<a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a90fc6fbcdaccf2fed84fc1ce94832df5">day</a>) -</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;                   (<span class="keywordtype">long</span>) <a class="code" href="../../df/d25/my__time_8c.html#ad7840188fd5d425eb572a915e753d42f">days_at_timestart</a>)*86400L + (<span class="keywordtype">long</span>) t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#aa5b5cd234b2fbd7b59a9f6a5fb7973f4">hour</a>*3600L +</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;                  (<span class="keywordtype">long</span>) (t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a41f0b1ccc6e087271c9569956ef57634">minute</a>*60 + t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a01759e2debb2c19a1116f2e2428c5a28">second</a>)) + (time_t) <a class="code" href="../../df/d25/my__time_8c.html#a4cb5cfcf13494ccfd9c852061a626ae0">my_time_zone</a> -</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                 3600);</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160; </div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  current_timezone= <a class="code" href="../../df/d25/my__time_8c.html#a4cb5cfcf13494ccfd9c852061a626ae0">my_time_zone</a>;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  <a class="code" href="../../da/da8/my__pthread_8h.html#aa01b6a6e462ed168982d728cc250245c">localtime_r</a>(&amp;tmp,&amp;tm_tmp);</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  l_time=&amp;tm_tmp;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <span class="keywordflow">for</span> (loop=0;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;       loop &lt; 2 &amp;&amp;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;     (t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#aa5b5cd234b2fbd7b59a9f6a5fb7973f4">hour</a> != (<a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) l_time-&gt;tm_hour ||</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;      t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a41f0b1ccc6e087271c9569956ef57634">minute</a> != (<a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) l_time-&gt;tm_min ||</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;          t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a01759e2debb2c19a1116f2e2428c5a28">second</a> != (<a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) l_time-&gt;tm_sec);</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;       loop++)</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  {                 <span class="comment">/* One check should be enough ? */</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="comment">/* Get difference in days */</span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d0/dc5/namespace_g3_d_1_1units.html#aa794dd48a29cf2db29a481615ef641b2">days</a>= t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a90fc6fbcdaccf2fed84fc1ce94832df5">day</a> - l_time-&gt;tm_mday;</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/dc5/namespace_g3_d_1_1units.html#aa794dd48a29cf2db29a481615ef641b2">days</a> &lt; -1)</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;      <a class="code" href="../../d0/dc5/namespace_g3_d_1_1units.html#aa794dd48a29cf2db29a481615ef641b2">days</a>= 1;                  <span class="comment">/* Month has wrapped */</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d0/dc5/namespace_g3_d_1_1units.html#aa794dd48a29cf2db29a481615ef641b2">days</a> &gt; 1)</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      <a class="code" href="../../d0/dc5/namespace_g3_d_1_1units.html#aa794dd48a29cf2db29a481615ef641b2">days</a>= -1;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <a class="code" href="../../d9/d39/dtoa_8c.html#a158860430cb5f139d88fdf19cf9ad511">diff</a>=(3600L*(long) (<a class="code" href="../../d0/dc5/namespace_g3_d_1_1units.html#aa794dd48a29cf2db29a481615ef641b2">days</a>*24+((<span class="keywordtype">int</span>) t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#aa5b5cd234b2fbd7b59a9f6a5fb7973f4">hour</a> - (int) l_time-&gt;tm_hour)) +</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;          (<span class="keywordtype">long</span>) (60*((int) t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a41f0b1ccc6e087271c9569956ef57634">minute</a> - (<span class="keywordtype">int</span>) l_time-&gt;tm_min)) +</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;          (long) ((<span class="keywordtype">int</span>) t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a01759e2debb2c19a1116f2e2428c5a28">second</a> - (int) l_time-&gt;tm_sec));</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    current_timezone+= <a class="code" href="../../d9/d39/dtoa_8c.html#a158860430cb5f139d88fdf19cf9ad511">diff</a>+3600;       <span class="comment">/* Compensate for -3600 above */</span></div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    tmp+= (time_t) <a class="code" href="../../d9/d39/dtoa_8c.html#a158860430cb5f139d88fdf19cf9ad511">diff</a>;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <a class="code" href="../../da/da8/my__pthread_8h.html#aa01b6a6e462ed168982d728cc250245c">localtime_r</a>(&amp;tmp,&amp;tm_tmp);</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    l_time=&amp;tm_tmp;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  }</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  <span class="comment">/*</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;<span class="comment">    Fix that if we are in the non existing daylight saving time hour</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<span class="comment">    we move the start of the next real hour.</span></div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="comment">    This code doesn&#39;t handle such exotical thing as time-gaps whose length</span></div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="comment">    is more than one hour or non-integer (latter can theoretically happen</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="comment">    if one of seconds will be removed due leap correction, or because of</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment">    general time correction like it happened for Africa/Monrovia time zone</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment">    in year 1972).</span></div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="comment">  */</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  <span class="keywordflow">if</span> (loop == 2 &amp;&amp; t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#aa5b5cd234b2fbd7b59a9f6a5fb7973f4">hour</a> != (<a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) l_time-&gt;tm_hour)</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  {</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d0/dc5/namespace_g3_d_1_1units.html#aa794dd48a29cf2db29a481615ef641b2">days</a>= t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a90fc6fbcdaccf2fed84fc1ce94832df5">day</a> - l_time-&gt;tm_mday;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/dc5/namespace_g3_d_1_1units.html#aa794dd48a29cf2db29a481615ef641b2">days</a> &lt; -1)</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;      <a class="code" href="../../d0/dc5/namespace_g3_d_1_1units.html#aa794dd48a29cf2db29a481615ef641b2">days</a>=1;                   <span class="comment">/* Month has wrapped */</span></div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d0/dc5/namespace_g3_d_1_1units.html#aa794dd48a29cf2db29a481615ef641b2">days</a> &gt; 1)</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;      <a class="code" href="../../d0/dc5/namespace_g3_d_1_1units.html#aa794dd48a29cf2db29a481615ef641b2">days</a>= -1;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <a class="code" href="../../d9/d39/dtoa_8c.html#a158860430cb5f139d88fdf19cf9ad511">diff</a>=(3600L*(long) (<a class="code" href="../../d0/dc5/namespace_g3_d_1_1units.html#aa794dd48a29cf2db29a481615ef641b2">days</a>*24+((<span class="keywordtype">int</span>) t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#aa5b5cd234b2fbd7b59a9f6a5fb7973f4">hour</a> - (<span class="keywordtype">int</span>) l_time-&gt;tm_hour))+</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;      (<span class="keywordtype">long</span>) (60*((int) t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a41f0b1ccc6e087271c9569956ef57634">minute</a> - (<span class="keywordtype">int</span>) l_time-&gt;tm_min)) +</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;          (long) ((<span class="keywordtype">int</span>) t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a01759e2debb2c19a1116f2e2428c5a28">second</a> - (int) l_time-&gt;tm_sec));</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d9/d39/dtoa_8c.html#a158860430cb5f139d88fdf19cf9ad511">diff</a> == 3600)</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;      tmp+=3600 - t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a41f0b1ccc6e087271c9569956ef57634">minute</a>*60 - t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a01759e2debb2c19a1116f2e2428c5a28">second</a>; <span class="comment">/* Move to next hour */</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d9/d39/dtoa_8c.html#a158860430cb5f139d88fdf19cf9ad511">diff</a> == -3600)</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      tmp-=t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a41f0b1ccc6e087271c9569956ef57634">minute</a>*60 + t-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a01759e2debb2c19a1116f2e2428c5a28">second</a>;        <span class="comment">/* Move to previous hour */</span></div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160; </div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    *in_dst_time_gap= 1;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  }</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  *my_timezone= current_timezone;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160; </div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160; </div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;  <span class="comment">/* shift back, if we were dealing with boundary dates */</span></div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  tmp+= shift*86400L;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160; </div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <span class="comment">/*</span></div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;<span class="comment">    This is possible for dates, which slightly exceed boundaries.</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;<span class="comment">    Conversion will pass ok for them, but we don&#39;t allow them.</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;<span class="comment">    First check will pass for platforms with signed time_t.</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;<span class="comment">    instruction above (tmp+= shift*86400L) could exceed</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="comment">    MAX_INT32 (== TIMESTAMP_MAX_VALUE) and overflow will happen.</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;<span class="comment">    So, tmp &lt; TIMESTAMP_MIN_VALUE will be triggered. On platfroms</span></div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;<span class="comment">    with unsigned time_t tmp+= shift*86400L might result in a number,</span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;<span class="comment">    larger then TIMESTAMP_MAX_VALUE, so another check will work.</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;<span class="comment">  */</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  <span class="keywordflow">if</span> ((tmp &lt; <a class="code" href="../../da/d9e/my__time_8h.html#a923b69ca3b3c851ebb9c2ab52329c323">TIMESTAMP_MIN_VALUE</a>) || (tmp &gt; <a class="code" href="../../da/d9e/my__time_8h.html#a8b0314b029a4d18a28d1e145ab8bd556">TIMESTAMP_MAX_VALUE</a>))</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    tmp= 0;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160; </div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="../../da/d9e/my__time_8h.html#ae891eefe39a2b77a96f9525760e70a16">my_time_t</a>) tmp;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;} <span class="comment">/* my_system_gmt_sec */</span></div>
<div class="ttc" id="adtoa_8c_html_a158860430cb5f139d88fdf19cf9ad511"><div class="ttname"><a href="../../d9/d39/dtoa_8c.html#a158860430cb5f139d88fdf19cf9ad511">diff</a></div><div class="ttdeci">static Bigint * diff(Bigint *a, Bigint *b, Stack_alloc *alloc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d39/dtoa_8c_source.html#l01108">dtoa.c:1108</a></div></div>
<div class="ttc" id="am__string_8h_html_aed653b4838032a2c5ce8960421c8cfd7"><div class="ttname"><a href="../../d6/dda/m__string_8h.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a></div><div class="ttdeci">#define memcpy(d, s, n)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dda/m__string_8h_source.html#l00050">m_string.h:50</a></div></div>
<div class="ttc" id="amy__time_8c_html_ad7840188fd5d425eb572a915e753d42f"><div class="ttname"><a href="../../df/d25/my__time_8c.html#ad7840188fd5d425eb572a915e753d42f">days_at_timestart</a></div><div class="ttdeci">static ulong const days_at_timestart</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d25/my__time_8c_source.html#l00039">my_time.c:39</a></div></div>
<div class="ttc" id="amy__time_8c_html_af0b925f42e43909aff9adaad596fcb5a"><div class="ttname"><a href="../../df/d25/my__time_8c.html#af0b925f42e43909aff9adaad596fcb5a">calc_daynr</a></div><div class="ttdeci">long calc_daynr(uint year, uint month, uint day)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d25/my__time_8c_source.html#l00768">my_time.c:768</a></div></div>
<div class="ttc" id="amy__time_8h_html_a0d35c0b904ebf88f9d92edfdead88628"><div class="ttname"><a href="../../da/d9e/my__time_8h.html#a0d35c0b904ebf88f9d92edfdead88628">validate_timestamp_range</a></div><div class="ttdeci">static my_bool validate_timestamp_range(const MYSQL_TIME *t)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d9e/my__time_8h_source.html#l00112">my_time.h:112</a></div></div>
<div class="ttc" id="amy__time_8h_html_a8b0314b029a4d18a28d1e145ab8bd556"><div class="ttname"><a href="../../da/d9e/my__time_8h.html#a8b0314b029a4d18a28d1e145ab8bd556">TIMESTAMP_MAX_VALUE</a></div><div class="ttdeci">#define TIMESTAMP_MAX_VALUE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d9e/my__time_8h_source.html#l00047">my_time.h:47</a></div></div>
<div class="ttc" id="amy__time_8h_html_a923b69ca3b3c851ebb9c2ab52329c323"><div class="ttname"><a href="../../da/d9e/my__time_8h.html#a923b69ca3b3c851ebb9c2ab52329c323">TIMESTAMP_MIN_VALUE</a></div><div class="ttdeci">#define TIMESTAMP_MIN_VALUE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d9e/my__time_8h_source.html#l00048">my_time.h:48</a></div></div>
<div class="ttc" id="amy__time_8h_html_ab1f231ca7aa25cbba68fe141779bb257"><div class="ttname"><a href="../../da/d9e/my__time_8h.html#ab1f231ca7aa25cbba68fe141779bb257">TIMESTAMP_MAX_YEAR</a></div><div class="ttdeci">#define TIMESTAMP_MAX_YEAR</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d9e/my__time_8h_source.html#l00045">my_time.h:45</a></div></div>
<div class="ttc" id="amy__time_8h_html_ae891eefe39a2b77a96f9525760e70a16"><div class="ttname"><a href="../../da/d9e/my__time_8h.html#ae891eefe39a2b77a96f9525760e70a16">my_time_t</a></div><div class="ttdeci">long my_time_t</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d9e/my__time_8h_source.html#l00039">my_time.h:39</a></div></div>
<div class="ttc" id="amy__time_8h_html_af353b8f2482f54f1f9a6f4442ec99f83"><div class="ttname"><a href="../../da/d9e/my__time_8h.html#af353b8f2482f54f1f9a6f4442ec99f83">TIMESTAMP_MIN_YEAR</a></div><div class="ttdeci">#define TIMESTAMP_MIN_YEAR</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d9e/my__time_8h_source.html#l00046">my_time.h:46</a></div></div>
<div class="ttc" id="anamespace_g3_d_1_1units_html_aa794dd48a29cf2db29a481615ef641b2"><div class="ttname"><a href="../../d0/dc5/namespace_g3_d_1_1units.html#aa794dd48a29cf2db29a481615ef641b2">G3D::units::days</a></div><div class="ttdeci">float days()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dfa/units_8h_source.html#l00112">units.h:112</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d25/my__time_8c_source.html#l00768">calc_daynr()</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::day</a>, <a class="el" href="../../d3/dfa/units_8h_source.html#l00112">G3D::units::days()</a>, <a class="el" href="../../df/d25/my__time_8c_source.html#l00039">days_at_timestart</a>, <a class="el" href="../../d9/d39/dtoa_8c_source.html#l01108">diff()</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::hour</a>, <a class="el" href="../../d4/daa/my__pthread_8c_source.html#l00075">localtime_r()</a>, <a class="el" href="../../d6/dda/m__string_8h_source.html#l00050">memcpy</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::minute</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::month</a>, <a class="el" href="../../df/d25/my__time_8c_source.html#l00046">my_time_zone</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::second</a>, <a class="el" href="../../da/d9e/my__time_8h_source.html#l00047">TIMESTAMP_MAX_VALUE</a>, <a class="el" href="../../da/d9e/my__time_8h_source.html#l00045">TIMESTAMP_MAX_YEAR</a>, <a class="el" href="../../da/d9e/my__time_8h_source.html#l00048">TIMESTAMP_MIN_VALUE</a>, <a class="el" href="../../da/d9e/my__time_8h_source.html#l00046">TIMESTAMP_MIN_YEAR</a>, <a class="el" href="../../da/d9e/my__time_8h_source.html#l00112">validate_timestamp_range()</a>, and <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::year</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d25/my__time_8c_source.html#l00713">my_init_time()</a>.</p>

</div>
</div>
<a id="a365d6a82b3ca526017716b35419c4a7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a365d6a82b3ca526017716b35419c4a7b">&#9670;&nbsp;</a></span>my_time_to_str()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int my_time_to_str </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d2/d90/mysql__time_8h.html#ac0e2ef0b90aaa480d60b90341891c4fd">MYSQL_TIME</a> *&#160;</td>
          <td class="paramname"><em>l_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d25/my__time_8c_source.html#l01024">1024</a> of file <a class="el" href="../../df/d25/my__time_8c_source.html">my_time.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;{</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  <a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> extra_hours= 0;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/d6b/printf_8h.html#aa7d2e7e454d3fe606a71504a119dc894">sprintf</a>(to, <span class="stringliteral">&quot;%s%02u:%02u:%02u&quot;</span>, (l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#afeec1da689e3e7102864a517eafd8df8">neg</a> ? <span class="stringliteral">&quot;-&quot;</span> : <span class="stringliteral">&quot;&quot;</span>),</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;                 extra_hours+ l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#aa5b5cd234b2fbd7b59a9f6a5fb7973f4">hour</a>, l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a41f0b1ccc6e087271c9569956ef57634">minute</a>, l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a01759e2debb2c19a1116f2e2428c5a28">second</a>);</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;}</div>
<div class="ttc" id="astructst__mysql__time_html_afeec1da689e3e7102864a517eafd8df8"><div class="ttname"><a href="../../df/d63/structst__mysql__time.html#afeec1da689e3e7102864a517eafd8df8">st_mysql_time::neg</a></div><div class="ttdeci">my_bool neg</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d90/mysql__time_8h_source.html#l00051">mysql_time.h:51</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::hour</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::minute</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00051">st_mysql_time::neg</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::second</a>, and <a class="el" href="../../d3/d6b/printf_8h_source.html#l00574">sprintf()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d25/my__time_8c_source.html#l01056">my_TIME_to_str()</a>.</p>

</div>
</div>
<a id="af17df617a2753169666bb4861d278ac8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af17df617a2753169666bb4861d278ac8">&#9670;&nbsp;</a></span>my_TIME_to_str()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int my_TIME_to_str </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d2/d90/mysql__time_8h.html#ac0e2ef0b90aaa480d60b90341891c4fd">MYSQL_TIME</a> *&#160;</td>
          <td class="paramname"><em>l_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d25/my__time_8c_source.html#l01056">1056</a> of file <a class="el" href="../../df/d25/my__time_8c_source.html">my_time.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;{</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  <span class="keywordflow">switch</span> (l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a129453ae2fee84375c0b0ab17962325b">time_type</a>) {</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73a8f6d8f066ea6ea77280c6a0baf063ce1">MYSQL_TIMESTAMP_DATETIME</a>:</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../df/d25/my__time_8c.html#a047556980f85ede672a37e3caf702697">my_datetime_to_str</a>(l_time, to);</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73a9e0845dc169b1f0056d2ffa3780c3f4e">MYSQL_TIMESTAMP_DATE</a>:</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../df/d25/my__time_8c.html#a734ad69ea994acd6d4793154d6c6ee9a">my_date_to_str</a>(l_time, to);</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73a283c50fa3c62a2e17ad5173442edbbb9">MYSQL_TIMESTAMP_TIME</a>:</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../df/d25/my__time_8c.html#a365d6a82b3ca526017716b35419c4a7b">my_time_to_str</a>(l_time, to);</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73ace26c6b7d67a27c905dbcd130b3bd807">MYSQL_TIMESTAMP_NONE</a>:</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73a3518624dcc1eaca8d816c52aa7528f72">MYSQL_TIMESTAMP_ERROR</a>:</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    to[0]=<span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(0);</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;  }</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;}</div>
<div class="ttc" id="amy__dbug_8h_html_af5d75f213550ec27715b65d9bdfa45ec"><div class="ttname"><a href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a></div><div class="ttdeci">#define DBUG_ASSERT(A)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d74/my__dbug_8h_source.html#l00096">my_dbug.h:96</a></div></div>
<div class="ttc" id="amy__time_8c_html_a047556980f85ede672a37e3caf702697"><div class="ttname"><a href="../../df/d25/my__time_8c.html#a047556980f85ede672a37e3caf702697">my_datetime_to_str</a></div><div class="ttdeci">int my_datetime_to_str(const MYSQL_TIME *l_time, char *to)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d25/my__time_8c_source.html#l01037">my_time.c:1037</a></div></div>
<div class="ttc" id="amy__time_8c_html_a365d6a82b3ca526017716b35419c4a7b"><div class="ttname"><a href="../../df/d25/my__time_8c.html#a365d6a82b3ca526017716b35419c4a7b">my_time_to_str</a></div><div class="ttdeci">int my_time_to_str(const MYSQL_TIME *l_time, char *to)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d25/my__time_8c_source.html#l01024">my_time.c:1024</a></div></div>
<div class="ttc" id="amy__time_8c_html_a734ad69ea994acd6d4793154d6c6ee9a"><div class="ttname"><a href="../../df/d25/my__time_8c.html#a734ad69ea994acd6d4793154d6c6ee9a">my_date_to_str</a></div><div class="ttdeci">int my_date_to_str(const MYSQL_TIME *l_time, char *to)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d25/my__time_8c_source.html#l01031">my_time.c:1031</a></div></div>
<div class="ttc" id="amysql__time_8h_html_aa633db8da896a5a0cc00ffcfb7477e73a283c50fa3c62a2e17ad5173442edbbb9"><div class="ttname"><a href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73a283c50fa3c62a2e17ad5173442edbbb9">MYSQL_TIMESTAMP_TIME</a></div><div class="ttdeci">@ MYSQL_TIMESTAMP_TIME</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d90/mysql__time_8h_source.html#l00032">mysql_time.h:31</a></div></div>
<div class="ttc" id="amysql__time_8h_html_aa633db8da896a5a0cc00ffcfb7477e73a3518624dcc1eaca8d816c52aa7528f72"><div class="ttname"><a href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73a3518624dcc1eaca8d816c52aa7528f72">MYSQL_TIMESTAMP_ERROR</a></div><div class="ttdeci">@ MYSQL_TIMESTAMP_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d90/mysql__time_8h_source.html#l00030">mysql_time.h:30</a></div></div>
<div class="ttc" id="amysql__time_8h_html_aa633db8da896a5a0cc00ffcfb7477e73a8f6d8f066ea6ea77280c6a0baf063ce1"><div class="ttname"><a href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73a8f6d8f066ea6ea77280c6a0baf063ce1">MYSQL_TIMESTAMP_DATETIME</a></div><div class="ttdeci">@ MYSQL_TIMESTAMP_DATETIME</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d90/mysql__time_8h_source.html#l00031">mysql_time.h:31</a></div></div>
<div class="ttc" id="amysql__time_8h_html_aa633db8da896a5a0cc00ffcfb7477e73a9e0845dc169b1f0056d2ffa3780c3f4e"><div class="ttname"><a href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73a9e0845dc169b1f0056d2ffa3780c3f4e">MYSQL_TIMESTAMP_DATE</a></div><div class="ttdeci">@ MYSQL_TIMESTAMP_DATE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d90/mysql__time_8h_source.html#l00031">mysql_time.h:31</a></div></div>
<div class="ttc" id="amysql__time_8h_html_aa633db8da896a5a0cc00ffcfb7477e73ace26c6b7d67a27c905dbcd130b3bd807"><div class="ttname"><a href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73ace26c6b7d67a27c905dbcd130b3bd807">MYSQL_TIMESTAMP_NONE</a></div><div class="ttdeci">@ MYSQL_TIMESTAMP_NONE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d90/mysql__time_8h_source.html#l00030">mysql_time.h:30</a></div></div>
<div class="ttc" id="astructst__mysql__time_html_a129453ae2fee84375c0b0ab17962325b"><div class="ttname"><a href="../../df/d63/structst__mysql__time.html#a129453ae2fee84375c0b0ab17962325b">st_mysql_time::time_type</a></div><div class="ttdeci">enum enum_mysql_timestamp_type time_type</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d90/mysql__time_8h_source.html#l00051">mysql_time.h:52</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d0/d74/my__dbug_8h_source.html#l00096">DBUG_ASSERT</a>, <a class="el" href="../../df/d25/my__time_8c_source.html#l01031">my_date_to_str()</a>, <a class="el" href="../../df/d25/my__time_8c_source.html#l01037">my_datetime_to_str()</a>, <a class="el" href="../../df/d25/my__time_8c_source.html#l01024">my_time_to_str()</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00031">MYSQL_TIMESTAMP_DATE</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00031">MYSQL_TIMESTAMP_DATETIME</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00030">MYSQL_TIMESTAMP_ERROR</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00030">MYSQL_TIMESTAMP_NONE</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00031">MYSQL_TIMESTAMP_TIME</a>, and <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00052">st_mysql_time::time_type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d0a/libmysql_8c_source.html#l03428">fetch_datetime_with_conversion()</a>.</p>

</div>
</div>
<a id="ad94f85587eca8a0c2c1cb7989fcf5587"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad94f85587eca8a0c2c1cb7989fcf5587">&#9670;&nbsp;</a></span>number_to_datetime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/df6/my__global_8h.html#aec67c7fb857b590c82cd4155cd21d7e7">longlong</a> number_to_datetime </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#aec67c7fb857b590c82cd4155cd21d7e7">longlong</a>&#160;</td>
          <td class="paramname"><em>nr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d90/mysql__time_8h.html#ac0e2ef0b90aaa480d60b90341891c4fd">MYSQL_TIME</a> *&#160;</td>
          <td class="paramname"><em>time_res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a>&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>was_cut</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d25/my__time_8c_source.html#l01102">1102</a> of file <a class="el" href="../../df/d25/my__time_8c_source.html">my_time.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;{</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  <span class="keywordtype">long</span> part1,part2;</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160; </div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  *was_cut= 0;</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  <a class="code" href="../../d6/dda/m__string_8h.html#ab3be5dcbbf1244672c14662b20f88b61">bzero</a>((<span class="keywordtype">char</span>*) time_res, <span class="keyword">sizeof</span>(*time_res));</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  time_res-&gt;time_type=<a class="code" href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73a9e0845dc169b1f0056d2ffa3780c3f4e">MYSQL_TIMESTAMP_DATE</a>;</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160; </div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <span class="keywordflow">if</span> (nr == <a class="code" href="../../d9/df6/my__global_8h.html#ade0ddfd44da7152d09750feb53a15ccd">LL</a>(0) || nr &gt;= <a class="code" href="../../d9/df6/my__global_8h.html#ade0ddfd44da7152d09750feb53a15ccd">LL</a>(10000101000000))</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  {</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    time_res-&gt;time_type=<a class="code" href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73a8f6d8f066ea6ea77280c6a0baf063ce1">MYSQL_TIMESTAMP_DATETIME</a>;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <span class="keywordflow">goto</span> ok;</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  }</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  <span class="keywordflow">if</span> (nr &lt; 101)</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <span class="keywordflow">goto</span> err;</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  <span class="keywordflow">if</span> (nr &lt;= (<a class="code" href="../../da/d9e/my__time_8h.html#a7e28d776bb65666ed8f77e516e38f54a">YY_PART_YEAR</a>-1)*10000L+1231L)</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  {</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    nr= (nr+20000000L)*1000000L;                 <span class="comment">/* YYMMDD, year: 2000-2069 */</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    <span class="keywordflow">goto</span> ok;</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  }</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;  <span class="keywordflow">if</span> (nr &lt; (<a class="code" href="../../da/d9e/my__time_8h.html#a7e28d776bb65666ed8f77e516e38f54a">YY_PART_YEAR</a>)*10000L+101L)</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="keywordflow">goto</span> err;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;  <span class="keywordflow">if</span> (nr &lt;= 991231L)</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  {</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    nr= (nr+19000000L)*1000000L;                 <span class="comment">/* YYMMDD, year: 1970-1999 */</span></div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    <span class="keywordflow">goto</span> ok;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  }</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  <span class="comment">/*</span></div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;<span class="comment">    Though officially we support DATE values from 1000-01-01 only, one can</span></div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;<span class="comment">    easily insert a value like 1-1-1. So, for consistency reasons such dates</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="comment">    are allowed when TIME_FUZZY_DATE is set.</span></div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;<span class="comment">  */</span></div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  <span class="keywordflow">if</span> (nr &lt; 10000101L &amp;&amp; !(flags &amp; <a class="code" href="../../da/d9e/my__time_8h.html#a5e4d9dd49e7baff05f7609c78df3cba8">TIME_FUZZY_DATE</a>))</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    <span class="keywordflow">goto</span> err;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;  <span class="keywordflow">if</span> (nr &lt;= 99991231L)</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  {</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    nr= nr*1000000L;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    <span class="keywordflow">goto</span> ok;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  }</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;  <span class="keywordflow">if</span> (nr &lt; 101000000L)</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <span class="keywordflow">goto</span> err;</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160; </div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  time_res-&gt;time_type=<a class="code" href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73a8f6d8f066ea6ea77280c6a0baf063ce1">MYSQL_TIMESTAMP_DATETIME</a>;</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160; </div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  <span class="keywordflow">if</span> (nr &lt;= (<a class="code" href="../../da/d9e/my__time_8h.html#a7e28d776bb65666ed8f77e516e38f54a">YY_PART_YEAR</a>-1)*<a class="code" href="../../d9/df6/my__global_8h.html#ade0ddfd44da7152d09750feb53a15ccd">LL</a>(10000000000)+<a class="code" href="../../d9/df6/my__global_8h.html#ade0ddfd44da7152d09750feb53a15ccd">LL</a>(1231235959))</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  {</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    nr= nr+<a class="code" href="../../d9/df6/my__global_8h.html#ade0ddfd44da7152d09750feb53a15ccd">LL</a>(20000000000000);                   <span class="comment">/* YYMMDDHHMMSS, 2000-2069 */</span></div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    <span class="keywordflow">goto</span> ok;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  }</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  <span class="keywordflow">if</span> (nr &lt;  <a class="code" href="../../da/d9e/my__time_8h.html#a7e28d776bb65666ed8f77e516e38f54a">YY_PART_YEAR</a>*<a class="code" href="../../d9/df6/my__global_8h.html#ade0ddfd44da7152d09750feb53a15ccd">LL</a>(10000000000)+ <a class="code" href="../../d9/df6/my__global_8h.html#ade0ddfd44da7152d09750feb53a15ccd">LL</a>(101000000))</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    <span class="keywordflow">goto</span> err;</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  <span class="keywordflow">if</span> (nr &lt;= <a class="code" href="../../d9/df6/my__global_8h.html#ade0ddfd44da7152d09750feb53a15ccd">LL</a>(991231235959))</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    nr= nr+<a class="code" href="../../d9/df6/my__global_8h.html#ade0ddfd44da7152d09750feb53a15ccd">LL</a>(19000000000000);      <span class="comment">/* YYMMDDHHMMSS, 1970-1999 */</span></div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160; </div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160; ok:</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  part1=(long) (nr/<a class="code" href="../../d9/df6/my__global_8h.html#ade0ddfd44da7152d09750feb53a15ccd">LL</a>(1000000));</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;  part2=(long) (nr - (<a class="code" href="../../d9/df6/my__global_8h.html#aec67c7fb857b590c82cd4155cd21d7e7">longlong</a>) part1*<a class="code" href="../../d9/df6/my__global_8h.html#ade0ddfd44da7152d09750feb53a15ccd">LL</a>(1000000));</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  time_res-&gt;year=  (int) (part1/10000L);  part1%=10000L;</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;  time_res-&gt;month= (int) part1 / 100;</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;  time_res-&gt;day=   (int) part1 % 100;</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  time_res-&gt;hour=  (int) (part2/10000L);  part2%=10000L;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  time_res-&gt;minute=(int) part2 / 100;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  time_res-&gt;second=(int) part2 % 100;</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160; </div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  <span class="keywordflow">if</span> (time_res-&gt;year &lt;= 9999 &amp;&amp; time_res-&gt;month &lt;= 12 &amp;&amp;</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;      time_res-&gt;day &lt;= 31 &amp;&amp; time_res-&gt;hour &lt;= 23 &amp;&amp;</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;      time_res-&gt;minute &lt;= 59 &amp;&amp; time_res-&gt;second &lt;= 59 &amp;&amp;</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;      !<a class="code" href="../../df/d25/my__time_8c.html#a520faad052bc2f86fa6276a8a93e4fc0">check_date</a>(time_res, (nr != 0), flags, was_cut))</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="keywordflow">return</span> nr;</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160; </div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  <span class="comment">/* Don&#39;t want to have was_cut get set if NO_ZERO_DATE was violated. */</span></div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;  <span class="keywordflow">if</span> (!nr &amp;&amp; (flags &amp; <a class="code" href="../../da/d9e/my__time_8h.html#a2e555131ba58cc767327b025993d60a0">TIME_NO_ZERO_DATE</a>))</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d9/df6/my__global_8h.html#ade0ddfd44da7152d09750feb53a15ccd">LL</a>(-1);</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160; </div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160; err:</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  *was_cut= 1;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d9/df6/my__global_8h.html#ade0ddfd44da7152d09750feb53a15ccd">LL</a>(-1);</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;}</div>
<div class="ttc" id="am__string_8h_html_ab3be5dcbbf1244672c14662b20f88b61"><div class="ttname"><a href="../../d6/dda/m__string_8h.html#ab3be5dcbbf1244672c14662b20f88b61">bzero</a></div><div class="ttdeci">#define bzero(A, B)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dda/m__string_8h_source.html#l00063">m_string.h:63</a></div></div>
<div class="ttc" id="amy__global_8h_html_ade0ddfd44da7152d09750feb53a15ccd"><div class="ttname"><a href="../../d9/df6/my__global_8h.html#ade0ddfd44da7152d09750feb53a15ccd">LL</a></div><div class="ttdeci">#define LL(A)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df6/my__global_8h_source.html#l01001">my_global.h:1001</a></div></div>
<div class="ttc" id="amy__time_8c_html_a520faad052bc2f86fa6276a8a93e4fc0"><div class="ttname"><a href="../../df/d25/my__time_8c.html#a520faad052bc2f86fa6276a8a93e4fc0">check_date</a></div><div class="ttdeci">my_bool check_date(const MYSQL_TIME *ltime, my_bool not_zero_date, ulonglong flags, int *was_cut)</div><div class="ttdoc">Check datetime value for validity according to flags.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d25/my__time_8c_source.html#l00078">my_time.c:78</a></div></div>
<div class="ttc" id="amy__time_8h_html_a7e28d776bb65666ed8f77e516e38f54a"><div class="ttname"><a href="../../da/d9e/my__time_8h.html#a7e28d776bb65666ed8f77e516e38f54a">YY_PART_YEAR</a></div><div class="ttdeci">#define YY_PART_YEAR</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d9e/my__time_8h_source.html#l00051">my_time.h:51</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d6/dda/m__string_8h_source.html#l00063">bzero</a>, <a class="el" href="../../df/d25/my__time_8c_source.html#l00078">check_date()</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::day</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::hour</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l01001">LL</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::minute</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::month</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00031">MYSQL_TIMESTAMP_DATE</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00031">MYSQL_TIMESTAMP_DATETIME</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::second</a>, <a class="el" href="../../da/d9e/my__time_8h_source.html#l00054">TIME_FUZZY_DATE</a>, <a class="el" href="../../da/d9e/my__time_8h_source.html#l00059">TIME_NO_ZERO_DATE</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00052">st_mysql_time::time_type</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::year</a>, and <a class="el" href="../../da/d9e/my__time_8h_source.html#l00051">YY_PART_YEAR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d0a/libmysql_8c_source.html#l03201">fetch_long_with_conversion()</a>.</p>

</div>
</div>
<a id="adf5b50d4400aaa2db9a84cd36951da34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf5b50d4400aaa2db9a84cd36951da34">&#9670;&nbsp;</a></span>set_zero_time()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_zero_time </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d90/mysql__time_8h.html#ac0e2ef0b90aaa480d60b90341891c4fd">MYSQL_TIME</a> *&#160;</td>
          <td class="paramname"><em>tm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73">enum_mysql_timestamp_type</a>&#160;</td>
          <td class="paramname"><em>time_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d25/my__time_8c_source.html#l01004">1004</a> of file <a class="el" href="../../df/d25/my__time_8c_source.html">my_time.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;{</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  <a class="code" href="../../d6/dda/m__string_8h.html#ab3be5dcbbf1244672c14662b20f88b61">bzero</a>((<span class="keywordtype">void</span>*) tm, <span class="keyword">sizeof</span>(*tm));</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  tm-&gt;time_type= time_type;</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d6/dda/m__string_8h_source.html#l00063">bzero</a>, and <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00052">st_mysql_time::time_type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d0a/libmysql_8c_source.html#l03042">read_binary_date()</a>, <a class="el" href="../../d5/d0a/libmysql_8c_source.html#l03012">read_binary_datetime()</a>, and <a class="el" href="../../d5/d0a/libmysql_8c_source.html#l02982">read_binary_time()</a>.</p>

</div>
</div>
<a id="a8f330ccaa295a2a7b14c3920314680ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f330ccaa295a2a7b14c3920314680ba">&#9670;&nbsp;</a></span>str_to_datetime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73">enum_mysql_timestamp_type</a> str_to_datetime </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d90/mysql__time_8h.html#ac0e2ef0b90aaa480d60b90341891c4fd">MYSQL_TIME</a> *&#160;</td>
          <td class="paramname"><em>l_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a>&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>was_cut</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d25/my__time_8c_source.html#l00078">78</a> of file <a class="el" href="../../df/d25/my__time_8c_source.html">my_time.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;{</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> field_length, <a class="code" href="../../d9/df6/my__global_8h.html#aae0dcf447aac67c9902b0ab7f3835e79">UNINIT_VAR</a>(year_length), digits, i, number_of_fields;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> date[<a class="code" href="../../df/d25/my__time_8c.html#a7e05a26646709f9b4134f98562e3e631">MAX_DATE_PARTS</a>], date_len[<a class="code" href="../../df/d25/my__time_8c.html#a7e05a26646709f9b4134f98562e3e631">MAX_DATE_PARTS</a>];</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> add_hours= 0, start_loop;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <a class="code" href="../../d9/df6/my__global_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> not_zero_date, allow_space;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <a class="code" href="../../d9/df6/my__global_8h.html#a74cd599039dcf29c6e6d342cf4efd0a8">my_bool</a> is_internal_format;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a>, *<a class="code" href="../../d9/df6/my__global_8h.html#aae0dcf447aac67c9902b0ab7f3835e79">UNINIT_VAR</a>(last_field_pos);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *end=str+<a class="code" href="../../df/de2/namespace_g3_d.html#a69a355f92fa3aab4f301667be00cd3eb">length</a>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d9/df6/my__global_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *format_position;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <a class="code" href="../../d9/df6/my__global_8h.html#a74cd599039dcf29c6e6d342cf4efd0a8">my_bool</a> found_delimitier= 0, found_space= 0;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> frac_pos, frac_len;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <a class="code" href="../../d1/d35/dbug__long_8h.html#a56a51e0edb39d13c83021fd4e7bdc9e9">DBUG_ENTER</a>(<span class="stringliteral">&quot;str_to_datetime&quot;</span>);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <a class="code" href="../../d1/d35/dbug__long_8h.html#a3770d2ff545ed3e4b714d20014e663df">DBUG_PRINT</a>(<span class="stringliteral">&quot;ENTER&quot;</span>,(<span class="stringliteral">&quot;str: %.*s&quot;</span>,<a class="code" href="../../df/de2/namespace_g3_d.html#a69a355f92fa3aab4f301667be00cd3eb">length</a>,str));</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <a class="code" href="../../d9/df6/my__global_8h.html#a74555e3a345466d7f1aaa41c5475d041">LINT_INIT</a>(field_length);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160; </div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  *was_cut= 0;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="comment">/* Skip space at start */</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="keywordflow">for</span> (; str != end &amp;&amp; <a class="code" href="../../d8/dd3/m__ctype_8h.html#a1ceef8f5a29051baa5ee61342bf861c3">my_isspace</a>(&amp;<a class="code" href="../../d8/dd3/m__ctype_8h.html#aa4bc5bb4f339afec426049fee727d701">my_charset_latin1</a>, *str) ; str++)</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    ;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="keywordflow">if</span> (str == end || ! <a class="code" href="../../d8/dd3/m__ctype_8h.html#a6eea3520a277069e3d6bb67650cb8406">my_isdigit</a>(&amp;<a class="code" href="../../d8/dd3/m__ctype_8h.html#aa4bc5bb4f339afec426049fee727d701">my_charset_latin1</a>, *str))</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    *was_cut= 1;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <a class="code" href="../../d1/d35/dbug__long_8h.html#af63d1bddf8957387d14fe70b8db22b96">DBUG_RETURN</a>(<a class="code" href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73ace26c6b7d67a27c905dbcd130b3bd807">MYSQL_TIMESTAMP_NONE</a>);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  is_internal_format= 0;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="comment">/* This has to be changed if want to activate different timestamp formats */</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  format_position= <a class="code" href="../../df/d25/my__time_8c.html#a256105598e7e1facfb2ac2a3bc111ee7">internal_format_positions</a>;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="comment">/*</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">    Calculate number of digits in first part.</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">    If length= 8 or &gt;= 14 then year is of format YYYY.</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">    (YYYY-MM-DD,  YYYYMMDD, YYYYYMMDDHHMMSS)</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">  */</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a>=str;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;       <a class="code" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a> != end &amp;&amp; (<a class="code" href="../../d8/dd3/m__ctype_8h.html#a6eea3520a277069e3d6bb67650cb8406">my_isdigit</a>(&amp;<a class="code" href="../../d8/dd3/m__ctype_8h.html#aa4bc5bb4f339afec426049fee727d701">my_charset_latin1</a>,*<a class="code" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a>) || *<a class="code" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a> == <span class="charliteral">&#39;T&#39;</span>);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;       <a class="code" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a>++)</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    ;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  digits= (<a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) (<a class="code" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a>-str);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  start_loop= 0;                                <span class="comment">/* Start of scan loop */</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  date_len[format_position[0]]= 0;              <span class="comment">/* Length of year field */</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a> == end || *<a class="code" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a> == <span class="charliteral">&#39;.&#39;</span>)</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="comment">/* Found date in internal format (only numbers like YYYYMMDD) */</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    year_length= (digits == 4 || digits == 8 || digits &gt;= 14) ? 4 : 2;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    field_length= year_length;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    is_internal_format= 1;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    format_position= <a class="code" href="../../df/d25/my__time_8c.html#a256105598e7e1facfb2ac2a3bc111ee7">internal_format_positions</a>;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  }</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordflow">if</span> (format_position[0] &gt;= 3)                <span class="comment">/* If year is after HHMMDD */</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <span class="comment">/*</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">        If year is not in first part then we have to determinate if we got</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">        a date field or a datetime field.</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">        We do this by checking if there is two numbers separated by</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">        space in the input.</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">      */</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <span class="keywordflow">while</span> (<a class="code" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a> &lt; end &amp;&amp; !<a class="code" href="../../d8/dd3/m__ctype_8h.html#a1ceef8f5a29051baa5ee61342bf861c3">my_isspace</a>(&amp;<a class="code" href="../../d8/dd3/m__ctype_8h.html#aa4bc5bb4f339afec426049fee727d701">my_charset_latin1</a>, *<a class="code" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a>))</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <a class="code" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a>++;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      <span class="keywordflow">while</span> (<a class="code" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a> &lt; end &amp;&amp; !<a class="code" href="../../d8/dd3/m__ctype_8h.html#a6eea3520a277069e3d6bb67650cb8406">my_isdigit</a>(&amp;<a class="code" href="../../d8/dd3/m__ctype_8h.html#aa4bc5bb4f339afec426049fee727d701">my_charset_latin1</a>, *<a class="code" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a>))</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <a class="code" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a>++;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a> == end)</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <span class="keywordflow">if</span> (flags &amp; <a class="code" href="../../da/d9e/my__time_8h.html#afa8028ce75b99c44829470828e72d69d">TIME_DATETIME_ONLY</a>)</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;          *was_cut= 1;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;          <a class="code" href="../../d1/d35/dbug__long_8h.html#af63d1bddf8957387d14fe70b8db22b96">DBUG_RETURN</a>(<a class="code" href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73ace26c6b7d67a27c905dbcd130b3bd807">MYSQL_TIMESTAMP_NONE</a>);   <span class="comment">/* Can&#39;t be a full datetime */</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        }</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="comment">/* Date field.  Set hour, minutes and seconds to 0 */</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        date[0]= date[1]= date[2]= date[3]= date[4]= 0;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        start_loop= 5;                         <span class="comment">/* Start with first date part */</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      }</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    }</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160; </div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    field_length= format_position[0] == 0 ? 4 : 2;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="comment">/*</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">    Only allow space in the first &quot;part&quot; of the datetime field and:</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment">    - after days, part seconds</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment">    - before and after AM/PM (handled by code later)</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">    2003-03-03 20:00:20 AM</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">    20:00:20.000000 AM 03-03-2000</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">  */</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  i= <a class="code" href="../../d9/df6/my__global_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>((<a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) format_position[0], (<a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) format_position[1]);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <a class="code" href="../../d9/df6/my__global_8h.html#adefd9f16236d64d1f92020396d6a07a3">set_if_bigger</a>(i, (<a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) format_position[2]);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  allow_space= ((1 &lt;&lt; i) | (1 &lt;&lt; format_position[6]));</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  allow_space&amp;= (1 | 2 | 4 | 8);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  not_zero_date= 0;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="keywordflow">for</span> (i = start_loop;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;       i &lt; <a class="code" href="../../df/d25/my__time_8c.html#a7e05a26646709f9b4134f98562e3e631">MAX_DATE_PARTS</a>-1 &amp;&amp; str != end &amp;&amp;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;         <a class="code" href="../../d8/dd3/m__ctype_8h.html#a6eea3520a277069e3d6bb67650cb8406">my_isdigit</a>(&amp;<a class="code" href="../../d8/dd3/m__ctype_8h.html#aa4bc5bb4f339afec426049fee727d701">my_charset_latin1</a>,*str);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;       i++)</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *start= str;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <a class="code" href="../../d9/df6/my__global_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> tmp_value= (<a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) (<a class="code" href="../../d9/df6/my__global_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>) (*str++ - <span class="charliteral">&#39;0&#39;</span>);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; </div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">      Internal format means no delimiters; every field has a fixed</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">      width. Otherwise, we scan until we find a delimiter and discard</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">      leading zeroes -- except for the microsecond part, where leading</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">      zeroes are significant, and where we never process more than six</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">      digits.</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <a class="code" href="../../d9/df6/my__global_8h.html#a74cd599039dcf29c6e6d342cf4efd0a8">my_bool</a>     scan_until_delim= !is_internal_format &amp;&amp;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                                  ((i != format_position[6]));</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">while</span> (str != end &amp;&amp; <a class="code" href="../../d8/dd3/m__ctype_8h.html#a6eea3520a277069e3d6bb67650cb8406">my_isdigit</a>(&amp;<a class="code" href="../../d8/dd3/m__ctype_8h.html#aa4bc5bb4f339afec426049fee727d701">my_charset_latin1</a>,str[0]) &amp;&amp;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;           (scan_until_delim || --field_length))</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      tmp_value=tmp_value*10 + (<a class="code" href="../../d9/df6/my__global_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a>) (<a class="code" href="../../d9/df6/my__global_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>) (*str - <span class="charliteral">&#39;0&#39;</span>);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      str++;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    date_len[i]= (<a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) (str - start);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">if</span> (tmp_value &gt; 999999)                     <span class="comment">/* Impossible date part */</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    {</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      *was_cut= 1;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <a class="code" href="../../d1/d35/dbug__long_8h.html#af63d1bddf8957387d14fe70b8db22b96">DBUG_RETURN</a>(<a class="code" href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73ace26c6b7d67a27c905dbcd130b3bd807">MYSQL_TIMESTAMP_NONE</a>);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    }</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    date[i]=tmp_value;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    not_zero_date|= tmp_value;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160; </div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="comment">/* Length of next field */</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    field_length= format_position[i+1] == 0 ? 4 : 2;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordflow">if</span> ((last_field_pos= str) == end)</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      i++;                                      <span class="comment">/* Register last found part */</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="comment">/* Allow a &#39;T&#39; after day to allow CCYYMMDDT type of fields */</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">if</span> (i == format_position[2] &amp;&amp; *str == <span class="charliteral">&#39;T&#39;</span>)</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      str++;                                    <span class="comment">/* ISO8601:  CCYYMMDDThhmmss */</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">if</span> (i == format_position[5])                <span class="comment">/* Seconds */</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="keywordflow">if</span> (*str == <span class="charliteral">&#39;.&#39;</span>)                          <span class="comment">/* Followed by part seconds */</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        str++;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        field_length= 6;                        <span class="comment">/* 6 digits */</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    }</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">while</span> (str != end &amp;&amp;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;           (<a class="code" href="../../d8/dd3/m__ctype_8h.html#a173d0205a372350f1d86e213cc649fbb">my_ispunct</a>(&amp;<a class="code" href="../../d8/dd3/m__ctype_8h.html#aa4bc5bb4f339afec426049fee727d701">my_charset_latin1</a>,*str) ||</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            <a class="code" href="../../d8/dd3/m__ctype_8h.html#a1ceef8f5a29051baa5ee61342bf861c3">my_isspace</a>(&amp;<a class="code" href="../../d8/dd3/m__ctype_8h.html#aa4bc5bb4f339afec426049fee727d701">my_charset_latin1</a>,*str)))</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d8/dd3/m__ctype_8h.html#a1ceef8f5a29051baa5ee61342bf861c3">my_isspace</a>(&amp;<a class="code" href="../../d8/dd3/m__ctype_8h.html#aa4bc5bb4f339afec426049fee727d701">my_charset_latin1</a>,*str))</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <span class="keywordflow">if</span> (!(allow_space &amp; (1 &lt;&lt; i)))</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;          *was_cut= 1;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;          <a class="code" href="../../d1/d35/dbug__long_8h.html#af63d1bddf8957387d14fe70b8db22b96">DBUG_RETURN</a>(<a class="code" href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73ace26c6b7d67a27c905dbcd130b3bd807">MYSQL_TIMESTAMP_NONE</a>);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        found_space= 1;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      str++;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      found_delimitier= 1;                      <span class="comment">/* Should be a &#39;normal&#39; date */</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="comment">/* Check if next position is AM/PM */</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordflow">if</span> (i == format_position[6])                <span class="comment">/* Seconds, time for AM/PM */</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      i++;                                      <span class="comment">/* Skip AM/PM part */</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      <span class="keywordflow">if</span> (format_position[7] != 255)            <span class="comment">/* If using AM/PM */</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      {</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="keywordflow">if</span> (str+2 &lt;= end &amp;&amp; (str[1] == <span class="charliteral">&#39;M&#39;</span> || str[1] == <span class="charliteral">&#39;m&#39;</span>))</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;          <span class="keywordflow">if</span> (str[0] == <span class="charliteral">&#39;p&#39;</span> || str[0] == <span class="charliteral">&#39;P&#39;</span>)</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            add_hours= 12;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (str[0] != <span class="charliteral">&#39;a&#39;</span> || str[0] != <span class="charliteral">&#39;A&#39;</span>)</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            <span class="keywordflow">continue</span>;                           <span class="comment">/* Not AM/PM */</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;          str+= 2;                              <span class="comment">/* Skip AM/PM */</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;          <span class="comment">/* Skip space after AM/PM */</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;          <span class="keywordflow">while</span> (str != end &amp;&amp; <a class="code" href="../../d8/dd3/m__ctype_8h.html#a1ceef8f5a29051baa5ee61342bf861c3">my_isspace</a>(&amp;<a class="code" href="../../d8/dd3/m__ctype_8h.html#aa4bc5bb4f339afec426049fee727d701">my_charset_latin1</a>,*str))</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            str++;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        }</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      }</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    }</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    last_field_pos= str;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="keywordflow">if</span> (found_delimitier &amp;&amp; !found_space &amp;&amp; (flags &amp; <a class="code" href="../../da/d9e/my__time_8h.html#afa8028ce75b99c44829470828e72d69d">TIME_DATETIME_ONLY</a>))</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    *was_cut= 1;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <a class="code" href="../../d1/d35/dbug__long_8h.html#af63d1bddf8957387d14fe70b8db22b96">DBUG_RETURN</a>(<a class="code" href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73ace26c6b7d67a27c905dbcd130b3bd807">MYSQL_TIMESTAMP_NONE</a>);          <span class="comment">/* Can&#39;t be a datetime */</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160; </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  str= last_field_pos;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160; </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  number_of_fields= i - start_loop;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="keywordflow">while</span> (i &lt; <a class="code" href="../../df/d25/my__time_8c.html#a7e05a26646709f9b4134f98562e3e631">MAX_DATE_PARTS</a>)</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    date_len[i]= 0;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    date[i++]= 0;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160; </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <span class="keywordflow">if</span> (!is_internal_format)</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    year_length= date_len[(<a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) format_position[0]];</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordflow">if</span> (!year_length)                           <span class="comment">/* Year must be specified */</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    {</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      *was_cut= 1;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      <a class="code" href="../../d1/d35/dbug__long_8h.html#af63d1bddf8957387d14fe70b8db22b96">DBUG_RETURN</a>(<a class="code" href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73ace26c6b7d67a27c905dbcd130b3bd807">MYSQL_TIMESTAMP_NONE</a>);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    }</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160; </div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a2fb9953d417685aaf398eec5d437374a">year</a>=               date[(<a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) format_position[0]];</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a45f08f891e62f744268670f8ca6a35e1">month</a>=              date[(<a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) format_position[1]];</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a90fc6fbcdaccf2fed84fc1ce94832df5">day</a>=                date[(<a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) format_position[2]];</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#aa5b5cd234b2fbd7b59a9f6a5fb7973f4">hour</a>=               date[(<a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) format_position[3]];</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a41f0b1ccc6e087271c9569956ef57634">minute</a>=             date[(<a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) format_position[4]];</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a01759e2debb2c19a1116f2e2428c5a28">second</a>=             date[(<a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) format_position[5]];</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    frac_pos= (<a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) format_position[6];</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    frac_len= date_len[frac_pos];</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">if</span> (frac_len &lt; 6)</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      date[frac_pos]*= (<a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) <a class="code" href="../../df/d25/my__time_8c.html#a3b0670d47f03ef8afdb725e2ca53d9e1">log_10_int</a>[6 - frac_len];</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a856f752bf9266990880feae2673f8eba">second_part</a>= date[frac_pos];</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordflow">if</span> (format_position[7] != (<a class="code" href="../../d9/df6/my__global_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>) 255)</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      <span class="keywordflow">if</span> (l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#aa5b5cd234b2fbd7b59a9f6a5fb7973f4">hour</a> &gt; 12)</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        *was_cut= 1;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <span class="keywordflow">goto</span> err;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      }</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#aa5b5cd234b2fbd7b59a9f6a5fb7973f4">hour</a>= l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#aa5b5cd234b2fbd7b59a9f6a5fb7973f4">hour</a>%12 + add_hours;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  }</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a2fb9953d417685aaf398eec5d437374a">year</a>=       date[0];</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a45f08f891e62f744268670f8ca6a35e1">month</a>=      date[1];</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a90fc6fbcdaccf2fed84fc1ce94832df5">day</a>=        date[2];</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#aa5b5cd234b2fbd7b59a9f6a5fb7973f4">hour</a>=       date[3];</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a41f0b1ccc6e087271c9569956ef57634">minute</a>=     date[4];</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a01759e2debb2c19a1116f2e2428c5a28">second</a>=     date[5];</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">if</span> (date_len[6] &lt; 6)</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      date[6]*= (<a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) <a class="code" href="../../df/d25/my__time_8c.html#a3b0670d47f03ef8afdb725e2ca53d9e1">log_10_int</a>[6 - date_len[6]];</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a856f752bf9266990880feae2673f8eba">second_part</a>=date[6];</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  }</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#afeec1da689e3e7102864a517eafd8df8">neg</a>= 0;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160; </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="keywordflow">if</span> (year_length == 2 &amp;&amp; not_zero_date)</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a2fb9953d417685aaf398eec5d437374a">year</a>+= (l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a2fb9953d417685aaf398eec5d437374a">year</a> &lt; <a class="code" href="../../da/d9e/my__time_8h.html#a7e28d776bb65666ed8f77e516e38f54a">YY_PART_YEAR</a> ? 2000 : 1900);</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160; </div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="keywordflow">if</span> (number_of_fields &lt; 3 ||</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a2fb9953d417685aaf398eec5d437374a">year</a> &gt; 9999 || l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a45f08f891e62f744268670f8ca6a35e1">month</a> &gt; 12 ||</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a90fc6fbcdaccf2fed84fc1ce94832df5">day</a> &gt; 31 || l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#aa5b5cd234b2fbd7b59a9f6a5fb7973f4">hour</a> &gt; 23 ||</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a41f0b1ccc6e087271c9569956ef57634">minute</a> &gt; 59 || l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a01759e2debb2c19a1116f2e2428c5a28">second</a> &gt; 59)</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  {</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="comment">/* Only give warning for a zero date if there is some garbage after */</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordflow">if</span> (!not_zero_date)                         <span class="comment">/* If zero date */</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    {</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      <span class="keywordflow">for</span> (; str != end ; str++)</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d8/dd3/m__ctype_8h.html#a1ceef8f5a29051baa5ee61342bf861c3">my_isspace</a>(&amp;<a class="code" href="../../d8/dd3/m__ctype_8h.html#aa4bc5bb4f339afec426049fee727d701">my_charset_latin1</a>, *str))</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;          not_zero_date= 1;                     <span class="comment">/* Give warning */</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      }</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    }</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    *was_cut= <a class="code" href="../../d9/df6/my__global_8h.html#aa6cd438f0d8653fd1e4d22046b0cb662">test</a>(not_zero_date);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">goto</span> err;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  }</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d25/my__time_8c.html#a520faad052bc2f86fa6276a8a93e4fc0">check_date</a>(l_time, not_zero_date != 0, flags, was_cut))</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordflow">goto</span> err;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160; </div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a129453ae2fee84375c0b0ab17962325b">time_type</a>= (number_of_fields &lt;= 3 ?</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                      <a class="code" href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73a9e0845dc169b1f0056d2ffa3780c3f4e">MYSQL_TIMESTAMP_DATE</a> : <a class="code" href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73a8f6d8f066ea6ea77280c6a0baf063ce1">MYSQL_TIMESTAMP_DATETIME</a>);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <span class="keywordflow">for</span> (; str != end ; str++)</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  {</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/dd3/m__ctype_8h.html#a1ceef8f5a29051baa5ee61342bf861c3">my_isspace</a>(&amp;<a class="code" href="../../d8/dd3/m__ctype_8h.html#aa4bc5bb4f339afec426049fee727d701">my_charset_latin1</a>,*str))</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    {</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      *was_cut= 1;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    }</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  }</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160; </div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <a class="code" href="../../d1/d35/dbug__long_8h.html#af63d1bddf8957387d14fe70b8db22b96">DBUG_RETURN</a>(l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a129453ae2fee84375c0b0ab17962325b">time_type</a>);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160; </div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;err:</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <a class="code" href="../../d6/dda/m__string_8h.html#ab3be5dcbbf1244672c14662b20f88b61">bzero</a>((<span class="keywordtype">char</span>*) l_time, <span class="keyword">sizeof</span>(*l_time));</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <a class="code" href="../../d1/d35/dbug__long_8h.html#af63d1bddf8957387d14fe70b8db22b96">DBUG_RETURN</a>(<a class="code" href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73a3518624dcc1eaca8d816c52aa7528f72">MYSQL_TIMESTAMP_ERROR</a>);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;}</div>
<div class="ttc" id="abase64_8c_html_a5e75484d7880fa39b31f27c3d7058936"><div class="ttname"><a href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a></div><div class="ttdeci">static uint pos(unsigned char c)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d36/base64_8c_source.html#l00104">base64.c:104</a></div></div>
<div class="ttc" id="am__ctype_8h_html_a173d0205a372350f1d86e213cc649fbb"><div class="ttname"><a href="../../d8/dd3/m__ctype_8h.html#a173d0205a372350f1d86e213cc649fbb">my_ispunct</a></div><div class="ttdeci">#define my_ispunct(s, c)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd3/m__ctype_8h_source.html#l00612">m_ctype.h:612</a></div></div>
<div class="ttc" id="am__ctype_8h_html_a1ceef8f5a29051baa5ee61342bf861c3"><div class="ttname"><a href="../../d8/dd3/m__ctype_8h.html#a1ceef8f5a29051baa5ee61342bf861c3">my_isspace</a></div><div class="ttdeci">#define my_isspace(s, c)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd3/m__ctype_8h_source.html#l00611">m_ctype.h:611</a></div></div>
<div class="ttc" id="am__ctype_8h_html_a6eea3520a277069e3d6bb67650cb8406"><div class="ttname"><a href="../../d8/dd3/m__ctype_8h.html#a6eea3520a277069e3d6bb67650cb8406">my_isdigit</a></div><div class="ttdeci">#define my_isdigit(s, c)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd3/m__ctype_8h_source.html#l00608">m_ctype.h:608</a></div></div>
<div class="ttc" id="am__ctype_8h_html_aa4bc5bb4f339afec426049fee727d701"><div class="ttname"><a href="../../d8/dd3/m__ctype_8h.html#aa4bc5bb4f339afec426049fee727d701">my_charset_latin1</a></div><div class="ttdeci">MYSQL_PLUGIN_IMPORT CHARSET_INFO my_charset_latin1</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dda/ctype-latin1_8c_source.html#l00419">ctype-latin1.c:419</a></div></div>
<div class="ttc" id="amy__global_8h_html_a65f85814a8290f9797005d3b28e7e5fc"><div class="ttname"><a href="../../d9/df6/my__global_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a></div><div class="ttdeci">unsigned char uchar</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df6/my__global_8h_source.html#l00874">my_global.h:874</a></div></div>
<div class="ttc" id="amy__global_8h_html_a718b4eb2652c286f4d42dc18a8e71a1a"><div class="ttname"><a href="../../d9/df6/my__global_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a></div><div class="ttdeci">unsigned long ulong</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df6/my__global_8h_source.html#l00908">my_global.h:908</a></div></div>
<div class="ttc" id="amy__global_8h_html_a74555e3a345466d7f1aaa41c5475d041"><div class="ttname"><a href="../../d9/df6/my__global_8h.html#a74555e3a345466d7f1aaa41c5475d041">LINT_INIT</a></div><div class="ttdeci">#define LINT_INIT(var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df6/my__global_8h_source.html#l00445">my_global.h:445</a></div></div>
<div class="ttc" id="amy__global_8h_html_aa6cd438f0d8653fd1e4d22046b0cb662"><div class="ttname"><a href="../../d9/df6/my__global_8h.html#aa6cd438f0d8653fd1e4d22046b0cb662">test</a></div><div class="ttdeci">#define test(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df6/my__global_8h_source.html#l00480">my_global.h:480</a></div></div>
<div class="ttc" id="amy__global_8h_html_aae0dcf447aac67c9902b0ab7f3835e79"><div class="ttname"><a href="../../d9/df6/my__global_8h.html#aae0dcf447aac67c9902b0ab7f3835e79">UNINIT_VAR</a></div><div class="ttdeci">#define UNINIT_VAR(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df6/my__global_8h_source.html#l00466">my_global.h:466</a></div></div>
<div class="ttc" id="amy__global_8h_html_adefd9f16236d64d1f92020396d6a07a3"><div class="ttname"><a href="../../d9/df6/my__global_8h.html#adefd9f16236d64d1f92020396d6a07a3">set_if_bigger</a></div><div class="ttdeci">#define set_if_bigger(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df6/my__global_8h_source.html#l00481">my_global.h:481</a></div></div>
<div class="ttc" id="amy__global_8h_html_affe776513b24d84b39af8ab0930fef7f"><div class="ttname"><a href="../../d9/df6/my__global_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a></div><div class="ttdeci">#define max(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df6/my__global_8h_source.html#l01386">my_global.h:1386</a></div></div>
<div class="ttc" id="amy__time_8c_html_a256105598e7e1facfb2ac2a3bc111ee7"><div class="ttname"><a href="../../df/d25/my__time_8c.html#a256105598e7e1facfb2ac2a3bc111ee7">internal_format_positions</a></div><div class="ttdeci">static uchar internal_format_positions[]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d25/my__time_8c_source.html#l00034">my_time.c:34</a></div></div>
<div class="ttc" id="amy__time_8c_html_a3b0670d47f03ef8afdb725e2ca53d9e1"><div class="ttname"><a href="../../df/d25/my__time_8c.html#a3b0670d47f03ef8afdb725e2ca53d9e1">log_10_int</a></div><div class="ttdeci">ulonglong log_10_int[20]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d25/my__time_8c_source.html#l00022">my_time.c:22</a></div></div>
<div class="ttc" id="amy__time_8c_html_a7e05a26646709f9b4134f98562e3e631"><div class="ttname"><a href="../../df/d25/my__time_8c.html#a7e05a26646709f9b4134f98562e3e631">MAX_DATE_PARTS</a></div><div class="ttdeci">#define MAX_DATE_PARTS</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d25/my__time_8c_source.html#l00157">my_time.c:157</a></div></div>
<div class="ttc" id="amy__time_8h_html_afa8028ce75b99c44829470828e72d69d"><div class="ttname"><a href="../../da/d9e/my__time_8h.html#afa8028ce75b99c44829470828e72d69d">TIME_DATETIME_ONLY</a></div><div class="ttdeci">#define TIME_DATETIME_ONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d9e/my__time_8h_source.html#l00055">my_time.h:55</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_a69a355f92fa3aab4f301667be00cd3eb"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#a69a355f92fa3aab4f301667be00cd3eb">G3D::length</a></div><div class="ttdeci">float length(float v)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d0b/vector_math_8h_source.html#l00208">vectorMath.h:208</a></div></div>
<div class="ttc" id="astructst__mysql__time_html_a856f752bf9266990880feae2673f8eba"><div class="ttname"><a href="../../df/d63/structst__mysql__time.html#a856f752bf9266990880feae2673f8eba">st_mysql_time::second_part</a></div><div class="ttdeci">unsigned long second_part</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d90/mysql__time_8h_source.html#l00050">mysql_time.h:50</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d5/d0a/libmysql_8c_source.html#l03075">fetch_string_with_conversion()</a>, and <a class="el" href="../../df/d25/my__time_8c_source.html#l00484">str_to_time()</a>.</p>

</div>
</div>
<a id="a6265f7d0340bbb8c511818f105e893ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6265f7d0340bbb8c511818f105e893ed">&#9670;&nbsp;</a></span>str_to_time()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/df6/my__global_8h.html#a74cd599039dcf29c6e6d342cf4efd0a8">my_bool</a> str_to_time </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d90/mysql__time_8h.html#ac0e2ef0b90aaa480d60b90341891c4fd">MYSQL_TIME</a> *&#160;</td>
          <td class="paramname"><em>l_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>warning</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d25/my__time_8c_source.html#l00484">484</a> of file <a class="el" href="../../df/d25/my__time_8c_source.html">my_time.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;{</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  <a class="code" href="../../d9/df6/my__global_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> date[5];</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <a class="code" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a> <a class="code" href="../../d7/d71/classvalue.html">value</a>;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *end=str+<a class="code" href="../../df/de2/namespace_g3_d.html#a69a355f92fa3aab4f301667be00cd3eb">length</a>, *end_of_days;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <a class="code" href="../../d9/df6/my__global_8h.html#a74cd599039dcf29c6e6d342cf4efd0a8">my_bool</a> found_days,found_hours;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  <a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> state;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160; </div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#afeec1da689e3e7102864a517eafd8df8">neg</a>=0;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  *warning= 0;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="keywordflow">for</span> (; str != end &amp;&amp; <a class="code" href="../../d8/dd3/m__ctype_8h.html#a1ceef8f5a29051baa5ee61342bf861c3">my_isspace</a>(&amp;<a class="code" href="../../d8/dd3/m__ctype_8h.html#aa4bc5bb4f339afec426049fee727d701">my_charset_latin1</a>,*str) ; str++)</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <a class="code" href="../../df/de2/namespace_g3_d.html#a69a355f92fa3aab4f301667be00cd3eb">length</a>--;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <span class="keywordflow">if</span> (str != end &amp;&amp; *str == <span class="charliteral">&#39;-&#39;</span>)</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  {</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#afeec1da689e3e7102864a517eafd8df8">neg</a>=1;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    str++;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <a class="code" href="../../df/de2/namespace_g3_d.html#a69a355f92fa3aab4f301667be00cd3eb">length</a>--;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  }</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <span class="keywordflow">if</span> (str == end)</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160; </div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <span class="comment">/* Check first if this is a full TIMESTAMP */</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/de2/namespace_g3_d.html#a69a355f92fa3aab4f301667be00cd3eb">length</a> &gt;= 12)</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  {                                             <span class="comment">/* Probably full timestamp */</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keywordtype">int</span> was_cut;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="keyword">enum</span> <a class="code" href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73">enum_mysql_timestamp_type</a></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;      res= <a class="code" href="../../df/d25/my__time_8c.html#a8f330ccaa295a2a7b14c3920314680ba">str_to_datetime</a>(str, <a class="code" href="../../df/de2/namespace_g3_d.html#a69a355f92fa3aab4f301667be00cd3eb">length</a>, l_time,</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                           (<a class="code" href="../../da/d9e/my__time_8h.html#a5e4d9dd49e7baff05f7609c78df3cba8">TIME_FUZZY_DATE</a> | <a class="code" href="../../da/d9e/my__time_8h.html#afa8028ce75b99c44829470828e72d69d">TIME_DATETIME_ONLY</a>), &amp;was_cut);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>) res &gt;= (<span class="keywordtype">int</span>) <a class="code" href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73a3518624dcc1eaca8d816c52aa7528f72">MYSQL_TIMESTAMP_ERROR</a>)</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    {</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      <span class="keywordflow">if</span> (was_cut)</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        *warning|= <a class="code" href="../../da/d9e/my__time_8h.html#a17b4dfe7c2ddd176cafddf657a1b1478">MYSQL_TIME_WARN_TRUNCATED</a>;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      <span class="keywordflow">return</span> res == <a class="code" href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73a3518624dcc1eaca8d816c52aa7528f72">MYSQL_TIMESTAMP_ERROR</a>;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    }</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  }</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160; </div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="comment">/* Not a timestamp. Try to get this as a DAYS_TO_SECOND string */</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d7/d71/classvalue.html">value</a>=0; str != end &amp;&amp; <a class="code" href="../../d8/dd3/m__ctype_8h.html#a6eea3520a277069e3d6bb67650cb8406">my_isdigit</a>(&amp;<a class="code" href="../../d8/dd3/m__ctype_8h.html#aa4bc5bb4f339afec426049fee727d701">my_charset_latin1</a>,*str) ; str++)</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <a class="code" href="../../d7/d71/classvalue.html">value</a>=<a class="code" href="../../d7/d71/classvalue.html">value</a>*10L + (<span class="keywordtype">long</span>) (*str - <span class="charliteral">&#39;0&#39;</span>);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="comment">/* Skip all space after &#39;days&#39; */</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  end_of_days= str;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <span class="keywordflow">for</span> (; str != end &amp;&amp; <a class="code" href="../../d8/dd3/m__ctype_8h.html#a1ceef8f5a29051baa5ee61342bf861c3">my_isspace</a>(&amp;<a class="code" href="../../d8/dd3/m__ctype_8h.html#aa4bc5bb4f339afec426049fee727d701">my_charset_latin1</a>, str[0]) ; str++)</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    ;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <a class="code" href="../../d9/df6/my__global_8h.html#a74555e3a345466d7f1aaa41c5475d041">LINT_INIT</a>(state);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  found_days=found_hours=0;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) (end-str) &gt; 1 &amp;&amp; str != end_of_days &amp;&amp;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      <a class="code" href="../../d8/dd3/m__ctype_8h.html#a6eea3520a277069e3d6bb67650cb8406">my_isdigit</a>(&amp;<a class="code" href="../../d8/dd3/m__ctype_8h.html#aa4bc5bb4f339afec426049fee727d701">my_charset_latin1</a>, *str))</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  {                                             <span class="comment">/* Found days part */</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    date[0]= (<a class="code" href="../../d9/df6/my__global_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a>) <a class="code" href="../../d7/d71/classvalue.html">value</a>;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    state= 1;                                   <span class="comment">/* Assume next is hours */</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    found_days= 1;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  }</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((end-str) &gt; 1 &amp;&amp;  *str == <a class="code" href="../../df/d25/my__time_8c.html#a6eb4181511414f87e37c0b1f9a661833">time_separator</a> &amp;&amp;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;           <a class="code" href="../../d8/dd3/m__ctype_8h.html#a6eea3520a277069e3d6bb67650cb8406">my_isdigit</a>(&amp;<a class="code" href="../../d8/dd3/m__ctype_8h.html#aa4bc5bb4f339afec426049fee727d701">my_charset_latin1</a>, str[1]))</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  {</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    date[0]= 0;                                 <span class="comment">/* Assume we found hours */</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    date[1]= (<a class="code" href="../../d9/df6/my__global_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a>) <a class="code" href="../../d7/d71/classvalue.html">value</a>;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    state=2;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    found_hours=1;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    str++;                                      <span class="comment">/* skip &#39;:&#39; */</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  }</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  {</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="comment">/* String given as one number; assume HHMMSS format */</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    date[0]= 0;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    date[1]= (<a class="code" href="../../d9/df6/my__global_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a>) (<a class="code" href="../../d7/d71/classvalue.html">value</a>/10000);</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    date[2]= (<a class="code" href="../../d9/df6/my__global_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a>) (<a class="code" href="../../d7/d71/classvalue.html">value</a>/100 % 100);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    date[3]= (<a class="code" href="../../d9/df6/my__global_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a>) (<a class="code" href="../../d7/d71/classvalue.html">value</a> % 100);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    state=4;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="keywordflow">goto</span> fractional;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  }</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160; </div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <span class="comment">/* Read hours, minutes and seconds */</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <span class="keywordflow">for</span> (;;)</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  {</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../d7/d71/classvalue.html">value</a>=0; str != end &amp;&amp; <a class="code" href="../../d8/dd3/m__ctype_8h.html#a6eea3520a277069e3d6bb67650cb8406">my_isdigit</a>(&amp;<a class="code" href="../../d8/dd3/m__ctype_8h.html#aa4bc5bb4f339afec426049fee727d701">my_charset_latin1</a>,*str) ; str++)</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <a class="code" href="../../d7/d71/classvalue.html">value</a>=<a class="code" href="../../d7/d71/classvalue.html">value</a>*10L + (<span class="keywordtype">long</span>) (*str - <span class="charliteral">&#39;0&#39;</span>);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    date[state++]= (<a class="code" href="../../d9/df6/my__global_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a>) <a class="code" href="../../d7/d71/classvalue.html">value</a>;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="keywordflow">if</span> (state == 4 || (end-str) &lt; 2 || *str != <a class="code" href="../../df/d25/my__time_8c.html#a6eb4181511414f87e37c0b1f9a661833">time_separator</a> ||</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        !<a class="code" href="../../d8/dd3/m__ctype_8h.html#a6eea3520a277069e3d6bb67650cb8406">my_isdigit</a>(&amp;<a class="code" href="../../d8/dd3/m__ctype_8h.html#aa4bc5bb4f339afec426049fee727d701">my_charset_latin1</a>,str[1]))</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    str++;                                      <span class="comment">/* Skip time_separator (&#39;:&#39;) */</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  }</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160; </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="keywordflow">if</span> (state != 4)</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  {                                             <span class="comment">/* Not HH:MM:SS */</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="comment">/* Fix the date to assume that seconds was given */</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keywordflow">if</span> (!found_hours &amp;&amp; !found_days)</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    {</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <a class="code" href="../../d6/dda/m__string_8h.html#a03a8314d5d5423f60bfac61ed95f900c">bmove_upp</a>((<a class="code" href="../../d9/df6/my__global_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>*) (date+4), (<a class="code" href="../../d9/df6/my__global_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>*) (date+state),</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                <span class="keyword">sizeof</span>(<span class="keywordtype">long</span>)*(state-1));</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <a class="code" href="../../d6/dda/m__string_8h.html#ab3be5dcbbf1244672c14662b20f88b61">bzero</a>((<a class="code" href="../../d9/df6/my__global_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>*) date, <span class="keyword">sizeof</span>(<span class="keywordtype">long</span>)*(4-state));</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    }</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      <a class="code" href="../../d6/dda/m__string_8h.html#ab3be5dcbbf1244672c14662b20f88b61">bzero</a>((<a class="code" href="../../d9/df6/my__global_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>*) (date+state), <span class="keyword">sizeof</span>(<span class="keywordtype">long</span>)*(4-state));</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  }</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160; </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;fractional:</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <span class="comment">/* Get fractional second part */</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="keywordflow">if</span> ((end-str) &gt;= 2 &amp;&amp; *str == <span class="charliteral">&#39;.&#39;</span> &amp;&amp; <a class="code" href="../../d8/dd3/m__ctype_8h.html#a6eea3520a277069e3d6bb67650cb8406">my_isdigit</a>(&amp;<a class="code" href="../../d8/dd3/m__ctype_8h.html#aa4bc5bb4f339afec426049fee727d701">my_charset_latin1</a>,str[1]))</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  {</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="keywordtype">int</span> field_length= 5;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    str++; <a class="code" href="../../d7/d71/classvalue.html">value</a>=(<a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) (<a class="code" href="../../d9/df6/my__global_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>) (*str - <span class="charliteral">&#39;0&#39;</span>);</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">while</span> (++str != end &amp;&amp; <a class="code" href="../../d8/dd3/m__ctype_8h.html#a6eea3520a277069e3d6bb67650cb8406">my_isdigit</a>(&amp;<a class="code" href="../../d8/dd3/m__ctype_8h.html#aa4bc5bb4f339afec426049fee727d701">my_charset_latin1</a>, *str))</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    {</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;      <span class="keywordflow">if</span> (field_length-- &gt; 0)</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        <a class="code" href="../../d7/d71/classvalue.html">value</a>= <a class="code" href="../../d7/d71/classvalue.html">value</a>*10 + (<a class="code" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) (<a class="code" href="../../d9/df6/my__global_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>) (*str - <span class="charliteral">&#39;0&#39;</span>);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    }</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordflow">if</span> (field_length &gt; 0)</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      <a class="code" href="../../d7/d71/classvalue.html">value</a>*= (long) <a class="code" href="../../df/d25/my__time_8c.html#a3b0670d47f03ef8afdb725e2ca53d9e1">log_10_int</a>[field_length];</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field_length &lt; 0)</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      *warning|= <a class="code" href="../../da/d9e/my__time_8h.html#a17b4dfe7c2ddd176cafddf657a1b1478">MYSQL_TIME_WARN_TRUNCATED</a>;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    date[4]= (<a class="code" href="../../d9/df6/my__global_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a>) <a class="code" href="../../d7/d71/classvalue.html">value</a>;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  }</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    date[4]=0;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    </div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <span class="comment">/* Check for exponent part: E&lt;gigit&gt; | E&lt;sign&gt;&lt;digit&gt; */</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="comment">/* (may occur as result of %g formatting of time value) */</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  <span class="keywordflow">if</span> ((end - str) &gt; 1 &amp;&amp;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;      (*str == <span class="charliteral">&#39;e&#39;</span> || *str == <span class="charliteral">&#39;E&#39;</span>) &amp;&amp;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      (<a class="code" href="../../d8/dd3/m__ctype_8h.html#a6eea3520a277069e3d6bb67650cb8406">my_isdigit</a>(&amp;<a class="code" href="../../d8/dd3/m__ctype_8h.html#aa4bc5bb4f339afec426049fee727d701">my_charset_latin1</a>, str[1]) ||</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;       ((str[1] == <span class="charliteral">&#39;-&#39;</span> || str[1] == <span class="charliteral">&#39;+&#39;</span>) &amp;&amp;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        (end - str) &gt; 2 &amp;&amp;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        <a class="code" href="../../d8/dd3/m__ctype_8h.html#a6eea3520a277069e3d6bb67650cb8406">my_isdigit</a>(&amp;<a class="code" href="../../d8/dd3/m__ctype_8h.html#aa4bc5bb4f339afec426049fee727d701">my_charset_latin1</a>, str[2]))))</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160; </div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d25/my__time_8c.html#a256105598e7e1facfb2ac2a3bc111ee7">internal_format_positions</a>[7] != 255)</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  {</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="comment">/* Read a possible AM/PM */</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="keywordflow">while</span> (str != end &amp;&amp; <a class="code" href="../../d8/dd3/m__ctype_8h.html#a1ceef8f5a29051baa5ee61342bf861c3">my_isspace</a>(&amp;<a class="code" href="../../d8/dd3/m__ctype_8h.html#aa4bc5bb4f339afec426049fee727d701">my_charset_latin1</a>, *str))</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      str++;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="keywordflow">if</span> (str+2 &lt;= end &amp;&amp; (str[1] == <span class="charliteral">&#39;M&#39;</span> || str[1] == <span class="charliteral">&#39;m&#39;</span>))</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    {</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <span class="keywordflow">if</span> (str[0] == <span class="charliteral">&#39;p&#39;</span> || str[0] == <span class="charliteral">&#39;P&#39;</span>)</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      {</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        str+= 2;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        date[1]= date[1]%12 + 12;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      }</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (str[0] == <span class="charliteral">&#39;a&#39;</span> || str[0] == <span class="charliteral">&#39;A&#39;</span>)</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        str+=2;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    }</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  }</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160; </div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <span class="comment">/* Integer overflow checks */</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <span class="keywordflow">if</span> (date[0] &gt; UINT_MAX || date[1] &gt; UINT_MAX ||</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      date[2] &gt; UINT_MAX || date[3] &gt; UINT_MAX ||</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      date[4] &gt; UINT_MAX)</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  </div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a2fb9953d417685aaf398eec5d437374a">year</a>=         0;                      <span class="comment">/* For protocol::store_time */</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a45f08f891e62f744268670f8ca6a35e1">month</a>=        0;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a90fc6fbcdaccf2fed84fc1ce94832df5">day</a>=          date[0];</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#aa5b5cd234b2fbd7b59a9f6a5fb7973f4">hour</a>=         date[1];</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a41f0b1ccc6e087271c9569956ef57634">minute</a>=       date[2];</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a01759e2debb2c19a1116f2e2428c5a28">second</a>=       date[3];</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a856f752bf9266990880feae2673f8eba">second_part</a>=  date[4];</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  l_time-&gt;<a class="code" href="../../df/d63/structst__mysql__time.html#a129453ae2fee84375c0b0ab17962325b">time_type</a>= <a class="code" href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73a283c50fa3c62a2e17ad5173442edbbb9">MYSQL_TIMESTAMP_TIME</a>;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160; </div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  <span class="comment">/* Check if the value is valid and fits into MYSQL_TIME range */</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d25/my__time_8c.html#a0b555d984ccd71c8be3236cb7468fa22">check_time_range</a>(l_time, warning))</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  </div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="comment">/* Check if there is garbage at end of the MYSQL_TIME specification */</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <span class="keywordflow">if</span> (str != end)</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  {</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="keywordflow">do</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    {</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d8/dd3/m__ctype_8h.html#a1ceef8f5a29051baa5ee61342bf861c3">my_isspace</a>(&amp;<a class="code" href="../../d8/dd3/m__ctype_8h.html#aa4bc5bb4f339afec426049fee727d701">my_charset_latin1</a>,*str))</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      {</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        *warning|= <a class="code" href="../../da/d9e/my__time_8h.html#a17b4dfe7c2ddd176cafddf657a1b1478">MYSQL_TIME_WARN_TRUNCATED</a>;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      }</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    } <span class="keywordflow">while</span> (++str != end);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  }</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;}</div>
<div class="ttc" id="aclassvalue_html"><div class="ttname"><a href="../../d7/d71/classvalue.html">value</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d71/fmt_2include_2fmt_2core_8h_source.html#l01120">core.h:1120</a></div></div>
<div class="ttc" id="am__string_8h_html_a03a8314d5d5423f60bfac61ed95f900c"><div class="ttname"><a href="../../d6/dda/m__string_8h.html#a03a8314d5d5423f60bfac61ed95f900c">bmove_upp</a></div><div class="ttdeci">void bmove_upp(uchar *dst, const uchar *src, size_t len)</div></div>
<div class="ttc" id="amy__global_8h_html_ae7c11be50f0b11d048979398c5fdcfa5"><div class="ttname"><a href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a></div><div class="ttdeci">unsigned long ulonglong</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df6/my__global_8h_source.html#l00920">my_global.h:920</a></div></div>
<div class="ttc" id="amy__time_8c_html_a0b555d984ccd71c8be3236cb7468fa22"><div class="ttname"><a href="../../df/d25/my__time_8c.html#a0b555d984ccd71c8be3236cb7468fa22">check_time_range</a></div><div class="ttdeci">int check_time_range(struct st_mysql_time *my_time, int *warning)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d25/my__time_8c_source.html#l00684">my_time.c:684</a></div></div>
<div class="ttc" id="amy__time_8c_html_a6eb4181511414f87e37c0b1f9a661833"><div class="ttname"><a href="../../df/d25/my__time_8c.html#a6eb4181511414f87e37c0b1f9a661833">time_separator</a></div><div class="ttdeci">static char time_separator</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d25/my__time_8c_source.html#l00037">my_time.c:37</a></div></div>
<div class="ttc" id="amy__time_8c_html_a8f330ccaa295a2a7b14c3920314680ba"><div class="ttname"><a href="../../df/d25/my__time_8c.html#a8f330ccaa295a2a7b14c3920314680ba">str_to_datetime</a></div><div class="ttdeci">enum enum_mysql_timestamp_type str_to_datetime(const char *str, uint length, MYSQL_TIME *l_time, ulonglong flags, int *was_cut)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d25/my__time_8c_source.html#l00078">my_time.c:160</a></div></div>
<div class="ttc" id="amy__time_8h_html_a17b4dfe7c2ddd176cafddf657a1b1478"><div class="ttname"><a href="../../da/d9e/my__time_8h.html#a17b4dfe7c2ddd176cafddf657a1b1478">MYSQL_TIME_WARN_TRUNCATED</a></div><div class="ttdeci">#define MYSQL_TIME_WARN_TRUNCATED</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d9e/my__time_8h_source.html#l00062">my_time.h:62</a></div></div>
<div class="ttc" id="amysql__time_8h_html_aa633db8da896a5a0cc00ffcfb7477e73"><div class="ttname"><a href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73">enum_mysql_timestamp_type</a></div><div class="ttdeci">enum_mysql_timestamp_type</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d90/mysql__time_8h_source.html#l00028">mysql_time.h:29</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d6/dda/m__string_8h.html#a03a8314d5d5423f60bfac61ed95f900c">bmove_upp()</a>, <a class="el" href="../../d6/dda/m__string_8h_source.html#l00063">bzero</a>, <a class="el" href="../../df/d25/my__time_8c_source.html#l00684">check_time_range()</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::day</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::hour</a>, <a class="el" href="../../df/d25/my__time_8c_source.html#l00034">internal_format_positions</a>, <a class="el" href="../../d3/d0b/vector_math_8h_source.html#l00208">G3D::length()</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l00445">LINT_INIT</a>, <a class="el" href="../../df/d25/my__time_8c_source.html#l00022">log_10_int</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::minute</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::month</a>, <a class="el" href="../../d6/dda/ctype-latin1_8c_source.html#l00419">my_charset_latin1</a>, <a class="el" href="../../d8/dd3/m__ctype_8h_source.html#l00608">my_isdigit</a>, <a class="el" href="../../d8/dd3/m__ctype_8h_source.html#l00611">my_isspace</a>, <a class="el" href="../../da/d9e/my__time_8h_source.html#l00062">MYSQL_TIME_WARN_TRUNCATED</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00030">MYSQL_TIMESTAMP_ERROR</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00031">MYSQL_TIMESTAMP_TIME</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00051">st_mysql_time::neg</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::second</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00050">st_mysql_time::second_part</a>, <a class="el" href="../../df/d25/my__time_8c_source.html#l00160">str_to_datetime()</a>, <a class="el" href="../../da/d9e/my__time_8h_source.html#l00055">TIME_DATETIME_ONLY</a>, <a class="el" href="../../da/d9e/my__time_8h_source.html#l00054">TIME_FUZZY_DATE</a>, <a class="el" href="../../df/d25/my__time_8c_source.html#l00037">time_separator</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00052">st_mysql_time::time_type</a>, and <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00049">st_mysql_time::year</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d0a/libmysql_8c_source.html#l03075">fetch_string_with_conversion()</a>.</p>

</div>
</div>
<a id="ab28393ef12ecf32d0c88cb25bc3d9ce5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab28393ef12ecf32d0c88cb25bc3d9ce5">&#9670;&nbsp;</a></span>TIME_to_ulonglong()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a> TIME_to_ulonglong </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d2/d90/mysql__time_8h.html#ac0e2ef0b90aaa480d60b90341891c4fd">MYSQL_TIME</a> *&#160;</td>
          <td class="paramname"><em>my_time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d25/my__time_8c_source.html#l01239">1239</a> of file <a class="el" href="../../df/d25/my__time_8c_source.html">my_time.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;{</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>-&gt;time_type) {</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73a8f6d8f066ea6ea77280c6a0baf063ce1">MYSQL_TIMESTAMP_DATETIME</a>:</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../df/d25/my__time_8c.html#a21ae158cc19a11c1d191b2b913df4624">TIME_to_ulonglong_datetime</a>(<a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>);</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73a9e0845dc169b1f0056d2ffa3780c3f4e">MYSQL_TIMESTAMP_DATE</a>:</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../df/d25/my__time_8c.html#acc8ac68021c33036b1dfaf5c67507d95">TIME_to_ulonglong_date</a>(<a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>);</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73a283c50fa3c62a2e17ad5173442edbbb9">MYSQL_TIMESTAMP_TIME</a>:</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../df/d25/my__time_8c.html#a3848a95ec20f44373155194145cb6af9">TIME_to_ulonglong_time</a>(<a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>);</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73ace26c6b7d67a27c905dbcd130b3bd807">MYSQL_TIMESTAMP_NONE</a>:</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../d2/d90/mysql__time_8h.html#aa633db8da896a5a0cc00ffcfb7477e73a3518624dcc1eaca8d816c52aa7528f72">MYSQL_TIMESTAMP_ERROR</a>:</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d9/df6/my__global_8h.html#ab80dc247903411d69d8b4cc972046da7">ULL</a>(0);</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(0);</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  }</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;}</div>
<div class="ttc" id="amy__global_8h_html_ab80dc247903411d69d8b4cc972046da7"><div class="ttname"><a href="../../d9/df6/my__global_8h.html#ab80dc247903411d69d8b4cc972046da7">ULL</a></div><div class="ttdeci">#define ULL(A)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df6/my__global_8h_source.html#l01009">my_global.h:1009</a></div></div>
<div class="ttc" id="amy__time_8c_html_a21ae158cc19a11c1d191b2b913df4624"><div class="ttname"><a href="../../df/d25/my__time_8c.html#a21ae158cc19a11c1d191b2b913df4624">TIME_to_ulonglong_datetime</a></div><div class="ttdeci">ulonglong TIME_to_ulonglong_datetime(const MYSQL_TIME *my_time)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d25/my__time_8c_source.html#l01185">my_time.c:1185</a></div></div>
<div class="ttc" id="amy__time_8c_html_a3848a95ec20f44373155194145cb6af9"><div class="ttname"><a href="../../df/d25/my__time_8c.html#a3848a95ec20f44373155194145cb6af9">TIME_to_ulonglong_time</a></div><div class="ttdeci">ulonglong TIME_to_ulonglong_time(const MYSQL_TIME *my_time)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d25/my__time_8c_source.html#l01211">my_time.c:1211</a></div></div>
<div class="ttc" id="amy__time_8c_html_acc8ac68021c33036b1dfaf5c67507d95"><div class="ttname"><a href="../../df/d25/my__time_8c.html#acc8ac68021c33036b1dfaf5c67507d95">TIME_to_ulonglong_date</a></div><div class="ttdeci">ulonglong TIME_to_ulonglong_date(const MYSQL_TIME *my_time)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d25/my__time_8c_source.html#l01198">my_time.c:1198</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d0/d74/my__dbug_8h_source.html#l00096">DBUG_ASSERT</a>, <a class="el" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time()</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00031">MYSQL_TIMESTAMP_DATE</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00031">MYSQL_TIMESTAMP_DATETIME</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00030">MYSQL_TIMESTAMP_ERROR</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00030">MYSQL_TIMESTAMP_NONE</a>, <a class="el" href="../../d2/d90/mysql__time_8h_source.html#l00031">MYSQL_TIMESTAMP_TIME</a>, <a class="el" href="../../df/d25/my__time_8c_source.html#l01198">TIME_to_ulonglong_date()</a>, <a class="el" href="../../df/d25/my__time_8c_source.html#l01185">TIME_to_ulonglong_datetime()</a>, <a class="el" href="../../df/d25/my__time_8c_source.html#l01211">TIME_to_ulonglong_time()</a>, and <a class="el" href="../../d9/df6/my__global_8h_source.html#l01009">ULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d0a/libmysql_8c_source.html#l03428">fetch_datetime_with_conversion()</a>.</p>

</div>
</div>
<a id="acc8ac68021c33036b1dfaf5c67507d95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc8ac68021c33036b1dfaf5c67507d95">&#9670;&nbsp;</a></span>TIME_to_ulonglong_date()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a> TIME_to_ulonglong_date </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d2/d90/mysql__time_8h.html#ac0e2ef0b90aaa480d60b90341891c4fd">MYSQL_TIME</a> *&#160;</td>
          <td class="paramname"><em>my_time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d25/my__time_8c_source.html#l01198">1198</a> of file <a class="el" href="../../df/d25/my__time_8c_source.html">my_time.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;{</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a>) (<a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>-&gt;year * 10000UL + <a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>-&gt;month * 100UL +</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;                      <a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>-&gt;day);</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d25/my__time_8c_source.html#l01239">TIME_to_ulonglong()</a>.</p>

</div>
</div>
<a id="a21ae158cc19a11c1d191b2b913df4624"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21ae158cc19a11c1d191b2b913df4624">&#9670;&nbsp;</a></span>TIME_to_ulonglong_datetime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a> TIME_to_ulonglong_datetime </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d2/d90/mysql__time_8h.html#ac0e2ef0b90aaa480d60b90341891c4fd">MYSQL_TIME</a> *&#160;</td>
          <td class="paramname"><em>my_time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d25/my__time_8c_source.html#l01185">1185</a> of file <a class="el" href="../../df/d25/my__time_8c_source.html">my_time.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;{</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  <span class="keywordflow">return</span> ((<a class="code" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a>) (<a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>-&gt;year * 10000UL +</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;                       <a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>-&gt;month * 100UL +</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;                       <a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>-&gt;day) * <a class="code" href="../../d9/df6/my__global_8h.html#ab80dc247903411d69d8b4cc972046da7">ULL</a>(1000000) +</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;          (<a class="code" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a>) (<a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>-&gt;hour * 10000UL +</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;                       <a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>-&gt;minute * 100UL +</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;                       <a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>-&gt;second));</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time()</a>, and <a class="el" href="../../d9/df6/my__global_8h_source.html#l01009">ULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d25/my__time_8c_source.html#l01239">TIME_to_ulonglong()</a>.</p>

</div>
</div>
<a id="a3848a95ec20f44373155194145cb6af9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3848a95ec20f44373155194145cb6af9">&#9670;&nbsp;</a></span>TIME_to_ulonglong_time()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a> TIME_to_ulonglong_time </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d2/d90/mysql__time_8h.html#ac0e2ef0b90aaa480d60b90341891c4fd">MYSQL_TIME</a> *&#160;</td>
          <td class="paramname"><em>my_time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d25/my__time_8c_source.html#l01211">1211</a> of file <a class="el" href="../../df/d25/my__time_8c_source.html">my_time.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;{</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a>) (<a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>-&gt;hour * 10000UL +</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;                      <a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>-&gt;minute * 100UL +</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;                      <a class="code" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time</a>-&gt;second);</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/da9/my__sys_8h.html#a41d5683d936fc7d39c10fca168e1fbb5">my_time()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d25/my__time_8c_source.html#l01239">TIME_to_ulonglong()</a>.</p>

</div>
</div>
<a id="a95bdcc2f9663dea81b80813cb8d91a4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95bdcc2f9663dea81b80813cb8d91a4f">&#9670;&nbsp;</a></span>year_2000_handling()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> year_2000_handling </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>year</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d25/my__time_8c_source.html#l00745">745</a> of file <a class="el" href="../../df/d25/my__time_8c_source.html">my_time.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;{</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  <span class="keywordflow">if</span> ((year=year+1900) &lt; 1900+<a class="code" href="../../da/d9e/my__time_8h.html#a7e28d776bb65666ed8f77e516e38f54a">YY_PART_YEAR</a>)</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    year+=100;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  <span class="keywordflow">return</span> year;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d9e/my__time_8h_source.html#l00051">YY_PART_YEAR</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ad7840188fd5d425eb572a915e753d42f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7840188fd5d425eb572a915e753d42f">&#9670;&nbsp;</a></span>days_at_timestart</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/df6/my__global_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> days_at_timestart =719528</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d25/my__time_8c_source.html#l00039">39</a> of file <a class="el" href="../../df/d25/my__time_8c_source.html">my_time.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d25/my__time_8c_source.html#l00813">my_system_gmt_sec()</a>.</p>

</div>
</div>
<a id="a499204c2692d90e4d5ba03eb7b7b977e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a499204c2692d90e4d5ba03eb7b7b977e">&#9670;&nbsp;</a></span>days_in_month</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/df6/my__global_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> days_in_month[] = {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31, 0}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d25/my__time_8c_source.html#l00040">40</a> of file <a class="el" href="../../df/d25/my__time_8c_source.html">my_time.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d25/my__time_8c_source.html#l00078">check_date()</a>.</p>

</div>
</div>
<a id="a256105598e7e1facfb2ac2a3bc111ee7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a256105598e7e1facfb2ac2a3bc111ee7">&#9670;&nbsp;</a></span>internal_format_positions</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/df6/my__global_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> internal_format_positions[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">{0, 1, 2, 3, 4, 5, 6, (<a class="code" href="../../d9/df6/my__global_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>) 255}</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../df/d25/my__time_8c_source.html#l00034">34</a> of file <a class="el" href="../../df/d25/my__time_8c_source.html">my_time.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d25/my__time_8c_source.html#l00484">str_to_time()</a>.</p>

</div>
</div>
<a id="a3b0670d47f03ef8afdb725e2ca53d9e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b0670d47f03ef8afdb725e2ca53d9e1">&#9670;&nbsp;</a></span>log_10_int</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a> log_10_int[20]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">{</div>
<div class="line">  1, 10, 100, 1000, 10000UL, 100000UL, 1000000UL, 10000000UL,</div>
<div class="line">  <a class="code" href="../../d9/df6/my__global_8h.html#ab80dc247903411d69d8b4cc972046da7">ULL</a>(100000000), <a class="code" href="../../d9/df6/my__global_8h.html#ab80dc247903411d69d8b4cc972046da7">ULL</a>(1000000000), <a class="code" href="../../d9/df6/my__global_8h.html#ab80dc247903411d69d8b4cc972046da7">ULL</a>(10000000000), <a class="code" href="../../d9/df6/my__global_8h.html#ab80dc247903411d69d8b4cc972046da7">ULL</a>(100000000000),</div>
<div class="line">  <a class="code" href="../../d9/df6/my__global_8h.html#ab80dc247903411d69d8b4cc972046da7">ULL</a>(1000000000000), <a class="code" href="../../d9/df6/my__global_8h.html#ab80dc247903411d69d8b4cc972046da7">ULL</a>(10000000000000), <a class="code" href="../../d9/df6/my__global_8h.html#ab80dc247903411d69d8b4cc972046da7">ULL</a>(100000000000000),</div>
<div class="line">  <a class="code" href="../../d9/df6/my__global_8h.html#ab80dc247903411d69d8b4cc972046da7">ULL</a>(1000000000000000), <a class="code" href="../../d9/df6/my__global_8h.html#ab80dc247903411d69d8b4cc972046da7">ULL</a>(10000000000000000), <a class="code" href="../../d9/df6/my__global_8h.html#ab80dc247903411d69d8b4cc972046da7">ULL</a>(100000000000000000),</div>
<div class="line">  <a class="code" href="../../d9/df6/my__global_8h.html#ab80dc247903411d69d8b4cc972046da7">ULL</a>(1000000000000000000), <a class="code" href="../../d9/df6/my__global_8h.html#ab80dc247903411d69d8b4cc972046da7">ULL</a>(10000000000000000000)</div>
<div class="line">}</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../df/d25/my__time_8c_source.html#l00022">22</a> of file <a class="el" href="../../df/d25/my__time_8c_source.html">my_time.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d25/my__time_8c_source.html#l00484">str_to_time()</a>.</p>

</div>
</div>
<a id="a4cb5cfcf13494ccfd9c852061a626ae0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cb5cfcf13494ccfd9c852061a626ae0">&#9670;&nbsp;</a></span>my_time_zone</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">long my_time_zone =0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d25/my__time_8c_source.html#l00046">46</a> of file <a class="el" href="../../df/d25/my__time_8c_source.html">my_time.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d25/my__time_8c_source.html#l00713">my_init_time()</a>, and <a class="el" href="../../df/d25/my__time_8c_source.html#l00813">my_system_gmt_sec()</a>.</p>

</div>
</div>
<a id="a6eb4181511414f87e37c0b1f9a661833"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6eb4181511414f87e37c0b1f9a661833">&#9670;&nbsp;</a></span>time_separator</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char time_separator =':'</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d25/my__time_8c_source.html#l00037">37</a> of file <a class="el" href="../../df/d25/my__time_8c_source.html">my_time.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d25/my__time_8c_source.html#l00484">str_to_time()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
