<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Azerotcore-wotlk: deps/mysqllite/strings/decimal.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Azerotcore-wotlk
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_94a36784afa54c0b50996002372b429e.html">deps</a></li><li class="navelem"><a class="el" href="../../dir_c19b06727b8b6746540d83e2aa4b49f4.html">mysqllite</a></li><li class="navelem"><a class="el" href="../../dir_8d341f0ce6f335e65e0e2b501ca33535.html">strings</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">decimal.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="../../d9/df6/my__global_8h_source.html">my_global.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d8/dd3/m__ctype_8h_source.html">m_ctype.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d6/d8e/myisampack_8h_source.html">myisampack.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../db/da9/my__sys_8h_source.html">my_sys.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d6/dda/m__string_8h_source.html">m_string.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d5/da0/decimal_8h_source.html">decimal.h</a>&gt;</code><br />
</div>
<p><a href="../../dc/d19/decimal_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aed4bf80d270cf711d27095036ff99cb2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>&#160;&#160;&#160;9</td></tr>
<tr class="separator:aed4bf80d270cf711d27095036ff99cb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41c8495334194626b446824d59459750"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#a41c8495334194626b446824d59459750">DIG_MASK</a>&#160;&#160;&#160;100000000</td></tr>
<tr class="separator:a41c8495334194626b446824d59459750"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a174daf8d334caaad68495bf3e5247abb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>&#160;&#160;&#160;1000000000</td></tr>
<tr class="separator:a174daf8d334caaad68495bf3e5247abb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ef335f9599f2f33702b9b95c0f59364"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#a4ef335f9599f2f33702b9b95c0f59364">DIG_MAX</a>&#160;&#160;&#160;(<a class="el" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>-1)</td></tr>
<tr class="separator:a4ef335f9599f2f33702b9b95c0f59364"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27350602de63d7bf955ef5b07ab9f7f4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#a27350602de63d7bf955ef5b07ab9f7f4">DIG_BASE2</a>&#160;&#160;&#160;((<a class="el" href="../../dc/d19/decimal_8c.html#ad48c17fde8152ca8fd5d3a6fb7ddbcc3">dec2</a>)<a class="el" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a> * (<a class="el" href="../../dc/d19/decimal_8c.html#ad48c17fde8152ca8fd5d3a6fb7ddbcc3">dec2</a>)<a class="el" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>)</td></tr>
<tr class="separator:a27350602de63d7bf955ef5b07ab9f7f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5dcd985c76bd978233a42cc7d993970"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(<a class="el" href="../../da/db3/_collision_detection_8cpp.html#a207fd5507206d307cd63f95374fcd00d">X</a>)&#160;&#160;&#160;(((<a class="el" href="../../da/db3/_collision_detection_8cpp.html#a207fd5507206d307cd63f95374fcd00d">X</a>)+<a class="el" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>-1)/<a class="el" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>)</td></tr>
<tr class="separator:ad5dcd985c76bd978233a42cc7d993970"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fd165f5e0781ede5f9413895fe3ab5c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#a5fd165f5e0781ede5f9413895fe3ab5c">sanity</a>(d)</td></tr>
<tr class="separator:a5fd165f5e0781ede5f9413895fe3ab5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e86a17284f9ad51bc296439f3981b53"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#a2e86a17284f9ad51bc296439f3981b53">FIX_INTG_FRAC_ERROR</a>(len,  intg1,  frac1,  <a class="el" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>)</td></tr>
<tr class="separator:a2e86a17284f9ad51bc296439f3981b53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9dde235ea6b498670b1202efc8863cc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#ab9dde235ea6b498670b1202efc8863cc">ADD</a>(to,  from1,  from2,  carry)</td></tr>
<tr class="separator:ab9dde235ea6b498670b1202efc8863cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98ff32b29b3054de32d830f17ec5dcac"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#a98ff32b29b3054de32d830f17ec5dcac">ADD2</a>(to,  from1,  from2,  carry)</td></tr>
<tr class="separator:a98ff32b29b3054de32d830f17ec5dcac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad53fe42a6951e663e0daaf4236ec3bd1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#ad53fe42a6951e663e0daaf4236ec3bd1">SUB</a>(to,  from1,  from2,  carry)</td></tr>
<tr class="separator:ad53fe42a6951e663e0daaf4236ec3bd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8913a87bdee940ec374d97498bcb7b3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#ab8913a87bdee940ec374d97498bcb7b3">SUB2</a>(to,  from1,  from2,  carry)</td></tr>
<tr class="separator:ab8913a87bdee940ec374d97498bcb7b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a603fb76eec04ba71d1e6c2bbe44bc92b"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="../../d5/da0/decimal_8h.html#a6eb2f12e48ed07886a402dae07827528">decimal_digit_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a></td></tr>
<tr class="separator:a603fb76eec04ba71d1e6c2bbe44bc92b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad48c17fde8152ca8fd5d3a6fb7ddbcc3"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="../../d9/df6/my__global_8h.html#aec67c7fb857b590c82cd4155cd21d7e7">longlong</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#ad48c17fde8152ca8fd5d3a6fb7ddbcc3">dec2</a></td></tr>
<tr class="separator:ad48c17fde8152ca8fd5d3a6fb7ddbcc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a60d34635012ee0d7ab540826801b2f61"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#a60d34635012ee0d7ab540826801b2f61">max_decimal</a> (int precision, int frac, <a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *to)</td></tr>
<tr class="separator:a60d34635012ee0d7ab540826801b2f61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1763687278a99086ef1a0ee9ccf859bd"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#a1763687278a99086ef1a0ee9ccf859bd">remove_leading_zeroes</a> (<a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *from, int *intg_result)</td></tr>
<tr class="separator:a1763687278a99086ef1a0ee9ccf859bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a261c834db3e32ffb5057bcadebfe96bf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#a261c834db3e32ffb5057bcadebfe96bf">decimal_actual_fraction</a> (<a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *from)</td></tr>
<tr class="separator:a261c834db3e32ffb5057bcadebfe96bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a8705cf40de357a4a39cb3c374a92cb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#a2a8705cf40de357a4a39cb3c374a92cb">decimal2string</a> (<a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *from, char *to, int *to_len, int fixed_precision, int fixed_decimals, char filler)</td></tr>
<tr class="separator:a2a8705cf40de357a4a39cb3c374a92cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dc68e6db06c16d3b34d8ed87fa9b490"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#a0dc68e6db06c16d3b34d8ed87fa9b490">digits_bounds</a> (<a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *from, int *start_result, int *end_result)</td></tr>
<tr class="separator:a0dc68e6db06c16d3b34d8ed87fa9b490"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7980e0c8b29cc3165cf9e8eb5f98a34b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#a7980e0c8b29cc3165cf9e8eb5f98a34b">do_mini_left_shift</a> (<a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *dec, int shift, int beg, int last)</td></tr>
<tr class="separator:a7980e0c8b29cc3165cf9e8eb5f98a34b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6babfd2d57412fca6ac479a6703cf07a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#a6babfd2d57412fca6ac479a6703cf07a">do_mini_right_shift</a> (<a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *dec, int shift, int beg, int last)</td></tr>
<tr class="separator:a6babfd2d57412fca6ac479a6703cf07a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2d3d0f4794da7d63a184c494b522727"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#aa2d3d0f4794da7d63a184c494b522727">decimal_shift</a> (<a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *dec, int shift)</td></tr>
<tr class="separator:aa2d3d0f4794da7d63a184c494b522727"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7722beaa1f5f845a8bf7fce52b2bc058"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#a7722beaa1f5f845a8bf7fce52b2bc058">internal_str2dec</a> (<a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *from, <a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *to, char **end, <a class="el" href="../../d9/df6/my__global_8h.html#a74cd599039dcf29c6e6d342cf4efd0a8">my_bool</a> fixed)</td></tr>
<tr class="separator:a7722beaa1f5f845a8bf7fce52b2bc058"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af712678569209187343a0af882eb01f7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#af712678569209187343a0af882eb01f7">decimal2double</a> (<a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *from, double *to)</td></tr>
<tr class="separator:af712678569209187343a0af882eb01f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9721a139242677e54ad9adb43b5f420"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#ad9721a139242677e54ad9adb43b5f420">double2decimal</a> (double from, <a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *to)</td></tr>
<tr class="separator:ad9721a139242677e54ad9adb43b5f420"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad74504ffb16dcf62bdb1024039bf1e56"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#ad74504ffb16dcf62bdb1024039bf1e56">ull2dec</a> (<a class="el" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a> from, <a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *to)</td></tr>
<tr class="separator:ad74504ffb16dcf62bdb1024039bf1e56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1693a5e5081fdf4b9f703de51b016f5c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#a1693a5e5081fdf4b9f703de51b016f5c">ulonglong2decimal</a> (<a class="el" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a> from, <a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *to)</td></tr>
<tr class="separator:a1693a5e5081fdf4b9f703de51b016f5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b90884f987617d2140add2ce49abf06"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#a4b90884f987617d2140add2ce49abf06">longlong2decimal</a> (<a class="el" href="../../d9/df6/my__global_8h.html#aec67c7fb857b590c82cd4155cd21d7e7">longlong</a> from, <a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *to)</td></tr>
<tr class="separator:a4b90884f987617d2140add2ce49abf06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6c6f649723cc05f0e2fb12df925188d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#ac6c6f649723cc05f0e2fb12df925188d">decimal2ulonglong</a> (<a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *from, <a class="el" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a> *to)</td></tr>
<tr class="separator:ac6c6f649723cc05f0e2fb12df925188d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2552a21d9ea913aa56f914ad15d8db5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#ac2552a21d9ea913aa56f914ad15d8db5">decimal2longlong</a> (<a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *from, <a class="el" href="../../d9/df6/my__global_8h.html#aec67c7fb857b590c82cd4155cd21d7e7">longlong</a> *to)</td></tr>
<tr class="separator:ac2552a21d9ea913aa56f914ad15d8db5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a258325b6ea0aa38f2815797690c5b91c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#a258325b6ea0aa38f2815797690c5b91c">decimal2bin</a> (<a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *from, <a class="el" href="../../d9/df6/my__global_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *to, int precision, int frac)</td></tr>
<tr class="separator:a258325b6ea0aa38f2815797690c5b91c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cd6edc429fbe0d2c8701c205b7d3cb9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#a4cd6edc429fbe0d2c8701c205b7d3cb9">bin2decimal</a> (<a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d9/df6/my__global_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *from, <a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *to, int precision, int scale)</td></tr>
<tr class="separator:a4cd6edc429fbe0d2c8701c205b7d3cb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4f68a5751c178f6a36ca749b3b54f33"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#aa4f68a5751c178f6a36ca749b3b54f33">decimal_size</a> (int precision, int scale)</td></tr>
<tr class="separator:aa4f68a5751c178f6a36ca749b3b54f33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a033bbd66947b68a0c915cb3775f37454"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#a033bbd66947b68a0c915cb3775f37454">decimal_bin_size</a> (int precision, int scale)</td></tr>
<tr class="separator:a033bbd66947b68a0c915cb3775f37454"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90307f553e3e8cae5f4bcafc95fec319"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#a90307f553e3e8cae5f4bcafc95fec319">decimal_round</a> (<a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *from, <a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *to, int scale, <a class="el" href="../../d5/da0/decimal_8h.html#a3382d415b856cdea8c5cce928260db62">decimal_round_mode</a> mode)</td></tr>
<tr class="separator:a90307f553e3e8cae5f4bcafc95fec319"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4b66a468aa43a90716baa562b59fb60"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#ad4b66a468aa43a90716baa562b59fb60">decimal_result_size</a> (<a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *from1, <a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *from2, char op, int param)</td></tr>
<tr class="separator:ad4b66a468aa43a90716baa562b59fb60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3914916ac130fbc4693c6bfe823926f3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#a3914916ac130fbc4693c6bfe823926f3">do_add</a> (<a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *from1, <a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *from2, <a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *to)</td></tr>
<tr class="separator:a3914916ac130fbc4693c6bfe823926f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24209e2aa3a6ffcb2799d54001963c41"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#a24209e2aa3a6ffcb2799d54001963c41">do_sub</a> (<a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *from1, <a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *from2, <a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *to)</td></tr>
<tr class="separator:a24209e2aa3a6ffcb2799d54001963c41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b1678a4838d23853ae889c2bb7c588b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#a1b1678a4838d23853ae889c2bb7c588b">decimal_intg</a> (<a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *from)</td></tr>
<tr class="separator:a1b1678a4838d23853ae889c2bb7c588b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92b077bd77665b45620f4027e8bca260"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#a92b077bd77665b45620f4027e8bca260">decimal_add</a> (<a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *from1, <a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *from2, <a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *to)</td></tr>
<tr class="separator:a92b077bd77665b45620f4027e8bca260"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af55976bfb63472f0817d4bb40ba4b070"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#af55976bfb63472f0817d4bb40ba4b070">decimal_sub</a> (<a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *from1, <a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *from2, <a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *to)</td></tr>
<tr class="separator:af55976bfb63472f0817d4bb40ba4b070"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdff159704e535ca000e896e4eab9cda"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#abdff159704e535ca000e896e4eab9cda">decimal_cmp</a> (<a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *from1, <a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *from2)</td></tr>
<tr class="separator:abdff159704e535ca000e896e4eab9cda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ea97900348dc727339565e6998bd98c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#a7ea97900348dc727339565e6998bd98c">decimal_is_zero</a> (<a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *from)</td></tr>
<tr class="separator:a7ea97900348dc727339565e6998bd98c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc445aa3e6aff5825db2dc26ccfb4af8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#abc445aa3e6aff5825db2dc26ccfb4af8">decimal_mul</a> (<a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *from1, <a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *from2, <a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *to)</td></tr>
<tr class="separator:abc445aa3e6aff5825db2dc26ccfb4af8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a546f4a45bfdaae1379a151e5ad927703"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#a546f4a45bfdaae1379a151e5ad927703">do_div_mod</a> (<a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *from1, <a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *from2, <a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *to, <a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *<a class="el" href="../../dd/d90/chrono_8h.html#ade692a13be7c7dfac09a8ff2fd00d172">mod</a>, int scale_incr)</td></tr>
<tr class="separator:a546f4a45bfdaae1379a151e5ad927703"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a932f30979701ce2c380f0c1588302d2f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#a932f30979701ce2c380f0c1588302d2f">decimal_div</a> (<a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *from1, <a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *from2, <a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *to, int scale_incr)</td></tr>
<tr class="separator:a932f30979701ce2c380f0c1588302d2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb5760ec39af513ede329719ca225310"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#abb5760ec39af513ede329719ca225310">decimal_mod</a> (<a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *from1, <a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *from2, <a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *to)</td></tr>
<tr class="separator:abb5760ec39af513ede329719ca225310"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a3272f667e8515e8f69c55bb184f7fbc8"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#a3272f667e8515e8f69c55bb184f7fbc8">powers10</a> [<a class="el" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>+1]</td></tr>
<tr class="separator:a3272f667e8515e8f69c55bb184f7fbc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af74859e650972604fc1144ee63fcfc88"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#af74859e650972604fc1144ee63fcfc88">dig2bytes</a> [<a class="el" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>+1] ={0, 1, 1, 2, 2, 3, 3, 4, 4, 4}</td></tr>
<tr class="separator:af74859e650972604fc1144ee63fcfc88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86bf8e94b59a209ad9796acd4a9b4f5a"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d19/decimal_8c.html#a86bf8e94b59a209ad9796acd4a9b4f5a">frac_max</a> [<a class="el" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>-1]</td></tr>
<tr class="separator:a86bf8e94b59a209ad9796acd4a9b4f5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ab9dde235ea6b498670b1202efc8863cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9dde235ea6b498670b1202efc8863cc">&#9670;&nbsp;</a></span>ADD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">to, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">from1, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">from2, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">carry&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">        <span class="comment">/* assume carry &lt;= 1 */</span>           \</div>
<div class="line">        do                                                              \</div>
<div class="line">        {                                                               \</div>
<div class="line">          dec1 <a class="code" href="../../d4/d71/namespacempq.html#ae78cc6206276c5d8a54a7b181bcd4f8d">a</a>=(from1)+(from2)+(carry);                               \</div>
<div class="line">          DBUG_ASSERT((carry) &lt;= 1);                                    \</div>
<div class="line">          if (((carry)= <a class="code" href="../../d4/d71/namespacempq.html#ae78cc6206276c5d8a54a7b181bcd4f8d">a</a> &gt;= <a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>)) <span class="comment">/* no division here! */</span>         \</div>
<div class="line">            a-=<a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>;                                                \</div>
<div class="line">          (to)=<a class="code" href="../../d4/d71/namespacempq.html#ae78cc6206276c5d8a54a7b181bcd4f8d">a</a>;                                                       \</div>
<div class="line">        } <span class="keywordflow">while</span>(0)</div>
<div class="ttc" id="adecimal_8c_html_a174daf8d334caaad68495bf3e5247abb"><div class="ttname"><a href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a></div><div class="ttdeci">#define DIG_BASE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d19/decimal_8c_source.html#l00129">decimal.c:129</a></div></div>
<div class="ttc" id="anamespacempq_html_ae78cc6206276c5d8a54a7b181bcd4f8d"><div class="ttname"><a href="../../d4/d71/namespacempq.html#ae78cc6206276c5d8a54a7b181bcd4f8d">mpq.a</a></div><div class="ttdeci">a</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d3e/mpq_8py_source.html#l00290">mpq.py:290</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l00169">169</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>

</div>
</div>
<a id="a98ff32b29b3054de32d830f17ec5dcac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98ff32b29b3054de32d830f17ec5dcac">&#9670;&nbsp;</a></span>ADD2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADD2</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">to, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">from1, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">from2, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">carry&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">        <span class="keywordflow">do</span>                                                              \</div>
<div class="line">        {                                                               \</div>
<div class="line">          dec2 <a class="code" href="../../d4/d71/namespacempq.html#ae78cc6206276c5d8a54a7b181bcd4f8d">a</a>=((<a class="code" href="../../dc/d19/decimal_8c.html#ad48c17fde8152ca8fd5d3a6fb7ddbcc3">dec2</a>)(from1))+(from2)+(carry);                       \</div>
<div class="line">          if (((carry)= <a class="code" href="../../d4/d71/namespacempq.html#ae78cc6206276c5d8a54a7b181bcd4f8d">a</a> &gt;= <a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>))                                 \</div>
<div class="line">            a-=<a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>;                                                \</div>
<div class="line">          if (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(<a class="code" href="../../d4/d71/namespacempq.html#ae78cc6206276c5d8a54a7b181bcd4f8d">a</a> &gt;= <a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>))                                  \</div>
<div class="line">          {                                                             \</div>
<div class="line">            a-=<a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>;                                                \</div>
<div class="line">            carry++;                                                    \</div>
<div class="line">          }                                                             \</div>
<div class="line">          (to)=(<a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a>) <a class="code" href="../../d4/d71/namespacempq.html#ae78cc6206276c5d8a54a7b181bcd4f8d">a</a>;                                                \</div>
<div class="line">        } <span class="keywordflow">while</span>(0)</div>
<div class="ttc" id="adecimal_8c_html_a603fb76eec04ba71d1e6c2bbe44bc92b"><div class="ttname"><a href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a></div><div class="ttdeci">decimal_digit_t dec1</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d19/decimal_8c_source.html#l00124">decimal.c:124</a></div></div>
<div class="ttc" id="adecimal_8c_html_ad48c17fde8152ca8fd5d3a6fb7ddbcc3"><div class="ttname"><a href="../../dc/d19/decimal_8c.html#ad48c17fde8152ca8fd5d3a6fb7ddbcc3">dec2</a></div><div class="ttdeci">longlong dec2</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d19/decimal_8c_source.html#l00125">decimal.c:125</a></div></div>
<div class="ttc" id="adeps_2jemalloc_2include_2jemalloc_2internal_2util_8h_html_ac6c45889010c1bd68631771b64f18101"><div class="ttname"><a href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a></div><div class="ttdeci">#define unlikely(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h_source.html#l00036">util.h:36</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l00179">179</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>

</div>
</div>
<a id="a174daf8d334caaad68495bf3e5247abb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a174daf8d334caaad68495bf3e5247abb">&#9670;&nbsp;</a></span>DIG_BASE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DIG_BASE&#160;&#160;&#160;1000000000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l00129">129</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>

</div>
</div>
<a id="a27350602de63d7bf955ef5b07ab9f7f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27350602de63d7bf955ef5b07ab9f7f4">&#9670;&nbsp;</a></span>DIG_BASE2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DIG_BASE2&#160;&#160;&#160;((<a class="el" href="../../dc/d19/decimal_8c.html#ad48c17fde8152ca8fd5d3a6fb7ddbcc3">dec2</a>)<a class="el" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a> * (<a class="el" href="../../dc/d19/decimal_8c.html#ad48c17fde8152ca8fd5d3a6fb7ddbcc3">dec2</a>)<a class="el" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l00131">131</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>

</div>
</div>
<a id="a41c8495334194626b446824d59459750"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41c8495334194626b446824d59459750">&#9670;&nbsp;</a></span>DIG_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DIG_MASK&#160;&#160;&#160;100000000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l00128">128</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>

</div>
</div>
<a id="a4ef335f9599f2f33702b9b95c0f59364"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ef335f9599f2f33702b9b95c0f59364">&#9670;&nbsp;</a></span>DIG_MAX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DIG_MAX&#160;&#160;&#160;(<a class="el" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>-1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l00130">130</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>

</div>
</div>
<a id="aed4bf80d270cf711d27095036ff99cb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed4bf80d270cf711d27095036ff99cb2">&#9670;&nbsp;</a></span>DIG_PER_DEC1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DIG_PER_DEC1&#160;&#160;&#160;9</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l00127">127</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>

</div>
</div>
<a id="a2e86a17284f9ad51bc296439f3981b53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e86a17284f9ad51bc296439f3981b53">&#9670;&nbsp;</a></span>FIX_INTG_FRAC_ERROR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FIX_INTG_FRAC_ERROR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">len, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">intg1, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">frac1, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">        <span class="keywordflow">do</span>                                                              \</div>
<div class="line">        {                                                               \</div>
<div class="line">          if (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(intg1+frac1 &gt; (len)))                            \</div>
<div class="line">          {                                                             \</div>
<div class="line">            if (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(intg1 &gt; (len)))                                \</div>
<div class="line">            {                                                           \</div>
<div class="line">              intg1=(len);                                              \</div>
<div class="line">              frac1=0;                                                  \</div>
<div class="line">              error=<a class="code" href="../../d5/da0/decimal_8h.html#adeff328341b0d04e50b43afeb3c0549e">E_DEC_OVERFLOW</a>;                                     \</div>
<div class="line">            }                                                           \</div>
<div class="line">            else                                                        \</div>
<div class="line">            {                                                           \</div>
<div class="line">              frac1=(len)-intg1;                                        \</div>
<div class="line">              error=<a class="code" href="../../d5/da0/decimal_8h.html#a11368630fa2fae49fd03fcaa0435b216">E_DEC_TRUNCATED</a>;                                    \</div>
<div class="line">            }                                                           \</div>
<div class="line">          }                                                             \</div>
<div class="line">          else                                                          \</div>
<div class="line">            error=<a class="code" href="../../d5/da0/decimal_8h.html#a6d15cce36445086710326b68b7a01ba4">E_DEC_OK</a>;                                             \</div>
<div class="line">        } <span class="keywordflow">while</span>(0)</div>
<div class="ttc" id="adecimal_8h_html_a11368630fa2fae49fd03fcaa0435b216"><div class="ttname"><a href="../../d5/da0/decimal_8h.html#a11368630fa2fae49fd03fcaa0435b216">E_DEC_TRUNCATED</a></div><div class="ttdeci">#define E_DEC_TRUNCATED</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da0/decimal_8h_source.html#l00097">decimal.h:97</a></div></div>
<div class="ttc" id="adecimal_8h_html_a6d15cce36445086710326b68b7a01ba4"><div class="ttname"><a href="../../d5/da0/decimal_8h.html#a6d15cce36445086710326b68b7a01ba4">E_DEC_OK</a></div><div class="ttdeci">#define E_DEC_OK</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da0/decimal_8h_source.html#l00096">decimal.h:96</a></div></div>
<div class="ttc" id="adecimal_8h_html_adeff328341b0d04e50b43afeb3c0549e"><div class="ttname"><a href="../../d5/da0/decimal_8h.html#adeff328341b0d04e50b43afeb3c0549e">E_DEC_OVERFLOW</a></div><div class="ttdeci">#define E_DEC_OVERFLOW</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da0/decimal_8h_source.html#l00098">decimal.h:98</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l00148">148</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>

</div>
</div>
<a id="ad5dcd985c76bd978233a42cc7d993970"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5dcd985c76bd978233a42cc7d993970">&#9670;&nbsp;</a></span>ROUND_UP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ROUND_UP</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../da/db3/_collision_detection_8cpp.html#a207fd5507206d307cd63f95374fcd00d">X</a></td><td>)</td>
          <td>&#160;&#160;&#160;(((<a class="el" href="../../da/db3/_collision_detection_8cpp.html#a207fd5507206d307cd63f95374fcd00d">X</a>)+<a class="el" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>-1)/<a class="el" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l00132">132</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>

</div>
</div>
<a id="a5fd165f5e0781ede5f9413895fe3ab5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fd165f5e0781ede5f9413895fe3ab5c">&#9670;&nbsp;</a></span>sanity</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define sanity</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">d</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">                              <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>((<a class="code" href="../../d4/d71/namespacempq.html#a9fbd3a52049cfe1e11371096a422d94e">d</a>)-&gt;len &gt;0 &amp;&amp; ((<a class="code" href="../../d4/d71/namespacempq.html#a9fbd3a52049cfe1e11371096a422d94e">d</a>)-&gt;buf[0] | \</div>
<div class="line">                              (<a class="code" href="../../d4/d71/namespacempq.html#a9fbd3a52049cfe1e11371096a422d94e">d</a>)-&gt;buf[(<a class="code" href="../../d4/d71/namespacempq.html#a9fbd3a52049cfe1e11371096a422d94e">d</a>)-&gt;len-1] | 1))</div>
<div class="ttc" id="amy__dbug_8h_html_af5d75f213550ec27715b65d9bdfa45ec"><div class="ttname"><a href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a></div><div class="ttdeci">#define DBUG_ASSERT(A)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d74/my__dbug_8h_source.html#l00096">my_dbug.h:96</a></div></div>
<div class="ttc" id="anamespacempq_html_a9fbd3a52049cfe1e11371096a422d94e"><div class="ttname"><a href="../../d4/d71/namespacempq.html#a9fbd3a52049cfe1e11371096a422d94e">mpq.d</a></div><div class="ttdeci">d</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d3e/mpq_8py_source.html#l00298">mpq.py:298</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l00144">144</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>

</div>
</div>
<a id="ad53fe42a6951e663e0daaf4236ec3bd1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad53fe42a6951e663e0daaf4236ec3bd1">&#9670;&nbsp;</a></span>SUB</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SUB</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">to, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">from1, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">from2, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">carry&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">        <span class="comment">/* to=from1-from2 */</span>               \</div>
<div class="line">        do                                                              \</div>
<div class="line">        {                                                               \</div>
<div class="line">          dec1 <a class="code" href="../../d4/d71/namespacempq.html#ae78cc6206276c5d8a54a7b181bcd4f8d">a</a>=(from1)-(from2)-(carry);                               \</div>
<div class="line">          if (((carry)= <a class="code" href="../../d4/d71/namespacempq.html#ae78cc6206276c5d8a54a7b181bcd4f8d">a</a> &lt; 0))                                         \</div>
<div class="line">            a+=<a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>;                                                \</div>
<div class="line">          (to)=<a class="code" href="../../d4/d71/namespacempq.html#ae78cc6206276c5d8a54a7b181bcd4f8d">a</a>;                                                       \</div>
<div class="line">        } <span class="keywordflow">while</span>(0)</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l00193">193</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>

</div>
</div>
<a id="ab8913a87bdee940ec374d97498bcb7b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8913a87bdee940ec374d97498bcb7b3">&#9670;&nbsp;</a></span>SUB2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SUB2</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">to, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">from1, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">from2, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">carry&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">        <span class="comment">/* to=from1-from2 */</span>              \</div>
<div class="line">        do                                                              \</div>
<div class="line">        {                                                               \</div>
<div class="line">          dec1 <a class="code" href="../../d4/d71/namespacempq.html#ae78cc6206276c5d8a54a7b181bcd4f8d">a</a>=(from1)-(from2)-(carry);                               \</div>
<div class="line">          if (((carry)= <a class="code" href="../../d4/d71/namespacempq.html#ae78cc6206276c5d8a54a7b181bcd4f8d">a</a> &lt; 0))                                         \</div>
<div class="line">            a+=<a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>;                                                \</div>
<div class="line">          if (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(<a class="code" href="../../d4/d71/namespacempq.html#ae78cc6206276c5d8a54a7b181bcd4f8d">a</a> &lt; 0))                                          \</div>
<div class="line">          {                                                             \</div>
<div class="line">            a+=<a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>;                                                \</div>
<div class="line">            carry++;                                                    \</div>
<div class="line">          }                                                             \</div>
<div class="line">          (to)=<a class="code" href="../../d4/d71/namespacempq.html#ae78cc6206276c5d8a54a7b181bcd4f8d">a</a>;                                                       \</div>
<div class="line">        } <span class="keywordflow">while</span>(0)</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l00202">202</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a603fb76eec04ba71d1e6c2bbe44bc92b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a603fb76eec04ba71d1e6c2bbe44bc92b">&#9670;&nbsp;</a></span>dec1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="../../d5/da0/decimal_8h.html#a6eb2f12e48ed07886a402dae07827528">decimal_digit_t</a> <a class="el" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l00124">124</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>

</div>
</div>
<a id="ad48c17fde8152ca8fd5d3a6fb7ddbcc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad48c17fde8152ca8fd5d3a6fb7ddbcc3">&#9670;&nbsp;</a></span>dec2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="../../d9/df6/my__global_8h.html#aec67c7fb857b590c82cd4155cd21d7e7">longlong</a> <a class="el" href="../../dc/d19/decimal_8c.html#ad48c17fde8152ca8fd5d3a6fb7ddbcc3">dec2</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l00125">125</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a4cd6edc429fbe0d2c8701c205b7d3cb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cd6edc429fbe0d2c8701c205b7d3cb9">&#9670;&nbsp;</a></span>bin2decimal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bin2decimal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d9/df6/my__global_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>precision</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>scale</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l01311">1311</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;{</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>=<a class="code" href="../../d5/da0/decimal_8h.html#a6d15cce36445086710326b68b7a01ba4">E_DEC_OK</a>, intg=precision-scale,</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;      intg0=intg/<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>, frac0=scale/<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>,</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;      intg0x=intg-intg0*<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>, frac0x=scale-frac0*<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>,</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;      intg1=intg0+(intg0x&gt;0), frac1=frac0+(frac0x&gt;0);</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *buf=to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>, mask=(*from &amp; 0x80) ? 0 : -1;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d9/df6/my__global_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *stop;</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;  <a class="code" href="../../d9/df6/my__global_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *d_copy;</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;  <span class="keywordtype">int</span> bin_size= <a class="code" href="../../dc/d19/decimal_8c.html#a033bbd66947b68a0c915cb3775f37454">decimal_bin_size</a>(precision, scale);</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160; </div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a5fd165f5e0781ede5f9413895fe3ab5c">sanity</a>(to);</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;  d_copy= (<a class="code" href="../../d9/df6/my__global_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>*) <a class="code" href="../../db/da9/my__sys_8h.html#a532484a8b7e33a2a835db48b6de71d32">my_alloca</a>(bin_size);</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;  <a class="code" href="../../d6/dda/m__string_8h.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a>(d_copy, from, bin_size);</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;  d_copy[0]^= 0x80;</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  from= d_copy;</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160; </div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a2e86a17284f9ad51bc296439f3981b53">FIX_INTG_FRAC_ERROR</a>(to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#adf138ff1dd2904d68d243e7b5207c4da">len</a>, intg1, frac1, <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>);</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(<a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>))</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  {</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    <span class="keywordflow">if</span> (intg1 &lt; intg0+(intg0x&gt;0))</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    {</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;      from+=<a class="code" href="../../dc/d19/decimal_8c.html#af74859e650972604fc1144ee63fcfc88">dig2bytes</a>[intg0x]+<span class="keyword">sizeof</span>(<a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a>)*(intg0-intg1);</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;      frac0=frac0x=intg0x=0;</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;      intg0=intg1;</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    }</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    {</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;      frac0x=0;</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;      frac0=frac1;</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    }</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;  }</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160; </div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;  to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a>=(mask != 0);</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>=intg0*<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>+intg0x;</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;  to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>=frac0*<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>+frac0x;</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160; </div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  <span class="keywordflow">if</span> (intg0x)</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  {</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    <span class="keywordtype">int</span> i=<a class="code" href="../../dc/d19/decimal_8c.html#af74859e650972604fc1144ee63fcfc88">dig2bytes</a>[intg0x];</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> <a class="code" href="../../d9/df6/my__global_8h.html#aae0dcf447aac67c9902b0ab7f3835e79">UNINIT_VAR</a>(<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>);</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    <span class="keywordflow">switch</span> (i)</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    {</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;      <span class="keywordflow">case</span> 1: <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>=<a class="code" href="../../d6/d8e/myisampack_8h.html#ad97faacbb8c26a580e8a052df6367c86">mi_sint1korr</a>(from); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;      <span class="keywordflow">case</span> 2: <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>=<a class="code" href="../../d6/d8e/myisampack_8h.html#ad913702dba21758a455a268c9eef9b3f">mi_sint2korr</a>(from); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;      <span class="keywordflow">case</span> 3: <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>=<a class="code" href="../../d6/d8e/myisampack_8h.html#a08a396c69a50811e195da8c756f6b303">mi_sint3korr</a>(from); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;      <span class="keywordflow">case</span> 4: <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>=<a class="code" href="../../d6/d8e/myisampack_8h.html#ac1415554a5836576e1a7360c4fd8f8c5">mi_sint4korr</a>(from); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;      <span class="keywordflow">default</span>: <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(0);</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    }</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    from+=i;</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    *buf=<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a> ^ mask;</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    <span class="keywordflow">if</span> (((<a class="code" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a>)*buf) &gt;= (<a class="code" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a>) <a class="code" href="../../dc/d19/decimal_8c.html#a3272f667e8515e8f69c55bb184f7fbc8">powers10</a>[intg0x+1])</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;      <span class="keywordflow">goto</span> err;</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    <span class="keywordflow">if</span> (buf &gt; to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a> || *buf != 0)</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;      buf++;</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;      to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>-=intg0x;</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;  }</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;  <span class="keywordflow">for</span> (stop=from+intg0*<span class="keyword">sizeof</span>(<a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a>); from &lt; stop; from+=<span class="keyword">sizeof</span>(<a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a>))</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;  {</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a>) == 4);</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    *buf=<a class="code" href="../../d6/d8e/myisampack_8h.html#ac1415554a5836576e1a7360c4fd8f8c5">mi_sint4korr</a>(from) ^ mask;</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    <span class="keywordflow">if</span> (((<a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>)*buf) &gt; <a class="code" href="../../dc/d19/decimal_8c.html#a4ef335f9599f2f33702b9b95c0f59364">DIG_MAX</a>)</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;      <span class="keywordflow">goto</span> err;</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    <span class="keywordflow">if</span> (buf &gt; to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a> || *buf != 0)</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;      buf++;</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;      to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>-=<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>;</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;  }</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a> &gt;=0);</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;  <span class="keywordflow">for</span> (stop=from+frac0*<span class="keyword">sizeof</span>(<a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a>); from &lt; stop; from+=<span class="keyword">sizeof</span>(<a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a>))</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;  {</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a>) == 4);</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    *buf=<a class="code" href="../../d6/d8e/myisampack_8h.html#ac1415554a5836576e1a7360c4fd8f8c5">mi_sint4korr</a>(from) ^ mask;</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    <span class="keywordflow">if</span> (((<a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>)*buf) &gt; <a class="code" href="../../dc/d19/decimal_8c.html#a4ef335f9599f2f33702b9b95c0f59364">DIG_MAX</a>)</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;      <span class="keywordflow">goto</span> err;</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    buf++;</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;  }</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;  <span class="keywordflow">if</span> (frac0x)</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;  {</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    <span class="keywordtype">int</span> i=<a class="code" href="../../dc/d19/decimal_8c.html#af74859e650972604fc1144ee63fcfc88">dig2bytes</a>[frac0x];</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> <a class="code" href="../../d9/df6/my__global_8h.html#aae0dcf447aac67c9902b0ab7f3835e79">UNINIT_VAR</a>(<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>);</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    <span class="keywordflow">switch</span> (i)</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    {</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;      <span class="keywordflow">case</span> 1: <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>=<a class="code" href="../../d6/d8e/myisampack_8h.html#ad97faacbb8c26a580e8a052df6367c86">mi_sint1korr</a>(from); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;      <span class="keywordflow">case</span> 2: <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>=<a class="code" href="../../d6/d8e/myisampack_8h.html#ad913702dba21758a455a268c9eef9b3f">mi_sint2korr</a>(from); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;      <span class="keywordflow">case</span> 3: <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>=<a class="code" href="../../d6/d8e/myisampack_8h.html#a08a396c69a50811e195da8c756f6b303">mi_sint3korr</a>(from); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;      <span class="keywordflow">case</span> 4: <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>=<a class="code" href="../../d6/d8e/myisampack_8h.html#ac1415554a5836576e1a7360c4fd8f8c5">mi_sint4korr</a>(from); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;      <span class="keywordflow">default</span>: <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(0);</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    }</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    *buf=(<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a> ^ mask) * <a class="code" href="../../dc/d19/decimal_8c.html#a3272f667e8515e8f69c55bb184f7fbc8">powers10</a>[<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a> - frac0x];</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <span class="keywordflow">if</span> (((<a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>)*buf) &gt; <a class="code" href="../../dc/d19/decimal_8c.html#a4ef335f9599f2f33702b9b95c0f59364">DIG_MAX</a>)</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;      <span class="keywordflow">goto</span> err;</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    buf++;</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;  }</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;  <a class="code" href="../../db/da9/my__sys_8h.html#afc5dd02e4d18f23a51c9db57c96a22ae">my_afree</a>(d_copy);</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>;</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160; </div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;err:</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;  <a class="code" href="../../db/da9/my__sys_8h.html#afc5dd02e4d18f23a51c9db57c96a22ae">my_afree</a>(d_copy);</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;  <a class="code" href="../../d5/da0/decimal_8h.html#a5ed860a83aa33b8b125e3317cacbc074">decimal_make_zero</a>(((<a class="code" href="../../db/dd0/structst__decimal__t.html">decimal_t</a>*) to));</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;  <span class="keywordflow">return</span>(<a class="code" href="../../d5/da0/decimal_8h.html#a697824d290f02b427236130c1d7f8942">E_DEC_BAD_NUM</a>);</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;}</div>
<div class="ttc" id="a_define_8h_html_a22f78cc9780bf32aff91ae17c3101c8d"><div class="ttname"><a href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a></div><div class="ttdeci">std::uint32_t uint32</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d35/_define_8h_source.html#l00114">Define.h:114</a></div></div>
<div class="ttc" id="adecimal_8c_html_a033bbd66947b68a0c915cb3775f37454"><div class="ttname"><a href="../../dc/d19/decimal_8c.html#a033bbd66947b68a0c915cb3775f37454">decimal_bin_size</a></div><div class="ttdeci">int decimal_bin_size(int precision, int scale)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d19/decimal_8c_source.html#l01436">decimal.c:1436</a></div></div>
<div class="ttc" id="adecimal_8c_html_a2e86a17284f9ad51bc296439f3981b53"><div class="ttname"><a href="../../dc/d19/decimal_8c.html#a2e86a17284f9ad51bc296439f3981b53">FIX_INTG_FRAC_ERROR</a></div><div class="ttdeci">#define FIX_INTG_FRAC_ERROR(len, intg1, frac1, error)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d19/decimal_8c_source.html#l00148">decimal.c:148</a></div></div>
<div class="ttc" id="adecimal_8c_html_a3272f667e8515e8f69c55bb184f7fbc8"><div class="ttname"><a href="../../dc/d19/decimal_8c.html#a3272f667e8515e8f69c55bb184f7fbc8">powers10</a></div><div class="ttdeci">static const dec1 powers10[DIG_PER_DEC1+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d19/decimal_8c_source.html#l00133">decimal.c:133</a></div></div>
<div class="ttc" id="adecimal_8c_html_a4ef335f9599f2f33702b9b95c0f59364"><div class="ttname"><a href="../../dc/d19/decimal_8c.html#a4ef335f9599f2f33702b9b95c0f59364">DIG_MAX</a></div><div class="ttdeci">#define DIG_MAX</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d19/decimal_8c_source.html#l00130">decimal.c:130</a></div></div>
<div class="ttc" id="adecimal_8c_html_a5fd165f5e0781ede5f9413895fe3ab5c"><div class="ttname"><a href="../../dc/d19/decimal_8c.html#a5fd165f5e0781ede5f9413895fe3ab5c">sanity</a></div><div class="ttdeci">#define sanity(d)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d19/decimal_8c_source.html#l00144">decimal.c:144</a></div></div>
<div class="ttc" id="adecimal_8c_html_aed4bf80d270cf711d27095036ff99cb2"><div class="ttname"><a href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a></div><div class="ttdeci">#define DIG_PER_DEC1</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d19/decimal_8c_source.html#l00127">decimal.c:127</a></div></div>
<div class="ttc" id="adecimal_8c_html_af74859e650972604fc1144ee63fcfc88"><div class="ttname"><a href="../../dc/d19/decimal_8c.html#af74859e650972604fc1144ee63fcfc88">dig2bytes</a></div><div class="ttdeci">static const int dig2bytes[DIG_PER_DEC1+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d19/decimal_8c_source.html#l00135">decimal.c:135</a></div></div>
<div class="ttc" id="adecimal_8h_html_a5ed860a83aa33b8b125e3317cacbc074"><div class="ttname"><a href="../../d5/da0/decimal_8h.html#a5ed860a83aa33b8b125e3317cacbc074">decimal_make_zero</a></div><div class="ttdeci">#define decimal_make_zero(dec)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da0/decimal_8h_source.html#l00068">decimal.h:68</a></div></div>
<div class="ttc" id="adecimal_8h_html_a697824d290f02b427236130c1d7f8942"><div class="ttname"><a href="../../d5/da0/decimal_8h.html#a697824d290f02b427236130c1d7f8942">E_DEC_BAD_NUM</a></div><div class="ttdeci">#define E_DEC_BAD_NUM</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da0/decimal_8h_source.html#l00100">decimal.h:100</a></div></div>
<div class="ttc" id="am__string_8h_html_aed653b4838032a2c5ce8960421c8cfd7"><div class="ttname"><a href="../../d6/dda/m__string_8h.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a></div><div class="ttdeci">#define memcpy(d, s, n)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dda/m__string_8h_source.html#l00050">m_string.h:50</a></div></div>
<div class="ttc" id="aminigzip_8c_html_aee763da2c1c9da197307bad1d009513d"><div class="ttname"><a href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a></div><div class="ttdeci">void error(char *msg) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc6/minigzip_8c_source.html#l00156">minigzip.c:156</a></div></div>
<div class="ttc" id="amy__global_8h_html_a65f85814a8290f9797005d3b28e7e5fc"><div class="ttname"><a href="../../d9/df6/my__global_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a></div><div class="ttdeci">unsigned char uchar</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df6/my__global_8h_source.html#l00874">my_global.h:874</a></div></div>
<div class="ttc" id="amy__global_8h_html_aae0dcf447aac67c9902b0ab7f3835e79"><div class="ttname"><a href="../../d9/df6/my__global_8h.html#aae0dcf447aac67c9902b0ab7f3835e79">UNINIT_VAR</a></div><div class="ttdeci">#define UNINIT_VAR(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df6/my__global_8h_source.html#l00466">my_global.h:466</a></div></div>
<div class="ttc" id="amy__global_8h_html_ae7c11be50f0b11d048979398c5fdcfa5"><div class="ttname"><a href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a></div><div class="ttdeci">unsigned long ulonglong</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df6/my__global_8h_source.html#l00920">my_global.h:920</a></div></div>
<div class="ttc" id="amy__sys_8h_html_a532484a8b7e33a2a835db48b6de71d32"><div class="ttname"><a href="../../db/da9/my__sys_8h.html#a532484a8b7e33a2a835db48b6de71d32">my_alloca</a></div><div class="ttdeci">#define my_alloca(SZ)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da9/my__sys_8h_source.html#l00196">my_sys.h:196</a></div></div>
<div class="ttc" id="amy__sys_8h_html_afc5dd02e4d18f23a51c9db57c96a22ae"><div class="ttname"><a href="../../db/da9/my__sys_8h.html#afc5dd02e4d18f23a51c9db57c96a22ae">my_afree</a></div><div class="ttdeci">#define my_afree(PTR)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da9/my__sys_8h_source.html#l00197">my_sys.h:197</a></div></div>
<div class="ttc" id="amyisampack_8h_html_a08a396c69a50811e195da8c756f6b303"><div class="ttname"><a href="../../d6/d8e/myisampack_8h.html#a08a396c69a50811e195da8c756f6b303">mi_sint3korr</a></div><div class="ttdeci">#define mi_sint3korr(A)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d8e/myisampack_8h_source.html#l00032">myisampack.h:32</a></div></div>
<div class="ttc" id="amyisampack_8h_html_ac1415554a5836576e1a7360c4fd8f8c5"><div class="ttname"><a href="../../d6/d8e/myisampack_8h.html#ac1415554a5836576e1a7360c4fd8f8c5">mi_sint4korr</a></div><div class="ttdeci">#define mi_sint4korr(A)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d8e/myisampack_8h_source.html#l00040">myisampack.h:40</a></div></div>
<div class="ttc" id="amyisampack_8h_html_ad913702dba21758a455a268c9eef9b3f"><div class="ttname"><a href="../../d6/d8e/myisampack_8h.html#ad913702dba21758a455a268c9eef9b3f">mi_sint2korr</a></div><div class="ttdeci">#define mi_sint2korr(A)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d8e/myisampack_8h_source.html#l00030">myisampack.h:30</a></div></div>
<div class="ttc" id="amyisampack_8h_html_ad97faacbb8c26a580e8a052df6367c86"><div class="ttname"><a href="../../d6/d8e/myisampack_8h.html#ad97faacbb8c26a580e8a052df6367c86">mi_sint1korr</a></div><div class="ttdeci">#define mi_sint1korr(A)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d8e/myisampack_8h_source.html#l00027">myisampack.h:27</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_a55ae91213b07da3a9e14fcd5068d497f"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">G3D::x</a></div><div class="ttdeci">G3D::int16 x</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d14/_vector2int16_8h_source.html#l00037">Vector2int16.h:37</a></div></div>
<div class="ttc" id="astructst__decimal__t_html"><div class="ttname"><a href="../../db/dd0/structst__decimal__t.html">st_decimal_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da0/decimal_8h_source.html#l00024">decimal.h:24</a></div></div>
<div class="ttc" id="astructst__decimal__t_html_a0e8b53a569db084c11150b1370f894bc"><div class="ttname"><a href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">st_decimal_t::buf</a></div><div class="ttdeci">decimal_digit_t * buf</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da0/decimal_8h_source.html#l00027">decimal.h:27</a></div></div>
<div class="ttc" id="astructst__decimal__t_html_a6b821d46801fbace2b281dcf0c0f106a"><div class="ttname"><a href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">st_decimal_t::frac</a></div><div class="ttdeci">int frac</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da0/decimal_8h_source.html#l00025">decimal.h:25</a></div></div>
<div class="ttc" id="astructst__decimal__t_html_a7a33cd163aa841a0b0d9a340bb0d8a72"><div class="ttname"><a href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">st_decimal_t::intg</a></div><div class="ttdeci">int intg</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da0/decimal_8h_source.html#l00025">decimal.h:25</a></div></div>
<div class="ttc" id="astructst__decimal__t_html_adf138ff1dd2904d68d243e7b5207c4da"><div class="ttname"><a href="../../db/dd0/structst__decimal__t.html#adf138ff1dd2904d68d243e7b5207c4da">st_decimal_t::len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da0/decimal_8h_source.html#l00025">decimal.h:25</a></div></div>
<div class="ttc" id="astructst__decimal__t_html_affdec73b8715719b1c8594339d144c16"><div class="ttname"><a href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">st_decimal_t::sign</a></div><div class="ttdeci">my_bool sign</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da0/decimal_8h_source.html#l00026">decimal.h:26</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/da0/decimal_8h_source.html#l00027">st_decimal_t::buf</a>, <a class="el" href="../../d0/d74/my__dbug_8h_source.html#l00096">DBUG_ASSERT</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l01436">decimal_bin_size()</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00068">decimal_make_zero</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00135">dig2bytes</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00130">DIG_MAX</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00127">DIG_PER_DEC1</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00100">E_DEC_BAD_NUM</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00096">E_DEC_OK</a>, <a class="el" href="../../d3/dc6/minigzip_8c_source.html#l00156">error()</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00148">FIX_INTG_FRAC_ERROR</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::frac</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::intg</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::len</a>, <a class="el" href="../../d6/dda/m__string_8h_source.html#l00050">memcpy</a>, <a class="el" href="../../d6/d8e/myisampack_8h_source.html#l00027">mi_sint1korr</a>, <a class="el" href="../../d6/d8e/myisampack_8h_source.html#l00030">mi_sint2korr</a>, <a class="el" href="../../d6/d8e/myisampack_8h_source.html#l00032">mi_sint3korr</a>, <a class="el" href="../../d6/d8e/myisampack_8h_source.html#l00040">mi_sint4korr</a>, <a class="el" href="../../db/da9/my__sys_8h_source.html#l00197">my_afree</a>, <a class="el" href="../../db/da9/my__sys_8h_source.html#l00196">my_alloca</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00133">powers10</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00144">sanity</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00026">st_decimal_t::sign</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l00466">UNINIT_VAR</a>, <a class="el" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h_source.html#l00036">unlikely</a>, and <a class="el" href="../../d8/d14/_vector2int16_8h_source.html#l00037">G3D::x</a>.</p>

</div>
</div>
<a id="a258325b6ea0aa38f2815797690c5b91c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a258325b6ea0aa38f2815797690c5b91c">&#9670;&nbsp;</a></span>decimal2bin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int decimal2bin </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *&#160;</td>
          <td class="paramname"><em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>precision</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>frac</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l01176">1176</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;{</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> mask=from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a> ? -1 : 0, *buf1=from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>, *stop1;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>=<a class="code" href="../../d5/da0/decimal_8h.html#a6d15cce36445086710326b68b7a01ba4">E_DEC_OK</a>, intg=precision-frac,</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;      isize1, intg1, intg1x, from_intg,</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;      intg0=intg/<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>,</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;      frac0=frac/<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>,</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;      intg0x=intg-intg0*<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>,</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;      frac0x=frac-frac0*<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>,</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;      frac1=from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>/<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>,</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;      frac1x=from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>-frac1*<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>,</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;      isize0=intg0*<span class="keyword">sizeof</span>(<a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a>)+<a class="code" href="../../dc/d19/decimal_8c.html#af74859e650972604fc1144ee63fcfc88">dig2bytes</a>[intg0x],</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;      fsize0=frac0*<span class="keyword">sizeof</span>(<a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a>)+<a class="code" href="../../dc/d19/decimal_8c.html#af74859e650972604fc1144ee63fcfc88">dig2bytes</a>[frac0x],</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;      fsize1=frac1*<span class="keyword">sizeof</span>(<a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a>)+<a class="code" href="../../dc/d19/decimal_8c.html#af74859e650972604fc1144ee63fcfc88">dig2bytes</a>[frac1x];</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> orig_isize0= isize0;</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> orig_fsize0= fsize0;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  <a class="code" href="../../d9/df6/my__global_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *orig_to= to;</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160; </div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  buf1= <a class="code" href="../../dc/d19/decimal_8c.html#a1763687278a99086ef1a0ee9ccf859bd">remove_leading_zeroes</a>(from, &amp;from_intg);</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160; </div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(from_intg+fsize1==0))</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  {</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    mask=0; <span class="comment">/* just in case */</span></div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    intg=1;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    buf1=&amp;mask;</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;  }</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160; </div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;  intg1=from_intg/<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  intg1x=from_intg-intg1*<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>;</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  isize1=intg1*<span class="keyword">sizeof</span>(<a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a>)+<a class="code" href="../../dc/d19/decimal_8c.html#af74859e650972604fc1144ee63fcfc88">dig2bytes</a>[intg1x];</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160; </div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  <span class="keywordflow">if</span> (intg &lt; from_intg)</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  {</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    buf1+=intg1-intg0+(intg1x&gt;0)-(intg0x&gt;0);</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    intg1=intg0; intg1x=intg0x;</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>=<a class="code" href="../../d5/da0/decimal_8h.html#adeff328341b0d04e50b43afeb3c0549e">E_DEC_OVERFLOW</a>;</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  }</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isize0 &gt; isize1)</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;  {</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    <span class="keywordflow">while</span> (isize0-- &gt; isize1)</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;      *to++= (char)mask;</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;  }</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  <span class="keywordflow">if</span> (fsize0 &lt; fsize1)</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  {</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    frac1=frac0; frac1x=frac0x;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>=<a class="code" href="../../d5/da0/decimal_8h.html#a11368630fa2fae49fd03fcaa0435b216">E_DEC_TRUNCATED</a>;</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;  }</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fsize0 &gt; fsize1 &amp;&amp; frac1x)</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  {</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <span class="keywordflow">if</span> (frac0 == frac1)</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    {</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;      frac1x=frac0x;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;      fsize0= fsize1;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    }</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    {</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;      frac1++;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;      frac1x=0;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    }</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  }</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160; </div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  <span class="comment">/* intg1x part */</span></div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;  <span class="keywordflow">if</span> (intg1x)</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  {</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    <span class="keywordtype">int</span> i=<a class="code" href="../../dc/d19/decimal_8c.html#af74859e650972604fc1144ee63fcfc88">dig2bytes</a>[intg1x];</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>=(*buf1++ % <a class="code" href="../../dc/d19/decimal_8c.html#a3272f667e8515e8f69c55bb184f7fbc8">powers10</a>[intg1x]) ^ mask;</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <span class="keywordflow">switch</span> (i)</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    {</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;      <span class="keywordflow">case</span> 1: <a class="code" href="../../d6/d8e/myisampack_8h.html#abae0542bb55bc986e9815aaf943b9024">mi_int1store</a>(to, <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;      <span class="keywordflow">case</span> 2: <a class="code" href="../../d6/d8e/myisampack_8h.html#a5b3b0b2b5c091d86fddadf874a9a404f">mi_int2store</a>(to, <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      <span class="keywordflow">case</span> 3: <a class="code" href="../../d6/d8e/myisampack_8h.html#afde1947058fa1b5974d4c40e6ed73d93">mi_int3store</a>(to, <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      <span class="keywordflow">case</span> 4: <a class="code" href="../../d6/d8e/myisampack_8h.html#a08f606140c332123148eb8cd26ecd05c">mi_int4store</a>(to, <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;      <span class="keywordflow">default</span>: <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(0);</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    }</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    to+=i;</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;  }</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160; </div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  <span class="comment">/* intg1+frac1 part */</span></div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;  <span class="keywordflow">for</span> (stop1=buf1+intg1+frac1; buf1 &lt; stop1; to+=<span class="keyword">sizeof</span>(<a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a>))</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  {</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>=*buf1++ ^ mask;</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a>) == 4);</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <a class="code" href="../../d6/d8e/myisampack_8h.html#a08f606140c332123148eb8cd26ecd05c">mi_int4store</a>(to, <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>);</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  }</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160; </div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <span class="comment">/* frac1x part */</span></div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  <span class="keywordflow">if</span> (frac1x)</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  {</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>;</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    <span class="keywordtype">int</span> i=<a class="code" href="../../dc/d19/decimal_8c.html#af74859e650972604fc1144ee63fcfc88">dig2bytes</a>[frac1x],</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;        lim=(frac1 &lt; frac0 ? <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a> : frac0x);</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    <span class="keywordflow">while</span> (frac1x &lt; lim &amp;&amp; <a class="code" href="../../dc/d19/decimal_8c.html#af74859e650972604fc1144ee63fcfc88">dig2bytes</a>[frac1x] == i)</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;      frac1x++;</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>=(*buf1 / <a class="code" href="../../dc/d19/decimal_8c.html#a3272f667e8515e8f69c55bb184f7fbc8">powers10</a>[<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a> - frac1x]) ^ mask;</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    <span class="keywordflow">switch</span> (i)</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    {</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;      <span class="keywordflow">case</span> 1: <a class="code" href="../../d6/d8e/myisampack_8h.html#abae0542bb55bc986e9815aaf943b9024">mi_int1store</a>(to, <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;      <span class="keywordflow">case</span> 2: <a class="code" href="../../d6/d8e/myisampack_8h.html#a5b3b0b2b5c091d86fddadf874a9a404f">mi_int2store</a>(to, <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;      <span class="keywordflow">case</span> 3: <a class="code" href="../../d6/d8e/myisampack_8h.html#afde1947058fa1b5974d4c40e6ed73d93">mi_int3store</a>(to, <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;      <span class="keywordflow">case</span> 4: <a class="code" href="../../d6/d8e/myisampack_8h.html#a08f606140c332123148eb8cd26ecd05c">mi_int4store</a>(to, <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;      <span class="keywordflow">default</span>: <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(0);</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    }</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    to+=i;</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  }</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;  <span class="keywordflow">if</span> (fsize0 &gt; fsize1)</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  {</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    <a class="code" href="../../d9/df6/my__global_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *to_end= orig_to + orig_fsize0 + orig_isize0;</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160; </div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    <span class="keywordflow">while</span> (fsize0-- &gt; fsize1 &amp;&amp; to &lt; to_end)</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;      *to++= (<a class="code" href="../../d9/df6/my__global_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>)mask;</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;  }</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;  orig_to[0]^= 0x80;</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160; </div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  <span class="comment">/* Check that we have written the whole decimal and nothing more */</span></div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(to == orig_to + orig_fsize0 + orig_isize0);</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;}</div>
<div class="ttc" id="adecimal_8c_html_a1763687278a99086ef1a0ee9ccf859bd"><div class="ttname"><a href="../../dc/d19/decimal_8c.html#a1763687278a99086ef1a0ee9ccf859bd">remove_leading_zeroes</a></div><div class="ttdeci">static dec1 * remove_leading_zeroes(decimal_t *from, int *intg_result)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d19/decimal_8c_source.html#l00253">decimal.c:253</a></div></div>
<div class="ttc" id="amyisampack_8h_html_a08f606140c332123148eb8cd26ecd05c"><div class="ttname"><a href="../../d6/d8e/myisampack_8h.html#a08f606140c332123148eb8cd26ecd05c">mi_int4store</a></div><div class="ttdeci">#define mi_int4store(T, A)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d8e/myisampack_8h_source.html#l00096">myisampack.h:96</a></div></div>
<div class="ttc" id="amyisampack_8h_html_a5b3b0b2b5c091d86fddadf874a9a404f"><div class="ttname"><a href="../../d6/d8e/myisampack_8h.html#a5b3b0b2b5c091d86fddadf874a9a404f">mi_int2store</a></div><div class="ttdeci">#define mi_int2store(T, A)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d8e/myisampack_8h_source.html#l00087">myisampack.h:87</a></div></div>
<div class="ttc" id="amyisampack_8h_html_abae0542bb55bc986e9815aaf943b9024"><div class="ttname"><a href="../../d6/d8e/myisampack_8h.html#abae0542bb55bc986e9815aaf943b9024">mi_int1store</a></div><div class="ttdeci">#define mi_int1store(T, A)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d8e/myisampack_8h_source.html#l00085">myisampack.h:85</a></div></div>
<div class="ttc" id="amyisampack_8h_html_afde1947058fa1b5974d4c40e6ed73d93"><div class="ttname"><a href="../../d6/d8e/myisampack_8h.html#afde1947058fa1b5974d4c40e6ed73d93">mi_int3store</a></div><div class="ttdeci">#define mi_int3store(T, A)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d8e/myisampack_8h_source.html#l00090">myisampack.h:90</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/da0/decimal_8h_source.html#l00027">st_decimal_t::buf</a>, <a class="el" href="../../d0/d74/my__dbug_8h_source.html#l00096">DBUG_ASSERT</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00135">dig2bytes</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00127">DIG_PER_DEC1</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00096">E_DEC_OK</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00098">E_DEC_OVERFLOW</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00097">E_DEC_TRUNCATED</a>, <a class="el" href="../../d3/dc6/minigzip_8c_source.html#l00156">error()</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::frac</a>, <a class="el" href="../../d6/d8e/myisampack_8h_source.html#l00085">mi_int1store</a>, <a class="el" href="../../d6/d8e/myisampack_8h_source.html#l00087">mi_int2store</a>, <a class="el" href="../../d6/d8e/myisampack_8h_source.html#l00090">mi_int3store</a>, <a class="el" href="../../d6/d8e/myisampack_8h_source.html#l00096">mi_int4store</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00133">powers10</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00253">remove_leading_zeroes()</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00026">st_decimal_t::sign</a>, <a class="el" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h_source.html#l00036">unlikely</a>, and <a class="el" href="../../d8/d14/_vector2int16_8h_source.html#l00037">G3D::x</a>.</p>

</div>
</div>
<a id="af712678569209187343a0af882eb01f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af712678569209187343a0af882eb01f7">&#9670;&nbsp;</a></span>decimal2double()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int decimal2double </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l00947">947</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;{</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  <span class="keywordtype">char</span> strbuf[<a class="code" href="../../d6/dda/m__string_8h.html#a4c70192c36f317a021cb28a5b4dbc62c">FLOATING_POINT_BUFFER</a>], *end;</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  <span class="keywordtype">int</span> len= <span class="keyword">sizeof</span>(strbuf);</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  <span class="keywordtype">int</span> rc, <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160; </div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  rc = <a class="code" href="../../dc/d19/decimal_8c.html#a2a8705cf40de357a4a39cb3c374a92cb">decimal2string</a>(from, strbuf, &amp;len, 0, 0, 0);</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  end= strbuf + len;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160; </div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  <a class="code" href="../../d1/d35/dbug__long_8h.html#a3770d2ff545ed3e4b714d20014e663df">DBUG_PRINT</a>(<span class="stringliteral">&quot;info&quot;</span>, (<span class="stringliteral">&quot;interm.: %s&quot;</span>, strbuf));</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160; </div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  *to= <a class="code" href="../../d6/dda/m__string_8h.html#a26e2223fc2ec3c78efc76b89dbfde0b4">my_strtod</a>(strbuf, &amp;end, &amp;<a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>);</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160; </div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  <a class="code" href="../../d1/d35/dbug__long_8h.html#a3770d2ff545ed3e4b714d20014e663df">DBUG_PRINT</a>(<span class="stringliteral">&quot;info&quot;</span>, (<span class="stringliteral">&quot;result: %f&quot;</span>, *to));</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160; </div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  <span class="keywordflow">return</span> (rc != <a class="code" href="../../d5/da0/decimal_8h.html#a6d15cce36445086710326b68b7a01ba4">E_DEC_OK</a>) ? rc : (<a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a> ? <a class="code" href="../../d5/da0/decimal_8h.html#adeff328341b0d04e50b43afeb3c0549e">E_DEC_OVERFLOW</a> : <a class="code" href="../../d5/da0/decimal_8h.html#a6d15cce36445086710326b68b7a01ba4">E_DEC_OK</a>);</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;}</div>
<div class="ttc" id="adbug__long_8h_html_a3770d2ff545ed3e4b714d20014e663df"><div class="ttname"><a href="../../d1/d35/dbug__long_8h.html#a3770d2ff545ed3e4b714d20014e663df">DBUG_PRINT</a></div><div class="ttdeci">#define DBUG_PRINT(keyword, arglist)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d35/dbug__long_8h_source.html#l00143">dbug_long.h:143</a></div></div>
<div class="ttc" id="adecimal_8c_html_a2a8705cf40de357a4a39cb3c374a92cb"><div class="ttname"><a href="../../dc/d19/decimal_8c.html#a2a8705cf40de357a4a39cb3c374a92cb">decimal2string</a></div><div class="ttdeci">int decimal2string(decimal_t *from, char *to, int *to_len, int fixed_precision, int fixed_decimals, char filler)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d19/decimal_8c_source.html#l00331">decimal.c:331</a></div></div>
<div class="ttc" id="am__string_8h_html_a26e2223fc2ec3c78efc76b89dbfde0b4"><div class="ttname"><a href="../../d6/dda/m__string_8h.html#a26e2223fc2ec3c78efc76b89dbfde0b4">my_strtod</a></div><div class="ttdeci">double my_strtod(const char *str, char **end, int *error)</div><div class="ttdoc">Converts string to double (string does not have to be zero-terminated)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d39/dtoa_8c_source.html#l00461">dtoa.c:461</a></div></div>
<div class="ttc" id="am__string_8h_html_a4c70192c36f317a021cb28a5b4dbc62c"><div class="ttname"><a href="../../d6/dda/m__string_8h.html#a4c70192c36f317a021cb28a5b4dbc62c">FLOATING_POINT_BUFFER</a></div><div class="ttdeci">#define FLOATING_POINT_BUFFER</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dda/m__string_8h_source.html#l00142">m_string.h:142</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d1/d35/dbug__long_8h_source.html#l00143">DBUG_PRINT</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00331">decimal2string()</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00096">E_DEC_OK</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00098">E_DEC_OVERFLOW</a>, <a class="el" href="../../d3/dc6/minigzip_8c_source.html#l00156">error()</a>, <a class="el" href="../../d6/dda/m__string_8h_source.html#l00142">FLOATING_POINT_BUFFER</a>, and <a class="el" href="../../d9/d39/dtoa_8c_source.html#l00461">my_strtod()</a>.</p>

</div>
</div>
<a id="ac2552a21d9ea913aa56f914ad15d8db5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2552a21d9ea913aa56f914ad15d8db5">&#9670;&nbsp;</a></span>decimal2longlong()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int decimal2longlong </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#aec67c7fb857b590c82cd4155cd21d7e7">longlong</a> *&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l01057">1057</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;{</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *buf=from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  <a class="code" href="../../d9/df6/my__global_8h.html#aec67c7fb857b590c82cd4155cd21d7e7">longlong</a> <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>=0;</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  <span class="keywordtype">int</span> intg, frac;</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160; </div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  <span class="keywordflow">for</span> (intg=from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>; intg &gt; 0; intg-=<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>)</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;  {</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    <a class="code" href="../../d9/df6/my__global_8h.html#aec67c7fb857b590c82cd4155cd21d7e7">longlong</a> <a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a>=<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;<span class="comment">      Attention: trick!</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;<span class="comment">      we&#39;re calculating -|from| instead of |from| here</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;<span class="comment">      because |LONGLONG_MIN| &gt; LONGLONG_MAX</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;<span class="comment">      so we can convert -9223372036854775808 correctly</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>=<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>*<a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a> - *buf++;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(<a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a> &lt; (LONGLONG_MIN/<a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>) || <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a> &gt; <a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a>))</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    {</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;      <span class="comment">/*</span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;<span class="comment">        the decimal is bigger than any possible integer</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;<span class="comment">        return border integer depending on the sign</span></div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;<span class="comment">      */</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;      *to= from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a> ? LONGLONG_MIN : LONGLONG_MAX;</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/da0/decimal_8h.html#adeff328341b0d04e50b43afeb3c0549e">E_DEC_OVERFLOW</a>;</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    }</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  }</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  <span class="comment">/* boundary case: 9223372036854775808 */</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a>==0 &amp;&amp; <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a> == LONGLONG_MIN))</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  {</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    *to= LONGLONG_MAX;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d5/da0/decimal_8h.html#adeff328341b0d04e50b43afeb3c0549e">E_DEC_OVERFLOW</a>;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;  }</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160; </div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  *to=from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a> ? <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a> : -<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  <span class="keywordflow">for</span> (frac=from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>; <a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(frac &gt; 0); frac-=<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>)</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    <span class="keywordflow">if</span> (*buf++)</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/da0/decimal_8h.html#a11368630fa2fae49fd03fcaa0435b216">E_DEC_TRUNCATED</a>;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d5/da0/decimal_8h.html#a6d15cce36445086710326b68b7a01ba4">E_DEC_OK</a>;</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;}</div>
<div class="ttc" id="amy__global_8h_html_aec67c7fb857b590c82cd4155cd21d7e7"><div class="ttname"><a href="../../d9/df6/my__global_8h.html#aec67c7fb857b590c82cd4155cd21d7e7">longlong</a></div><div class="ttdeci">long longlong</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df6/my__global_8h_source.html#l00921">my_global.h:921</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_a8942ba929b21cfdf30bd22fe36baaefa"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">G3D::y</a></div><div class="ttdeci">G3D::int16 y</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d14/_vector2int16_8h_source.html#l00038">Vector2int16.h:38</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/da0/decimal_8h_source.html#l00027">st_decimal_t::buf</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00129">DIG_BASE</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00127">DIG_PER_DEC1</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00096">E_DEC_OK</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00098">E_DEC_OVERFLOW</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00097">E_DEC_TRUNCATED</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::frac</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::intg</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00026">st_decimal_t::sign</a>, <a class="el" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h_source.html#l00036">unlikely</a>, <a class="el" href="../../d8/d14/_vector2int16_8h_source.html#l00037">G3D::x</a>, and <a class="el" href="../../d8/d14/_vector2int16_8h_source.html#l00038">G3D::y</a>.</p>

</div>
</div>
<a id="a2a8705cf40de357a4a39cb3c374a92cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a8705cf40de357a4a39cb3c374a92cb">&#9670;&nbsp;</a></span>decimal2string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int decimal2string </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>to_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fixed_precision</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fixed_decimals</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>filler</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l00331">331</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;{</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="keywordtype">int</span> len, intg, frac= from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>, i, intg_len, frac_len, <a class="code" href="../../d0/ddf/fmt_2include_2fmt_2format_8h.html#aa261c3477724224b49f5dd92aec0c03a">fill</a>;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="comment">/* number digits before decimal point */</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="keywordtype">int</span> fixed_intg= (fixed_precision ?</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                   (fixed_precision - fixed_decimals) : 0);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>=<a class="code" href="../../d5/da0/decimal_8h.html#a6d15cce36445086710326b68b7a01ba4">E_DEC_OK</a>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keywordtype">char</span> *s=to;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *buf, *buf0=from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>, tmp;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(*to_len &gt;= 2+from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a>);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="comment">/* removing leading zeroes */</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  buf0= <a class="code" href="../../dc/d19/decimal_8c.html#a1763687278a99086ef1a0ee9ccf859bd">remove_leading_zeroes</a>(from, &amp;intg);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(intg+frac==0))</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    intg=1;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    tmp=0;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    buf0=&amp;tmp;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  }</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160; </div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="keywordflow">if</span> (!(intg_len= fixed_precision ? fixed_intg : intg))</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    intg_len= 1;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  frac_len= fixed_precision ? fixed_decimals : frac;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  len= from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a> + intg_len + <a class="code" href="../../d9/df6/my__global_8h.html#aa6cd438f0d8653fd1e4d22046b0cb662">test</a>(frac) + frac_len;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="keywordflow">if</span> (fixed_precision)</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">if</span> (frac &gt; fixed_decimals)</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>= <a class="code" href="../../d5/da0/decimal_8h.html#a11368630fa2fae49fd03fcaa0435b216">E_DEC_TRUNCATED</a>;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      frac= fixed_decimals;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordflow">if</span> (intg &gt; fixed_intg)</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    {</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>= <a class="code" href="../../d5/da0/decimal_8h.html#adeff328341b0d04e50b43afeb3c0549e">E_DEC_OVERFLOW</a>;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      intg= fixed_intg;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    }</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(len &gt; --*to_len)) <span class="comment">/* reserve one byte for \0 */</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordtype">int</span> j= len-*to_len;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>= (frac &amp;&amp; j &lt;= frac + 1) ? <a class="code" href="../../d5/da0/decimal_8h.html#a11368630fa2fae49fd03fcaa0435b216">E_DEC_TRUNCATED</a> : <a class="code" href="../../d5/da0/decimal_8h.html#adeff328341b0d04e50b43afeb3c0549e">E_DEC_OVERFLOW</a>;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keywordflow">if</span> (frac &amp;&amp; j &gt;= frac + 1) j--;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordflow">if</span> (j &gt; frac)</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      intg-= j-frac;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      frac= 0;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    }</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      frac-=j;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    len= from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a> + intg_len + <a class="code" href="../../d9/df6/my__global_8h.html#aa6cd438f0d8653fd1e4d22046b0cb662">test</a>(frac) + frac_len;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  *to_len=len;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  s[len]=0;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="keywordflow">if</span> (from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a>)</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    *s++=<span class="charliteral">&#39;-&#39;</span>;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160; </div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="keywordflow">if</span> (frac)</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordtype">char</span> *s1= s + intg_len;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <a class="code" href="../../d0/ddf/fmt_2include_2fmt_2format_8h.html#aa261c3477724224b49f5dd92aec0c03a">fill</a>= frac_len - frac;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    buf=buf0+<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(intg);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    *s1++=<span class="charliteral">&#39;.&#39;</span>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">for</span> (; frac&gt;0; frac-=<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>)</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>=*buf++;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      <span class="keywordflow">for</span> (i=<a class="code" href="../../d9/df6/my__global_8h.html#ac6afabdc09a49a433ee19d8a9486056d">min</a>(frac, <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>); i; i--)</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> <a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a>=<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>/<a class="code" href="../../dc/d19/decimal_8c.html#a41c8495334194626b446824d59459750">DIG_MASK</a>;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        *s1++=<span class="charliteral">&#39;0&#39;</span>+(<a class="code" href="../../d9/df6/my__global_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>)<a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a>;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>-=<a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a>*<a class="code" href="../../dc/d19/decimal_8c.html#a41c8495334194626b446824d59459750">DIG_MASK</a>;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>*=10;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      }</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    }</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordflow">for</span>(; <a class="code" href="../../d0/ddf/fmt_2include_2fmt_2format_8h.html#aa261c3477724224b49f5dd92aec0c03a">fill</a>; <a class="code" href="../../d0/ddf/fmt_2include_2fmt_2format_8h.html#aa261c3477724224b49f5dd92aec0c03a">fill</a>--)</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      *s1++=filler;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  }</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160; </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <a class="code" href="../../d0/ddf/fmt_2include_2fmt_2format_8h.html#aa261c3477724224b49f5dd92aec0c03a">fill</a>= intg_len - intg;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="keywordflow">if</span> (intg == 0)</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <a class="code" href="../../d0/ddf/fmt_2include_2fmt_2format_8h.html#aa261c3477724224b49f5dd92aec0c03a">fill</a>--; <span class="comment">/* symbol 0 before digital point */</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="keywordflow">for</span>(; <a class="code" href="../../d0/ddf/fmt_2include_2fmt_2format_8h.html#aa261c3477724224b49f5dd92aec0c03a">fill</a>; <a class="code" href="../../d0/ddf/fmt_2include_2fmt_2format_8h.html#aa261c3477724224b49f5dd92aec0c03a">fill</a>--)</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    *s++=filler;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="keywordflow">if</span> (intg)</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    s+=intg;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keywordflow">for</span> (buf=buf0+<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(intg); intg&gt;0; intg-=<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>)</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    {</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>=*--buf;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      <span class="keywordflow">for</span> (i=<a class="code" href="../../d9/df6/my__global_8h.html#ac6afabdc09a49a433ee19d8a9486056d">min</a>(intg, <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>); i; i--)</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> <a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a>=<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>/10;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        *--s=<span class="charliteral">&#39;0&#39;</span>+(<a class="code" href="../../d9/df6/my__global_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>)(<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>-<a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a>*10);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>=<a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a>;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  }</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    *s= <span class="charliteral">&#39;0&#39;</span>;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;}</div>
<div class="ttc" id="adecimal_8c_html_a41c8495334194626b446824d59459750"><div class="ttname"><a href="../../dc/d19/decimal_8c.html#a41c8495334194626b446824d59459750">DIG_MASK</a></div><div class="ttdeci">#define DIG_MASK</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d19/decimal_8c_source.html#l00128">decimal.c:128</a></div></div>
<div class="ttc" id="adecimal_8c_html_ad5dcd985c76bd978233a42cc7d993970"><div class="ttname"><a href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a></div><div class="ttdeci">#define ROUND_UP(X)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d19/decimal_8c_source.html#l00132">decimal.c:132</a></div></div>
<div class="ttc" id="afmt_2include_2fmt_2format_8h_html_aa261c3477724224b49f5dd92aec0c03a"><div class="ttname"><a href="../../d0/ddf/fmt_2include_2fmt_2format_8h.html#aa261c3477724224b49f5dd92aec0c03a">fill</a></div><div class="ttdeci">FMT_NOINLINE FMT_CONSTEXPR auto fill(OutputIt it, size_t n, const fill_t&lt; Char &gt; &amp;fill) -&gt; OutputIt</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddf/fmt_2include_2fmt_2format_8h_source.html#l01264">format.h:1264</a></div></div>
<div class="ttc" id="amy__global_8h_html_aa6cd438f0d8653fd1e4d22046b0cb662"><div class="ttname"><a href="../../d9/df6/my__global_8h.html#aa6cd438f0d8653fd1e4d22046b0cb662">test</a></div><div class="ttdeci">#define test(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df6/my__global_8h_source.html#l00480">my_global.h:480</a></div></div>
<div class="ttc" id="amy__global_8h_html_ac6afabdc09a49a433ee19d8a9486056d"><div class="ttname"><a href="../../d9/df6/my__global_8h.html#ac6afabdc09a49a433ee19d8a9486056d">min</a></div><div class="ttdeci">#define min(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df6/my__global_8h_source.html#l01387">my_global.h:1387</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/da0/decimal_8h_source.html#l00027">st_decimal_t::buf</a>, <a class="el" href="../../d0/d74/my__dbug_8h_source.html#l00096">DBUG_ASSERT</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00128">DIG_MASK</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00127">DIG_PER_DEC1</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00096">E_DEC_OK</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00098">E_DEC_OVERFLOW</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00097">E_DEC_TRUNCATED</a>, <a class="el" href="../../d3/dc6/minigzip_8c_source.html#l00156">error()</a>, <a class="el" href="../../d0/ddf/fmt_2include_2fmt_2format_8h_source.html#l01264">fill()</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::frac</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l01387">min</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00253">remove_leading_zeroes()</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00132">ROUND_UP</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00026">st_decimal_t::sign</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l00480">test</a>, <a class="el" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h_source.html#l00036">unlikely</a>, <a class="el" href="../../d8/d14/_vector2int16_8h_source.html#l00037">G3D::x</a>, and <a class="el" href="../../d8/d14/_vector2int16_8h_source.html#l00038">G3D::y</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d19/decimal_8c_source.html#l00947">decimal2double()</a>.</p>

</div>
</div>
<a id="ac6c6f649723cc05f0e2fb12df925188d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6c6f649723cc05f0e2fb12df925188d">&#9670;&nbsp;</a></span>decimal2ulonglong()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int decimal2ulonglong </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a> *&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l01028">1028</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;{</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *buf=from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>;</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;  <a class="code" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a> <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>=0;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  <span class="keywordtype">int</span> intg, frac;</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160; </div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  <span class="keywordflow">if</span> (from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a>)</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  {</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;      *to=<a class="code" href="../../d9/df6/my__global_8h.html#ab80dc247903411d69d8b4cc972046da7">ULL</a>(0);</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/da0/decimal_8h.html#adeff328341b0d04e50b43afeb3c0549e">E_DEC_OVERFLOW</a>;</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;  }</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160; </div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;  <span class="keywordflow">for</span> (intg=from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>; intg &gt; 0; intg-=<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>)</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;  {</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <a class="code" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a> <a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a>=<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>=<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>*<a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a> + *buf++;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(<a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a> &gt; ((<a class="code" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a>) <a class="code" href="../../d7/d42/ctype-ucs2_8c.html#abb917c05458ae022fb7870fda7b6c642">ULONGLONG_MAX</a>/<a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>) || <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a> &lt; <a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a>))</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    {</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;      *to=<a class="code" href="../../d7/d42/ctype-ucs2_8c.html#abb917c05458ae022fb7870fda7b6c642">ULONGLONG_MAX</a>;</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/da0/decimal_8h.html#adeff328341b0d04e50b43afeb3c0549e">E_DEC_OVERFLOW</a>;</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    }</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  }</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  *to=<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  <span class="keywordflow">for</span> (frac=from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>; <a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(frac &gt; 0); frac-=<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>)</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <span class="keywordflow">if</span> (*buf++)</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/da0/decimal_8h.html#a11368630fa2fae49fd03fcaa0435b216">E_DEC_TRUNCATED</a>;</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d5/da0/decimal_8h.html#a6d15cce36445086710326b68b7a01ba4">E_DEC_OK</a>;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;}</div>
<div class="ttc" id="actype-ucs2_8c_html_abb917c05458ae022fb7870fda7b6c642"><div class="ttname"><a href="../../d7/d42/ctype-ucs2_8c.html#abb917c05458ae022fb7870fda7b6c642">ULONGLONG_MAX</a></div><div class="ttdeci">#define ULONGLONG_MAX</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d42/ctype-ucs2_8c_source.html#l00043">ctype-ucs2.c:43</a></div></div>
<div class="ttc" id="amy__global_8h_html_ab80dc247903411d69d8b4cc972046da7"><div class="ttname"><a href="../../d9/df6/my__global_8h.html#ab80dc247903411d69d8b4cc972046da7">ULL</a></div><div class="ttdeci">#define ULL(A)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df6/my__global_8h_source.html#l01009">my_global.h:1009</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/da0/decimal_8h_source.html#l00027">st_decimal_t::buf</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00129">DIG_BASE</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00127">DIG_PER_DEC1</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00096">E_DEC_OK</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00098">E_DEC_OVERFLOW</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00097">E_DEC_TRUNCATED</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::frac</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::intg</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00026">st_decimal_t::sign</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l01009">ULL</a>, <a class="el" href="../../d7/d42/ctype-ucs2_8c_source.html#l00043">ULONGLONG_MAX</a>, <a class="el" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h_source.html#l00036">unlikely</a>, <a class="el" href="../../d8/d14/_vector2int16_8h_source.html#l00037">G3D::x</a>, and <a class="el" href="../../d8/d14/_vector2int16_8h_source.html#l00038">G3D::y</a>.</p>

</div>
</div>
<a id="a261c834db3e32ffb5057bcadebfe96bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a261c834db3e32ffb5057bcadebfe96bf">&#9670;&nbsp;</a></span>decimal_actual_fraction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int decimal_actual_fraction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>from</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l00284">284</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;{</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="keywordtype">int</span> frac= from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>, i;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *buf0= from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a> + <a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>) + <a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(frac) - 1;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="keywordflow">if</span> (frac == 0)</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  i= ((frac - 1) % <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a> + 1);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="keywordflow">while</span> (frac &gt; 0 &amp;&amp; *buf0 == 0)</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    frac-= i;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    i= <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    buf0--;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keywordflow">if</span> (frac &gt; 0)</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">for</span> (i= <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a> - ((frac - 1) % <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;         *buf0 % <a class="code" href="../../dc/d19/decimal_8c.html#a3272f667e8515e8f69c55bb184f7fbc8">powers10</a>[i++] == 0;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;         frac--) ;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="keywordflow">return</span> frac;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/da0/decimal_8h_source.html#l00027">st_decimal_t::buf</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00127">DIG_PER_DEC1</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::frac</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::intg</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00133">powers10</a>, and <a class="el" href="../../dc/d19/decimal_8c_source.html#l00132">ROUND_UP</a>.</p>

</div>
</div>
<a id="a92b077bd77665b45620f4027e8bca260"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92b077bd77665b45620f4027e8bca260">&#9670;&nbsp;</a></span>decimal_add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int decimal_add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>from1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>from2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l01924">1924</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;{</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#a217a0bd562b98ae8c2ffce44935351e1">likely</a>(from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a> == from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a>))</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dc/d19/decimal_8c.html#a3914916ac130fbc4693c6bfe823926f3">do_add</a>(from1, from2, to);</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../dc/d19/decimal_8c.html#a24209e2aa3a6ffcb2799d54001963c41">do_sub</a>(from1, from2, to);</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;}</div>
<div class="ttc" id="adecimal_8c_html_a24209e2aa3a6ffcb2799d54001963c41"><div class="ttname"><a href="../../dc/d19/decimal_8c.html#a24209e2aa3a6ffcb2799d54001963c41">do_sub</a></div><div class="ttdeci">static int do_sub(decimal_t *from1, decimal_t *from2, decimal_t *to)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d19/decimal_8c_source.html#l01782">decimal.c:1782</a></div></div>
<div class="ttc" id="adecimal_8c_html_a3914916ac130fbc4693c6bfe823926f3"><div class="ttname"><a href="../../dc/d19/decimal_8c.html#a3914916ac130fbc4693c6bfe823926f3">do_add</a></div><div class="ttdeci">static int do_add(decimal_t *from1, decimal_t *from2, decimal_t *to)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d19/decimal_8c_source.html#l01700">decimal.c:1700</a></div></div>
<div class="ttc" id="adeps_2jemalloc_2include_2jemalloc_2internal_2util_8h_html_a217a0bd562b98ae8c2ffce44935351e1"><div class="ttname"><a href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#a217a0bd562b98ae8c2ffce44935351e1">likely</a></div><div class="ttdeci">#define likely(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h_source.html#l00035">util.h:35</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d19/decimal_8c_source.html#l01700">do_add()</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l01782">do_sub()</a>, <a class="el" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h_source.html#l00035">likely</a>, and <a class="el" href="../../d5/da0/decimal_8h_source.html#l00026">st_decimal_t::sign</a>.</p>

</div>
</div>
<a id="a033bbd66947b68a0c915cb3775f37454"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a033bbd66947b68a0c915cb3775f37454">&#9670;&nbsp;</a></span>decimal_bin_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int decimal_bin_size </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>precision</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>scale</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l01436">1436</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;{</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;  <span class="keywordtype">int</span> intg=precision-scale,</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;      intg0=intg/<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>, frac0=scale/<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>,</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;      intg0x=intg-intg0*<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>, frac0x=scale-frac0*<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>;</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160; </div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;  <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(scale &gt;= 0 &amp;&amp; precision &gt; 0 &amp;&amp; scale &lt;= precision);</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;  <span class="keywordflow">return</span> intg0*<span class="keyword">sizeof</span>(<a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a>)+<a class="code" href="../../dc/d19/decimal_8c.html#af74859e650972604fc1144ee63fcfc88">dig2bytes</a>[intg0x]+</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;         frac0*<span class="keyword">sizeof</span>(<a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a>)+<a class="code" href="../../dc/d19/decimal_8c.html#af74859e650972604fc1144ee63fcfc88">dig2bytes</a>[frac0x];</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d0/d74/my__dbug_8h_source.html#l00096">DBUG_ASSERT</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00135">dig2bytes</a>, and <a class="el" href="../../dc/d19/decimal_8c_source.html#l00127">DIG_PER_DEC1</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d19/decimal_8c_source.html#l01311">bin2decimal()</a>.</p>

</div>
</div>
<a id="abdff159704e535ca000e896e4eab9cda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdff159704e535ca000e896e4eab9cda">&#9670;&nbsp;</a></span>decimal_cmp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int decimal_cmp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>from1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>from2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l01938">1938</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;{</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#a217a0bd562b98ae8c2ffce44935351e1">likely</a>(from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a> == from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a>))</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dc/d19/decimal_8c.html#a24209e2aa3a6ffcb2799d54001963c41">do_sub</a>(from1, from2, 0);</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;  <span class="keywordflow">return</span> from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a> &gt; from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a> ? -1 : 1;</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d19/decimal_8c_source.html#l01782">do_sub()</a>, <a class="el" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h_source.html#l00035">likely</a>, and <a class="el" href="../../d5/da0/decimal_8h_source.html#l00026">st_decimal_t::sign</a>.</p>

</div>
</div>
<a id="a932f30979701ce2c380f0c1588302d2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a932f30979701ce2c380f0c1588302d2f">&#9670;&nbsp;</a></span>decimal_div()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int decimal_div </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>from1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>from2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>scale_incr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l02360">2360</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;{</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../dc/d19/decimal_8c.html#a546f4a45bfdaae1379a151e5ad927703">do_div_mod</a>(from1, from2, to, 0, scale_incr);</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;}</div>
<div class="ttc" id="adecimal_8c_html_a546f4a45bfdaae1379a151e5ad927703"><div class="ttname"><a href="../../dc/d19/decimal_8c.html#a546f4a45bfdaae1379a151e5ad927703">do_div_mod</a></div><div class="ttdeci">static int do_div_mod(decimal_t *from1, decimal_t *from2, decimal_t *to, decimal_t *mod, int scale_incr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d19/decimal_8c_source.html#l02100">decimal.c:2100</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d19/decimal_8c_source.html#l02100">do_div_mod()</a>.</p>

</div>
</div>
<a id="a1b1678a4838d23853ae889c2bb7c588b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b1678a4838d23853ae889c2bb7c588b">&#9670;&nbsp;</a></span>decimal_intg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int decimal_intg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>from</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l01917">1917</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;{</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;  <span class="keywordtype">int</span> res;</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a1763687278a99086ef1a0ee9ccf859bd">remove_leading_zeroes</a>(from, &amp;res);</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;  <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d19/decimal_8c_source.html#l00253">remove_leading_zeroes()</a>.</p>

</div>
</div>
<a id="a7ea97900348dc727339565e6998bd98c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ea97900348dc727339565e6998bd98c">&#9670;&nbsp;</a></span>decimal_is_zero()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int decimal_is_zero </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>from</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l01945">1945</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;{</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *buf1=from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>,</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;       *end=buf1+<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>)+<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>);</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;  <span class="keywordflow">while</span> (buf1 &lt; end)</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;    <span class="keywordflow">if</span> (*buf1++)</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;  <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/da0/decimal_8h_source.html#l00027">st_decimal_t::buf</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::frac</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::intg</a>, and <a class="el" href="../../dc/d19/decimal_8c_source.html#l00132">ROUND_UP</a>.</p>

</div>
</div>
<a id="abb5760ec39af513ede329719ca225310"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb5760ec39af513ede329719ca225310">&#9670;&nbsp;</a></span>decimal_mod()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int decimal_mod </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>from1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>from2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l02392">2392</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;{</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../dc/d19/decimal_8c.html#a546f4a45bfdaae1379a151e5ad927703">do_div_mod</a>(from1, from2, 0, to, 0);</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d19/decimal_8c_source.html#l02100">do_div_mod()</a>.</p>

</div>
</div>
<a id="abc445aa3e6aff5825db2dc26ccfb4af8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc445aa3e6aff5825db2dc26ccfb4af8">&#9670;&nbsp;</a></span>decimal_mul()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int decimal_mul </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>from1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>from2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l01976">1976</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;{</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;  <span class="keywordtype">int</span> intg1=<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>), intg2=<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>),</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;      frac1=<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>), frac2=<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>),</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;      intg0=<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>+from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>),</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;      frac0=frac1+frac2, <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>, i, j, d_to_move;</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *buf1=from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>+intg1, *buf2=from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>+intg2, *buf0,</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;       *start2, *stop2, *stop1, *start0, carry;</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160; </div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a5fd165f5e0781ede5f9413895fe3ab5c">sanity</a>(to);</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160; </div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;  i=intg0;                                       <span class="comment">/* save &#39;ideal&#39; values */</span></div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;  j=frac0;</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a2e86a17284f9ad51bc296439f3981b53">FIX_INTG_FRAC_ERROR</a>(to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#adf138ff1dd2904d68d243e7b5207c4da">len</a>, intg0, frac0, <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>);  <span class="comment">/* bound size */</span></div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;  to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a>=from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a> != from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a>;</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;  to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>=from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>+from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>;              <span class="comment">/* store size in digits */</span></div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;  to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>=intg0*<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>;</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160; </div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(<a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>))</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;  {</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;    <a class="code" href="../../d9/df6/my__global_8h.html#aadeec961a0e84bb1fa3cded11703cf2f">set_if_smaller</a>(to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>, frac0*<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>);</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;    <a class="code" href="../../d9/df6/my__global_8h.html#aadeec961a0e84bb1fa3cded11703cf2f">set_if_smaller</a>(to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>, intg0*<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>);</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(i &gt; intg0))                     <span class="comment">/* bounded integer-part */</span></div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;    {</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;      i-=intg0;</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;      j=i &gt;&gt; 1;</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;      intg1-= j;</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;      intg2-=i-j;</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;      frac1=frac2=0; <span class="comment">/* frac0 is already 0 here */</span></div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;    }</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;    <span class="keywordflow">else</span>                                         <span class="comment">/* bounded fract part */</span></div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;    {</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;      j-=frac0;</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;      i=j &gt;&gt; 1;</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;      <span class="keywordflow">if</span> (frac1 &lt;= frac2)</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;      {</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;        frac1-= i;</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;        frac2-=j-i;</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;      }</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;      {</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;        frac2-= i;</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;        frac1-=j-i;</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;      }</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;    }</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;  }</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;  start0=to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>+intg0+frac0-1;</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;  start2=buf2+frac2-1;</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;  stop1=buf1-intg1;</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;  stop2=buf2-intg2;</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160; </div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;  <a class="code" href="../../d6/dda/m__string_8h.html#ab3be5dcbbf1244672c14662b20f88b61">bzero</a>(to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>, (intg0+frac0)*<span class="keyword">sizeof</span>(<a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a>));</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160; </div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;  <span class="keywordflow">for</span> (buf1+=frac1-1; buf1 &gt;= stop1; buf1--, start0--)</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;  {</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;    carry=0;</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;    <span class="keywordflow">for</span> (buf0=start0, buf2=start2; buf2 &gt;= stop2; buf2--, buf0--)</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;    {</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;      <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> hi, lo;</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;      <a class="code" href="../../dc/d19/decimal_8c.html#ad48c17fde8152ca8fd5d3a6fb7ddbcc3">dec2</a> p= ((<a class="code" href="../../dc/d19/decimal_8c.html#ad48c17fde8152ca8fd5d3a6fb7ddbcc3">dec2</a>)*buf1) * ((<a class="code" href="../../dc/d19/decimal_8c.html#ad48c17fde8152ca8fd5d3a6fb7ddbcc3">dec2</a>)*buf2);</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;      hi=(<a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a>)(p/<a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>);</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;      lo=(<a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a>)(p-((<a class="code" href="../../dc/d19/decimal_8c.html#ad48c17fde8152ca8fd5d3a6fb7ddbcc3">dec2</a>)hi)*<a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>);</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;      <a class="code" href="../../dc/d19/decimal_8c.html#a98ff32b29b3054de32d830f17ec5dcac">ADD2</a>(*buf0, *buf0, lo, carry);</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;      carry+=hi;</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;    }</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;    <span class="keywordflow">if</span> (carry)</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;    {</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;      <span class="keywordflow">if</span> (buf0 &lt; to-&gt;buf)</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d5/da0/decimal_8h.html#adeff328341b0d04e50b43afeb3c0549e">E_DEC_OVERFLOW</a>;</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;      <a class="code" href="../../dc/d19/decimal_8c.html#a98ff32b29b3054de32d830f17ec5dcac">ADD2</a>(*buf0, *buf0, 0, carry);</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;    }</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;    <span class="keywordflow">for</span> (buf0--; carry; buf0--)</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;    {</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;      <span class="keywordflow">if</span> (buf0 &lt; to-&gt;buf)</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d5/da0/decimal_8h.html#adeff328341b0d04e50b43afeb3c0549e">E_DEC_OVERFLOW</a>;</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;      <a class="code" href="../../dc/d19/decimal_8c.html#ab9dde235ea6b498670b1202efc8863cc">ADD</a>(*buf0, *buf0, 0, carry);</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;    }</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;  }</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160; </div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;  <span class="comment">/* Now we have to check for -0.000 case */</span></div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;  <span class="keywordflow">if</span> (to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a>)</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;  {</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;    <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *buf= to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>;</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;    <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *end= to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a> + intg0 + frac0;</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;    <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(buf != end);</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;    <span class="keywordflow">for</span> (;;)</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;    {</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;      <span class="keywordflow">if</span> (*buf)</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;      <span class="keywordflow">if</span> (++buf == end)</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;      {</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;        <span class="comment">/* We got decimal zero */</span></div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;        <a class="code" href="../../d5/da0/decimal_8h.html#a5ed860a83aa33b8b125e3317cacbc074">decimal_make_zero</a>(to);</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;      }</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;    }</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;  }</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;  buf1= to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>;</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;  d_to_move= intg0 + <a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>);</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;  <span class="keywordflow">while</span> (!*buf1 &amp;&amp; (to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a> &gt; <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>))</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;  {</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;    buf1++;</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;    to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>-= <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>;</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;    d_to_move--;</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;  }</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;  <span class="keywordflow">if</span> (to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a> &lt; buf1)</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;  {</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;    <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *cur_d= to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>;</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;    <span class="keywordflow">for</span> (; d_to_move--; cur_d++, buf1++)</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;      *cur_d= *buf1;</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;  }</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>;</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;}</div>
<div class="ttc" id="adecimal_8c_html_a98ff32b29b3054de32d830f17ec5dcac"><div class="ttname"><a href="../../dc/d19/decimal_8c.html#a98ff32b29b3054de32d830f17ec5dcac">ADD2</a></div><div class="ttdeci">#define ADD2(to, from1, from2, carry)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d19/decimal_8c_source.html#l00179">decimal.c:179</a></div></div>
<div class="ttc" id="adecimal_8c_html_ab9dde235ea6b498670b1202efc8863cc"><div class="ttname"><a href="../../dc/d19/decimal_8c.html#ab9dde235ea6b498670b1202efc8863cc">ADD</a></div><div class="ttdeci">#define ADD(to, from1, from2, carry)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d19/decimal_8c_source.html#l00169">decimal.c:169</a></div></div>
<div class="ttc" id="am__string_8h_html_ab3be5dcbbf1244672c14662b20f88b61"><div class="ttname"><a href="../../d6/dda/m__string_8h.html#ab3be5dcbbf1244672c14662b20f88b61">bzero</a></div><div class="ttdeci">#define bzero(A, B)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dda/m__string_8h_source.html#l00063">m_string.h:63</a></div></div>
<div class="ttc" id="amy__global_8h_html_aadeec961a0e84bb1fa3cded11703cf2f"><div class="ttname"><a href="../../d9/df6/my__global_8h.html#aadeec961a0e84bb1fa3cded11703cf2f">set_if_smaller</a></div><div class="ttdeci">#define set_if_smaller(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df6/my__global_8h_source.html#l00482">my_global.h:482</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d19/decimal_8c_source.html#l00169">ADD</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00179">ADD2</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00027">st_decimal_t::buf</a>, <a class="el" href="../../d6/dda/m__string_8h_source.html#l00063">bzero</a>, <a class="el" href="../../d0/d74/my__dbug_8h_source.html#l00096">DBUG_ASSERT</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00068">decimal_make_zero</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00129">DIG_BASE</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00127">DIG_PER_DEC1</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00098">E_DEC_OVERFLOW</a>, <a class="el" href="../../d3/dc6/minigzip_8c_source.html#l00156">error()</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00148">FIX_INTG_FRAC_ERROR</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::frac</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::intg</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::len</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00132">ROUND_UP</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00144">sanity</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l00482">set_if_smaller</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00026">st_decimal_t::sign</a>, and <a class="el" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h_source.html#l00036">unlikely</a>.</p>

</div>
</div>
<a id="ad4b66a468aa43a90716baa562b59fb60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4b66a468aa43a90716baa562b59fb60">&#9670;&nbsp;</a></span>decimal_result_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int decimal_result_size </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>from1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>from2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>param</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l01681">1681</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;{</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;  <span class="keywordflow">switch</span> (op) {</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;  <span class="keywordflow">case</span> <span class="charliteral">&#39;-&#39;</span>:</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(<a class="code" href="../../d9/df6/my__global_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>(from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>, from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>)) +</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;           <a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(<a class="code" href="../../d9/df6/my__global_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>(from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>, from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>));</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;  <span class="keywordflow">case</span> <span class="charliteral">&#39;+&#39;</span>:</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(<a class="code" href="../../d9/df6/my__global_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>(from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>, from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>)+1) +</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;           <a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(<a class="code" href="../../d9/df6/my__global_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>(from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>, from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>));</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;  <span class="keywordflow">case</span> <span class="charliteral">&#39;*&#39;</span>:</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>+from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>)+</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;           <a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>)+<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>);</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;  <span class="keywordflow">case</span> <span class="charliteral">&#39;/&#39;</span>:</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>+from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>+1+from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>+from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>+param);</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;  <span class="keywordflow">default</span>: <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(0);</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;  }</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;  <span class="keywordflow">return</span> -1; <span class="comment">/* shut up the warning */</span></div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;}</div>
<div class="ttc" id="amy__global_8h_html_affe776513b24d84b39af8ab0930fef7f"><div class="ttname"><a href="../../d9/df6/my__global_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a></div><div class="ttdeci">#define max(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df6/my__global_8h_source.html#l01386">my_global.h:1386</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d0/d74/my__dbug_8h_source.html#l00096">DBUG_ASSERT</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::frac</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::intg</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l01386">max</a>, and <a class="el" href="../../dc/d19/decimal_8c_source.html#l00132">ROUND_UP</a>.</p>

</div>
</div>
<a id="a90307f553e3e8cae5f4bcafc95fec319"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90307f553e3e8cae5f4bcafc95fec319">&#9670;&nbsp;</a></span>decimal_round()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int decimal_round </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a3382d415b856cdea8c5cce928260db62">decimal_round_mode</a>&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l01466">1466</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;{</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;  <span class="keywordtype">int</span> frac0=scale&gt;0 ? <a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(scale) : scale/<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>,</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    frac1=<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(from-&gt;frac), <a class="code" href="../../d9/df6/my__global_8h.html#aae0dcf447aac67c9902b0ab7f3835e79">UNINIT_VAR</a>(round_digit),</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;      intg0=<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(from-&gt;intg), <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>=<a class="code" href="../../d5/da0/decimal_8h.html#a6d15cce36445086710326b68b7a01ba4">E_DEC_OK</a>, len=to-&gt;len,</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;      intg1=<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(from-&gt;intg +</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;                     (((intg0 + frac0)&gt;0) &amp;&amp; (from-&gt;buf[0] == <a class="code" href="../../dc/d19/decimal_8c.html#a4ef335f9599f2f33702b9b95c0f59364">DIG_MAX</a>)));</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *buf0=from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>, *buf1=to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>, <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>, <a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a>, carry=0;</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;  <span class="keywordtype">int</span> first_dig;</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160; </div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a5fd165f5e0781ede5f9413895fe3ab5c">sanity</a>(to);</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160; </div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;  <span class="keywordflow">switch</span> (mode) {</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../d5/da0/decimal_8h.html#a3382d415b856cdea8c5cce928260db62ac1a961f8d767021e1264bfd36cd06654">HALF_UP</a>:</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../d5/da0/decimal_8h.html#a3382d415b856cdea8c5cce928260db62aef9f780bc132ce394d4ba89cd1e77070">HALF_EVEN</a>:       round_digit=5; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../d5/da0/decimal_8h.html#a3382d415b856cdea8c5cce928260db62a0ee31af9a91b18edf2bc06d9eb86a100">CEILING</a>:         round_digit= from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a> ? 10 : 0; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../d5/da0/decimal_8h.html#a3382d415b856cdea8c5cce928260db62ab5c63c54204a3c25d5ff88ea4d1d8336">FLOOR</a>:           round_digit= from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a> ? 0 : 10; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="../../d5/da0/decimal_8h.html#a3382d415b856cdea8c5cce928260db62aef3b4ad4c0fed6dce31b6e5d2a7f0ab4">TRUNCATE</a>:        round_digit=10; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;  <span class="keywordflow">default</span>: <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(0);</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;  }</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160; </div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(frac0+intg0 &gt; len))</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  {</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    frac0=len-intg0;</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    scale=frac0*<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>;</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>=<a class="code" href="../../d5/da0/decimal_8h.html#a11368630fa2fae49fd03fcaa0435b216">E_DEC_TRUNCATED</a>;</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;  }</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160; </div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;  <span class="keywordflow">if</span> (scale+from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a> &lt; 0)</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;  {</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    <a class="code" href="../../d5/da0/decimal_8h.html#a5ed860a83aa33b8b125e3317cacbc074">decimal_make_zero</a>(to);</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d5/da0/decimal_8h.html#a6d15cce36445086710326b68b7a01ba4">E_DEC_OK</a>;</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;  }</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160; </div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;  <span class="keywordflow">if</span> (to != from || intg1&gt;intg0)</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;  {</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *p0= buf0+intg0+<a class="code" href="../../d9/df6/my__global_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>(frac1, frac0);</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *p1= buf1+intg1+<a class="code" href="../../d9/df6/my__global_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>(frac1, frac0);</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160; </div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    <span class="keywordflow">while</span> (buf0 &lt; p0)</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;      *(--p1) = *(--p0);</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(intg1 &gt; intg0))</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;      to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>[0]= 0;</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160; </div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    intg0= intg1;</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    buf0=to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>;</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    buf1=to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>;</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a>=from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a>;</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>=<a class="code" href="../../d9/df6/my__global_8h.html#ac6afabdc09a49a433ee19d8a9486056d">min</a>(intg0, len)*<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>;</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;  }</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160; </div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;  <span class="keywordflow">if</span> (frac0 &gt; frac1)</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;  {</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    buf1+=intg0+frac1;</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    <span class="keywordflow">while</span> (frac0-- &gt; frac1)</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;      *buf1++=0;</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    <span class="keywordflow">goto</span> <a class="code" href="../../df/d60/namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5aeac7878d891005c72a71703f35dbb2be15">done</a>;</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;  }</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160; </div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;  <span class="keywordflow">if</span> (scale &gt;= from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>)</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    <span class="keywordflow">goto</span> <a class="code" href="../../df/d60/namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5aeac7878d891005c72a71703f35dbb2be15">done</a>; <span class="comment">/* nothing to do */</span></div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160; </div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;  buf0+=intg0+frac0-1;</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;  buf1+=intg0+frac0-1;</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;  <span class="keywordflow">if</span> (scale == frac0*<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>)</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;  {</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    <span class="keywordtype">int</span> do_inc= <a class="code" href="../../d8/dec/mpq-internal_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;    <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(frac0+intg0 &gt;= 0);</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;    <span class="keywordflow">switch</span> (round_digit) {</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    {</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;      <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *p0= buf0 + (frac1-frac0);</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;      <span class="keywordflow">for</span> (; p0 &gt; buf0; p0--)</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;      {</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;        <span class="keywordflow">if</span> (*p0)</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;        {</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;          do_inc= <a class="code" href="../../d8/dec/mpq-internal_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;        }</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;      }</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;    }</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    <span class="keywordflow">case</span> 5:</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;    {</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;      <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>= buf0[1]/<a class="code" href="../../dc/d19/decimal_8c.html#a41c8495334194626b446824d59459750">DIG_MASK</a>;</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;      do_inc= (<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>&gt;5) || ((<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a> == 5) &amp;&amp;</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;                        (mode == <a class="code" href="../../d5/da0/decimal_8h.html#a3382d415b856cdea8c5cce928260db62ac1a961f8d767021e1264bfd36cd06654">HALF_UP</a> || (frac0+intg0 &gt; 0 &amp;&amp; *buf0 &amp; 1)));</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    }</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    }</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    <span class="keywordflow">if</span> (do_inc)</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    {</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;      <span class="keywordflow">if</span> (frac0+intg0&gt;0)</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;        (*buf1)++;</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;        *(++buf1)=<a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>;</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    }</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (frac0+intg0==0)</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;    {</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;      <a class="code" href="../../d5/da0/decimal_8h.html#a5ed860a83aa33b8b125e3317cacbc074">decimal_make_zero</a>(to);</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/da0/decimal_8h.html#a6d15cce36445086710326b68b7a01ba4">E_DEC_OK</a>;</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    }</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;  }</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;  {</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    <span class="comment">/* TODO - fix this code as it won&#39;t work for CEILING mode */</span></div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a>=frac0*<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>-scale-1;</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(frac0+intg0 &gt; 0);</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>=*buf1 / <a class="code" href="../../dc/d19/decimal_8c.html#a3272f667e8515e8f69c55bb184f7fbc8">powers10</a>[<a class="code" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a>];</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;    <a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a>=<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a> % 10;</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a> &gt; round_digit ||</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;        (round_digit == 5 &amp;&amp; <a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a> == 5 &amp;&amp; (mode == <a class="code" href="../../d5/da0/decimal_8h.html#a3382d415b856cdea8c5cce928260db62ac1a961f8d767021e1264bfd36cd06654">HALF_UP</a> || (<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>/10) &amp; 1)))</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;      <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>+=10;</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;    *buf1=<a class="code" href="../../dc/d19/decimal_8c.html#a3272f667e8515e8f69c55bb184f7fbc8">powers10</a>[<a class="code" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a>]*(<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>-<a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a>);</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;  }</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;  <span class="comment">/*</span></div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;<span class="comment">    In case we&#39;re rounding e.g. 1.5e9 to 2.0e9, the decimal_digit_t&#39;s inside</span></div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;<span class="comment">    the buffer are as follows.</span></div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;<span class="comment">    Before &lt;1, 5e8&gt;</span></div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;<span class="comment">    After  &lt;2, 5e8&gt;</span></div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;<span class="comment">    Hence we need to set the 2nd field to 0.</span></div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;<span class="comment">    The same holds if we round 1.5e-9 to 2e-9.</span></div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;  <span class="keywordflow">if</span> (frac0 &lt; frac1)</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;  {</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;    <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *buf= to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a> + ((scale == 0 &amp;&amp; intg0 == 0) ? 1 : intg0 + frac0);</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *end= to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a> + len;</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160; </div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    <span class="keywordflow">while</span> (buf &lt; end)</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;      *buf++=0;</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;  }</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;  <span class="keywordflow">if</span> (*buf1 &gt;= <a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>)</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;  {</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    carry=1;</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;    *buf1-=<a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>;</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    <span class="keywordflow">while</span> (carry &amp;&amp; --buf1 &gt;= to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>)</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;      <a class="code" href="../../dc/d19/decimal_8c.html#ab9dde235ea6b498670b1202efc8863cc">ADD</a>(*buf1, *buf1, 0, carry);</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(carry))</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    {</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;      <span class="comment">/* shifting the number to create space for new digit */</span></div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;      <span class="keywordflow">if</span> (frac0+intg0 &gt;= len)</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;      {</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;        frac0--;</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;        scale=frac0*<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>;</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;        <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>=<a class="code" href="../../d5/da0/decimal_8h.html#a11368630fa2fae49fd03fcaa0435b216">E_DEC_TRUNCATED</a>; <span class="comment">/* XXX */</span></div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;      }</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;      <span class="keywordflow">for</span> (buf1=to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>+intg0+<a class="code" href="../../d9/df6/my__global_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>(frac0,0); buf1 &gt; to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>; buf1--)</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;      {</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;        buf1[0]=buf1[-1];</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;      }</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;      *buf1=1;</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;      to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>++;</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    }</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;  }</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;  {</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <span class="keywordflow">for</span> (;;)</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    {</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#a217a0bd562b98ae8c2ffce44935351e1">likely</a>(*buf1))</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;      <span class="keywordflow">if</span> (buf1-- == to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>)</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;      {</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;        <span class="comment">/* making &#39;zero&#39; with the proper scale */</span></div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;        <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *p0= to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a> + frac0 + 1;</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;        to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>=1;</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;        to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>= <a class="code" href="../../d9/df6/my__global_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>(scale, 0);</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;        to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a>= 0;</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;        <span class="keywordflow">for</span> (buf1= to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>; buf1&lt;p0; buf1++)</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;          *buf1= 0;</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d5/da0/decimal_8h.html#a6d15cce36445086710326b68b7a01ba4">E_DEC_OK</a>;</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;      }</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    }</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;  }</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160; </div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;  <span class="comment">/* Here we  check 999.9 -&gt; 1000 case when we need to increase intg */</span></div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;  first_dig= to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a> % <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>;</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;  <span class="keywordflow">if</span> (first_dig &amp;&amp; (*buf1 &gt;= <a class="code" href="../../dc/d19/decimal_8c.html#a3272f667e8515e8f69c55bb184f7fbc8">powers10</a>[first_dig]))</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;    to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>++;</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160; </div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;  <span class="keywordflow">if</span> (scale&lt;0)</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    scale=0;</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160; </div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;<a class="code" href="../../df/d60/namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5aeac7878d891005c72a71703f35dbb2be15">done</a>:</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;  to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>=scale;</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>;</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;}</div>
<div class="ttc" id="abase64_8c_html_a5e75484d7880fa39b31f27c3d7058936"><div class="ttname"><a href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a></div><div class="ttdeci">static uint pos(unsigned char c)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d36/base64_8c_source.html#l00104">base64.c:104</a></div></div>
<div class="ttc" id="adecimal_8h_html_a3382d415b856cdea8c5cce928260db62a0ee31af9a91b18edf2bc06d9eb86a100"><div class="ttname"><a href="../../d5/da0/decimal_8h.html#a3382d415b856cdea8c5cce928260db62a0ee31af9a91b18edf2bc06d9eb86a100">CEILING</a></div><div class="ttdeci">@ CEILING</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da0/decimal_8h_source.html#l00020">decimal.h:20</a></div></div>
<div class="ttc" id="adecimal_8h_html_a3382d415b856cdea8c5cce928260db62ab5c63c54204a3c25d5ff88ea4d1d8336"><div class="ttname"><a href="../../d5/da0/decimal_8h.html#a3382d415b856cdea8c5cce928260db62ab5c63c54204a3c25d5ff88ea4d1d8336">FLOOR</a></div><div class="ttdeci">@ FLOOR</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da0/decimal_8h_source.html#l00020">decimal.h:20</a></div></div>
<div class="ttc" id="adecimal_8h_html_a3382d415b856cdea8c5cce928260db62ac1a961f8d767021e1264bfd36cd06654"><div class="ttname"><a href="../../d5/da0/decimal_8h.html#a3382d415b856cdea8c5cce928260db62ac1a961f8d767021e1264bfd36cd06654">HALF_UP</a></div><div class="ttdeci">@ HALF_UP</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da0/decimal_8h_source.html#l00020">decimal.h:20</a></div></div>
<div class="ttc" id="adecimal_8h_html_a3382d415b856cdea8c5cce928260db62aef3b4ad4c0fed6dce31b6e5d2a7f0ab4"><div class="ttname"><a href="../../d5/da0/decimal_8h.html#a3382d415b856cdea8c5cce928260db62aef3b4ad4c0fed6dce31b6e5d2a7f0ab4">TRUNCATE</a></div><div class="ttdeci">@ TRUNCATE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da0/decimal_8h_source.html#l00020">decimal.h:20</a></div></div>
<div class="ttc" id="adecimal_8h_html_a3382d415b856cdea8c5cce928260db62aef9f780bc132ce394d4ba89cd1e77070"><div class="ttname"><a href="../../d5/da0/decimal_8h.html#a3382d415b856cdea8c5cce928260db62aef9f780bc132ce394d4ba89cd1e77070">HALF_EVEN</a></div><div class="ttdeci">@ HALF_EVEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da0/decimal_8h_source.html#l00020">decimal.h:20</a></div></div>
<div class="ttc" id="ampq-internal_8h_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="../../d8/dec/mpq-internal_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dec/mpq-internal_8h_source.html#l00062">mpq-internal.h:62</a></div></div>
<div class="ttc" id="ampq-internal_8h_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="../../d8/dec/mpq-internal_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dec/mpq-internal_8h_source.html#l00059">mpq-internal.h:59</a></div></div>
<div class="ttc" id="anamespacedetail_1_1digits_html_aad69d2373aa047bdd9e81494bf3da5aeac7878d891005c72a71703f35dbb2be15"><div class="ttname"><a href="../../df/d60/namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5aeac7878d891005c72a71703f35dbb2be15">detail::digits::done</a></div><div class="ttdeci">@ done</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d50/format-inl_8h_source.html#l00624">format-inl.h:624</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d19/decimal_8c_source.html#l00169">ADD</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00027">st_decimal_t::buf</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00020">CEILING</a>, <a class="el" href="../../d0/d74/my__dbug_8h_source.html#l00096">DBUG_ASSERT</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00068">decimal_make_zero</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00129">DIG_BASE</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00128">DIG_MASK</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00130">DIG_MAX</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00127">DIG_PER_DEC1</a>, <a class="el" href="../../d3/d50/format-inl_8h_source.html#l00624">detail::digits::done</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00096">E_DEC_OK</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00097">E_DEC_TRUNCATED</a>, <a class="el" href="../../d3/dc6/minigzip_8c_source.html#l00156">error()</a>, <a class="el" href="../../d8/dec/mpq-internal_8h_source.html#l00059">FALSE</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00020">FLOOR</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::frac</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00020">HALF_EVEN</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00020">HALF_UP</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::intg</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::len</a>, <a class="el" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h_source.html#l00035">likely</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l01386">max</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l01387">min</a>, <a class="el" href="../../db/d36/base64_8c_source.html#l00104">pos()</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00133">powers10</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00132">ROUND_UP</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00144">sanity</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00026">st_decimal_t::sign</a>, <a class="el" href="../../d8/dec/mpq-internal_8h_source.html#l00062">TRUE</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00020">TRUNCATE</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l00466">UNINIT_VAR</a>, <a class="el" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h_source.html#l00036">unlikely</a>, <a class="el" href="../../d8/d14/_vector2int16_8h_source.html#l00037">G3D::x</a>, and <a class="el" href="../../d8/d14/_vector2int16_8h_source.html#l00038">G3D::y</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d19/decimal_8c_source.html#l00579">decimal_shift()</a>.</p>

</div>
</div>
<a id="aa2d3d0f4794da7d63a184c494b522727"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2d3d0f4794da7d63a184c494b522727">&#9670;&nbsp;</a></span>decimal_shift()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int decimal_shift </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>dec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>shift</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l00579">579</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;{</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="comment">/* index of first non zero digit (all indexes from 0) */</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  <span class="keywordtype">int</span> beg;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <span class="comment">/* index of position after last decimal digit */</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <span class="keywordtype">int</span> end;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <span class="comment">/* index of digit position just after point */</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="keywordtype">int</span> point= <a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(dec-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>) * <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  <span class="comment">/* new point position */</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <span class="keywordtype">int</span> new_point= point + shift;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <span class="comment">/* number of digits in result */</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  <span class="keywordtype">int</span> digits_int, digits_frac;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="comment">/* length of result and new fraction in big digits*/</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="keywordtype">int</span> new_len, new_frac_len;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <span class="comment">/* return code */</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <span class="keywordtype">int</span> err= <a class="code" href="../../d5/da0/decimal_8h.html#a6d15cce36445086710326b68b7a01ba4">E_DEC_OK</a>;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  <span class="keywordtype">int</span> new_front;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160; </div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <span class="keywordflow">if</span> (shift == 0)</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d5/da0/decimal_8h.html#a6d15cce36445086710326b68b7a01ba4">E_DEC_OK</a>;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160; </div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a0dc68e6db06c16d3b34d8ed87fa9b490">digits_bounds</a>(dec, &amp;beg, &amp;end);</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160; </div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  <span class="keywordflow">if</span> (beg == end)</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  {</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <a class="code" href="../../d5/da0/decimal_8h.html#a5ed860a83aa33b8b125e3317cacbc074">decimal_make_zero</a>(dec);</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d5/da0/decimal_8h.html#a6d15cce36445086710326b68b7a01ba4">E_DEC_OK</a>;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  }</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160; </div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  digits_int= new_point - beg;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <a class="code" href="../../d9/df6/my__global_8h.html#adefd9f16236d64d1f92020396d6a07a3">set_if_bigger</a>(digits_int, 0);</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  digits_frac= end - new_point;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  <a class="code" href="../../d9/df6/my__global_8h.html#adefd9f16236d64d1f92020396d6a07a3">set_if_bigger</a>(digits_frac, 0);</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160; </div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <span class="keywordflow">if</span> ((new_len= <a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(digits_int) + (new_frac_len= <a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(digits_frac))) &gt;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      dec-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#adf138ff1dd2904d68d243e7b5207c4da">len</a>)</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  {</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keywordtype">int</span> lack= new_len - dec-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#adf138ff1dd2904d68d243e7b5207c4da">len</a>;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d9/d39/dtoa_8c.html#a158860430cb5f139d88fdf19cf9ad511">diff</a>;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160; </div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="keywordflow">if</span> (new_frac_len &lt; lack)</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/da0/decimal_8h.html#adeff328341b0d04e50b43afeb3c0549e">E_DEC_OVERFLOW</a>; <span class="comment">/* lack more then we have in fraction */</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160; </div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="comment">/* cat off fraction part to allow new number to fit in our buffer */</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    err= <a class="code" href="../../d5/da0/decimal_8h.html#a11368630fa2fae49fd03fcaa0435b216">E_DEC_TRUNCATED</a>;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    new_frac_len-= lack;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <a class="code" href="../../d9/d39/dtoa_8c.html#a158860430cb5f139d88fdf19cf9ad511">diff</a>= digits_frac - (new_frac_len * <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>);</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="comment">/* Make rounding method as parameter? */</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <a class="code" href="../../dc/d19/decimal_8c.html#a90307f553e3e8cae5f4bcafc95fec319">decimal_round</a>(dec, dec, end - point - <a class="code" href="../../d9/d39/dtoa_8c.html#a158860430cb5f139d88fdf19cf9ad511">diff</a>, <a class="code" href="../../d5/da0/decimal_8h.html#a3382d415b856cdea8c5cce928260db62ac1a961f8d767021e1264bfd36cd06654">HALF_UP</a>);</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    end-= <a class="code" href="../../d9/d39/dtoa_8c.html#a158860430cb5f139d88fdf19cf9ad511">diff</a>;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    digits_frac= new_frac_len * <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160; </div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keywordflow">if</span> (end &lt;= beg)</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    {</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      <span class="comment">/*</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="comment">        we lost all digits (they will be shifted out of buffer), so we can</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment">        just return 0</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="comment">      */</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      <a class="code" href="../../d5/da0/decimal_8h.html#a5ed860a83aa33b8b125e3317cacbc074">decimal_make_zero</a>(dec);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/da0/decimal_8h.html#a11368630fa2fae49fd03fcaa0435b216">E_DEC_TRUNCATED</a>;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    }</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  }</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160; </div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <span class="keywordflow">if</span> (shift % <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>)</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  {</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="keywordtype">int</span> l_mini_shift, r_mini_shift, mini_shift;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="keywordtype">int</span> do_left;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="comment">      Calculate left/right shift to align decimal digits inside our bug</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="comment">      digits correctly</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="keywordflow">if</span> (shift &gt; 0)</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    {</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      l_mini_shift= shift % <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      r_mini_shift= <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a> - l_mini_shift;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      <span class="comment">/*</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="comment">        It is left shift so prefer left shift, but if we have not place from</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="comment">        left, we have to have it from right, because we checked length of</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment">        result</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="comment">      */</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      do_left= l_mini_shift &lt;= beg;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(do_left || (dec-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#adf138ff1dd2904d68d243e7b5207c4da">len</a> * <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a> - end) &gt;= r_mini_shift);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    }</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      r_mini_shift= (-shift) % <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      l_mini_shift= <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a> - r_mini_shift;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      <span class="comment">/* see comment above */</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;      do_left= !((dec-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#adf138ff1dd2904d68d243e7b5207c4da">len</a> * <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a> - end) &gt;= r_mini_shift);</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;      <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(!do_left || l_mini_shift &lt;= beg);</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    }</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="keywordflow">if</span> (do_left)</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    {</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      <a class="code" href="../../dc/d19/decimal_8c.html#a7980e0c8b29cc3165cf9e8eb5f98a34b">do_mini_left_shift</a>(dec, l_mini_shift, beg, end);</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      mini_shift=- l_mini_shift;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    }</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    {</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;      <a class="code" href="../../dc/d19/decimal_8c.html#a6babfd2d57412fca6ac479a6703cf07a">do_mini_right_shift</a>(dec, r_mini_shift, beg, end);</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;      mini_shift= r_mini_shift;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    }</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    new_point+= mini_shift;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="comment">      If number is shifted and correctly aligned in buffer we can</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="comment">      finish</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="keywordflow">if</span> (!(shift+= mini_shift) &amp;&amp; (new_point - digits_int) &lt; <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>)</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    {</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;      dec-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>= digits_int;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      dec-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>= digits_frac;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      <span class="keywordflow">return</span> err;                 <span class="comment">/* already shifted as it should be */</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    }</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    beg+= mini_shift;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    end+= mini_shift;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  }</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160; </div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  <span class="comment">/* if new &#39;decimal front&#39; is in first digit, we do not need move digits */</span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <span class="keywordflow">if</span> ((new_front= (new_point - digits_int)) &gt;= <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a> ||</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      new_front &lt; 0)</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  {</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="comment">/* need to move digits */</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <span class="keywordtype">int</span> d_shift;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *to, *barier;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keywordflow">if</span> (new_front &gt; 0)</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    {</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      <span class="comment">/* move left */</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      d_shift= new_front / <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      to= dec-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a> + (<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(beg + 1) - 1 - d_shift);</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      barier= dec-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a> + (<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(end) - 1 - d_shift);</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(to &gt;= dec-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>);</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;      <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(barier + d_shift &lt; dec-&gt;buf + dec-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#adf138ff1dd2904d68d243e7b5207c4da">len</a>);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;      <span class="keywordflow">for</span>(; to &lt;= barier; to++)</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        *to= *(to + d_shift);</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      <span class="keywordflow">for</span>(barier+= d_shift; to &lt;= barier; to++)</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        *to= 0;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;      d_shift= -d_shift;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    }</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    {</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      <span class="comment">/* move right */</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;      d_shift= (1 - new_front) / <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      to= dec-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a> + <a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(end) - 1 + d_shift;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;      barier= dec-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a> + <a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(beg + 1) - 1 + d_shift;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;      <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(to &lt; dec-&gt;buf + dec-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#adf138ff1dd2904d68d243e7b5207c4da">len</a>);</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(barier - d_shift &gt;= dec-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>);</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;      <span class="keywordflow">for</span>(; to &gt;= barier; to--)</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        *to= *(to - d_shift);</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      <span class="keywordflow">for</span>(barier-= d_shift; to &gt;= barier; to--)</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        *to= 0;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    }</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    d_shift*= <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    beg+= d_shift;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    end+= d_shift;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    new_point+= d_shift;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  }</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160; </div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <span class="comment">/*</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="comment">    If there are gaps then fill ren with 0.</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="comment">    Only one of following &#39;for&#39; loops will work becouse beg &lt;= end</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="comment">  */</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  beg= <a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(beg + 1) - 1;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  end= <a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(end) - 1;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(new_point &gt;= 0);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  </div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  <span class="comment">/* We don&#39;t want negative new_point below */</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <span class="keywordflow">if</span> (new_point != 0)</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    new_point= <a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(new_point) - 1;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160; </div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  <span class="keywordflow">if</span> (new_point &gt; end)</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  {</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keywordflow">do</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    {</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      dec-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>[new_point]=0;</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    } <span class="keywordflow">while</span> (--new_point &gt; end);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  }</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  {</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="keywordflow">for</span> (; new_point &lt; beg; new_point++)</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      dec-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>[new_point]= 0;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  }</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  dec-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>= digits_int;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  dec-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>= digits_frac;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;}</div>
<div class="ttc" id="adecimal_8c_html_a0dc68e6db06c16d3b34d8ed87fa9b490"><div class="ttname"><a href="../../dc/d19/decimal_8c.html#a0dc68e6db06c16d3b34d8ed87fa9b490">digits_bounds</a></div><div class="ttdeci">static void digits_bounds(decimal_t *from, int *start_result, int *end_result)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d19/decimal_8c_source.html#l00449">decimal.c:449</a></div></div>
<div class="ttc" id="adecimal_8c_html_a6babfd2d57412fca6ac479a6703cf07a"><div class="ttname"><a href="../../dc/d19/decimal_8c.html#a6babfd2d57412fca6ac479a6703cf07a">do_mini_right_shift</a></div><div class="ttdeci">void do_mini_right_shift(decimal_t *dec, int shift, int beg, int last)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d19/decimal_8c_source.html#l00546">decimal.c:546</a></div></div>
<div class="ttc" id="adecimal_8c_html_a7980e0c8b29cc3165cf9e8eb5f98a34b"><div class="ttname"><a href="../../dc/d19/decimal_8c.html#a7980e0c8b29cc3165cf9e8eb5f98a34b">do_mini_left_shift</a></div><div class="ttdeci">void do_mini_left_shift(decimal_t *dec, int shift, int beg, int last)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d19/decimal_8c_source.html#l00516">decimal.c:516</a></div></div>
<div class="ttc" id="adecimal_8c_html_a90307f553e3e8cae5f4bcafc95fec319"><div class="ttname"><a href="../../dc/d19/decimal_8c.html#a90307f553e3e8cae5f4bcafc95fec319">decimal_round</a></div><div class="ttdeci">int decimal_round(decimal_t *from, decimal_t *to, int scale, decimal_round_mode mode)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d19/decimal_8c_source.html#l01466">decimal.c:1466</a></div></div>
<div class="ttc" id="adtoa_8c_html_a158860430cb5f139d88fdf19cf9ad511"><div class="ttname"><a href="../../d9/d39/dtoa_8c.html#a158860430cb5f139d88fdf19cf9ad511">diff</a></div><div class="ttdeci">static Bigint * diff(Bigint *a, Bigint *b, Stack_alloc *alloc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d39/dtoa_8c_source.html#l01108">dtoa.c:1108</a></div></div>
<div class="ttc" id="amy__global_8h_html_adefd9f16236d64d1f92020396d6a07a3"><div class="ttname"><a href="../../d9/df6/my__global_8h.html#adefd9f16236d64d1f92020396d6a07a3">set_if_bigger</a></div><div class="ttdeci">#define set_if_bigger(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df6/my__global_8h_source.html#l00481">my_global.h:481</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/da0/decimal_8h_source.html#l00027">st_decimal_t::buf</a>, <a class="el" href="../../d0/d74/my__dbug_8h_source.html#l00096">DBUG_ASSERT</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00068">decimal_make_zero</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l01466">decimal_round()</a>, <a class="el" href="../../d9/d39/dtoa_8c_source.html#l01108">diff()</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00127">DIG_PER_DEC1</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00449">digits_bounds()</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00516">do_mini_left_shift()</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00546">do_mini_right_shift()</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00096">E_DEC_OK</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00098">E_DEC_OVERFLOW</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00097">E_DEC_TRUNCATED</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::frac</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00020">HALF_UP</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::intg</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::len</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00132">ROUND_UP</a>, and <a class="el" href="../../d9/df6/my__global_8h_source.html#l00481">set_if_bigger</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d19/decimal_8c_source.html#l00789">internal_str2dec()</a>.</p>

</div>
</div>
<a id="aa4f68a5751c178f6a36ca749b3b54f33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4f68a5751c178f6a36ca749b3b54f33">&#9670;&nbsp;</a></span>decimal_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int decimal_size </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>precision</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>scale</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l01423">1423</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;{</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;  <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(scale &gt;= 0 &amp;&amp; precision &gt; 0 &amp;&amp; scale &lt;= precision);</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(precision-scale)+<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(scale);</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d0/d74/my__dbug_8h_source.html#l00096">DBUG_ASSERT</a>, and <a class="el" href="../../dc/d19/decimal_8c_source.html#l00132">ROUND_UP</a>.</p>

</div>
</div>
<a id="af55976bfb63472f0817d4bb40ba4b070"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af55976bfb63472f0817d4bb40ba4b070">&#9670;&nbsp;</a></span>decimal_sub()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int decimal_sub </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>from1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>from2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l01931">1931</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;{</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#a217a0bd562b98ae8c2ffce44935351e1">likely</a>(from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a> == from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a>))</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dc/d19/decimal_8c.html#a24209e2aa3a6ffcb2799d54001963c41">do_sub</a>(from1, from2, to);</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../dc/d19/decimal_8c.html#a3914916ac130fbc4693c6bfe823926f3">do_add</a>(from1, from2, to);</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d19/decimal_8c_source.html#l01700">do_add()</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l01782">do_sub()</a>, <a class="el" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h_source.html#l00035">likely</a>, and <a class="el" href="../../d5/da0/decimal_8h_source.html#l00026">st_decimal_t::sign</a>.</p>

</div>
</div>
<a id="a0dc68e6db06c16d3b34d8ed87fa9b490"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0dc68e6db06c16d3b34d8ed87fa9b490">&#9670;&nbsp;</a></span>digits_bounds()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void digits_bounds </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>start_result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>end_result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l00449">449</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;{</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <span class="keywordtype">int</span> start, stop, i;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *buf_beg= from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *end= from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a> + <a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>) + <a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *buf_end= end - 1;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <span class="comment">/* find non-zero digit from number begining */</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <span class="keywordflow">while</span> (buf_beg &lt; end &amp;&amp; *buf_beg == 0)</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    buf_beg++;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160; </div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <span class="keywordflow">if</span> (buf_beg &gt;= end)</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  {</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="comment">/* it is zero */</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    *start_result= *end_result= 0;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  }</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160; </div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="comment">/* find non-zero decimal digit from number begining */</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <span class="keywordflow">if</span> (buf_beg == from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a> &amp;&amp; from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>)</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  {</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    start= <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a> - (i= ((from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>-1) % <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a> + 1));</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    i--;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  }</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    i= <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a> - 1;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    start= (int) ((buf_beg - from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>) * <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="keywordflow">if</span> (buf_beg &lt; end)</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keywordflow">for</span> (; *buf_beg &lt; <a class="code" href="../../dc/d19/decimal_8c.html#a3272f667e8515e8f69c55bb184f7fbc8">powers10</a>[i--]; start++) ;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  *start_result= start; <span class="comment">/* index of first decimal digit (from 0) */</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160; </div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="comment">/* find non-zero digit at the end */</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  <span class="keywordflow">while</span> (buf_end &gt; buf_beg  &amp;&amp; *buf_end == 0)</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    buf_end--;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <span class="comment">/* find non-zero decimal digit from the end */</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <span class="keywordflow">if</span> (buf_end == end - 1 &amp;&amp; from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>)</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    stop= (int) (((buf_end - from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>) * <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a> +</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;           (i= ((from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a> - 1) % <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a> + 1))));</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    i= <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a> - i + 1;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  }</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    stop= (int) ((buf_end - from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a> + 1) * <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    i= 1;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <span class="keywordflow">for</span> (; *buf_end % <a class="code" href="../../dc/d19/decimal_8c.html#a3272f667e8515e8f69c55bb184f7fbc8">powers10</a>[i++] == 0; stop--) ;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  *end_result= stop; <span class="comment">/* index of position after last decimal digit (from 0) */</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/da0/decimal_8h_source.html#l00027">st_decimal_t::buf</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00127">DIG_PER_DEC1</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::frac</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::intg</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00133">powers10</a>, and <a class="el" href="../../dc/d19/decimal_8c_source.html#l00132">ROUND_UP</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d19/decimal_8c_source.html#l00579">decimal_shift()</a>.</p>

</div>
</div>
<a id="a3914916ac130fbc4693c6bfe823926f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3914916ac130fbc4693c6bfe823926f3">&#9670;&nbsp;</a></span>do_add()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int do_add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>from1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>from2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l01700">1700</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;{</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;  <span class="keywordtype">int</span> intg1=<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>), intg2=<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>),</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;      frac1=<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>), frac2=<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>),</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;      frac0=<a class="code" href="../../d9/df6/my__global_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>(frac1, frac2), intg0=<a class="code" href="../../d9/df6/my__global_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>(intg1, intg2), <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>;</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *buf1, *buf2, *buf0, *stop, *stop2, <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>, carry;</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160; </div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a5fd165f5e0781ede5f9413895fe3ab5c">sanity</a>(to);</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160; </div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;  <span class="comment">/* is there a need for extra word because of carry ? */</span></div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;  <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>=intg1 &gt; intg2 ? from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>[0] :</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    intg2 &gt; intg1 ? from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>[0] :</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>[0] + from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>[0] ;</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a> &gt; <a class="code" href="../../dc/d19/decimal_8c.html#a4ef335f9599f2f33702b9b95c0f59364">DIG_MAX</a>-1)) <span class="comment">/* yes, there is */</span></div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;  {</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    intg0++;</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>[0]=0; <span class="comment">/* safety */</span></div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;  }</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160; </div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a2e86a17284f9ad51bc296439f3981b53">FIX_INTG_FRAC_ERROR</a>(to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#adf138ff1dd2904d68d243e7b5207c4da">len</a>, intg0, frac0, <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>);</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(<a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a> == <a class="code" href="../../d5/da0/decimal_8h.html#adeff328341b0d04e50b43afeb3c0549e">E_DEC_OVERFLOW</a>))</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;  {</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    <a class="code" href="../../dc/d19/decimal_8c.html#a60d34635012ee0d7ab540826801b2f61">max_decimal</a>(to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#adf138ff1dd2904d68d243e7b5207c4da">len</a> * <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>, 0, to);</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>;</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;  }</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160; </div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;  buf0=to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>+intg0+frac0;</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160; </div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;  to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a>=from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a>;</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;  to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>=<a class="code" href="../../d9/df6/my__global_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>(from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>, from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>);</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;  to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>=intg0*<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>;</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(<a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>))</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;  {</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;    <a class="code" href="../../d9/df6/my__global_8h.html#aadeec961a0e84bb1fa3cded11703cf2f">set_if_smaller</a>(to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>, frac0*<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>);</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;    <a class="code" href="../../d9/df6/my__global_8h.html#aadeec961a0e84bb1fa3cded11703cf2f">set_if_smaller</a>(frac1, frac0);</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    <a class="code" href="../../d9/df6/my__global_8h.html#aadeec961a0e84bb1fa3cded11703cf2f">set_if_smaller</a>(frac2, frac0);</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;    <a class="code" href="../../d9/df6/my__global_8h.html#aadeec961a0e84bb1fa3cded11703cf2f">set_if_smaller</a>(intg1, intg0);</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;    <a class="code" href="../../d9/df6/my__global_8h.html#aadeec961a0e84bb1fa3cded11703cf2f">set_if_smaller</a>(intg2, intg0);</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;  }</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160; </div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;  <span class="comment">/* part 1 - max(frac) ... min (frac) */</span></div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;  <span class="keywordflow">if</span> (frac1 &gt; frac2)</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;  {</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    buf1=from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>+intg1+frac1;</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;    stop=from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>+intg1+frac2;</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;    buf2=from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>+intg2+frac2;</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    stop2=from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>+(intg1 &gt; intg2 ? intg1-intg2 : 0);</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;  }</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;  {</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    buf1=from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>+intg2+frac2;</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;    stop=from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>+intg2+frac1;</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    buf2=from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>+intg1+frac1;</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    stop2=from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>+(intg2 &gt; intg1 ? intg2-intg1 : 0);</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;  }</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;  <span class="keywordflow">while</span> (buf1 &gt; stop)</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;    *--buf0=*--buf1;</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160; </div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;  <span class="comment">/* part 2 - min(frac) ... min(intg) */</span></div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;  carry=0;</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;  <span class="keywordflow">while</span> (buf1 &gt; stop2)</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;  {</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;    <a class="code" href="../../dc/d19/decimal_8c.html#ab9dde235ea6b498670b1202efc8863cc">ADD</a>(*--buf0, *--buf1, *--buf2, carry);</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;  }</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160; </div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;  <span class="comment">/* part 3 - min(intg) ... max(intg) */</span></div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;  buf1= intg1 &gt; intg2 ? ((stop=from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>)+intg1-intg2) :</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;                        ((stop=from2-&gt;buf)+intg2-intg1) ;</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;  <span class="keywordflow">while</span> (buf1 &gt; stop)</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;  {</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;    <a class="code" href="../../dc/d19/decimal_8c.html#ab9dde235ea6b498670b1202efc8863cc">ADD</a>(*--buf0, *--buf1, 0, carry);</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;  }</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160; </div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(carry))</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;    *--buf0=1;</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;  <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(buf0 == to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a> || buf0 == to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>+1);</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160; </div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>;</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;}</div>
<div class="ttc" id="adecimal_8c_html_a60d34635012ee0d7ab540826801b2f61"><div class="ttname"><a href="../../dc/d19/decimal_8c.html#a60d34635012ee0d7ab540826801b2f61">max_decimal</a></div><div class="ttdeci">void max_decimal(int precision, int frac, decimal_t *to)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d19/decimal_8c_source.html#l00226">decimal.c:226</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d19/decimal_8c_source.html#l00169">ADD</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00027">st_decimal_t::buf</a>, <a class="el" href="../../d0/d74/my__dbug_8h_source.html#l00096">DBUG_ASSERT</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00130">DIG_MAX</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00127">DIG_PER_DEC1</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00098">E_DEC_OVERFLOW</a>, <a class="el" href="../../d3/dc6/minigzip_8c_source.html#l00156">error()</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00148">FIX_INTG_FRAC_ERROR</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::frac</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::intg</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::len</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l01386">max</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00226">max_decimal()</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00132">ROUND_UP</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00144">sanity</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l00482">set_if_smaller</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00026">st_decimal_t::sign</a>, <a class="el" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h_source.html#l00036">unlikely</a>, and <a class="el" href="../../d8/d14/_vector2int16_8h_source.html#l00037">G3D::x</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d19/decimal_8c_source.html#l01924">decimal_add()</a>, and <a class="el" href="../../dc/d19/decimal_8c_source.html#l01931">decimal_sub()</a>.</p>

</div>
</div>
<a id="a546f4a45bfdaae1379a151e5ad927703"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a546f4a45bfdaae1379a151e5ad927703">&#9670;&nbsp;</a></span>do_div_mod()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int do_div_mod </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>from1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>from2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>mod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>scale_incr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l02100">2100</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;{</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;  <span class="keywordtype">int</span> frac1=<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>)*<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>, prec1=from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>+frac1,</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;      frac2=<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>)*<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>, prec2=from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>+frac2,</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;      <a class="code" href="../../d9/df6/my__global_8h.html#aae0dcf447aac67c9902b0ab7f3835e79">UNINIT_VAR</a>(<a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>), i, intg0, frac0, len1, len2, dintg, div_mod=(!<a class="code" href="../../dd/d90/chrono_8h.html#ade692a13be7c7dfac09a8ff2fd00d172">mod</a>);</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *buf0, *buf1=from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>, *buf2=from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>, *tmp1,</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;       *start2, *stop2, *stop1, *stop0, norm2, carry, *start1, dcarry;</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#ad48c17fde8152ca8fd5d3a6fb7ddbcc3">dec2</a> norm_factor, <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>, guess, <a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a>;</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160; </div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/d90/chrono_8h.html#ade692a13be7c7dfac09a8ff2fd00d172">mod</a>)</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;    to=<a class="code" href="../../dd/d90/chrono_8h.html#ade692a13be7c7dfac09a8ff2fd00d172">mod</a>;</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160; </div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a5fd165f5e0781ede5f9413895fe3ab5c">sanity</a>(to);</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160; </div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;  <span class="comment">/* removing all the leading zeroes */</span></div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;  i= ((prec2 - 1) % <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>) + 1;</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;  <span class="keywordflow">while</span> (prec2 &gt; 0 &amp;&amp; *buf2 == 0)</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;  {</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;    prec2-= i;</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;    i= <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>;</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;    buf2++;</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;  }</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;  <span class="keywordflow">if</span> (prec2 &lt;= 0) <span class="comment">/* short-circuit everything: from2 == 0 */</span></div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d5/da0/decimal_8h.html#a434680262b7bb3d8fc6eaccc8b4c0cce">E_DEC_DIV_ZERO</a>;</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;  <span class="keywordflow">for</span> (i= (prec2 - 1) % <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>; *buf2 &lt; <a class="code" href="../../dc/d19/decimal_8c.html#a3272f667e8515e8f69c55bb184f7fbc8">powers10</a>[i--]; prec2--) ;</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;  <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(prec2 &gt; 0);</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160; </div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;  i=((prec1-1) % <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>)+1;</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;  <span class="keywordflow">while</span> (prec1 &gt; 0 &amp;&amp; *buf1 == 0)</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;  {</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;    prec1-=i;</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;    i=<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>;</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;    buf1++;</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;  }</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;  <span class="keywordflow">if</span> (prec1 &lt;= 0)</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;  { <span class="comment">/* short-circuit everything: from1 == 0 */</span></div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;    <a class="code" href="../../d5/da0/decimal_8h.html#a5ed860a83aa33b8b125e3317cacbc074">decimal_make_zero</a>(to);</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d5/da0/decimal_8h.html#a6d15cce36445086710326b68b7a01ba4">E_DEC_OK</a>;</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;  }</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;  <span class="keywordflow">for</span> (i=(prec1-1) % <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>; *buf1 &lt; <a class="code" href="../../dc/d19/decimal_8c.html#a3272f667e8515e8f69c55bb184f7fbc8">powers10</a>[i--]; prec1--) ;</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;  <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(prec1 &gt; 0);</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160; </div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;  <span class="comment">/* let&#39;s fix scale_incr, taking into account frac1,frac2 increase */</span></div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;  <span class="keywordflow">if</span> ((scale_incr-= frac1 - from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a> + frac2 - from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>) &lt; 0)</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;    scale_incr=0;</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160; </div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;  dintg=(prec1-frac1)-(prec2-frac2)+(*buf1 &gt;= *buf2);</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;  <span class="keywordflow">if</span> (dintg &lt; 0)</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;  {</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;    dintg/=<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>;</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;    intg0=0;</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;  }</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;    intg0=<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(dintg);</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/d90/chrono_8h.html#ade692a13be7c7dfac09a8ff2fd00d172">mod</a>)</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;  {</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;    <span class="comment">/* we&#39;re calculating N1 % N2.</span></div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;<span class="comment">       The result will have</span></div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;<span class="comment">         frac=max(frac1, frac2), as for subtraction</span></div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;<span class="comment">         intg=intg2</span></div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;    to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a>=from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a>;</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;    to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>=<a class="code" href="../../d9/df6/my__global_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>(from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>, from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>);</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;    frac0=0;</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;  }</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;  {</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;<span class="comment">      we&#39;re calculating N1/N2. N1 is in the buf1, has prec1 digits</span></div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;<span class="comment">      N2 is in the buf2, has prec2 digits. Scales are frac1 and</span></div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;<span class="comment">      frac2 accordingly.</span></div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;<span class="comment">      Thus, the result will have</span></div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;<span class="comment">         frac = ROUND_UP(frac1+frac2+scale_incr)</span></div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;<span class="comment">      and</span></div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;<span class="comment">         intg = (prec1-frac1) - (prec2-frac2) + 1</span></div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;<span class="comment">         prec = intg+frac</span></div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;    frac0=<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(frac1+frac2+scale_incr);</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;    <a class="code" href="../../dc/d19/decimal_8c.html#a2e86a17284f9ad51bc296439f3981b53">FIX_INTG_FRAC_ERROR</a>(to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#adf138ff1dd2904d68d243e7b5207c4da">len</a>, intg0, frac0, <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>);</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;    to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a>=from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a> != from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a>;</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;    to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>=intg0*<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>;</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;    to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>=frac0*<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>;</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;  }</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;  buf0=to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>;</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;  stop0=buf0+intg0+frac0;</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#a217a0bd562b98ae8c2ffce44935351e1">likely</a>(div_mod))</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;    <span class="keywordflow">while</span> (dintg++ &lt; 0)</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;      *buf0++=0;</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160; </div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;  len1=(i=<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(prec1))+<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(2*frac2+scale_incr+1) + 1;</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;  <a class="code" href="../../d9/df6/my__global_8h.html#adefd9f16236d64d1f92020396d6a07a3">set_if_bigger</a>(len1, 3);</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;  <span class="keywordflow">if</span> (!(tmp1=(<a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *)<a class="code" href="../../db/da9/my__sys_8h.html#a532484a8b7e33a2a835db48b6de71d32">my_alloca</a>(len1*<span class="keyword">sizeof</span>(<a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a>))))</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d5/da0/decimal_8h.html#abc098f5fd809d5e905e5455812312f8b">E_DEC_OOM</a>;</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;  <a class="code" href="../../d6/dda/m__string_8h.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a>(tmp1, buf1, i*<span class="keyword">sizeof</span>(<a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a>));</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;  <a class="code" href="../../d6/dda/m__string_8h.html#ab3be5dcbbf1244672c14662b20f88b61">bzero</a>(tmp1+i, (len1-i)*<span class="keyword">sizeof</span>(<a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a>));</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160; </div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;  start1=tmp1;</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;  stop1=start1+len1;</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;  start2=buf2;</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;  stop2=buf2+<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(prec2)-1;</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160; </div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;  <span class="comment">/* removing end zeroes */</span></div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;  <span class="keywordflow">while</span> (*stop2 == 0 &amp;&amp; stop2 &gt;= start2)</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;    stop2--;</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;  len2= (int) (stop2++ - start2);</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160; </div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;  <span class="comment">/*</span></div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;<span class="comment">    calculating norm2 (normalized *start2) - we need *start2 to be large</span></div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;<span class="comment">    (at least &gt; DIG_BASE/2), but unlike Knuth&#39;s Alg. D we don&#39;t want to</span></div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;<span class="comment">    normalize input numbers (as we don&#39;t make a copy of the divisor).</span></div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;<span class="comment">    Thus we normalize first dec1 of buf2 only, and we&#39;ll normalize *start1</span></div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;<span class="comment">    on the fly for the purpose of guesstimation only.</span></div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;<span class="comment">    It&#39;s also faster, as we&#39;re saving on normalization of buf2</span></div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;<span class="comment">  */</span></div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;  norm_factor=<a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>/(*start2+1);</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;  norm2=(<a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a>)(norm_factor*start2[0]);</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#a217a0bd562b98ae8c2ffce44935351e1">likely</a>(len2&gt;0))</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;    norm2+=(<a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a>)(norm_factor*start2[1]/<a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>);</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160; </div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;  <span class="keywordflow">if</span> (*start1 &lt; *start2)</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;    dcarry=*start1++;</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;    dcarry=0;</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160; </div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;  <span class="comment">/* main loop */</span></div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;  <span class="keywordflow">for</span> (; buf0 &lt; stop0; buf0++)</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;  {</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;    <span class="comment">/* short-circuit, if possible */</span></div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(dcarry == 0 &amp;&amp; *start1 &lt; *start2))</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;      guess=0;</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;    {</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;      <span class="comment">/* D3: make a guess */</span></div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;      <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>=start1[0]+((<a class="code" href="../../dc/d19/decimal_8c.html#ad48c17fde8152ca8fd5d3a6fb7ddbcc3">dec2</a>)dcarry)*<a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>;</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;      <a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a>=start1[1];</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;      guess=(norm_factor*<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>+norm_factor*<a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a>/<a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>)/norm2;</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(guess &gt;= <a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>))</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;        guess=<a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>-1;</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#a217a0bd562b98ae8c2ffce44935351e1">likely</a>(len2&gt;0))</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;      {</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;        <span class="comment">/* hmm, this is a suspicious trick - I removed normalization here */</span></div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;        <span class="keywordflow">if</span> (start2[1]*guess &gt; (<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>-guess*start2[0])*<a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>+<a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a>)</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;          guess--;</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(start2[1]*guess &gt; (<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>-guess*start2[0])*<a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>+<a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a>))</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;          guess--;</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;        <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(start2[1]*guess &lt;= (<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>-guess*start2[0])*<a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>+<a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a>);</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;      }</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160; </div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;      <span class="comment">/* D4: multiply and subtract */</span></div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;      buf2=stop2;</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;      buf1=start1+len2;</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;      <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(buf1 &lt; stop1);</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;      <span class="keywordflow">for</span> (carry=0; buf2 &gt; start2; buf1--)</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;      {</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;        <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> hi, lo;</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;        <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>=guess * (*--buf2);</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;        hi=(<a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a>)(<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>/<a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>);</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;        lo=(<a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a>)(<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>-((<a class="code" href="../../dc/d19/decimal_8c.html#ad48c17fde8152ca8fd5d3a6fb7ddbcc3">dec2</a>)hi)*<a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>);</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;        <a class="code" href="../../dc/d19/decimal_8c.html#ab8913a87bdee940ec374d97498bcb7b3">SUB2</a>(*buf1, *buf1, lo, carry);</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;        carry+=hi;</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;      }</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;      carry= dcarry &lt; carry;</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160; </div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;      <span class="comment">/* D5: check the remainder */</span></div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(carry))</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;      {</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;        <span class="comment">/* D6: correct the guess */</span></div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;        guess--;</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;        buf2=stop2;</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;        buf1=start1+len2;</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;        <span class="keywordflow">for</span> (carry=0; buf2 &gt; start2; buf1--)</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;        {</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;          <a class="code" href="../../dc/d19/decimal_8c.html#ab9dde235ea6b498670b1202efc8863cc">ADD</a>(*buf1, *buf1, *--buf2, carry);</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;        }</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;      }</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;    }</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#a217a0bd562b98ae8c2ffce44935351e1">likely</a>(div_mod))</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;      *buf0=(<a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a>)guess;</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;    dcarry= *start1;</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;    start1++;</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;  }</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/d90/chrono_8h.html#ade692a13be7c7dfac09a8ff2fd00d172">mod</a>)</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;  {</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;<span class="comment">      now the result is in tmp1, it has</span></div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;<span class="comment">        intg=prec1-frac1</span></div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;<span class="comment">        frac=max(frac1, frac2)=to-&gt;frac</span></div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;    <span class="keywordflow">if</span> (dcarry)</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;      *--start1=dcarry;</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;    buf0=to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>;</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;    intg0=(int) (<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(prec1-frac1)-(start1-tmp1));</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;    frac0=<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>);</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;    <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>=<a class="code" href="../../d5/da0/decimal_8h.html#a6d15cce36445086710326b68b7a01ba4">E_DEC_OK</a>;</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(frac0==0 &amp;&amp; intg0==0))</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;    {</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;      <a class="code" href="../../d5/da0/decimal_8h.html#a5ed860a83aa33b8b125e3317cacbc074">decimal_make_zero</a>(to);</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../df/d60/namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5aeac7878d891005c72a71703f35dbb2be15">done</a>;</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;    }</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;    <span class="keywordflow">if</span> (intg0&lt;=0)</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;    {</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(-intg0 &gt;= to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#adf138ff1dd2904d68d243e7b5207c4da">len</a>))</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;      {</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;        <a class="code" href="../../d5/da0/decimal_8h.html#a5ed860a83aa33b8b125e3317cacbc074">decimal_make_zero</a>(to);</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;        <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>=<a class="code" href="../../d5/da0/decimal_8h.html#a11368630fa2fae49fd03fcaa0435b216">E_DEC_TRUNCATED</a>;</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="../../df/d60/namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5aeac7878d891005c72a71703f35dbb2be15">done</a>;</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;      }</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;      stop1=start1+frac0;</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;      frac0+=intg0;</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;      to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>=0;</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;      <span class="keywordflow">while</span> (intg0++ &lt; 0)</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;        *buf0++=0;</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;    }</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;    {</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(intg0 &gt; to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#adf138ff1dd2904d68d243e7b5207c4da">len</a>))</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;      {</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;        frac0=0;</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;        intg0=to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#adf138ff1dd2904d68d243e7b5207c4da">len</a>;</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;        <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>=<a class="code" href="../../d5/da0/decimal_8h.html#adeff328341b0d04e50b43afeb3c0549e">E_DEC_OVERFLOW</a>;</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="../../df/d60/namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5aeac7878d891005c72a71703f35dbb2be15">done</a>;</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;      }</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;      <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(intg0 &lt;= <a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>));</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;      stop1=start1+frac0+intg0;</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;      to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>=<a class="code" href="../../d9/df6/my__global_8h.html#ac6afabdc09a49a433ee19d8a9486056d">min</a>(intg0*<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>, from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>);</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;    }</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(intg0+frac0 &gt; to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#adf138ff1dd2904d68d243e7b5207c4da">len</a>))</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;    {</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;      stop1-=frac0+intg0-to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#adf138ff1dd2904d68d243e7b5207c4da">len</a>;</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;      frac0=to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#adf138ff1dd2904d68d243e7b5207c4da">len</a>-intg0;</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;      to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>=frac0*<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>;</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;        <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>=<a class="code" href="../../d5/da0/decimal_8h.html#a11368630fa2fae49fd03fcaa0435b216">E_DEC_TRUNCATED</a>;</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;    }</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;    <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(buf0 + (stop1 - start1) &lt;= to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a> + to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#adf138ff1dd2904d68d243e7b5207c4da">len</a>);</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;    <span class="keywordflow">while</span> (start1 &lt; stop1)</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;        *buf0++=*start1++;</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;  }</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;<a class="code" href="../../df/d60/namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5aeac7878d891005c72a71703f35dbb2be15">done</a>:</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;  <a class="code" href="../../db/da9/my__sys_8h.html#afc5dd02e4d18f23a51c9db57c96a22ae">my_afree</a>(tmp1);</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>;</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;}</div>
<div class="ttc" id="achrono_8h_html_ade692a13be7c7dfac09a8ff2fd00d172"><div class="ttname"><a href="../../dd/d90/chrono_8h.html#ade692a13be7c7dfac09a8ff2fd00d172">mod</a></div><div class="ttdeci">T mod(T x, int y)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d90/chrono_8h_source.html#l00822">chrono.h:822</a></div></div>
<div class="ttc" id="adecimal_8c_html_ab8913a87bdee940ec374d97498bcb7b3"><div class="ttname"><a href="../../dc/d19/decimal_8c.html#ab8913a87bdee940ec374d97498bcb7b3">SUB2</a></div><div class="ttdeci">#define SUB2(to, from1, from2, carry)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d19/decimal_8c_source.html#l00202">decimal.c:202</a></div></div>
<div class="ttc" id="adecimal_8h_html_a434680262b7bb3d8fc6eaccc8b4c0cce"><div class="ttname"><a href="../../d5/da0/decimal_8h.html#a434680262b7bb3d8fc6eaccc8b4c0cce">E_DEC_DIV_ZERO</a></div><div class="ttdeci">#define E_DEC_DIV_ZERO</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da0/decimal_8h_source.html#l00099">decimal.h:99</a></div></div>
<div class="ttc" id="adecimal_8h_html_abc098f5fd809d5e905e5455812312f8b"><div class="ttname"><a href="../../d5/da0/decimal_8h.html#abc098f5fd809d5e905e5455812312f8b">E_DEC_OOM</a></div><div class="ttdeci">#define E_DEC_OOM</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da0/decimal_8h_source.html#l00101">decimal.h:101</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d19/decimal_8c_source.html#l00169">ADD</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00027">st_decimal_t::buf</a>, <a class="el" href="../../d6/dda/m__string_8h_source.html#l00063">bzero</a>, <a class="el" href="../../d0/d74/my__dbug_8h_source.html#l00096">DBUG_ASSERT</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00068">decimal_make_zero</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00129">DIG_BASE</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00127">DIG_PER_DEC1</a>, <a class="el" href="../../d3/d50/format-inl_8h_source.html#l00624">detail::digits::done</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00099">E_DEC_DIV_ZERO</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00096">E_DEC_OK</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00101">E_DEC_OOM</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00098">E_DEC_OVERFLOW</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00097">E_DEC_TRUNCATED</a>, <a class="el" href="../../d3/dc6/minigzip_8c_source.html#l00156">error()</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00148">FIX_INTG_FRAC_ERROR</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::frac</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::intg</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::len</a>, <a class="el" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h_source.html#l00035">likely</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l01386">max</a>, <a class="el" href="../../d6/dda/m__string_8h_source.html#l00050">memcpy</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l01387">min</a>, <a class="el" href="../../dd/d90/chrono_8h_source.html#l00822">mod()</a>, <a class="el" href="../../db/da9/my__sys_8h_source.html#l00197">my_afree</a>, <a class="el" href="../../db/da9/my__sys_8h_source.html#l00196">my_alloca</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00133">powers10</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00132">ROUND_UP</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00144">sanity</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l00481">set_if_bigger</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00026">st_decimal_t::sign</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00202">SUB2</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l00466">UNINIT_VAR</a>, <a class="el" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h_source.html#l00036">unlikely</a>, <a class="el" href="../../d8/d14/_vector2int16_8h_source.html#l00037">G3D::x</a>, and <a class="el" href="../../d8/d14/_vector2int16_8h_source.html#l00038">G3D::y</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d19/decimal_8c_source.html#l02360">decimal_div()</a>, and <a class="el" href="../../dc/d19/decimal_8c_source.html#l02392">decimal_mod()</a>.</p>

</div>
</div>
<a id="a7980e0c8b29cc3165cf9e8eb5f98a34b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7980e0c8b29cc3165cf9e8eb5f98a34b">&#9670;&nbsp;</a></span>do_mini_left_shift()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void do_mini_left_shift </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>dec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>shift</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>beg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>last</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l00516">516</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;{</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *from= dec-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a> + <a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(beg + 1) - 1;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *end= dec-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a> + <a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(last) - 1;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <span class="keywordtype">int</span> c_shift= <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a> - shift;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(from &gt;= dec-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(end &lt; dec-&gt;buf + dec-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#adf138ff1dd2904d68d243e7b5207c4da">len</a>);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="keywordflow">if</span> (beg % <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a> &lt; shift)</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    *(from - 1)= (*from) / <a class="code" href="../../dc/d19/decimal_8c.html#a3272f667e8515e8f69c55bb184f7fbc8">powers10</a>[c_shift];</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="keywordflow">for</span>(; from &lt; end; from++)</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    *from= ((*from % <a class="code" href="../../dc/d19/decimal_8c.html#a3272f667e8515e8f69c55bb184f7fbc8">powers10</a>[c_shift]) * <a class="code" href="../../dc/d19/decimal_8c.html#a3272f667e8515e8f69c55bb184f7fbc8">powers10</a>[shift] +</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            (*(from + 1)) / <a class="code" href="../../dc/d19/decimal_8c.html#a3272f667e8515e8f69c55bb184f7fbc8">powers10</a>[c_shift]);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  *from= (*from % <a class="code" href="../../dc/d19/decimal_8c.html#a3272f667e8515e8f69c55bb184f7fbc8">powers10</a>[c_shift]) * <a class="code" href="../../dc/d19/decimal_8c.html#a3272f667e8515e8f69c55bb184f7fbc8">powers10</a>[shift];</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/da0/decimal_8h_source.html#l00027">st_decimal_t::buf</a>, <a class="el" href="../../d0/d74/my__dbug_8h_source.html#l00096">DBUG_ASSERT</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00127">DIG_PER_DEC1</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::len</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00133">powers10</a>, and <a class="el" href="../../dc/d19/decimal_8c_source.html#l00132">ROUND_UP</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d19/decimal_8c_source.html#l00579">decimal_shift()</a>.</p>

</div>
</div>
<a id="a6babfd2d57412fca6ac479a6703cf07a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6babfd2d57412fca6ac479a6703cf07a">&#9670;&nbsp;</a></span>do_mini_right_shift()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void do_mini_right_shift </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>dec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>shift</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>beg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>last</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l00546">546</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;{</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *from= dec-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a> + <a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(last) - 1;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *end= dec-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a> + <a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(beg + 1) - 1;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="keywordtype">int</span> c_shift= <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a> - shift;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(from &lt; dec-&gt;buf + dec-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#adf138ff1dd2904d68d243e7b5207c4da">len</a>);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(end &gt;= dec-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>);</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a> - ((last - 1) % <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a> + 1) &lt; shift)</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    *(from + 1)= (*from % <a class="code" href="../../dc/d19/decimal_8c.html#a3272f667e8515e8f69c55bb184f7fbc8">powers10</a>[shift]) * <a class="code" href="../../dc/d19/decimal_8c.html#a3272f667e8515e8f69c55bb184f7fbc8">powers10</a>[c_shift];</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <span class="keywordflow">for</span>(; from &gt; end; from--)</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    *from= (*from / <a class="code" href="../../dc/d19/decimal_8c.html#a3272f667e8515e8f69c55bb184f7fbc8">powers10</a>[shift] +</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            (*(from - 1) % <a class="code" href="../../dc/d19/decimal_8c.html#a3272f667e8515e8f69c55bb184f7fbc8">powers10</a>[shift]) * <a class="code" href="../../dc/d19/decimal_8c.html#a3272f667e8515e8f69c55bb184f7fbc8">powers10</a>[c_shift]);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  *from= *from / <a class="code" href="../../dc/d19/decimal_8c.html#a3272f667e8515e8f69c55bb184f7fbc8">powers10</a>[shift];</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/da0/decimal_8h_source.html#l00027">st_decimal_t::buf</a>, <a class="el" href="../../d0/d74/my__dbug_8h_source.html#l00096">DBUG_ASSERT</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00127">DIG_PER_DEC1</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::len</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00133">powers10</a>, and <a class="el" href="../../dc/d19/decimal_8c_source.html#l00132">ROUND_UP</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d19/decimal_8c_source.html#l00579">decimal_shift()</a>.</p>

</div>
</div>
<a id="a24209e2aa3a6ffcb2799d54001963c41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24209e2aa3a6ffcb2799d54001963c41">&#9670;&nbsp;</a></span>do_sub()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int do_sub </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>from1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>from2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l01782">1782</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;{</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;  <span class="keywordtype">int</span> intg1=<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>), intg2=<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>),</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;      frac1=<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>), frac2=<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>);</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;  <span class="keywordtype">int</span> frac0=<a class="code" href="../../d9/df6/my__global_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>(frac1, frac2), <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>;</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *buf1, *buf2, *buf0, *stop1, *stop2, *start1, *start2, carry=0;</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160; </div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;  <span class="comment">/* let carry:=1 if from2 &gt; from1 */</span></div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;  start1=buf1=from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>; stop1=buf1+intg1;</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;  start2=buf2=from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>; stop2=buf2+intg2;</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(*buf1 == 0))</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;  {</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    <span class="keywordflow">while</span> (buf1 &lt; stop1 &amp;&amp; *buf1 == 0)</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;      buf1++;</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;    start1=buf1;</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;    intg1= (int) (stop1-buf1);</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;  }</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(*buf2 == 0))</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;  {</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    <span class="keywordflow">while</span> (buf2 &lt; stop2 &amp;&amp; *buf2 == 0)</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;      buf2++;</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;    start2=buf2;</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;    intg2= (int) (stop2-buf2);</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;  }</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;  <span class="keywordflow">if</span> (intg2 &gt; intg1)</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    carry=1;</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (intg2 == intg1)</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;  {</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;    <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *end1= stop1 + (frac1 - 1);</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *end2= stop2 + (frac2 - 1);</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>((buf1 &lt;= end1) &amp;&amp; (*end1 == 0)))</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;      end1--;</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>((buf2 &lt;= end2) &amp;&amp; (*end2 == 0)))</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;      end2--;</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;    frac1= (int) (end1 - stop1) + 1;</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;    frac2= (int) (end2 - stop2) + 1;</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    <span class="keywordflow">while</span> (buf1 &lt;=end1 &amp;&amp; buf2 &lt;= end2 &amp;&amp; *buf1 == *buf2)</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;      buf1++, buf2++;</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;    <span class="keywordflow">if</span> (buf1 &lt;= end1)</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;    {</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;      <span class="keywordflow">if</span> (buf2 &lt;= end2)</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;        carry= *buf2 &gt; *buf1;</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;        carry= 0;</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;    }</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;    {</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;      <span class="keywordflow">if</span> (buf2 &lt;= end2)</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;        carry=1;</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;      <span class="keywordflow">else</span> <span class="comment">/* short-circuit everything: from1 == from2 */</span></div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;      {</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;        <span class="keywordflow">if</span> (to == 0) <span class="comment">/* decimal_cmp() */</span></div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;          <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;        <a class="code" href="../../d5/da0/decimal_8h.html#a5ed860a83aa33b8b125e3317cacbc074">decimal_make_zero</a>(to);</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d5/da0/decimal_8h.html#a6d15cce36445086710326b68b7a01ba4">E_DEC_OK</a>;</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;      }</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;    }</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;  }</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160; </div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;  <span class="keywordflow">if</span> (to == 0) <span class="comment">/* decimal_cmp() */</span></div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;    <span class="keywordflow">return</span> carry == from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a> ? 1 : -1;</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160; </div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a5fd165f5e0781ede5f9413895fe3ab5c">sanity</a>(to);</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160; </div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;  to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a>=from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a>;</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160; </div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;  <span class="comment">/* ensure that always from1 &gt; from2 (and intg1 &gt;= intg2) */</span></div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;  <span class="keywordflow">if</span> (carry)</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;  {</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;    <a class="code" href="../../d9/df6/my__global_8h.html#a4b5fcb6110af91fb851aa296bb9d26ef">swap_variables</a>(<a class="code" href="../../db/dd0/structst__decimal__t.html">decimal_t</a> *,from1,from1);</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;    <a class="code" href="../../d9/df6/my__global_8h.html#a4b5fcb6110af91fb851aa296bb9d26ef">swap_variables</a>(<a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *,start1, start2);</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;    <a class="code" href="../../d9/df6/my__global_8h.html#a4b5fcb6110af91fb851aa296bb9d26ef">swap_variables</a>(<span class="keywordtype">int</span>,intg1,intg2);</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;    <a class="code" href="../../d9/df6/my__global_8h.html#a4b5fcb6110af91fb851aa296bb9d26ef">swap_variables</a>(<span class="keywordtype">int</span>,frac1,frac2);</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;    to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a>= 1 - to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a>;</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;  }</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160; </div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a2e86a17284f9ad51bc296439f3981b53">FIX_INTG_FRAC_ERROR</a>(to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#adf138ff1dd2904d68d243e7b5207c4da">len</a>, intg1, frac0, <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>);</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;  buf0=to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>+intg1+frac0;</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160; </div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;  to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>=<a class="code" href="../../d9/df6/my__global_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>(from1-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>, from2-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>);</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;  to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>=intg1*<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>;</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(<a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>))</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;  {</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;    <a class="code" href="../../d9/df6/my__global_8h.html#aadeec961a0e84bb1fa3cded11703cf2f">set_if_smaller</a>(to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>, frac0*<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>);</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;    <a class="code" href="../../d9/df6/my__global_8h.html#aadeec961a0e84bb1fa3cded11703cf2f">set_if_smaller</a>(frac1, frac0);</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;    <a class="code" href="../../d9/df6/my__global_8h.html#aadeec961a0e84bb1fa3cded11703cf2f">set_if_smaller</a>(frac2, frac0);</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;    <a class="code" href="../../d9/df6/my__global_8h.html#aadeec961a0e84bb1fa3cded11703cf2f">set_if_smaller</a>(intg2, intg1);</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;  }</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;  carry=0;</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160; </div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;  <span class="comment">/* part 1 - max(frac) ... min (frac) */</span></div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;  <span class="keywordflow">if</span> (frac1 &gt; frac2)</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;  {</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;    buf1=start1+intg1+frac1;</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;    stop1=start1+intg1+frac2;</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;    buf2=start2+intg2+frac2;</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;    <span class="keywordflow">while</span> (frac0-- &gt; frac1)</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;      *--buf0=0;</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;    <span class="keywordflow">while</span> (buf1 &gt; stop1)</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;      *--buf0=*--buf1;</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;  }</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;  {</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    buf1=start1+intg1+frac1;</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    buf2=start2+intg2+frac2;</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;    stop2=start2+intg2+frac1;</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;    <span class="keywordflow">while</span> (frac0-- &gt; frac2)</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;      *--buf0=0;</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;    <span class="keywordflow">while</span> (buf2 &gt; stop2)</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;    {</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;      <a class="code" href="../../dc/d19/decimal_8c.html#ad53fe42a6951e663e0daaf4236ec3bd1">SUB</a>(*--buf0, 0, *--buf2, carry);</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;    }</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;  }</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160; </div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;  <span class="comment">/* part 2 - min(frac) ... intg2 */</span></div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;  <span class="keywordflow">while</span> (buf2 &gt; start2)</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;  {</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;    <a class="code" href="../../dc/d19/decimal_8c.html#ad53fe42a6951e663e0daaf4236ec3bd1">SUB</a>(*--buf0, *--buf1, *--buf2, carry);</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;  }</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160; </div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;  <span class="comment">/* part 3 - intg2 ... intg1 */</span></div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;  <span class="keywordflow">while</span> (carry &amp;&amp; buf1 &gt; start1)</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;  {</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    <a class="code" href="../../dc/d19/decimal_8c.html#ad53fe42a6951e663e0daaf4236ec3bd1">SUB</a>(*--buf0, *--buf1, 0, carry);</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;  }</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160; </div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;  <span class="keywordflow">while</span> (buf1 &gt; start1)</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;    *--buf0=*--buf1;</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160; </div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;  <span class="keywordflow">while</span> (buf0 &gt; to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>)</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;    *--buf0=0;</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160; </div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>;</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;}</div>
<div class="ttc" id="adecimal_8c_html_ad53fe42a6951e663e0daaf4236ec3bd1"><div class="ttname"><a href="../../dc/d19/decimal_8c.html#ad53fe42a6951e663e0daaf4236ec3bd1">SUB</a></div><div class="ttdeci">#define SUB(to, from1, from2, carry)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d19/decimal_8c_source.html#l00193">decimal.c:193</a></div></div>
<div class="ttc" id="amy__global_8h_html_a4b5fcb6110af91fb851aa296bb9d26ef"><div class="ttname"><a href="../../d9/df6/my__global_8h.html#a4b5fcb6110af91fb851aa296bb9d26ef">swap_variables</a></div><div class="ttdeci">#define swap_variables(t, a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df6/my__global_8h_source.html#l00479">my_global.h:479</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/da0/decimal_8h_source.html#l00027">st_decimal_t::buf</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00068">decimal_make_zero</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00127">DIG_PER_DEC1</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00096">E_DEC_OK</a>, <a class="el" href="../../d3/dc6/minigzip_8c_source.html#l00156">error()</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00148">FIX_INTG_FRAC_ERROR</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::frac</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::intg</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::len</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l01386">max</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00132">ROUND_UP</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00144">sanity</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l00482">set_if_smaller</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00026">st_decimal_t::sign</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00193">SUB</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l00479">swap_variables</a>, and <a class="el" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h_source.html#l00036">unlikely</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d19/decimal_8c_source.html#l01924">decimal_add()</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l01938">decimal_cmp()</a>, and <a class="el" href="../../dc/d19/decimal_8c_source.html#l01931">decimal_sub()</a>.</p>

</div>
</div>
<a id="ad9721a139242677e54ad9adb43b5f420"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9721a139242677e54ad9adb43b5f420">&#9670;&nbsp;</a></span>double2decimal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int double2decimal </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l00977">977</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;{</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  <span class="keywordtype">char</span> buff[<a class="code" href="../../d6/dda/m__string_8h.html#a4c70192c36f317a021cb28a5b4dbc62c">FLOATING_POINT_BUFFER</a>], *end;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  <span class="keywordtype">int</span> res;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  <a class="code" href="../../d1/d35/dbug__long_8h.html#a56a51e0edb39d13c83021fd4e7bdc9e9">DBUG_ENTER</a>(<span class="stringliteral">&quot;double2decimal&quot;</span>);</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;  end= buff + <a class="code" href="../../d6/dda/m__string_8h.html#a94e731fb73e1424473a8648e55d517b1">my_gcvt</a>(from, <a class="code" href="../../d6/dda/m__string_8h.html#aa9c49fedd73b65a6a898c6c3d2ade49aa2eaf92814e281c85554d455b5367ef81">MY_GCVT_ARG_DOUBLE</a>, <span class="keyword">sizeof</span>(buff) - 1, buff, <a class="code" href="../../d9/d33/jemalloc__internal_8h.html#ae89ee89f41328ac0ade1e3e26c103570">NULL</a>);</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  res= <a class="code" href="../../d5/da0/decimal_8h.html#acb4a5f884d9d25c01fd2f29eeff50078">string2decimal</a>(buff, to, &amp;end);</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <a class="code" href="../../d1/d35/dbug__long_8h.html#a3770d2ff545ed3e4b714d20014e663df">DBUG_PRINT</a>(<span class="stringliteral">&quot;exit&quot;</span>, (<span class="stringliteral">&quot;res: %d&quot;</span>, res));</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <a class="code" href="../../d1/d35/dbug__long_8h.html#af63d1bddf8957387d14fe70b8db22b96">DBUG_RETURN</a>(res);</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;}</div>
<div class="ttc" id="adbug__long_8h_html_a56a51e0edb39d13c83021fd4e7bdc9e9"><div class="ttname"><a href="../../d1/d35/dbug__long_8h.html#a56a51e0edb39d13c83021fd4e7bdc9e9">DBUG_ENTER</a></div><div class="ttdeci">#define DBUG_ENTER(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d35/dbug__long_8h_source.html#l00131">dbug_long.h:131</a></div></div>
<div class="ttc" id="adbug__long_8h_html_af63d1bddf8957387d14fe70b8db22b96"><div class="ttname"><a href="../../d1/d35/dbug__long_8h.html#af63d1bddf8957387d14fe70b8db22b96">DBUG_RETURN</a></div><div class="ttdeci">#define DBUG_RETURN(a1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d35/dbug__long_8h_source.html#l00138">dbug_long.h:138</a></div></div>
<div class="ttc" id="adecimal_8h_html_acb4a5f884d9d25c01fd2f29eeff50078"><div class="ttname"><a href="../../d5/da0/decimal_8h.html#acb4a5f884d9d25c01fd2f29eeff50078">string2decimal</a></div><div class="ttdeci">#define string2decimal(A, B, C)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da0/decimal_8h_source.html#l00063">decimal.h:63</a></div></div>
<div class="ttc" id="ajemalloc__internal_8h_html_ae89ee89f41328ac0ade1e3e26c103570"><div class="ttname"><a href="../../d9/d33/jemalloc__internal_8h.html#ae89ee89f41328ac0ade1e3e26c103570">NULL</a></div><div class="ttdeci">arena_t NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d33/jemalloc__internal_8h_source.html#l00624">jemalloc_internal.h:624</a></div></div>
<div class="ttc" id="am__string_8h_html_a94e731fb73e1424473a8648e55d517b1"><div class="ttname"><a href="../../d6/dda/m__string_8h.html#a94e731fb73e1424473a8648e55d517b1">my_gcvt</a></div><div class="ttdeci">size_t my_gcvt(double x, my_gcvt_arg_type type, int width, char *to, my_bool *error)</div><div class="ttdoc">Converts a given floating point number to a zero-terminated string representation with a given field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d39/dtoa_8c_source.html#l00212">dtoa.c:212</a></div></div>
<div class="ttc" id="am__string_8h_html_aa9c49fedd73b65a6a898c6c3d2ade49aa2eaf92814e281c85554d455b5367ef81"><div class="ttname"><a href="../../d6/dda/m__string_8h.html#aa9c49fedd73b65a6a898c6c3d2ade49aa2eaf92814e281c85554d455b5367ef81">MY_GCVT_ARG_DOUBLE</a></div><div class="ttdeci">@ MY_GCVT_ARG_DOUBLE</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dda/m__string_8h_source.html#l00127">m_string.h:126</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d1/d35/dbug__long_8h_source.html#l00131">DBUG_ENTER</a>, <a class="el" href="../../d1/d35/dbug__long_8h_source.html#l00143">DBUG_PRINT</a>, <a class="el" href="../../d1/d35/dbug__long_8h_source.html#l00138">DBUG_RETURN</a>, <a class="el" href="../../d6/dda/m__string_8h_source.html#l00142">FLOATING_POINT_BUFFER</a>, <a class="el" href="../../d9/d39/dtoa_8c_source.html#l00212">my_gcvt()</a>, <a class="el" href="../../d6/dda/m__string_8h_source.html#l00126">MY_GCVT_ARG_DOUBLE</a>, <a class="el" href="../../d9/d33/jemalloc__internal_8h_source.html#l00624">NULL</a>, and <a class="el" href="../../d5/da0/decimal_8h_source.html#l00063">string2decimal</a>.</p>

</div>
</div>
<a id="a7722beaa1f5f845a8bf7fce52b2bc058"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7722beaa1f5f845a8bf7fce52b2bc058">&#9670;&nbsp;</a></span>internal_str2dec()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int internal_str2dec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#a74cd599039dcf29c6e6d342cf4efd0a8">my_bool</a>&#160;</td>
          <td class="paramname"><em>fixed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l00789">789</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;{</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *s= from, *s1, *endp, *end_of_string= *end;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <span class="keywordtype">int</span> i, intg, frac, <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>, intg1, frac1;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>,*buf;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a5fd165f5e0781ede5f9413895fe3ab5c">sanity</a>(to);</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160; </div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>= <a class="code" href="../../d5/da0/decimal_8h.html#a697824d290f02b427236130c1d7f8942">E_DEC_BAD_NUM</a>;                         <span class="comment">/* In case of bad number */</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  <span class="keywordflow">while</span> (s &lt; end_of_string &amp;&amp; <a class="code" href="../../d8/dd3/m__ctype_8h.html#a1ceef8f5a29051baa5ee61342bf861c3">my_isspace</a>(&amp;<a class="code" href="../../d8/dd3/m__ctype_8h.html#aa4bc5bb4f339afec426049fee727d701">my_charset_latin1</a>, *s))</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    s++;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="keywordflow">if</span> (s == end_of_string)</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="keywordflow">goto</span> fatal_error;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160; </div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  <span class="keywordflow">if</span> ((to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a>= (*s == <span class="charliteral">&#39;-&#39;</span>)))</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    s++;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*s == <span class="charliteral">&#39;+&#39;</span>)</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    s++;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160; </div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  s1=s;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  <span class="keywordflow">while</span> (s &lt; end_of_string &amp;&amp; <a class="code" href="../../d8/dd3/m__ctype_8h.html#a6eea3520a277069e3d6bb67650cb8406">my_isdigit</a>(&amp;<a class="code" href="../../d8/dd3/m__ctype_8h.html#aa4bc5bb4f339afec426049fee727d701">my_charset_latin1</a>, *s))</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    s++;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  intg= (int) (s-s1);</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  <span class="keywordflow">if</span> (s &lt; end_of_string &amp;&amp; *s==<span class="charliteral">&#39;.&#39;</span>)</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  {</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    endp= s+1;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="keywordflow">while</span> (endp &lt; end_of_string &amp;&amp; <a class="code" href="../../d8/dd3/m__ctype_8h.html#a6eea3520a277069e3d6bb67650cb8406">my_isdigit</a>(&amp;<a class="code" href="../../d8/dd3/m__ctype_8h.html#aa4bc5bb4f339afec426049fee727d701">my_charset_latin1</a>, *endp))</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;      endp++;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    frac= (int) (endp - s - 1);</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  }</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  {</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    frac= 0;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    endp= s;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  }</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160; </div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  *end= (<span class="keywordtype">char</span>*) endp;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160; </div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  <span class="keywordflow">if</span> (frac+intg == 0)</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <span class="keywordflow">goto</span> fatal_error;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160; </div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>= 0;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dc/de1/_c_h_a_n_g_e-_l_o_g_8txt.html#aff45121b1735a0598751acae1c4b1f20">fixed</a>)</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  {</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <span class="keywordflow">if</span> (frac &gt; to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>)</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    {</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>=<a class="code" href="../../d5/da0/decimal_8h.html#a11368630fa2fae49fd03fcaa0435b216">E_DEC_TRUNCATED</a>;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;      frac=to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    }</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <span class="keywordflow">if</span> (intg &gt; to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>)</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    {</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;      <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>=<a class="code" href="../../d5/da0/decimal_8h.html#adeff328341b0d04e50b43afeb3c0549e">E_DEC_OVERFLOW</a>;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      intg=to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    }</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    intg1=<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(intg);</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    frac1=<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(frac);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    <span class="keywordflow">if</span> (intg1+frac1 &gt; to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#adf138ff1dd2904d68d243e7b5207c4da">len</a>)</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    {</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;      <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>= <a class="code" href="../../d5/da0/decimal_8h.html#abc098f5fd809d5e905e5455812312f8b">E_DEC_OOM</a>;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      <span class="keywordflow">goto</span> fatal_error;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    }</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  }</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  {</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    intg1=<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(intg);</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    frac1=<a class="code" href="../../dc/d19/decimal_8c.html#ad5dcd985c76bd978233a42cc7d993970">ROUND_UP</a>(frac);</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <a class="code" href="../../dc/d19/decimal_8c.html#a2e86a17284f9ad51bc296439f3981b53">FIX_INTG_FRAC_ERROR</a>(to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#adf138ff1dd2904d68d243e7b5207c4da">len</a>, intg1, frac1, <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>);</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(<a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>))</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    {</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;      frac=frac1*<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a> == <a class="code" href="../../d5/da0/decimal_8h.html#adeff328341b0d04e50b43afeb3c0549e">E_DEC_OVERFLOW</a>)</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        intg=intg1*<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    }</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  }</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <span class="comment">/* Error is guranteed to be set here */</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>=intg;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>=frac;</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160; </div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  buf=to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>+intg1;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  s1=s;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160; </div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>=0, i=0; intg; intg--)</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  {</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>+= (*--s - <span class="charliteral">&#39;0&#39;</span>)*<a class="code" href="../../dc/d19/decimal_8c.html#a3272f667e8515e8f69c55bb184f7fbc8">powers10</a>[i];</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160; </div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(++i == <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>))</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    {</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;      *--buf=<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;      <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>=0;</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      i=0;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    }</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  }</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  <span class="keywordflow">if</span> (i)</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    *--buf=<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160; </div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  buf=to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>+intg1;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>=0, i=0; frac; frac--)</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  {</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>= (*++s1 - <span class="charliteral">&#39;0&#39;</span>) + <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>*10;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160; </div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(++i == <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>))</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    {</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;      *buf++=<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>=0;</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      i=0;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    }</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  }</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="keywordflow">if</span> (i)</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    *buf=<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>*<a class="code" href="../../dc/d19/decimal_8c.html#a3272f667e8515e8f69c55bb184f7fbc8">powers10</a>[<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>-i];</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160; </div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  <span class="comment">/* Handle exponent */</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  <span class="keywordflow">if</span> (endp+1 &lt; end_of_string &amp;&amp; (*endp == <span class="charliteral">&#39;e&#39;</span> || *endp == <span class="charliteral">&#39;E&#39;</span>))</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  {</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="keywordtype">int</span> str_error;</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <a class="code" href="../../d9/df6/my__global_8h.html#aec67c7fb857b590c82cd4155cd21d7e7">longlong</a> exponent= <a class="code" href="../../d6/dda/m__string_8h.html#a2ed64c74b0285600b56bd6c83e8a354d">my_strtoll10</a>(endp+1, (<span class="keywordtype">char</span>**) &amp;end_of_string,</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                                    &amp;str_error);</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160; </div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    <span class="keywordflow">if</span> (end_of_string != endp +1)               <span class="comment">/* If at least one digit */</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    {</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      *end= (<span class="keywordtype">char</span>*) end_of_string;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      <span class="keywordflow">if</span> (str_error &gt; 0)</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;      {</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>= <a class="code" href="../../d5/da0/decimal_8h.html#a697824d290f02b427236130c1d7f8942">E_DEC_BAD_NUM</a>;</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        <span class="keywordflow">goto</span> fatal_error;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;      }</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;      <span class="keywordflow">if</span> (exponent &gt; INT_MAX/2 || (str_error == 0 &amp;&amp; exponent &lt; 0))</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;      {</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>= <a class="code" href="../../d5/da0/decimal_8h.html#adeff328341b0d04e50b43afeb3c0549e">E_DEC_OVERFLOW</a>;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;        <span class="keywordflow">goto</span> fatal_error;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;      }</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      <span class="keywordflow">if</span> (exponent &lt; INT_MIN/2 &amp;&amp; <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a> != <a class="code" href="../../d5/da0/decimal_8h.html#adeff328341b0d04e50b43afeb3c0549e">E_DEC_OVERFLOW</a>)</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      {</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>= <a class="code" href="../../d5/da0/decimal_8h.html#a11368630fa2fae49fd03fcaa0435b216">E_DEC_TRUNCATED</a>;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        <span class="keywordflow">goto</span> fatal_error;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;      }</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a> != <a class="code" href="../../d5/da0/decimal_8h.html#adeff328341b0d04e50b43afeb3c0549e">E_DEC_OVERFLOW</a>)</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>= <a class="code" href="../../dc/d19/decimal_8c.html#aa2d3d0f4794da7d63a184c494b522727">decimal_shift</a>(to, (<span class="keywordtype">int</span>) exponent);</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    }</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;  }</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>;</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160; </div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;fatal_error:</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  <a class="code" href="../../d5/da0/decimal_8h.html#a5ed860a83aa33b8b125e3317cacbc074">decimal_make_zero</a>(to);</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;}</div>
<div class="ttc" id="a_c_h_a_n_g_e-_l_o_g_8txt_html_aff45121b1735a0598751acae1c4b1f20"><div class="ttname"><a href="../../dc/de1/_c_h_a_n_g_e-_l_o_g_8txt.html#aff45121b1735a0598751acae1c4b1f20">fixed</a></div><div class="ttdeci">ver bug fix to_res53 reported by Akio Takahashi ver fix MSC compile error reported by Dirk Steenpass ver internal state of SFMT is kept in structure function and macro names are changed to have sfmt_ prefix ALTIVEC OR BIGENDIAN ARE NOT TESTED AT ALL ver change condition compile of do_recursion in SFMT c ver bug fix to_res53_mix and genrand_res53_mix ver gcc compile option changed from O9 to O3 add functions genrand_res53_mix and to_res53_mix bug fix about definition of ALWAYS_INLINE add new definition PRE_ALWAYS for MSC ver bug fixed</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/de1/_c_h_a_n_g_e-_l_o_g_8txt_source.html#l00032">CHANGE-LOG.txt:54</a></div></div>
<div class="ttc" id="adecimal_8c_html_aa2d3d0f4794da7d63a184c494b522727"><div class="ttname"><a href="../../dc/d19/decimal_8c.html#aa2d3d0f4794da7d63a184c494b522727">decimal_shift</a></div><div class="ttdeci">int decimal_shift(decimal_t *dec, int shift)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d19/decimal_8c_source.html#l00579">decimal.c:579</a></div></div>
<div class="ttc" id="am__ctype_8h_html_a1ceef8f5a29051baa5ee61342bf861c3"><div class="ttname"><a href="../../d8/dd3/m__ctype_8h.html#a1ceef8f5a29051baa5ee61342bf861c3">my_isspace</a></div><div class="ttdeci">#define my_isspace(s, c)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd3/m__ctype_8h_source.html#l00611">m_ctype.h:611</a></div></div>
<div class="ttc" id="am__ctype_8h_html_a6eea3520a277069e3d6bb67650cb8406"><div class="ttname"><a href="../../d8/dd3/m__ctype_8h.html#a6eea3520a277069e3d6bb67650cb8406">my_isdigit</a></div><div class="ttdeci">#define my_isdigit(s, c)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd3/m__ctype_8h_source.html#l00608">m_ctype.h:608</a></div></div>
<div class="ttc" id="am__ctype_8h_html_aa4bc5bb4f339afec426049fee727d701"><div class="ttname"><a href="../../d8/dd3/m__ctype_8h.html#aa4bc5bb4f339afec426049fee727d701">my_charset_latin1</a></div><div class="ttdeci">MYSQL_PLUGIN_IMPORT CHARSET_INFO my_charset_latin1</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dda/ctype-latin1_8c_source.html#l00419">ctype-latin1.c:419</a></div></div>
<div class="ttc" id="am__string_8h_html_a2ed64c74b0285600b56bd6c83e8a354d"><div class="ttname"><a href="../../d6/dda/m__string_8h.html#a2ed64c74b0285600b56bd6c83e8a354d">my_strtoll10</a></div><div class="ttdeci">longlong my_strtoll10(const char *nptr, char **endptr, int *error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d60/my__strtoll10_8c_source.html#l00074">my_strtoll10.c:74</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/da0/decimal_8h_source.html#l00027">st_decimal_t::buf</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00068">decimal_make_zero</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00579">decimal_shift()</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00127">DIG_PER_DEC1</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00100">E_DEC_BAD_NUM</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00101">E_DEC_OOM</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00098">E_DEC_OVERFLOW</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00097">E_DEC_TRUNCATED</a>, <a class="el" href="../../d3/dc6/minigzip_8c_source.html#l00156">error()</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00148">FIX_INTG_FRAC_ERROR</a>, <a class="el" href="../../dc/de1/_c_h_a_n_g_e-_l_o_g_8txt_source.html#l00054">fixed</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::frac</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::intg</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::len</a>, <a class="el" href="../../d6/dda/ctype-latin1_8c_source.html#l00419">my_charset_latin1</a>, <a class="el" href="../../d8/dd3/m__ctype_8h_source.html#l00608">my_isdigit</a>, <a class="el" href="../../d8/dd3/m__ctype_8h_source.html#l00611">my_isspace</a>, <a class="el" href="../../d4/d60/my__strtoll10_8c_source.html#l00074">my_strtoll10()</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00133">powers10</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00132">ROUND_UP</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00144">sanity</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00026">st_decimal_t::sign</a>, <a class="el" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h_source.html#l00036">unlikely</a>, and <a class="el" href="../../d8/d14/_vector2int16_8h_source.html#l00037">G3D::x</a>.</p>

</div>
</div>
<a id="a4b90884f987617d2140add2ce49abf06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b90884f987617d2140add2ce49abf06">&#9670;&nbsp;</a></span>longlong2decimal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int longlong2decimal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#aec67c7fb857b590c82cd4155cd21d7e7">longlong</a>&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l01021">1021</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;{</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;  <span class="keywordflow">if</span> ((to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a>= from &lt; 0))</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dc/d19/decimal_8c.html#ad74504ffb16dcf62bdb1024039bf1e56">ull2dec</a>(-from, to);</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../dc/d19/decimal_8c.html#ad74504ffb16dcf62bdb1024039bf1e56">ull2dec</a>(from, to);</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;}</div>
<div class="ttc" id="adecimal_8c_html_ad74504ffb16dcf62bdb1024039bf1e56"><div class="ttname"><a href="../../dc/d19/decimal_8c.html#ad74504ffb16dcf62bdb1024039bf1e56">ull2dec</a></div><div class="ttdeci">static int ull2dec(ulonglong from, decimal_t *to)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d19/decimal_8c_source.html#l00989">decimal.c:989</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/da0/decimal_8h_source.html#l00026">st_decimal_t::sign</a>, and <a class="el" href="../../dc/d19/decimal_8c_source.html#l00989">ull2dec()</a>.</p>

</div>
</div>
<a id="a60d34635012ee0d7ab540826801b2f61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60d34635012ee0d7ab540826801b2f61">&#9670;&nbsp;</a></span>max_decimal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void max_decimal </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>precision</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>frac</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l00226">226</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;{</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="keywordtype">int</span> intpart;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *buf= to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(precision &amp;&amp; precision &gt;= frac);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160; </div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a>= 0;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="keywordflow">if</span> ((intpart= to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>= (precision - frac)))</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordtype">int</span> firstdigits= intpart % <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">if</span> (firstdigits)</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      *buf++= <a class="code" href="../../dc/d19/decimal_8c.html#a3272f667e8515e8f69c55bb184f7fbc8">powers10</a>[firstdigits] - 1; <span class="comment">/* get 9 99 999 ... */</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">for</span>(intpart/= <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>; intpart; intpart--)</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      *buf++= <a class="code" href="../../dc/d19/decimal_8c.html#a4ef335f9599f2f33702b9b95c0f59364">DIG_MAX</a>;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="keywordflow">if</span> ((to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>= frac))</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordtype">int</span> lastdigits= frac % <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">for</span>(frac/= <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>; frac; frac--)</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      *buf++= <a class="code" href="../../dc/d19/decimal_8c.html#a4ef335f9599f2f33702b9b95c0f59364">DIG_MAX</a>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordflow">if</span> (lastdigits)</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      *buf= <a class="code" href="../../dc/d19/decimal_8c.html#a86bf8e94b59a209ad9796acd4a9b4f5a">frac_max</a>[lastdigits - 1];</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;}</div>
<div class="ttc" id="adecimal_8c_html_a86bf8e94b59a209ad9796acd4a9b4f5a"><div class="ttname"><a href="../../dc/d19/decimal_8c.html#a86bf8e94b59a209ad9796acd4a9b4f5a">frac_max</a></div><div class="ttdeci">static const dec1 frac_max[DIG_PER_DEC1-1]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d19/decimal_8c_source.html#l00136">decimal.c:136</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/da0/decimal_8h_source.html#l00027">st_decimal_t::buf</a>, <a class="el" href="../../d0/d74/my__dbug_8h_source.html#l00096">DBUG_ASSERT</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00130">DIG_MAX</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00127">DIG_PER_DEC1</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::frac</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00136">frac_max</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::intg</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00133">powers10</a>, and <a class="el" href="../../d5/da0/decimal_8h_source.html#l00026">st_decimal_t::sign</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d19/decimal_8c_source.html#l01700">do_add()</a>.</p>

</div>
</div>
<a id="a1763687278a99086ef1a0ee9ccf859bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1763687278a99086ef1a0ee9ccf859bd">&#9670;&nbsp;</a></span>remove_leading_zeroes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a>* remove_leading_zeroes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>intg_result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l00253">253</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;{</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="keywordtype">int</span> intg= from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>, i;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *buf0= from-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  i= ((intg - 1) % <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>) + 1;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="keywordflow">while</span> (intg &gt; 0 &amp;&amp; *buf0 == 0)</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    intg-= i;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    i= <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    buf0++;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="keywordflow">if</span> (intg &gt; 0)</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordflow">for</span> (i= (intg - 1) % <a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>; *buf0 &lt; <a class="code" href="../../dc/d19/decimal_8c.html#a3272f667e8515e8f69c55bb184f7fbc8">powers10</a>[i--]; intg--) ;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <a class="code" href="../../d0/d74/my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(intg &gt; 0);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  }</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    intg=0;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  *intg_result= intg;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="keywordflow">return</span> buf0;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/da0/decimal_8h_source.html#l00027">st_decimal_t::buf</a>, <a class="el" href="../../d0/d74/my__dbug_8h_source.html#l00096">DBUG_ASSERT</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00127">DIG_PER_DEC1</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::intg</a>, and <a class="el" href="../../dc/d19/decimal_8c_source.html#l00133">powers10</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d19/decimal_8c_source.html#l01176">decimal2bin()</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00331">decimal2string()</a>, and <a class="el" href="../../dc/d19/decimal_8c_source.html#l01917">decimal_intg()</a>.</p>

</div>
</div>
<a id="ad74504ffb16dcf62bdb1024039bf1e56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad74504ffb16dcf62bdb1024039bf1e56">&#9670;&nbsp;</a></span>ull2dec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ull2dec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a>&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l00989">989</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;{</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;  <span class="keywordtype">int</span> intg1, <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>=<a class="code" href="../../d5/da0/decimal_8h.html#a6d15cce36445086710326b68b7a01ba4">E_DEC_OK</a>;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  <a class="code" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a> <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>=from;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> *buf;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160; </div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  <a class="code" href="../../dc/d19/decimal_8c.html#a5fd165f5e0781ede5f9413895fe3ab5c">sanity</a>(to);</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160; </div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  <span class="keywordflow">for</span> (intg1=1; from &gt;= <a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>; intg1++, from/=<a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>) ;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(intg1 &gt; to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#adf138ff1dd2904d68d243e7b5207c4da">len</a>))</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  {</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    intg1=to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#adf138ff1dd2904d68d243e7b5207c4da">len</a>;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>=<a class="code" href="../../d5/da0/decimal_8h.html#adeff328341b0d04e50b43afeb3c0549e">E_DEC_OVERFLOW</a>;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  }</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a6b821d46801fbace2b281dcf0c0f106a">frac</a>=0;</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a7a33cd163aa841a0b0d9a340bb0d8a72">intg</a>=intg1*<a class="code" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160; </div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  <span class="keywordflow">for</span> (buf=to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#a0e8b53a569db084c11150b1370f894bc">buf</a>+intg1; intg1; intg1--)</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  {</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <a class="code" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a> <a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a>=<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>/<a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>;</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    *--buf=(<a class="code" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a>)(<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>-<a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a>*<a class="code" href="../../dc/d19/decimal_8c.html#a174daf8d334caaad68495bf3e5247abb">DIG_BASE</a>);</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>=<a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a>;</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  }</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dc6/minigzip_8c.html#aee763da2c1c9da197307bad1d009513d">error</a>;</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/da0/decimal_8h_source.html#l00027">st_decimal_t::buf</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00129">DIG_BASE</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00127">DIG_PER_DEC1</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00096">E_DEC_OK</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00098">E_DEC_OVERFLOW</a>, <a class="el" href="../../d3/dc6/minigzip_8c_source.html#l00156">error()</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::frac</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::intg</a>, <a class="el" href="../../d5/da0/decimal_8h_source.html#l00025">st_decimal_t::len</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00144">sanity</a>, <a class="el" href="../../dd/de0/deps_2jemalloc_2include_2jemalloc_2internal_2util_8h_source.html#l00036">unlikely</a>, <a class="el" href="../../d8/d14/_vector2int16_8h_source.html#l00037">G3D::x</a>, and <a class="el" href="../../d8/d14/_vector2int16_8h_source.html#l00038">G3D::y</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d19/decimal_8c_source.html#l01021">longlong2decimal()</a>, and <a class="el" href="../../dc/d19/decimal_8c_source.html#l01015">ulonglong2decimal()</a>.</p>

</div>
</div>
<a id="a1693a5e5081fdf4b9f703de51b016f5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1693a5e5081fdf4b9f703de51b016f5c">&#9670;&nbsp;</a></span>ulonglong2decimal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ulonglong2decimal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#ae7c11be50f0b11d048979398c5fdcfa5">ulonglong</a>&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/da0/decimal_8h.html#a93d5623924f47e3e803615e7f8df9cf5">decimal_t</a> *&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l01015">1015</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;{</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  to-&gt;<a class="code" href="../../db/dd0/structst__decimal__t.html#affdec73b8715719b1c8594339d144c16">sign</a>=0;</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../dc/d19/decimal_8c.html#ad74504ffb16dcf62bdb1024039bf1e56">ull2dec</a>(from, to);</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/da0/decimal_8h_source.html#l00026">st_decimal_t::sign</a>, and <a class="el" href="../../dc/d19/decimal_8c_source.html#l00989">ull2dec()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="af74859e650972604fc1144ee63fcfc88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af74859e650972604fc1144ee63fcfc88">&#9670;&nbsp;</a></span>dig2bytes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int dig2bytes[<a class="el" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>+1] ={0, 1, 1, 2, 2, 3, 3, 4, 4, 4}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l00135">135</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d19/decimal_8c_source.html#l01311">bin2decimal()</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l01176">decimal2bin()</a>, and <a class="el" href="../../dc/d19/decimal_8c_source.html#l01436">decimal_bin_size()</a>.</p>

</div>
</div>
<a id="a86bf8e94b59a209ad9796acd4a9b4f5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86bf8e94b59a209ad9796acd4a9b4f5a">&#9670;&nbsp;</a></span>frac_max</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> frac_max[<a class="el" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>-1]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">={</div>
<div class="line">  900000000, 990000000, 999000000,</div>
<div class="line">  999900000, 999990000, 999999000,</div>
<div class="line">  999999900, 999999990 }</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l00136">136</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d19/decimal_8c_source.html#l00226">max_decimal()</a>.</p>

</div>
</div>
<a id="a3272f667e8515e8f69c55bb184f7fbc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3272f667e8515e8f69c55bb184f7fbc8">&#9670;&nbsp;</a></span>powers10</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dc/d19/decimal_8c.html#a603fb76eec04ba71d1e6c2bbe44bc92b">dec1</a> powers10[<a class="el" href="../../dc/d19/decimal_8c.html#aed4bf80d270cf711d27095036ff99cb2">DIG_PER_DEC1</a>+1]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">={</div>
<div class="line">  1, 10, 100, 1000, 10000, 100000, 1000000, 10000000, 100000000, 1000000000}</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../dc/d19/decimal_8c_source.html#l00133">133</a> of file <a class="el" href="../../dc/d19/decimal_8c_source.html">decimal.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d19/decimal_8c_source.html#l01311">bin2decimal()</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l01176">decimal2bin()</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00284">decimal_actual_fraction()</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l01466">decimal_round()</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00449">digits_bounds()</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l02100">do_div_mod()</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00516">do_mini_left_shift()</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00546">do_mini_right_shift()</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00789">internal_str2dec()</a>, <a class="el" href="../../dc/d19/decimal_8c_source.html#l00226">max_decimal()</a>, and <a class="el" href="../../dc/d19/decimal_8c_source.html#l00253">remove_leading_zeroes()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
