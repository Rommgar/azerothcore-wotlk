<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Azerotcore-wotlk: dtNavMeshQuery Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Azerotcore-wotlk
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../d2/db6/classdt_nav_mesh_query-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">dtNavMeshQuery Class Reference<div class="ingroups"><a class="el" href="../../d5/d7a/group__detour.html">Detour</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html">DetourNavMeshQuery.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html">dtQueryData</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa5adfa9c92f7d77bb144c3283bf76d2e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#aa5adfa9c92f7d77bb144c3283bf76d2e">dtNavMeshQuery</a> ()</td></tr>
<tr class="separator:aa5adfa9c92f7d77bb144c3283bf76d2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a157a41114dab708dabb05eebe8dc07a2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#a157a41114dab708dabb05eebe8dc07a2">~dtNavMeshQuery</a> ()</td></tr>
<tr class="separator:a157a41114dab708dabb05eebe8dc07a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb51d0d2798d0bc7c669ac38c25d4116"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#acb51d0d2798d0bc7c669ac38c25d4116">init</a> (<a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../da/d16/classdt_nav_mesh.html">dtNavMesh</a> *nav, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int maxNodes)</td></tr>
<tr class="separator:acb51d0d2798d0bc7c669ac38c25d4116"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Standard Pathfinding Functions</div></td></tr>
<tr class="memitem:a9d86502949fcd4f96ffd350d4ef69e3c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#a9d86502949fcd4f96ffd350d4ef69e3c">findPath</a> (<a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> startRef, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> endRef, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *startPos, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *endPos, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *filter, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *path, int *pathCount, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int maxPath) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a9d86502949fcd4f96ffd350d4ef69e3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac160434c85bdf9edec24fa621f120d2d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#ac160434c85bdf9edec24fa621f120d2d">findStraightPath</a> (<a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *startPos, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *endPos, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *path, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int pathSize, float *straightPath, unsigned char *straightPathFlags, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *straightPathRefs, int *straightPathCount, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int maxStraightPath, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int options=0) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ac160434c85bdf9edec24fa621f120d2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Sliced Pathfinding Functions</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Common use case:</p><ol type="1">
<li>Call <a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#ae9a478194f14f1a4591f8b6528007d82">initSlicedFindPath()</a> to initialize the sliced path query.</li>
<li>Call <a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#aa0c147e3da7fd0b59342da0fc456afc7">updateSlicedFindPath()</a> until it returns complete.</li>
<li>Call <a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#a98673bb238fbb139ec8407e266fa76fd">finalizeSlicedFindPath()</a> to get the path. <br  />
 </li>
</ol>
</div></td></tr>
<tr class="memitem:ae9a478194f14f1a4591f8b6528007d82"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#ae9a478194f14f1a4591f8b6528007d82">initSlicedFindPath</a> (<a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> startRef, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> endRef, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *startPos, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *endPos, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *filter, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> unsigned int options=0)</td></tr>
<tr class="separator:ae9a478194f14f1a4591f8b6528007d82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0c147e3da7fd0b59342da0fc456afc7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#aa0c147e3da7fd0b59342da0fc456afc7">updateSlicedFindPath</a> (<a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int maxIter, int *doneIters)</td></tr>
<tr class="separator:aa0c147e3da7fd0b59342da0fc456afc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98673bb238fbb139ec8407e266fa76fd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#a98673bb238fbb139ec8407e266fa76fd">finalizeSlicedFindPath</a> (<a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *path, int *pathCount, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int maxPath)</td></tr>
<tr class="separator:a98673bb238fbb139ec8407e266fa76fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01b18dcb5d25fc392b6030ae5d4f310e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#a01b18dcb5d25fc392b6030ae5d4f310e">finalizeSlicedFindPathPartial</a> (<a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *existing, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int existingSize, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *path, int *pathCount, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int maxPath)</td></tr>
<tr class="separator:a01b18dcb5d25fc392b6030ae5d4f310e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Dijkstra Search Functions</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><br  />
 </p>
</div></td></tr>
<tr class="memitem:a1131b39f205440349e7efe7f2d9b0ef9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#a1131b39f205440349e7efe7f2d9b0ef9">findPolysAroundCircle</a> (<a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> startRef, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *<a class="el" href="../../df/df3/boss__blood__queen__lana__thel_8cpp.html#a2993b3b195b6880d2cbc3cdf7215a56a">centerPos</a>, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float radius, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *filter, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *resultRef, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *resultParent, float *resultCost, int *resultCount, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int maxResult) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a1131b39f205440349e7efe7f2d9b0ef9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa142b8c1e54bdefc39ab41507fe931d1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#aa142b8c1e54bdefc39ab41507fe931d1">findPolysAroundShape</a> (<a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> startRef, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *verts, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int nverts, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *filter, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *resultRef, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *resultParent, float *resultCost, int *resultCount, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int maxResult) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:aa142b8c1e54bdefc39ab41507fe931d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0eadf81ceef919bd502469529b02fd0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#af0eadf81ceef919bd502469529b02fd0">getPathFromDijkstraSearch</a> (<a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> endRef, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *path, int *pathCount, int maxPath) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:af0eadf81ceef919bd502469529b02fd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Local Query Functions</div></td></tr>
<tr class="memitem:a5317939092cb4b55fed4b0bb61afc74a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#a5317939092cb4b55fed4b0bb61afc74a">findNearestPoly</a> (<a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *center, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *halfExtents, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *filter, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *nearestRef, float *nearestPt) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a5317939092cb4b55fed4b0bb61afc74a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06e46d57afad3f07380d82bb8d4a6720"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#a06e46d57afad3f07380d82bb8d4a6720">queryPolygons</a> (<a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *center, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *halfExtents, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *filter, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *polys, int *polyCount, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int maxPolys) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a06e46d57afad3f07380d82bb8d4a6720"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed2fc9071ca182a548baf5158cd4f441"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#aed2fc9071ca182a548baf5158cd4f441">queryPolygons</a> (<a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *center, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *halfExtents, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *filter, <a class="el" href="../../d1/d06/classdt_poly_query.html">dtPolyQuery</a> *query) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:aed2fc9071ca182a548baf5158cd4f441"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9864032da48ba6f1055deab90633ffd6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#a9864032da48ba6f1055deab90633ffd6">findLocalNeighbourhood</a> (<a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> startRef, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *<a class="el" href="../../df/df3/boss__blood__queen__lana__thel_8cpp.html#a2993b3b195b6880d2cbc3cdf7215a56a">centerPos</a>, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float radius, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *filter, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *resultRef, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *resultParent, int *resultCount, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int maxResult) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a9864032da48ba6f1055deab90633ffd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95f6d7c92a75c7773ababeb144206968"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#a95f6d7c92a75c7773ababeb144206968">moveAlongSurface</a> (<a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> startRef, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *startPos, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *endPos, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *filter, float *resultPos, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *visited, int *visitedCount, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int maxVisitedSize) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a95f6d7c92a75c7773ababeb144206968"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7509a4bf31a215f20478c5050ef25913"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#a7509a4bf31a215f20478c5050ef25913">raycast</a> (<a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> startRef, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *startPos, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *endPos, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *filter, float *t, float *hitNormal, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *path, int *pathCount, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int maxPath) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a7509a4bf31a215f20478c5050ef25913"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96bd4282df1e863d1c813b2fe881a262"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#a96bd4282df1e863d1c813b2fe881a262">raycast</a> (<a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> startRef, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *startPos, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *endPos, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *filter, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> unsigned int options, <a class="el" href="../../d3/df1/structdt_raycast_hit.html">dtRaycastHit</a> *hit, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> prevRef=0) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a96bd4282df1e863d1c813b2fe881a262"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1576a980ae29e44ad4809a25974fbd40"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#a1576a980ae29e44ad4809a25974fbd40">findDistanceToWall</a> (<a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> startRef, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *<a class="el" href="../../df/df3/boss__blood__queen__lana__thel_8cpp.html#a2993b3b195b6880d2cbc3cdf7215a56a">centerPos</a>, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float maxRadius, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *filter, float *hitDist, float *hitPos, float *hitNormal) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a1576a980ae29e44ad4809a25974fbd40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c49662f07e52f1488622089952a154c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#a2c49662f07e52f1488622089952a154c">getPolyWallSegments</a> (<a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> ref, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *filter, float *segmentVerts, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *segmentRefs, int *segmentCount, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int maxSegments) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a2c49662f07e52f1488622089952a154c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af86c392a14bd788b0caecf21d9fb4b3d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#af86c392a14bd788b0caecf21d9fb4b3d">findRandomPoint</a> (<a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *filter, float(*<a class="el" href="../../d1/d65/src_2common_2_utilities_2_random_8h.html#aa28484fcb823a22578601847e4b0ddb4">frand</a>)(), <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *randomRef, float *randomPt) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:af86c392a14bd788b0caecf21d9fb4b3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfb87531eb962cbd51c649469de2e4fa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#abfb87531eb962cbd51c649469de2e4fa">findRandomPointAroundCircle</a> (<a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> startRef, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *<a class="el" href="../../df/df3/boss__blood__queen__lana__thel_8cpp.html#a2993b3b195b6880d2cbc3cdf7215a56a">centerPos</a>, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float maxRadius, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *filter, float(*<a class="el" href="../../d1/d65/src_2common_2_utilities_2_random_8h.html#aa28484fcb823a22578601847e4b0ddb4">frand</a>)(), <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *randomRef, float *randomPt) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:abfb87531eb962cbd51c649469de2e4fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07a90efe5d1a2b4b530aa236370574d9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#a07a90efe5d1a2b4b530aa236370574d9">closestPointOnPoly</a> (<a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> ref, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *<a class="el" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a>, float *closest, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> *posOverPoly) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a07a90efe5d1a2b4b530aa236370574d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa53b9573e61eda951213ea9e4354e744"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#aa53b9573e61eda951213ea9e4354e744">closestPointOnPolyBoundary</a> (<a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> ref, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *<a class="el" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a>, float *closest) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:aa53b9573e61eda951213ea9e4354e744"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8303a12749e252c6688c15c5c887b69"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#af8303a12749e252c6688c15c5c887b69">getPolyHeight</a> (<a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> ref, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *<a class="el" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a>, float *height) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:af8303a12749e252c6688c15c5c887b69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Miscellaneous Functions</div></td></tr>
<tr class="memitem:ac76164ed97fdedd9ea8abbe52f6c2c8a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#ac76164ed97fdedd9ea8abbe52f6c2c8a">isValidPolyRef</a> (<a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> ref, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *filter) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ac76164ed97fdedd9ea8abbe52f6c2c8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1de0c0d7cc527905d3f83c613897eb3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#ad1de0c0d7cc527905d3f83c613897eb3">isInClosedList</a> (<a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> ref) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ad1de0c0d7cc527905d3f83c613897eb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f5baaa868aad36ba023ea81b10e70bd"><td class="memItemLeft" align="right" valign="top">class <a class="el" href="../../d3/d3c/classdt_node_pool.html">dtNodePool</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#a5f5baaa868aad36ba023ea81b10e70bd">getNodePool</a> () <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a5f5baaa868aad36ba023ea81b10e70bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05ddaa41019804494be7da66207882de"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../da/d16/classdt_nav_mesh.html">dtNavMesh</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#a05ddaa41019804494be7da66207882de">getAttachedNavMesh</a> () <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a05ddaa41019804494be7da66207882de"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a78dec58a440acf659611eeb927ab0b01"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#a78dec58a440acf659611eeb927ab0b01">dtNavMeshQuery</a> (<a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/db0/classdt_nav_mesh_query.html">dtNavMeshQuery</a> &amp;)</td></tr>
<tr class="separator:a78dec58a440acf659611eeb927ab0b01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc8f01a9f6ff676a7a31657eed9d481c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html">dtNavMeshQuery</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#acc8f01a9f6ff676a7a31657eed9d481c">operator=</a> (<a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/db0/classdt_nav_mesh_query.html">dtNavMeshQuery</a> &amp;)</td></tr>
<tr class="separator:acc8f01a9f6ff676a7a31657eed9d481c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9ae121a5e6fddc2d2393bb1945509a8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#ae9ae121a5e6fddc2d2393bb1945509a8">queryPolygonsInTile</a> (<a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a> *tile, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *qmin, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *qmax, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *filter, <a class="el" href="../../d1/d06/classdt_poly_query.html">dtPolyQuery</a> *query) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="memdesc:ae9ae121a5e6fddc2d2393bb1945509a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queries polygons within a tile.  <a href="../../dd/db0/classdt_nav_mesh_query.html#ae9ae121a5e6fddc2d2393bb1945509a8">More...</a><br /></td></tr>
<tr class="separator:ae9ae121a5e6fddc2d2393bb1945509a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e509b958aaca7ee5fe62ec59b034b4c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#a5e509b958aaca7ee5fe62ec59b034b4c">getPortalPoints</a> (<a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> from, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> to, float *<a class="el" href="../../d9/dbf/_recast_mesh_8cpp.html#a0ba03d6a44337bfbcef8f0c9dad4289f">left</a>, float *right, unsigned char &amp;fromType, unsigned char &amp;toType) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="memdesc:a5e509b958aaca7ee5fe62ec59b034b4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns portal points between two polygons.  <a href="../../dd/db0/classdt_nav_mesh_query.html#a5e509b958aaca7ee5fe62ec59b034b4c">More...</a><br /></td></tr>
<tr class="separator:a5e509b958aaca7ee5fe62ec59b034b4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0a98f3cd9dc7fae9c1394115c7f47d1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#ac0a98f3cd9dc7fae9c1394115c7f47d1">getPortalPoints</a> (<a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> from, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d5/d02/structdt_poly.html">dtPoly</a> *fromPoly, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a> *fromTile, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> to, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d5/d02/structdt_poly.html">dtPoly</a> *toPoly, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a> *toTile, float *<a class="el" href="../../d9/dbf/_recast_mesh_8cpp.html#a0ba03d6a44337bfbcef8f0c9dad4289f">left</a>, float *right) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ac0a98f3cd9dc7fae9c1394115c7f47d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01e4c0b9bf01914da6f634b1a4953f45"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#a01e4c0b9bf01914da6f634b1a4953f45">getEdgeMidPoint</a> (<a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> from, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> to, float *mid) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="memdesc:a01e4c0b9bf01914da6f634b1a4953f45"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns edge mid point between two polygons.  <a href="../../dd/db0/classdt_nav_mesh_query.html#a01e4c0b9bf01914da6f634b1a4953f45">More...</a><br /></td></tr>
<tr class="separator:a01e4c0b9bf01914da6f634b1a4953f45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae12147fd8587b55ca6684bac0da05d4e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#ae12147fd8587b55ca6684bac0da05d4e">getEdgeMidPoint</a> (<a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> from, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d5/d02/structdt_poly.html">dtPoly</a> *fromPoly, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a> *fromTile, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> to, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d5/d02/structdt_poly.html">dtPoly</a> *toPoly, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a> *toTile, float *mid) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ae12147fd8587b55ca6684bac0da05d4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a471af9b26f2662b95a4770e4022a1186"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#a471af9b26f2662b95a4770e4022a1186">appendVertex</a> (<a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *<a class="el" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a>, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> unsigned char flags, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> ref, float *straightPath, unsigned char *straightPathFlags, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *straightPathRefs, int *straightPathCount, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int maxStraightPath) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a471af9b26f2662b95a4770e4022a1186"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b7b8deb4faceb4e351fe4ba43e0f165"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#a4b7b8deb4faceb4e351fe4ba43e0f165">appendPortals</a> (<a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int startIdx, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int endIdx, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *endPos, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *path, float *straightPath, unsigned char *straightPathFlags, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *straightPathRefs, int *straightPathCount, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int maxStraightPath, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int options) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a4b7b8deb4faceb4e351fe4ba43e0f165"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f6c1a4305b3a4dae4092dbb41a8f5ab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#a5f6c1a4305b3a4dae4092dbb41a8f5ab">getPathToNode</a> (struct <a class="el" href="../../d7/de4/structdt_node.html">dtNode</a> *endNode, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *path, int *pathCount, int maxPath) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a5f6c1a4305b3a4dae4092dbb41a8f5ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a01311c62ca841ef348acb7a2af59d343"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../da/d16/classdt_nav_mesh.html">dtNavMesh</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a></td></tr>
<tr class="memdesc:a01311c62ca841ef348acb7a2af59d343"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to navmesh data.  <a href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">More...</a><br /></td></tr>
<tr class="separator:a01311c62ca841ef348acb7a2af59d343"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9798484bd5dc6c2965fb4fc5ede18042"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html">dtQueryData</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a></td></tr>
<tr class="memdesc:a9798484bd5dc6c2965fb4fc5ede18042"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sliced query state.  <a href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">More...</a><br /></td></tr>
<tr class="separator:a9798484bd5dc6c2965fb4fc5ede18042"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a767464a8ed2c20954a69d26b5ac554"><td class="memItemLeft" align="right" valign="top">class <a class="el" href="../../d3/d3c/classdt_node_pool.html">dtNodePool</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#a4a767464a8ed2c20954a69d26b5ac554">m_tinyNodePool</a></td></tr>
<tr class="memdesc:a4a767464a8ed2c20954a69d26b5ac554"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to small node pool.  <a href="../../dd/db0/classdt_nav_mesh_query.html#a4a767464a8ed2c20954a69d26b5ac554">More...</a><br /></td></tr>
<tr class="separator:a4a767464a8ed2c20954a69d26b5ac554"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36e05cdfb4a75f9612538706f86a59f9"><td class="memItemLeft" align="right" valign="top">class <a class="el" href="../../d3/d3c/classdt_node_pool.html">dtNodePool</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a></td></tr>
<tr class="memdesc:a36e05cdfb4a75f9612538706f86a59f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to node pool.  <a href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">More...</a><br /></td></tr>
<tr class="separator:a36e05cdfb4a75f9612538706f86a59f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3229a1b413887209558e3f3fa33de23"><td class="memItemLeft" align="right" valign="top">class <a class="el" href="../../dc/d2a/classdt_node_queue.html">dtNodeQueue</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a></td></tr>
<tr class="memdesc:ab3229a1b413887209558e3f3fa33de23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to open list queue.  <a href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">More...</a><br /></td></tr>
<tr class="separator:ab3229a1b413887209558e3f3fa33de23"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Provides the ability to perform pathfinding related queries against a navigation mesh.</p>
<p>For methods that support undersized buffers, if the buffer is too small to hold the entire result set the return status of the method will include the <a class="el" href="../../d8/de6/_detour_status_8h.html#a97c8292e3ce2ba0b63bfa4ca57de10af">DT_BUFFER_TOO_SMALL</a> flag.</p>
<p>Constant member functions can be used by multiple clients without side effects. (E.g. No change to the closed list. No impact on an in-progress sliced path query. Etc.)</p>
<p>Walls and portals: A <em>wall</em> is a polygon segment that is considered impassable. A <em>portal</em> is a passable segment between polygons. A portal may be treated as a wall based on the <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> used for a query.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../da/d16/classdt_nav_mesh.html">dtNavMesh</a>, <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a>, <a class="el" href="../../d5/d7a/group__detour.html#gae547f165feefc955136130c8e22f207a">dtAllocNavMeshQuery()</a>, <a class="el" href="../../d5/d7a/group__detour.html#gae547f165feefc955136130c8e22f207a">dtAllocNavMeshQuery()</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00165">165</a> of file <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html">DetourNavMeshQuery.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aa5adfa9c92f7d77bb144c3283bf76d2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5adfa9c92f7d77bb144c3283bf76d2e">&#9670;&nbsp;</a></span>dtNavMeshQuery() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dtNavMeshQuery::dtNavMeshQuery </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00138">138</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                               :</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>(0),</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a4a767464a8ed2c20954a69d26b5ac554">m_tinyNodePool</a>(0),</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>(0),</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>(0)</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;{</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <a class="code" href="../../d6/dda/m__string_8h.html#af1756e67d46227b3333bc21a1fadd361">memset</a>(&amp;<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>, 0, <span class="keyword">sizeof</span>(dtQueryData));</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;}</div>
<div class="ttc" id="aclassdt_nav_mesh_query_html_a01311c62ca841ef348acb7a2af59d343"><div class="ttname"><a href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">dtNavMeshQuery::m_nav</a></div><div class="ttdeci">const dtNavMesh * m_nav</div><div class="ttdoc">Pointer to navmesh data.</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00543">DetourNavMeshQuery.h:543</a></div></div>
<div class="ttc" id="aclassdt_nav_mesh_query_html_a36e05cdfb4a75f9612538706f86a59f9"><div class="ttname"><a href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">dtNavMeshQuery::m_nodePool</a></div><div class="ttdeci">class dtNodePool * m_nodePool</div><div class="ttdoc">Pointer to node pool.</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00559">DetourNavMeshQuery.h:559</a></div></div>
<div class="ttc" id="aclassdt_nav_mesh_query_html_a4a767464a8ed2c20954a69d26b5ac554"><div class="ttname"><a href="../../dd/db0/classdt_nav_mesh_query.html#a4a767464a8ed2c20954a69d26b5ac554">dtNavMeshQuery::m_tinyNodePool</a></div><div class="ttdeci">class dtNodePool * m_tinyNodePool</div><div class="ttdoc">Pointer to small node pool.</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00558">DetourNavMeshQuery.h:558</a></div></div>
<div class="ttc" id="aclassdt_nav_mesh_query_html_a9798484bd5dc6c2965fb4fc5ede18042"><div class="ttname"><a href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">dtNavMeshQuery::m_query</a></div><div class="ttdeci">dtQueryData m_query</div><div class="ttdoc">Sliced query state.</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00556">DetourNavMeshQuery.h:556</a></div></div>
<div class="ttc" id="aclassdt_nav_mesh_query_html_ab3229a1b413887209558e3f3fa33de23"><div class="ttname"><a href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">dtNavMeshQuery::m_openList</a></div><div class="ttdeci">class dtNodeQueue * m_openList</div><div class="ttdoc">Pointer to open list queue.</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00560">DetourNavMeshQuery.h:560</a></div></div>
<div class="ttc" id="am__string_8h_html_af1756e67d46227b3333bc21a1fadd361"><div class="ttname"><a href="../../d6/dda/m__string_8h.html#af1756e67d46227b3333bc21a1fadd361">memset</a></div><div class="ttdeci">#define memset(A, C, B)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dda/m__string_8h_source.html#l00051">m_string.h:51</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00556">m_query</a>, and <a class="el" href="../../d6/dda/m__string_8h_source.html#l00051">memset</a>.</p>

</div>
</div>
<a id="a157a41114dab708dabb05eebe8dc07a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a157a41114dab708dabb05eebe8dc07a2">&#9670;&nbsp;</a></span>~dtNavMeshQuery()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dtNavMeshQuery::~dtNavMeshQuery </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00147">147</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;{</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a4a767464a8ed2c20954a69d26b5ac554">m_tinyNodePool</a>)</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a4a767464a8ed2c20954a69d26b5ac554">m_tinyNodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#acd74c85e290d5b7bcd1f9c44905a0f74">~dtNodePool</a>();</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>)</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#acd74c85e290d5b7bcd1f9c44905a0f74">~dtNodePool</a>();</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>)</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a836fbfbac11e06eeadd76919a9bba943">~dtNodeQueue</a>();</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <a class="code" href="../../df/dba/_detour_alloc_8h.html#adb7919ae2642d1a487ce5fce6ae3af0d">dtFree</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a4a767464a8ed2c20954a69d26b5ac554">m_tinyNodePool</a>);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <a class="code" href="../../df/dba/_detour_alloc_8h.html#adb7919ae2642d1a487ce5fce6ae3af0d">dtFree</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="../../df/dba/_detour_alloc_8h.html#adb7919ae2642d1a487ce5fce6ae3af0d">dtFree</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;}</div>
<div class="ttc" id="a_detour_alloc_8h_html_adb7919ae2642d1a487ce5fce6ae3af0d"><div class="ttname"><a href="../../df/dba/_detour_alloc_8h.html#adb7919ae2642d1a487ce5fce6ae3af0d">dtFree</a></div><div class="ttdeci">void dtFree(void *ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbb/_detour_alloc_8cpp_source.html#l00046">DetourAlloc.cpp:46</a></div></div>
<div class="ttc" id="aclassdt_node_pool_html_acd74c85e290d5b7bcd1f9c44905a0f74"><div class="ttname"><a href="../../d3/d3c/classdt_node_pool.html#acd74c85e290d5b7bcd1f9c44905a0f74">dtNodePool::~dtNodePool</a></div><div class="ttdeci">~dtNodePool()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d00/_detour_node_8cpp_source.html#l00076">DetourNode.cpp:76</a></div></div>
<div class="ttc" id="aclassdt_node_queue_html_a836fbfbac11e06eeadd76919a9bba943"><div class="ttname"><a href="../../dc/d2a/classdt_node_queue.html#a836fbfbac11e06eeadd76919a9bba943">dtNodeQueue::~dtNodeQueue</a></div><div class="ttdeci">~dtNodeQueue()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d00/_detour_node_8cpp_source.html#l00167">DetourNode.cpp:167</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/dbb/_detour_alloc_8cpp_source.html#l00046">dtFree()</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00559">m_nodePool</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00560">m_openList</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00558">m_tinyNodePool</a>, <a class="el" href="../../d1/d00/_detour_node_8cpp_source.html#l00076">dtNodePool::~dtNodePool()</a>, and <a class="el" href="../../d1/d00/_detour_node_8cpp_source.html#l00167">dtNodeQueue::~dtNodeQueue()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00113">dtFreeNavMeshQuery()</a>.</p>

</div>
</div>
<a id="a78dec58a440acf659611eeb927ab0b01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78dec58a440acf659611eeb927ab0b01">&#9670;&nbsp;</a></span>dtNavMeshQuery() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dtNavMeshQuery::dtNavMeshQuery </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/db0/classdt_nav_mesh_query.html">dtNavMeshQuery</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a4b7b8deb4faceb4e351fe4ba43e0f165"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b7b8deb4faceb4e351fe4ba43e0f165">&#9670;&nbsp;</a></span>appendPortals()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> dtNavMeshQuery::appendPortals </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int&#160;</td>
          <td class="paramname"><em>startIdx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int&#160;</td>
          <td class="paramname"><em>endIdx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *&#160;</td>
          <td class="paramname"><em>endPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>straightPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>straightPathFlags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *&#160;</td>
          <td class="paramname"><em>straightPathRefs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>straightPathCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int&#160;</td>
          <td class="paramname"><em>maxStraightPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01699">1699</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;{</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span>* startPos = &amp;straightPath[(*straightPathCount-1)*3];</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;    <span class="comment">// Append or update last vertex</span></div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;    <a class="code" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> stat = 0;</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = startIdx; i &lt; endIdx; i++)</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    {</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;        <span class="comment">// Calculate portal</span></div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> from = path[i];</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* fromTile = 0;</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* fromPoly = 0;</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/de6/_detour_status_8h.html#ab98b21afb80f30cc60a1f4e86ebc19d8">dtStatusFailed</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a36a84aa7296d5cc257eb3ddc38181253">getTileAndPolyByRef</a>(from, &amp;fromTile, &amp;fromPoly)))</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;        </div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> to = path[i+1];</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* toTile = 0;</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* toPoly = 0;</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/de6/_detour_status_8h.html#ab98b21afb80f30cc60a1f4e86ebc19d8">dtStatusFailed</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a36a84aa7296d5cc257eb3ddc38181253">getTileAndPolyByRef</a>(to, &amp;toTile, &amp;toPoly)))</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;        </div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;        <span class="keywordtype">float</span> <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>[3], <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">right</a>[3];</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/de6/_detour_status_8h.html#ab98b21afb80f30cc60a1f4e86ebc19d8">dtStatusFailed</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a5e509b958aaca7ee5fe62ec59b034b4c">getPortalPoints</a>(from, fromPoly, fromTile, to, toPoly, toTile, <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>, <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">right</a>)))</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;    </div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;        <span class="keywordflow">if</span> (options &amp; <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#a41a7f5b74dd90b219858a75208bcac4ea0b347150cb46ca63c54526df691a9aef">DT_STRAIGHTPATH_AREA_CROSSINGS</a>)</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;        {</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;            <span class="comment">// Skip intersection if only area crossings are requested.</span></div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;            <span class="keywordflow">if</span> (fromPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#ab5e97720847977aa7a4caf8c75e73792">getArea</a>() == toPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#ab5e97720847977aa7a4caf8c75e73792">getArea</a>())</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;        }</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;        </div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;        <span class="comment">// Append intersection</span></div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;        <span class="keywordtype">float</span> s,t;</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dc/d41/_detour_common_8h.html#af683acdd2685f36cbfd62202251857df">dtIntersectSegSeg2D</a>(startPos, endPos, <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>, <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">right</a>, s, t))</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;        {</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;            <span class="keywordtype">float</span> pt[3];</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;            <a class="code" href="../../dc/d41/_detour_common_8h.html#a7b3295d18cd477fca1fe541b59b1b231">dtVlerp</a>(pt, <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>,<a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">right</a>, t);</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160; </div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;            stat = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a471af9b26f2662b95a4770e4022a1186">appendVertex</a>(pt, 0, path[i+1],</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;                                straightPath, straightPathFlags, straightPathRefs,</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;                                straightPathCount, maxStraightPath);</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;            <span class="keywordflow">if</span> (stat != <a class="code" href="../../d8/de6/_detour_status_8h.html#ab2f47a2593c7138b17c1d8939f19cf06">DT_IN_PROGRESS</a>)</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;                <span class="keywordflow">return</span> stat;</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;        }</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;    }</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ab2f47a2593c7138b17c1d8939f19cf06">DT_IN_PROGRESS</a>;</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;}</div>
<div class="ttc" id="a_detour_common_8h_html_a7b3295d18cd477fca1fe541b59b1b231"><div class="ttname"><a href="../../dc/d41/_detour_common_8h.html#a7b3295d18cd477fca1fe541b59b1b231">dtVlerp</a></div><div class="ttdeci">void dtVlerp(float *dest, const float *v1, const float *v2, const float t)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d41/_detour_common_8h_source.html#l00118">DetourCommon.h:118</a></div></div>
<div class="ttc" id="a_detour_common_8h_html_af683acdd2685f36cbfd62202251857df"><div class="ttname"><a href="../../dc/d41/_detour_common_8h.html#af683acdd2685f36cbfd62202251857df">dtIntersectSegSeg2D</a></div><div class="ttdeci">bool dtIntersectSegSeg2D(const float *ap, const float *aq, const float *bp, const float *bq, float &amp;s, float &amp;t)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de1/_detour_common_8cpp_source.html#l00373">DetourCommon.cpp:373</a></div></div>
<div class="ttc" id="a_detour_nav_mesh_8h_html_a41a7f5b74dd90b219858a75208bcac4ea0b347150cb46ca63c54526df691a9aef"><div class="ttname"><a href="../../d1/ddd/_detour_nav_mesh_8h.html#a41a7f5b74dd90b219858a75208bcac4ea0b347150cb46ca63c54526df691a9aef">DT_STRAIGHTPATH_AREA_CROSSINGS</a></div><div class="ttdeci">@ DT_STRAIGHTPATH_AREA_CROSSINGS</div><div class="ttdoc">Add a vertex at every polygon edge crossing where area changes.</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00128">DetourNavMesh.h:128</a></div></div>
<div class="ttc" id="a_detour_nav_mesh_8h_html_ab4e0b2257a670c1a800057999612b466"><div class="ttname"><a href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a></div><div class="ttdeci">uint64_d dtPolyRef</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00058">DetourNavMesh.h:58</a></div></div>
<div class="ttc" id="a_detour_status_8h_html_a4f23c0dcf28d9e299a4aa06af5b9ada3"><div class="ttname"><a href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a></div><div class="ttdeci">unsigned int dtStatus</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de6/_detour_status_8h_source.html#l00022">DetourStatus.h:22</a></div></div>
<div class="ttc" id="a_detour_status_8h_html_a6dfcd405e3c12914b8b10af6558667c0"><div class="ttname"><a href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a></div><div class="ttdeci">static const unsigned int DT_INVALID_PARAM</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de6/_detour_status_8h_source.html#l00034">DetourStatus.h:34</a></div></div>
<div class="ttc" id="a_detour_status_8h_html_ab2f47a2593c7138b17c1d8939f19cf06"><div class="ttname"><a href="../../d8/de6/_detour_status_8h.html#ab2f47a2593c7138b17c1d8939f19cf06">DT_IN_PROGRESS</a></div><div class="ttdeci">static const unsigned int DT_IN_PROGRESS</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de6/_detour_status_8h_source.html#l00027">DetourStatus.h:27</a></div></div>
<div class="ttc" id="a_detour_status_8h_html_ab98b21afb80f30cc60a1f4e86ebc19d8"><div class="ttname"><a href="../../d8/de6/_detour_status_8h.html#ab98b21afb80f30cc60a1f4e86ebc19d8">dtStatusFailed</a></div><div class="ttdeci">bool dtStatusFailed(dtStatus status)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de6/_detour_status_8h_source.html#l00048">DetourStatus.h:48</a></div></div>
<div class="ttc" id="a_detour_status_8h_html_ae3cf4ee7a8ebe23a82381ffe0952fe3f"><div class="ttname"><a href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a></div><div class="ttdeci">static const unsigned int DT_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de6/_detour_status_8h_source.html#l00025">DetourStatus.h:25</a></div></div>
<div class="ttc" id="aclassdt_nav_mesh_html_a36a84aa7296d5cc257eb3ddc38181253"><div class="ttname"><a href="../../da/d16/classdt_nav_mesh.html#a36a84aa7296d5cc257eb3ddc38181253">dtNavMesh::getTileAndPolyByRef</a></div><div class="ttdeci">dtStatus getTileAndPolyByRef(const dtPolyRef ref, const dtMeshTile **tile, const dtPoly **poly) const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01190">DetourNavMesh.cpp:1190</a></div></div>
<div class="ttc" id="aclassdt_nav_mesh_query_html_a471af9b26f2662b95a4770e4022a1186"><div class="ttname"><a href="../../dd/db0/classdt_nav_mesh_query.html#a471af9b26f2662b95a4770e4022a1186">dtNavMeshQuery::appendVertex</a></div><div class="ttdeci">dtStatus appendVertex(const float *pos, const unsigned char flags, const dtPolyRef ref, float *straightPath, unsigned char *straightPathFlags, dtPolyRef *straightPathRefs, int *straightPathCount, const int maxStraightPath) const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01662">DetourNavMeshQuery.cpp:1662</a></div></div>
<div class="ttc" id="aclassdt_nav_mesh_query_html_a5e509b958aaca7ee5fe62ec59b034b4c"><div class="ttname"><a href="../../dd/db0/classdt_nav_mesh_query.html#a5e509b958aaca7ee5fe62ec59b034b4c">dtNavMeshQuery::getPortalPoints</a></div><div class="ttdeci">dtStatus getPortalPoints(dtPolyRef from, dtPolyRef to, float *left, float *right, unsigned char &amp;fromType, unsigned char &amp;toType) const</div><div class="ttdoc">Returns portal points between two polygons.</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02221">DetourNavMeshQuery.cpp:2221</a></div></div>
<div class="ttc" id="anamespacealign_html_aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd"><div class="ttname"><a href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">align::left</a></div><div class="ttdeci">@ left</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d71/fmt_2include_2fmt_2core_8h_source.html#l01859">core.h:1859</a></div></div>
<div class="ttc" id="anamespacealign_html_aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79"><div class="ttname"><a href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">align::right</a></div><div class="ttdeci">@ right</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d71/fmt_2include_2fmt_2core_8h_source.html#l01859">core.h:1859</a></div></div>
<div class="ttc" id="astructdt_mesh_tile_html"><div class="ttname"><a href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00293">DetourNavMesh.h:294</a></div></div>
<div class="ttc" id="astructdt_poly_html"><div class="ttname"><a href="../../d5/d02/structdt_poly.html">dtPoly</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00167">DetourNavMesh.h:168</a></div></div>
<div class="ttc" id="astructdt_poly_html_ab5e97720847977aa7a4caf8c75e73792"><div class="ttname"><a href="../../d5/d02/structdt_poly.html#ab5e97720847977aa7a4caf8c75e73792">dtPoly::getArea</a></div><div class="ttdeci">unsigned char getArea() const</div><div class="ttdoc">Gets the user defined area id.</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00196">DetourNavMesh.h:196</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01662">appendVertex()</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00025">DT_FAILURE</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00027">DT_IN_PROGRESS</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00034">DT_INVALID_PARAM</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00128">DT_STRAIGHTPATH_AREA_CROSSINGS</a>, <a class="el" href="../../d5/de1/_detour_common_8cpp_source.html#l00373">dtIntersectSegSeg2D()</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00048">dtStatusFailed()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00118">dtVlerp()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00196">dtPoly::getArea()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02221">getPortalPoints()</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01190">dtNavMesh::getTileAndPolyByRef()</a>, <a class="el" href="../../d5/d71/fmt_2include_2fmt_2core_8h_source.html#l01859">align::left</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00543">m_nav</a>, and <a class="el" href="../../d5/d71/fmt_2include_2fmt_2core_8h_source.html#l01859">align::right</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01766">findStraightPath()</a>.</p>

</div>
</div>
<a id="a471af9b26f2662b95a4770e4022a1186"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a471af9b26f2662b95a4770e4022a1186">&#9670;&nbsp;</a></span>appendVertex()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> dtNavMeshQuery::appendVertex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> unsigned char&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a>&#160;</td>
          <td class="paramname"><em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>straightPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>straightPathFlags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *&#160;</td>
          <td class="paramname"><em>straightPathRefs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>straightPathCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int&#160;</td>
          <td class="paramname"><em>maxStraightPath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01662">1662</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;{</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    <span class="keywordflow">if</span> ((*straightPathCount) &gt; 0 &amp;&amp; <a class="code" href="../../dc/d41/_detour_common_8h.html#ad246e02163e1de850ffe6a2645f3c28e">dtVequal</a>(&amp;straightPath[((*straightPathCount)-1)*3], <a class="code" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a>))</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    {</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;        <span class="comment">// The vertices are equal, update flags and poly.</span></div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;        <span class="keywordflow">if</span> (straightPathFlags)</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;            straightPathFlags[(*straightPathCount)-1] = flags;</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;        <span class="keywordflow">if</span> (straightPathRefs)</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;            straightPathRefs[(*straightPathCount)-1] = ref;</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;    }</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    {</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;        <span class="comment">// Append new vertex.</span></div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;        <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(&amp;straightPath[(*straightPathCount)*3], <a class="code" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a>);</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;        <span class="keywordflow">if</span> (straightPathFlags)</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;            straightPathFlags[(*straightPathCount)] = flags;</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;        <span class="keywordflow">if</span> (straightPathRefs)</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;            straightPathRefs[(*straightPathCount)] = ref;</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;        (*straightPathCount)++;</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160; </div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;        <span class="comment">// If there is no space to append more vertices, return.</span></div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;        <span class="keywordflow">if</span> ((*straightPathCount) &gt;= maxStraightPath)</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;        {</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a97c8292e3ce2ba0b63bfa4ca57de10af">DT_BUFFER_TOO_SMALL</a>;</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;        }</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160; </div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;        <span class="comment">// If reached end of path, return.</span></div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;        <span class="keywordflow">if</span> (flags == <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ac8cecf1c1e32f8464a1905edfeaebbc7a3857dec720eca5984c04ecf962b7bfa2">DT_STRAIGHTPATH_END</a>)</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;        {</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a>;</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;        }</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;    }</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ab2f47a2593c7138b17c1d8939f19cf06">DT_IN_PROGRESS</a>;</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;}</div>
<div class="ttc" id="a_detour_common_8h_html_a20bd1921d4bb81875f48bb8cbf7a63b4"><div class="ttname"><a href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a></div><div class="ttdeci">void dtVcopy(float *dest, const float *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d41/_detour_common_8h_source.html#l00191">DetourCommon.h:191</a></div></div>
<div class="ttc" id="a_detour_common_8h_html_ad246e02163e1de850ffe6a2645f3c28e"><div class="ttname"><a href="../../dc/d41/_detour_common_8h.html#ad246e02163e1de850ffe6a2645f3c28e">dtVequal</a></div><div class="ttdeci">bool dtVequal(const float *p0, const float *p1)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d41/_detour_common_8h_source.html#l00279">DetourCommon.h:279</a></div></div>
<div class="ttc" id="a_detour_nav_mesh_8h_html_ac8cecf1c1e32f8464a1905edfeaebbc7a3857dec720eca5984c04ecf962b7bfa2"><div class="ttname"><a href="../../d1/ddd/_detour_nav_mesh_8h.html#ac8cecf1c1e32f8464a1905edfeaebbc7a3857dec720eca5984c04ecf962b7bfa2">DT_STRAIGHTPATH_END</a></div><div class="ttdeci">@ DT_STRAIGHTPATH_END</div><div class="ttdoc">The vertex is the end position in the path.</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00121">DetourNavMesh.h:121</a></div></div>
<div class="ttc" id="a_detour_status_8h_html_a97c8292e3ce2ba0b63bfa4ca57de10af"><div class="ttname"><a href="../../d8/de6/_detour_status_8h.html#a97c8292e3ce2ba0b63bfa4ca57de10af">DT_BUFFER_TOO_SMALL</a></div><div class="ttdeci">static const unsigned int DT_BUFFER_TOO_SMALL</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de6/_detour_status_8h_source.html#l00035">DetourStatus.h:35</a></div></div>
<div class="ttc" id="a_detour_status_8h_html_ace78a9666e74d996b468942e7434989a"><div class="ttname"><a href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a></div><div class="ttdeci">static const unsigned int DT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de6/_detour_status_8h_source.html#l00026">DetourStatus.h:26</a></div></div>
<div class="ttc" id="abase64_8c_html_a5e75484d7880fa39b31f27c3d7058936"><div class="ttname"><a href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a></div><div class="ttdeci">static uint pos(unsigned char c)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d36/base64_8c_source.html#l00104">base64.c:104</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00035">DT_BUFFER_TOO_SMALL</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00027">DT_IN_PROGRESS</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00121">DT_STRAIGHTPATH_END</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00026">DT_SUCCESS</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00191">dtVcopy()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00279">dtVequal()</a>, and <a class="el" href="../../db/d36/base64_8c_source.html#l00104">pos()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01699">appendPortals()</a>, and <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01766">findStraightPath()</a>.</p>

</div>
</div>
<a id="a07a90efe5d1a2b4b530aa236370574d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07a90efe5d1a2b4b530aa236370574d9">&#9670;&nbsp;</a></span>closestPointOnPoly()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> dtNavMeshQuery::closestPointOnPoly </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a>&#160;</td>
          <td class="paramname"><em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>closest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> *&#160;</td>
          <td class="paramname"><em>posOverPoly</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Finds the closest point on the specified polygon. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ref</td><td>The reference id of the polygon. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pos</td><td>The position to check. [(x, y, z)] </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">closest</td><td>The closest point on the polygon. [(x, y, z)] </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">posOverPoly</td><td>True of the position is over the polygon. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status flags for the query.</dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<p>Uses the detail polygons to find the surface height. (Most accurate.)</p>
<p><code>pos</code> does not have to be within the bounds of the polygon or navigation mesh.</p>
<p>See <a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#aa53b9573e61eda951213ea9e4354e744">closestPointOnPolyBoundary()</a> for a limited but faster option. </p>

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00514">514</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;{</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a84ce3e44a2a97c5377b3b308825fcd37">isValidPolyRef</a>(ref) ||</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        !<a class="code" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a> || !<a class="code" href="../../dc/d41/_detour_common_8h.html#a1de203d55d933ccaa2ae9f3e126f4e63">dtVisfinite</a>(<a class="code" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a>) ||</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        !closest)</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    {</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    }</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160; </div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#abe3ca01b869b3e938f6d74286a2f053b">closestPointOnPoly</a>(ref, <a class="code" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a>, closest, posOverPoly);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a>;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;}</div>
<div class="ttc" id="a_detour_assert_8h_html_ad9878e9fa0121ff8d1390e21dc086951"><div class="ttname"><a href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a></div><div class="ttdeci">#define dtAssert(expression)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d60/_detour_assert_8h_source.html#l00047">DetourAssert.h:47</a></div></div>
<div class="ttc" id="a_detour_common_8h_html_a1de203d55d933ccaa2ae9f3e126f4e63"><div class="ttname"><a href="../../dc/d41/_detour_common_8h.html#a1de203d55d933ccaa2ae9f3e126f4e63">dtVisfinite</a></div><div class="ttdeci">bool dtVisfinite(const float *v)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d41/_detour_common_8h_source.html#l00290">DetourCommon.h:290</a></div></div>
<div class="ttc" id="aclassdt_nav_mesh_html_a84ce3e44a2a97c5377b3b308825fcd37"><div class="ttname"><a href="../../da/d16/classdt_nav_mesh.html#a84ce3e44a2a97c5377b3b308825fcd37">dtNavMesh::isValidPolyRef</a></div><div class="ttdeci">bool isValidPolyRef(dtPolyRef ref) const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01216">DetourNavMesh.cpp:1216</a></div></div>
<div class="ttc" id="aclassdt_nav_mesh_html_abe3ca01b869b3e938f6d74286a2f053b"><div class="ttname"><a href="../../da/d16/classdt_nav_mesh.html#abe3ca01b869b3e938f6d74286a2f053b">dtNavMesh::closestPointOnPoly</a></div><div class="ttdeci">void closestPointOnPoly(dtPolyRef ref, const float *pos, float *closest, bool *posOverPoly) const</div><div class="ttdoc">Returns closest point on polygon.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l00728">DetourNavMesh.cpp:728</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l00728">dtNavMesh::closestPointOnPoly()</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00025">DT_FAILURE</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00034">DT_INVALID_PARAM</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00026">DT_SUCCESS</a>, <a class="el" href="../../da/d60/_detour_assert_8h_source.html#l00047">dtAssert</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00290">dtVisfinite()</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01216">dtNavMesh::isValidPolyRef()</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00543">m_nav</a>, and <a class="el" href="../../db/d36/base64_8c_source.html#l00104">pos()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/server_2game_2_movement_2_movement_generators_2_path_generator_8cpp_source.html#l00162">PathGenerator::BuildPolyPath()</a>, <a class="el" href="../../d3/dea/server_2game_2_movement_2_movement_generators_2_path_generator_8cpp_source.html#l00092">PathGenerator::GetPathPolyByPosition()</a>, and <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00643">dtFindNearestPolyQuery::process()</a>.</p>

</div>
</div>
<a id="aa53b9573e61eda951213ea9e4354e744"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa53b9573e61eda951213ea9e4354e744">&#9670;&nbsp;</a></span>closestPointOnPolyBoundary()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> dtNavMeshQuery::closestPointOnPolyBoundary </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a>&#160;</td>
          <td class="paramname"><em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>closest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns a point on the boundary closest to the source point if the source point is outside the polygon's xz-bounds. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ref</td><td>The reference id to the polygon. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pos</td><td>The position to check. [(x, y, z)] </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">closest</td><td>The closest point. [(x, y, z)] </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status flags for the query.</dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<p>Much faster than <a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#a07a90efe5d1a2b4b530aa236370574d9">closestPointOnPoly()</a>.</p>
<p>If the provided position lies within the polygon's xz-bounds (above or below), then <code>pos</code> and <code>closest</code> will be equal.</p>
<p>The height of <code>closest</code> will be the polygon boundary. The height detail is not used.</p>
<p><code>pos</code> does not have to be within the bounds of the polybon or the navigation mesh. </p>

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00539">539</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;{</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    </div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* tile = 0;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* poly = 0;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/de6/_detour_status_8h.html#ab98b21afb80f30cc60a1f4e86ebc19d8">dtStatusFailed</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a36a84aa7296d5cc257eb3ddc38181253">getTileAndPolyByRef</a>(ref, &amp;tile, &amp;poly)))</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160; </div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a> || !<a class="code" href="../../dc/d41/_detour_common_8h.html#a1de203d55d933ccaa2ae9f3e126f4e63">dtVisfinite</a>(<a class="code" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a>) || !closest)</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    </div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="comment">// Collect vertices.</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="keywordtype">float</span> verts[<a class="code" href="../../d5/d7a/group__detour.html#ga8591fdac662dbfabb580de626c64c9f3">DT_VERTS_PER_POLYGON</a>*3];    </div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="keywordtype">float</span> edged[<a class="code" href="../../d5/d7a/group__detour.html#ga8591fdac662dbfabb580de626c64c9f3">DT_VERTS_PER_POLYGON</a>];</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keywordtype">float</span> edget[<a class="code" href="../../d5/d7a/group__detour.html#ga8591fdac662dbfabb580de626c64c9f3">DT_VERTS_PER_POLYGON</a>];</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="keywordtype">int</span> nv = 0;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; (int)poly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#af940c431464c022f844e61130f83d9c2">vertCount</a>; ++i)</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    {</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(&amp;verts[nv*3], &amp;tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[poly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[i]*3]);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        nv++;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    }       </div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    </div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordtype">bool</span> inside = <a class="code" href="../../dc/d41/_detour_common_8h.html#a9364781fff515c2d8e1fe654e9491b5d">dtDistancePtPolyEdgesSqr</a>(<a class="code" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a>, verts, nv, edged, edget);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="keywordflow">if</span> (inside)</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    {</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <span class="comment">// Point is inside the polygon, return the point.</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(closest, <a class="code" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a>);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    }</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    {</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <span class="comment">// Point is outside the polygon, dtClamp to nearest edge.</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <span class="keywordtype">float</span> dmin = edged[0];</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        <span class="keywordtype">int</span> imin = 0;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; nv; ++i)</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        {</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            <span class="keywordflow">if</span> (edged[i] &lt; dmin)</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            {</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                dmin = edged[i];</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                imin = i;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            }</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        }</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span>* va = &amp;verts[imin*3];</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span>* vb = &amp;verts[((imin+1)%nv)*3];</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <a class="code" href="../../dc/d41/_detour_common_8h.html#a7b3295d18cd477fca1fe541b59b1b231">dtVlerp</a>(closest, va, vb, edget[imin]);</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    }</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    </div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a>;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;}</div>
<div class="ttc" id="a_detour_common_8h_html_a9364781fff515c2d8e1fe654e9491b5d"><div class="ttname"><a href="../../dc/d41/_detour_common_8h.html#a9364781fff515c2d8e1fe654e9491b5d">dtDistancePtPolyEdgesSqr</a></div><div class="ttdeci">bool dtDistancePtPolyEdgesSqr(const float *pt, const float *verts, const int nverts, float *ed, float *et)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de1/_detour_common_8cpp_source.html#l00254">DetourCommon.cpp:254</a></div></div>
<div class="ttc" id="agroup__detour_html_ga8591fdac662dbfabb580de626c64c9f3"><div class="ttname"><a href="../../d5/d7a/group__detour.html#ga8591fdac662dbfabb580de626c64c9f3">DT_VERTS_PER_POLYGON</a></div><div class="ttdeci">static const int DT_VERTS_PER_POLYGON</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00073">DetourNavMesh.h:73</a></div></div>
<div class="ttc" id="astructdt_mesh_tile_html_abee62e6320aff3e2d0cdce239ec2c549"><div class="ttname"><a href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">dtMeshTile::verts</a></div><div class="ttdeci">float * verts</div><div class="ttdoc">The tile vertices. [Size: dtMeshHeader::vertCount].</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00300">DetourNavMesh.h:300</a></div></div>
<div class="ttc" id="astructdt_poly_html_acff94eb19526d33ef3c966b583d1d73f"><div class="ttname"><a href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">dtPoly::verts</a></div><div class="ttdeci">unsigned short verts[DT_VERTS_PER_POLYGON]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00174">DetourNavMesh.h:174</a></div></div>
<div class="ttc" id="astructdt_poly_html_af940c431464c022f844e61130f83d9c2"><div class="ttname"><a href="../../d5/d02/structdt_poly.html#af940c431464c022f844e61130f83d9c2">dtPoly::vertCount</a></div><div class="ttdeci">unsigned char vertCount</div><div class="ttdoc">The number of vertices in the polygon.</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00183">DetourNavMesh.h:183</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00025">DT_FAILURE</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00034">DT_INVALID_PARAM</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00026">DT_SUCCESS</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00073">DT_VERTS_PER_POLYGON</a>, <a class="el" href="../../da/d60/_detour_assert_8h_source.html#l00047">dtAssert</a>, <a class="el" href="../../d5/de1/_detour_common_8cpp_source.html#l00254">dtDistancePtPolyEdgesSqr()</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00048">dtStatusFailed()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00191">dtVcopy()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00290">dtVisfinite()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00118">dtVlerp()</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01190">dtNavMesh::getTileAndPolyByRef()</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00543">m_nav</a>, <a class="el" href="../../db/d36/base64_8c_source.html#l00104">pos()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00183">dtPoly::vertCount</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00174">dtPoly::verts</a>, and <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00300">dtMeshTile::verts</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/server_2game_2_movement_2_movement_generators_2_path_generator_8cpp_source.html#l00162">PathGenerator::BuildPolyPath()</a>, <a class="el" href="../../d3/dea/server_2game_2_movement_2_movement_generators_2_path_generator_8cpp_source.html#l00832">PathGenerator::FindSmoothPath()</a>, and <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01766">findStraightPath()</a>.</p>

</div>
</div>
<a id="a98673bb238fbb139ec8407e266fa76fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98673bb238fbb139ec8407e266fa76fd">&#9670;&nbsp;</a></span>finalizeSlicedFindPath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> dtNavMeshQuery::finalizeSlicedFindPath </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>pathCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int&#160;</td>
          <td class="paramname"><em>maxPath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Finalizes and returns the results of a sliced path query. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">path</td><td>An ordered list of polygon references representing the path. (Start to end.) [(polyRef) * <code>pathCount</code>] </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pathCount</td><td>The number of polygons returned in the <code>path</code> array. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">maxPath</td><td>The max number of polygons the path array can hold. [Limit: &gt;= 1] </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status flags for the query. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01470">1470</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;{</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    <span class="keywordflow">if</span> (!pathCount)</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160; </div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    *pathCount = 0;</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160; </div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;    <span class="keywordflow">if</span> (!path || maxPath &lt;= 0)</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;    </div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/de6/_detour_status_8h.html#ab98b21afb80f30cc60a1f4e86ebc19d8">dtStatusFailed</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a148e814fa33f723250cfa5236ed146a8">status</a>))</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    {</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;        <span class="comment">// Reset query.</span></div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;        <a class="code" href="../../d6/dda/m__string_8h.html#af1756e67d46227b3333bc21a1fadd361">memset</a>(&amp;<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>, 0, <span class="keyword">sizeof</span>(dtQueryData));</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a>;</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    }</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160; </div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    <span class="keywordtype">int</span> n = 0;</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160; </div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a0ae05a1a363a1eb4a535835167b11e34">startRef</a> == <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a6d08b3de0dce784d8f8a6e3c6f7cd122">endRef</a>)</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    {</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;        <span class="comment">// Special case: the search starts and ends at same poly.</span></div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;        path[n++] = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a0ae05a1a363a1eb4a535835167b11e34">startRef</a>;</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    }</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    {</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;        <span class="comment">// Reverse the path.</span></div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;        <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#abdb35321ad8dbbf8e1e00a1922661868">lastBestNode</a>);</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;        </div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#abdb35321ad8dbbf8e1e00a1922661868">lastBestNode</a>-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a> != <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a6d08b3de0dce784d8f8a6e3c6f7cd122">endRef</a>)</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;            <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a148e814fa33f723250cfa5236ed146a8">status</a> |= <a class="code" href="../../d8/de6/_detour_status_8h.html#a673010905b90e4928aeea1480ee58491">DT_PARTIAL_RESULT</a>;</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;        </div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;        <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* <a class="code" href="../../de/d0e/_recast_contour_8cpp.html#a6f1109916123abdff2b46675c13307e3">prev</a> = 0;</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;        <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* node = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#abdb35321ad8dbbf8e1e00a1922661868">lastBestNode</a>;</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;        <span class="keywordtype">int</span> prevRay = 0;</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;        <span class="keywordflow">do</span></div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;        {</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;            <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* <a class="code" href="../../de/d0e/_recast_contour_8cpp.html#af019d68006e1f2d7b24c8f09051424cc">next</a> = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a5f6d20bd49d338b03885909b0c13ccea">getNodeAtIdx</a>(node-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a>);</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;            node-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a> = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a5b223e8441b2d202fb1a18022228d6e1">getNodeIdx</a>(<a class="code" href="../../de/d0e/_recast_contour_8cpp.html#a6f1109916123abdff2b46675c13307e3">prev</a>);</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;            <a class="code" href="../../de/d0e/_recast_contour_8cpp.html#a6f1109916123abdff2b46675c13307e3">prev</a> = node;</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;            <span class="keywordtype">int</span> nextRay = node-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp; <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974acbfda68f4c9e956d9b2573521a5156e1">DT_NODE_PARENT_DETACHED</a>; <span class="comment">// keep track of whether parent is not adjacent (i.e. due to raycast shortcut)</span></div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;            node-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> = (node-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp; ~<a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974acbfda68f4c9e956d9b2573521a5156e1">DT_NODE_PARENT_DETACHED</a>) | prevRay; <span class="comment">// and store it in the reversed path&#39;s node</span></div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;            prevRay = nextRay;</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;            node = <a class="code" href="../../de/d0e/_recast_contour_8cpp.html#af019d68006e1f2d7b24c8f09051424cc">next</a>;</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;        }</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;        <span class="keywordflow">while</span> (node);</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;        </div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;        <span class="comment">// Store path</span></div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;        node = <a class="code" href="../../de/d0e/_recast_contour_8cpp.html#a6f1109916123abdff2b46675c13307e3">prev</a>;</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;        <span class="keywordflow">do</span></div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;        {</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;            <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* <a class="code" href="../../de/d0e/_recast_contour_8cpp.html#af019d68006e1f2d7b24c8f09051424cc">next</a> = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a5f6d20bd49d338b03885909b0c13ccea">getNodeAtIdx</a>(node-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a>);</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;            <a class="code" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> status = 0;</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;            <span class="keywordflow">if</span> (node-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp; <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974acbfda68f4c9e956d9b2573521a5156e1">DT_NODE_PARENT_DETACHED</a>)</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;            {</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;                <span class="keywordtype">float</span> t, normal[3];</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;                <span class="keywordtype">int</span> m;</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;                status = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a7509a4bf31a215f20478c5050ef25913">raycast</a>(node-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a>, node-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>, <a class="code" href="../../de/d0e/_recast_contour_8cpp.html#af019d68006e1f2d7b24c8f09051424cc">next</a>-&gt;pos, <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#aca699cf1a32f5300522f5df0ccdf64da">filter</a>, &amp;t, normal, path+n, &amp;m, maxPath-n);</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;                n += m;</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;                <span class="comment">// raycast ends on poly boundary and the path might include the next poly boundary.</span></div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;                <span class="keywordflow">if</span> (path[n-1] == <a class="code" href="../../de/d0e/_recast_contour_8cpp.html#af019d68006e1f2d7b24c8f09051424cc">next</a>-&gt;id)</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;                    n--; <span class="comment">// remove to avoid duplicates</span></div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;            }</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;            {</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;                path[n++] = node-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a>;</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;                <span class="keywordflow">if</span> (n &gt;= maxPath)</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;                    status = <a class="code" href="../../d8/de6/_detour_status_8h.html#a97c8292e3ce2ba0b63bfa4ca57de10af">DT_BUFFER_TOO_SMALL</a>;</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;            }</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160; </div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;            <span class="keywordflow">if</span> (status &amp; <a class="code" href="../../d8/de6/_detour_status_8h.html#a9ad48e73cb942b84fe08c5ad18626a54">DT_STATUS_DETAIL_MASK</a>)</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;            {</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;                <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a148e814fa33f723250cfa5236ed146a8">status</a> |= status &amp; <a class="code" href="../../d8/de6/_detour_status_8h.html#a9ad48e73cb942b84fe08c5ad18626a54">DT_STATUS_DETAIL_MASK</a>;</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;            }</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;            node = <a class="code" href="../../de/d0e/_recast_contour_8cpp.html#af019d68006e1f2d7b24c8f09051424cc">next</a>;</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;        }</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;        <span class="keywordflow">while</span> (node);</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;    }</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    </div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> details = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a148e814fa33f723250cfa5236ed146a8">status</a> &amp; <a class="code" href="../../d8/de6/_detour_status_8h.html#a9ad48e73cb942b84fe08c5ad18626a54">DT_STATUS_DETAIL_MASK</a>;</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160; </div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    <span class="comment">// Reset query.</span></div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    <a class="code" href="../../d6/dda/m__string_8h.html#af1756e67d46227b3333bc21a1fadd361">memset</a>(&amp;<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>, 0, <span class="keyword">sizeof</span>(dtQueryData));</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    </div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    *pathCount = n;</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    </div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a> | details;</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;}</div>
<div class="ttc" id="a_detour_node_8h_html_a2792299fd5fa6e50bb9c5d5b7dd12974acbfda68f4c9e956d9b2573521a5156e1"><div class="ttname"><a href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974acbfda68f4c9e956d9b2573521a5156e1">DT_NODE_PARENT_DETACHED</a></div><div class="ttdeci">@ DT_NODE_PARENT_DETACHED</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/_detour_node_8h_source.html#l00028">DetourNode.h:28</a></div></div>
<div class="ttc" id="a_detour_status_8h_html_a673010905b90e4928aeea1480ee58491"><div class="ttname"><a href="../../d8/de6/_detour_status_8h.html#a673010905b90e4928aeea1480ee58491">DT_PARTIAL_RESULT</a></div><div class="ttdeci">static const unsigned int DT_PARTIAL_RESULT</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de6/_detour_status_8h_source.html#l00037">DetourStatus.h:37</a></div></div>
<div class="ttc" id="a_detour_status_8h_html_a9ad48e73cb942b84fe08c5ad18626a54"><div class="ttname"><a href="../../d8/de6/_detour_status_8h.html#a9ad48e73cb942b84fe08c5ad18626a54">DT_STATUS_DETAIL_MASK</a></div><div class="ttdeci">static const unsigned int DT_STATUS_DETAIL_MASK</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de6/_detour_status_8h_source.html#l00030">DetourStatus.h:30</a></div></div>
<div class="ttc" id="a_recast_contour_8cpp_html_a6f1109916123abdff2b46675c13307e3"><div class="ttname"><a href="../../de/d0e/_recast_contour_8cpp.html#a6f1109916123abdff2b46675c13307e3">prev</a></div><div class="ttdeci">int prev(int i, int n)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d0e/_recast_contour_8cpp_source.html#l00468">RecastContour.cpp:468</a></div></div>
<div class="ttc" id="a_recast_contour_8cpp_html_af019d68006e1f2d7b24c8f09051424cc"><div class="ttname"><a href="../../de/d0e/_recast_contour_8cpp.html#af019d68006e1f2d7b24c8f09051424cc">next</a></div><div class="ttdeci">int next(int i, int n)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d0e/_recast_contour_8cpp_source.html#l00469">RecastContour.cpp:469</a></div></div>
<div class="ttc" id="aclassdt_nav_mesh_query_html_a7509a4bf31a215f20478c5050ef25913"><div class="ttname"><a href="../../dd/db0/classdt_nav_mesh_query.html#a7509a4bf31a215f20478c5050ef25913">dtNavMeshQuery::raycast</a></div><div class="ttdeci">dtStatus raycast(dtPolyRef startRef, const float *startPos, const float *endPos, const dtQueryFilter *filter, float *t, float *hitNormal, dtPolyRef *path, int *pathCount, const int maxPath) const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02381">DetourNavMeshQuery.cpp:2381</a></div></div>
<div class="ttc" id="aclassdt_node_pool_html_a5b223e8441b2d202fb1a18022228d6e1"><div class="ttname"><a href="../../d3/d3c/classdt_node_pool.html#a5b223e8441b2d202fb1a18022228d6e1">dtNodePool::getNodeIdx</a></div><div class="ttdeci">unsigned int getNodeIdx(const dtNode *node) const</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/_detour_node_8h_source.html#l00062">DetourNode.h:62</a></div></div>
<div class="ttc" id="aclassdt_node_pool_html_a5f6d20bd49d338b03885909b0c13ccea"><div class="ttname"><a href="../../d3/d3c/classdt_node_pool.html#a5f6d20bd49d338b03885909b0c13ccea">dtNodePool::getNodeAtIdx</a></div><div class="ttdeci">dtNode * getNodeAtIdx(unsigned int idx)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/_detour_node_8h_source.html#l00068">DetourNode.h:68</a></div></div>
<div class="ttc" id="astructdt_nav_mesh_query_1_1dt_query_data_html_a0ae05a1a363a1eb4a535835167b11e34"><div class="ttname"><a href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a0ae05a1a363a1eb4a535835167b11e34">dtNavMeshQuery::dtQueryData::startRef</a></div><div class="ttdeci">dtPolyRef startRef</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00550">DetourNavMeshQuery.h:550</a></div></div>
<div class="ttc" id="astructdt_nav_mesh_query_1_1dt_query_data_html_a148e814fa33f723250cfa5236ed146a8"><div class="ttname"><a href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a148e814fa33f723250cfa5236ed146a8">dtNavMeshQuery::dtQueryData::status</a></div><div class="ttdeci">dtStatus status</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00547">DetourNavMeshQuery.h:547</a></div></div>
<div class="ttc" id="astructdt_nav_mesh_query_1_1dt_query_data_html_a6d08b3de0dce784d8f8a6e3c6f7cd122"><div class="ttname"><a href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a6d08b3de0dce784d8f8a6e3c6f7cd122">dtNavMeshQuery::dtQueryData::endRef</a></div><div class="ttdeci">dtPolyRef endRef</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00550">DetourNavMeshQuery.h:550</a></div></div>
<div class="ttc" id="astructdt_nav_mesh_query_1_1dt_query_data_html_abdb35321ad8dbbf8e1e00a1922661868"><div class="ttname"><a href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#abdb35321ad8dbbf8e1e00a1922661868">dtNavMeshQuery::dtQueryData::lastBestNode</a></div><div class="ttdeci">struct dtNode * lastBestNode</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00548">DetourNavMeshQuery.h:548</a></div></div>
<div class="ttc" id="astructdt_nav_mesh_query_1_1dt_query_data_html_aca699cf1a32f5300522f5df0ccdf64da"><div class="ttname"><a href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#aca699cf1a32f5300522f5df0ccdf64da">dtNavMeshQuery::dtQueryData::filter</a></div><div class="ttdeci">const dtQueryFilter * filter</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00552">DetourNavMeshQuery.h:552</a></div></div>
<div class="ttc" id="astructdt_node_html"><div class="ttname"><a href="../../d7/de4/structdt_node.html">dtNode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/_detour_node_8h_source.html#l00036">DetourNode.h:37</a></div></div>
<div class="ttc" id="astructdt_node_html_a0ffc2be17daff1087e7d2920334eeb3d"><div class="ttname"><a href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">dtNode::id</a></div><div class="ttdeci">dtPolyRef id</div><div class="ttdoc">Polygon ref the node corresponds to.</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/_detour_node_8h_source.html#l00044">DetourNode.h:44</a></div></div>
<div class="ttc" id="astructdt_node_html_a2e6577134c6d533b9cc9914c38eb877d"><div class="ttname"><a href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">dtNode::pos</a></div><div class="ttdeci">float pos[3]</div><div class="ttdoc">Position of the node.</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/_detour_node_8h_source.html#l00038">DetourNode.h:38</a></div></div>
<div class="ttc" id="astructdt_node_html_acd018f188ced1765cce2d34ae88c9f75"><div class="ttname"><a href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">dtNode::flags</a></div><div class="ttdeci">unsigned int flags</div><div class="ttdoc">Node flags. A combination of dtNodeFlags.</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/_detour_node_8h_source.html#l00043">DetourNode.h:43</a></div></div>
<div class="ttc" id="astructdt_node_html_af9b33590451ca71942c251e140724d49"><div class="ttname"><a href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">dtNode::pidx</a></div><div class="ttdeci">unsigned int pidx</div><div class="ttdoc">Index to parent node.</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/_detour_node_8h_source.html#l00041">DetourNode.h:41</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00035">DT_BUFFER_TOO_SMALL</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00025">DT_FAILURE</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00034">DT_INVALID_PARAM</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00028">DT_NODE_PARENT_DETACHED</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00037">DT_PARTIAL_RESULT</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00030">DT_STATUS_DETAIL_MASK</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00026">DT_SUCCESS</a>, <a class="el" href="../../da/d60/_detour_assert_8h_source.html#l00047">dtAssert</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00048">dtStatusFailed()</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00550">dtNavMeshQuery::dtQueryData::endRef</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00552">dtNavMeshQuery::dtQueryData::filter</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00043">dtNode::flags</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00068">dtNodePool::getNodeAtIdx()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00062">dtNodePool::getNodeIdx()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00044">dtNode::id</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00548">dtNavMeshQuery::dtQueryData::lastBestNode</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00559">m_nodePool</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00556">m_query</a>, <a class="el" href="../../d6/dda/m__string_8h_source.html#l00051">memset</a>, <a class="el" href="../../de/d0e/_recast_contour_8cpp_source.html#l00469">next()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00041">dtNode::pidx</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00038">dtNode::pos</a>, <a class="el" href="../../de/d0e/_recast_contour_8cpp_source.html#l00468">prev()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02381">raycast()</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00550">dtNavMeshQuery::dtQueryData::startRef</a>, and <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00547">dtNavMeshQuery::dtQueryData::status</a>.</p>

</div>
</div>
<a id="a01b18dcb5d25fc392b6030ae5d4f310e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01b18dcb5d25fc392b6030ae5d4f310e">&#9670;&nbsp;</a></span>finalizeSlicedFindPathPartial()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> dtNavMeshQuery::finalizeSlicedFindPathPartial </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *&#160;</td>
          <td class="paramname"><em>existing</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int&#160;</td>
          <td class="paramname"><em>existingSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>pathCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int&#160;</td>
          <td class="paramname"><em>maxPath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Finalizes and returns the results of an incomplete sliced path query, returning the path to the furthest polygon on the existing path that was visited during the search. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">existing</td><td>An array of polygon references for the existing path. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">existingSize</td><td>The number of polygon in the <code>existing</code> array. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">path</td><td>An ordered list of polygon references representing the path. (Start to end.) [(polyRef) * <code>pathCount</code>] </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pathCount</td><td>The number of polygons returned in the <code>path</code> array. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">maxPath</td><td>The max number of polygons the <code>path</code> array can hold. [Limit: &gt;= 1] </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status flags for the query. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01560">1560</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;{</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    <span class="keywordflow">if</span> (!pathCount)</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160; </div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    *pathCount = 0;</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160; </div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    <span class="keywordflow">if</span> (!existing || existingSize &lt;= 0 || !path || !pathCount || maxPath &lt;= 0)</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    </div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/de6/_detour_status_8h.html#ab98b21afb80f30cc60a1f4e86ebc19d8">dtStatusFailed</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a148e814fa33f723250cfa5236ed146a8">status</a>))</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;    {</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;        <span class="comment">// Reset query.</span></div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;        <a class="code" href="../../d6/dda/m__string_8h.html#af1756e67d46227b3333bc21a1fadd361">memset</a>(&amp;<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>, 0, <span class="keyword">sizeof</span>(dtQueryData));</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a>;</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    }</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    </div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;    <span class="keywordtype">int</span> n = 0;</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    </div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a0ae05a1a363a1eb4a535835167b11e34">startRef</a> == <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a6d08b3de0dce784d8f8a6e3c6f7cd122">endRef</a>)</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;    {</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;        <span class="comment">// Special case: the search starts and ends at same poly.</span></div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;        path[n++] = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a0ae05a1a363a1eb4a535835167b11e34">startRef</a>;</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;    }</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    {</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;        <span class="comment">// Find furthest existing node that was visited.</span></div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;        <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* <a class="code" href="../../de/d0e/_recast_contour_8cpp.html#a6f1109916123abdff2b46675c13307e3">prev</a> = 0;</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;        <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* node = 0;</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = existingSize-1; i &gt;= 0; --i)</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;        {</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;            <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a5fa3decff570f26616282fcf50a3e7f9">findNodes</a>(existing[i], &amp;node, 1);</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;            <span class="keywordflow">if</span> (node)</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;        }</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;        </div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;        <span class="keywordflow">if</span> (!node)</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;        {</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;            <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a148e814fa33f723250cfa5236ed146a8">status</a> |= <a class="code" href="../../d8/de6/_detour_status_8h.html#a673010905b90e4928aeea1480ee58491">DT_PARTIAL_RESULT</a>;</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;            <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#abdb35321ad8dbbf8e1e00a1922661868">lastBestNode</a>);</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;            node = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#abdb35321ad8dbbf8e1e00a1922661868">lastBestNode</a>;</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;        }</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;        </div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;        <span class="comment">// Reverse the path.</span></div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;        <span class="keywordtype">int</span> prevRay = 0;</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;        <span class="keywordflow">do</span></div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;        {</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;            <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* <a class="code" href="../../de/d0e/_recast_contour_8cpp.html#af019d68006e1f2d7b24c8f09051424cc">next</a> = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a5f6d20bd49d338b03885909b0c13ccea">getNodeAtIdx</a>(node-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a>);</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;            node-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a> = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a5b223e8441b2d202fb1a18022228d6e1">getNodeIdx</a>(<a class="code" href="../../de/d0e/_recast_contour_8cpp.html#a6f1109916123abdff2b46675c13307e3">prev</a>);</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;            <a class="code" href="../../de/d0e/_recast_contour_8cpp.html#a6f1109916123abdff2b46675c13307e3">prev</a> = node;</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;            <span class="keywordtype">int</span> nextRay = node-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp; <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974acbfda68f4c9e956d9b2573521a5156e1">DT_NODE_PARENT_DETACHED</a>; <span class="comment">// keep track of whether parent is not adjacent (i.e. due to raycast shortcut)</span></div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;            node-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> = (node-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp; ~<a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974acbfda68f4c9e956d9b2573521a5156e1">DT_NODE_PARENT_DETACHED</a>) | prevRay; <span class="comment">// and store it in the reversed path&#39;s node</span></div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;            prevRay = nextRay;</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;            node = <a class="code" href="../../de/d0e/_recast_contour_8cpp.html#af019d68006e1f2d7b24c8f09051424cc">next</a>;</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;        }</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;        <span class="keywordflow">while</span> (node);</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;        </div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;        <span class="comment">// Store path</span></div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;        node = <a class="code" href="../../de/d0e/_recast_contour_8cpp.html#a6f1109916123abdff2b46675c13307e3">prev</a>;</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;        <span class="keywordflow">do</span></div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;        {</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;            <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* <a class="code" href="../../de/d0e/_recast_contour_8cpp.html#af019d68006e1f2d7b24c8f09051424cc">next</a> = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a5f6d20bd49d338b03885909b0c13ccea">getNodeAtIdx</a>(node-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a>);</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;            <a class="code" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> status = 0;</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;            <span class="keywordflow">if</span> (node-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp; <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974acbfda68f4c9e956d9b2573521a5156e1">DT_NODE_PARENT_DETACHED</a>)</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;            {</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;                <span class="keywordtype">float</span> t, normal[3];</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;                <span class="keywordtype">int</span> m;</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;                status = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a7509a4bf31a215f20478c5050ef25913">raycast</a>(node-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a>, node-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>, <a class="code" href="../../de/d0e/_recast_contour_8cpp.html#af019d68006e1f2d7b24c8f09051424cc">next</a>-&gt;pos, <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#aca699cf1a32f5300522f5df0ccdf64da">filter</a>, &amp;t, normal, path+n, &amp;m, maxPath-n);</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;                n += m;</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;                <span class="comment">// raycast ends on poly boundary and the path might include the next poly boundary.</span></div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;                <span class="keywordflow">if</span> (path[n-1] == <a class="code" href="../../de/d0e/_recast_contour_8cpp.html#af019d68006e1f2d7b24c8f09051424cc">next</a>-&gt;id)</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;                    n--; <span class="comment">// remove to avoid duplicates</span></div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;            }</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;            {</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;                path[n++] = node-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a>;</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;                <span class="keywordflow">if</span> (n &gt;= maxPath)</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;                    status = <a class="code" href="../../d8/de6/_detour_status_8h.html#a97c8292e3ce2ba0b63bfa4ca57de10af">DT_BUFFER_TOO_SMALL</a>;</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;            }</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160; </div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;            <span class="keywordflow">if</span> (status &amp; <a class="code" href="../../d8/de6/_detour_status_8h.html#a9ad48e73cb942b84fe08c5ad18626a54">DT_STATUS_DETAIL_MASK</a>)</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;            {</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;                <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a148e814fa33f723250cfa5236ed146a8">status</a> |= status &amp; <a class="code" href="../../d8/de6/_detour_status_8h.html#a9ad48e73cb942b84fe08c5ad18626a54">DT_STATUS_DETAIL_MASK</a>;</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;            }</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;            node = <a class="code" href="../../de/d0e/_recast_contour_8cpp.html#af019d68006e1f2d7b24c8f09051424cc">next</a>;</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;        }</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;        <span class="keywordflow">while</span> (node);</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;    }</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    </div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> details = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a148e814fa33f723250cfa5236ed146a8">status</a> &amp; <a class="code" href="../../d8/de6/_detour_status_8h.html#a9ad48e73cb942b84fe08c5ad18626a54">DT_STATUS_DETAIL_MASK</a>;</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160; </div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    <span class="comment">// Reset query.</span></div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    <a class="code" href="../../d6/dda/m__string_8h.html#af1756e67d46227b3333bc21a1fadd361">memset</a>(&amp;<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>, 0, <span class="keyword">sizeof</span>(dtQueryData));</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    </div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    *pathCount = n;</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    </div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a> | details;</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;}</div>
<div class="ttc" id="aclassdt_node_pool_html_a5fa3decff570f26616282fcf50a3e7f9"><div class="ttname"><a href="../../d3/d3c/classdt_node_pool.html#a5fa3decff570f26616282fcf50a3e7f9">dtNodePool::findNodes</a></div><div class="ttdeci">unsigned int findNodes(dtPolyRef id, dtNode **nodes, const int maxNodes)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d00/_detour_node_8cpp_source.html#l00089">DetourNode.cpp:89</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00035">DT_BUFFER_TOO_SMALL</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00025">DT_FAILURE</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00034">DT_INVALID_PARAM</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00028">DT_NODE_PARENT_DETACHED</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00037">DT_PARTIAL_RESULT</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00030">DT_STATUS_DETAIL_MASK</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00026">DT_SUCCESS</a>, <a class="el" href="../../da/d60/_detour_assert_8h_source.html#l00047">dtAssert</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00048">dtStatusFailed()</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00550">dtNavMeshQuery::dtQueryData::endRef</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00552">dtNavMeshQuery::dtQueryData::filter</a>, <a class="el" href="../../d1/d00/_detour_node_8cpp_source.html#l00089">dtNodePool::findNodes()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00043">dtNode::flags</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00068">dtNodePool::getNodeAtIdx()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00062">dtNodePool::getNodeIdx()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00044">dtNode::id</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00548">dtNavMeshQuery::dtQueryData::lastBestNode</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00559">m_nodePool</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00556">m_query</a>, <a class="el" href="../../d6/dda/m__string_8h_source.html#l00051">memset</a>, <a class="el" href="../../de/d0e/_recast_contour_8cpp_source.html#l00469">next()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00041">dtNode::pidx</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00038">dtNode::pos</a>, <a class="el" href="../../de/d0e/_recast_contour_8cpp_source.html#l00468">prev()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02381">raycast()</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00550">dtNavMeshQuery::dtQueryData::startRef</a>, and <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00547">dtNavMeshQuery::dtQueryData::status</a>.</p>

</div>
</div>
<a id="a1576a980ae29e44ad4809a25974fbd40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1576a980ae29e44ad4809a25974fbd40">&#9670;&nbsp;</a></span>findDistanceToWall()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> dtNavMeshQuery::findDistanceToWall </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a>&#160;</td>
          <td class="paramname"><em>startRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *&#160;</td>
          <td class="paramname"><em>centerPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float&#160;</td>
          <td class="paramname"><em>maxRadius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *&#160;</td>
          <td class="paramname"><em>filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>hitDist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>hitPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>hitNormal</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Finds the distance from the specified position to the nearest polygon wall. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">startRef</td><td>The reference id of the polygon containing <code>centerPos</code>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">centerPos</td><td>The center of the search circle. [(x, y, z)] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">maxRadius</td><td>The radius of the search circle. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filter</td><td>The polygon filter to apply to the query. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">hitDist</td><td>The distance to the nearest wall from <code>centerPos</code>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">hitPos</td><td>The nearest position on the wall that was hit. [(x, y, z)] </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">hitNormal</td><td>The normalized ray formed from the wall point to the source point. [(x, y, z)] </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status flags for the query.</dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<p><code>hitPos</code> is not adjusted using the height detail data.</p>
<p><code>hitDist</code> will equal the search radius if there is no wall within the radius. In this case the values of <code>hitPos</code> and <code>hitNormal</code> are undefined.</p>
<p>The normal will become unpredicable if <code>hitDist</code> is a very small number. </p>

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l03443">3443</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;{</div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>);</div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>);</div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>);</div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;    </div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;    <span class="comment">// Validate input</span></div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a84ce3e44a2a97c5377b3b308825fcd37">isValidPolyRef</a>(startRef) ||</div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;        !<a class="code" href="../../df/df3/boss__blood__queen__lana__thel_8cpp.html#a2993b3b195b6880d2cbc3cdf7215a56a">centerPos</a> || !<a class="code" href="../../dc/d41/_detour_common_8h.html#a1de203d55d933ccaa2ae9f3e126f4e63">dtVisfinite</a>(<a class="code" href="../../df/df3/boss__blood__queen__lana__thel_8cpp.html#a2993b3b195b6880d2cbc3cdf7215a56a">centerPos</a>) ||</div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;        maxRadius &lt; 0 || !<a class="code" href="../../d0/d5c/_detour_math_8h.html#aada58cd45766fc2aa5c722315d5ba04c">dtMathIsfinite</a>(maxRadius) ||</div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;        !filter || !hitDist || !hitPos || !hitNormal)</div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;    {</div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;    }</div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;    </div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a4341af64b1f043b2775b7f1abae34d7b">clear</a>();</div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#aa0f83a0d1f38b0b97fb549d1372c8be7">clear</a>();</div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;    </div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;    <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* startNode = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a9642659acf1f7fbfcd408b4c3da8a885">getNode</a>(startRef);</div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;    <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>, <a class="code" href="../../df/df3/boss__blood__queen__lana__thel_8cpp.html#a2993b3b195b6880d2cbc3cdf7215a56a">centerPos</a>);</div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a> = 0;</div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a253defdaa9ea8dbe9ea5991bcfb75b32">cost</a> = 0;</div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#aed27a8d0170505d1dba0cd3201bc6536">total</a> = 0;</div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a> = startRef;</div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> = <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974a792e67a3226f80ca54332bcbdac1c1c9">DT_NODE_OPEN</a>;</div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a76d83f497e1a5bcf72a6cc902a696a2a">push</a>(startNode);</div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;    </div>
<div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;    <span class="keywordtype">float</span> radiusSqr = <a class="code" href="../../dc/d41/_detour_common_8h.html#af0a088077730ad6995ce4d82093588cc">dtSqr</a>(maxRadius);</div>
<div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;    </div>
<div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;    <a class="code" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> status = <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a>;</div>
<div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;    </div>
<div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;    <span class="keywordflow">while</span> (!<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a15693f0c97c5d9a32cd0302cdcafd27c">empty</a>())</div>
<div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;    {</div>
<div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;        <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* bestNode = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a4fa10be8cbf65dcdf2284f18a3e949d3">pop</a>();</div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;        bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp;= ~<a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974a792e67a3226f80ca54332bcbdac1c1c9">DT_NODE_OPEN</a>;</div>
<div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;        bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> |= <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974aa9a4b8aa94ba18584fa07b2d8ad9aac2">DT_NODE_CLOSED</a>;</div>
<div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;        </div>
<div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;        <span class="comment">// Get poly and tile.</span></div>
<div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;        <span class="comment">// The API input has been cheked already, skip checking internal data.</span></div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> bestRef = bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a>;</div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* bestTile = 0;</div>
<div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* bestPoly = 0;</div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;        <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#ac5c5b89a6af63b7de29089ae83091e0f">getTileAndPolyByRefUnsafe</a>(bestRef, &amp;bestTile, &amp;bestPoly);</div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;        </div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;        <span class="comment">// Get parent poly and tile.</span></div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;        <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> parentRef = 0;</div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* parentTile = 0;</div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* parentPoly = 0;</div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;        <span class="keywordflow">if</span> (bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a>)</div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;            parentRef = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a5f6d20bd49d338b03885909b0c13ccea">getNodeAtIdx</a>(bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a>)-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a>;</div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;        <span class="keywordflow">if</span> (parentRef)</div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;            <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#ac5c5b89a6af63b7de29089ae83091e0f">getTileAndPolyByRefUnsafe</a>(parentRef, &amp;parentTile, &amp;parentPoly);</div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;        </div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;        <span class="comment">// Hit test walls.</span></div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0, j = (<span class="keywordtype">int</span>)bestPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#af940c431464c022f844e61130f83d9c2">vertCount</a>-1; i &lt; (<span class="keywordtype">int</span>)bestPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#af940c431464c022f844e61130f83d9c2">vertCount</a>; j = i++)</div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;        {</div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;            <span class="comment">// Skip non-solid edges.</span></div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;            <span class="keywordflow">if</span> (bestPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#ac4f5aa32df32aa5b1385f76f697376af">neis</a>[j] &amp; <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#aa2d400dcfaef68b62c1f1118de13e87e">DT_EXT_LINK</a>)</div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;            {</div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;                <span class="comment">// Tile border.</span></div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;                <span class="keywordtype">bool</span> solid = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k = bestPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#a671fd6893087936e80fcd17f7f666c0e">firstLink</a>; k != <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#aca31b5eadafd19285e16eca707b3295b">DT_NULL_LINK</a>; k = bestTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[k].<a class="code" href="../../df/d2d/structdt_link.html#a475b893f03bf4c942ab6376d83dca82e">next</a>)</div>
<div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;                {</div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;                    <span class="keyword">const</span> <a class="code" href="../../df/d2d/structdt_link.html">dtLink</a>* <a class="code" href="../../dd/d95/structlink.html">link</a> = &amp;bestTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[k];</div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;edge == j)</div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;                    {</div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;ref != 0)</div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;                        {</div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;                            <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* neiTile = 0;</div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;                            <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* neiPoly = 0;</div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;                            <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#ac5c5b89a6af63b7de29089ae83091e0f">getTileAndPolyByRefUnsafe</a>(<a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;ref, &amp;neiTile, &amp;neiPoly);</div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;                            <span class="keywordflow">if</span> (filter-&gt;<a class="code" href="../../d3/d5f/classdt_query_filter.html#aaf072b8617dfbd4701a8e07f0f10be9c">passFilter</a>(<a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;ref, neiTile, neiPoly))</div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;                                solid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;                        }</div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;                    }</div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;                }</div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;                <span class="keywordflow">if</span> (!solid) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;            }</div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bestPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#ac4f5aa32df32aa5b1385f76f697376af">neis</a>[j])</div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;            {</div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;                <span class="comment">// Internal edge</span></div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../de/d17/lf_8h.html#a359b2d783027136786cee9f243efcbde">idx</a> = (<span class="keywordtype">unsigned</span> int)(bestPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#ac4f5aa32df32aa5b1385f76f697376af">neis</a>[j]-1);</div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;                <span class="keyword">const</span> <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> ref = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a0741871ed1357c51e3847f22673fcc9c">getPolyRefBase</a>(bestTile) | <a class="code" href="../../de/d17/lf_8h.html#a359b2d783027136786cee9f243efcbde">idx</a>;</div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;                <span class="keywordflow">if</span> (filter-&gt;<a class="code" href="../../d3/d5f/classdt_query_filter.html#aaf072b8617dfbd4701a8e07f0f10be9c">passFilter</a>(ref, bestTile, &amp;bestTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abd8ed5dcf003464a7d8c456f671e6c1e">polys</a>[<a class="code" href="../../de/d17/lf_8h.html#a359b2d783027136786cee9f243efcbde">idx</a>]))</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;            }</div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;            </div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;            <span class="comment">// Calc distance to the edge.</span></div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span>* vj = &amp;bestTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[bestPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[j]*3];</div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span>* vi = &amp;bestTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[bestPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[i]*3];</div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;            <span class="keywordtype">float</span> tseg;</div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;            <span class="keywordtype">float</span> distSqr = <a class="code" href="../../dc/d41/_detour_common_8h.html#a99afe0b6e77a0c800e9582faea87cf6d">dtDistancePtSegSqr2D</a>(<a class="code" href="../../df/df3/boss__blood__queen__lana__thel_8cpp.html#a2993b3b195b6880d2cbc3cdf7215a56a">centerPos</a>, vj, vi, tseg);</div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;            </div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;            <span class="comment">// Edge is too far, skip.</span></div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;            <span class="keywordflow">if</span> (distSqr &gt; radiusSqr)</div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;            </div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;            <span class="comment">// Hit wall, update radius.</span></div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;            radiusSqr = distSqr;</div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;            <span class="comment">// Calculate hit pos.</span></div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;            hitPos[0] = vj[0] + (vi[0] - vj[0])*tseg;</div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;            hitPos[1] = vj[1] + (vi[1] - vj[1])*tseg;</div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;            hitPos[2] = vj[2] + (vi[2] - vj[2])*tseg;</div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;        }</div>
<div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;        </div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = bestPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#a671fd6893087936e80fcd17f7f666c0e">firstLink</a>; i != <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#aca31b5eadafd19285e16eca707b3295b">DT_NULL_LINK</a>; i = bestTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[i].<a class="code" href="../../df/d2d/structdt_link.html#a475b893f03bf4c942ab6376d83dca82e">next</a>)</div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;        {</div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;            <span class="keyword">const</span> <a class="code" href="../../df/d2d/structdt_link.html">dtLink</a>* <a class="code" href="../../dd/d95/structlink.html">link</a> = &amp;bestTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[i];</div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;            <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> neighbourRef = <a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;ref;</div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;            <span class="comment">// Skip invalid neighbours and do not follow back to parent.</span></div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;            <span class="keywordflow">if</span> (!neighbourRef || neighbourRef == parentRef)</div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;            </div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;            <span class="comment">// Expand to neighbour.</span></div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;            <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* neighbourTile = 0;</div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;            <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* neighbourPoly = 0;</div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;            <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#ac5c5b89a6af63b7de29089ae83091e0f">getTileAndPolyByRefUnsafe</a>(neighbourRef, &amp;neighbourTile, &amp;neighbourPoly);</div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;            </div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;            <span class="comment">// Skip off-mesh connections.</span></div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;            <span class="keywordflow">if</span> (neighbourPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#a12a7d5dcd2f1d7164531be4ecb5f35a4">getType</a>() == <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#a19937b4ff098f7c52ee08af1b5f39c98a5454d6f0a19d046264f5305baa7ba858">DT_POLYTYPE_OFFMESH_CONNECTION</a>)</div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;            </div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;            <span class="comment">// Calc distance to the edge.</span></div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span>* va = &amp;bestTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[bestPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[<a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;edge]*3];</div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span>* vb = &amp;bestTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[bestPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[(<a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;edge+1) % bestPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#af940c431464c022f844e61130f83d9c2">vertCount</a>]*3];</div>
<div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;            <span class="keywordtype">float</span> tseg;</div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;            <span class="keywordtype">float</span> distSqr = <a class="code" href="../../dc/d41/_detour_common_8h.html#a99afe0b6e77a0c800e9582faea87cf6d">dtDistancePtSegSqr2D</a>(<a class="code" href="../../df/df3/boss__blood__queen__lana__thel_8cpp.html#a2993b3b195b6880d2cbc3cdf7215a56a">centerPos</a>, va, vb, tseg);</div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;            </div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;            <span class="comment">// If the circle is not touching the next polygon, skip it.</span></div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;            <span class="keywordflow">if</span> (distSqr &gt; radiusSqr)</div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;            </div>
<div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;            <span class="keywordflow">if</span> (!filter-&gt;<a class="code" href="../../d3/d5f/classdt_query_filter.html#aaf072b8617dfbd4701a8e07f0f10be9c">passFilter</a>(neighbourRef, neighbourTile, neighbourPoly))</div>
<div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160; </div>
<div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;            <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* neighbourNode = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a9642659acf1f7fbfcd408b4c3da8a885">getNode</a>(neighbourRef);</div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;            <span class="keywordflow">if</span> (!neighbourNode)</div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;            {</div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;                status |= <a class="code" href="../../d8/de6/_detour_status_8h.html#a0f707e8e896d9a725f8f93f5779cf02c">DT_OUT_OF_NODES</a>;</div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;            }</div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;            </div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;            <span class="keywordflow">if</span> (neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp; <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974aa9a4b8aa94ba18584fa07b2d8ad9aac2">DT_NODE_CLOSED</a>)</div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;            </div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;            <span class="comment">// Cost</span></div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;            <span class="keywordflow">if</span> (neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> == 0)</div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;            {</div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;                <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01e4c0b9bf01914da6f634b1a4953f45">getEdgeMidPoint</a>(bestRef, bestPoly, bestTile,</div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;                                neighbourRef, neighbourPoly, neighbourTile, neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>);</div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;            }</div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;            </div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> total = bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#aed27a8d0170505d1dba0cd3201bc6536">total</a> + <a class="code" href="../../dc/d41/_detour_common_8h.html#a000a4b437d73fd37c831c4bcbc3abb8d">dtVdist</a>(bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>, neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>);</div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;            </div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;            <span class="comment">// The node is already in open list and the new result is worse, skip.</span></div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;            <span class="keywordflow">if</span> ((neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp; <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974a792e67a3226f80ca54332bcbdac1c1c9">DT_NODE_OPEN</a>) &amp;&amp; total &gt;= neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#aed27a8d0170505d1dba0cd3201bc6536">total</a>)</div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;            </div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;            neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a> = neighbourRef;</div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;            neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> = (neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp; ~<a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974aa9a4b8aa94ba18584fa07b2d8ad9aac2">DT_NODE_CLOSED</a>);</div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;            neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a> = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a5b223e8441b2d202fb1a18022228d6e1">getNodeIdx</a>(bestNode);</div>
<div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;            neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#aed27a8d0170505d1dba0cd3201bc6536">total</a> = total;</div>
<div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;                </div>
<div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;            <span class="keywordflow">if</span> (neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp; <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974a792e67a3226f80ca54332bcbdac1c1c9">DT_NODE_OPEN</a>)</div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;            {</div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;                <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a8be783bde0911bdf92503a2e111f2a1a">modify</a>(neighbourNode);</div>
<div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;            }</div>
<div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;            {</div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;                neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> |= <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974a792e67a3226f80ca54332bcbdac1c1c9">DT_NODE_OPEN</a>;</div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;                <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a76d83f497e1a5bcf72a6cc902a696a2a">push</a>(neighbourNode);</div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;            }</div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;        }</div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;    }</div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;    </div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;    <span class="comment">// Calc hit normal.</span></div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;    <a class="code" href="../../dc/d41/_detour_common_8h.html#a8b3255050bf09f5459f3c575ba1574b4">dtVsub</a>(hitNormal, <a class="code" href="../../df/df3/boss__blood__queen__lana__thel_8cpp.html#a2993b3b195b6880d2cbc3cdf7215a56a">centerPos</a>, hitPos);</div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;    <a class="code" href="../../dc/d41/_detour_common_8h.html#a68f410fb499f25b1bf72ff4c6051cb3c">dtVnormalize</a>(hitNormal);</div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;    </div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;    *hitDist = sqrtf(radiusSqr);</div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;    </div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;    <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;}</div>
<div class="ttc" id="a_detour_common_8h_html_a000a4b437d73fd37c831c4bcbc3abb8d"><div class="ttname"><a href="../../dc/d41/_detour_common_8h.html#a000a4b437d73fd37c831c4bcbc3abb8d">dtVdist</a></div><div class="ttdeci">float dtVdist(const float *v1, const float *v2)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d41/_detour_common_8h_source.html#l00218">DetourCommon.h:218</a></div></div>
<div class="ttc" id="a_detour_common_8h_html_a68f410fb499f25b1bf72ff4c6051cb3c"><div class="ttname"><a href="../../dc/d41/_detour_common_8h.html#a68f410fb499f25b1bf72ff4c6051cb3c">dtVnormalize</a></div><div class="ttdeci">void dtVnormalize(float *v)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d41/_detour_common_8h_source.html#l00264">DetourCommon.h:264</a></div></div>
<div class="ttc" id="a_detour_common_8h_html_a8b3255050bf09f5459f3c575ba1574b4"><div class="ttname"><a href="../../dc/d41/_detour_common_8h.html#a8b3255050bf09f5459f3c575ba1574b4">dtVsub</a></div><div class="ttdeci">void dtVsub(float *dest, const float *v1, const float *v2)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d41/_detour_common_8h_source.html#l00140">DetourCommon.h:140</a></div></div>
<div class="ttc" id="a_detour_common_8h_html_a99afe0b6e77a0c800e9582faea87cf6d"><div class="ttname"><a href="../../dc/d41/_detour_common_8h.html#a99afe0b6e77a0c800e9582faea87cf6d">dtDistancePtSegSqr2D</a></div><div class="ttdeci">float dtDistancePtSegSqr2D(const float *pt, const float *p, const float *q, float &amp;t)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de1/_detour_common_8cpp_source.html#l00170">DetourCommon.cpp:170</a></div></div>
<div class="ttc" id="a_detour_common_8h_html_af0a088077730ad6995ce4d82093588cc"><div class="ttname"><a href="../../dc/d41/_detour_common_8h.html#af0a088077730ad6995ce4d82093588cc">dtSqr</a></div><div class="ttdeci">T dtSqr(T a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d41/_detour_common_8h_source.html#l00068">DetourCommon.h:68</a></div></div>
<div class="ttc" id="a_detour_math_8h_html_aada58cd45766fc2aa5c722315d5ba04c"><div class="ttname"><a href="../../d0/d5c/_detour_math_8h.html#aada58cd45766fc2aa5c722315d5ba04c">dtMathIsfinite</a></div><div class="ttdeci">bool dtMathIsfinite(float x)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/_detour_math_8h_source.html#l00022">DetourMath.h:22</a></div></div>
<div class="ttc" id="a_detour_nav_mesh_8h_html_a19937b4ff098f7c52ee08af1b5f39c98a5454d6f0a19d046264f5305baa7ba858"><div class="ttname"><a href="../../d1/ddd/_detour_nav_mesh_8h.html#a19937b4ff098f7c52ee08af1b5f39c98a5454d6f0a19d046264f5305baa7ba858">DT_POLYTYPE_OFFMESH_CONNECTION</a></div><div class="ttdeci">@ DT_POLYTYPE_OFFMESH_CONNECTION</div><div class="ttdoc">The polygon is an off-mesh connection consisting of two vertices.</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00161">DetourNavMesh.h:161</a></div></div>
<div class="ttc" id="a_detour_nav_mesh_8h_html_aa2d400dcfaef68b62c1f1118de13e87e"><div class="ttname"><a href="../../d1/ddd/_detour_nav_mesh_8h.html#aa2d400dcfaef68b62c1f1118de13e87e">DT_EXT_LINK</a></div><div class="ttdeci">static const unsigned short DT_EXT_LINK</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00097">DetourNavMesh.h:97</a></div></div>
<div class="ttc" id="a_detour_nav_mesh_8h_html_aca31b5eadafd19285e16eca707b3295b"><div class="ttname"><a href="../../d1/ddd/_detour_nav_mesh_8h.html#aca31b5eadafd19285e16eca707b3295b">DT_NULL_LINK</a></div><div class="ttdeci">static const unsigned int DT_NULL_LINK</div><div class="ttdoc">A value that indicates the entity does not link to anything.</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00100">DetourNavMesh.h:100</a></div></div>
<div class="ttc" id="a_detour_node_8h_html_a2792299fd5fa6e50bb9c5d5b7dd12974a792e67a3226f80ca54332bcbdac1c1c9"><div class="ttname"><a href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974a792e67a3226f80ca54332bcbdac1c1c9">DT_NODE_OPEN</a></div><div class="ttdeci">@ DT_NODE_OPEN</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/_detour_node_8h_source.html#l00026">DetourNode.h:26</a></div></div>
<div class="ttc" id="a_detour_node_8h_html_a2792299fd5fa6e50bb9c5d5b7dd12974aa9a4b8aa94ba18584fa07b2d8ad9aac2"><div class="ttname"><a href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974aa9a4b8aa94ba18584fa07b2d8ad9aac2">DT_NODE_CLOSED</a></div><div class="ttdeci">@ DT_NODE_CLOSED</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/_detour_node_8h_source.html#l00027">DetourNode.h:27</a></div></div>
<div class="ttc" id="a_detour_status_8h_html_a0f707e8e896d9a725f8f93f5779cf02c"><div class="ttname"><a href="../../d8/de6/_detour_status_8h.html#a0f707e8e896d9a725f8f93f5779cf02c">DT_OUT_OF_NODES</a></div><div class="ttdeci">static const unsigned int DT_OUT_OF_NODES</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de6/_detour_status_8h_source.html#l00036">DetourStatus.h:36</a></div></div>
<div class="ttc" id="aboss__blood__queen__lana__thel_8cpp_html_a2993b3b195b6880d2cbc3cdf7215a56a"><div class="ttname"><a href="../../df/df3/boss__blood__queen__lana__thel_8cpp.html#a2993b3b195b6880d2cbc3cdf7215a56a">centerPos</a></div><div class="ttdeci">Position const centerPos</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df3/boss__blood__queen__lana__thel_8cpp_source.html#l00131">boss_blood_queen_lana_thel.cpp:131</a></div></div>
<div class="ttc" id="aclassdt_nav_mesh_html_a0741871ed1357c51e3847f22673fcc9c"><div class="ttname"><a href="../../da/d16/classdt_nav_mesh.html#a0741871ed1357c51e3847f22673fcc9c">dtNavMesh::getPolyRefBase</a></div><div class="ttdeci">dtPolyRef getPolyRefBase(const dtMeshTile *tile) const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01349">DetourNavMesh.cpp:1349</a></div></div>
<div class="ttc" id="aclassdt_nav_mesh_html_ac5c5b89a6af63b7de29089ae83091e0f"><div class="ttname"><a href="../../da/d16/classdt_nav_mesh.html#ac5c5b89a6af63b7de29089ae83091e0f">dtNavMesh::getTileAndPolyByRefUnsafe</a></div><div class="ttdeci">void getTileAndPolyByRefUnsafe(const dtPolyRef ref, const dtMeshTile **tile, const dtPoly **poly) const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01208">DetourNavMesh.cpp:1208</a></div></div>
<div class="ttc" id="aclassdt_nav_mesh_query_html_a01e4c0b9bf01914da6f634b1a4953f45"><div class="ttname"><a href="../../dd/db0/classdt_nav_mesh_query.html#a01e4c0b9bf01914da6f634b1a4953f45">dtNavMeshQuery::getEdgeMidPoint</a></div><div class="ttdeci">dtStatus getEdgeMidPoint(dtPolyRef from, dtPolyRef to, float *mid) const</div><div class="ttdoc">Returns edge mid point between two polygons.</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02316">DetourNavMeshQuery.cpp:2316</a></div></div>
<div class="ttc" id="aclassdt_node_pool_html_a4341af64b1f043b2775b7f1abae34d7b"><div class="ttname"><a href="../../d3/d3c/classdt_node_pool.html#a4341af64b1f043b2775b7f1abae34d7b">dtNodePool::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d00/_detour_node_8cpp_source.html#l00083">DetourNode.cpp:83</a></div></div>
<div class="ttc" id="aclassdt_node_pool_html_a9642659acf1f7fbfcd408b4c3da8a885"><div class="ttname"><a href="../../d3/d3c/classdt_node_pool.html#a9642659acf1f7fbfcd408b4c3da8a885">dtNodePool::getNode</a></div><div class="ttdeci">dtNode * getNode(dtPolyRef id, unsigned char state=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d00/_detour_node_8cpp_source.html#l00121">DetourNode.cpp:121</a></div></div>
<div class="ttc" id="aclassdt_node_queue_html_a15693f0c97c5d9a32cd0302cdcafd27c"><div class="ttname"><a href="../../dc/d2a/classdt_node_queue.html#a15693f0c97c5d9a32cd0302cdcafd27c">dtNodeQueue::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/_detour_node_8h_source.html#l00144">DetourNode.h:144</a></div></div>
<div class="ttc" id="aclassdt_node_queue_html_a4fa10be8cbf65dcdf2284f18a3e949d3"><div class="ttname"><a href="../../dc/d2a/classdt_node_queue.html#a4fa10be8cbf65dcdf2284f18a3e949d3">dtNodeQueue::pop</a></div><div class="ttdeci">dtNode * pop()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/_detour_node_8h_source.html#l00118">DetourNode.h:118</a></div></div>
<div class="ttc" id="aclassdt_node_queue_html_a76d83f497e1a5bcf72a6cc902a696a2a"><div class="ttname"><a href="../../dc/d2a/classdt_node_queue.html#a76d83f497e1a5bcf72a6cc902a696a2a">dtNodeQueue::push</a></div><div class="ttdeci">void push(dtNode *node)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/_detour_node_8h_source.html#l00126">DetourNode.h:126</a></div></div>
<div class="ttc" id="aclassdt_node_queue_html_a8be783bde0911bdf92503a2e111f2a1a"><div class="ttname"><a href="../../dc/d2a/classdt_node_queue.html#a8be783bde0911bdf92503a2e111f2a1a">dtNodeQueue::modify</a></div><div class="ttdeci">void modify(dtNode *node)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/_detour_node_8h_source.html#l00132">DetourNode.h:132</a></div></div>
<div class="ttc" id="aclassdt_node_queue_html_aa0f83a0d1f38b0b97fb549d1372c8be7"><div class="ttname"><a href="../../dc/d2a/classdt_node_queue.html#aa0f83a0d1f38b0b97fb549d1372c8be7">dtNodeQueue::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/_detour_node_8h_source.html#l00114">DetourNode.h:114</a></div></div>
<div class="ttc" id="aclassdt_query_filter_html_aaf072b8617dfbd4701a8e07f0f10be9c"><div class="ttname"><a href="../../d3/d5f/classdt_query_filter.html#aaf072b8617dfbd4701a8e07f0f10be9c">dtQueryFilter::passFilter</a></div><div class="ttdeci">virtual bool passFilter(const dtPolyRef ref, const dtMeshTile *tile, const dtPoly *poly) const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00087">DetourNavMeshQuery.cpp:87</a></div></div>
<div class="ttc" id="alf_8h_html_a359b2d783027136786cee9f243efcbde"><div class="ttname"><a href="../../de/d17/lf_8h.html#a359b2d783027136786cee9f243efcbde">idx</a></div><div class="ttdeci">void LF_DYNARRAY uint idx</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d17/lf_8h_source.html#l00086">lf.h:86</a></div></div>
<div class="ttc" id="astructdt_link_html"><div class="ttname"><a href="../../df/d2d/structdt_link.html">dtLink</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00214">DetourNavMesh.h:215</a></div></div>
<div class="ttc" id="astructdt_link_html_a475b893f03bf4c942ab6376d83dca82e"><div class="ttname"><a href="../../df/d2d/structdt_link.html#a475b893f03bf4c942ab6376d83dca82e">dtLink::next</a></div><div class="ttdeci">unsigned int next</div><div class="ttdoc">Index of the next link.</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00217">DetourNavMesh.h:217</a></div></div>
<div class="ttc" id="astructdt_mesh_tile_html_a09ec6812e47b7e63f035abd0b7753554"><div class="ttname"><a href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">dtMeshTile::links</a></div><div class="ttdeci">dtLink * links</div><div class="ttdoc">The tile links. [Size: dtMeshHeader::maxLinkCount].</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00301">DetourNavMesh.h:301</a></div></div>
<div class="ttc" id="astructdt_mesh_tile_html_abd8ed5dcf003464a7d8c456f671e6c1e"><div class="ttname"><a href="../../d1/d1b/structdt_mesh_tile.html#abd8ed5dcf003464a7d8c456f671e6c1e">dtMeshTile::polys</a></div><div class="ttdeci">dtPoly * polys</div><div class="ttdoc">The tile polygons. [Size: dtMeshHeader::polyCount].</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00299">DetourNavMesh.h:299</a></div></div>
<div class="ttc" id="astructdt_node_html_a253defdaa9ea8dbe9ea5991bcfb75b32"><div class="ttname"><a href="../../d7/de4/structdt_node.html#a253defdaa9ea8dbe9ea5991bcfb75b32">dtNode::cost</a></div><div class="ttdeci">float cost</div><div class="ttdoc">Cost from previous node to current node.</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/_detour_node_8h_source.html#l00039">DetourNode.h:39</a></div></div>
<div class="ttc" id="astructdt_node_html_aed27a8d0170505d1dba0cd3201bc6536"><div class="ttname"><a href="../../d7/de4/structdt_node.html#aed27a8d0170505d1dba0cd3201bc6536">dtNode::total</a></div><div class="ttdeci">float total</div><div class="ttdoc">Cost up to the node.</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/_detour_node_8h_source.html#l00040">DetourNode.h:40</a></div></div>
<div class="ttc" id="astructdt_poly_html_a12a7d5dcd2f1d7164531be4ecb5f35a4"><div class="ttname"><a href="../../d5/d02/structdt_poly.html#a12a7d5dcd2f1d7164531be4ecb5f35a4">dtPoly::getType</a></div><div class="ttdeci">unsigned char getType() const</div><div class="ttdoc">Gets the polygon type. (See: dtPolyTypes)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00199">DetourNavMesh.h:199</a></div></div>
<div class="ttc" id="astructdt_poly_html_a671fd6893087936e80fcd17f7f666c0e"><div class="ttname"><a href="../../d5/d02/structdt_poly.html#a671fd6893087936e80fcd17f7f666c0e">dtPoly::firstLink</a></div><div class="ttdeci">unsigned int firstLink</div><div class="ttdoc">Index to first link in linked list. (Or DT_NULL_LINK if there is no link.)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00170">DetourNavMesh.h:170</a></div></div>
<div class="ttc" id="astructdt_poly_html_ac4f5aa32df32aa5b1385f76f697376af"><div class="ttname"><a href="../../d5/d02/structdt_poly.html#ac4f5aa32df32aa5b1385f76f697376af">dtPoly::neis</a></div><div class="ttdeci">unsigned short neis[DT_VERTS_PER_POLYGON]</div><div class="ttdoc">Packed data representing neighbor polygons references and flags for each edge.</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00177">DetourNavMesh.h:177</a></div></div>
<div class="ttc" id="astructlink_html"><div class="ttname"><a href="../../dd/d95/structlink.html">link</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d51/dbug_8c_source.html#l00192">dbug.c:192</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/df3/boss__blood__queen__lana__thel_8cpp_source.html#l00131">centerPos</a>, <a class="el" href="../../d1/d00/_detour_node_8cpp_source.html#l00083">dtNodePool::clear()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00114">dtNodeQueue::clear()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00039">dtNode::cost</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00097">DT_EXT_LINK</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00025">DT_FAILURE</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00034">DT_INVALID_PARAM</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00027">DT_NODE_CLOSED</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00026">DT_NODE_OPEN</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00100">DT_NULL_LINK</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00036">DT_OUT_OF_NODES</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00161">DT_POLYTYPE_OFFMESH_CONNECTION</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00026">DT_SUCCESS</a>, <a class="el" href="../../da/d60/_detour_assert_8h_source.html#l00047">dtAssert</a>, <a class="el" href="../../d5/de1/_detour_common_8cpp_source.html#l00170">dtDistancePtSegSqr2D()</a>, <a class="el" href="../../d0/d5c/_detour_math_8h_source.html#l00022">dtMathIsfinite()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00068">dtSqr()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00191">dtVcopy()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00218">dtVdist()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00290">dtVisfinite()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00264">dtVnormalize()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00140">dtVsub()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00144">dtNodeQueue::empty()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00170">dtPoly::firstLink</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00043">dtNode::flags</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02316">getEdgeMidPoint()</a>, <a class="el" href="../../d1/d00/_detour_node_8cpp_source.html#l00121">dtNodePool::getNode()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00068">dtNodePool::getNodeAtIdx()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00062">dtNodePool::getNodeIdx()</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01349">dtNavMesh::getPolyRefBase()</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01208">dtNavMesh::getTileAndPolyByRefUnsafe()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00199">dtPoly::getType()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00044">dtNode::id</a>, <a class="el" href="../../de/d17/lf_8h_source.html#l00086">idx</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01216">dtNavMesh::isValidPolyRef()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00301">dtMeshTile::links</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00543">m_nav</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00559">m_nodePool</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00560">m_openList</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00132">dtNodeQueue::modify()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00177">dtPoly::neis</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00217">dtLink::next</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00087">dtQueryFilter::passFilter()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00041">dtNode::pidx</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00299">dtMeshTile::polys</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00118">dtNodeQueue::pop()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00038">dtNode::pos</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00126">dtNodeQueue::push()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00040">dtNode::total</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00183">dtPoly::vertCount</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00174">dtPoly::verts</a>, and <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00300">dtMeshTile::verts</a>.</p>

</div>
</div>
<a id="a9864032da48ba6f1055deab90633ffd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9864032da48ba6f1055deab90633ffd6">&#9670;&nbsp;</a></span>findLocalNeighbourhood()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> dtNavMeshQuery::findLocalNeighbourhood </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a>&#160;</td>
          <td class="paramname"><em>startRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *&#160;</td>
          <td class="paramname"><em>centerPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float&#160;</td>
          <td class="paramname"><em>radius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *&#160;</td>
          <td class="paramname"><em>filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *&#160;</td>
          <td class="paramname"><em>resultRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *&#160;</td>
          <td class="paramname"><em>resultParent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>resultCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int&#160;</td>
          <td class="paramname"><em>maxResult</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Finds the non-overlapping navigation polygons in the local neighbourhood around the center position. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">startRef</td><td>The reference id of the polygon where the search starts. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">centerPos</td><td>The center of the query circle. [(x, y, z)] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">radius</td><td>The radius of the query circle. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filter</td><td>The polygon filter to apply to the query. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">resultRef</td><td>The reference ids of the polygons touched by the circle. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">resultParent</td><td>The reference ids of the parent polygons for each result. Zero if a result polygon has no parent. [opt] </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">resultCount</td><td>The number of polygons found. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">maxResult</td><td>The maximum number of polygons the result arrays can hold. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status flags for the query.</dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<p>This method is optimized for a small search radius and small number of result polygons.</p>
<p>Candidate polygons are found by searching the navigation graph beginning at the start polygon.</p>
<p>The same intersection test restrictions that apply to the findPolysAroundCircle mehtod applies to this method.</p>
<p>The value of the center point is used as the start point for cost calculations. It is not projected onto the surface of the mesh, so its y-value will effect the costs.</p>
<p>Intersection tests occur in 2D. All polygons and the search circle are projected onto the xz-plane. So the y-value of the center point does not effect intersection tests.</p>
<p>If the result arrays are is too small to hold the entire result set, they will be filled to capacity. </p>

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l03065">3065</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;{</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>);</div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a4a767464a8ed2c20954a69d26b5ac554">m_tinyNodePool</a>);</div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160; </div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;    <span class="keywordflow">if</span> (!resultCount)</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160; </div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;    *resultCount = 0;</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160; </div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a84ce3e44a2a97c5377b3b308825fcd37">isValidPolyRef</a>(startRef) ||</div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;        !<a class="code" href="../../df/df3/boss__blood__queen__lana__thel_8cpp.html#a2993b3b195b6880d2cbc3cdf7215a56a">centerPos</a> || !<a class="code" href="../../dc/d41/_detour_common_8h.html#a1de203d55d933ccaa2ae9f3e126f4e63">dtVisfinite</a>(<a class="code" href="../../df/df3/boss__blood__queen__lana__thel_8cpp.html#a2993b3b195b6880d2cbc3cdf7215a56a">centerPos</a>) ||</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;        radius &lt; 0 || !<a class="code" href="../../d0/d5c/_detour_math_8h.html#aada58cd45766fc2aa5c722315d5ba04c">dtMathIsfinite</a>(radius) ||</div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;        !filter || maxResult &lt; 0)</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;    {</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;    }</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160; </div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> MAX_STACK = 48;</div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;    <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* stack[MAX_STACK];</div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;    <span class="keywordtype">int</span> nstack = 0;</div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;    </div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a4a767464a8ed2c20954a69d26b5ac554">m_tinyNodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a4341af64b1f043b2775b7f1abae34d7b">clear</a>();</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;    </div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;    <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* startNode = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a4a767464a8ed2c20954a69d26b5ac554">m_tinyNodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a9642659acf1f7fbfcd408b4c3da8a885">getNode</a>(startRef);</div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a> = 0;</div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a> = startRef;</div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> = <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974aa9a4b8aa94ba18584fa07b2d8ad9aac2">DT_NODE_CLOSED</a>;</div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;    stack[nstack++] = startNode;</div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;    </div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> radiusSqr = <a class="code" href="../../dc/d41/_detour_common_8h.html#af0a088077730ad6995ce4d82093588cc">dtSqr</a>(radius);</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;    </div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;    <span class="keywordtype">float</span> pa[<a class="code" href="../../d5/d7a/group__detour.html#ga8591fdac662dbfabb580de626c64c9f3">DT_VERTS_PER_POLYGON</a>*3];</div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;    <span class="keywordtype">float</span> pb[<a class="code" href="../../d5/d7a/group__detour.html#ga8591fdac662dbfabb580de626c64c9f3">DT_VERTS_PER_POLYGON</a>*3];</div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;    </div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;    <a class="code" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> status = <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a>;</div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;    </div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;    <span class="keywordtype">int</span> n = 0;</div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;    <span class="keywordflow">if</span> (n &lt; maxResult)</div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;    {</div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;        resultRef[n] = startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a>;</div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;        <span class="keywordflow">if</span> (resultParent)</div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;            resultParent[n] = 0;</div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;        ++n;</div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;    }</div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;    {</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;        status |= <a class="code" href="../../d8/de6/_detour_status_8h.html#a97c8292e3ce2ba0b63bfa4ca57de10af">DT_BUFFER_TOO_SMALL</a>;</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;    }</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;    </div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;    <span class="keywordflow">while</span> (nstack)</div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;    {</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;        <span class="comment">// Pop front.</span></div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;        <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* curNode = stack[0];</div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; nstack-1; ++i)</div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;            stack[i] = stack[i+1];</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;        nstack--;</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;        </div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;        <span class="comment">// Get poly and tile.</span></div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;        <span class="comment">// The API input has been cheked already, skip checking internal data.</span></div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> curRef = curNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a>;</div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* curTile = 0;</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* curPoly = 0;</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;        <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#ac5c5b89a6af63b7de29089ae83091e0f">getTileAndPolyByRefUnsafe</a>(curRef, &amp;curTile, &amp;curPoly);</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;        </div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = curPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#a671fd6893087936e80fcd17f7f666c0e">firstLink</a>; i != <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#aca31b5eadafd19285e16eca707b3295b">DT_NULL_LINK</a>; i = curTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[i].<a class="code" href="../../df/d2d/structdt_link.html#a475b893f03bf4c942ab6376d83dca82e">next</a>)</div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;        {</div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;            <span class="keyword">const</span> <a class="code" href="../../df/d2d/structdt_link.html">dtLink</a>* <a class="code" href="../../dd/d95/structlink.html">link</a> = &amp;curTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[i];</div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;            <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> neighbourRef = <a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;ref;</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;            <span class="comment">// Skip invalid neighbours.</span></div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;            <span class="keywordflow">if</span> (!neighbourRef)</div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;            </div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;            <span class="comment">// Skip if cannot alloca more nodes.</span></div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;            <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* neighbourNode = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a4a767464a8ed2c20954a69d26b5ac554">m_tinyNodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a9642659acf1f7fbfcd408b4c3da8a885">getNode</a>(neighbourRef);</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;            <span class="keywordflow">if</span> (!neighbourNode)</div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;            <span class="comment">// Skip visited.</span></div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;            <span class="keywordflow">if</span> (neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp; <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974aa9a4b8aa94ba18584fa07b2d8ad9aac2">DT_NODE_CLOSED</a>)</div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;            </div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;            <span class="comment">// Expand to neighbour</span></div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;            <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* neighbourTile = 0;</div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;            <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* neighbourPoly = 0;</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;            <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#ac5c5b89a6af63b7de29089ae83091e0f">getTileAndPolyByRefUnsafe</a>(neighbourRef, &amp;neighbourTile, &amp;neighbourPoly);</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;            </div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;            <span class="comment">// Skip off-mesh connections.</span></div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;            <span class="keywordflow">if</span> (neighbourPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#a12a7d5dcd2f1d7164531be4ecb5f35a4">getType</a>() == <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#a19937b4ff098f7c52ee08af1b5f39c98a5454d6f0a19d046264f5305baa7ba858">DT_POLYTYPE_OFFMESH_CONNECTION</a>)</div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;            </div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;            <span class="comment">// Do not advance if the polygon is excluded by the filter.</span></div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;            <span class="keywordflow">if</span> (!filter-&gt;<a class="code" href="../../d3/d5f/classdt_query_filter.html#aaf072b8617dfbd4701a8e07f0f10be9c">passFilter</a>(neighbourRef, neighbourTile, neighbourPoly))</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;            </div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;            <span class="comment">// Find edge and calc distance to the edge.</span></div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;            <span class="keywordtype">float</span> va[3], vb[3];</div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a5e509b958aaca7ee5fe62ec59b034b4c">getPortalPoints</a>(curRef, curPoly, curTile, neighbourRef, neighbourPoly, neighbourTile, va, vb))</div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;            </div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;            <span class="comment">// If the circle is not touching the next polygon, skip it.</span></div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;            <span class="keywordtype">float</span> tseg;</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;            <span class="keywordtype">float</span> distSqr = <a class="code" href="../../dc/d41/_detour_common_8h.html#a99afe0b6e77a0c800e9582faea87cf6d">dtDistancePtSegSqr2D</a>(<a class="code" href="../../df/df3/boss__blood__queen__lana__thel_8cpp.html#a2993b3b195b6880d2cbc3cdf7215a56a">centerPos</a>, va, vb, tseg);</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;            <span class="keywordflow">if</span> (distSqr &gt; radiusSqr)</div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;            </div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;            <span class="comment">// Mark node visited, this is done before the overlap test so that</span></div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;            <span class="comment">// we will not visit the poly again if the test fails.</span></div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;            neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> |= <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974aa9a4b8aa94ba18584fa07b2d8ad9aac2">DT_NODE_CLOSED</a>;</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;            neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a> = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a4a767464a8ed2c20954a69d26b5ac554">m_tinyNodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a5b223e8441b2d202fb1a18022228d6e1">getNodeIdx</a>(curNode);</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;            </div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;            <span class="comment">// Check that the polygon does not collide with existing polygons.</span></div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;            </div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;            <span class="comment">// Collect vertices of the neighbour poly.</span></div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> npa = neighbourPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#af940c431464c022f844e61130f83d9c2">vertCount</a>;</div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; npa; ++k)</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;                <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(&amp;pa[k*3], &amp;neighbourTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[neighbourPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[k]*3]);</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;            </div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;            <span class="keywordtype">bool</span> overlap = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; n; ++j)</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;            {</div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;                <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> pastRef = resultRef[j];</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;                </div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;                <span class="comment">// Connected polys do not overlap.</span></div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;                <span class="keywordtype">bool</span> connected = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k = curPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#a671fd6893087936e80fcd17f7f666c0e">firstLink</a>; k != <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#aca31b5eadafd19285e16eca707b3295b">DT_NULL_LINK</a>; k = curTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[k].<a class="code" href="../../df/d2d/structdt_link.html#a475b893f03bf4c942ab6376d83dca82e">next</a>)</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;                {</div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;                    <span class="keywordflow">if</span> (curTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[k].<a class="code" href="../../df/d2d/structdt_link.html#a34c73193fed76de347adb0f2e9841659">ref</a> == pastRef)</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;                    {</div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;                        connected = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;                    }</div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;                }</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;                <span class="keywordflow">if</span> (connected)</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;                </div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;                <span class="comment">// Potentially overlapping.</span></div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;                <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* pastTile = 0;</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;                <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* pastPoly = 0;</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;                <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#ac5c5b89a6af63b7de29089ae83091e0f">getTileAndPolyByRefUnsafe</a>(pastRef, &amp;pastTile, &amp;pastPoly);</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;                </div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;                <span class="comment">// Get vertices and test overlap</span></div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> npb = pastPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#af940c431464c022f844e61130f83d9c2">vertCount</a>;</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; npb; ++k)</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;                    <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(&amp;pb[k*3], &amp;pastTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[pastPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[k]*3]);</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;                </div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../dc/d41/_detour_common_8h.html#a5eb3e9100fdc574add9a344030161dfa">dtOverlapPolyPoly2D</a>(pa,npa, pb,npb))</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;                {</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;                    overlap = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;                }</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;            }</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;            <span class="keywordflow">if</span> (overlap)</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;            </div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;            <span class="comment">// This poly is fine, store and advance to the poly.</span></div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;            <span class="keywordflow">if</span> (n &lt; maxResult)</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;            {</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;                resultRef[n] = neighbourRef;</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;                <span class="keywordflow">if</span> (resultParent)</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;                    resultParent[n] = curRef;</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;                ++n;</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;            }</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;            {</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;                status |= <a class="code" href="../../d8/de6/_detour_status_8h.html#a97c8292e3ce2ba0b63bfa4ca57de10af">DT_BUFFER_TOO_SMALL</a>;</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;            }</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;            </div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;            <span class="keywordflow">if</span> (nstack &lt; MAX_STACK)</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;            {</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;                stack[nstack++] = neighbourNode;</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;            }</div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;        }</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;    }</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;    </div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;    *resultCount = n;</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;    </div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;    <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;}</div>
<div class="ttc" id="a_detour_common_8h_html_a5eb3e9100fdc574add9a344030161dfa"><div class="ttname"><a href="../../dc/d41/_detour_common_8h.html#a5eb3e9100fdc574add9a344030161dfa">dtOverlapPolyPoly2D</a></div><div class="ttdeci">bool dtOverlapPolyPoly2D(const float *polya, const int npolya, const float *polyb, const int npolyb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de1/_detour_common_8cpp_source.html#l00294">DetourCommon.cpp:294</a></div></div>
<div class="ttc" id="astructdt_link_html_a34c73193fed76de347adb0f2e9841659"><div class="ttname"><a href="../../df/d2d/structdt_link.html#a34c73193fed76de347adb0f2e9841659">dtLink::ref</a></div><div class="ttdeci">dtPolyRef ref</div><div class="ttdoc">Neighbour reference. (The neighbor that is linked to.)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00216">DetourNavMesh.h:216</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/df3/boss__blood__queen__lana__thel_8cpp_source.html#l00131">centerPos</a>, <a class="el" href="../../d1/d00/_detour_node_8cpp_source.html#l00083">dtNodePool::clear()</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00035">DT_BUFFER_TOO_SMALL</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00025">DT_FAILURE</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00034">DT_INVALID_PARAM</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00027">DT_NODE_CLOSED</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00100">DT_NULL_LINK</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00161">DT_POLYTYPE_OFFMESH_CONNECTION</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00026">DT_SUCCESS</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00073">DT_VERTS_PER_POLYGON</a>, <a class="el" href="../../da/d60/_detour_assert_8h_source.html#l00047">dtAssert</a>, <a class="el" href="../../d5/de1/_detour_common_8cpp_source.html#l00170">dtDistancePtSegSqr2D()</a>, <a class="el" href="../../d0/d5c/_detour_math_8h_source.html#l00022">dtMathIsfinite()</a>, <a class="el" href="../../d5/de1/_detour_common_8cpp_source.html#l00294">dtOverlapPolyPoly2D()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00068">dtSqr()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00191">dtVcopy()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00290">dtVisfinite()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00170">dtPoly::firstLink</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00043">dtNode::flags</a>, <a class="el" href="../../d1/d00/_detour_node_8cpp_source.html#l00121">dtNodePool::getNode()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00062">dtNodePool::getNodeIdx()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02221">getPortalPoints()</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01208">dtNavMesh::getTileAndPolyByRefUnsafe()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00199">dtPoly::getType()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00044">dtNode::id</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01216">dtNavMesh::isValidPolyRef()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00301">dtMeshTile::links</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00543">m_nav</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00558">m_tinyNodePool</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00217">dtLink::next</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00087">dtQueryFilter::passFilter()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00041">dtNode::pidx</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00216">dtLink::ref</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00183">dtPoly::vertCount</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00174">dtPoly::verts</a>, and <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00300">dtMeshTile::verts</a>.</p>

</div>
</div>
<a id="a5317939092cb4b55fed4b0bb61afc74a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5317939092cb4b55fed4b0bb61afc74a">&#9670;&nbsp;</a></span>findNearestPoly()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> dtNavMeshQuery::findNearestPoly </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *&#160;</td>
          <td class="paramname"><em>center</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *&#160;</td>
          <td class="paramname"><em>halfExtents</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *&#160;</td>
          <td class="paramname"><em>filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *&#160;</td>
          <td class="paramname"><em>nearestRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>nearestPt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Finds the polygon nearest to the specified center point. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">center</td><td>The center of the search box. [(x, y, z)] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">halfExtents</td><td>The search distance along each axis. [(x, y, z)] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filter</td><td>The polygon filter to apply to the query. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">nearestRef</td><td>The reference id of the nearest polygon. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">nearestPt</td><td>The nearest point on the polygon. [opt] [(x, y, z)] </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status flags for the query.</dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<dl class="section note"><dt>Note</dt><dd>If the search box does not intersect any polygons the search will return <a class="el" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a>, but <code>nearestRef</code> will be zero. So if in doubt, check <code>nearestRef</code> before using <code>nearestPt</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00686">686</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;{</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>);</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160; </div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="keywordflow">if</span> (!nearestRef)</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160; </div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="comment">// queryPolygons below will check rest of params</span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    </div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <a class="code" href="../../d3/d8a/classdt_find_nearest_poly_query.html">dtFindNearestPolyQuery</a> query(<span class="keyword">this</span>, <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a522cfe706bd4170b4fded79ff55e4bc4">center</a>);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160; </div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <a class="code" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> status = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a06e46d57afad3f07380d82bb8d4a6720">queryPolygons</a>(<a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a522cfe706bd4170b4fded79ff55e4bc4">center</a>, halfExtents, filter, &amp;query);</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/de6/_detour_status_8h.html#ab98b21afb80f30cc60a1f4e86ebc19d8">dtStatusFailed</a>(status))</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160; </div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    *nearestRef = query.nearestRef();</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="comment">// Only override nearestPt if we actually found a poly so the nearest point</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <span class="comment">// is valid.</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="keywordflow">if</span> (nearestPt &amp;&amp; *nearestRef)</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(nearestPt, query.nearestPoint());</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    </div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a>;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;}</div>
<div class="ttc" id="aclassdt_find_nearest_poly_query_html"><div class="ttname"><a href="../../d3/d8a/classdt_find_nearest_poly_query.html">dtFindNearestPolyQuery</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00626">DetourNavMeshQuery.cpp:627</a></div></div>
<div class="ttc" id="aclassdt_nav_mesh_query_html_a06e46d57afad3f07380d82bb8d4a6720"><div class="ttname"><a href="../../dd/db0/classdt_nav_mesh_query.html#a06e46d57afad3f07380d82bb8d4a6720">dtNavMeshQuery::queryPolygons</a></div><div class="ttdeci">dtStatus queryPolygons(const float *center, const float *halfExtents, const dtQueryFilter *filter, dtPolyRef *polys, int *polyCount, const int maxPolys) const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00872">DetourNavMeshQuery.cpp:872</a></div></div>
<div class="ttc" id="anamespacealign_html_aff2772e23f6ac91520e57d4b3ac0c759a522cfe706bd4170b4fded79ff55e4bc4"><div class="ttname"><a href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a522cfe706bd4170b4fded79ff55e4bc4">align::center</a></div><div class="ttdeci">@ center</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d71/fmt_2include_2fmt_2core_8h_source.html#l01859">core.h:1859</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/d71/fmt_2include_2fmt_2core_8h_source.html#l01859">align::center</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00025">DT_FAILURE</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00034">DT_INVALID_PARAM</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00026">DT_SUCCESS</a>, <a class="el" href="../../da/d60/_detour_assert_8h_source.html#l00047">dtAssert</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00048">dtStatusFailed()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00191">dtVcopy()</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00543">m_nav</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00641">dtFindNearestPolyQuery::nearestPoint()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00640">dtFindNearestPolyQuery::nearestRef()</a>, and <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00872">queryPolygons()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/server_2game_2_movement_2_movement_generators_2_path_generator_8cpp_source.html#l00127">PathGenerator::GetPolyByLocation()</a>, <a class="el" href="../../d9/d51/cs__mmaps_8cpp_source.html#l00125">mmaps_commandscript::HandleMmapLocCommand()</a>, and <a class="el" href="../../d2/d4a/_mesh_extractor_8cpp_source.html#l00363">main()</a>.</p>

</div>
</div>
<a id="a9d86502949fcd4f96ffd350d4ef69e3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d86502949fcd4f96ffd350d4ef69e3c">&#9670;&nbsp;</a></span>findPath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> dtNavMeshQuery::findPath </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a>&#160;</td>
          <td class="paramname"><em>startRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a>&#160;</td>
          <td class="paramname"><em>endRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *&#160;</td>
          <td class="paramname"><em>startPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *&#160;</td>
          <td class="paramname"><em>endPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *&#160;</td>
          <td class="paramname"><em>filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>pathCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int&#160;</td>
          <td class="paramname"><em>maxPath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Finds a path from the start polygon to the end polygon. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">startRef</td><td>The refrence id of the start polygon. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">endRef</td><td>The reference id of the end polygon. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">startPos</td><td>A position within the start polygon. [(x, y, z)] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">endPos</td><td>A position within the end polygon. [(x, y, z)] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filter</td><td>The polygon filter to apply to the query. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">path</td><td>An ordered list of polygon references representing the path. (Start to end.) [(polyRef) * <code>pathCount</code>] </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pathCount</td><td>The number of polygons returned in the <code>path</code> array. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">maxPath</td><td>The maximum number of polygons the <code>path</code> array can hold. [Limit: &gt;= 1]</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<p>If the end polygon cannot be reached through the navigation graph, the last polygon in the path will be the nearest the end polygon.</p>
<p>If the path array is to small to hold the full result, it will be filled as far as possible from the start polygon toward the end polygon.</p>
<p>The start and end positions are used to calculate traversal costs. (The y-values impact the result.) </p>

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00946">946</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;{</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>);</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>);</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>);</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160; </div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <span class="keywordflow">if</span> (!pathCount)</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160; </div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    *pathCount = 0;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    </div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <span class="comment">// Validate input</span></div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a84ce3e44a2a97c5377b3b308825fcd37">isValidPolyRef</a>(startRef) || !<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a84ce3e44a2a97c5377b3b308825fcd37">isValidPolyRef</a>(endRef) ||</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;        !startPos || !<a class="code" href="../../dc/d41/_detour_common_8h.html#a1de203d55d933ccaa2ae9f3e126f4e63">dtVisfinite</a>(startPos) ||</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        !endPos || !<a class="code" href="../../dc/d41/_detour_common_8h.html#a1de203d55d933ccaa2ae9f3e126f4e63">dtVisfinite</a>(endPos) ||</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        !filter || !path || maxPath &lt;= 0)</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    {</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    }</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160; </div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <span class="keywordflow">if</span> (startRef == endRef)</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    {</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        path[0] = startRef;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        *pathCount = 1;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a>;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    }</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    </div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a4341af64b1f043b2775b7f1abae34d7b">clear</a>();</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#aa0f83a0d1f38b0b97fb549d1372c8be7">clear</a>();</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    </div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* startNode = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a9642659acf1f7fbfcd408b4c3da8a885">getNode</a>(startRef);</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>, startPos);</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a> = 0;</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a253defdaa9ea8dbe9ea5991bcfb75b32">cost</a> = 0;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#aed27a8d0170505d1dba0cd3201bc6536">total</a> = <a class="code" href="../../dc/d41/_detour_common_8h.html#a000a4b437d73fd37c831c4bcbc3abb8d">dtVdist</a>(startPos, endPos) * <a class="code" href="../../de/de4/_detour_nav_mesh_query_8cpp.html#a691377deb83853ca02735f394ccf0a30">H_SCALE</a>;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a> = startRef;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> = <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974a792e67a3226f80ca54332bcbdac1c1c9">DT_NODE_OPEN</a>;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a76d83f497e1a5bcf72a6cc902a696a2a">push</a>(startNode);</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    </div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* lastBestNode = startNode;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <span class="keywordtype">float</span> lastBestNodeCost = startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#aed27a8d0170505d1dba0cd3201bc6536">total</a>;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    </div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <span class="keywordtype">bool</span> outOfNodes = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    </div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    <span class="keywordflow">while</span> (!<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a15693f0c97c5d9a32cd0302cdcafd27c">empty</a>())</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    {</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        <span class="comment">// Remove node from open list and put it in closed list.</span></div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* bestNode = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a4fa10be8cbf65dcdf2284f18a3e949d3">pop</a>();</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;        bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp;= ~<a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974a792e67a3226f80ca54332bcbdac1c1c9">DT_NODE_OPEN</a>;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> |= <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974aa9a4b8aa94ba18584fa07b2d8ad9aac2">DT_NODE_CLOSED</a>;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        </div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        <span class="comment">// Reached the goal, stop searching.</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;        <span class="keywordflow">if</span> (bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a> == endRef)</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;        {</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;            lastBestNode = bestNode;</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        }</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        </div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;        <span class="comment">// Get current poly and tile.</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;        <span class="comment">// The API input has been cheked already, skip checking internal data.</span></div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> bestRef = bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a>;</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* bestTile = 0;</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* bestPoly = 0;</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#ac5c5b89a6af63b7de29089ae83091e0f">getTileAndPolyByRefUnsafe</a>(bestRef, &amp;bestTile, &amp;bestPoly);</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        </div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;        <span class="comment">// Get parent poly and tile.</span></div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;        <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> parentRef = 0;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* parentTile = 0;</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* parentPoly = 0;</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        <span class="keywordflow">if</span> (bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a>)</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;            parentRef = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a5f6d20bd49d338b03885909b0c13ccea">getNodeAtIdx</a>(bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a>)-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a>;</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;        <span class="keywordflow">if</span> (parentRef)</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;            <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#ac5c5b89a6af63b7de29089ae83091e0f">getTileAndPolyByRefUnsafe</a>(parentRef, &amp;parentTile, &amp;parentPoly);</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        </div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = bestPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#a671fd6893087936e80fcd17f7f666c0e">firstLink</a>; i != <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#aca31b5eadafd19285e16eca707b3295b">DT_NULL_LINK</a>; i = bestTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[i].<a class="code" href="../../df/d2d/structdt_link.html#a475b893f03bf4c942ab6376d83dca82e">next</a>)</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        {</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;            <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> neighbourRef = bestTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[i].<a class="code" href="../../df/d2d/structdt_link.html#a34c73193fed76de347adb0f2e9841659">ref</a>;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;            </div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;            <span class="comment">// Skip invalid ids and do not expand back to where we came from.</span></div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;            <span class="keywordflow">if</span> (!neighbourRef || neighbourRef == parentRef)</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;            </div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;            <span class="comment">// Get neighbour poly and tile.</span></div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;            <span class="comment">// The API input has been cheked already, skip checking internal data.</span></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;            <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* neighbourTile = 0;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;            <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* neighbourPoly = 0;</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;            <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#ac5c5b89a6af63b7de29089ae83091e0f">getTileAndPolyByRefUnsafe</a>(neighbourRef, &amp;neighbourTile, &amp;neighbourPoly);         </div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            </div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;            <span class="keywordflow">if</span> (!filter-&gt;<a class="code" href="../../d3/d5f/classdt_query_filter.html#aaf072b8617dfbd4701a8e07f0f10be9c">passFilter</a>(neighbourRef, neighbourTile, neighbourPoly))</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160; </div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;            <span class="comment">// deal explicitly with crossing tile boundaries</span></div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> crossSide = 0;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;            <span class="keywordflow">if</span> (bestTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[i].<a class="code" href="../../df/d2d/structdt_link.html#a62d34d0e6350fe9790e91ec287bc1423">side</a> != 0xff)</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;                crossSide = bestTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[i].<a class="code" href="../../df/d2d/structdt_link.html#a62d34d0e6350fe9790e91ec287bc1423">side</a> &gt;&gt; 1;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160; </div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;            <span class="comment">// get the node</span></div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;            <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* neighbourNode = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a9642659acf1f7fbfcd408b4c3da8a885">getNode</a>(neighbourRef, crossSide);</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;            <span class="keywordflow">if</span> (!neighbourNode)</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;            {</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                outOfNodes = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;            }</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;            </div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;            <span class="comment">// If the node is visited the first time, calculate node position.</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;            <span class="keywordflow">if</span> (neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> == 0)</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;            {</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;                <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01e4c0b9bf01914da6f634b1a4953f45">getEdgeMidPoint</a>(bestRef, bestPoly, bestTile,</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;                                neighbourRef, neighbourPoly, neighbourTile,</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;                                neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>);</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;            }</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160; </div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;            <span class="comment">// Calculate cost and heuristic.</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;            <span class="keywordtype">float</span> cost = 0;</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;            <span class="keywordtype">float</span> heuristic = 0;</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;            </div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;            <span class="comment">// Special case for last node.</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;            <span class="keywordflow">if</span> (neighbourRef == endRef)</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;            {</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                <span class="comment">// Cost</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">float</span> curCost = filter-&gt;<a class="code" href="../../d3/d5f/classdt_query_filter.html#a11d016505b732a1a013c3771a4157dea">getCost</a>(bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>, neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>,</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;                                                      parentRef, parentTile, parentPoly,</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;                                                      bestRef, bestTile, bestPoly,</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;                                                      neighbourRef, neighbourTile, neighbourPoly);</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">float</span> endCost = filter-&gt;<a class="code" href="../../d3/d5f/classdt_query_filter.html#a11d016505b732a1a013c3771a4157dea">getCost</a>(neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>, endPos,</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;                                                      bestRef, bestTile, bestPoly,</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;                                                      neighbourRef, neighbourTile, neighbourPoly,</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;                                                      0, 0, 0);</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;                </div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;                cost = bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a253defdaa9ea8dbe9ea5991bcfb75b32">cost</a> + curCost + endCost;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;                heuristic = 0;</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;            }</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;            {</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;                <span class="comment">// Cost</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">float</span> curCost = filter-&gt;<a class="code" href="../../d3/d5f/classdt_query_filter.html#a11d016505b732a1a013c3771a4157dea">getCost</a>(bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>, neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>,</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                                                      parentRef, parentTile, parentPoly,</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;                                                      bestRef, bestTile, bestPoly,</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                                                      neighbourRef, neighbourTile, neighbourPoly);</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                cost = bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a253defdaa9ea8dbe9ea5991bcfb75b32">cost</a> + curCost;</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                heuristic = <a class="code" href="../../dc/d41/_detour_common_8h.html#a000a4b437d73fd37c831c4bcbc3abb8d">dtVdist</a>(neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>, endPos)*<a class="code" href="../../de/de4/_detour_nav_mesh_query_8cpp.html#a691377deb83853ca02735f394ccf0a30">H_SCALE</a>;</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;            }</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160; </div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> total = cost + heuristic;</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;            </div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;            <span class="comment">// The node is already in open list and the new result is worse, skip.</span></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;            <span class="keywordflow">if</span> ((neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp; <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974a792e67a3226f80ca54332bcbdac1c1c9">DT_NODE_OPEN</a>) &amp;&amp; total &gt;= neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#aed27a8d0170505d1dba0cd3201bc6536">total</a>)</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;            <span class="comment">// The node is already visited and process, and the new result is worse, skip.</span></div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;            <span class="keywordflow">if</span> ((neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp; <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974aa9a4b8aa94ba18584fa07b2d8ad9aac2">DT_NODE_CLOSED</a>) &amp;&amp; total &gt;= neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#aed27a8d0170505d1dba0cd3201bc6536">total</a>)</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;            </div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;            <span class="comment">// Add or update the node.</span></div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;            neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a> = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a5b223e8441b2d202fb1a18022228d6e1">getNodeIdx</a>(bestNode);</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;            neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a> = neighbourRef;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;            neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> = (neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp; ~<a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974aa9a4b8aa94ba18584fa07b2d8ad9aac2">DT_NODE_CLOSED</a>);</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;            neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a253defdaa9ea8dbe9ea5991bcfb75b32">cost</a> = cost;</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;            neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#aed27a8d0170505d1dba0cd3201bc6536">total</a> = total;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;            </div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;            <span class="keywordflow">if</span> (neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp; <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974a792e67a3226f80ca54332bcbdac1c1c9">DT_NODE_OPEN</a>)</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;            {</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;                <span class="comment">// Already in open, update node location.</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;                <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a8be783bde0911bdf92503a2e111f2a1a">modify</a>(neighbourNode);</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;            }</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;            {</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;                <span class="comment">// Put the node in open list.</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;                neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> |= <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974a792e67a3226f80ca54332bcbdac1c1c9">DT_NODE_OPEN</a>;</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;                <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a76d83f497e1a5bcf72a6cc902a696a2a">push</a>(neighbourNode);</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;            }</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;            </div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;            <span class="comment">// Update nearest node to target so far.</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;            <span class="keywordflow">if</span> (heuristic &lt; lastBestNodeCost)</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;            {</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                lastBestNodeCost = heuristic;</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;                lastBestNode = neighbourNode;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;            }</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;        }</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    }</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160; </div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <a class="code" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> status = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a5f6c1a4305b3a4dae4092dbb41a8f5ab">getPathToNode</a>(lastBestNode, path, pathCount, maxPath);</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160; </div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <span class="keywordflow">if</span> (lastBestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a> != endRef)</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;        status |= <a class="code" href="../../d8/de6/_detour_status_8h.html#a673010905b90e4928aeea1480ee58491">DT_PARTIAL_RESULT</a>;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160; </div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    <span class="keywordflow">if</span> (outOfNodes)</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;        status |= <a class="code" href="../../d8/de6/_detour_status_8h.html#a0f707e8e896d9a725f8f93f5779cf02c">DT_OUT_OF_NODES</a>;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    </div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;}</div>
<div class="ttc" id="a_detour_nav_mesh_query_8cpp_html_a691377deb83853ca02735f394ccf0a30"><div class="ttname"><a href="../../de/de4/_detour_nav_mesh_query_8cpp.html#a691377deb83853ca02735f394ccf0a30">H_SCALE</a></div><div class="ttdeci">static const float H_SCALE</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00103">DetourNavMeshQuery.cpp:103</a></div></div>
<div class="ttc" id="aclassdt_nav_mesh_query_html_a5f6c1a4305b3a4dae4092dbb41a8f5ab"><div class="ttname"><a href="../../dd/db0/classdt_nav_mesh_query.html#a5f6c1a4305b3a4dae4092dbb41a8f5ab">dtNavMeshQuery::getPathToNode</a></div><div class="ttdeci">dtStatus getPathToNode(struct dtNode *endNode, dtPolyRef *path, int *pathCount, int maxPath) const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01140">DetourNavMeshQuery.cpp:1140</a></div></div>
<div class="ttc" id="aclassdt_query_filter_html_a11d016505b732a1a013c3771a4157dea"><div class="ttname"><a href="../../d3/d5f/classdt_query_filter.html#a11d016505b732a1a013c3771a4157dea">dtQueryFilter::getCost</a></div><div class="ttdeci">virtual float getCost(const float *pa, const float *pb, const dtPolyRef prevRef, const dtMeshTile *prevTile, const dtPoly *prevPoly, const dtPolyRef curRef, const dtMeshTile *curTile, const dtPoly *curPoly, const dtPolyRef nextRef, const dtMeshTile *nextTile, const dtPoly *nextPoly) const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00094">DetourNavMeshQuery.cpp:94</a></div></div>
<div class="ttc" id="astructdt_link_html_a62d34d0e6350fe9790e91ec287bc1423"><div class="ttname"><a href="../../df/d2d/structdt_link.html#a62d34d0e6350fe9790e91ec287bc1423">dtLink::side</a></div><div class="ttdeci">unsigned char side</div><div class="ttdoc">If a boundary link, defines on which side the link is.</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00219">DetourNavMesh.h:219</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d1/d00/_detour_node_8cpp_source.html#l00083">dtNodePool::clear()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00114">dtNodeQueue::clear()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00039">dtNode::cost</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00025">DT_FAILURE</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00034">DT_INVALID_PARAM</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00027">DT_NODE_CLOSED</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00026">DT_NODE_OPEN</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00100">DT_NULL_LINK</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00036">DT_OUT_OF_NODES</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00037">DT_PARTIAL_RESULT</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00026">DT_SUCCESS</a>, <a class="el" href="../../da/d60/_detour_assert_8h_source.html#l00047">dtAssert</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00191">dtVcopy()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00218">dtVdist()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00290">dtVisfinite()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00144">dtNodeQueue::empty()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00170">dtPoly::firstLink</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00043">dtNode::flags</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00094">dtQueryFilter::getCost()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02316">getEdgeMidPoint()</a>, <a class="el" href="../../d1/d00/_detour_node_8cpp_source.html#l00121">dtNodePool::getNode()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00068">dtNodePool::getNodeAtIdx()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00062">dtNodePool::getNodeIdx()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01140">getPathToNode()</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01208">dtNavMesh::getTileAndPolyByRefUnsafe()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00103">H_SCALE</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00044">dtNode::id</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01216">dtNavMesh::isValidPolyRef()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00301">dtMeshTile::links</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00543">m_nav</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00559">m_nodePool</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00560">m_openList</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00132">dtNodeQueue::modify()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00217">dtLink::next</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00087">dtQueryFilter::passFilter()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00041">dtNode::pidx</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00118">dtNodeQueue::pop()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00038">dtNode::pos</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00126">dtNodeQueue::push()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00216">dtLink::ref</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00219">dtLink::side</a>, and <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00040">dtNode::total</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/server_2game_2_movement_2_movement_generators_2_path_generator_8cpp_source.html#l00162">PathGenerator::BuildPolyPath()</a>, and <a class="el" href="../../d2/d4a/_mesh_extractor_8cpp_source.html#l00363">main()</a>.</p>

</div>
</div>
<a id="a1131b39f205440349e7efe7f2d9b0ef9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1131b39f205440349e7efe7f2d9b0ef9">&#9670;&nbsp;</a></span>findPolysAroundCircle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> dtNavMeshQuery::findPolysAroundCircle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a>&#160;</td>
          <td class="paramname"><em>startRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *&#160;</td>
          <td class="paramname"><em>centerPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float&#160;</td>
          <td class="paramname"><em>radius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *&#160;</td>
          <td class="paramname"><em>filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *&#160;</td>
          <td class="paramname"><em>resultRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *&#160;</td>
          <td class="paramname"><em>resultParent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>resultCost</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>resultCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int&#160;</td>
          <td class="paramname"><em>maxResult</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Finds the polygons along the navigation graph that touch the specified circle. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">startRef</td><td>The reference id of the polygon where the search starts. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">centerPos</td><td>The center of the search circle. [(x, y, z)] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">radius</td><td>The radius of the search circle. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filter</td><td>The polygon filter to apply to the query. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">resultRef</td><td>The reference ids of the polygons touched by the circle. [opt] </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">resultParent</td><td>The reference ids of the parent polygons for each result. Zero if a result polygon has no parent. [opt] </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">resultCost</td><td>The search cost from <code>centerPos</code> to the polygon. [opt] </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">resultCount</td><td>The number of polygons found. [opt] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">maxResult</td><td>The maximum number of polygons the result arrays can hold. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status flags for the query.</dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<p>At least one result array must be provided.</p>
<p>The order of the result set is from least to highest cost to reach the polygon.</p>
<p>A common use case for this method is to perform Dijkstra searches. Candidate polygons are found by searching the graph beginning at the start polygon.</p>
<p>If a polygon is not found via the graph search, even if it intersects the search circle, it will not be included in the result set. For example:</p>
<p>polyA is the start polygon. polyB shares an edge with polyA. (Is adjacent.) polyC shares an edge with polyB, but not with polyA Even if the search circle overlaps polyC, it will not be included in the result set unless polyB is also in the set.</p>
<p>The value of the center point is used as the start position for cost calculations. It is not projected onto the surface of the mesh, so its y-value will effect the costs.</p>
<p>Intersection tests occur in 2D. All polygons and the search circle are projected onto the xz-plane. So the y-value of the center point does not effect intersection tests.</p>
<p>If the result arrays are to small to hold the entire result set, they will be filled to capacity. </p>

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02693">2693</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;{</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>);</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>);</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>);</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160; </div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;    <span class="keywordflow">if</span> (!resultCount)</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160; </div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;    *resultCount = 0;</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160; </div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a84ce3e44a2a97c5377b3b308825fcd37">isValidPolyRef</a>(startRef) ||</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;        !<a class="code" href="../../df/df3/boss__blood__queen__lana__thel_8cpp.html#a2993b3b195b6880d2cbc3cdf7215a56a">centerPos</a> || !<a class="code" href="../../dc/d41/_detour_common_8h.html#a1de203d55d933ccaa2ae9f3e126f4e63">dtVisfinite</a>(<a class="code" href="../../df/df3/boss__blood__queen__lana__thel_8cpp.html#a2993b3b195b6880d2cbc3cdf7215a56a">centerPos</a>) ||</div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;        radius &lt; 0 || !<a class="code" href="../../d0/d5c/_detour_math_8h.html#aada58cd45766fc2aa5c722315d5ba04c">dtMathIsfinite</a>(radius) ||</div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;        !filter || maxResult &lt; 0)</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;    {</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;    }</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;    </div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a4341af64b1f043b2775b7f1abae34d7b">clear</a>();</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#aa0f83a0d1f38b0b97fb549d1372c8be7">clear</a>();</div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;    </div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;    <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* startNode = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a9642659acf1f7fbfcd408b4c3da8a885">getNode</a>(startRef);</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;    <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>, <a class="code" href="../../df/df3/boss__blood__queen__lana__thel_8cpp.html#a2993b3b195b6880d2cbc3cdf7215a56a">centerPos</a>);</div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a> = 0;</div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a253defdaa9ea8dbe9ea5991bcfb75b32">cost</a> = 0;</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#aed27a8d0170505d1dba0cd3201bc6536">total</a> = 0;</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a> = startRef;</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> = <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974a792e67a3226f80ca54332bcbdac1c1c9">DT_NODE_OPEN</a>;</div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a76d83f497e1a5bcf72a6cc902a696a2a">push</a>(startNode);</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;    </div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;    <a class="code" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> status = <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a>;</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;    </div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;    <span class="keywordtype">int</span> n = 0;</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;    </div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> radiusSqr = <a class="code" href="../../dc/d41/_detour_common_8h.html#af0a088077730ad6995ce4d82093588cc">dtSqr</a>(radius);</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;    </div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;    <span class="keywordflow">while</span> (!<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a15693f0c97c5d9a32cd0302cdcafd27c">empty</a>())</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;    {</div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;        <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* bestNode = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a4fa10be8cbf65dcdf2284f18a3e949d3">pop</a>();</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;        bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp;= ~<a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974a792e67a3226f80ca54332bcbdac1c1c9">DT_NODE_OPEN</a>;</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;        bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> |= <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974aa9a4b8aa94ba18584fa07b2d8ad9aac2">DT_NODE_CLOSED</a>;</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;        </div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;        <span class="comment">// Get poly and tile.</span></div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;        <span class="comment">// The API input has been cheked already, skip checking internal data.</span></div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> bestRef = bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a>;</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* bestTile = 0;</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* bestPoly = 0;</div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;        <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#ac5c5b89a6af63b7de29089ae83091e0f">getTileAndPolyByRefUnsafe</a>(bestRef, &amp;bestTile, &amp;bestPoly);</div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;        </div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;        <span class="comment">// Get parent poly and tile.</span></div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;        <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> parentRef = 0;</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* parentTile = 0;</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* parentPoly = 0;</div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;        <span class="keywordflow">if</span> (bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a>)</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;            parentRef = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a5f6d20bd49d338b03885909b0c13ccea">getNodeAtIdx</a>(bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a>)-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a>;</div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;        <span class="keywordflow">if</span> (parentRef)</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;            <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#ac5c5b89a6af63b7de29089ae83091e0f">getTileAndPolyByRefUnsafe</a>(parentRef, &amp;parentTile, &amp;parentPoly);</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160; </div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;        <span class="keywordflow">if</span> (n &lt; maxResult)</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;        {</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;            <span class="keywordflow">if</span> (resultRef)</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;                resultRef[n] = bestRef;</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;            <span class="keywordflow">if</span> (resultParent)</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;                resultParent[n] = parentRef;</div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;            <span class="keywordflow">if</span> (resultCost)</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;                resultCost[n] = bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#aed27a8d0170505d1dba0cd3201bc6536">total</a>;</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;            ++n;</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;        }</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;        {</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;            status |= <a class="code" href="../../d8/de6/_detour_status_8h.html#a97c8292e3ce2ba0b63bfa4ca57de10af">DT_BUFFER_TOO_SMALL</a>;</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;        }</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;        </div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = bestPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#a671fd6893087936e80fcd17f7f666c0e">firstLink</a>; i != <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#aca31b5eadafd19285e16eca707b3295b">DT_NULL_LINK</a>; i = bestTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[i].<a class="code" href="../../df/d2d/structdt_link.html#a475b893f03bf4c942ab6376d83dca82e">next</a>)</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;        {</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;            <span class="keyword">const</span> <a class="code" href="../../df/d2d/structdt_link.html">dtLink</a>* <a class="code" href="../../dd/d95/structlink.html">link</a> = &amp;bestTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[i];</div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;            <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> neighbourRef = <a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;ref;</div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;            <span class="comment">// Skip invalid neighbours and do not follow back to parent.</span></div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;            <span class="keywordflow">if</span> (!neighbourRef || neighbourRef == parentRef)</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;            </div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;            <span class="comment">// Expand to neighbour</span></div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;            <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* neighbourTile = 0;</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;            <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* neighbourPoly = 0;</div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;            <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#ac5c5b89a6af63b7de29089ae83091e0f">getTileAndPolyByRefUnsafe</a>(neighbourRef, &amp;neighbourTile, &amp;neighbourPoly);</div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;        </div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;            <span class="comment">// Do not advance if the polygon is excluded by the filter.</span></div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;            <span class="keywordflow">if</span> (!filter-&gt;<a class="code" href="../../d3/d5f/classdt_query_filter.html#aaf072b8617dfbd4701a8e07f0f10be9c">passFilter</a>(neighbourRef, neighbourTile, neighbourPoly))</div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;            </div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;            <span class="comment">// Find edge and calc distance to the edge.</span></div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;            <span class="keywordtype">float</span> va[3], vb[3];</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a5e509b958aaca7ee5fe62ec59b034b4c">getPortalPoints</a>(bestRef, bestPoly, bestTile, neighbourRef, neighbourPoly, neighbourTile, va, vb))</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;            </div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;            <span class="comment">// If the circle is not touching the next polygon, skip it.</span></div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;            <span class="keywordtype">float</span> tseg;</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;            <span class="keywordtype">float</span> distSqr = <a class="code" href="../../dc/d41/_detour_common_8h.html#a99afe0b6e77a0c800e9582faea87cf6d">dtDistancePtSegSqr2D</a>(<a class="code" href="../../df/df3/boss__blood__queen__lana__thel_8cpp.html#a2993b3b195b6880d2cbc3cdf7215a56a">centerPos</a>, va, vb, tseg);</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;            <span class="keywordflow">if</span> (distSqr &gt; radiusSqr)</div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;            </div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;            <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* neighbourNode = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a9642659acf1f7fbfcd408b4c3da8a885">getNode</a>(neighbourRef);</div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;            <span class="keywordflow">if</span> (!neighbourNode)</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;            {</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;                status |= <a class="code" href="../../d8/de6/_detour_status_8h.html#a0f707e8e896d9a725f8f93f5779cf02c">DT_OUT_OF_NODES</a>;</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;            }</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;                </div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;            <span class="keywordflow">if</span> (neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp; <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974aa9a4b8aa94ba18584fa07b2d8ad9aac2">DT_NODE_CLOSED</a>)</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;            </div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;            <span class="comment">// Cost</span></div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;            <span class="keywordflow">if</span> (neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> == 0)</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;                <a class="code" href="../../dc/d41/_detour_common_8h.html#a7b3295d18cd477fca1fe541b59b1b231">dtVlerp</a>(neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>, va, vb, 0.5f);</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;            </div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;            <span class="keywordtype">float</span> cost = filter-&gt;<a class="code" href="../../d3/d5f/classdt_query_filter.html#a11d016505b732a1a013c3771a4157dea">getCost</a>(</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;                bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>, neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>,</div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;                parentRef, parentTile, parentPoly,</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;                bestRef, bestTile, bestPoly,</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;                neighbourRef, neighbourTile, neighbourPoly);</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160; </div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> total = bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#aed27a8d0170505d1dba0cd3201bc6536">total</a> + cost;</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;            </div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;            <span class="comment">// The node is already in open list and the new result is worse, skip.</span></div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;            <span class="keywordflow">if</span> ((neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp; <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974a792e67a3226f80ca54332bcbdac1c1c9">DT_NODE_OPEN</a>) &amp;&amp; total &gt;= neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#aed27a8d0170505d1dba0cd3201bc6536">total</a>)</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;            </div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;            neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a> = neighbourRef;</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;            neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a> = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a5b223e8441b2d202fb1a18022228d6e1">getNodeIdx</a>(bestNode);</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;            neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#aed27a8d0170505d1dba0cd3201bc6536">total</a> = total;</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;            </div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;            <span class="keywordflow">if</span> (neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp; <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974a792e67a3226f80ca54332bcbdac1c1c9">DT_NODE_OPEN</a>)</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;            {</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;                <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a8be783bde0911bdf92503a2e111f2a1a">modify</a>(neighbourNode);</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;            }</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;            {</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;                neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> = <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974a792e67a3226f80ca54332bcbdac1c1c9">DT_NODE_OPEN</a>;</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;                <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a76d83f497e1a5bcf72a6cc902a696a2a">push</a>(neighbourNode);</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;            }</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;        }</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;    }</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;    </div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;    *resultCount = n;</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;    </div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;    <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/df3/boss__blood__queen__lana__thel_8cpp_source.html#l00131">centerPos</a>, <a class="el" href="../../d1/d00/_detour_node_8cpp_source.html#l00083">dtNodePool::clear()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00114">dtNodeQueue::clear()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00039">dtNode::cost</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00035">DT_BUFFER_TOO_SMALL</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00025">DT_FAILURE</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00034">DT_INVALID_PARAM</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00027">DT_NODE_CLOSED</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00026">DT_NODE_OPEN</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00100">DT_NULL_LINK</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00036">DT_OUT_OF_NODES</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00026">DT_SUCCESS</a>, <a class="el" href="../../da/d60/_detour_assert_8h_source.html#l00047">dtAssert</a>, <a class="el" href="../../d5/de1/_detour_common_8cpp_source.html#l00170">dtDistancePtSegSqr2D()</a>, <a class="el" href="../../d0/d5c/_detour_math_8h_source.html#l00022">dtMathIsfinite()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00068">dtSqr()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00191">dtVcopy()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00290">dtVisfinite()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00118">dtVlerp()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00144">dtNodeQueue::empty()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00170">dtPoly::firstLink</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00043">dtNode::flags</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00094">dtQueryFilter::getCost()</a>, <a class="el" href="../../d1/d00/_detour_node_8cpp_source.html#l00121">dtNodePool::getNode()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00068">dtNodePool::getNodeAtIdx()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00062">dtNodePool::getNodeIdx()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02221">getPortalPoints()</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01208">dtNavMesh::getTileAndPolyByRefUnsafe()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00044">dtNode::id</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01216">dtNavMesh::isValidPolyRef()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00301">dtMeshTile::links</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00543">m_nav</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00559">m_nodePool</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00560">m_openList</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00132">dtNodeQueue::modify()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00217">dtLink::next</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00087">dtQueryFilter::passFilter()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00041">dtNode::pidx</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00118">dtNodeQueue::pop()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00038">dtNode::pos</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00126">dtNodeQueue::push()</a>, and <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00040">dtNode::total</a>.</p>

</div>
</div>
<a id="aa142b8c1e54bdefc39ab41507fe931d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa142b8c1e54bdefc39ab41507fe931d1">&#9670;&nbsp;</a></span>findPolysAroundShape()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> dtNavMeshQuery::findPolysAroundShape </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a>&#160;</td>
          <td class="paramname"><em>startRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *&#160;</td>
          <td class="paramname"><em>verts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int&#160;</td>
          <td class="paramname"><em>nverts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *&#160;</td>
          <td class="paramname"><em>filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *&#160;</td>
          <td class="paramname"><em>resultRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *&#160;</td>
          <td class="paramname"><em>resultParent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>resultCost</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>resultCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int&#160;</td>
          <td class="paramname"><em>maxResult</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Finds the polygons along the naviation graph that touch the specified convex polygon. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">startRef</td><td>The reference id of the polygon where the search starts. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">verts</td><td>The vertices describing the convex polygon. (CCW) [(x, y, z) * <code>nverts</code>] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nverts</td><td>The number of vertices in the polygon. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filter</td><td>The polygon filter to apply to the query. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">resultRef</td><td>The reference ids of the polygons touched by the search polygon. [opt] </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">resultParent</td><td>The reference ids of the parent polygons for each result. Zero if a result polygon has no parent. [opt] </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">resultCost</td><td>The search cost from the centroid point to the polygon. [opt] </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">resultCount</td><td>The number of polygons found. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">maxResult</td><td>The maximum number of polygons the result arrays can hold. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status flags for the query.</dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<p>The order of the result set is from least to highest cost.</p>
<p>At least one result array must be provided.</p>
<p>A common use case for this method is to perform Dijkstra searches. Candidate polygons are found by searching the graph beginning at the start polygon.</p>
<p>The same intersection test restrictions that apply to <a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#a1131b39f205440349e7efe7f2d9b0ef9">findPolysAroundCircle()</a> method apply to this method.</p>
<p>The 3D centroid of the search polygon is used as the start position for cost calculations.</p>
<p>Intersection tests occur in 2D. All polygons are projected onto the xz-plane. So the y-values of the vertices do not effect intersection tests.</p>
<p>If the result arrays are is too small to hold the entire result set, they will be filled to capacity. </p>

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02867">2867</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;{</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>);</div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>);</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>);</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160; </div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;    <span class="keywordflow">if</span> (!resultCount)</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160; </div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;    *resultCount = 0;</div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160; </div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a84ce3e44a2a97c5377b3b308825fcd37">isValidPolyRef</a>(startRef) ||</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;        !verts || nverts &lt; 3 ||</div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;        !filter || maxResult &lt; 0)</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;    {</div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;    }</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;    </div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;    <span class="comment">// Validate input</span></div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;    <span class="keywordflow">if</span> (!startRef || !<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a84ce3e44a2a97c5377b3b308825fcd37">isValidPolyRef</a>(startRef))</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;    </div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a4341af64b1f043b2775b7f1abae34d7b">clear</a>();</div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#aa0f83a0d1f38b0b97fb549d1372c8be7">clear</a>();</div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;    </div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../df/df3/boss__blood__queen__lana__thel_8cpp.html#a2993b3b195b6880d2cbc3cdf7215a56a">centerPos</a>[3] = {0,0,0};</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; nverts; ++i)</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;        <a class="code" href="../../dc/d41/_detour_common_8h.html#acad549159189d387ad9496e51994c70e">dtVadd</a>(<a class="code" href="../../df/df3/boss__blood__queen__lana__thel_8cpp.html#a2993b3b195b6880d2cbc3cdf7215a56a">centerPos</a>,<a class="code" href="../../df/df3/boss__blood__queen__lana__thel_8cpp.html#a2993b3b195b6880d2cbc3cdf7215a56a">centerPos</a>,&amp;verts[i*3]);</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;    <a class="code" href="../../dc/d41/_detour_common_8h.html#a865e98b3352fdea9216c36374d1f0b6a">dtVscale</a>(<a class="code" href="../../df/df3/boss__blood__queen__lana__thel_8cpp.html#a2993b3b195b6880d2cbc3cdf7215a56a">centerPos</a>,<a class="code" href="../../df/df3/boss__blood__queen__lana__thel_8cpp.html#a2993b3b195b6880d2cbc3cdf7215a56a">centerPos</a>,1.0f/nverts);</div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160; </div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;    <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* startNode = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a9642659acf1f7fbfcd408b4c3da8a885">getNode</a>(startRef);</div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;    <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>, <a class="code" href="../../df/df3/boss__blood__queen__lana__thel_8cpp.html#a2993b3b195b6880d2cbc3cdf7215a56a">centerPos</a>);</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a> = 0;</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a253defdaa9ea8dbe9ea5991bcfb75b32">cost</a> = 0;</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#aed27a8d0170505d1dba0cd3201bc6536">total</a> = 0;</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a> = startRef;</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> = <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974a792e67a3226f80ca54332bcbdac1c1c9">DT_NODE_OPEN</a>;</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a76d83f497e1a5bcf72a6cc902a696a2a">push</a>(startNode);</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;    </div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;    <a class="code" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> status = <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a>;</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160; </div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;    <span class="keywordtype">int</span> n = 0;</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;    </div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;    <span class="keywordflow">while</span> (!<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a15693f0c97c5d9a32cd0302cdcafd27c">empty</a>())</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;    {</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;        <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* bestNode = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a4fa10be8cbf65dcdf2284f18a3e949d3">pop</a>();</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;        bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp;= ~<a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974a792e67a3226f80ca54332bcbdac1c1c9">DT_NODE_OPEN</a>;</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;        bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> |= <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974aa9a4b8aa94ba18584fa07b2d8ad9aac2">DT_NODE_CLOSED</a>;</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;        </div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;        <span class="comment">// Get poly and tile.</span></div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;        <span class="comment">// The API input has been cheked already, skip checking internal data.</span></div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> bestRef = bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a>;</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* bestTile = 0;</div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* bestPoly = 0;</div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;        <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#ac5c5b89a6af63b7de29089ae83091e0f">getTileAndPolyByRefUnsafe</a>(bestRef, &amp;bestTile, &amp;bestPoly);</div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;        </div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;        <span class="comment">// Get parent poly and tile.</span></div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;        <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> parentRef = 0;</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* parentTile = 0;</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* parentPoly = 0;</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;        <span class="keywordflow">if</span> (bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a>)</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;            parentRef = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a5f6d20bd49d338b03885909b0c13ccea">getNodeAtIdx</a>(bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a>)-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a>;</div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;        <span class="keywordflow">if</span> (parentRef)</div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;            <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#ac5c5b89a6af63b7de29089ae83091e0f">getTileAndPolyByRefUnsafe</a>(parentRef, &amp;parentTile, &amp;parentPoly);</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160; </div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;        <span class="keywordflow">if</span> (n &lt; maxResult)</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;        {</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;            <span class="keywordflow">if</span> (resultRef)</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;                resultRef[n] = bestRef;</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;            <span class="keywordflow">if</span> (resultParent)</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;                resultParent[n] = parentRef;</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;            <span class="keywordflow">if</span> (resultCost)</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;                resultCost[n] = bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#aed27a8d0170505d1dba0cd3201bc6536">total</a>;</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160; </div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;            ++n;</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;        }</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;        {</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;            status |= <a class="code" href="../../d8/de6/_detour_status_8h.html#a97c8292e3ce2ba0b63bfa4ca57de10af">DT_BUFFER_TOO_SMALL</a>;</div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;        }</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;        </div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = bestPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#a671fd6893087936e80fcd17f7f666c0e">firstLink</a>; i != <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#aca31b5eadafd19285e16eca707b3295b">DT_NULL_LINK</a>; i = bestTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[i].<a class="code" href="../../df/d2d/structdt_link.html#a475b893f03bf4c942ab6376d83dca82e">next</a>)</div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;        {</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;            <span class="keyword">const</span> <a class="code" href="../../df/d2d/structdt_link.html">dtLink</a>* <a class="code" href="../../dd/d95/structlink.html">link</a> = &amp;bestTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[i];</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;            <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> neighbourRef = <a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;ref;</div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;            <span class="comment">// Skip invalid neighbours and do not follow back to parent.</span></div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;            <span class="keywordflow">if</span> (!neighbourRef || neighbourRef == parentRef)</div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;            </div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;            <span class="comment">// Expand to neighbour</span></div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;            <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* neighbourTile = 0;</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;            <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* neighbourPoly = 0;</div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;            <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#ac5c5b89a6af63b7de29089ae83091e0f">getTileAndPolyByRefUnsafe</a>(neighbourRef, &amp;neighbourTile, &amp;neighbourPoly);</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;            </div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;            <span class="comment">// Do not advance if the polygon is excluded by the filter.</span></div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;            <span class="keywordflow">if</span> (!filter-&gt;<a class="code" href="../../d3/d5f/classdt_query_filter.html#aaf072b8617dfbd4701a8e07f0f10be9c">passFilter</a>(neighbourRef, neighbourTile, neighbourPoly))</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;            </div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;            <span class="comment">// Find edge and calc distance to the edge.</span></div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;            <span class="keywordtype">float</span> va[3], vb[3];</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a5e509b958aaca7ee5fe62ec59b034b4c">getPortalPoints</a>(bestRef, bestPoly, bestTile, neighbourRef, neighbourPoly, neighbourTile, va, vb))</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;            </div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;            <span class="comment">// If the poly is not touching the edge to the next polygon, skip the connection it.</span></div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;            <span class="keywordtype">float</span> tmin, tmax;</div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;            <span class="keywordtype">int</span> segMin, segMax;</div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../dc/d41/_detour_common_8h.html#a5cb54b8f523d837ab0d99bf4acfc7e2a">dtIntersectSegmentPoly2D</a>(va, vb, verts, nverts, tmin, tmax, segMin, segMax))</div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;            <span class="keywordflow">if</span> (tmin &gt; 1.0f || tmax &lt; 0.0f)</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;            </div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;            <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* neighbourNode = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a9642659acf1f7fbfcd408b4c3da8a885">getNode</a>(neighbourRef);</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;            <span class="keywordflow">if</span> (!neighbourNode)</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;            {</div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;                status |= <a class="code" href="../../d8/de6/_detour_status_8h.html#a0f707e8e896d9a725f8f93f5779cf02c">DT_OUT_OF_NODES</a>;</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;            }</div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;            </div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;            <span class="keywordflow">if</span> (neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp; <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974aa9a4b8aa94ba18584fa07b2d8ad9aac2">DT_NODE_CLOSED</a>)</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;            </div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;            <span class="comment">// Cost</span></div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;            <span class="keywordflow">if</span> (neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> == 0)</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;                <a class="code" href="../../dc/d41/_detour_common_8h.html#a7b3295d18cd477fca1fe541b59b1b231">dtVlerp</a>(neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>, va, vb, 0.5f);</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;            </div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;            <span class="keywordtype">float</span> cost = filter-&gt;<a class="code" href="../../d3/d5f/classdt_query_filter.html#a11d016505b732a1a013c3771a4157dea">getCost</a>(</div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;                bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>, neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>,</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;                parentRef, parentTile, parentPoly,</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;                bestRef, bestTile, bestPoly,</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;                neighbourRef, neighbourTile, neighbourPoly);</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160; </div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> total = bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#aed27a8d0170505d1dba0cd3201bc6536">total</a> + cost;</div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;            </div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;            <span class="comment">// The node is already in open list and the new result is worse, skip.</span></div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;            <span class="keywordflow">if</span> ((neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp; <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974a792e67a3226f80ca54332bcbdac1c1c9">DT_NODE_OPEN</a>) &amp;&amp; total &gt;= neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#aed27a8d0170505d1dba0cd3201bc6536">total</a>)</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;            </div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;            neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a> = neighbourRef;</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;            neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a> = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a5b223e8441b2d202fb1a18022228d6e1">getNodeIdx</a>(bestNode);</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;            neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#aed27a8d0170505d1dba0cd3201bc6536">total</a> = total;</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;            </div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;            <span class="keywordflow">if</span> (neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp; <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974a792e67a3226f80ca54332bcbdac1c1c9">DT_NODE_OPEN</a>)</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;            {</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;                <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a8be783bde0911bdf92503a2e111f2a1a">modify</a>(neighbourNode);</div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;            }</div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;            {</div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;                neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> = <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974a792e67a3226f80ca54332bcbdac1c1c9">DT_NODE_OPEN</a>;</div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;                <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a76d83f497e1a5bcf72a6cc902a696a2a">push</a>(neighbourNode);</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;            }</div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;        }</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;    }</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;    </div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;    *resultCount = n;</div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;    </div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;    <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;}</div>
<div class="ttc" id="a_detour_common_8h_html_a5cb54b8f523d837ab0d99bf4acfc7e2a"><div class="ttname"><a href="../../dc/d41/_detour_common_8h.html#a5cb54b8f523d837ab0d99bf4acfc7e2a">dtIntersectSegmentPoly2D</a></div><div class="ttdeci">bool dtIntersectSegmentPoly2D(const float *p0, const float *p1, const float *verts, int nverts, float &amp;tmin, float &amp;tmax, int &amp;segMin, int &amp;segMax)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de1/_detour_common_8cpp_source.html#l00110">DetourCommon.cpp:110</a></div></div>
<div class="ttc" id="a_detour_common_8h_html_a865e98b3352fdea9216c36374d1f0b6a"><div class="ttname"><a href="../../dc/d41/_detour_common_8h.html#a865e98b3352fdea9216c36374d1f0b6a">dtVscale</a></div><div class="ttdeci">void dtVscale(float *dest, const float *v, const float t)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d41/_detour_common_8h_source.html#l00151">DetourCommon.h:151</a></div></div>
<div class="ttc" id="a_detour_common_8h_html_acad549159189d387ad9496e51994c70e"><div class="ttname"><a href="../../dc/d41/_detour_common_8h.html#acad549159189d387ad9496e51994c70e">dtVadd</a></div><div class="ttdeci">void dtVadd(float *dest, const float *v1, const float *v2)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d41/_detour_common_8h_source.html#l00129">DetourCommon.h:129</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/df3/boss__blood__queen__lana__thel_8cpp_source.html#l00131">centerPos</a>, <a class="el" href="../../d1/d00/_detour_node_8cpp_source.html#l00083">dtNodePool::clear()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00114">dtNodeQueue::clear()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00039">dtNode::cost</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00035">DT_BUFFER_TOO_SMALL</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00025">DT_FAILURE</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00034">DT_INVALID_PARAM</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00027">DT_NODE_CLOSED</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00026">DT_NODE_OPEN</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00100">DT_NULL_LINK</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00036">DT_OUT_OF_NODES</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00026">DT_SUCCESS</a>, <a class="el" href="../../da/d60/_detour_assert_8h_source.html#l00047">dtAssert</a>, <a class="el" href="../../d5/de1/_detour_common_8cpp_source.html#l00110">dtIntersectSegmentPoly2D()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00129">dtVadd()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00191">dtVcopy()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00118">dtVlerp()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00151">dtVscale()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00144">dtNodeQueue::empty()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00170">dtPoly::firstLink</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00043">dtNode::flags</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00094">dtQueryFilter::getCost()</a>, <a class="el" href="../../d1/d00/_detour_node_8cpp_source.html#l00121">dtNodePool::getNode()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00068">dtNodePool::getNodeAtIdx()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00062">dtNodePool::getNodeIdx()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02221">getPortalPoints()</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01208">dtNavMesh::getTileAndPolyByRefUnsafe()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00044">dtNode::id</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01216">dtNavMesh::isValidPolyRef()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00301">dtMeshTile::links</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00543">m_nav</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00559">m_nodePool</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00560">m_openList</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00132">dtNodeQueue::modify()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00217">dtLink::next</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00087">dtQueryFilter::passFilter()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00041">dtNode::pidx</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00118">dtNodeQueue::pop()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00038">dtNode::pos</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00126">dtNodeQueue::push()</a>, and <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00040">dtNode::total</a>.</p>

</div>
</div>
<a id="af86c392a14bd788b0caecf21d9fb4b3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af86c392a14bd788b0caecf21d9fb4b3d">&#9670;&nbsp;</a></span>findRandomPoint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> dtNavMeshQuery::findRandomPoint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *&#160;</td>
          <td class="paramname"><em>filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float(*)()&#160;</td>
          <td class="paramname"><em>frand</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *&#160;</td>
          <td class="paramname"><em>randomRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>randomPt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns random location on navmesh. Polygons are chosen weighted by area. The search runs in linear related to number of polygon. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">filter</td><td>The polygon filter to apply to the query. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">frand</td><td>Function returning a random number [0..1). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">randomRef</td><td>The reference id of the random location. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">randomPt</td><td>The random location. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status flags for the query. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00221">221</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;{</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordflow">if</span> (!filter || !<a class="code" href="../../df/de2/namespace_g3_d.html#ab08fe68fa7fe47d1e60c84ff83ddd558">frand</a> || !randomRef || !randomPt)</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="comment">// Randomly pick one tile. Assume that all tiles cover roughly the same area.</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* tile = 0;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordtype">float</span> tsum = 0.0f;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a17672fe19464d55eb66dc69f5f2f2b3f">getMaxTiles</a>(); i++)</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* t = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a52bb4f57b24a139600cfb6aeec1d9bcd">getTile</a>(i);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="keywordflow">if</span> (!t || !t-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a5051ce89a829f53969be9ac3fae9d4c3">header</a>) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="comment">// Choose random tile using reservoi sampling.</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> area = 1.0f; <span class="comment">// Could be tile area too.</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        tsum += area;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> u = <a class="code" href="../../df/de2/namespace_g3_d.html#ab08fe68fa7fe47d1e60c84ff83ddd558">frand</a>();</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="keywordflow">if</span> (u*tsum &lt;= area)</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            tile = t;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">if</span> (!tile)</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a>;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="comment">// Randomly pick one polygon weighted by polygon area.</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* poly = 0;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> polyRef = 0;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> base = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a0741871ed1357c51e3847f22673fcc9c">getPolyRefBase</a>(tile);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160; </div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordtype">float</span> areaSum = 0.0f;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a5051ce89a829f53969be9ac3fae9d4c3">header</a>-&gt;<a class="code" href="../../df/dd5/structdt_mesh_header.html#ab36d94238505dbf5370c69c8e5276d74">polyCount</a>; ++i)</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* p = &amp;tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abd8ed5dcf003464a7d8c456f671e6c1e">polys</a>[i];</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <span class="comment">// Do not return off-mesh connection polygons.</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#a12a7d5dcd2f1d7164531be4ecb5f35a4">getType</a>() != <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#a19937b4ff098f7c52ee08af1b5f39c98a29186313531593c85696d62ff83f6220">DT_POLYTYPE_GROUND</a>)</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="comment">// Must pass filter</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> ref = base | (<a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a>)i;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="keywordflow">if</span> (!filter-&gt;<a class="code" href="../../d3/d5f/classdt_query_filter.html#aaf072b8617dfbd4701a8e07f0f10be9c">passFilter</a>(ref, tile, p))</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; </div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <span class="comment">// Calc area of the polygon.</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="keywordtype">float</span> polyArea = 0.0f;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 2; j &lt; p-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#af940c431464c022f844e61130f83d9c2">vertCount</a>; ++j)</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span>* va = &amp;tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[p-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[0]*3];</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span>* vb = &amp;tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[p-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[j-1]*3];</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span>* vc = &amp;tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[p-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[j]*3];</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            polyArea += <a class="code" href="../../dc/d41/_detour_common_8h.html#ace29bd80c4e15d0e4e4a5738aaa77408">dtTriArea2D</a>(va,vb,vc);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="comment">// Choose random polygon weighted by area, using reservoi sampling.</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        areaSum += polyArea;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> u = <a class="code" href="../../df/de2/namespace_g3_d.html#ab08fe68fa7fe47d1e60c84ff83ddd558">frand</a>();</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="keywordflow">if</span> (u*areaSum &lt;= polyArea)</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            poly = p;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            polyRef = ref;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    }</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">if</span> (!poly)</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="comment">// Randomly pick point on polygon.</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span>* v = &amp;tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[poly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[0]*3];</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordtype">float</span> verts[3*<a class="code" href="../../d5/d7a/group__detour.html#ga8591fdac662dbfabb580de626c64c9f3">DT_VERTS_PER_POLYGON</a>];</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordtype">float</span> areas[<a class="code" href="../../d5/d7a/group__detour.html#ga8591fdac662dbfabb580de626c64c9f3">DT_VERTS_PER_POLYGON</a>];</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(&amp;verts[0*3],v);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 1; j &lt; poly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#af940c431464c022f844e61130f83d9c2">vertCount</a>; ++j)</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        v = &amp;tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[poly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[j]*3];</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(&amp;verts[j*3],v);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> s = <a class="code" href="../../df/de2/namespace_g3_d.html#ab08fe68fa7fe47d1e60c84ff83ddd558">frand</a>();</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> t = <a class="code" href="../../df/de2/namespace_g3_d.html#ab08fe68fa7fe47d1e60c84ff83ddd558">frand</a>();</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordtype">float</span> pt[3];</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <a class="code" href="../../dc/d41/_detour_common_8h.html#a846b4291b0c9a3dde72c6979c428ffa3">dtRandomPointInConvexPoly</a>(verts, poly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#af940c431464c022f844e61130f83d9c2">vertCount</a>, areas, s, t, pt);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordtype">float</span> h = 0.0f;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> status = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#af8303a12749e252c6688c15c5c887b69">getPolyHeight</a>(polyRef, pt, &amp;h);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/de6/_detour_status_8h.html#ab98b21afb80f30cc60a1f4e86ebc19d8">dtStatusFailed</a>(status))</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    pt[1] = h;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(randomPt, pt);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    *randomRef = polyRef;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a>;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;}</div>
<div class="ttc" id="a_detour_common_8h_html_a846b4291b0c9a3dde72c6979c428ffa3"><div class="ttname"><a href="../../dc/d41/_detour_common_8h.html#a846b4291b0c9a3dde72c6979c428ffa3">dtRandomPointInConvexPoly</a></div><div class="ttdeci">void dtRandomPointInConvexPoly(const float *pts, const int npts, float *areas, const float s, const float t, float *out)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de1/_detour_common_8cpp_source.html#l00332">DetourCommon.cpp:332</a></div></div>
<div class="ttc" id="a_detour_common_8h_html_ace29bd80c4e15d0e4e4a5738aaa77408"><div class="ttname"><a href="../../dc/d41/_detour_common_8h.html#ace29bd80c4e15d0e4e4a5738aaa77408">dtTriArea2D</a></div><div class="ttdeci">float dtTriArea2D(const float *a, const float *b, const float *c)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d41/_detour_common_8h_source.html#l00339">DetourCommon.h:339</a></div></div>
<div class="ttc" id="a_detour_nav_mesh_8h_html_a19937b4ff098f7c52ee08af1b5f39c98a29186313531593c85696d62ff83f6220"><div class="ttname"><a href="../../d1/ddd/_detour_nav_mesh_8h.html#a19937b4ff098f7c52ee08af1b5f39c98a29186313531593c85696d62ff83f6220">DT_POLYTYPE_GROUND</a></div><div class="ttdeci">@ DT_POLYTYPE_GROUND</div><div class="ttdoc">The polygon is a standard convex polygon that is part of the surface of the mesh.</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00159">DetourNavMesh.h:159</a></div></div>
<div class="ttc" id="aclassdt_nav_mesh_html_a17672fe19464d55eb66dc69f5f2f2b3f"><div class="ttname"><a href="../../da/d16/classdt_nav_mesh.html#a17672fe19464d55eb66dc69f5f2f2b3f">dtNavMesh::getMaxTiles</a></div><div class="ttdeci">int getMaxTiles() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01169">DetourNavMesh.cpp:1169</a></div></div>
<div class="ttc" id="aclassdt_nav_mesh_html_a52bb4f57b24a139600cfb6aeec1d9bcd"><div class="ttname"><a href="../../da/d16/classdt_nav_mesh.html#a52bb4f57b24a139600cfb6aeec1d9bcd">dtNavMesh::getTile</a></div><div class="ttdeci">const dtMeshTile * getTile(int i) const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01179">DetourNavMesh.cpp:1179</a></div></div>
<div class="ttc" id="aclassdt_nav_mesh_query_html_af8303a12749e252c6688c15c5c887b69"><div class="ttname"><a href="../../dd/db0/classdt_nav_mesh_query.html#af8303a12749e252c6688c15c5c887b69">dtNavMeshQuery::getPolyHeight</a></div><div class="ttdeci">dtStatus getPolyHeight(dtPolyRef ref, const float *pos, float *height) const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00594">DetourNavMeshQuery.cpp:594</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_ab08fe68fa7fe47d1e60c84ff83ddd558"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#ab08fe68fa7fe47d1e60c84ff83ddd558">G3D::frand</a></div><div class="ttdeci">double frand()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d0e/_vector3_8cpp_source.html#l00170">Vector3.cpp:170</a></div></div>
<div class="ttc" id="astructdt_mesh_header_html_ab36d94238505dbf5370c69c8e5276d74"><div class="ttname"><a href="../../df/dd5/structdt_mesh_header.html#ab36d94238505dbf5370c69c8e5276d74">dtMeshHeader::polyCount</a></div><div class="ttdeci">int polyCount</div><div class="ttdoc">The number of polygons in the tile.</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00269">DetourNavMesh.h:269</a></div></div>
<div class="ttc" id="astructdt_mesh_tile_html_a5051ce89a829f53969be9ac3fae9d4c3"><div class="ttname"><a href="../../d1/d1b/structdt_mesh_tile.html#a5051ce89a829f53969be9ac3fae9d4c3">dtMeshTile::header</a></div><div class="ttdeci">dtMeshHeader * header</div><div class="ttdoc">The tile header.</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00298">DetourNavMesh.h:298</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00025">DT_FAILURE</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00034">DT_INVALID_PARAM</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00159">DT_POLYTYPE_GROUND</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00026">DT_SUCCESS</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00073">DT_VERTS_PER_POLYGON</a>, <a class="el" href="../../da/d60/_detour_assert_8h_source.html#l00047">dtAssert</a>, <a class="el" href="../../d5/de1/_detour_common_8cpp_source.html#l00332">dtRandomPointInConvexPoly()</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00048">dtStatusFailed()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00339">dtTriArea2D()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00191">dtVcopy()</a>, <a class="el" href="../../d6/d0e/_vector3_8cpp_source.html#l00170">G3D::frand()</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01169">dtNavMesh::getMaxTiles()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00594">getPolyHeight()</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01349">dtNavMesh::getPolyRefBase()</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01179">dtNavMesh::getTile()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00199">dtPoly::getType()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00298">dtMeshTile::header</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00543">m_nav</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00087">dtQueryFilter::passFilter()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00269">dtMeshHeader::polyCount</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00299">dtMeshTile::polys</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00183">dtPoly::vertCount</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00174">dtPoly::verts</a>, and <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00300">dtMeshTile::verts</a>.</p>

</div>
</div>
<a id="abfb87531eb962cbd51c649469de2e4fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfb87531eb962cbd51c649469de2e4fa">&#9670;&nbsp;</a></span>findRandomPointAroundCircle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> dtNavMeshQuery::findRandomPointAroundCircle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a>&#160;</td>
          <td class="paramname"><em>startRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *&#160;</td>
          <td class="paramname"><em>centerPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float&#160;</td>
          <td class="paramname"><em>maxRadius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *&#160;</td>
          <td class="paramname"><em>filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float(*)()&#160;</td>
          <td class="paramname"><em>frand</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *&#160;</td>
          <td class="paramname"><em>randomRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>randomPt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns random location on navmesh within the reach of specified location. Polygons are chosen weighted by area. The search runs in linear related to number of polygon. The location is not exactly constrained by the circle, but it limits the visited polygons. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">startRef</td><td>The reference id of the polygon where the search starts. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">centerPos</td><td>The center of the search circle. [(x, y, z)] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filter</td><td>The polygon filter to apply to the query. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">frand</td><td>Function returning a random number [0..1). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">randomRef</td><td>The reference id of the random location. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">randomPt</td><td>The random location. [(x, y, z)] </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status flags for the query. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00316">316</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;{</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="comment">// Validate input</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a84ce3e44a2a97c5377b3b308825fcd37">isValidPolyRef</a>(startRef) ||</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        !<a class="code" href="../../df/df3/boss__blood__queen__lana__thel_8cpp.html#a2993b3b195b6880d2cbc3cdf7215a56a">centerPos</a> || !<a class="code" href="../../dc/d41/_detour_common_8h.html#a1de203d55d933ccaa2ae9f3e126f4e63">dtVisfinite</a>(<a class="code" href="../../df/df3/boss__blood__queen__lana__thel_8cpp.html#a2993b3b195b6880d2cbc3cdf7215a56a">centerPos</a>) ||</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        maxRadius &lt; 0 || !<a class="code" href="../../d0/d5c/_detour_math_8h.html#aada58cd45766fc2aa5c722315d5ba04c">dtMathIsfinite</a>(maxRadius) ||</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        !filter || !<a class="code" href="../../df/de2/namespace_g3_d.html#ab08fe68fa7fe47d1e60c84ff83ddd558">frand</a> || !randomRef || !randomPt)</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    }</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* startTile = 0;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* startPoly = 0;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#ac5c5b89a6af63b7de29089ae83091e0f">getTileAndPolyByRefUnsafe</a>(startRef, &amp;startTile, &amp;startPoly);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">if</span> (!filter-&gt;<a class="code" href="../../d3/d5f/classdt_query_filter.html#aaf072b8617dfbd4701a8e07f0f10be9c">passFilter</a>(startRef, startTile, startPoly))</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a4341af64b1f043b2775b7f1abae34d7b">clear</a>();</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#aa0f83a0d1f38b0b97fb549d1372c8be7">clear</a>();</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* startNode = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a9642659acf1f7fbfcd408b4c3da8a885">getNode</a>(startRef);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>, <a class="code" href="../../df/df3/boss__blood__queen__lana__thel_8cpp.html#a2993b3b195b6880d2cbc3cdf7215a56a">centerPos</a>);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a> = 0;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a253defdaa9ea8dbe9ea5991bcfb75b32">cost</a> = 0;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#aed27a8d0170505d1dba0cd3201bc6536">total</a> = 0;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a> = startRef;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> = <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974a792e67a3226f80ca54332bcbdac1c1c9">DT_NODE_OPEN</a>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a76d83f497e1a5bcf72a6cc902a696a2a">push</a>(startNode);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <a class="code" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> status = <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> radiusSqr = <a class="code" href="../../dc/d41/_detour_common_8h.html#af0a088077730ad6995ce4d82093588cc">dtSqr</a>(maxRadius);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordtype">float</span> areaSum = 0.0f;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* randomTile = 0;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* randomPoly = 0;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> randomPolyRef = 0;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; </div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">while</span> (!<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a15693f0c97c5d9a32cd0302cdcafd27c">empty</a>())</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* bestNode = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a4fa10be8cbf65dcdf2284f18a3e949d3">pop</a>();</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp;= ~<a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974a792e67a3226f80ca54332bcbdac1c1c9">DT_NODE_OPEN</a>;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> |= <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974aa9a4b8aa94ba18584fa07b2d8ad9aac2">DT_NODE_CLOSED</a>;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <span class="comment">// Get poly and tile.</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="comment">// The API input has been cheked already, skip checking internal data.</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> bestRef = bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a>;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* bestTile = 0;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* bestPoly = 0;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#ac5c5b89a6af63b7de29089ae83091e0f">getTileAndPolyByRefUnsafe</a>(bestRef, &amp;bestTile, &amp;bestPoly);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160; </div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <span class="comment">// Place random locations on on ground.</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <span class="keywordflow">if</span> (bestPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#a12a7d5dcd2f1d7164531be4ecb5f35a4">getType</a>() == <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#a19937b4ff098f7c52ee08af1b5f39c98a29186313531593c85696d62ff83f6220">DT_POLYTYPE_GROUND</a>)</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        {</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            <span class="comment">// Calc area of the polygon.</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            <span class="keywordtype">float</span> polyArea = 0.0f;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 2; j &lt; bestPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#af940c431464c022f844e61130f83d9c2">vertCount</a>; ++j)</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">float</span>* va = &amp;bestTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[bestPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[0]*3];</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">float</span>* vb = &amp;bestTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[bestPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[j-1]*3];</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">float</span>* vc = &amp;bestTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[bestPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[j]*3];</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                polyArea += <a class="code" href="../../dc/d41/_detour_common_8h.html#ace29bd80c4e15d0e4e4a5738aaa77408">dtTriArea2D</a>(va,vb,vc);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            <span class="comment">// Choose random polygon weighted by area, using reservoi sampling.</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            areaSum += polyArea;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> u = <a class="code" href="../../df/de2/namespace_g3_d.html#ab08fe68fa7fe47d1e60c84ff83ddd558">frand</a>();</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            <span class="keywordflow">if</span> (u*areaSum &lt;= polyArea)</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                randomTile = bestTile;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                randomPoly = bestPoly;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                randomPolyRef = bestRef;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            }</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        }</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <span class="comment">// Get parent poly and tile.</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> parentRef = 0;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* parentTile = 0;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* parentPoly = 0;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <span class="keywordflow">if</span> (bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a>)</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            parentRef = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a5f6d20bd49d338b03885909b0c13ccea">getNodeAtIdx</a>(bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a>)-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a>;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <span class="keywordflow">if</span> (parentRef)</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#ac5c5b89a6af63b7de29089ae83091e0f">getTileAndPolyByRefUnsafe</a>(parentRef, &amp;parentTile, &amp;parentPoly);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = bestPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#a671fd6893087936e80fcd17f7f666c0e">firstLink</a>; i != <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#aca31b5eadafd19285e16eca707b3295b">DT_NULL_LINK</a>; i = bestTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[i].<a class="code" href="../../df/d2d/structdt_link.html#a475b893f03bf4c942ab6376d83dca82e">next</a>)</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            <span class="keyword">const</span> <a class="code" href="../../df/d2d/structdt_link.html">dtLink</a>* <a class="code" href="../../dd/d95/structlink.html">link</a> = &amp;bestTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[i];</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> neighbourRef = <a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;ref;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            <span class="comment">// Skip invalid neighbours and do not follow back to parent.</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            <span class="keywordflow">if</span> (!neighbourRef || neighbourRef == parentRef)</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            <span class="comment">// Expand to neighbour</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* neighbourTile = 0;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;            <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* neighbourPoly = 0;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#ac5c5b89a6af63b7de29089ae83091e0f">getTileAndPolyByRefUnsafe</a>(neighbourRef, &amp;neighbourTile, &amp;neighbourPoly);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            </div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            <span class="comment">// Do not advance if the polygon is excluded by the filter.</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            <span class="keywordflow">if</span> (!filter-&gt;<a class="code" href="../../d3/d5f/classdt_query_filter.html#aaf072b8617dfbd4701a8e07f0f10be9c">passFilter</a>(neighbourRef, neighbourTile, neighbourPoly))</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            <span class="comment">// Find edge and calc distance to the edge.</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            <span class="keywordtype">float</span> va[3], vb[3];</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a5e509b958aaca7ee5fe62ec59b034b4c">getPortalPoints</a>(bestRef, bestPoly, bestTile, neighbourRef, neighbourPoly, neighbourTile, va, vb))</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;            </div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            <span class="comment">// If the circle is not touching the next polygon, skip it.</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;            <span class="keywordtype">float</span> tseg;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            <span class="keywordtype">float</span> distSqr = <a class="code" href="../../dc/d41/_detour_common_8h.html#a99afe0b6e77a0c800e9582faea87cf6d">dtDistancePtSegSqr2D</a>(<a class="code" href="../../df/df3/boss__blood__queen__lana__thel_8cpp.html#a2993b3b195b6880d2cbc3cdf7215a56a">centerPos</a>, va, vb, tseg);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            <span class="keywordflow">if</span> (distSqr &gt; radiusSqr)</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;            </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* neighbourNode = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a9642659acf1f7fbfcd408b4c3da8a885">getNode</a>(neighbourRef);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            <span class="keywordflow">if</span> (!neighbourNode)</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            {</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                status |= <a class="code" href="../../d8/de6/_detour_status_8h.html#a0f707e8e896d9a725f8f93f5779cf02c">DT_OUT_OF_NODES</a>;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;            }</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            </div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            <span class="keywordflow">if</span> (neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp; <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974aa9a4b8aa94ba18584fa07b2d8ad9aac2">DT_NODE_CLOSED</a>)</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;            </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            <span class="comment">// Cost</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;            <span class="keywordflow">if</span> (neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> == 0)</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                <a class="code" href="../../dc/d41/_detour_common_8h.html#a7b3295d18cd477fca1fe541b59b1b231">dtVlerp</a>(neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>, va, vb, 0.5f);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            </div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> total = bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#aed27a8d0170505d1dba0cd3201bc6536">total</a> + <a class="code" href="../../dc/d41/_detour_common_8h.html#a000a4b437d73fd37c831c4bcbc3abb8d">dtVdist</a>(bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>, neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            <span class="comment">// The node is already in open list and the new result is worse, skip.</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            <span class="keywordflow">if</span> ((neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp; <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974a792e67a3226f80ca54332bcbdac1c1c9">DT_NODE_OPEN</a>) &amp;&amp; total &gt;= neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#aed27a8d0170505d1dba0cd3201bc6536">total</a>)</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            </div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a> = neighbourRef;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> = (neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp; ~<a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974aa9a4b8aa94ba18584fa07b2d8ad9aac2">DT_NODE_CLOSED</a>);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a> = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a5b223e8441b2d202fb1a18022228d6e1">getNodeIdx</a>(bestNode);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#aed27a8d0170505d1dba0cd3201bc6536">total</a> = total;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            <span class="keywordflow">if</span> (neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp; <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974a792e67a3226f80ca54332bcbdac1c1c9">DT_NODE_OPEN</a>)</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            {</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a8be783bde0911bdf92503a2e111f2a1a">modify</a>(neighbourNode);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            }</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            {</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> = <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974a792e67a3226f80ca54332bcbdac1c1c9">DT_NODE_OPEN</a>;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a76d83f497e1a5bcf72a6cc902a696a2a">push</a>(neighbourNode);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            }</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        }</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    }</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="keywordflow">if</span> (!randomPoly)</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a>;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    </div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="comment">// Randomly pick point on polygon.</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span>* v = &amp;randomTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[randomPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[0]*3];</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordtype">float</span> verts[3*<a class="code" href="../../d5/d7a/group__detour.html#ga8591fdac662dbfabb580de626c64c9f3">DT_VERTS_PER_POLYGON</a>];</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keywordtype">float</span> areas[<a class="code" href="../../d5/d7a/group__detour.html#ga8591fdac662dbfabb580de626c64c9f3">DT_VERTS_PER_POLYGON</a>];</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(&amp;verts[0*3],v);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 1; j &lt; randomPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#af940c431464c022f844e61130f83d9c2">vertCount</a>; ++j)</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    {</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        v = &amp;randomTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[randomPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[j]*3];</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(&amp;verts[j*3],v);</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    }</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    </div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> s = <a class="code" href="../../df/de2/namespace_g3_d.html#ab08fe68fa7fe47d1e60c84ff83ddd558">frand</a>();</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> t = <a class="code" href="../../df/de2/namespace_g3_d.html#ab08fe68fa7fe47d1e60c84ff83ddd558">frand</a>();</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordtype">float</span> pt[3];</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <a class="code" href="../../dc/d41/_detour_common_8h.html#a846b4291b0c9a3dde72c6979c428ffa3">dtRandomPointInConvexPoly</a>(verts, randomPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#af940c431464c022f844e61130f83d9c2">vertCount</a>, areas, s, t, pt);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    </div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordtype">float</span> h = 0.0f;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <a class="code" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> stat = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#af8303a12749e252c6688c15c5c887b69">getPolyHeight</a>(randomPolyRef, pt, &amp;h);</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/de6/_detour_status_8h.html#ab98b21afb80f30cc60a1f4e86ebc19d8">dtStatusFailed</a>(status))</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <span class="keywordflow">return</span> stat;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    pt[1] = h;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    </div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(randomPt, pt);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    *randomRef = randomPolyRef;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a>;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/df3/boss__blood__queen__lana__thel_8cpp_source.html#l00131">centerPos</a>, <a class="el" href="../../d1/d00/_detour_node_8cpp_source.html#l00083">dtNodePool::clear()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00114">dtNodeQueue::clear()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00039">dtNode::cost</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00025">DT_FAILURE</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00034">DT_INVALID_PARAM</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00027">DT_NODE_CLOSED</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00026">DT_NODE_OPEN</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00100">DT_NULL_LINK</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00036">DT_OUT_OF_NODES</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00159">DT_POLYTYPE_GROUND</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00026">DT_SUCCESS</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00073">DT_VERTS_PER_POLYGON</a>, <a class="el" href="../../da/d60/_detour_assert_8h_source.html#l00047">dtAssert</a>, <a class="el" href="../../d5/de1/_detour_common_8cpp_source.html#l00170">dtDistancePtSegSqr2D()</a>, <a class="el" href="../../d0/d5c/_detour_math_8h_source.html#l00022">dtMathIsfinite()</a>, <a class="el" href="../../d5/de1/_detour_common_8cpp_source.html#l00332">dtRandomPointInConvexPoly()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00068">dtSqr()</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00048">dtStatusFailed()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00339">dtTriArea2D()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00191">dtVcopy()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00218">dtVdist()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00290">dtVisfinite()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00118">dtVlerp()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00144">dtNodeQueue::empty()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00170">dtPoly::firstLink</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00043">dtNode::flags</a>, <a class="el" href="../../d6/d0e/_vector3_8cpp_source.html#l00170">G3D::frand()</a>, <a class="el" href="../../d1/d00/_detour_node_8cpp_source.html#l00121">dtNodePool::getNode()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00068">dtNodePool::getNodeAtIdx()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00062">dtNodePool::getNodeIdx()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00594">getPolyHeight()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02221">getPortalPoints()</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01208">dtNavMesh::getTileAndPolyByRefUnsafe()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00199">dtPoly::getType()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00044">dtNode::id</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01216">dtNavMesh::isValidPolyRef()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00301">dtMeshTile::links</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00543">m_nav</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00559">m_nodePool</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00560">m_openList</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00132">dtNodeQueue::modify()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00217">dtLink::next</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00087">dtQueryFilter::passFilter()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00041">dtNode::pidx</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00118">dtNodeQueue::pop()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00038">dtNode::pos</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00126">dtNodeQueue::push()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00040">dtNode::total</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00183">dtPoly::vertCount</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00174">dtPoly::verts</a>, and <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00300">dtMeshTile::verts</a>.</p>

</div>
</div>
<a id="ac160434c85bdf9edec24fa621f120d2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac160434c85bdf9edec24fa621f120d2d">&#9670;&nbsp;</a></span>findStraightPath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> dtNavMeshQuery::findStraightPath </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *&#160;</td>
          <td class="paramname"><em>startPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *&#160;</td>
          <td class="paramname"><em>endPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int&#160;</td>
          <td class="paramname"><em>pathSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>straightPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>straightPathFlags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *&#160;</td>
          <td class="paramname"><em>straightPathRefs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>straightPathCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int&#160;</td>
          <td class="paramname"><em>maxStraightPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int&#160;</td>
          <td class="paramname"><em>options</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Finds the straight path from the start to the end position within the polygon corridor. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">startPos</td><td>Path start position. [(x, y, z)] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">endPos</td><td>Path end position. [(x, y, z)] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>An array of polygon references that represent the path corridor. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pathSize</td><td>The number of polygons in the <code>path</code> array. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">straightPath</td><td>Points describing the straight path. [(x, y, z) * <code>straightPathCount</code>]. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">straightPathFlags</td><td>Flags describing each point. (See: <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ac8cecf1c1e32f8464a1905edfeaebbc7" title="Vertex flags returned by dtNavMeshQuery::findStraightPath.">dtStraightPathFlags</a>) [opt] </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">straightPathRefs</td><td>The reference id of the polygon that is being entered at each point. [opt] </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">straightPathCount</td><td>The number of points in the straight path. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">maxStraightPath</td><td>The maximum number of points the straight path arrays can hold. [Limit: &gt; 0] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">options</td><td>Query options. (see: <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#a41a7f5b74dd90b219858a75208bcac4e" title="Options for dtNavMeshQuery::findStraightPath.">dtStraightPathOptions</a>) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status flags for the query.</dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<p>This method peforms what is often called 'string pulling'.</p>
<p>The start position is clamped to the first polygon in the path, and the end position is clamped to the last. So the start and end positions should normally be within or very near the first and last polygons respectively.</p>
<p>The returned polygon references represent the reference id of the polygon that is entered at the associated path position. The reference id associated with the end point will always be zero. This allows, for example, matching off-mesh link points to their representative polygons.</p>
<p>If the provided result buffers are too small for the entire result set, they will be filled as far as possible from the start toward the end position. </p>

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01766">1766</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;{</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>);</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160; </div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    <span class="keywordflow">if</span> (!straightPathCount)</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160; </div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;    *straightPathCount = 0;</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160; </div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;    <span class="keywordflow">if</span> (!startPos || !<a class="code" href="../../dc/d41/_detour_common_8h.html#a1de203d55d933ccaa2ae9f3e126f4e63">dtVisfinite</a>(startPos) ||</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;        !endPos || !<a class="code" href="../../dc/d41/_detour_common_8h.html#a1de203d55d933ccaa2ae9f3e126f4e63">dtVisfinite</a>(endPos) ||</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;        !path || pathSize &lt;= 0 || !path[0] ||</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;        maxStraightPath &lt;= 0)</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;    {</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    }</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;    </div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;    <a class="code" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> stat = 0;</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    </div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;    <span class="comment">// TODO: Should this be callers responsibility?</span></div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    <span class="keywordtype">float</span> closestStartPos[3];</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/de6/_detour_status_8h.html#ab98b21afb80f30cc60a1f4e86ebc19d8">dtStatusFailed</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#aa53b9573e61eda951213ea9e4354e744">closestPointOnPolyBoundary</a>(path[0], startPos, closestStartPos)))</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160; </div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;    <span class="keywordtype">float</span> closestEndPos[3];</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/de6/_detour_status_8h.html#ab98b21afb80f30cc60a1f4e86ebc19d8">dtStatusFailed</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#aa53b9573e61eda951213ea9e4354e744">closestPointOnPolyBoundary</a>(path[pathSize-1], endPos, closestEndPos)))</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;    </div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;    <span class="comment">// Add start point.</span></div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;    stat = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a471af9b26f2662b95a4770e4022a1186">appendVertex</a>(closestStartPos, <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ac8cecf1c1e32f8464a1905edfeaebbc7a45732cca36a4a88b3cc5492dc1c4d55a">DT_STRAIGHTPATH_START</a>, path[0],</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;                        straightPath, straightPathFlags, straightPathRefs,</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;                        straightPathCount, maxStraightPath);</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    <span class="keywordflow">if</span> (stat != <a class="code" href="../../d8/de6/_detour_status_8h.html#ab2f47a2593c7138b17c1d8939f19cf06">DT_IN_PROGRESS</a>)</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;        <span class="keywordflow">return</span> stat;</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;    </div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;    <span class="keywordflow">if</span> (pathSize &gt; 1)</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    {</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;        <span class="keywordtype">float</span> portalApex[3], portalLeft[3], portalRight[3];</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;        <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(portalApex, closestStartPos);</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;        <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(portalLeft, portalApex);</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;        <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(portalRight, portalApex);</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;        <span class="keywordtype">int</span> apexIndex = 0;</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;        <span class="keywordtype">int</span> leftIndex = 0;</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;        <span class="keywordtype">int</span> rightIndex = 0;</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;        </div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> leftPolyType = 0;</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> rightPolyType = 0;</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;        </div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;        <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> leftPolyRef = path[0];</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;        <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> rightPolyRef = path[0];</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;        </div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; pathSize; ++i)</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;        {</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;            <span class="keywordtype">float</span> <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>[3], <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">right</a>[3];</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> toType;</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;            </div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;            <span class="keywordflow">if</span> (i+1 &lt; pathSize)</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;            {</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;                <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> fromType; <span class="comment">// fromType is ignored.</span></div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160; </div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;                <span class="comment">// Next portal.</span></div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d8/de6/_detour_status_8h.html#ab98b21afb80f30cc60a1f4e86ebc19d8">dtStatusFailed</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a5e509b958aaca7ee5fe62ec59b034b4c">getPortalPoints</a>(path[i], path[i+1], <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>, <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">right</a>, fromType, toType)))</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;                {</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;                    <span class="comment">// Failed to get portal points, in practice this means that path[i+1] is invalid polygon.</span></div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;                    <span class="comment">// Clamp the end point to path[i], and return the path so far.</span></div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;                    </div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../d8/de6/_detour_status_8h.html#ab98b21afb80f30cc60a1f4e86ebc19d8">dtStatusFailed</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#aa53b9573e61eda951213ea9e4354e744">closestPointOnPolyBoundary</a>(path[i], endPos, closestEndPos)))</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;                    {</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;                        <span class="comment">// This should only happen when the first polygon is invalid.</span></div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;                        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;                    }</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160; </div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;                    <span class="comment">// Apeend portals along the current straight path segment.</span></div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;                    <span class="keywordflow">if</span> (options &amp; (<a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#a41a7f5b74dd90b219858a75208bcac4ea0b347150cb46ca63c54526df691a9aef">DT_STRAIGHTPATH_AREA_CROSSINGS</a> | <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#a41a7f5b74dd90b219858a75208bcac4eae6fa64aada65c8ec7458b2a5653d5e02">DT_STRAIGHTPATH_ALL_CROSSINGS</a>))</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;                    {</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;                        <span class="comment">// Ignore status return value as we&#39;re just about to return anyway.</span></div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;                        <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a4b7b8deb4faceb4e351fe4ba43e0f165">appendPortals</a>(apexIndex, i, closestEndPos, path,</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;                                             straightPath, straightPathFlags, straightPathRefs,</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;                                             straightPathCount, maxStraightPath, options);</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;                    }</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160; </div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;                    <span class="comment">// Ignore status return value as we&#39;re just about to return anyway.</span></div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;                    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a471af9b26f2662b95a4770e4022a1186">appendVertex</a>(closestEndPos, 0, path[i],</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;                                        straightPath, straightPathFlags, straightPathRefs,</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;                                        straightPathCount, maxStraightPath);</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;                    </div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a673010905b90e4928aeea1480ee58491">DT_PARTIAL_RESULT</a> | ((*straightPathCount &gt;= maxStraightPath) ? <a class="code" href="../../d8/de6/_detour_status_8h.html#a97c8292e3ce2ba0b63bfa4ca57de10af">DT_BUFFER_TOO_SMALL</a> : 0);</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;                }</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;                </div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;                <span class="comment">// If starting really close the portal, advance.</span></div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;                <span class="keywordflow">if</span> (i == 0)</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;                {</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;                    <span class="keywordtype">float</span> t;</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../dc/d41/_detour_common_8h.html#a99afe0b6e77a0c800e9582faea87cf6d">dtDistancePtSegSqr2D</a>(portalApex, <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>, <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">right</a>, t) &lt; <a class="code" href="../../dc/d41/_detour_common_8h.html#af0a088077730ad6995ce4d82093588cc">dtSqr</a>(0.001f))</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;                }</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;            }</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;            {</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;                <span class="comment">// End of the path.</span></div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;                <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(<a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>, closestEndPos);</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;                <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(<a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">right</a>, closestEndPos);</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;                </div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;                toType = <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#a19937b4ff098f7c52ee08af1b5f39c98a29186313531593c85696d62ff83f6220">DT_POLYTYPE_GROUND</a>;</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;            }</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;            </div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;            <span class="comment">// Right vertex.</span></div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../dc/d41/_detour_common_8h.html#ace29bd80c4e15d0e4e4a5738aaa77408">dtTriArea2D</a>(portalApex, portalRight, <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">right</a>) &lt;= 0.0f)</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;            {</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../dc/d41/_detour_common_8h.html#ad246e02163e1de850ffe6a2645f3c28e">dtVequal</a>(portalApex, portalRight) || <a class="code" href="../../dc/d41/_detour_common_8h.html#ace29bd80c4e15d0e4e4a5738aaa77408">dtTriArea2D</a>(portalApex, portalLeft, <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">right</a>) &gt; 0.0f)</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;                {</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;                    <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(portalRight, <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">right</a>);</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;                    rightPolyRef = (i+1 &lt; pathSize) ? path[i+1] : 0;</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;                    rightPolyType = toType;</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;                    rightIndex = i;</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;                }</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;                {</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;                    <span class="comment">// Append portals along the current straight path segment.</span></div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;                    <span class="keywordflow">if</span> (options &amp; (<a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#a41a7f5b74dd90b219858a75208bcac4ea0b347150cb46ca63c54526df691a9aef">DT_STRAIGHTPATH_AREA_CROSSINGS</a> | <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#a41a7f5b74dd90b219858a75208bcac4eae6fa64aada65c8ec7458b2a5653d5e02">DT_STRAIGHTPATH_ALL_CROSSINGS</a>))</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;                    {</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;                        stat = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a4b7b8deb4faceb4e351fe4ba43e0f165">appendPortals</a>(apexIndex, leftIndex, portalLeft, path,</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;                                             straightPath, straightPathFlags, straightPathRefs,</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;                                             straightPathCount, maxStraightPath, options);</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;                        <span class="keywordflow">if</span> (stat != <a class="code" href="../../d8/de6/_detour_status_8h.html#ab2f47a2593c7138b17c1d8939f19cf06">DT_IN_PROGRESS</a>)</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;                            <span class="keywordflow">return</span> stat;                    </div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;                    }</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;                </div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;                    <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(portalApex, portalLeft);</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;                    apexIndex = leftIndex;</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;                    </div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;                    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> flags = 0;</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;                    <span class="keywordflow">if</span> (!leftPolyRef)</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;                        flags = <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ac8cecf1c1e32f8464a1905edfeaebbc7a3857dec720eca5984c04ecf962b7bfa2">DT_STRAIGHTPATH_END</a>;</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (leftPolyType == <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#a19937b4ff098f7c52ee08af1b5f39c98a5454d6f0a19d046264f5305baa7ba858">DT_POLYTYPE_OFFMESH_CONNECTION</a>)</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;                        flags = <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ac8cecf1c1e32f8464a1905edfeaebbc7a6f3af4eb103dca5d2259f7b8770e2c02">DT_STRAIGHTPATH_OFFMESH_CONNECTION</a>;</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;                    <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> ref = leftPolyRef;</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;                    </div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;                    <span class="comment">// Append or update vertex</span></div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;                    stat = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a471af9b26f2662b95a4770e4022a1186">appendVertex</a>(portalApex, flags, ref,</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;                                        straightPath, straightPathFlags, straightPathRefs,</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;                                        straightPathCount, maxStraightPath);</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;                    <span class="keywordflow">if</span> (stat != <a class="code" href="../../d8/de6/_detour_status_8h.html#ab2f47a2593c7138b17c1d8939f19cf06">DT_IN_PROGRESS</a>)</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;                        <span class="keywordflow">return</span> stat;</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;                    </div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;                    <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(portalLeft, portalApex);</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;                    <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(portalRight, portalApex);</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;                    leftIndex = apexIndex;</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;                    rightIndex = apexIndex;</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;                    </div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;                    <span class="comment">// Restart</span></div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;                    i = apexIndex;</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;                    </div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;                }</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;            }</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;            </div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;            <span class="comment">// Left vertex.</span></div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../dc/d41/_detour_common_8h.html#ace29bd80c4e15d0e4e4a5738aaa77408">dtTriArea2D</a>(portalApex, portalLeft, <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>) &gt;= 0.0f)</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;            {</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../dc/d41/_detour_common_8h.html#ad246e02163e1de850ffe6a2645f3c28e">dtVequal</a>(portalApex, portalLeft) || <a class="code" href="../../dc/d41/_detour_common_8h.html#ace29bd80c4e15d0e4e4a5738aaa77408">dtTriArea2D</a>(portalApex, portalRight, <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>) &lt; 0.0f)</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;                {</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;                    <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(portalLeft, <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>);</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;                    leftPolyRef = (i+1 &lt; pathSize) ? path[i+1] : 0;</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;                    leftPolyType = toType;</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;                    leftIndex = i;</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;                }</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;                {</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;                    <span class="comment">// Append portals along the current straight path segment.</span></div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;                    <span class="keywordflow">if</span> (options &amp; (<a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#a41a7f5b74dd90b219858a75208bcac4ea0b347150cb46ca63c54526df691a9aef">DT_STRAIGHTPATH_AREA_CROSSINGS</a> | <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#a41a7f5b74dd90b219858a75208bcac4eae6fa64aada65c8ec7458b2a5653d5e02">DT_STRAIGHTPATH_ALL_CROSSINGS</a>))</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;                    {</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;                        stat = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a4b7b8deb4faceb4e351fe4ba43e0f165">appendPortals</a>(apexIndex, rightIndex, portalRight, path,</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;                                             straightPath, straightPathFlags, straightPathRefs,</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;                                             straightPathCount, maxStraightPath, options);</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;                        <span class="keywordflow">if</span> (stat != <a class="code" href="../../d8/de6/_detour_status_8h.html#ab2f47a2593c7138b17c1d8939f19cf06">DT_IN_PROGRESS</a>)</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;                            <span class="keywordflow">return</span> stat;</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;                    }</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160; </div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;                    <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(portalApex, portalRight);</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;                    apexIndex = rightIndex;</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;                    </div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;                    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> flags = 0;</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;                    <span class="keywordflow">if</span> (!rightPolyRef)</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;                        flags = <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ac8cecf1c1e32f8464a1905edfeaebbc7a3857dec720eca5984c04ecf962b7bfa2">DT_STRAIGHTPATH_END</a>;</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rightPolyType == <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#a19937b4ff098f7c52ee08af1b5f39c98a5454d6f0a19d046264f5305baa7ba858">DT_POLYTYPE_OFFMESH_CONNECTION</a>)</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;                        flags = <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ac8cecf1c1e32f8464a1905edfeaebbc7a6f3af4eb103dca5d2259f7b8770e2c02">DT_STRAIGHTPATH_OFFMESH_CONNECTION</a>;</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;                    <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> ref = rightPolyRef;</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160; </div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;                    <span class="comment">// Append or update vertex</span></div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;                    stat = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a471af9b26f2662b95a4770e4022a1186">appendVertex</a>(portalApex, flags, ref,</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;                                        straightPath, straightPathFlags, straightPathRefs,</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;                                        straightPathCount, maxStraightPath);</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;                    <span class="keywordflow">if</span> (stat != <a class="code" href="../../d8/de6/_detour_status_8h.html#ab2f47a2593c7138b17c1d8939f19cf06">DT_IN_PROGRESS</a>)</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;                        <span class="keywordflow">return</span> stat;</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;                    </div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;                    <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(portalLeft, portalApex);</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;                    <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(portalRight, portalApex);</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;                    leftIndex = apexIndex;</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;                    rightIndex = apexIndex;</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;                    </div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;                    <span class="comment">// Restart</span></div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;                    i = apexIndex;</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;                    </div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;                }</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;            }</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;        }</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160; </div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;        <span class="comment">// Append portals along the current straight path segment.</span></div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;        <span class="keywordflow">if</span> (options &amp; (<a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#a41a7f5b74dd90b219858a75208bcac4ea0b347150cb46ca63c54526df691a9aef">DT_STRAIGHTPATH_AREA_CROSSINGS</a> | <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#a41a7f5b74dd90b219858a75208bcac4eae6fa64aada65c8ec7458b2a5653d5e02">DT_STRAIGHTPATH_ALL_CROSSINGS</a>))</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;        {</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;            stat = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a4b7b8deb4faceb4e351fe4ba43e0f165">appendPortals</a>(apexIndex, pathSize-1, closestEndPos, path,</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;                                 straightPath, straightPathFlags, straightPathRefs,</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;                                 straightPathCount, maxStraightPath, options);</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;            <span class="keywordflow">if</span> (stat != <a class="code" href="../../d8/de6/_detour_status_8h.html#ab2f47a2593c7138b17c1d8939f19cf06">DT_IN_PROGRESS</a>)</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;                <span class="keywordflow">return</span> stat;</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;        }</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;    }</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160; </div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;    <span class="comment">// Ignore status return value as we&#39;re just about to return anyway.</span></div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a471af9b26f2662b95a4770e4022a1186">appendVertex</a>(closestEndPos, <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ac8cecf1c1e32f8464a1905edfeaebbc7a3857dec720eca5984c04ecf962b7bfa2">DT_STRAIGHTPATH_END</a>, 0,</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;                        straightPath, straightPathFlags, straightPathRefs,</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;                        straightPathCount, maxStraightPath);</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;    </div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a> | ((*straightPathCount &gt;= maxStraightPath) ? <a class="code" href="../../d8/de6/_detour_status_8h.html#a97c8292e3ce2ba0b63bfa4ca57de10af">DT_BUFFER_TOO_SMALL</a> : 0);</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;}</div>
<div class="ttc" id="a_detour_nav_mesh_8h_html_a41a7f5b74dd90b219858a75208bcac4eae6fa64aada65c8ec7458b2a5653d5e02"><div class="ttname"><a href="../../d1/ddd/_detour_nav_mesh_8h.html#a41a7f5b74dd90b219858a75208bcac4eae6fa64aada65c8ec7458b2a5653d5e02">DT_STRAIGHTPATH_ALL_CROSSINGS</a></div><div class="ttdeci">@ DT_STRAIGHTPATH_ALL_CROSSINGS</div><div class="ttdoc">Add a vertex at every polygon edge crossing.</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00129">DetourNavMesh.h:129</a></div></div>
<div class="ttc" id="a_detour_nav_mesh_8h_html_ac8cecf1c1e32f8464a1905edfeaebbc7a45732cca36a4a88b3cc5492dc1c4d55a"><div class="ttname"><a href="../../d1/ddd/_detour_nav_mesh_8h.html#ac8cecf1c1e32f8464a1905edfeaebbc7a45732cca36a4a88b3cc5492dc1c4d55a">DT_STRAIGHTPATH_START</a></div><div class="ttdeci">@ DT_STRAIGHTPATH_START</div><div class="ttdoc">The vertex is the start position in the path.</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00120">DetourNavMesh.h:120</a></div></div>
<div class="ttc" id="a_detour_nav_mesh_8h_html_ac8cecf1c1e32f8464a1905edfeaebbc7a6f3af4eb103dca5d2259f7b8770e2c02"><div class="ttname"><a href="../../d1/ddd/_detour_nav_mesh_8h.html#ac8cecf1c1e32f8464a1905edfeaebbc7a6f3af4eb103dca5d2259f7b8770e2c02">DT_STRAIGHTPATH_OFFMESH_CONNECTION</a></div><div class="ttdeci">@ DT_STRAIGHTPATH_OFFMESH_CONNECTION</div><div class="ttdoc">The vertex is the start of an off-mesh connection.</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00122">DetourNavMesh.h:122</a></div></div>
<div class="ttc" id="aclassdt_nav_mesh_query_html_a4b7b8deb4faceb4e351fe4ba43e0f165"><div class="ttname"><a href="../../dd/db0/classdt_nav_mesh_query.html#a4b7b8deb4faceb4e351fe4ba43e0f165">dtNavMeshQuery::appendPortals</a></div><div class="ttdeci">dtStatus appendPortals(const int startIdx, const int endIdx, const float *endPos, const dtPolyRef *path, float *straightPath, unsigned char *straightPathFlags, dtPolyRef *straightPathRefs, int *straightPathCount, const int maxStraightPath, const int options) const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01699">DetourNavMeshQuery.cpp:1699</a></div></div>
<div class="ttc" id="aclassdt_nav_mesh_query_html_aa53b9573e61eda951213ea9e4354e744"><div class="ttname"><a href="../../dd/db0/classdt_nav_mesh_query.html#aa53b9573e61eda951213ea9e4354e744">dtNavMeshQuery::closestPointOnPolyBoundary</a></div><div class="ttdeci">dtStatus closestPointOnPolyBoundary(dtPolyRef ref, const float *pos, float *closest) const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00539">DetourNavMeshQuery.cpp:539</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01699">appendPortals()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01662">appendVertex()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00539">closestPointOnPolyBoundary()</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00035">DT_BUFFER_TOO_SMALL</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00025">DT_FAILURE</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00027">DT_IN_PROGRESS</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00034">DT_INVALID_PARAM</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00037">DT_PARTIAL_RESULT</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00159">DT_POLYTYPE_GROUND</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00161">DT_POLYTYPE_OFFMESH_CONNECTION</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00129">DT_STRAIGHTPATH_ALL_CROSSINGS</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00128">DT_STRAIGHTPATH_AREA_CROSSINGS</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00121">DT_STRAIGHTPATH_END</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00122">DT_STRAIGHTPATH_OFFMESH_CONNECTION</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00120">DT_STRAIGHTPATH_START</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00026">DT_SUCCESS</a>, <a class="el" href="../../da/d60/_detour_assert_8h_source.html#l00047">dtAssert</a>, <a class="el" href="../../d5/de1/_detour_common_8cpp_source.html#l00170">dtDistancePtSegSqr2D()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00068">dtSqr()</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00048">dtStatusFailed()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00339">dtTriArea2D()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00191">dtVcopy()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00279">dtVequal()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00290">dtVisfinite()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02221">getPortalPoints()</a>, <a class="el" href="../../d5/d71/fmt_2include_2fmt_2core_8h_source.html#l01859">align::left</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00543">m_nav</a>, and <a class="el" href="../../d5/d71/fmt_2include_2fmt_2core_8h_source.html#l01859">align::right</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/server_2game_2_movement_2_movement_generators_2_path_generator_8cpp_source.html#l00517">PathGenerator::BuildPointPath()</a>, <a class="el" href="../../d3/dea/server_2game_2_movement_2_movement_generators_2_path_generator_8cpp_source.html#l00794">PathGenerator::GetSteerTarget()</a>, and <a class="el" href="../../d2/d4a/_mesh_extractor_8cpp_source.html#l00363">main()</a>.</p>

</div>
</div>
<a id="a05ddaa41019804494be7da66207882de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05ddaa41019804494be7da66207882de">&#9670;&nbsp;</a></span>getAttachedNavMesh()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../da/d16/classdt_nav_mesh.html">dtNavMesh</a>* dtNavMeshQuery::getAttachedNavMesh </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Gets the navigation mesh the query object is using. </p><dl class="section return"><dt>Returns</dt><dd>The navigation mesh the query object is using. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00504">504</a> of file <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html">DetourNavMeshQuery.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00543">m_nav</a>.</p>

</div>
</div>
<a id="ae12147fd8587b55ca6684bac0da05d4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae12147fd8587b55ca6684bac0da05d4e">&#9670;&nbsp;</a></span>getEdgeMidPoint() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> dtNavMeshQuery::getEdgeMidPoint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a>&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d5/d02/structdt_poly.html">dtPoly</a> *&#160;</td>
          <td class="paramname"><em>fromPoly</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a> *&#160;</td>
          <td class="paramname"><em>fromTile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a>&#160;</td>
          <td class="paramname"><em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d5/d02/structdt_poly.html">dtPoly</a> *&#160;</td>
          <td class="paramname"><em>toPoly</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a> *&#160;</td>
          <td class="paramname"><em>toTile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>mid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02328">2328</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;{</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>[3], <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">right</a>[3];</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/de6/_detour_status_8h.html#ab98b21afb80f30cc60a1f4e86ebc19d8">dtStatusFailed</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a5e509b958aaca7ee5fe62ec59b034b4c">getPortalPoints</a>(from, fromPoly, fromTile, to, toPoly, toTile, <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>, <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">right</a>)))</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;    mid[0] = (<a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>[0]+<a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">right</a>[0])*0.5f;</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;    mid[1] = (<a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>[1]+<a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">right</a>[1])*0.5f;</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;    mid[2] = (<a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>[2]+<a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">right</a>[2])*0.5f;</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a>;</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00025">DT_FAILURE</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00034">DT_INVALID_PARAM</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00026">DT_SUCCESS</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00048">dtStatusFailed()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02221">getPortalPoints()</a>, <a class="el" href="../../d5/d71/fmt_2include_2fmt_2core_8h_source.html#l01859">align::left</a>, and <a class="el" href="../../d5/d71/fmt_2include_2fmt_2core_8h_source.html#l01859">align::right</a>.</p>

</div>
</div>
<a id="a01e4c0b9bf01914da6f634b1a4953f45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01e4c0b9bf01914da6f634b1a4953f45">&#9670;&nbsp;</a></span>getEdgeMidPoint() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> dtNavMeshQuery::getEdgeMidPoint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a>&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a>&#160;</td>
          <td class="paramname"><em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>mid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns edge mid point between two polygons. </p>

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02316">2316</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;{</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>[3], <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">right</a>[3];</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> fromType, toType;</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/de6/_detour_status_8h.html#ab98b21afb80f30cc60a1f4e86ebc19d8">dtStatusFailed</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a5e509b958aaca7ee5fe62ec59b034b4c">getPortalPoints</a>(from, to, <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>,<a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">right</a>, fromType, toType)))</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;    mid[0] = (<a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>[0]+<a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">right</a>[0])*0.5f;</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;    mid[1] = (<a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>[1]+<a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">right</a>[1])*0.5f;</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;    mid[2] = (<a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>[2]+<a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">right</a>[2])*0.5f;</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a>;</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00025">DT_FAILURE</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00034">DT_INVALID_PARAM</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00026">DT_SUCCESS</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00048">dtStatusFailed()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02221">getPortalPoints()</a>, <a class="el" href="../../d5/d71/fmt_2include_2fmt_2core_8h_source.html#l01859">align::left</a>, and <a class="el" href="../../d5/d71/fmt_2include_2fmt_2core_8h_source.html#l01859">align::right</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l03443">findDistanceToWall()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00946">findPath()</a>, and <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01253">updateSlicedFindPath()</a>.</p>

</div>
</div>
<a id="a5f5baaa868aad36ba023ea81b10e70bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f5baaa868aad36ba023ea81b10e70bd">&#9670;&nbsp;</a></span>getNodePool()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">class <a class="el" href="../../d3/d3c/classdt_node_pool.html">dtNodePool</a>* dtNavMeshQuery::getNodePool </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Gets the node pool. </p><dl class="section return"><dt>Returns</dt><dd>The node pool. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00500">500</a> of file <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html">DetourNavMeshQuery.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00559">m_nodePool</a>.</p>

</div>
</div>
<a id="af0eadf81ceef919bd502469529b02fd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0eadf81ceef919bd502469529b02fd0">&#9670;&nbsp;</a></span>getPathFromDijkstraSearch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> dtNavMeshQuery::getPathFromDijkstraSearch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a>&#160;</td>
          <td class="paramname"><em>endRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>pathCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxPath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets a path from the explored nodes in the previous search. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">endRef</td><td>The reference id of the end polygon. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">path</td><td>An ordered list of polygon references representing the path. (Start to end.) [(polyRef) * <code>pathCount</code>] </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pathCount</td><td>The number of polygons returned in the <code>path</code> array. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">maxPath</td><td>The maximum number of polygons the <code>path</code> array can hold. [Limit: &gt;= 0] </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status flags. Returns DT_FAILURE | DT_INVALID_PARAM if any parameter is wrong, or if <code>endRef</code> was not explored in the previous search. Returns DT_SUCCESS | DT_BUFFER_TOO_SMALL if <code>path</code> cannot contain the entire path. In this case it is filled to capacity with a partial path. Otherwise returns DT_SUCCESS. </dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>The result of this function depends on the state of the query object. For that reason it should only be used immediately after one of the two Dijkstra searches, findPolysAroundCircle or findPolysAroundShape. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l03028">3028</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;{</div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a84ce3e44a2a97c5377b3b308825fcd37">isValidPolyRef</a>(endRef) || !path || !pathCount || maxPath &lt; 0)</div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160; </div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;    *pathCount = 0;</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160; </div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;    <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* endNode;</div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a5fa3decff570f26616282fcf50a3e7f9">findNodes</a>(endRef, &amp;endNode, 1) != 1 ||</div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;        (endNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp; <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974aa9a4b8aa94ba18584fa07b2d8ad9aac2">DT_NODE_CLOSED</a>) == 0)</div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160; </div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a5f6c1a4305b3a4dae4092dbb41a8f5ab">getPathToNode</a>(endNode, path, pathCount, maxPath);</div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00025">DT_FAILURE</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00034">DT_INVALID_PARAM</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00027">DT_NODE_CLOSED</a>, <a class="el" href="../../d1/d00/_detour_node_8cpp_source.html#l00089">dtNodePool::findNodes()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00043">dtNode::flags</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01140">getPathToNode()</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01216">dtNavMesh::isValidPolyRef()</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00543">m_nav</a>, and <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00559">m_nodePool</a>.</p>

</div>
</div>
<a id="a5f6c1a4305b3a4dae4092dbb41a8f5ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f6c1a4305b3a4dae4092dbb41a8f5ab">&#9670;&nbsp;</a></span>getPathToNode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> dtNavMeshQuery::getPathToNode </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/de4/structdt_node.html">dtNode</a> *&#160;</td>
          <td class="paramname"><em>endNode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>pathCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxPath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01140">1140</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;{</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    <span class="comment">// Find the length of the entire path.</span></div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* curNode = endNode;</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../df/de2/namespace_g3_d.html#a69a355f92fa3aab4f301667be00cd3eb">length</a> = 0;</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <span class="keywordflow">do</span></div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    {</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;        <a class="code" href="../../df/de2/namespace_g3_d.html#a69a355f92fa3aab4f301667be00cd3eb">length</a>++;</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        curNode = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a5f6d20bd49d338b03885909b0c13ccea">getNodeAtIdx</a>(curNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a>);</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    } <span class="keywordflow">while</span> (curNode);</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160; </div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <span class="comment">// If the path cannot be fully stored then advance to the last node we will be able to store.</span></div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    curNode = endNode;</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    <span class="keywordtype">int</span> writeCount;</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    <span class="keywordflow">for</span> (writeCount = <a class="code" href="../../df/de2/namespace_g3_d.html#a69a355f92fa3aab4f301667be00cd3eb">length</a>; writeCount &gt; maxPath; writeCount--)</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    {</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;        <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(curNode);</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160; </div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        curNode = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a5f6d20bd49d338b03885909b0c13ccea">getNodeAtIdx</a>(curNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a>);</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    }</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160; </div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    <span class="comment">// Write path</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = writeCount - 1; i &gt;= 0; i--)</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    {</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;        <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(curNode);</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160; </div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;        path[i] = curNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a>;</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;        curNode = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a5f6d20bd49d338b03885909b0c13ccea">getNodeAtIdx</a>(curNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a>);</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    }</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160; </div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(!curNode);</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160; </div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    *pathCount = <a class="code" href="../../dc/d41/_detour_common_8h.html#a1ba504117782e7d67fe3106ecd76988a">dtMin</a>(<a class="code" href="../../df/de2/namespace_g3_d.html#a69a355f92fa3aab4f301667be00cd3eb">length</a>, maxPath);</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160; </div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../df/de2/namespace_g3_d.html#a69a355f92fa3aab4f301667be00cd3eb">length</a> &gt; maxPath)</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a97c8292e3ce2ba0b63bfa4ca57de10af">DT_BUFFER_TOO_SMALL</a>;</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160; </div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a>;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;}</div>
<div class="ttc" id="a_detour_common_8h_html_a1ba504117782e7d67fe3106ecd76988a"><div class="ttname"><a href="../../dc/d41/_detour_common_8h.html#a1ba504117782e7d67fe3106ecd76988a">dtMin</a></div><div class="ttdeci">T dtMin(T a, T b)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d41/_detour_common_8h_source.html#l00052">DetourCommon.h:52</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_a69a355f92fa3aab4f301667be00cd3eb"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#a69a355f92fa3aab4f301667be00cd3eb">G3D::length</a></div><div class="ttdeci">float length(float v)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d0b/vector_math_8h_source.html#l00208">vectorMath.h:208</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00035">DT_BUFFER_TOO_SMALL</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00026">DT_SUCCESS</a>, <a class="el" href="../../da/d60/_detour_assert_8h_source.html#l00047">dtAssert</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00052">dtMin()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00068">dtNodePool::getNodeAtIdx()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00044">dtNode::id</a>, <a class="el" href="../../d3/d0b/vector_math_8h_source.html#l00208">G3D::length()</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00559">m_nodePool</a>, and <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00041">dtNode::pidx</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00946">findPath()</a>, and <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l03028">getPathFromDijkstraSearch()</a>.</p>

</div>
</div>
<a id="af8303a12749e252c6688c15c5c887b69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8303a12749e252c6688c15c5c887b69">&#9670;&nbsp;</a></span>getPolyHeight()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> dtNavMeshQuery::getPolyHeight </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a>&#160;</td>
          <td class="paramname"><em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>height</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets the height of the polygon at the provided position using the height detail. (Most accurate.) </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ref</td><td>The reference id of the polygon. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pos</td><td>A position within the xz-bounds of the polygon. [(x, y, z)] </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">height</td><td>The height at the surface of the polygon. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status flags for the query.</dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<p>Will return <a class="el" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | DT_INVALID_PARAM if the provided position is outside the xz-bounds of the polygon. </p>

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00594">594</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;{</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>);</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160; </div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* tile = 0;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* poly = 0;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/de6/_detour_status_8h.html#ab98b21afb80f30cc60a1f4e86ebc19d8">dtStatusFailed</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a36a84aa7296d5cc257eb3ddc38181253">getTileAndPolyByRef</a>(ref, &amp;tile, &amp;poly)))</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160; </div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a> || !<a class="code" href="../../dc/d41/_detour_common_8h.html#ae3ddf094d63f2630a272f4dd865db7a3">dtVisfinite2D</a>(<a class="code" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a>))</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160; </div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="comment">// We used to return success for offmesh connections, but the</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="comment">// getPolyHeight in DetourNavMesh does not do this, so special</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="comment">// case it here.</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="keywordflow">if</span> (poly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#a12a7d5dcd2f1d7164531be4ecb5f35a4">getType</a>() == <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#a19937b4ff098f7c52ee08af1b5f39c98a5454d6f0a19d046264f5305baa7ba858">DT_POLYTYPE_OFFMESH_CONNECTION</a>)</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span>* v0 = &amp;tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[poly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[0]*3];</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span>* v1 = &amp;tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[poly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[1]*3];</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        <span class="keywordtype">float</span> t;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <a class="code" href="../../dc/d41/_detour_common_8h.html#a99afe0b6e77a0c800e9582faea87cf6d">dtDistancePtSegSqr2D</a>(<a class="code" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a>, v0, v1, t);</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        <span class="keywordflow">if</span> (height)</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;            *height = v0[1] + (v1[1] - v0[1])*t;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160; </div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a>;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    }</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160; </div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a9ded2afd142447b742c04b4c538ee20c">getPolyHeight</a>(tile, poly, <a class="code" href="../../db/d36/base64_8c.html#a5e75484d7880fa39b31f27c3d7058936">pos</a>, height)</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        ? <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        : <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;}</div>
<div class="ttc" id="a_detour_common_8h_html_ae3ddf094d63f2630a272f4dd865db7a3"><div class="ttname"><a href="../../dc/d41/_detour_common_8h.html#ae3ddf094d63f2630a272f4dd865db7a3">dtVisfinite2D</a></div><div class="ttdeci">bool dtVisfinite2D(const float *v)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d41/_detour_common_8h_source.html#l00302">DetourCommon.h:302</a></div></div>
<div class="ttc" id="aclassdt_nav_mesh_html_a9ded2afd142447b742c04b4c538ee20c"><div class="ttname"><a href="../../da/d16/classdt_nav_mesh.html#a9ded2afd142447b742c04b4c538ee20c">dtNavMesh::getPolyHeight</a></div><div class="ttdeci">bool getPolyHeight(const dtMeshTile *tile, const dtPoly *poly, const float *pos, float *height) const</div><div class="ttdoc">Returns whether position is over the poly and the height at the position if so.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l00677">DetourNavMesh.cpp:677</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00025">DT_FAILURE</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00034">DT_INVALID_PARAM</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00161">DT_POLYTYPE_OFFMESH_CONNECTION</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00026">DT_SUCCESS</a>, <a class="el" href="../../da/d60/_detour_assert_8h_source.html#l00047">dtAssert</a>, <a class="el" href="../../d5/de1/_detour_common_8cpp_source.html#l00170">dtDistancePtSegSqr2D()</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00048">dtStatusFailed()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00302">dtVisfinite2D()</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l00677">dtNavMesh::getPolyHeight()</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01190">dtNavMesh::getTileAndPolyByRef()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00199">dtPoly::getType()</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00543">m_nav</a>, <a class="el" href="../../db/d36/base64_8c_source.html#l00104">pos()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00174">dtPoly::verts</a>, and <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00300">dtMeshTile::verts</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/server_2game_2_movement_2_movement_generators_2_path_generator_8cpp_source.html#l00162">PathGenerator::BuildPolyPath()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00221">findRandomPoint()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00316">findRandomPointAroundCircle()</a>, and <a class="el" href="../../d3/dea/server_2game_2_movement_2_movement_generators_2_path_generator_8cpp_source.html#l00832">PathGenerator::FindSmoothPath()</a>.</p>

</div>
</div>
<a id="a2c49662f07e52f1488622089952a154c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c49662f07e52f1488622089952a154c">&#9670;&nbsp;</a></span>getPolyWallSegments()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> dtNavMeshQuery::getPolyWallSegments </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a>&#160;</td>
          <td class="paramname"><em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *&#160;</td>
          <td class="paramname"><em>filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>segmentVerts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *&#160;</td>
          <td class="paramname"><em>segmentRefs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>segmentCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int&#160;</td>
          <td class="paramname"><em>maxSegments</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the segments for the specified polygon, optionally including portals. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ref</td><td>The reference id of the polygon. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filter</td><td>The polygon filter to apply to the query. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">segmentVerts</td><td>The segments. [(ax, ay, az, bx, by, bz) * segmentCount] </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">segmentRefs</td><td>The reference ids of each segment's neighbor polygon. Or zero if the segment is a wall. [opt] [(parentRef) * <code>segmentCount</code>] </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">segmentCount</td><td>The number of segments returned. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">maxSegments</td><td>The maximum number of segments the result arrays can hold. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status flags for the query.</dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<p>If the <code>segmentRefs</code> parameter is provided, then all polygon segments will be returned. Otherwise only the wall segments are returned.</p>
<p>A segment that is normally a portal will be included in the result set as a wall if the <code>filter</code> results in the neighbor polygon becoomming impassable.</p>
<p>The <code>segmentVerts</code> and <code>segmentRefs</code> buffers should normally be sized for the maximum segments per polygon of the source navigation mesh. </p>

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l03287">3287</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;{</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>);</div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160; </div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;    <span class="keywordflow">if</span> (!segmentCount)</div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;    </div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;    *segmentCount = 0;</div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160; </div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* tile = 0;</div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* poly = 0;</div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/de6/_detour_status_8h.html#ab98b21afb80f30cc60a1f4e86ebc19d8">dtStatusFailed</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a36a84aa7296d5cc257eb3ddc38181253">getTileAndPolyByRef</a>(ref, &amp;tile, &amp;poly)))</div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160; </div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;    <span class="keywordflow">if</span> (!filter || !segmentVerts || maxSegments &lt; 0)</div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;    </div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;    <span class="keywordtype">int</span> n = 0;</div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> MAX_INTERVAL = 16;</div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;    <a class="code" href="../../d8/d59/structdt_seg_interval.html">dtSegInterval</a> ints[MAX_INTERVAL];</div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;    <span class="keywordtype">int</span> nints;</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;    </div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> storePortals = segmentRefs != 0;</div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;    </div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;    <a class="code" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> status = <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a>;</div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;    </div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0, j = (<span class="keywordtype">int</span>)poly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#af940c431464c022f844e61130f83d9c2">vertCount</a>-1; i &lt; (<span class="keywordtype">int</span>)poly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#af940c431464c022f844e61130f83d9c2">vertCount</a>; j = i++)</div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;    {</div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;        <span class="comment">// Skip non-solid edges.</span></div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;        nints = 0;</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;        <span class="keywordflow">if</span> (poly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#ac4f5aa32df32aa5b1385f76f697376af">neis</a>[j] &amp; <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#aa2d400dcfaef68b62c1f1118de13e87e">DT_EXT_LINK</a>)</div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;        {</div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;            <span class="comment">// Tile border.</span></div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k = poly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#a671fd6893087936e80fcd17f7f666c0e">firstLink</a>; k != <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#aca31b5eadafd19285e16eca707b3295b">DT_NULL_LINK</a>; k = tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[k].<a class="code" href="../../df/d2d/structdt_link.html#a475b893f03bf4c942ab6376d83dca82e">next</a>)</div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;            {</div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;                <span class="keyword">const</span> <a class="code" href="../../df/d2d/structdt_link.html">dtLink</a>* <a class="code" href="../../dd/d95/structlink.html">link</a> = &amp;tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[k];</div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;edge == j)</div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;                {</div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;ref != 0)</div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;                    {</div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;                        <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* neiTile = 0;</div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;                        <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* neiPoly = 0;</div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;                        <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#ac5c5b89a6af63b7de29089ae83091e0f">getTileAndPolyByRefUnsafe</a>(<a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;ref, &amp;neiTile, &amp;neiPoly);</div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;                        <span class="keywordflow">if</span> (filter-&gt;<a class="code" href="../../d3/d5f/classdt_query_filter.html#aaf072b8617dfbd4701a8e07f0f10be9c">passFilter</a>(<a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;ref, neiTile, neiPoly))</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;                        {</div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;                            <a class="code" href="../../de/de4/_detour_nav_mesh_query_8cpp.html#ac742e93c715068b76c2592ae822a39ff">insertInterval</a>(ints, nints, MAX_INTERVAL, <a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;bmin, <a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;bmax, <a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;ref);</div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;                        }</div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;                    }</div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;                }</div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;            }</div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;        }</div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;        {</div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;            <span class="comment">// Internal edge</span></div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;            <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> neiRef = 0;</div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;            <span class="keywordflow">if</span> (poly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#ac4f5aa32df32aa5b1385f76f697376af">neis</a>[j])</div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;            {</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../de/d17/lf_8h.html#a359b2d783027136786cee9f243efcbde">idx</a> = (<span class="keywordtype">unsigned</span> int)(poly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#ac4f5aa32df32aa5b1385f76f697376af">neis</a>[j]-1);</div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;                neiRef = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a0741871ed1357c51e3847f22673fcc9c">getPolyRefBase</a>(tile) | <a class="code" href="../../de/d17/lf_8h.html#a359b2d783027136786cee9f243efcbde">idx</a>;</div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;                <span class="keywordflow">if</span> (!filter-&gt;<a class="code" href="../../d3/d5f/classdt_query_filter.html#aaf072b8617dfbd4701a8e07f0f10be9c">passFilter</a>(neiRef, tile, &amp;tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abd8ed5dcf003464a7d8c456f671e6c1e">polys</a>[<a class="code" href="../../de/d17/lf_8h.html#a359b2d783027136786cee9f243efcbde">idx</a>]))</div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;                    neiRef = 0;</div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;            }</div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160; </div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;            <span class="comment">// If the edge leads to another polygon and portals are not stored, skip.</span></div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;            <span class="keywordflow">if</span> (neiRef != 0 &amp;&amp; !storePortals)</div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;            </div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;            <span class="keywordflow">if</span> (n &lt; maxSegments)</div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;            {</div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">float</span>* vj = &amp;tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[poly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[j]*3];</div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">float</span>* vi = &amp;tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[poly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[i]*3];</div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;                <span class="keywordtype">float</span>* seg = &amp;segmentVerts[n*6];</div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;                <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(seg+0, vj);</div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;                <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(seg+3, vi);</div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;                <span class="keywordflow">if</span> (segmentRefs)</div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;                    segmentRefs[n] = neiRef;</div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;                n++;</div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;            }</div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;            {</div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;                status |= <a class="code" href="../../d8/de6/_detour_status_8h.html#a97c8292e3ce2ba0b63bfa4ca57de10af">DT_BUFFER_TOO_SMALL</a>;</div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;            }</div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;            </div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;        }</div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;        </div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;        <span class="comment">// Add sentinels</span></div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;        <a class="code" href="../../de/de4/_detour_nav_mesh_query_8cpp.html#ac742e93c715068b76c2592ae822a39ff">insertInterval</a>(ints, nints, MAX_INTERVAL, -1, 0, 0);</div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;        <a class="code" href="../../de/de4/_detour_nav_mesh_query_8cpp.html#ac742e93c715068b76c2592ae822a39ff">insertInterval</a>(ints, nints, MAX_INTERVAL, 255, 256, 0);</div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;        </div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;        <span class="comment">// Store segments.</span></div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span>* vj = &amp;tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[poly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[j]*3];</div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span>* vi = &amp;tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[poly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[i]*3];</div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 1; k &lt; nints; ++k)</div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;        {</div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;            <span class="comment">// Portal segment.</span></div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;            <span class="keywordflow">if</span> (storePortals &amp;&amp; ints[k].ref)</div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;            {</div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">float</span> tmin = ints[k].<a class="code" href="../../d8/d59/structdt_seg_interval.html#a93cb86ab8a97836ee145bb03bab7ed89">tmin</a>/255.0f; </div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">float</span> tmax = ints[k].<a class="code" href="../../d8/d59/structdt_seg_interval.html#a4463687b08087da04f076ec79beb5c03">tmax</a>/255.0f; </div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;                <span class="keywordflow">if</span> (n &lt; maxSegments)</div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;                {</div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;                    <span class="keywordtype">float</span>* seg = &amp;segmentVerts[n*6];</div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;                    <a class="code" href="../../dc/d41/_detour_common_8h.html#a7b3295d18cd477fca1fe541b59b1b231">dtVlerp</a>(seg+0, vj,vi, tmin);</div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;                    <a class="code" href="../../dc/d41/_detour_common_8h.html#a7b3295d18cd477fca1fe541b59b1b231">dtVlerp</a>(seg+3, vj,vi, tmax);</div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;                    <span class="keywordflow">if</span> (segmentRefs)</div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;                        segmentRefs[n] = ints[k].<a class="code" href="../../d8/d59/structdt_seg_interval.html#adeaef89322156ccfb6ecd7fc5e259b70">ref</a>;</div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;                    n++;</div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;                }</div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;                {</div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;                    status |= <a class="code" href="../../d8/de6/_detour_status_8h.html#a97c8292e3ce2ba0b63bfa4ca57de10af">DT_BUFFER_TOO_SMALL</a>;</div>
<div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;                }</div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;            }</div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160; </div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;            <span class="comment">// Wall segment.</span></div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> imin = ints[k-1].<a class="code" href="../../d8/d59/structdt_seg_interval.html#a4463687b08087da04f076ec79beb5c03">tmax</a>;</div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> imax = ints[k].<a class="code" href="../../d8/d59/structdt_seg_interval.html#a93cb86ab8a97836ee145bb03bab7ed89">tmin</a>;</div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;            <span class="keywordflow">if</span> (imin != imax)</div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;            {</div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">float</span> tmin = imin/255.0f; </div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">float</span> tmax = imax/255.0f; </div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;                <span class="keywordflow">if</span> (n &lt; maxSegments)</div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;                {</div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;                    <span class="keywordtype">float</span>* seg = &amp;segmentVerts[n*6];</div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;                    <a class="code" href="../../dc/d41/_detour_common_8h.html#a7b3295d18cd477fca1fe541b59b1b231">dtVlerp</a>(seg+0, vj,vi, tmin);</div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;                    <a class="code" href="../../dc/d41/_detour_common_8h.html#a7b3295d18cd477fca1fe541b59b1b231">dtVlerp</a>(seg+3, vj,vi, tmax);</div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;                    <span class="keywordflow">if</span> (segmentRefs)</div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;                        segmentRefs[n] = 0;</div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;                    n++;</div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;                }</div>
<div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;                {</div>
<div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;                    status |= <a class="code" href="../../d8/de6/_detour_status_8h.html#a97c8292e3ce2ba0b63bfa4ca57de10af">DT_BUFFER_TOO_SMALL</a>;</div>
<div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;                }</div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;            }</div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;        }</div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;    }</div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;    </div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;    *segmentCount = n;</div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;    </div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;    <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;}</div>
<div class="ttc" id="a_detour_nav_mesh_query_8cpp_html_ac742e93c715068b76c2592ae822a39ff"><div class="ttname"><a href="../../de/de4/_detour_nav_mesh_query_8cpp.html#ac742e93c715068b76c2592ae822a39ff">insertInterval</a></div><div class="ttdeci">static void insertInterval(dtSegInterval *ints, int &amp;nints, const int maxInts, const short tmin, const short tmax, const dtPolyRef ref)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l03254">DetourNavMeshQuery.cpp:3254</a></div></div>
<div class="ttc" id="astructdt_seg_interval_html"><div class="ttname"><a href="../../d8/d59/structdt_seg_interval.html">dtSegInterval</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l03248">DetourNavMeshQuery.cpp:3249</a></div></div>
<div class="ttc" id="astructdt_seg_interval_html_a4463687b08087da04f076ec79beb5c03"><div class="ttname"><a href="../../d8/d59/structdt_seg_interval.html#a4463687b08087da04f076ec79beb5c03">dtSegInterval::tmax</a></div><div class="ttdeci">short tmax</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l03251">DetourNavMeshQuery.cpp:3251</a></div></div>
<div class="ttc" id="astructdt_seg_interval_html_a93cb86ab8a97836ee145bb03bab7ed89"><div class="ttname"><a href="../../d8/d59/structdt_seg_interval.html#a93cb86ab8a97836ee145bb03bab7ed89">dtSegInterval::tmin</a></div><div class="ttdeci">short tmin</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l03251">DetourNavMeshQuery.cpp:3251</a></div></div>
<div class="ttc" id="astructdt_seg_interval_html_adeaef89322156ccfb6ecd7fc5e259b70"><div class="ttname"><a href="../../d8/d59/structdt_seg_interval.html#adeaef89322156ccfb6ecd7fc5e259b70">dtSegInterval::ref</a></div><div class="ttdeci">dtPolyRef ref</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l03250">DetourNavMeshQuery.cpp:3250</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00035">DT_BUFFER_TOO_SMALL</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00097">DT_EXT_LINK</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00025">DT_FAILURE</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00034">DT_INVALID_PARAM</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00100">DT_NULL_LINK</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00026">DT_SUCCESS</a>, <a class="el" href="../../da/d60/_detour_assert_8h_source.html#l00047">dtAssert</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00048">dtStatusFailed()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00191">dtVcopy()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00118">dtVlerp()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00170">dtPoly::firstLink</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01349">dtNavMesh::getPolyRefBase()</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01190">dtNavMesh::getTileAndPolyByRef()</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01208">dtNavMesh::getTileAndPolyByRefUnsafe()</a>, <a class="el" href="../../de/d17/lf_8h_source.html#l00086">idx</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l03254">insertInterval()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00301">dtMeshTile::links</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00543">m_nav</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00177">dtPoly::neis</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00217">dtLink::next</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00087">dtQueryFilter::passFilter()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00299">dtMeshTile::polys</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l03250">dtSegInterval::ref</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l03251">dtSegInterval::tmax</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l03251">dtSegInterval::tmin</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00183">dtPoly::vertCount</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00174">dtPoly::verts</a>, and <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00300">dtMeshTile::verts</a>.</p>

</div>
</div>
<a id="ac0a98f3cd9dc7fae9c1394115c7f47d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0a98f3cd9dc7fae9c1394115c7f47d1">&#9670;&nbsp;</a></span>getPortalPoints() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> dtNavMeshQuery::getPortalPoints </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a>&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d5/d02/structdt_poly.html">dtPoly</a> *&#160;</td>
          <td class="paramname"><em>fromPoly</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a> *&#160;</td>
          <td class="paramname"><em>fromTile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a>&#160;</td>
          <td class="paramname"><em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d5/d02/structdt_poly.html">dtPoly</a> *&#160;</td>
          <td class="paramname"><em>toPoly</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a> *&#160;</td>
          <td class="paramname"><em>toTile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>right</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02242">2242</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;{</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;    <span class="comment">// Find the link that points to the &#39;to&#39; polygon.</span></div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../df/d2d/structdt_link.html">dtLink</a>* <a class="code" href="../../dd/d95/structlink.html">link</a> = 0;</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = fromPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#a671fd6893087936e80fcd17f7f666c0e">firstLink</a>; i != <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#aca31b5eadafd19285e16eca707b3295b">DT_NULL_LINK</a>; i = fromTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[i].<a class="code" href="../../df/d2d/structdt_link.html#a475b893f03bf4c942ab6376d83dca82e">next</a>)</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;    {</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;        <span class="keywordflow">if</span> (fromTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[i].<a class="code" href="../../df/d2d/structdt_link.html#a34c73193fed76de347adb0f2e9841659">ref</a> == to)</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;        {</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;            <a class="code" href="../../dd/d95/structlink.html">link</a> = &amp;fromTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[i];</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;        }</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;    }</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d95/structlink.html">link</a>)</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;    </div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;    <span class="comment">// Handle off-mesh connections.</span></div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    <span class="keywordflow">if</span> (fromPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#a12a7d5dcd2f1d7164531be4ecb5f35a4">getType</a>() == <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#a19937b4ff098f7c52ee08af1b5f39c98a5454d6f0a19d046264f5305baa7ba858">DT_POLYTYPE_OFFMESH_CONNECTION</a>)</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;    {</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;        <span class="comment">// Find link that points to first vertex.</span></div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = fromPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#a671fd6893087936e80fcd17f7f666c0e">firstLink</a>; i != <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#aca31b5eadafd19285e16eca707b3295b">DT_NULL_LINK</a>; i = fromTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[i].<a class="code" href="../../df/d2d/structdt_link.html#a475b893f03bf4c942ab6376d83dca82e">next</a>)</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;        {</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;            <span class="keywordflow">if</span> (fromTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[i].<a class="code" href="../../df/d2d/structdt_link.html#a34c73193fed76de347adb0f2e9841659">ref</a> == to)</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;            {</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> v = fromTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[i].<a class="code" href="../../df/d2d/structdt_link.html#a14ff7d317cbceba6ab9d1958b463cb3a">edge</a>;</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;                <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(<a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>, &amp;fromTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[fromPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[v]*3]);</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;                <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(<a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">right</a>, &amp;fromTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[fromPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[v]*3]);</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a>;</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;            }</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;        }</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;    }</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;    </div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;    <span class="keywordflow">if</span> (toPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#a12a7d5dcd2f1d7164531be4ecb5f35a4">getType</a>() == <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#a19937b4ff098f7c52ee08af1b5f39c98a5454d6f0a19d046264f5305baa7ba858">DT_POLYTYPE_OFFMESH_CONNECTION</a>)</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;    {</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = toPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#a671fd6893087936e80fcd17f7f666c0e">firstLink</a>; i != <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#aca31b5eadafd19285e16eca707b3295b">DT_NULL_LINK</a>; i = toTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[i].<a class="code" href="../../df/d2d/structdt_link.html#a475b893f03bf4c942ab6376d83dca82e">next</a>)</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;        {</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;            <span class="keywordflow">if</span> (toTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[i].<a class="code" href="../../df/d2d/structdt_link.html#a34c73193fed76de347adb0f2e9841659">ref</a> == from)</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;            {</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> v = toTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[i].<a class="code" href="../../df/d2d/structdt_link.html#a14ff7d317cbceba6ab9d1958b463cb3a">edge</a>;</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;                <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(<a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>, &amp;toTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[toPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[v]*3]);</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;                <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(<a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">right</a>, &amp;toTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[toPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[v]*3]);</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a>;</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;            }</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;        }</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;    }</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;    </div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;    <span class="comment">// Find portal vertices.</span></div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> v0 = fromPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[<a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;edge];</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> v1 = fromPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[(<a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;edge+1) % (<span class="keywordtype">int</span>)fromPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#af940c431464c022f844e61130f83d9c2">vertCount</a>];</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;    <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(<a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>, &amp;fromTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[v0*3]);</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;    <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(<a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">right</a>, &amp;fromTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[v1*3]);</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;    </div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;    <span class="comment">// If the link is at tile boundary, dtClamp the vertices to</span></div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;    <span class="comment">// the link width.</span></div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;side != 0xff)</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;    {</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;        <span class="comment">// Unpack portal limits.</span></div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;bmin != 0 || <a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;bmax != 255)</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;        {</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> s = 1.0f/255.0f;</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> tmin = <a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;bmin*s;</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> tmax = <a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;bmax*s;</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;            <a class="code" href="../../dc/d41/_detour_common_8h.html#a7b3295d18cd477fca1fe541b59b1b231">dtVlerp</a>(<a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>, &amp;fromTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[v0*3], &amp;fromTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[v1*3], tmin);</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;            <a class="code" href="../../dc/d41/_detour_common_8h.html#a7b3295d18cd477fca1fe541b59b1b231">dtVlerp</a>(<a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">right</a>, &amp;fromTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[v0*3], &amp;fromTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[v1*3], tmax);</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;        }</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;    }</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;    </div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a>;</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;}</div>
<div class="ttc" id="astructdt_link_html_a14ff7d317cbceba6ab9d1958b463cb3a"><div class="ttname"><a href="../../df/d2d/structdt_link.html#a14ff7d317cbceba6ab9d1958b463cb3a">dtLink::edge</a></div><div class="ttdeci">unsigned char edge</div><div class="ttdoc">Index of the polygon edge that owns this link.</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00218">DetourNavMesh.h:218</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00025">DT_FAILURE</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00034">DT_INVALID_PARAM</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00100">DT_NULL_LINK</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00161">DT_POLYTYPE_OFFMESH_CONNECTION</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00026">DT_SUCCESS</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00191">dtVcopy()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00118">dtVlerp()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00218">dtLink::edge</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00170">dtPoly::firstLink</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00199">dtPoly::getType()</a>, <a class="el" href="../../d5/d71/fmt_2include_2fmt_2core_8h_source.html#l01859">align::left</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00301">dtMeshTile::links</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00217">dtLink::next</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00216">dtLink::ref</a>, <a class="el" href="../../d5/d71/fmt_2include_2fmt_2core_8h_source.html#l01859">align::right</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00183">dtPoly::vertCount</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00174">dtPoly::verts</a>, and <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00300">dtMeshTile::verts</a>.</p>

</div>
</div>
<a id="a5e509b958aaca7ee5fe62ec59b034b4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e509b958aaca7ee5fe62ec59b034b4c">&#9670;&nbsp;</a></span>getPortalPoints() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> dtNavMeshQuery::getPortalPoints </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a>&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a>&#160;</td>
          <td class="paramname"><em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>right</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char &amp;&#160;</td>
          <td class="paramname"><em>fromType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char &amp;&#160;</td>
          <td class="paramname"><em>toType</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns portal points between two polygons. </p>

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02221">2221</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;{</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>);</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;    </div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* fromTile = 0;</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* fromPoly = 0;</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/de6/_detour_status_8h.html#ab98b21afb80f30cc60a1f4e86ebc19d8">dtStatusFailed</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a36a84aa7296d5cc257eb3ddc38181253">getTileAndPolyByRef</a>(from, &amp;fromTile, &amp;fromPoly)))</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;    fromType = fromPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#a12a7d5dcd2f1d7164531be4ecb5f35a4">getType</a>();</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160; </div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* toTile = 0;</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* toPoly = 0;</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/de6/_detour_status_8h.html#ab98b21afb80f30cc60a1f4e86ebc19d8">dtStatusFailed</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a36a84aa7296d5cc257eb3ddc38181253">getTileAndPolyByRef</a>(to, &amp;toTile, &amp;toPoly)))</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;    toType = toPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#a12a7d5dcd2f1d7164531be4ecb5f35a4">getType</a>();</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;        </div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a5e509b958aaca7ee5fe62ec59b034b4c">getPortalPoints</a>(from, fromPoly, fromTile, to, toPoly, toTile, <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>, <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">right</a>);</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00025">DT_FAILURE</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00034">DT_INVALID_PARAM</a>, <a class="el" href="../../da/d60/_detour_assert_8h_source.html#l00047">dtAssert</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00048">dtStatusFailed()</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01190">dtNavMesh::getTileAndPolyByRef()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00199">dtPoly::getType()</a>, <a class="el" href="../../d5/d71/fmt_2include_2fmt_2core_8h_source.html#l01859">align::left</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00543">m_nav</a>, and <a class="el" href="../../d5/d71/fmt_2include_2fmt_2core_8h_source.html#l01859">align::right</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01699">appendPortals()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l03065">findLocalNeighbourhood()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02693">findPolysAroundCircle()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02867">findPolysAroundShape()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00316">findRandomPointAroundCircle()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01766">findStraightPath()</a>, and <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02316">getEdgeMidPoint()</a>.</p>

</div>
</div>
<a id="acb51d0d2798d0bc7c669ac38c25d4116"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb51d0d2798d0bc7c669ac38c25d4116">&#9670;&nbsp;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> dtNavMeshQuery::init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../da/d16/classdt_nav_mesh.html">dtNavMesh</a> *&#160;</td>
          <td class="paramname"><em>nav</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int&#160;</td>
          <td class="paramname"><em>maxNodes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes the query object. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">nav</td><td>Pointer to the <a class="el" href="../../da/d16/classdt_nav_mesh.html">dtNavMesh</a> object to use for all queries. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">maxNodes</td><td>Maximum number of search nodes. [Limits: 0 &lt; value &lt;= 65535] </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status flags for the query.</dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<p>Must be the first function called after construction, before other functions are used.</p>
<p>This function can be used multiple times. </p>

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00166">166</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;{</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">if</span> (maxNodes &gt; <a class="code" href="../../da/dfb/_detour_node_8h.html#acef3b5e4fc85d943523912f705df710d">DT_NULL_IDX</a> || maxNodes &gt; (1 &lt;&lt; <a class="code" href="../../da/dfb/_detour_node_8h.html#ad5fac666b7b3afcd2bfdc861b5183b37">DT_NODE_PARENT_BITS</a>) - 1)</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160; </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a> = nav;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a> || <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#ad72b1d9c53d064e7b975bbb073e37b3c">getMaxNodes</a>() &lt; maxNodes)</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>)</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#acd74c85e290d5b7bcd1f9c44905a0f74">~dtNodePool</a>();</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            <a class="code" href="../../df/dba/_detour_alloc_8h.html#adb7919ae2642d1a487ce5fce6ae3af0d">dtFree</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a> = 0;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        }</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a> = <span class="keyword">new</span> (<a class="code" href="../../df/dba/_detour_alloc_8h.html#ac7a1c461b037f7cc0cd1b2e480d12920">dtAlloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d3/d3c/classdt_node_pool.html">dtNodePool</a>), <a class="code" href="../../df/dba/_detour_alloc_8h.html#a318bc084ec7fefd878cd36e0846bd14da4b5dc5bf08bcea4978a84327c7faf39f">DT_ALLOC_PERM</a>)) <a class="code" href="../../d3/d3c/classdt_node_pool.html">dtNodePool</a>(maxNodes, <a class="code" href="../../dc/d41/_detour_common_8h.html#aca8a96b35bdd0d6ca037cb40611bc1b5">dtNextPow2</a>(maxNodes/4));</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>)</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a4c4375ffc9ca7a0425af2b39449eb19e">DT_OUT_OF_MEMORY</a>;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    }</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a4341af64b1f043b2775b7f1abae34d7b">clear</a>();</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a4a767464a8ed2c20954a69d26b5ac554">m_tinyNodePool</a>)</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a4a767464a8ed2c20954a69d26b5ac554">m_tinyNodePool</a> = <span class="keyword">new</span> (<a class="code" href="../../df/dba/_detour_alloc_8h.html#ac7a1c461b037f7cc0cd1b2e480d12920">dtAlloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d3/d3c/classdt_node_pool.html">dtNodePool</a>), <a class="code" href="../../df/dba/_detour_alloc_8h.html#a318bc084ec7fefd878cd36e0846bd14da4b5dc5bf08bcea4978a84327c7faf39f">DT_ALLOC_PERM</a>)) <a class="code" href="../../d3/d3c/classdt_node_pool.html">dtNodePool</a>(64, 32);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a4a767464a8ed2c20954a69d26b5ac554">m_tinyNodePool</a>)</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a4c4375ffc9ca7a0425af2b39449eb19e">DT_OUT_OF_MEMORY</a>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a4a767464a8ed2c20954a69d26b5ac554">m_tinyNodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a4341af64b1f043b2775b7f1abae34d7b">clear</a>();</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    }</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    </div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a> || <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a3bd1e5d3450e90384d8d8ce7f59080de">getCapacity</a>() &lt; maxNodes)</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>)</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a836fbfbac11e06eeadd76919a9bba943">~dtNodeQueue</a>();</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            <a class="code" href="../../df/dba/_detour_alloc_8h.html#adb7919ae2642d1a487ce5fce6ae3af0d">dtFree</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a> = 0;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a> = <span class="keyword">new</span> (<a class="code" href="../../df/dba/_detour_alloc_8h.html#ac7a1c461b037f7cc0cd1b2e480d12920">dtAlloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../dc/d2a/classdt_node_queue.html">dtNodeQueue</a>), <a class="code" href="../../df/dba/_detour_alloc_8h.html#a318bc084ec7fefd878cd36e0846bd14da4b5dc5bf08bcea4978a84327c7faf39f">DT_ALLOC_PERM</a>)) <a class="code" href="../../dc/d2a/classdt_node_queue.html">dtNodeQueue</a>(maxNodes);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>)</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a4c4375ffc9ca7a0425af2b39449eb19e">DT_OUT_OF_MEMORY</a>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#aa0f83a0d1f38b0b97fb549d1372c8be7">clear</a>();</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;}</div>
<div class="ttc" id="a_detour_alloc_8h_html_a318bc084ec7fefd878cd36e0846bd14da4b5dc5bf08bcea4978a84327c7faf39f"><div class="ttname"><a href="../../df/dba/_detour_alloc_8h.html#a318bc084ec7fefd878cd36e0846bd14da4b5dc5bf08bcea4978a84327c7faf39f">DT_ALLOC_PERM</a></div><div class="ttdeci">@ DT_ALLOC_PERM</div><div class="ttdoc">Memory persist after a function call.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dba/_detour_alloc_8h_source.html#l00028">DetourAlloc.h:28</a></div></div>
<div class="ttc" id="a_detour_alloc_8h_html_ac7a1c461b037f7cc0cd1b2e480d12920"><div class="ttname"><a href="../../df/dba/_detour_alloc_8h.html#ac7a1c461b037f7cc0cd1b2e480d12920">dtAlloc</a></div><div class="ttdeci">void * dtAlloc(size_t size, dtAllocHint hint)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbb/_detour_alloc_8cpp_source.html#l00041">DetourAlloc.cpp:41</a></div></div>
<div class="ttc" id="a_detour_common_8h_html_aca8a96b35bdd0d6ca037cb40611bc1b5"><div class="ttname"><a href="../../dc/d41/_detour_common_8h.html#aca8a96b35bdd0d6ca037cb40611bc1b5">dtNextPow2</a></div><div class="ttdeci">unsigned int dtNextPow2(unsigned int v)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d41/_detour_common_8h_source.html#l00440">DetourCommon.h:440</a></div></div>
<div class="ttc" id="a_detour_node_8h_html_acef3b5e4fc85d943523912f705df710d"><div class="ttname"><a href="../../da/dfb/_detour_node_8h.html#acef3b5e4fc85d943523912f705df710d">DT_NULL_IDX</a></div><div class="ttdeci">static const dtNodeIndex DT_NULL_IDX</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/_detour_node_8h_source.html#l00032">DetourNode.h:32</a></div></div>
<div class="ttc" id="a_detour_node_8h_html_ad5fac666b7b3afcd2bfdc861b5183b37"><div class="ttname"><a href="../../da/dfb/_detour_node_8h.html#ad5fac666b7b3afcd2bfdc861b5183b37">DT_NODE_PARENT_BITS</a></div><div class="ttdeci">static const int DT_NODE_PARENT_BITS</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/_detour_node_8h_source.html#l00034">DetourNode.h:34</a></div></div>
<div class="ttc" id="a_detour_status_8h_html_a4c4375ffc9ca7a0425af2b39449eb19e"><div class="ttname"><a href="../../d8/de6/_detour_status_8h.html#a4c4375ffc9ca7a0425af2b39449eb19e">DT_OUT_OF_MEMORY</a></div><div class="ttdeci">static const unsigned int DT_OUT_OF_MEMORY</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de6/_detour_status_8h_source.html#l00033">DetourStatus.h:33</a></div></div>
<div class="ttc" id="aclassdt_node_pool_html"><div class="ttname"><a href="../../d3/d3c/classdt_node_pool.html">dtNodePool</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/_detour_node_8h_source.html#l00049">DetourNode.h:50</a></div></div>
<div class="ttc" id="aclassdt_node_pool_html_ad72b1d9c53d064e7b975bbb073e37b3c"><div class="ttname"><a href="../../d3/d3c/classdt_node_pool.html#ad72b1d9c53d064e7b975bbb073e37b3c">dtNodePool::getMaxNodes</a></div><div class="ttdeci">int getMaxNodes() const</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/_detour_node_8h_source.html#l00088">DetourNode.h:88</a></div></div>
<div class="ttc" id="aclassdt_node_queue_html"><div class="ttname"><a href="../../dc/d2a/classdt_node_queue.html">dtNodeQueue</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/_detour_node_8h_source.html#l00108">DetourNode.h:109</a></div></div>
<div class="ttc" id="aclassdt_node_queue_html_a3bd1e5d3450e90384d8d8ce7f59080de"><div class="ttname"><a href="../../dc/d2a/classdt_node_queue.html#a3bd1e5d3450e90384d8d8ce7f59080de">dtNodeQueue::getCapacity</a></div><div class="ttdeci">int getCapacity() const</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/_detour_node_8h_source.html#l00152">DetourNode.h:152</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d1/d00/_detour_node_8cpp_source.html#l00083">dtNodePool::clear()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00114">dtNodeQueue::clear()</a>, <a class="el" href="../../df/dba/_detour_alloc_8h_source.html#l00028">DT_ALLOC_PERM</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00025">DT_FAILURE</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00034">DT_INVALID_PARAM</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00034">DT_NODE_PARENT_BITS</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00032">DT_NULL_IDX</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00033">DT_OUT_OF_MEMORY</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00026">DT_SUCCESS</a>, <a class="el" href="../../dc/dbb/_detour_alloc_8cpp_source.html#l00041">dtAlloc()</a>, <a class="el" href="../../dc/dbb/_detour_alloc_8cpp_source.html#l00046">dtFree()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00440">dtNextPow2()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00152">dtNodeQueue::getCapacity()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00088">dtNodePool::getMaxNodes()</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00543">m_nav</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00559">m_nodePool</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00560">m_openList</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00558">m_tinyNodePool</a>, <a class="el" href="../../d1/d00/_detour_node_8cpp_source.html#l00076">dtNodePool::~dtNodePool()</a>, and <a class="el" href="../../d1/d00/_detour_node_8cpp_source.html#l00167">dtNodeQueue::~dtNodeQueue()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/deb/_m_map_mgr_8cpp_source.html#l00318">MMAP::MMapMgr::GetNavMeshQuery()</a>, and <a class="el" href="../../d2/d4a/_mesh_extractor_8cpp_source.html#l00363">main()</a>.</p>

</div>
</div>
<a id="ae9a478194f14f1a4591f8b6528007d82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9a478194f14f1a4591f8b6528007d82">&#9670;&nbsp;</a></span>initSlicedFindPath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> dtNavMeshQuery::initSlicedFindPath </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a>&#160;</td>
          <td class="paramname"><em>startRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a>&#160;</td>
          <td class="paramname"><em>endRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *&#160;</td>
          <td class="paramname"><em>startPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *&#160;</td>
          <td class="paramname"><em>endPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *&#160;</td>
          <td class="paramname"><em>filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> unsigned int&#160;</td>
          <td class="paramname"><em>options</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Intializes a sliced path query. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">startRef</td><td>The refrence id of the start polygon. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">endRef</td><td>The reference id of the end polygon. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">startPos</td><td>A position within the start polygon. [(x, y, z)] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">endPos</td><td>A position within the end polygon. [(x, y, z)] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filter</td><td>The polygon filter to apply to the query. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">options</td><td>query options (see: <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#aa783b570776c948098378da1a45e1bac" title="Options for dtNavMeshQuery::initSlicedFindPath and updateSlicedFindPath.">dtFindPathOptions</a>) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status flags for the query.</dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Calling any non-slice methods before calling <a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#a98673bb238fbb139ec8407e266fa76fd">finalizeSlicedFindPath()</a> or <a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#a01b18dcb5d25fc392b6030ae5d4f310e">finalizeSlicedFindPathPartial()</a> may result in corrupted data!</dd></dl>
<p>The <code>filter</code> pointer is stored and used for the duration of the sliced path query. </p>

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01189">1189</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;{</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>);</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>);</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>);</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160; </div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    <span class="comment">// Init path state.</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    <a class="code" href="../../d6/dda/m__string_8h.html#af1756e67d46227b3333bc21a1fadd361">memset</a>(&amp;<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>, 0, <span class="keyword">sizeof</span>(dtQueryData));</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a148e814fa33f723250cfa5236ed146a8">status</a> = <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a>;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a0ae05a1a363a1eb4a535835167b11e34">startRef</a> = startRef;</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a6d08b3de0dce784d8f8a6e3c6f7cd122">endRef</a> = endRef;</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    <span class="keywordflow">if</span> (startPos)</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#ad5a2c2abe51bf5710cbad905e92c8e4f">startPos</a>, startPos);</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    <span class="keywordflow">if</span> (endPos)</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;        <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a3c264a540069766a48c5bf579b6f4510">endPos</a>, endPos);</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#aca699cf1a32f5300522f5df0ccdf64da">filter</a> = filter;</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a685529ad637163d76fa82ff6c3258823">options</a> = options;</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a88839e6bc65cd11155aa3cb5a8a40876">raycastLimitSqr</a> = <a class="code" href="../../d9/df6/my__global_8h.html#a7fbf1534f9e0f0bfdb86fb928902474c">FLT_MAX</a>;</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    </div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <span class="comment">// Validate input</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a84ce3e44a2a97c5377b3b308825fcd37">isValidPolyRef</a>(startRef) || !<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a84ce3e44a2a97c5377b3b308825fcd37">isValidPolyRef</a>(endRef) ||</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;        !startPos || !<a class="code" href="../../dc/d41/_detour_common_8h.html#a1de203d55d933ccaa2ae9f3e126f4e63">dtVisfinite</a>(startPos) ||</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        !endPos || !<a class="code" href="../../dc/d41/_detour_common_8h.html#a1de203d55d933ccaa2ae9f3e126f4e63">dtVisfinite</a>(endPos) || !filter)</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    {</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    }</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160; </div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    <span class="comment">// trade quality with performance?</span></div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="keywordflow">if</span> (options &amp; <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#aa783b570776c948098378da1a45e1bacae68dc8af59dbb706ec70f4482590599b">DT_FINDPATH_ANY_ANGLE</a>)</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    {</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        <span class="comment">// limiting to several times the character radius yields nice results. It is not sensitive </span></div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;        <span class="comment">// so it is enough to compute it from the first tile.</span></div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* tile = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#ac7924d8eeed5c67b04d2d23d0cc766ad">getTileByRef</a>(startRef);</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;        <span class="keywordtype">float</span> agentRadius = tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a5051ce89a829f53969be9ac3fae9d4c3">header</a>-&gt;<a class="code" href="../../df/dd5/structdt_mesh_header.html#af46713cd7140c9cea829730c246e146d">walkableRadius</a>;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;        <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a88839e6bc65cd11155aa3cb5a8a40876">raycastLimitSqr</a> = <a class="code" href="../../dc/d41/_detour_common_8h.html#af0a088077730ad6995ce4d82093588cc">dtSqr</a>(agentRadius * <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#a52749b53f72f838b3f54f61ca091ca74">DT_RAY_CAST_LIMIT_PROPORTIONS</a>);</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    }</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160; </div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <span class="keywordflow">if</span> (startRef == endRef)</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    {</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;        <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a148e814fa33f723250cfa5236ed146a8">status</a> = <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a>;</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a>;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    }</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    </div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a4341af64b1f043b2775b7f1abae34d7b">clear</a>();</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#aa0f83a0d1f38b0b97fb549d1372c8be7">clear</a>();</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    </div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* startNode = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a9642659acf1f7fbfcd408b4c3da8a885">getNode</a>(startRef);</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>, startPos);</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a> = 0;</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a253defdaa9ea8dbe9ea5991bcfb75b32">cost</a> = 0;</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#aed27a8d0170505d1dba0cd3201bc6536">total</a> = <a class="code" href="../../dc/d41/_detour_common_8h.html#a000a4b437d73fd37c831c4bcbc3abb8d">dtVdist</a>(startPos, endPos) * <a class="code" href="../../de/de4/_detour_nav_mesh_query_8cpp.html#a691377deb83853ca02735f394ccf0a30">H_SCALE</a>;</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a> = startRef;</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> = <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974a792e67a3226f80ca54332bcbdac1c1c9">DT_NODE_OPEN</a>;</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a76d83f497e1a5bcf72a6cc902a696a2a">push</a>(startNode);</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    </div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a148e814fa33f723250cfa5236ed146a8">status</a> = <a class="code" href="../../d8/de6/_detour_status_8h.html#ab2f47a2593c7138b17c1d8939f19cf06">DT_IN_PROGRESS</a>;</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#abdb35321ad8dbbf8e1e00a1922661868">lastBestNode</a> = startNode;</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#ae0d8511ab6bfa3b233d25f27713c9c99">lastBestNodeCost</a> = startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#aed27a8d0170505d1dba0cd3201bc6536">total</a>;</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    </div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a148e814fa33f723250cfa5236ed146a8">status</a>;</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;}</div>
<div class="ttc" id="a_detour_nav_mesh_8h_html_a52749b53f72f838b3f54f61ca091ca74"><div class="ttname"><a href="../../d1/ddd/_detour_nav_mesh_8h.html#a52749b53f72f838b3f54f61ca091ca74">DT_RAY_CAST_LIMIT_PROPORTIONS</a></div><div class="ttdeci">static const float DT_RAY_CAST_LIMIT_PROPORTIONS</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00153">DetourNavMesh.h:153</a></div></div>
<div class="ttc" id="a_detour_nav_mesh_8h_html_aa783b570776c948098378da1a45e1bacae68dc8af59dbb706ec70f4482590599b"><div class="ttname"><a href="../../d1/ddd/_detour_nav_mesh_8h.html#aa783b570776c948098378da1a45e1bacae68dc8af59dbb706ec70f4482590599b">DT_FINDPATH_ANY_ANGLE</a></div><div class="ttdeci">@ DT_FINDPATH_ANY_ANGLE</div><div class="ttdoc">use raycasts during pathfind to &quot;shortcut&quot; (raycast still consider costs)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00136">DetourNavMesh.h:136</a></div></div>
<div class="ttc" id="aclassdt_nav_mesh_html_ac7924d8eeed5c67b04d2d23d0cc766ad"><div class="ttname"><a href="../../da/d16/classdt_nav_mesh.html#ac7924d8eeed5c67b04d2d23d0cc766ad">dtNavMesh::getTileByRef</a></div><div class="ttdeci">const dtMeshTile * getTileByRef(dtTileRef ref) const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01155">DetourNavMesh.cpp:1155</a></div></div>
<div class="ttc" id="amy__global_8h_html_a7fbf1534f9e0f0bfdb86fb928902474c"><div class="ttname"><a href="../../d9/df6/my__global_8h.html#a7fbf1534f9e0f0bfdb86fb928902474c">FLT_MAX</a></div><div class="ttdeci">#define FLT_MAX</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df6/my__global_8h_source.html#l00783">my_global.h:783</a></div></div>
<div class="ttc" id="astructdt_mesh_header_html_af46713cd7140c9cea829730c246e146d"><div class="ttname"><a href="../../df/dd5/structdt_mesh_header.html#af46713cd7140c9cea829730c246e146d">dtMeshHeader::walkableRadius</a></div><div class="ttdeci">float walkableRadius</div><div class="ttdoc">The radius of the agents using the tile.</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00282">DetourNavMesh.h:282</a></div></div>
<div class="ttc" id="astructdt_nav_mesh_query_1_1dt_query_data_html_a3c264a540069766a48c5bf579b6f4510"><div class="ttname"><a href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a3c264a540069766a48c5bf579b6f4510">dtNavMeshQuery::dtQueryData::endPos</a></div><div class="ttdeci">float endPos[3]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00551">DetourNavMeshQuery.h:551</a></div></div>
<div class="ttc" id="astructdt_nav_mesh_query_1_1dt_query_data_html_a685529ad637163d76fa82ff6c3258823"><div class="ttname"><a href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a685529ad637163d76fa82ff6c3258823">dtNavMeshQuery::dtQueryData::options</a></div><div class="ttdeci">unsigned int options</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00553">DetourNavMeshQuery.h:553</a></div></div>
<div class="ttc" id="astructdt_nav_mesh_query_1_1dt_query_data_html_a88839e6bc65cd11155aa3cb5a8a40876"><div class="ttname"><a href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a88839e6bc65cd11155aa3cb5a8a40876">dtNavMeshQuery::dtQueryData::raycastLimitSqr</a></div><div class="ttdeci">float raycastLimitSqr</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00554">DetourNavMeshQuery.h:554</a></div></div>
<div class="ttc" id="astructdt_nav_mesh_query_1_1dt_query_data_html_ad5a2c2abe51bf5710cbad905e92c8e4f"><div class="ttname"><a href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#ad5a2c2abe51bf5710cbad905e92c8e4f">dtNavMeshQuery::dtQueryData::startPos</a></div><div class="ttdeci">float startPos[3]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00551">DetourNavMeshQuery.h:551</a></div></div>
<div class="ttc" id="astructdt_nav_mesh_query_1_1dt_query_data_html_ae0d8511ab6bfa3b233d25f27713c9c99"><div class="ttname"><a href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#ae0d8511ab6bfa3b233d25f27713c9c99">dtNavMeshQuery::dtQueryData::lastBestNodeCost</a></div><div class="ttdeci">float lastBestNodeCost</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00549">DetourNavMeshQuery.h:549</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d1/d00/_detour_node_8cpp_source.html#l00083">dtNodePool::clear()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00114">dtNodeQueue::clear()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00039">dtNode::cost</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00025">DT_FAILURE</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00136">DT_FINDPATH_ANY_ANGLE</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00027">DT_IN_PROGRESS</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00034">DT_INVALID_PARAM</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00026">DT_NODE_OPEN</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00153">DT_RAY_CAST_LIMIT_PROPORTIONS</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00026">DT_SUCCESS</a>, <a class="el" href="../../da/d60/_detour_assert_8h_source.html#l00047">dtAssert</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00068">dtSqr()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00191">dtVcopy()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00218">dtVdist()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00290">dtVisfinite()</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00551">dtNavMeshQuery::dtQueryData::endPos</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00550">dtNavMeshQuery::dtQueryData::endRef</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00552">dtNavMeshQuery::dtQueryData::filter</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00043">dtNode::flags</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l00783">FLT_MAX</a>, <a class="el" href="../../d1/d00/_detour_node_8cpp_source.html#l00121">dtNodePool::getNode()</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01155">dtNavMesh::getTileByRef()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00103">H_SCALE</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00298">dtMeshTile::header</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00044">dtNode::id</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01216">dtNavMesh::isValidPolyRef()</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00548">dtNavMeshQuery::dtQueryData::lastBestNode</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00549">dtNavMeshQuery::dtQueryData::lastBestNodeCost</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00543">m_nav</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00559">m_nodePool</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00560">m_openList</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00556">m_query</a>, <a class="el" href="../../d6/dda/m__string_8h_source.html#l00051">memset</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00553">dtNavMeshQuery::dtQueryData::options</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00041">dtNode::pidx</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00038">dtNode::pos</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00126">dtNodeQueue::push()</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00554">dtNavMeshQuery::dtQueryData::raycastLimitSqr</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00551">dtNavMeshQuery::dtQueryData::startPos</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00550">dtNavMeshQuery::dtQueryData::startRef</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00547">dtNavMeshQuery::dtQueryData::status</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00040">dtNode::total</a>, and <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00282">dtMeshHeader::walkableRadius</a>.</p>

</div>
</div>
<a id="ad1de0c0d7cc527905d3f83c613897eb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1de0c0d7cc527905d3f83c613897eb3">&#9670;&nbsp;</a></span>isInClosedList()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> dtNavMeshQuery::isInClosedList </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a>&#160;</td>
          <td class="paramname"><em>ref</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns true if the polygon reference is in the closed list. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ref</td><td>The reference id of the polygon to check. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the polygon is in closed list.</dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<p>The closed list is the list of polygons that were fully evaluated during the last navigation graph search. (A* or Dijkstra) </p>

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l03649">3649</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;{</div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;    </div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;    <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* nodes[<a class="code" href="../../da/dfb/_detour_node_8h.html#a1f8049d9ecf8fd9c1cd5887a366c84b4">DT_MAX_STATES_PER_NODE</a>];</div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;    <span class="keywordtype">int</span> n= <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a5fa3decff570f26616282fcf50a3e7f9">findNodes</a>(ref, nodes, <a class="code" href="../../da/dfb/_detour_node_8h.html#a1f8049d9ecf8fd9c1cd5887a366c84b4">DT_MAX_STATES_PER_NODE</a>);</div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160; </div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;n; i++)</div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;    {</div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;        <span class="keywordflow">if</span> (nodes[i]-&gt;flags &amp; <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974aa9a4b8aa94ba18584fa07b2d8ad9aac2">DT_NODE_CLOSED</a>)</div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;    }       </div>
<div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160; </div>
<div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;}</div>
<div class="ttc" id="a_detour_node_8h_html_a1f8049d9ecf8fd9c1cd5887a366c84b4"><div class="ttname"><a href="../../da/dfb/_detour_node_8h.html#a1f8049d9ecf8fd9c1cd5887a366c84b4">DT_MAX_STATES_PER_NODE</a></div><div class="ttdeci">static const int DT_MAX_STATES_PER_NODE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/_detour_node_8h_source.html#l00047">DetourNode.h:47</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00047">DT_MAX_STATES_PER_NODE</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00027">DT_NODE_CLOSED</a>, <a class="el" href="../../d1/d00/_detour_node_8cpp_source.html#l00089">dtNodePool::findNodes()</a>, and <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00559">m_nodePool</a>.</p>

</div>
</div>
<a id="ac76164ed97fdedd9ea8abbe52f6c2c8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac76164ed97fdedd9ea8abbe52f6c2c8a">&#9670;&nbsp;</a></span>isValidPolyRef()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> dtNavMeshQuery::isValidPolyRef </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a>&#160;</td>
          <td class="paramname"><em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *&#160;</td>
          <td class="paramname"><em>filter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns true if the polygon reference is valid and passes the filter restrictions. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ref</td><td>The polygon reference to check. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filter</td><td>The filter to apply. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l03630">3630</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;{</div>
<div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* tile = 0;</div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* poly = 0;</div>
<div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;    <a class="code" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> status = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a36a84aa7296d5cc257eb3ddc38181253">getTileAndPolyByRef</a>(ref, &amp;tile, &amp;poly);</div>
<div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;    <span class="comment">// If cannot get polygon, assume it does not exists and boundary is invalid.</span></div>
<div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/de6/_detour_status_8h.html#ab98b21afb80f30cc60a1f4e86ebc19d8">dtStatusFailed</a>(status))</div>
<div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;    <span class="comment">// If cannot pass filter, assume flags has changed and boundary is invalid.</span></div>
<div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;    <span class="keywordflow">if</span> (!filter-&gt;<a class="code" href="../../d3/d5f/classdt_query_filter.html#aaf072b8617dfbd4701a8e07f0f10be9c">passFilter</a>(ref, tile, poly))</div>
<div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00048">dtStatusFailed()</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01190">dtNavMesh::getTileAndPolyByRef()</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00543">m_nav</a>, and <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00087">dtQueryFilter::passFilter()</a>.</p>

</div>
</div>
<a id="a95f6d7c92a75c7773ababeb144206968"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95f6d7c92a75c7773ababeb144206968">&#9670;&nbsp;</a></span>moveAlongSurface()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> dtNavMeshQuery::moveAlongSurface </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a>&#160;</td>
          <td class="paramname"><em>startRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *&#160;</td>
          <td class="paramname"><em>startPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *&#160;</td>
          <td class="paramname"><em>endPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *&#160;</td>
          <td class="paramname"><em>filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>resultPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *&#160;</td>
          <td class="paramname"><em>visited</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>visitedCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int&#160;</td>
          <td class="paramname"><em>maxVisitedSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Moves from the start to the end position constrained to the navigation mesh. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">startRef</td><td>The reference id of the start polygon. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">startPos</td><td>A position of the mover within the start polygon. [(x, y, x)] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">endPos</td><td>The desired end position of the mover. [(x, y, z)] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filter</td><td>The polygon filter to apply to the query. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">resultPos</td><td>The result position of the mover. [(x, y, z)] </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">visited</td><td>The reference ids of the polygons visited during the move. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">visitedCount</td><td>The number of polygons visited during the move. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">maxVisitedSize</td><td>The maximum number of polygons the <code>visited</code> array can hold. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status flags for the query.</dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<p>This method is optimized for small delta movement and a small number of polygons. If used for too great a distance, the result set will form an incomplete path.</p>
<p><code>resultPos</code> will equal the <code>endPos</code> if the end is reached. Otherwise the closest reachable position will be returned.</p>
<p><code>resultPos</code> is not projected onto the surface of the navigation mesh. Use <a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#af8303a12749e252c6688c15c5c887b69">getPolyHeight</a> if this is needed.</p>
<p>This method treats the end position in the same manner as the <a class="el" href="../../dd/db0/classdt_nav_mesh_query.html#a7509a4bf31a215f20478c5050ef25913">raycast</a> method. (As a 2D point.) See that method's documentation for details.</p>
<p>If the <code>visited</code> array is too small to hold the entire result set, it will be filled as far as possible from the start position toward the end position. </p>

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02017">2017</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;{</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>);</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a4a767464a8ed2c20954a69d26b5ac554">m_tinyNodePool</a>);</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160; </div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;    <span class="keywordflow">if</span> (!visitedCount)</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160; </div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;    *visitedCount = 0;</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160; </div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a84ce3e44a2a97c5377b3b308825fcd37">isValidPolyRef</a>(startRef) ||</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;        !startPos || !<a class="code" href="../../dc/d41/_detour_common_8h.html#a1de203d55d933ccaa2ae9f3e126f4e63">dtVisfinite</a>(startPos) ||</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;        !endPos || !<a class="code" href="../../dc/d41/_detour_common_8h.html#a1de203d55d933ccaa2ae9f3e126f4e63">dtVisfinite</a>(endPos) ||</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;        !filter || !resultPos || !visited ||</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;        maxVisitedSize &lt;= 0)</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;    {</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;    }</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;    </div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;    <a class="code" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> status = <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a>;</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;    </div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> MAX_STACK = 48;</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;    <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* stack[MAX_STACK];</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;    <span class="keywordtype">int</span> nstack = 0;</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;    </div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a4a767464a8ed2c20954a69d26b5ac554">m_tinyNodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a4341af64b1f043b2775b7f1abae34d7b">clear</a>();</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;    </div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;    <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* startNode = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a4a767464a8ed2c20954a69d26b5ac554">m_tinyNodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a9642659acf1f7fbfcd408b4c3da8a885">getNode</a>(startRef);</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a> = 0;</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a253defdaa9ea8dbe9ea5991bcfb75b32">cost</a> = 0;</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#aed27a8d0170505d1dba0cd3201bc6536">total</a> = 0;</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a> = startRef;</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;    startNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> = <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974aa9a4b8aa94ba18584fa07b2d8ad9aac2">DT_NODE_CLOSED</a>;</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;    stack[nstack++] = startNode;</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;    </div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;    <span class="keywordtype">float</span> bestPos[3];</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;    <span class="keywordtype">float</span> bestDist = <a class="code" href="../../d9/df6/my__global_8h.html#a7fbf1534f9e0f0bfdb86fb928902474c">FLT_MAX</a>;</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;    <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* bestNode = 0;</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;    <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(bestPos, startPos);</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;    </div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;    <span class="comment">// Search constraints</span></div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;    <span class="keywordtype">float</span> searchPos[3], searchRadSqr;</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;    <a class="code" href="../../dc/d41/_detour_common_8h.html#a7b3295d18cd477fca1fe541b59b1b231">dtVlerp</a>(searchPos, startPos, endPos, 0.5f);</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;    searchRadSqr = <a class="code" href="../../dc/d41/_detour_common_8h.html#af0a088077730ad6995ce4d82093588cc">dtSqr</a>(<a class="code" href="../../dc/d41/_detour_common_8h.html#a000a4b437d73fd37c831c4bcbc3abb8d">dtVdist</a>(startPos, endPos)/2.0f + 0.001f);</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;    </div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;    <span class="keywordtype">float</span> verts[<a class="code" href="../../d5/d7a/group__detour.html#ga8591fdac662dbfabb580de626c64c9f3">DT_VERTS_PER_POLYGON</a>*3];</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;    </div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;    <span class="keywordflow">while</span> (nstack)</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;    {</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;        <span class="comment">// Pop front.</span></div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;        <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* curNode = stack[0];</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; nstack-1; ++i)</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;            stack[i] = stack[i+1];</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;        nstack--;</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;        </div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;        <span class="comment">// Get poly and tile.</span></div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;        <span class="comment">// The API input has been cheked already, skip checking internal data.</span></div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> curRef = curNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a>;</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* curTile = 0;</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* curPoly = 0;</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;        <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#ac5c5b89a6af63b7de29089ae83091e0f">getTileAndPolyByRefUnsafe</a>(curRef, &amp;curTile, &amp;curPoly);           </div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;        </div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;        <span class="comment">// Collect vertices.</span></div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> nverts = curPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#af940c431464c022f844e61130f83d9c2">vertCount</a>;</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; nverts; ++i)</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;            <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(&amp;verts[i*3], &amp;curTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[curPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[i]*3]);</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;        </div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;        <span class="comment">// If target is inside the poly, stop search.</span></div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dc/d41/_detour_common_8h.html#a7b3806c429b5b231f316988edd4373aa">dtPointInPolygon</a>(endPos, verts, nverts))</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;        {</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;            bestNode = curNode;</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;            <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(bestPos, endPos);</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;        }</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;        </div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;        <span class="comment">// Find wall edges and find nearest point inside the walls.</span></div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0, j = (<span class="keywordtype">int</span>)curPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#af940c431464c022f844e61130f83d9c2">vertCount</a>-1; i &lt; (<span class="keywordtype">int</span>)curPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#af940c431464c022f844e61130f83d9c2">vertCount</a>; j = i++)</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;        {</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;            <span class="comment">// Find links to neighbours.</span></div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;            <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> MAX_NEIS = 8;</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;            <span class="keywordtype">int</span> nneis = 0;</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;            <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> neis[MAX_NEIS];</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;            </div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;            <span class="keywordflow">if</span> (curPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#ac4f5aa32df32aa5b1385f76f697376af">neis</a>[j] &amp; <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#aa2d400dcfaef68b62c1f1118de13e87e">DT_EXT_LINK</a>)</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;            {</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;                <span class="comment">// Tile border.</span></div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k = curPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#a671fd6893087936e80fcd17f7f666c0e">firstLink</a>; k != <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#aca31b5eadafd19285e16eca707b3295b">DT_NULL_LINK</a>; k = curTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[k].<a class="code" href="../../df/d2d/structdt_link.html#a475b893f03bf4c942ab6376d83dca82e">next</a>)</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;                {</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;                    <span class="keyword">const</span> <a class="code" href="../../df/d2d/structdt_link.html">dtLink</a>* <a class="code" href="../../dd/d95/structlink.html">link</a> = &amp;curTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[k];</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;edge == j)</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;                    {</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;ref != 0)</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;                        {</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;                            <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* neiTile = 0;</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;                            <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* neiPoly = 0;</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;                            <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#ac5c5b89a6af63b7de29089ae83091e0f">getTileAndPolyByRefUnsafe</a>(<a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;ref, &amp;neiTile, &amp;neiPoly);</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;                            <span class="keywordflow">if</span> (filter-&gt;<a class="code" href="../../d3/d5f/classdt_query_filter.html#aaf072b8617dfbd4701a8e07f0f10be9c">passFilter</a>(<a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;ref, neiTile, neiPoly))</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;                            {</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;                                <span class="keywordflow">if</span> (nneis &lt; MAX_NEIS)</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;                                    neis[nneis++] = <a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;ref;</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;                            }</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;                        }</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;                    }</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;                }</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;            }</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (curPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#ac4f5aa32df32aa5b1385f76f697376af">neis</a>[j])</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;            {</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../de/d17/lf_8h.html#a359b2d783027136786cee9f243efcbde">idx</a> = (<span class="keywordtype">unsigned</span> int)(curPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#ac4f5aa32df32aa5b1385f76f697376af">neis</a>[j]-1);</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;                <span class="keyword">const</span> <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> ref = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a0741871ed1357c51e3847f22673fcc9c">getPolyRefBase</a>(curTile) | <a class="code" href="../../de/d17/lf_8h.html#a359b2d783027136786cee9f243efcbde">idx</a>;</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;                <span class="keywordflow">if</span> (filter-&gt;<a class="code" href="../../d3/d5f/classdt_query_filter.html#aaf072b8617dfbd4701a8e07f0f10be9c">passFilter</a>(ref, curTile, &amp;curTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abd8ed5dcf003464a7d8c456f671e6c1e">polys</a>[<a class="code" href="../../de/d17/lf_8h.html#a359b2d783027136786cee9f243efcbde">idx</a>]))</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;                {</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;                    <span class="comment">// Internal edge, encode id.</span></div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;                    neis[nneis++] = ref;</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;                }</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;            }</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;            </div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;            <span class="keywordflow">if</span> (!nneis)</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;            {</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;                <span class="comment">// Wall edge, calc distance.</span></div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">float</span>* vj = &amp;verts[j*3];</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">float</span>* vi = &amp;verts[i*3];</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;                <span class="keywordtype">float</span> tseg;</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">float</span> distSqr = <a class="code" href="../../dc/d41/_detour_common_8h.html#a99afe0b6e77a0c800e9582faea87cf6d">dtDistancePtSegSqr2D</a>(endPos, vj, vi, tseg);</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;                <span class="keywordflow">if</span> (distSqr &lt; bestDist)</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;                {</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;                    <span class="comment">// Update nearest distance.</span></div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;                    <a class="code" href="../../dc/d41/_detour_common_8h.html#a7b3295d18cd477fca1fe541b59b1b231">dtVlerp</a>(bestPos, vj,vi, tseg);</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;                    bestDist = distSqr;</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;                    bestNode = curNode;</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;                }</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;            }</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;            {</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; nneis; ++k)</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;                {</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;                    <span class="comment">// Skip if no node can be allocated.</span></div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;                    <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* neighbourNode = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a4a767464a8ed2c20954a69d26b5ac554">m_tinyNodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a9642659acf1f7fbfcd408b4c3da8a885">getNode</a>(neis[k]);</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;                    <span class="keywordflow">if</span> (!neighbourNode)</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;                    <span class="comment">// Skip if already visited.</span></div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;                    <span class="keywordflow">if</span> (neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp; <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974aa9a4b8aa94ba18584fa07b2d8ad9aac2">DT_NODE_CLOSED</a>)</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;                    </div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;                    <span class="comment">// Skip the link if it is too far from search constraint.</span></div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;                    <span class="comment">// TODO: Maybe should use getPortalPoints(), but this one is way faster.</span></div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">float</span>* vj = &amp;verts[j*3];</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">float</span>* vi = &amp;verts[i*3];</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;                    <span class="keywordtype">float</span> tseg;</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;                    <span class="keywordtype">float</span> distSqr = <a class="code" href="../../dc/d41/_detour_common_8h.html#a99afe0b6e77a0c800e9582faea87cf6d">dtDistancePtSegSqr2D</a>(searchPos, vj, vi, tseg);</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;                    <span class="keywordflow">if</span> (distSqr &gt; searchRadSqr)</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;                    </div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;                    <span class="comment">// Mark as the node as visited and push to queue.</span></div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;                    <span class="keywordflow">if</span> (nstack &lt; MAX_STACK)</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;                    {</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;                        neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a> = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a4a767464a8ed2c20954a69d26b5ac554">m_tinyNodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a5b223e8441b2d202fb1a18022228d6e1">getNodeIdx</a>(curNode);</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;                        neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> |= <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974aa9a4b8aa94ba18584fa07b2d8ad9aac2">DT_NODE_CLOSED</a>;</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;                        stack[nstack++] = neighbourNode;</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;                    }</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;                }</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;            }</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;        }</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;    }</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;    </div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;    <span class="keywordtype">int</span> n = 0;</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;    <span class="keywordflow">if</span> (bestNode)</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;    {</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;        <span class="comment">// Reverse the path.</span></div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;        <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* <a class="code" href="../../de/d0e/_recast_contour_8cpp.html#a6f1109916123abdff2b46675c13307e3">prev</a> = 0;</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;        <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* node = bestNode;</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;        <span class="keywordflow">do</span></div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;        {</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;            <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* <a class="code" href="../../de/d0e/_recast_contour_8cpp.html#af019d68006e1f2d7b24c8f09051424cc">next</a> = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a4a767464a8ed2c20954a69d26b5ac554">m_tinyNodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a5f6d20bd49d338b03885909b0c13ccea">getNodeAtIdx</a>(node-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a>);</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;            node-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a> = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a4a767464a8ed2c20954a69d26b5ac554">m_tinyNodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a5b223e8441b2d202fb1a18022228d6e1">getNodeIdx</a>(<a class="code" href="../../de/d0e/_recast_contour_8cpp.html#a6f1109916123abdff2b46675c13307e3">prev</a>);</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;            <a class="code" href="../../de/d0e/_recast_contour_8cpp.html#a6f1109916123abdff2b46675c13307e3">prev</a> = node;</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;            node = <a class="code" href="../../de/d0e/_recast_contour_8cpp.html#af019d68006e1f2d7b24c8f09051424cc">next</a>;</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;        }</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;        <span class="keywordflow">while</span> (node);</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;        </div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;        <span class="comment">// Store result</span></div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;        node = <a class="code" href="../../de/d0e/_recast_contour_8cpp.html#a6f1109916123abdff2b46675c13307e3">prev</a>;</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;        <span class="keywordflow">do</span></div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;        {</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;            visited[n++] = node-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a>;</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;            <span class="keywordflow">if</span> (n &gt;= maxVisitedSize)</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;            {</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;                status |= <a class="code" href="../../d8/de6/_detour_status_8h.html#a97c8292e3ce2ba0b63bfa4ca57de10af">DT_BUFFER_TOO_SMALL</a>;</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;            }</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;            node = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a4a767464a8ed2c20954a69d26b5ac554">m_tinyNodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a5f6d20bd49d338b03885909b0c13ccea">getNodeAtIdx</a>(node-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a>);</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;        }</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;        <span class="keywordflow">while</span> (node);</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;    }</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;    </div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;    <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(resultPos, bestPos);</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;    </div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;    *visitedCount = n;</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;    </div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;    <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;}</div>
<div class="ttc" id="a_detour_common_8h_html_a7b3806c429b5b231f316988edd4373aa"><div class="ttname"><a href="../../dc/d41/_detour_common_8h.html#a7b3806c429b5b231f316988edd4373aa">dtPointInPolygon</a></div><div class="ttdeci">bool dtPointInPolygon(const float *pt, const float *verts, const int nverts)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de1/_detour_common_8cpp_source.html#l00238">DetourCommon.cpp:238</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d1/d00/_detour_node_8cpp_source.html#l00083">dtNodePool::clear()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00039">dtNode::cost</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00035">DT_BUFFER_TOO_SMALL</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00097">DT_EXT_LINK</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00025">DT_FAILURE</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00034">DT_INVALID_PARAM</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00027">DT_NODE_CLOSED</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00100">DT_NULL_LINK</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00026">DT_SUCCESS</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00073">DT_VERTS_PER_POLYGON</a>, <a class="el" href="../../da/d60/_detour_assert_8h_source.html#l00047">dtAssert</a>, <a class="el" href="../../d5/de1/_detour_common_8cpp_source.html#l00170">dtDistancePtSegSqr2D()</a>, <a class="el" href="../../d5/de1/_detour_common_8cpp_source.html#l00238">dtPointInPolygon()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00068">dtSqr()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00191">dtVcopy()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00218">dtVdist()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00290">dtVisfinite()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00118">dtVlerp()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00170">dtPoly::firstLink</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00043">dtNode::flags</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l00783">FLT_MAX</a>, <a class="el" href="../../d1/d00/_detour_node_8cpp_source.html#l00121">dtNodePool::getNode()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00068">dtNodePool::getNodeAtIdx()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00062">dtNodePool::getNodeIdx()</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01349">dtNavMesh::getPolyRefBase()</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01208">dtNavMesh::getTileAndPolyByRefUnsafe()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00044">dtNode::id</a>, <a class="el" href="../../de/d17/lf_8h_source.html#l00086">idx</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01216">dtNavMesh::isValidPolyRef()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00301">dtMeshTile::links</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00543">m_nav</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00558">m_tinyNodePool</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00177">dtPoly::neis</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00217">dtLink::next</a>, <a class="el" href="../../de/d0e/_recast_contour_8cpp_source.html#l00469">next()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00087">dtQueryFilter::passFilter()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00041">dtNode::pidx</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00299">dtMeshTile::polys</a>, <a class="el" href="../../de/d0e/_recast_contour_8cpp_source.html#l00468">prev()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00040">dtNode::total</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00183">dtPoly::vertCount</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00174">dtPoly::verts</a>, and <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00300">dtMeshTile::verts</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/server_2game_2_movement_2_movement_generators_2_path_generator_8cpp_source.html#l00832">PathGenerator::FindSmoothPath()</a>.</p>

</div>
</div>
<a id="acc8f01a9f6ff676a7a31657eed9d481c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc8f01a9f6ff676a7a31657eed9d481c">&#9670;&nbsp;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/db0/classdt_nav_mesh_query.html">dtNavMeshQuery</a>&amp; dtNavMeshQuery::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dd/db0/classdt_nav_mesh_query.html">dtNavMeshQuery</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aed2fc9071ca182a548baf5158cd4f441"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed2fc9071ca182a548baf5158cd4f441">&#9670;&nbsp;</a></span>queryPolygons() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> dtNavMeshQuery::queryPolygons </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *&#160;</td>
          <td class="paramname"><em>center</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *&#160;</td>
          <td class="paramname"><em>halfExtents</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *&#160;</td>
          <td class="paramname"><em>filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d06/classdt_poly_query.html">dtPolyQuery</a> *&#160;</td>
          <td class="paramname"><em>query</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Finds polygons that overlap the search box. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">center</td><td>The center of the search box. [(x, y, z)] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">halfExtents</td><td>The search distance along each axis. [(x, y, z)] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filter</td><td>The polygon filter to apply to the query. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">query</td><td>The query. Polygons found will be batched together and passed to this query.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<p>The query will be invoked with batches of polygons. Polygons passed to the query have bounding boxes that overlap with the center and halfExtents passed to this function. The <a class="el" href="../../d1/d06/classdt_poly_query.html#a21184a157b5762bc558ac49e43a1131e">dtPolyQuery::process</a> function is invoked multiple times until all overlapping polygons have been processed. </p>

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00896">896</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;{</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>);</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160; </div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a522cfe706bd4170b4fded79ff55e4bc4">center</a> || !<a class="code" href="../../dc/d41/_detour_common_8h.html#a1de203d55d933ccaa2ae9f3e126f4e63">dtVisfinite</a>(<a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a522cfe706bd4170b4fded79ff55e4bc4">center</a>) ||</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        !halfExtents || !<a class="code" href="../../dc/d41/_detour_common_8h.html#a1de203d55d933ccaa2ae9f3e126f4e63">dtVisfinite</a>(halfExtents) ||</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        !filter || !query)</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    {</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    }</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160; </div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="keywordtype">float</span> bmin[3], bmax[3];</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <a class="code" href="../../dc/d41/_detour_common_8h.html#a8b3255050bf09f5459f3c575ba1574b4">dtVsub</a>(bmin, <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a522cfe706bd4170b4fded79ff55e4bc4">center</a>, halfExtents);</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <a class="code" href="../../dc/d41/_detour_common_8h.html#acad549159189d387ad9496e51994c70e">dtVadd</a>(bmax, <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a522cfe706bd4170b4fded79ff55e4bc4">center</a>, halfExtents);</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    </div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <span class="comment">// Find tiles the query touches.</span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="keywordtype">int</span> minx, miny, maxx, maxy;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a609d55c59062910ff645dbbd4c72fed1">calcTileLoc</a>(bmin, &amp;minx, &amp;miny);</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a609d55c59062910ff645dbbd4c72fed1">calcTileLoc</a>(bmax, &amp;maxx, &amp;maxy);</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160; </div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> MAX_NEIS = 32;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* neis[MAX_NEIS];</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    </div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a> = miny; <a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a> &lt;= maxy; ++<a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a>)</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    {</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a> = minx; <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a> &lt;= maxx; ++<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>)</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        {</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> nneis = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a1a89053de47c9ed459d598fc7f739670">getTilesAt</a>(<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>,<a class="code" href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">y</a>,neis,MAX_NEIS);</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; nneis; ++j)</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;            {</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;                <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ae9ae121a5e6fddc2d2393bb1945509a8">queryPolygonsInTile</a>(neis[j], bmin, bmax, filter, query);</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;            }</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        }</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    }</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    </div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a>;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;}</div>
<div class="ttc" id="aclassdt_nav_mesh_html_a1a89053de47c9ed459d598fc7f739670"><div class="ttname"><a href="../../da/d16/classdt_nav_mesh.html#a1a89053de47c9ed459d598fc7f739670">dtNavMesh::getTilesAt</a></div><div class="ttdeci">int getTilesAt(const int x, const int y, dtMeshTile const **tiles, const int maxTiles) const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01113">DetourNavMesh.cpp:1113</a></div></div>
<div class="ttc" id="aclassdt_nav_mesh_html_a609d55c59062910ff645dbbd4c72fed1"><div class="ttname"><a href="../../da/d16/classdt_nav_mesh.html#a609d55c59062910ff645dbbd4c72fed1">dtNavMesh::calcTileLoc</a></div><div class="ttdeci">void calcTileLoc(const float *pos, int *tx, int *ty) const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01184">DetourNavMesh.cpp:1184</a></div></div>
<div class="ttc" id="aclassdt_nav_mesh_query_html_ae9ae121a5e6fddc2d2393bb1945509a8"><div class="ttname"><a href="../../dd/db0/classdt_nav_mesh_query.html#ae9ae121a5e6fddc2d2393bb1945509a8">dtNavMeshQuery::queryPolygonsInTile</a></div><div class="ttdeci">void queryPolygonsInTile(const dtMeshTile *tile, const float *qmin, const float *qmax, const dtQueryFilter *filter, dtPolyQuery *query) const</div><div class="ttdoc">Queries polygons within a tile.</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00712">DetourNavMeshQuery.cpp:712</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_a55ae91213b07da3a9e14fcd5068d497f"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">G3D::x</a></div><div class="ttdeci">G3D::int16 x</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d14/_vector2int16_8h_source.html#l00037">Vector2int16.h:37</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_a8942ba929b21cfdf30bd22fe36baaefa"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#a8942ba929b21cfdf30bd22fe36baaefa">G3D::y</a></div><div class="ttdeci">G3D::int16 y</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d14/_vector2int16_8h_source.html#l00038">Vector2int16.h:38</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01184">dtNavMesh::calcTileLoc()</a>, <a class="el" href="../../d5/d71/fmt_2include_2fmt_2core_8h_source.html#l01859">align::center</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00025">DT_FAILURE</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00034">DT_INVALID_PARAM</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00026">DT_SUCCESS</a>, <a class="el" href="../../da/d60/_detour_assert_8h_source.html#l00047">dtAssert</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00129">dtVadd()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00290">dtVisfinite()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00140">dtVsub()</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01113">dtNavMesh::getTilesAt()</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00543">m_nav</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00712">queryPolygonsInTile()</a>, <a class="el" href="../../d8/d14/_vector2int16_8h_source.html#l00037">G3D::x</a>, and <a class="el" href="../../d8/d14/_vector2int16_8h_source.html#l00038">G3D::y</a>.</p>

</div>
</div>
<a id="a06e46d57afad3f07380d82bb8d4a6720"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06e46d57afad3f07380d82bb8d4a6720">&#9670;&nbsp;</a></span>queryPolygons() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> dtNavMeshQuery::queryPolygons </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *&#160;</td>
          <td class="paramname"><em>center</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *&#160;</td>
          <td class="paramname"><em>halfExtents</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *&#160;</td>
          <td class="paramname"><em>filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *&#160;</td>
          <td class="paramname"><em>polys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>polyCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int&#160;</td>
          <td class="paramname"><em>maxPolys</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Finds polygons that overlap the search box. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">center</td><td>The center of the search box. [(x, y, z)] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">halfExtents</td><td>The search distance along each axis. [(x, y, z)] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filter</td><td>The polygon filter to apply to the query. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">polys</td><td>The reference ids of the polygons that overlap the query box. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">polyCount</td><td>The number of polygons in the search result. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">maxPolys</td><td>The maximum number of polygons the search result can hold. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status flags for the query.</dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<p>If no polygons are found, the function will return <a class="el" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a> with a <code>polyCount</code> of zero.</p>
<p>If <code>polys</code> is too small to hold the entire result set, then the array will be filled to capacity. The method of choosing which polygons from the full set are included in the partial result set is undefined. </p>

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00872">872</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;{</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="keywordflow">if</span> (!polys || !polyCount || maxPolys &lt; 0)</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160; </div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <a class="code" href="../../df/d8b/classdt_collect_polys_query.html">dtCollectPolysQuery</a> collector(polys, maxPolys);</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160; </div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <a class="code" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> status = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a06e46d57afad3f07380d82bb8d4a6720">queryPolygons</a>(<a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a522cfe706bd4170b4fded79ff55e4bc4">center</a>, halfExtents, filter, &amp;collector);</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/de6/_detour_status_8h.html#ab98b21afb80f30cc60a1f4e86ebc19d8">dtStatusFailed</a>(status))</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160; </div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    *polyCount = collector.numCollected();</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <span class="keywordflow">return</span> collector.overflowed() ? <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a97c8292e3ce2ba0b63bfa4ca57de10af">DT_BUFFER_TOO_SMALL</a> : <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a>;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;}</div>
<div class="ttc" id="aclassdt_collect_polys_query_html"><div class="ttname"><a href="../../df/d8b/classdt_collect_polys_query.html">dtCollectPolysQuery</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00829">DetourNavMeshQuery.cpp:830</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/d71/fmt_2include_2fmt_2core_8h_source.html#l01859">align::center</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00035">DT_BUFFER_TOO_SMALL</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00025">DT_FAILURE</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00034">DT_INVALID_PARAM</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00026">DT_SUCCESS</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00048">dtStatusFailed()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00842">dtCollectPolysQuery::numCollected()</a>, and <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00843">dtCollectPolysQuery::overflowed()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00686">findNearestPoly()</a>.</p>

</div>
</div>
<a id="ae9ae121a5e6fddc2d2393bb1945509a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9ae121a5e6fddc2d2393bb1945509a8">&#9670;&nbsp;</a></span>queryPolygonsInTile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void dtNavMeshQuery::queryPolygonsInTile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a> *&#160;</td>
          <td class="paramname"><em>tile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *&#160;</td>
          <td class="paramname"><em>qmin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *&#160;</td>
          <td class="paramname"><em>qmax</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *&#160;</td>
          <td class="paramname"><em>filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d06/classdt_poly_query.html">dtPolyQuery</a> *&#160;</td>
          <td class="paramname"><em>query</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Queries polygons within a tile. </p>

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00712">712</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;{</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> batchSize = 32;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> polyRefs[batchSize];</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* polys[batchSize];</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="keywordtype">int</span> n = 0;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160; </div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="keywordflow">if</span> (tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a1e1f626924faa6974363c142c40e632e">bvTree</a>)</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    {</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../df/db5/structdt_b_v_node.html">dtBVNode</a>* node = &amp;tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a1e1f626924faa6974363c142c40e632e">bvTree</a>[0];</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../df/db5/structdt_b_v_node.html">dtBVNode</a>* end = &amp;tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a1e1f626924faa6974363c142c40e632e">bvTree</a>[tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a5051ce89a829f53969be9ac3fae9d4c3">header</a>-&gt;<a class="code" href="../../df/dd5/structdt_mesh_header.html#a266e9ad927fe5cbbd3c3c0ffd4e9f5f0">bvNodeCount</a>];</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span>* tbmin = tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a5051ce89a829f53969be9ac3fae9d4c3">header</a>-&gt;<a class="code" href="../../df/dd5/structdt_mesh_header.html#ac1a8890add6666f54407cb8e1abc1179">bmin</a>;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span>* tbmax = tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a5051ce89a829f53969be9ac3fae9d4c3">header</a>-&gt;<a class="code" href="../../df/dd5/structdt_mesh_header.html#a81fc3bf970078d4c4411919204f9ce10">bmax</a>;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> qfac = tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a5051ce89a829f53969be9ac3fae9d4c3">header</a>-&gt;<a class="code" href="../../df/dd5/structdt_mesh_header.html#ab415943e0064a6ed0501e8e7da0e5d26">bvQuantFactor</a>;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160; </div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        <span class="comment">// Calculate quantized box</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> bmin[3], bmax[3];</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <span class="comment">// dtClamp query box to world box.</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        <span class="keywordtype">float</span> minx = <a class="code" href="../../dc/d41/_detour_common_8h.html#a488d89869306c3d57c7a685aab89f9e6">dtClamp</a>(qmin[0], tbmin[0], tbmax[0]) - tbmin[0];</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        <span class="keywordtype">float</span> miny = <a class="code" href="../../dc/d41/_detour_common_8h.html#a488d89869306c3d57c7a685aab89f9e6">dtClamp</a>(qmin[1], tbmin[1], tbmax[1]) - tbmin[1];</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        <span class="keywordtype">float</span> minz = <a class="code" href="../../dc/d41/_detour_common_8h.html#a488d89869306c3d57c7a685aab89f9e6">dtClamp</a>(qmin[2], tbmin[2], tbmax[2]) - tbmin[2];</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        <span class="keywordtype">float</span> maxx = <a class="code" href="../../dc/d41/_detour_common_8h.html#a488d89869306c3d57c7a685aab89f9e6">dtClamp</a>(qmax[0], tbmin[0], tbmax[0]) - tbmin[0];</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        <span class="keywordtype">float</span> maxy = <a class="code" href="../../dc/d41/_detour_common_8h.html#a488d89869306c3d57c7a685aab89f9e6">dtClamp</a>(qmax[1], tbmin[1], tbmax[1]) - tbmin[1];</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        <span class="keywordtype">float</span> maxz = <a class="code" href="../../dc/d41/_detour_common_8h.html#a488d89869306c3d57c7a685aab89f9e6">dtClamp</a>(qmax[2], tbmin[2], tbmax[2]) - tbmin[2];</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        <span class="comment">// Quantize</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        bmin[0] = (<span class="keywordtype">unsigned</span> short)(qfac * minx) &amp; 0xfffe;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        bmin[1] = (<span class="keywordtype">unsigned</span> short)(qfac * miny) &amp; 0xfffe;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        bmin[2] = (<span class="keywordtype">unsigned</span> short)(qfac * minz) &amp; 0xfffe;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        bmax[0] = (<span class="keywordtype">unsigned</span> short)(qfac * maxx + 1) | 1;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        bmax[1] = (<span class="keywordtype">unsigned</span> short)(qfac * maxy + 1) | 1;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        bmax[2] = (<span class="keywordtype">unsigned</span> short)(qfac * maxz + 1) | 1;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160; </div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        <span class="comment">// Traverse tree</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> base = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a0741871ed1357c51e3847f22673fcc9c">getPolyRefBase</a>(tile);</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        <span class="keywordflow">while</span> (node &lt; end)</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        {</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">bool</span> overlap = <a class="code" href="../../dc/d41/_detour_common_8h.html#acd68b769b30c3bf711467f5d8652b15d">dtOverlapQuantBounds</a>(bmin, bmax, node-&gt;<a class="code" href="../../df/db5/structdt_b_v_node.html#a4f03eda2f4ae838eed627db41ebea292">bmin</a>, node-&gt;<a class="code" href="../../df/db5/structdt_b_v_node.html#aba981174ad61a601f743d986142ee504">bmax</a>);</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">bool</span> isLeafNode = node-&gt;<a class="code" href="../../df/db5/structdt_b_v_node.html#aa7de4b9e1151b9f4bf02154cfb24a45a">i</a> &gt;= 0;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160; </div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;            <span class="keywordflow">if</span> (isLeafNode &amp;&amp; overlap)</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;            {</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> ref = base | (<a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a>)node-&gt;<a class="code" href="../../df/db5/structdt_b_v_node.html#aa7de4b9e1151b9f4bf02154cfb24a45a">i</a>;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                <a class="code" href="../../dd/d68/_c_make_lists_8txt.html#a0b5da418382bdd0db6dff439e2863979">if</a> (filter-&gt;<a class="code" href="../../d3/d5f/classdt_query_filter.html#aaf072b8617dfbd4701a8e07f0f10be9c">passFilter</a>(ref, tile, &amp;tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abd8ed5dcf003464a7d8c456f671e6c1e">polys</a>[node-&gt;<a class="code" href="../../df/db5/structdt_b_v_node.html#aa7de4b9e1151b9f4bf02154cfb24a45a">i</a>]))</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                {</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                    polyRefs[n] = ref;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                    polys[n] = &amp;tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abd8ed5dcf003464a7d8c456f671e6c1e">polys</a>[node-&gt;<a class="code" href="../../df/db5/structdt_b_v_node.html#aa7de4b9e1151b9f4bf02154cfb24a45a">i</a>];</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160; </div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                    <span class="keywordflow">if</span> (n == batchSize - 1)</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                    {</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                        query-&gt;<a class="code" href="../../d1/d06/classdt_poly_query.html#a21184a157b5762bc558ac49e43a1131e">process</a>(tile, polys, polyRefs, batchSize);</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                        n = 0;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                    }</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                    {</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                        n++;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                    }</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                }</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;            }</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160; </div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;            <span class="keywordflow">if</span> (overlap || isLeafNode)</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                node++;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;            {</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> escapeIndex = -node-&gt;<a class="code" href="../../df/db5/structdt_b_v_node.html#aa7de4b9e1151b9f4bf02154cfb24a45a">i</a>;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                node += escapeIndex;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;            }</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        }</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    }</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    {</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        <span class="keywordtype">float</span> bmin[3], bmax[3];</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> base = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a0741871ed1357c51e3847f22673fcc9c">getPolyRefBase</a>(tile);</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a5051ce89a829f53969be9ac3fae9d4c3">header</a>-&gt;<a class="code" href="../../df/dd5/structdt_mesh_header.html#ab36d94238505dbf5370c69c8e5276d74">polyCount</a>; ++i)</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        {</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;            <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* p = &amp;tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abd8ed5dcf003464a7d8c456f671e6c1e">polys</a>[i];</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;            <span class="comment">// Do not return off-mesh connection polygons.</span></div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;            <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#a12a7d5dcd2f1d7164531be4ecb5f35a4">getType</a>() == <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#a19937b4ff098f7c52ee08af1b5f39c98a5454d6f0a19d046264f5305baa7ba858">DT_POLYTYPE_OFFMESH_CONNECTION</a>)</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            <span class="comment">// Must pass filter</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;            <span class="keyword">const</span> <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> ref = base | (<a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a>)i;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;            <span class="keywordflow">if</span> (!filter-&gt;<a class="code" href="../../d3/d5f/classdt_query_filter.html#aaf072b8617dfbd4701a8e07f0f10be9c">passFilter</a>(ref, tile, p))</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;            <span class="comment">// Calc polygon bounds.</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span>* v = &amp;tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[p-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[0]*3];</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;            <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(bmin, v);</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;            <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(bmax, v);</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 1; j &lt; p-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#af940c431464c022f844e61130f83d9c2">vertCount</a>; ++j)</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;            {</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                v = &amp;tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[p-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[j]*3];</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                <a class="code" href="../../dc/d41/_detour_common_8h.html#a01ec3e541001b08eb054bfaf019c34d7">dtVmin</a>(bmin, v);</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                <a class="code" href="../../dc/d41/_detour_common_8h.html#a0bb8468867be21e93fab6c7fd343ca67">dtVmax</a>(bmax, v);</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;            }</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../dc/d41/_detour_common_8h.html#ad63541204d445957e2ddc5eff010e485">dtOverlapBounds</a>(qmin, qmax, bmin, bmax))</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;            {</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;                polyRefs[n] = ref;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                polys[n] = p;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160; </div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                <span class="keywordflow">if</span> (n == batchSize - 1)</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                {</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                    query-&gt;<a class="code" href="../../d1/d06/classdt_poly_query.html#a21184a157b5762bc558ac49e43a1131e">process</a>(tile, polys, polyRefs, batchSize);</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;                    n = 0;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                }</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                {</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                    n++;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                }</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;            }</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        }</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    }</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160; </div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="comment">// Process the last polygons that didn&#39;t make a full batch.</span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <span class="keywordflow">if</span> (n &gt; 0)</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        query-&gt;<a class="code" href="../../d1/d06/classdt_poly_query.html#a21184a157b5762bc558ac49e43a1131e">process</a>(tile, polys, polyRefs, n);</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;}</div>
<div class="ttc" id="a_c_make_lists_8txt_html_a0b5da418382bdd0db6dff439e2863979"><div class="ttname"><a href="../../dd/d68/_c_make_lists_8txt.html#a0b5da418382bdd0db6dff439e2863979">if</a></div><div class="ttdeci">NAME if(&quot;;${DISABLED_AC_MODULES};&quot; MATCHES &quot;;${MODULENAME};&quot;) continue() endif() if(EXISTS &quot;$</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d68/_c_make_lists_8txt_source.html#l00068">CMakeLists.txt:68</a></div></div>
<div class="ttc" id="a_detour_common_8h_html_a01ec3e541001b08eb054bfaf019c34d7"><div class="ttname"><a href="../../dc/d41/_detour_common_8h.html#a01ec3e541001b08eb054bfaf019c34d7">dtVmin</a></div><div class="ttdeci">void dtVmin(float *mn, const float *v)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d41/_detour_common_8h_source.html#l00161">DetourCommon.h:161</a></div></div>
<div class="ttc" id="a_detour_common_8h_html_a0bb8468867be21e93fab6c7fd343ca67"><div class="ttname"><a href="../../dc/d41/_detour_common_8h.html#a0bb8468867be21e93fab6c7fd343ca67">dtVmax</a></div><div class="ttdeci">void dtVmax(float *mx, const float *v)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d41/_detour_common_8h_source.html#l00171">DetourCommon.h:171</a></div></div>
<div class="ttc" id="a_detour_common_8h_html_a488d89869306c3d57c7a685aab89f9e6"><div class="ttname"><a href="../../dc/d41/_detour_common_8h.html#a488d89869306c3d57c7a685aab89f9e6">dtClamp</a></div><div class="ttdeci">T dtClamp(T v, T mn, T mx)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d41/_detour_common_8h_source.html#l00075">DetourCommon.h:75</a></div></div>
<div class="ttc" id="a_detour_common_8h_html_acd68b769b30c3bf711467f5d8652b15d"><div class="ttname"><a href="../../dc/d41/_detour_common_8h.html#acd68b769b30c3bf711467f5d8652b15d">dtOverlapQuantBounds</a></div><div class="ttdeci">bool dtOverlapQuantBounds(const unsigned short amin[3], const unsigned short amax[3], const unsigned short bmin[3], const unsigned short bmax[3])</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d41/_detour_common_8h_source.html#l00355">DetourCommon.h:355</a></div></div>
<div class="ttc" id="a_detour_common_8h_html_ad63541204d445957e2ddc5eff010e485"><div class="ttname"><a href="../../dc/d41/_detour_common_8h.html#ad63541204d445957e2ddc5eff010e485">dtOverlapBounds</a></div><div class="ttdeci">bool dtOverlapBounds(const float *amin, const float *amax, const float *bmin, const float *bmax)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d41/_detour_common_8h_source.html#l00372">DetourCommon.h:372</a></div></div>
<div class="ttc" id="aclassdt_poly_query_html_a21184a157b5762bc558ac49e43a1131e"><div class="ttname"><a href="../../d1/d06/classdt_poly_query.html#a21184a157b5762bc558ac49e43a1131e">dtPolyQuery::process</a></div><div class="ttdeci">virtual void process(const dtMeshTile *tile, dtPoly **polys, dtPolyRef *refs, int count)=0</div></div>
<div class="ttc" id="astructdt_b_v_node_html"><div class="ttname"><a href="../../df/db5/structdt_b_v_node.html">dtBVNode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00227">DetourNavMesh.h:228</a></div></div>
<div class="ttc" id="astructdt_b_v_node_html_a4f03eda2f4ae838eed627db41ebea292"><div class="ttname"><a href="../../df/db5/structdt_b_v_node.html#a4f03eda2f4ae838eed627db41ebea292">dtBVNode::bmin</a></div><div class="ttdeci">unsigned short bmin[3]</div><div class="ttdoc">Minimum bounds of the node's AABB. [(x, y, z)].</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00229">DetourNavMesh.h:229</a></div></div>
<div class="ttc" id="astructdt_b_v_node_html_aa7de4b9e1151b9f4bf02154cfb24a45a"><div class="ttname"><a href="../../df/db5/structdt_b_v_node.html#aa7de4b9e1151b9f4bf02154cfb24a45a">dtBVNode::i</a></div><div class="ttdeci">int i</div><div class="ttdoc">The node's index. (Negative for escape sequence.)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00231">DetourNavMesh.h:231</a></div></div>
<div class="ttc" id="astructdt_b_v_node_html_aba981174ad61a601f743d986142ee504"><div class="ttname"><a href="../../df/db5/structdt_b_v_node.html#aba981174ad61a601f743d986142ee504">dtBVNode::bmax</a></div><div class="ttdeci">unsigned short bmax[3]</div><div class="ttdoc">Maximum bounds of the node's AABB. [(x, y, z)].</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00230">DetourNavMesh.h:230</a></div></div>
<div class="ttc" id="astructdt_mesh_header_html_a266e9ad927fe5cbbd3c3c0ffd4e9f5f0"><div class="ttname"><a href="../../df/dd5/structdt_mesh_header.html#a266e9ad927fe5cbbd3c3c0ffd4e9f5f0">dtMeshHeader::bvNodeCount</a></div><div class="ttdeci">int bvNodeCount</div><div class="ttdoc">The number of bounding volume nodes. (Zero if bounding volumes are disabled.)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00278">DetourNavMesh.h:278</a></div></div>
<div class="ttc" id="astructdt_mesh_header_html_a81fc3bf970078d4c4411919204f9ce10"><div class="ttname"><a href="../../df/dd5/structdt_mesh_header.html#a81fc3bf970078d4c4411919204f9ce10">dtMeshHeader::bmax</a></div><div class="ttdeci">float bmax[3]</div><div class="ttdoc">The maximum bounds of the tile's AABB. [(x, y, z)].</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00285">DetourNavMesh.h:285</a></div></div>
<div class="ttc" id="astructdt_mesh_header_html_ab415943e0064a6ed0501e8e7da0e5d26"><div class="ttname"><a href="../../df/dd5/structdt_mesh_header.html#ab415943e0064a6ed0501e8e7da0e5d26">dtMeshHeader::bvQuantFactor</a></div><div class="ttdeci">float bvQuantFactor</div><div class="ttdoc">The bounding volume quantization factor.</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00288">DetourNavMesh.h:288</a></div></div>
<div class="ttc" id="astructdt_mesh_header_html_ac1a8890add6666f54407cb8e1abc1179"><div class="ttname"><a href="../../df/dd5/structdt_mesh_header.html#ac1a8890add6666f54407cb8e1abc1179">dtMeshHeader::bmin</a></div><div class="ttdeci">float bmin[3]</div><div class="ttdoc">The minimum bounds of the tile's AABB. [(x, y, z)].</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00284">DetourNavMesh.h:284</a></div></div>
<div class="ttc" id="astructdt_mesh_tile_html_a1e1f626924faa6974363c142c40e632e"><div class="ttname"><a href="../../d1/d1b/structdt_mesh_tile.html#a1e1f626924faa6974363c142c40e632e">dtMeshTile::bvTree</a></div><div class="ttdeci">dtBVNode * bvTree</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00313">DetourNavMesh.h:313</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00230">dtBVNode::bmax</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00285">dtMeshHeader::bmax</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00229">dtBVNode::bmin</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00284">dtMeshHeader::bmin</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00278">dtMeshHeader::bvNodeCount</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00288">dtMeshHeader::bvQuantFactor</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00313">dtMeshTile::bvTree</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00161">DT_POLYTYPE_OFFMESH_CONNECTION</a>, <a class="el" href="../../da/d60/_detour_assert_8h_source.html#l00047">dtAssert</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00075">dtClamp()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00372">dtOverlapBounds()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00355">dtOverlapQuantBounds()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00191">dtVcopy()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00171">dtVmax()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00161">dtVmin()</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01349">dtNavMesh::getPolyRefBase()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00199">dtPoly::getType()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00298">dtMeshTile::header</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00231">dtBVNode::i</a>, <a class="el" href="../../dd/d68/_c_make_lists_8txt_source.html#l00068">if()</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00543">m_nav</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00087">dtQueryFilter::passFilter()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00269">dtMeshHeader::polyCount</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00299">dtMeshTile::polys</a>, <a class="el" href="../../d1/d06/classdt_poly_query.html#a21184a157b5762bc558ac49e43a1131e">dtPolyQuery::process()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00183">dtPoly::vertCount</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00174">dtPoly::verts</a>, and <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00300">dtMeshTile::verts</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00896">queryPolygons()</a>.</p>

</div>
</div>
<a id="a96bd4282df1e863d1c813b2fe881a262"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96bd4282df1e863d1c813b2fe881a262">&#9670;&nbsp;</a></span>raycast() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> dtNavMeshQuery::raycast </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a>&#160;</td>
          <td class="paramname"><em>startRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *&#160;</td>
          <td class="paramname"><em>startPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *&#160;</td>
          <td class="paramname"><em>endPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *&#160;</td>
          <td class="paramname"><em>filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> unsigned int&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/df1/structdt_raycast_hit.html">dtRaycastHit</a> *&#160;</td>
          <td class="paramname"><em>hit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a>&#160;</td>
          <td class="paramname"><em>prevRef</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Casts a 'walkability' ray along the surface of the navigation mesh from the start position toward the end position. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">startRef</td><td>The reference id of the start polygon. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">startPos</td><td>A position within the start polygon representing the start of the ray. [(x, y, z)] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">endPos</td><td>The position to cast the ray toward. [(x, y, z)] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filter</td><td>The polygon filter to apply to the query. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>govern how the raycast behaves. See dtRaycastOptions </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">hit</td><td>Pointer to a raycast hit structure which will be filled by the results. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">prevRef</td><td>parent of start ref. Used during for cost calculation [opt] </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status flags for the query.</dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<p>This method is meant to be used for quick, short distance checks.</p>
<p>If the path array is too small to hold the result, it will be filled as far as possible from the start postion toward the end position.</p>
<p><b>Using the Hit Parameter t of RaycastHit</b></p>
<p>If the hit parameter is a very high value (FLT_MAX), then the ray has hit the end position. In this case the path represents a valid corridor to the end position and the value of <code>hitNormal</code> is undefined.</p>
<p>If the hit parameter is zero, then the start position is on the wall that was hit and the value of <code>hitNormal</code> is undefined.</p>
<p>If 0 &lt; t &lt; 1.0 then the following applies:</p>
<div class="fragment"><div class="line">distanceToHitBorder = distanceToEndPosition * t</div>
<div class="line">hitPoint = startPos + (endPos - startPos) * t</div>
</div><!-- fragment --><p><b>Use Case Restriction</b></p>
<p>The raycast ignores the y-value of the end position. (2D check.) This places significant limits on how it can be used. For example:</p>
<p>Consider a scene where there is a main floor with a second floor balcony that hangs over the main floor. So the first floor mesh extends below the balcony mesh. The start position is somewhere on the first floor. The end position is on the balcony.</p>
<p>The raycast will search toward the end position along the first floor mesh. If it reaches the end position's xz-coordinates it will indicate FLT_MAX (no wall hit), meaning it reached the end position. This is one example of why this method is meant for short distance checks. </p>

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02439">2439</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;{</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;    <a class="code" href="../../da/d60/_detour_assert_8h.html#ad9878e9fa0121ff8d1390e21dc086951">dtAssert</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>);</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160; </div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;    <span class="keywordflow">if</span> (!hit)</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160; </div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;    hit-&gt;<a class="code" href="../../d3/df1/structdt_raycast_hit.html#a890c2216ded62ca0932cd6ee27cc7ea9">t</a> = 0;</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;    hit-&gt;<a class="code" href="../../d3/df1/structdt_raycast_hit.html#ae1b9b3893e653ce5a1ecf8d8415f5a93">pathCount</a> = 0;</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;    hit-&gt;<a class="code" href="../../d3/df1/structdt_raycast_hit.html#aa545333016e4844923a022263ab6a5fa">pathCost</a> = 0;</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160; </div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;    <span class="comment">// Validate input</span></div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a84ce3e44a2a97c5377b3b308825fcd37">isValidPolyRef</a>(startRef) ||</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;        !startPos || !<a class="code" href="../../dc/d41/_detour_common_8h.html#a1de203d55d933ccaa2ae9f3e126f4e63">dtVisfinite</a>(startPos) ||</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;        !endPos || !<a class="code" href="../../dc/d41/_detour_common_8h.html#a1de203d55d933ccaa2ae9f3e126f4e63">dtVisfinite</a>(endPos) ||</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;        !filter ||</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;        (prevRef &amp;&amp; !<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a84ce3e44a2a97c5377b3b308825fcd37">isValidPolyRef</a>(prevRef)))</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;    {</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a> | <a class="code" href="../../d8/de6/_detour_status_8h.html#a6dfcd405e3c12914b8b10af6558667c0">DT_INVALID_PARAM</a>;</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;    }</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;    </div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;    <span class="keywordtype">float</span> dir[3], curPos[3], lastPos[3];</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;    <span class="keywordtype">float</span> verts[<a class="code" href="../../d5/d7a/group__detour.html#ga8591fdac662dbfabb580de626c64c9f3">DT_VERTS_PER_POLYGON</a>*3+3];  </div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;    <span class="keywordtype">int</span> n = 0;</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160; </div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;    <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(curPos, startPos);</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;    <a class="code" href="../../dc/d41/_detour_common_8h.html#a8b3255050bf09f5459f3c575ba1574b4">dtVsub</a>(dir, endPos, startPos);</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;    <a class="code" href="../../dc/d41/_detour_common_8h.html#a78ab75edc5f87fc90471873c2652ca89">dtVset</a>(hit-&gt;<a class="code" href="../../d3/df1/structdt_raycast_hit.html#a35b5d410f632591db3f0a7d7f5c235b8">hitNormal</a>, 0, 0, 0);</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160; </div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;    <a class="code" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> status = <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a>;</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160; </div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* prevTile, *tile, *nextTile;</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* prevPoly, *poly, *nextPoly;</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;    <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> curRef;</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160; </div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;    <span class="comment">// The API input has been checked already, skip checking internal data.</span></div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;    curRef = startRef;</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;    tile = 0;</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;    poly = 0;</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;    <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#ac5c5b89a6af63b7de29089ae83091e0f">getTileAndPolyByRefUnsafe</a>(curRef, &amp;tile, &amp;poly);</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;    nextTile = prevTile = tile;</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;    nextPoly = prevPoly = poly;</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;    <span class="keywordflow">if</span> (prevRef)</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;        <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#ac5c5b89a6af63b7de29089ae83091e0f">getTileAndPolyByRefUnsafe</a>(prevRef, &amp;prevTile, &amp;prevPoly);</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160; </div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;    <span class="keywordflow">while</span> (curRef)</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;    {</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;        <span class="comment">// Cast ray against current polygon.</span></div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;        </div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;        <span class="comment">// Collect vertices.</span></div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;        <span class="keywordtype">int</span> nv = 0;</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; (int)poly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#af940c431464c022f844e61130f83d9c2">vertCount</a>; ++i)</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;        {</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;            <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(&amp;verts[nv*3], &amp;tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[poly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[i]*3]);</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;            nv++;</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;        }</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;        </div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;        <span class="keywordtype">float</span> tmin, tmax;</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;        <span class="keywordtype">int</span> segMin, segMax;</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../dc/d41/_detour_common_8h.html#a5cb54b8f523d837ab0d99bf4acfc7e2a">dtIntersectSegmentPoly2D</a>(startPos, endPos, verts, nv, tmin, tmax, segMin, segMax))</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;        {</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;            <span class="comment">// Could not hit the polygon, keep the old t and report hit.</span></div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;            hit-&gt;<a class="code" href="../../d3/df1/structdt_raycast_hit.html#ae1b9b3893e653ce5a1ecf8d8415f5a93">pathCount</a> = n;</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;            <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;        }</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160; </div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;        hit-&gt;<a class="code" href="../../d3/df1/structdt_raycast_hit.html#a27f1d665cde84889338ef4634c017c39">hitEdgeIndex</a> = segMax;</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160; </div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;        <span class="comment">// Keep track of furthest t so far.</span></div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;        <span class="keywordflow">if</span> (tmax &gt; hit-&gt;<a class="code" href="../../d3/df1/structdt_raycast_hit.html#a890c2216ded62ca0932cd6ee27cc7ea9">t</a>)</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;            hit-&gt;<a class="code" href="../../d3/df1/structdt_raycast_hit.html#a890c2216ded62ca0932cd6ee27cc7ea9">t</a> = tmax;</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;        </div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;        <span class="comment">// Store visited polygons.</span></div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;        <span class="keywordflow">if</span> (n &lt; hit-&gt;maxPath)</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;            hit-&gt;<a class="code" href="../../d3/df1/structdt_raycast_hit.html#afaec74eedaf7e62a4fcc9b2bc2ce7006">path</a>[n++] = curRef;</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;            status |= <a class="code" href="../../d8/de6/_detour_status_8h.html#a97c8292e3ce2ba0b63bfa4ca57de10af">DT_BUFFER_TOO_SMALL</a>;</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160; </div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;        <span class="comment">// Ray end is completely inside the polygon.</span></div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;        <span class="keywordflow">if</span> (segMax == -1)</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;        {</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;            hit-&gt;<a class="code" href="../../d3/df1/structdt_raycast_hit.html#a890c2216ded62ca0932cd6ee27cc7ea9">t</a> = <a class="code" href="../../d9/df6/my__global_8h.html#a7fbf1534f9e0f0bfdb86fb928902474c">FLT_MAX</a>;</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;            hit-&gt;<a class="code" href="../../d3/df1/structdt_raycast_hit.html#ae1b9b3893e653ce5a1ecf8d8415f5a93">pathCount</a> = n;</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;            </div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;            <span class="comment">// add the cost</span></div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;            <span class="keywordflow">if</span> (options &amp; <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#a667a15950cb93797b15be3c958e440f0a904277bd4cec80e1ec2848c010b779e8">DT_RAYCAST_USE_COSTS</a>)</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;                hit-&gt;<a class="code" href="../../d3/df1/structdt_raycast_hit.html#aa545333016e4844923a022263ab6a5fa">pathCost</a> += filter-&gt;<a class="code" href="../../d3/d5f/classdt_query_filter.html#a11d016505b732a1a013c3771a4157dea">getCost</a>(curPos, endPos, prevRef, prevTile, prevPoly, curRef, tile, poly, curRef, tile, poly);</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;            <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;        }</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160; </div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;        <span class="comment">// Follow neighbours.</span></div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;        <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> nextRef = 0;</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;        </div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = poly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#a671fd6893087936e80fcd17f7f666c0e">firstLink</a>; i != <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#aca31b5eadafd19285e16eca707b3295b">DT_NULL_LINK</a>; i = tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[i].<a class="code" href="../../df/d2d/structdt_link.html#a475b893f03bf4c942ab6376d83dca82e">next</a>)</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;        {</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;            <span class="keyword">const</span> <a class="code" href="../../df/d2d/structdt_link.html">dtLink</a>* <a class="code" href="../../dd/d95/structlink.html">link</a> = &amp;tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[i];</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;            </div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;            <span class="comment">// Find link which contains this edge.</span></div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;            <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)<a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;edge != segMax)</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;            </div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;            <span class="comment">// Get pointer to the next polygon.</span></div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;            nextTile = 0;</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;            nextPoly = 0;</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;            <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#ac5c5b89a6af63b7de29089ae83091e0f">getTileAndPolyByRefUnsafe</a>(<a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;ref, &amp;nextTile, &amp;nextPoly);</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;            </div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;            <span class="comment">// Skip off-mesh connections.</span></div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;            <span class="keywordflow">if</span> (nextPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#a12a7d5dcd2f1d7164531be4ecb5f35a4">getType</a>() == <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#a19937b4ff098f7c52ee08af1b5f39c98a5454d6f0a19d046264f5305baa7ba858">DT_POLYTYPE_OFFMESH_CONNECTION</a>)</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;            </div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;            <span class="comment">// Skip links based on filter.</span></div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;            <span class="keywordflow">if</span> (!filter-&gt;<a class="code" href="../../d3/d5f/classdt_query_filter.html#aaf072b8617dfbd4701a8e07f0f10be9c">passFilter</a>(<a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;ref, nextTile, nextPoly))</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;            </div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;            <span class="comment">// If the link is internal, just return the ref.</span></div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;side == 0xff)</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;            {</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;                nextRef = <a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;ref;</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;            }</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;            </div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;            <span class="comment">// If the link is at tile boundary,</span></div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;            </div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;            <span class="comment">// Check if the link spans the whole edge, and accept.</span></div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;bmin == 0 &amp;&amp; <a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;bmax == 255)</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;            {</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;                nextRef = <a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;ref;</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;            }</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;            </div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;            <span class="comment">// Check for partial edge links.</span></div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> v0 = poly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[<a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;edge];</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> v1 = poly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#acff94eb19526d33ef3c966b583d1d73f">verts</a>[(<a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;edge+1) % poly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#af940c431464c022f844e61130f83d9c2">vertCount</a>];</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span>* <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a> = &amp;tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[v0*3];</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span>* <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">right</a> = &amp;tile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#abee62e6320aff3e2d0cdce239ec2c549">verts</a>[v1*3];</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;            </div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;            <span class="comment">// Check that the intersection lies inside the link portal.</span></div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;            <a class="code" href="../../dd/d68/_c_make_lists_8txt.html#a0b5da418382bdd0db6dff439e2863979">if</a> (<a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;side == 0 || <a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;side == 4)</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;            {</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;                <span class="comment">// Calculate link size.</span></div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">float</span> s = 1.0f/255.0f;</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;                <span class="keywordtype">float</span> lmin = <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>[2] + (<a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">right</a>[2] - <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>[2])*(<a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;bmin*s);</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;                <span class="keywordtype">float</span> lmax = <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>[2] + (<a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">right</a>[2] - <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>[2])*(<a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;bmax*s);</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;                <span class="keywordflow">if</span> (lmin &gt; lmax) <a class="code" href="../../dc/d41/_detour_common_8h.html#af347205bbcdcd802e8a41f0e2897c7f2">dtSwap</a>(lmin, lmax);</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;                </div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;                <span class="comment">// Find Z intersection.</span></div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;                <span class="keywordtype">float</span> <a class="code" href="../../df/de2/namespace_g3_d.html#a05e047033db3919db794d0f77e38797f">z</a> = startPos[2] + (endPos[2]-startPos[2])*tmax;</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../df/de2/namespace_g3_d.html#a05e047033db3919db794d0f77e38797f">z</a> &gt;= lmin &amp;&amp; <a class="code" href="../../df/de2/namespace_g3_d.html#a05e047033db3919db794d0f77e38797f">z</a> &lt;= lmax)</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;                {</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;                    nextRef = <a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;ref;</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;                }</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;            }</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;side == 2 || <a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;side == 6)</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;            {</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;                <span class="comment">// Calculate link size.</span></div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">float</span> s = 1.0f/255.0f;</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;                <span class="keywordtype">float</span> lmin = <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>[0] + (<a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">right</a>[0] - <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>[0])*(<a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;bmin*s);</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;                <span class="keywordtype">float</span> lmax = <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>[0] + (<a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">right</a>[0] - <a class="code" href="../../d2/d18/namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a3282b06f67c5e15c0eaeb515ef8f86fd">left</a>[0])*(<a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;bmax*s);</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;                <span class="keywordflow">if</span> (lmin &gt; lmax) <a class="code" href="../../dc/d41/_detour_common_8h.html#af347205bbcdcd802e8a41f0e2897c7f2">dtSwap</a>(lmin, lmax);</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;                </div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;                <span class="comment">// Find X intersection.</span></div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;                <span class="keywordtype">float</span> <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a> = startPos[0] + (endPos[0]-startPos[0])*tmax;</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a> &gt;= lmin &amp;&amp; <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a> &lt;= lmax)</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;                {</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;                    nextRef = <a class="code" href="../../dd/d95/structlink.html">link</a>-&gt;ref;</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;                }</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;            }</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;        }</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;        </div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;        <span class="comment">// add the cost</span></div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;        <span class="keywordflow">if</span> (options &amp; <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#a667a15950cb93797b15be3c958e440f0a904277bd4cec80e1ec2848c010b779e8">DT_RAYCAST_USE_COSTS</a>)</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;        {</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;            <span class="comment">// compute the intersection point at the furthest end of the polygon</span></div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;            <span class="comment">// and correct the height (since the raycast moves in 2d)</span></div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;            <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(lastPos, curPos);</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;            <a class="code" href="../../dc/d41/_detour_common_8h.html#a1c4e6b8a509d183f62f57af1e73e1c6e">dtVmad</a>(curPos, startPos, dir, hit-&gt;<a class="code" href="../../d3/df1/structdt_raycast_hit.html#a890c2216ded62ca0932cd6ee27cc7ea9">t</a>);</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;            <span class="keywordtype">float</span>* e1 = &amp;verts[segMax*3];</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;            <span class="keywordtype">float</span>* e2 = &amp;verts[((segMax+1)%nv)*3];</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;            <span class="keywordtype">float</span> eDir[3], <a class="code" href="../../d9/d39/dtoa_8c.html#a158860430cb5f139d88fdf19cf9ad511">diff</a>[3];</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;            <a class="code" href="../../dc/d41/_detour_common_8h.html#a8b3255050bf09f5459f3c575ba1574b4">dtVsub</a>(eDir, e2, e1);</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;            <a class="code" href="../../dc/d41/_detour_common_8h.html#a8b3255050bf09f5459f3c575ba1574b4">dtVsub</a>(<a class="code" href="../../d9/d39/dtoa_8c.html#a158860430cb5f139d88fdf19cf9ad511">diff</a>, curPos, e1);</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;            <span class="keywordtype">float</span> s = <a class="code" href="../../dc/d41/_detour_common_8h.html#af0a088077730ad6995ce4d82093588cc">dtSqr</a>(eDir[0]) &gt; <a class="code" href="../../dc/d41/_detour_common_8h.html#af0a088077730ad6995ce4d82093588cc">dtSqr</a>(eDir[2]) ? <a class="code" href="../../d9/d39/dtoa_8c.html#a158860430cb5f139d88fdf19cf9ad511">diff</a>[0] / eDir[0] : <a class="code" href="../../d9/d39/dtoa_8c.html#a158860430cb5f139d88fdf19cf9ad511">diff</a>[2] / eDir[2];</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;            curPos[1] = e1[1] + eDir[1] * s;</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160; </div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;            hit-&gt;<a class="code" href="../../d3/df1/structdt_raycast_hit.html#aa545333016e4844923a022263ab6a5fa">pathCost</a> += filter-&gt;<a class="code" href="../../d3/d5f/classdt_query_filter.html#a11d016505b732a1a013c3771a4157dea">getCost</a>(lastPos, curPos, prevRef, prevTile, prevPoly, curRef, tile, poly, nextRef, nextTile, nextPoly);</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;        }</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160; </div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;        <span class="keywordflow">if</span> (!nextRef)</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;        {</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;            <span class="comment">// No neighbour, we hit a wall.</span></div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;            </div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;            <span class="comment">// Calculate hit normal.</span></div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d71/namespacempq.html#ae78cc6206276c5d8a54a7b181bcd4f8d">a</a> = segMax;</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d31/prof_8c.html#a3fca4d23183335e3d46f507d28e94e8b">b</a> = segMax+1 &lt; nv ? segMax+1 : 0;</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span>* va = &amp;verts[<a class="code" href="../../d4/d71/namespacempq.html#ae78cc6206276c5d8a54a7b181bcd4f8d">a</a>*3];</div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span>* vb = &amp;verts[<a class="code" href="../../df/d31/prof_8c.html#a3fca4d23183335e3d46f507d28e94e8b">b</a>*3];</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> dx = vb[0] - va[0];</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> dz = vb[2] - va[2];</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;            hit-&gt;<a class="code" href="../../d3/df1/structdt_raycast_hit.html#a35b5d410f632591db3f0a7d7f5c235b8">hitNormal</a>[0] = dz;</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;            hit-&gt;<a class="code" href="../../d3/df1/structdt_raycast_hit.html#a35b5d410f632591db3f0a7d7f5c235b8">hitNormal</a>[1] = 0;</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;            hit-&gt;<a class="code" href="../../d3/df1/structdt_raycast_hit.html#a35b5d410f632591db3f0a7d7f5c235b8">hitNormal</a>[2] = -dx;</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;            <a class="code" href="../../dc/d41/_detour_common_8h.html#a68f410fb499f25b1bf72ff4c6051cb3c">dtVnormalize</a>(hit-&gt;<a class="code" href="../../d3/df1/structdt_raycast_hit.html#a35b5d410f632591db3f0a7d7f5c235b8">hitNormal</a>);</div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;            </div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;            hit-&gt;<a class="code" href="../../d3/df1/structdt_raycast_hit.html#ae1b9b3893e653ce5a1ecf8d8415f5a93">pathCount</a> = n;</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;            <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;        }</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160; </div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;        <span class="comment">// No hit, advance to neighbour polygon.</span></div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;        prevRef = curRef;</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;        curRef = nextRef;</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;        prevTile = tile;</div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;        tile = nextTile;</div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;        prevPoly = poly;</div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;        poly = nextPoly;</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;    }</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;    </div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;    hit-&gt;<a class="code" href="../../d3/df1/structdt_raycast_hit.html#ae1b9b3893e653ce5a1ecf8d8415f5a93">pathCount</a> = n;</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;    </div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;    <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;}</div>
<div class="ttc" id="a_detour_common_8h_html_a1c4e6b8a509d183f62f57af1e73e1c6e"><div class="ttname"><a href="../../dc/d41/_detour_common_8h.html#a1c4e6b8a509d183f62f57af1e73e1c6e">dtVmad</a></div><div class="ttdeci">void dtVmad(float *dest, const float *v1, const float *v2, const float s)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d41/_detour_common_8h_source.html#l00106">DetourCommon.h:106</a></div></div>
<div class="ttc" id="a_detour_common_8h_html_a78ab75edc5f87fc90471873c2652ca89"><div class="ttname"><a href="../../dc/d41/_detour_common_8h.html#a78ab75edc5f87fc90471873c2652ca89">dtVset</a></div><div class="ttdeci">void dtVset(float *dest, const float x, const float y, const float z)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d41/_detour_common_8h_source.html#l00183">DetourCommon.h:183</a></div></div>
<div class="ttc" id="a_detour_common_8h_html_af347205bbcdcd802e8a41f0e2897c7f2"><div class="ttname"><a href="../../dc/d41/_detour_common_8h.html#af347205bbcdcd802e8a41f0e2897c7f2">dtSwap</a></div><div class="ttdeci">void dtSwap(T &amp;a, T &amp;b)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d41/_detour_common_8h_source.html#l00046">DetourCommon.h:46</a></div></div>
<div class="ttc" id="a_detour_nav_mesh_8h_html_a667a15950cb93797b15be3c958e440f0a904277bd4cec80e1ec2848c010b779e8"><div class="ttname"><a href="../../d1/ddd/_detour_nav_mesh_8h.html#a667a15950cb93797b15be3c958e440f0a904277bd4cec80e1ec2848c010b779e8">DT_RAYCAST_USE_COSTS</a></div><div class="ttdeci">@ DT_RAYCAST_USE_COSTS</div><div class="ttdoc">Raycast should calculate movement cost along the ray and fill RaycastHit::cost.</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00142">DetourNavMesh.h:142</a></div></div>
<div class="ttc" id="adtoa_8c_html_a158860430cb5f139d88fdf19cf9ad511"><div class="ttname"><a href="../../d9/d39/dtoa_8c.html#a158860430cb5f139d88fdf19cf9ad511">diff</a></div><div class="ttdeci">static Bigint * diff(Bigint *a, Bigint *b, Stack_alloc *alloc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d39/dtoa_8c_source.html#l01108">dtoa.c:1108</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_a05e047033db3919db794d0f77e38797f"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#a05e047033db3919db794d0f77e38797f">G3D::z</a></div><div class="ttdeci">G3D::int16 z</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d5d/_vector3int16_8h_source.html#l00046">Vector3int16.h:46</a></div></div>
<div class="ttc" id="anamespacempq_html_ae78cc6206276c5d8a54a7b181bcd4f8d"><div class="ttname"><a href="../../d4/d71/namespacempq.html#ae78cc6206276c5d8a54a7b181bcd4f8d">mpq.a</a></div><div class="ttdeci">a</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d3e/mpq_8py_source.html#l00290">mpq.py:290</a></div></div>
<div class="ttc" id="aprof_8c_html_a3fca4d23183335e3d46f507d28e94e8b"><div class="ttname"><a href="../../df/d31/prof_8c.html#a3fca4d23183335e3d46f507d28e94e8b">b</a></div><div class="ttdeci">const prof_gctx_t * b</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d31/prof_8c_source.html#l00277">prof.c:277</a></div></div>
<div class="ttc" id="astructdt_raycast_hit_html_a27f1d665cde84889338ef4634c017c39"><div class="ttname"><a href="../../d3/df1/structdt_raycast_hit.html#a27f1d665cde84889338ef4634c017c39">dtRaycastHit::hitEdgeIndex</a></div><div class="ttdeci">int hitEdgeIndex</div><div class="ttdoc">The index of the edge on the final polygon where the wall was hit.</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00134">DetourNavMeshQuery.h:134</a></div></div>
<div class="ttc" id="astructdt_raycast_hit_html_a35b5d410f632591db3f0a7d7f5c235b8"><div class="ttname"><a href="../../d3/df1/structdt_raycast_hit.html#a35b5d410f632591db3f0a7d7f5c235b8">dtRaycastHit::hitNormal</a></div><div class="ttdeci">float hitNormal[3]</div><div class="ttdoc">hitNormal The normal of the nearest wall hit. [(x, y, z)]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00131">DetourNavMeshQuery.h:131</a></div></div>
<div class="ttc" id="astructdt_raycast_hit_html_a890c2216ded62ca0932cd6ee27cc7ea9"><div class="ttname"><a href="../../d3/df1/structdt_raycast_hit.html#a890c2216ded62ca0932cd6ee27cc7ea9">dtRaycastHit::t</a></div><div class="ttdeci">float t</div><div class="ttdoc">The hit parameter. (FLT_MAX if no wall hit.)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00128">DetourNavMeshQuery.h:128</a></div></div>
<div class="ttc" id="astructdt_raycast_hit_html_aa545333016e4844923a022263ab6a5fa"><div class="ttname"><a href="../../d3/df1/structdt_raycast_hit.html#aa545333016e4844923a022263ab6a5fa">dtRaycastHit::pathCost</a></div><div class="ttdeci">float pathCost</div><div class="ttdoc">The cost of the path until hit.</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00146">DetourNavMeshQuery.h:146</a></div></div>
<div class="ttc" id="astructdt_raycast_hit_html_ae1b9b3893e653ce5a1ecf8d8415f5a93"><div class="ttname"><a href="../../d3/df1/structdt_raycast_hit.html#ae1b9b3893e653ce5a1ecf8d8415f5a93">dtRaycastHit::pathCount</a></div><div class="ttdeci">int pathCount</div><div class="ttdoc">The number of visited polygons. [opt].</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00140">DetourNavMeshQuery.h:140</a></div></div>
<div class="ttc" id="astructdt_raycast_hit_html_afaec74eedaf7e62a4fcc9b2bc2ce7006"><div class="ttname"><a href="../../d3/df1/structdt_raycast_hit.html#afaec74eedaf7e62a4fcc9b2bc2ce7006">dtRaycastHit::path</a></div><div class="ttdeci">dtPolyRef * path</div><div class="ttdoc">Pointer to an array of reference ids of the visited polygons. [opt].</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00137">DetourNavMeshQuery.h:137</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d6/d3e/mpq_8py_source.html#l00290">mpq::a</a>, <a class="el" href="../../df/d31/prof_8c_source.html#l00277">b</a>, <a class="el" href="../../d9/d39/dtoa_8c_source.html#l01108">diff()</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00035">DT_BUFFER_TOO_SMALL</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00025">DT_FAILURE</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00034">DT_INVALID_PARAM</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00100">DT_NULL_LINK</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00161">DT_POLYTYPE_OFFMESH_CONNECTION</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00142">DT_RAYCAST_USE_COSTS</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00026">DT_SUCCESS</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00073">DT_VERTS_PER_POLYGON</a>, <a class="el" href="../../da/d60/_detour_assert_8h_source.html#l00047">dtAssert</a>, <a class="el" href="../../d5/de1/_detour_common_8cpp_source.html#l00110">dtIntersectSegmentPoly2D()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00068">dtSqr()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00046">dtSwap()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00191">dtVcopy()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00290">dtVisfinite()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00106">dtVmad()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00264">dtVnormalize()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00183">dtVset()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00140">dtVsub()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00170">dtPoly::firstLink</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l00783">FLT_MAX</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00094">dtQueryFilter::getCost()</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01208">dtNavMesh::getTileAndPolyByRefUnsafe()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00199">dtPoly::getType()</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00134">dtRaycastHit::hitEdgeIndex</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00131">dtRaycastHit::hitNormal</a>, <a class="el" href="../../dd/d68/_c_make_lists_8txt_source.html#l00068">if()</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01216">dtNavMesh::isValidPolyRef()</a>, <a class="el" href="../../d5/d71/fmt_2include_2fmt_2core_8h_source.html#l01859">align::left</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00301">dtMeshTile::links</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00543">m_nav</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00217">dtLink::next</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00087">dtQueryFilter::passFilter()</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00137">dtRaycastHit::path</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00146">dtRaycastHit::pathCost</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00140">dtRaycastHit::pathCount</a>, <a class="el" href="../../d5/d71/fmt_2include_2fmt_2core_8h_source.html#l01859">align::right</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00128">dtRaycastHit::t</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00183">dtPoly::vertCount</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00174">dtPoly::verts</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00300">dtMeshTile::verts</a>, <a class="el" href="../../d8/d14/_vector2int16_8h_source.html#l00037">G3D::x</a>, and <a class="el" href="../../db/d5d/_vector3int16_8h_source.html#l00046">G3D::z</a>.</p>

</div>
</div>
<a id="a7509a4bf31a215f20478c5050ef25913"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7509a4bf31a215f20478c5050ef25913">&#9670;&nbsp;</a></span>raycast() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> dtNavMeshQuery::raycast </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a>&#160;</td>
          <td class="paramname"><em>startRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *&#160;</td>
          <td class="paramname"><em>startPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> float *&#160;</td>
          <td class="paramname"><em>endPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d3/d5f/classdt_query_filter.html">dtQueryFilter</a> *&#160;</td>
          <td class="paramname"><em>filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>hitNormal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>pathCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int&#160;</td>
          <td class="paramname"><em>maxPath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Casts a 'walkability' ray along the surface of the navigation mesh from the start position toward the end position. </p><dl class="section note"><dt>Note</dt><dd>A wrapper around raycast(..., RaycastHit*). Retained for backward compatibility. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">startRef</td><td>The reference id of the start polygon. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">startPos</td><td>A position within the start polygon representing the start of the ray. [(x, y, z)] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">endPos</td><td>The position to cast the ray toward. [(x, y, z)] </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">t</td><td>The hit parameter. (FLT_MAX if no wall hit.) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">hitNormal</td><td>The normal of the nearest wall hit. [(x, y, z)] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filter</td><td>The polygon filter to apply to the query. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">path</td><td>The reference ids of the visited polygons. [opt] </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pathCount</td><td>The number of visited polygons. [opt] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">maxPath</td><td>The maximum number of polygons the <code>path</code> array can hold. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status flags for the query.</dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<p>This method is meant to be used for quick, short distance checks.</p>
<p>If the path array is too small to hold the result, it will be filled as far as possible from the start postion toward the end position.</p>
<p><b>Using the Hit Parameter (t)</b></p>
<p>If the hit parameter is a very high value (FLT_MAX), then the ray has hit the end position. In this case the path represents a valid corridor to the end position and the value of <code>hitNormal</code> is undefined.</p>
<p>If the hit parameter is zero, then the start position is on the wall that was hit and the value of <code>hitNormal</code> is undefined.</p>
<p>If 0 &lt; t &lt; 1.0 then the following applies:</p>
<div class="fragment"><div class="line">distanceToHitBorder = distanceToEndPosition * t</div>
<div class="line">hitPoint = startPos + (endPos - startPos) * t</div>
</div><!-- fragment --><p><b>Use Case Restriction</b></p>
<p>The raycast ignores the y-value of the end position. (2D check.) This places significant limits on how it can be used. For example:</p>
<p>Consider a scene where there is a main floor with a second floor balcony that hangs over the main floor. So the first floor mesh extends below the balcony mesh. The start position is somewhere on the first floor. The end position is on the balcony.</p>
<p>The raycast will search toward the end position along the first floor mesh. If it reaches the end position's xz-coordinates it will indicate FLT_MAX (no wall hit), meaning it reached the end position. This is one example of why this method is meant for short distance checks. </p>

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02381">2381</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;{</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;    <a class="code" href="../../d3/df1/structdt_raycast_hit.html">dtRaycastHit</a> hit;</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;    hit.<a class="code" href="../../d3/df1/structdt_raycast_hit.html#afaec74eedaf7e62a4fcc9b2bc2ce7006">path</a> = path;</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;    hit.<a class="code" href="../../d3/df1/structdt_raycast_hit.html#a62b75cb350d9ace5e47887c7c1add9b3">maxPath</a> = maxPath;</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160; </div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;    <a class="code" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> status = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a7509a4bf31a215f20478c5050ef25913">raycast</a>(startRef, startPos, endPos, filter, 0, &amp;hit);</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;    </div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;    *t = hit.<a class="code" href="../../d3/df1/structdt_raycast_hit.html#a890c2216ded62ca0932cd6ee27cc7ea9">t</a>;</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;    <span class="keywordflow">if</span> (hitNormal)</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;        <a class="code" href="../../dc/d41/_detour_common_8h.html#a20bd1921d4bb81875f48bb8cbf7a63b4">dtVcopy</a>(hitNormal, hit.<a class="code" href="../../d3/df1/structdt_raycast_hit.html#a35b5d410f632591db3f0a7d7f5c235b8">hitNormal</a>);</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;    <span class="keywordflow">if</span> (pathCount)</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;        *pathCount = hit.<a class="code" href="../../d3/df1/structdt_raycast_hit.html#ae1b9b3893e653ce5a1ecf8d8415f5a93">pathCount</a>;</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160; </div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;    <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;}</div>
<div class="ttc" id="astructdt_raycast_hit_html"><div class="ttname"><a href="../../d3/df1/structdt_raycast_hit.html">dtRaycastHit</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00125">DetourNavMeshQuery.h:126</a></div></div>
<div class="ttc" id="astructdt_raycast_hit_html_a62b75cb350d9ace5e47887c7c1add9b3"><div class="ttname"><a href="../../d3/df1/structdt_raycast_hit.html#a62b75cb350d9ace5e47887c7c1add9b3">dtRaycastHit::maxPath</a></div><div class="ttdeci">int maxPath</div><div class="ttdoc">The maximum number of polygons the path array can hold.</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00143">DetourNavMeshQuery.h:143</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00191">dtVcopy()</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00131">dtRaycastHit::hitNormal</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00143">dtRaycastHit::maxPath</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00137">dtRaycastHit::path</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00140">dtRaycastHit::pathCount</a>, and <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00128">dtRaycastHit::t</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/server_2game_2_movement_2_movement_generators_2_path_generator_8cpp_source.html#l00162">PathGenerator::BuildPolyPath()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01470">finalizeSlicedFindPath()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01560">finalizeSlicedFindPathPartial()</a>, and <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01253">updateSlicedFindPath()</a>.</p>

</div>
</div>
<a id="aa0c147e3da7fd0b59342da0fc456afc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0c147e3da7fd0b59342da0fc456afc7">&#9670;&nbsp;</a></span>updateSlicedFindPath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> dtNavMeshQuery::updateSlicedFindPath </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> int&#160;</td>
          <td class="paramname"><em>maxIter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>doneIters</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Updates an in-progress sliced path query. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">maxIter</td><td>The maximum number of iterations to perform. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">doneIters</td><td>The actual number of iterations completed. [opt] </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status flags for the query. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01253">1253</a> of file <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;{</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/de6/_detour_status_8h.html#a9f7cad6c2320bb7f491eb9a5ff63ab91">dtStatusInProgress</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a148e814fa33f723250cfa5236ed146a8">status</a>))</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a148e814fa33f723250cfa5236ed146a8">status</a>;</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160; </div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <span class="comment">// Make sure the request is still valid.</span></div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a84ce3e44a2a97c5377b3b308825fcd37">isValidPolyRef</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a0ae05a1a363a1eb4a535835167b11e34">startRef</a>) || !<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a84ce3e44a2a97c5377b3b308825fcd37">isValidPolyRef</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a6d08b3de0dce784d8f8a6e3c6f7cd122">endRef</a>))</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;    {</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;        <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a148e814fa33f723250cfa5236ed146a8">status</a> = <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a>;</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a>;</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    }</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160; </div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    <a class="code" href="../../d3/df1/structdt_raycast_hit.html">dtRaycastHit</a> rayHit;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    rayHit.<a class="code" href="../../d3/df1/structdt_raycast_hit.html#a62b75cb350d9ace5e47887c7c1add9b3">maxPath</a> = 0;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;        </div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <span class="keywordtype">int</span> iter = 0;</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <span class="keywordflow">while</span> (iter &lt; maxIter &amp;&amp; !m_openList-&gt;empty())</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    {</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;        iter++;</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;        </div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;        <span class="comment">// Remove node from open list and put it in closed list.</span></div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;        <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* bestNode = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a4fa10be8cbf65dcdf2284f18a3e949d3">pop</a>();</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;        bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp;= ~<a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974a792e67a3226f80ca54332bcbdac1c1c9">DT_NODE_OPEN</a>;</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;        bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> |= <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974aa9a4b8aa94ba18584fa07b2d8ad9aac2">DT_NODE_CLOSED</a>;</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;        </div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;        <span class="comment">// Reached the goal, stop searching.</span></div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;        <span class="keywordflow">if</span> (bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a> == <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a6d08b3de0dce784d8f8a6e3c6f7cd122">endRef</a>)</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;        {</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;            <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#abdb35321ad8dbbf8e1e00a1922661868">lastBestNode</a> = bestNode;</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;            <span class="keyword">const</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> details = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a148e814fa33f723250cfa5236ed146a8">status</a> &amp; <a class="code" href="../../d8/de6/_detour_status_8h.html#a9ad48e73cb942b84fe08c5ad18626a54">DT_STATUS_DETAIL_MASK</a>;</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;            <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a148e814fa33f723250cfa5236ed146a8">status</a> = <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a> | details;</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;            <span class="keywordflow">if</span> (doneIters)</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;                *doneIters = iter;</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a148e814fa33f723250cfa5236ed146a8">status</a>;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;        }</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;        </div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;        <span class="comment">// Get current poly and tile.</span></div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;        <span class="comment">// The API input has been cheked already, skip checking internal data.</span></div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> bestRef = bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a>;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* bestTile = 0;</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* bestPoly = 0;</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/de6/_detour_status_8h.html#ab98b21afb80f30cc60a1f4e86ebc19d8">dtStatusFailed</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a36a84aa7296d5cc257eb3ddc38181253">getTileAndPolyByRef</a>(bestRef, &amp;bestTile, &amp;bestPoly)))</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;        {</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;            <span class="comment">// The polygon has disappeared during the sliced query, fail.</span></div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;            <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a148e814fa33f723250cfa5236ed146a8">status</a> = <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a>;</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;            <span class="keywordflow">if</span> (doneIters)</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;                *doneIters = iter;</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a148e814fa33f723250cfa5236ed146a8">status</a>;</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;        }</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;        </div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;        <span class="comment">// Get parent and grand parent poly and tile.</span></div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;        <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> parentRef = 0, grandpaRef = 0;</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* parentTile = 0;</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* parentPoly = 0;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;        <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* parentNode = 0;</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;        <span class="keywordflow">if</span> (bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a>)</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;        {</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;            parentNode = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a5f6d20bd49d338b03885909b0c13ccea">getNodeAtIdx</a>(bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a>);</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;            parentRef = parentNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a>;</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;            <span class="keywordflow">if</span> (parentNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a>)</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;                grandpaRef = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a5f6d20bd49d338b03885909b0c13ccea">getNodeAtIdx</a>(parentNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a>)-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a>;</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;        }</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        <span class="keywordflow">if</span> (parentRef)</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;        {</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;            <span class="keywordtype">bool</span> invalidParent = <a class="code" href="../../d8/de6/_detour_status_8h.html#ab98b21afb80f30cc60a1f4e86ebc19d8">dtStatusFailed</a>(<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a36a84aa7296d5cc257eb3ddc38181253">getTileAndPolyByRef</a>(parentRef, &amp;parentTile, &amp;parentPoly));</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;            <span class="keywordflow">if</span> (invalidParent || (grandpaRef &amp;&amp; !<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#a84ce3e44a2a97c5377b3b308825fcd37">isValidPolyRef</a>(grandpaRef)) )</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;            {</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;                <span class="comment">// The polygon has disappeared during the sliced query, fail.</span></div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;                <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a148e814fa33f723250cfa5236ed146a8">status</a> = <a class="code" href="../../d8/de6/_detour_status_8h.html#ae3cf4ee7a8ebe23a82381ffe0952fe3f">DT_FAILURE</a>;</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;                <span class="keywordflow">if</span> (doneIters)</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;                    *doneIters = iter;</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a148e814fa33f723250cfa5236ed146a8">status</a>;</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;            }</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;        }</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160; </div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        <span class="comment">// decide whether to test raycast to previous nodes</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;        <span class="keywordtype">bool</span> tryLOS = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a685529ad637163d76fa82ff6c3258823">options</a> &amp; <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#aa783b570776c948098378da1a45e1bacae68dc8af59dbb706ec70f4482590599b">DT_FINDPATH_ANY_ANGLE</a>)</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        {</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;            <span class="keywordflow">if</span> ((parentRef != 0) &amp;&amp; (<a class="code" href="../../dc/d41/_detour_common_8h.html#acebfa3b142ae9b3ad052bf0dd0b3a820">dtVdistSqr</a>(parentNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>, bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>) &lt; <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a88839e6bc65cd11155aa3cb5a8a40876">raycastLimitSqr</a>))</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;                tryLOS = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;        }</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;        </div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = bestPoly-&gt;<a class="code" href="../../d5/d02/structdt_poly.html#a671fd6893087936e80fcd17f7f666c0e">firstLink</a>; i != <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#aca31b5eadafd19285e16eca707b3295b">DT_NULL_LINK</a>; i = bestTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[i].<a class="code" href="../../df/d2d/structdt_link.html#a475b893f03bf4c942ab6376d83dca82e">next</a>)</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;        {</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;            <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#ab4e0b2257a670c1a800057999612b466">dtPolyRef</a> neighbourRef = bestTile-&gt;<a class="code" href="../../d1/d1b/structdt_mesh_tile.html#a09ec6812e47b7e63f035abd0b7753554">links</a>[i].<a class="code" href="../../df/d2d/structdt_link.html#a34c73193fed76de347adb0f2e9841659">ref</a>;</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;            </div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;            <span class="comment">// Skip invalid ids and do not expand back to where we came from.</span></div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;            <span class="keywordflow">if</span> (!neighbourRef || neighbourRef == parentRef)</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;            </div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;            <span class="comment">// Get neighbour poly and tile.</span></div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;            <span class="comment">// The API input has been cheked already, skip checking internal data.</span></div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;            <span class="keyword">const</span> <a class="code" href="../../d1/d1b/structdt_mesh_tile.html">dtMeshTile</a>* neighbourTile = 0;</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;            <span class="keyword">const</span> <a class="code" href="../../d5/d02/structdt_poly.html">dtPoly</a>* neighbourPoly = 0;</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;            <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01311c62ca841ef348acb7a2af59d343">m_nav</a>-&gt;<a class="code" href="../../da/d16/classdt_nav_mesh.html#ac5c5b89a6af63b7de29089ae83091e0f">getTileAndPolyByRefUnsafe</a>(neighbourRef, &amp;neighbourTile, &amp;neighbourPoly);         </div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;            </div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#aca699cf1a32f5300522f5df0ccdf64da">filter</a>-&gt;<a class="code" href="../../d3/d5f/classdt_query_filter.html#aaf072b8617dfbd4701a8e07f0f10be9c">passFilter</a>(neighbourRef, neighbourTile, neighbourPoly))</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;            </div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;            <span class="comment">// get the neighbor node</span></div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;            <a class="code" href="../../d7/de4/structdt_node.html">dtNode</a>* neighbourNode = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a9642659acf1f7fbfcd408b4c3da8a885">getNode</a>(neighbourRef, 0);</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;            <span class="keywordflow">if</span> (!neighbourNode)</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;            {</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;                <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a148e814fa33f723250cfa5236ed146a8">status</a> |= <a class="code" href="../../d8/de6/_detour_status_8h.html#a0f707e8e896d9a725f8f93f5779cf02c">DT_OUT_OF_NODES</a>;</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;            }</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;            </div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;            <span class="comment">// do not expand to nodes that were already visited from the same parent</span></div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;            <span class="keywordflow">if</span> (neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a> != 0 &amp;&amp; neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a> == bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a>)</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160; </div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;            <span class="comment">// If the node is visited the first time, calculate node position.</span></div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;            <span class="keywordflow">if</span> (neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> == 0)</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;            {</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;                <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a01e4c0b9bf01914da6f634b1a4953f45">getEdgeMidPoint</a>(bestRef, bestPoly, bestTile,</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;                                neighbourRef, neighbourPoly, neighbourTile,</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;                                neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>);</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;            }</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;            </div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;            <span class="comment">// Calculate cost and heuristic.</span></div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;            <span class="keywordtype">float</span> cost = 0;</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;            <span class="keywordtype">float</span> heuristic = 0;</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;            </div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;            <span class="comment">// raycast parent</span></div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;            <span class="keywordtype">bool</span> foundShortCut = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;            rayHit.<a class="code" href="../../d3/df1/structdt_raycast_hit.html#aa545333016e4844923a022263ab6a5fa">pathCost</a> = rayHit.<a class="code" href="../../d3/df1/structdt_raycast_hit.html#a890c2216ded62ca0932cd6ee27cc7ea9">t</a> = 0;</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;            <span class="keywordflow">if</span> (tryLOS)</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;            {</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;                <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a7509a4bf31a215f20478c5050ef25913">raycast</a>(parentRef, parentNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>, neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>, <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#aca699cf1a32f5300522f5df0ccdf64da">filter</a>, <a class="code" href="../../d1/ddd/_detour_nav_mesh_8h.html#a667a15950cb93797b15be3c958e440f0a904277bd4cec80e1ec2848c010b779e8">DT_RAYCAST_USE_COSTS</a>, &amp;rayHit, grandpaRef);</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;                foundShortCut = rayHit.<a class="code" href="../../d3/df1/structdt_raycast_hit.html#a890c2216ded62ca0932cd6ee27cc7ea9">t</a> &gt;= 1.0f;</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;            }</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160; </div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;            <span class="comment">// update move cost</span></div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;            <span class="keywordflow">if</span> (foundShortCut)</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;            {</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;                <span class="comment">// shortcut found using raycast. Using shorter cost instead</span></div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;                cost = parentNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a253defdaa9ea8dbe9ea5991bcfb75b32">cost</a> + rayHit.<a class="code" href="../../d3/df1/structdt_raycast_hit.html#aa545333016e4844923a022263ab6a5fa">pathCost</a>;</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;            }</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;            {</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;                <span class="comment">// No shortcut found.</span></div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">float</span> curCost = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#aca699cf1a32f5300522f5df0ccdf64da">filter</a>-&gt;<a class="code" href="../../d3/d5f/classdt_query_filter.html#a11d016505b732a1a013c3771a4157dea">getCost</a>(bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>, neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>,</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;                                                              parentRef, parentTile, parentPoly,</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;                                                            bestRef, bestTile, bestPoly,</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;                                                            neighbourRef, neighbourTile, neighbourPoly);</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;                cost = bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a253defdaa9ea8dbe9ea5991bcfb75b32">cost</a> + curCost;</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;            }</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160; </div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;            <span class="comment">// Special case for last node.</span></div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;            <span class="keywordflow">if</span> (neighbourRef == <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a6d08b3de0dce784d8f8a6e3c6f7cd122">endRef</a>)</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;            {</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">float</span> endCost = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#aca699cf1a32f5300522f5df0ccdf64da">filter</a>-&gt;<a class="code" href="../../d3/d5f/classdt_query_filter.html#a11d016505b732a1a013c3771a4157dea">getCost</a>(neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>, <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a3c264a540069766a48c5bf579b6f4510">endPos</a>,</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;                                                              bestRef, bestTile, bestPoly,</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;                                                              neighbourRef, neighbourTile, neighbourPoly,</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;                                                              0, 0, 0);</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;                </div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;                cost = cost + endCost;</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;                heuristic = 0;</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;            }</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;            {</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;                heuristic = <a class="code" href="../../dc/d41/_detour_common_8h.html#a000a4b437d73fd37c831c4bcbc3abb8d">dtVdist</a>(neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a2e6577134c6d533b9cc9914c38eb877d">pos</a>, <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a3c264a540069766a48c5bf579b6f4510">endPos</a>)*<a class="code" href="../../de/de4/_detour_nav_mesh_query_8cpp.html#a691377deb83853ca02735f394ccf0a30">H_SCALE</a>;</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;            }</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;            </div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> total = cost + heuristic;</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;            </div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;            <span class="comment">// The node is already in open list and the new result is worse, skip.</span></div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;            <span class="keywordflow">if</span> ((neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp; <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974a792e67a3226f80ca54332bcbdac1c1c9">DT_NODE_OPEN</a>) &amp;&amp; total &gt;= neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#aed27a8d0170505d1dba0cd3201bc6536">total</a>)</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;            <span class="comment">// The node is already visited and process, and the new result is worse, skip.</span></div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;            <span class="keywordflow">if</span> ((neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp; <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974aa9a4b8aa94ba18584fa07b2d8ad9aac2">DT_NODE_CLOSED</a>) &amp;&amp; total &gt;= neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#aed27a8d0170505d1dba0cd3201bc6536">total</a>)</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;            </div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;            <span class="comment">// Add or update the node.</span></div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;            neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a> = foundShortCut ? bestNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#af9b33590451ca71942c251e140724d49">pidx</a> : <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a36e05cdfb4a75f9612538706f86a59f9">m_nodePool</a>-&gt;<a class="code" href="../../d3/d3c/classdt_node_pool.html#a5b223e8441b2d202fb1a18022228d6e1">getNodeIdx</a>(bestNode);</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;            neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a0ffc2be17daff1087e7d2920334eeb3d">id</a> = neighbourRef;</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;            neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> = (neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp; ~(<a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974aa9a4b8aa94ba18584fa07b2d8ad9aac2">DT_NODE_CLOSED</a> | <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974acbfda68f4c9e956d9b2573521a5156e1">DT_NODE_PARENT_DETACHED</a>));</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;            neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#a253defdaa9ea8dbe9ea5991bcfb75b32">cost</a> = cost;</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;            neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#aed27a8d0170505d1dba0cd3201bc6536">total</a> = total;</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;            <span class="keywordflow">if</span> (foundShortCut)</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;                neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> = (neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> | <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974acbfda68f4c9e956d9b2573521a5156e1">DT_NODE_PARENT_DETACHED</a>);</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;            </div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;            <span class="keywordflow">if</span> (neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> &amp; <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974a792e67a3226f80ca54332bcbdac1c1c9">DT_NODE_OPEN</a>)</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;            {</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;                <span class="comment">// Already in open, update node location.</span></div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;                <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a8be783bde0911bdf92503a2e111f2a1a">modify</a>(neighbourNode);</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;            }</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;            {</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;                <span class="comment">// Put the node in open list.</span></div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;                neighbourNode-&gt;<a class="code" href="../../d7/de4/structdt_node.html#acd018f188ced1765cce2d34ae88c9f75">flags</a> |= <a class="code" href="../../da/dfb/_detour_node_8h.html#a2792299fd5fa6e50bb9c5d5b7dd12974a792e67a3226f80ca54332bcbdac1c1c9">DT_NODE_OPEN</a>;</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;                <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a76d83f497e1a5bcf72a6cc902a696a2a">push</a>(neighbourNode);</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;            }</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;            </div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;            <span class="comment">// Update nearest node to target so far.</span></div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;            <span class="keywordflow">if</span> (heuristic &lt; <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#ae0d8511ab6bfa3b233d25f27713c9c99">lastBestNodeCost</a>)</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;            {</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;                <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#ae0d8511ab6bfa3b233d25f27713c9c99">lastBestNodeCost</a> = heuristic;</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;                <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#abdb35321ad8dbbf8e1e00a1922661868">lastBestNode</a> = neighbourNode;</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;            }</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;        }</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;    }</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    </div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;    <span class="comment">// Exhausted all nodes, but could not find path.</span></div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#ab3229a1b413887209558e3f3fa33de23">m_openList</a>-&gt;<a class="code" href="../../dc/d2a/classdt_node_queue.html#a15693f0c97c5d9a32cd0302cdcafd27c">empty</a>())</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    {</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d8/de6/_detour_status_8h.html#a4f23c0dcf28d9e299a4aa06af5b9ada3">dtStatus</a> details = <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a148e814fa33f723250cfa5236ed146a8">status</a> &amp; <a class="code" href="../../d8/de6/_detour_status_8h.html#a9ad48e73cb942b84fe08c5ad18626a54">DT_STATUS_DETAIL_MASK</a>;</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;        <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a148e814fa33f723250cfa5236ed146a8">status</a> = <a class="code" href="../../d8/de6/_detour_status_8h.html#ace78a9666e74d996b468942e7434989a">DT_SUCCESS</a> | details;</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    }</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160; </div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    <span class="keywordflow">if</span> (doneIters)</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;        *doneIters = iter;</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160; </div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dd/db0/classdt_nav_mesh_query.html#a9798484bd5dc6c2965fb4fc5ede18042">m_query</a>.<a class="code" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html#a148e814fa33f723250cfa5236ed146a8">status</a>;</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;}</div>
<div class="ttc" id="a_detour_common_8h_html_acebfa3b142ae9b3ad052bf0dd0b3a820"><div class="ttname"><a href="../../dc/d41/_detour_common_8h.html#acebfa3b142ae9b3ad052bf0dd0b3a820">dtVdistSqr</a></div><div class="ttdeci">float dtVdistSqr(const float *v1, const float *v2)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d41/_detour_common_8h_source.html#l00230">DetourCommon.h:230</a></div></div>
<div class="ttc" id="a_detour_status_8h_html_a9f7cad6c2320bb7f491eb9a5ff63ab91"><div class="ttname"><a href="../../d8/de6/_detour_status_8h.html#a9f7cad6c2320bb7f491eb9a5ff63ab91">dtStatusInProgress</a></div><div class="ttdeci">bool dtStatusInProgress(dtStatus status)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de6/_detour_status_8h_source.html#l00054">DetourStatus.h:54</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00039">dtNode::cost</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00025">DT_FAILURE</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00136">DT_FINDPATH_ANY_ANGLE</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00027">DT_NODE_CLOSED</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00026">DT_NODE_OPEN</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00028">DT_NODE_PARENT_DETACHED</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00100">DT_NULL_LINK</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00036">DT_OUT_OF_NODES</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00142">DT_RAYCAST_USE_COSTS</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00030">DT_STATUS_DETAIL_MASK</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00026">DT_SUCCESS</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00048">dtStatusFailed()</a>, <a class="el" href="../../d8/de6/_detour_status_8h_source.html#l00054">dtStatusInProgress()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00218">dtVdist()</a>, <a class="el" href="../../dc/d41/_detour_common_8h_source.html#l00230">dtVdistSqr()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00144">dtNodeQueue::empty()</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00551">dtNavMeshQuery::dtQueryData::endPos</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00550">dtNavMeshQuery::dtQueryData::endRef</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00552">dtNavMeshQuery::dtQueryData::filter</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00170">dtPoly::firstLink</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00043">dtNode::flags</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00094">dtQueryFilter::getCost()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02316">getEdgeMidPoint()</a>, <a class="el" href="../../d1/d00/_detour_node_8cpp_source.html#l00121">dtNodePool::getNode()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00068">dtNodePool::getNodeAtIdx()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00062">dtNodePool::getNodeIdx()</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01190">dtNavMesh::getTileAndPolyByRef()</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01208">dtNavMesh::getTileAndPolyByRefUnsafe()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00103">H_SCALE</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00044">dtNode::id</a>, <a class="el" href="../../df/d2a/_detour_nav_mesh_8cpp_source.html#l01216">dtNavMesh::isValidPolyRef()</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00548">dtNavMeshQuery::dtQueryData::lastBestNode</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00549">dtNavMeshQuery::dtQueryData::lastBestNodeCost</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00301">dtMeshTile::links</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00543">m_nav</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00559">m_nodePool</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00560">m_openList</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00556">m_query</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00143">dtRaycastHit::maxPath</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00132">dtNodeQueue::modify()</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00217">dtLink::next</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00553">dtNavMeshQuery::dtQueryData::options</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00087">dtQueryFilter::passFilter()</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00146">dtRaycastHit::pathCost</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00041">dtNode::pidx</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00118">dtNodeQueue::pop()</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00038">dtNode::pos</a>, <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00126">dtNodeQueue::push()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02381">raycast()</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00554">dtNavMeshQuery::dtQueryData::raycastLimitSqr</a>, <a class="el" href="../../d1/ddd/_detour_nav_mesh_8h_source.html#l00216">dtLink::ref</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00550">dtNavMeshQuery::dtQueryData::startRef</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00547">dtNavMeshQuery::dtQueryData::status</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00128">dtRaycastHit::t</a>, and <a class="el" href="../../da/dfb/_detour_node_8h_source.html#l00040">dtNode::total</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a01311c62ca841ef348acb7a2af59d343"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01311c62ca841ef348acb7a2af59d343">&#9670;&nbsp;</a></span>m_nav</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../da/d16/classdt_nav_mesh.html">dtNavMesh</a>* dtNavMeshQuery::m_nav</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointer to navmesh data. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00543">543</a> of file <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html">DetourNavMeshQuery.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01699">appendPortals()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00514">closestPointOnPoly()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00539">closestPointOnPolyBoundary()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l03443">findDistanceToWall()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l03065">findLocalNeighbourhood()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00686">findNearestPoly()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00946">findPath()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02693">findPolysAroundCircle()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02867">findPolysAroundShape()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00221">findRandomPoint()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00316">findRandomPointAroundCircle()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01766">findStraightPath()</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00504">getAttachedNavMesh()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l03028">getPathFromDijkstraSearch()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00594">getPolyHeight()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l03287">getPolyWallSegments()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02221">getPortalPoints()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00166">init()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01189">initSlicedFindPath()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l03630">isValidPolyRef()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02017">moveAlongSurface()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00896">queryPolygons()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00712">queryPolygonsInTile()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02439">raycast()</a>, and <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01253">updateSlicedFindPath()</a>.</p>

</div>
</div>
<a id="a36e05cdfb4a75f9612538706f86a59f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36e05cdfb4a75f9612538706f86a59f9">&#9670;&nbsp;</a></span>m_nodePool</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">class <a class="el" href="../../d3/d3c/classdt_node_pool.html">dtNodePool</a>* dtNavMeshQuery::m_nodePool</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointer to node pool. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00559">559</a> of file <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html">DetourNavMeshQuery.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01470">finalizeSlicedFindPath()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01560">finalizeSlicedFindPathPartial()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l03443">findDistanceToWall()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00946">findPath()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02693">findPolysAroundCircle()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02867">findPolysAroundShape()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00316">findRandomPointAroundCircle()</a>, <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00500">getNodePool()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l03028">getPathFromDijkstraSearch()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01140">getPathToNode()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00166">init()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01189">initSlicedFindPath()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l03649">isInClosedList()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01253">updateSlicedFindPath()</a>, and <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00147">~dtNavMeshQuery()</a>.</p>

</div>
</div>
<a id="ab3229a1b413887209558e3f3fa33de23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3229a1b413887209558e3f3fa33de23">&#9670;&nbsp;</a></span>m_openList</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">class <a class="el" href="../../dc/d2a/classdt_node_queue.html">dtNodeQueue</a>* dtNavMeshQuery::m_openList</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointer to open list queue. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00560">560</a> of file <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html">DetourNavMeshQuery.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l03443">findDistanceToWall()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00946">findPath()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02693">findPolysAroundCircle()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02867">findPolysAroundShape()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00316">findRandomPointAroundCircle()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00166">init()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01189">initSlicedFindPath()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01253">updateSlicedFindPath()</a>, and <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00147">~dtNavMeshQuery()</a>.</p>

</div>
</div>
<a id="a9798484bd5dc6c2965fb4fc5ede18042"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9798484bd5dc6c2965fb4fc5ede18042">&#9670;&nbsp;</a></span>m_query</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/d3b/structdt_nav_mesh_query_1_1dt_query_data.html">dtQueryData</a> dtNavMeshQuery::m_query</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sliced query state. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00556">556</a> of file <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html">DetourNavMeshQuery.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00138">dtNavMeshQuery()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01470">finalizeSlicedFindPath()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01560">finalizeSlicedFindPathPartial()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01189">initSlicedFindPath()</a>, and <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l01253">updateSlicedFindPath()</a>.</p>

</div>
</div>
<a id="a4a767464a8ed2c20954a69d26b5ac554"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a767464a8ed2c20954a69d26b5ac554">&#9670;&nbsp;</a></span>m_tinyNodePool</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">class <a class="el" href="../../d3/d3c/classdt_node_pool.html">dtNodePool</a>* dtNavMeshQuery::m_tinyNodePool</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointer to small node pool. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html#l00558">558</a> of file <a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html">DetourNavMeshQuery.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l03065">findLocalNeighbourhood()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00166">init()</a>, <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l02017">moveAlongSurface()</a>, and <a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html#l00147">~dtNavMeshQuery()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>deps/recastnavigation/Detour/Include/<a class="el" href="../../dc/d04/_detour_nav_mesh_query_8h_source.html">DetourNavMeshQuery.h</a></li>
<li>deps/recastnavigation/Detour/Source/<a class="el" href="../../de/de4/_detour_nav_mesh_query_8cpp_source.html">DetourNavMeshQuery.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
