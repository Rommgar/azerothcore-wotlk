<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Azerotcore-wotlk: AuraEffect Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Azerotcore-wotlk
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="../../d0/d60/class_aura_effect-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">AuraEffect Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a29cf330277aeb89d17d18f6e112f035b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a29cf330277aeb89d17d18f6e112f035b">GetCaster</a> () <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a29cf330277aeb89d17d18f6e112f035b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad507745acb9935a3a3cb2c6f35788ef6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/d03/class_object_guid.html">ObjectGuid</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a> () <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ad507745acb9935a3a3cb2c6f35788ef6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0417bd1d648cb9d2888937ddad75788c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/dde/class_aura.html">Aura</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a> () <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a0417bd1d648cb9d2888937ddad75788c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05df315be4f02b28353b070bfb2c2fde"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a05df315be4f02b28353b070bfb2c2fde">GetTargetList</a> (<a class="el" href="../../dd/d68/_c_make_lists_8txt.html#a0b2e90260bc220565ca487d6b28606a3">std::list</a>&lt; <a class="el" href="../../da/db7/class_unit.html">Unit</a> * &gt; &amp;targetList) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a05df315be4f02b28353b070bfb2c2fde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ea63ccc256382991e0802842f69e44f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a3ea63ccc256382991e0802842f69e44f">GetApplicationList</a> (<a class="el" href="../../dd/d68/_c_make_lists_8txt.html#a0b2e90260bc220565ca487d6b28606a3">std::list</a>&lt; <a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> * &gt; &amp;applicationList) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a3ea63ccc256382991e0802842f69e44f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a204013c66b4f6c33b49a0baa05e16f53"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d39/struct_spell_modifier.html">SpellModifier</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a204013c66b4f6c33b49a0baa05e16f53">GetSpellModifier</a> () <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a204013c66b4f6c33b49a0baa05e16f53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93f49c4b2f8cabfc0372c8aef24f022e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d7d/class_spell_info.html">SpellInfo</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a>  *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a> () <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a93f49c4b2f8cabfc0372c8aef24f022e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63863fb01a8cf08251c0b4482be6a20f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a> () <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a63863fb01a8cf08251c0b4482be6a20f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8c4811ced24cbd9b4afff1c22fbb1b0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a> () <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ab8c4811ced24cbd9b4afff1c22fbb1b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aced766d86694ac0980a6e4f3cae77b5b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#aced766d86694ac0980a6e4f3cae77b5b">GetBaseAmount</a> () <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:aced766d86694ac0980a6e4f3cae77b5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a458f465c0150d16e555d1997d7b09fc2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a458f465c0150d16e555d1997d7b09fc2">GetAmplitude</a> () <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a458f465c0150d16e555d1997d7b09fc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88fa5605246883e095cd82ebd5d75bef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a88fa5605246883e095cd82ebd5d75bef">GetMiscValueB</a> () <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a88fa5605246883e095cd82ebd5d75bef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa183791665930afb43bbac2163b1d8d4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a> () <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:aa183791665930afb43bbac2163b1d8d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a120cf8a45a3c816e4ef588733fa812e5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799">AuraType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a> () <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a120cf8a45a3c816e4ef588733fa812e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcf272bebf373ad3aebc03cce644cbee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a> () <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:afcf272bebf373ad3aebc03cce644cbee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ea46b2ccefe8e6a25eef466847503aa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a6ea46b2ccefe8e6a25eef466847503aa">GetForcedAmount</a> () <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a6ea46b2ccefe8e6a25eef466847503aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9790b9f33c52c6d3b830dc6f56f08bf0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a9790b9f33c52c6d3b830dc6f56f08bf0">SetAmount</a> (<a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> amount)</td></tr>
<tr class="separator:a9790b9f33c52c6d3b830dc6f56f08bf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f11a0855c476d2f991995a449bcf6ae"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a6f11a0855c476d2f991995a449bcf6ae">GetPeriodicTimer</a> () <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a6f11a0855c476d2f991995a449bcf6ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc3f0fbe56a3974699db0056eed45664"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#abc3f0fbe56a3974699db0056eed45664">SetPeriodicTimer</a> (<a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> periodicTimer)</td></tr>
<tr class="separator:abc3f0fbe56a3974699db0056eed45664"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66f8fd3fa296b59cee26c35c433e52f2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a66f8fd3fa296b59cee26c35c433e52f2">CalculateAmount</a> (<a class="el" href="../../da/db7/class_unit.html">Unit</a> *caster)</td></tr>
<tr class="separator:a66f8fd3fa296b59cee26c35c433e52f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b0a6694f62bf72c41a1f461f9894581"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a5b0a6694f62bf72c41a1f461f9894581">CalculatePeriodic</a> (<a class="el" href="../../da/db7/class_unit.html">Unit</a> *caster, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> create=<a class="el" href="../../d9/d5e/stdbool_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> load=<a class="el" href="../../d9/d5e/stdbool_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>)</td></tr>
<tr class="separator:a5b0a6694f62bf72c41a1f461f9894581"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0b3261b6c7f5ae45348d0113d24f1ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ab0b3261b6c7f5ae45348d0113d24f1ed">CalculatePeriodicData</a> ()</td></tr>
<tr class="separator:ab0b3261b6c7f5ae45348d0113d24f1ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d248ef37c73049cf4df98b6fc1008fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a5d248ef37c73049cf4df98b6fc1008fe">CalculateSpellMod</a> ()</td></tr>
<tr class="separator:a5d248ef37c73049cf4df98b6fc1008fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07673908af178ffaee01353a6d11a703"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a07673908af178ffaee01353a6d11a703">ChangeAmount</a> (<a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> newAmount, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> mark=<a class="el" href="../../d9/d5e/stdbool_8h.html#a41f9c5fb8b08eb5dc3edce4dcb37fee7">true</a>, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> onStackOrReapply=<a class="el" href="../../d9/d5e/stdbool_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>)</td></tr>
<tr class="separator:a07673908af178ffaee01353a6d11a703"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc38a016285e442a485c9b9bc17a6105"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#adc38a016285e442a485c9b9bc17a6105">RecalculateAmount</a> ()</td></tr>
<tr class="separator:adc38a016285e442a485c9b9bc17a6105"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a597dbfc9d3bbe964088f601528126818"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a597dbfc9d3bbe964088f601528126818">RecalculateAmount</a> (<a class="el" href="../../da/db7/class_unit.html">Unit</a> *caster)</td></tr>
<tr class="separator:a597dbfc9d3bbe964088f601528126818"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2322ac1aaf1bdfe21733d082603c503c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a2322ac1aaf1bdfe21733d082603c503c">CanBeRecalculated</a> () <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a2322ac1aaf1bdfe21733d082603c503c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af93cf68cd8854d93010663353043e4a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#af93cf68cd8854d93010663353043e4a2">SetCanBeRecalculated</a> (<a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> val)</td></tr>
<tr class="separator:af93cf68cd8854d93010663353043e4a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7710e32fe9dc267292c3b15333521560"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a7710e32fe9dc267292c3b15333521560">HandleEffect</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply)</td></tr>
<tr class="separator:a7710e32fe9dc267292c3b15333521560"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab9391e1ba5774b3df74dee4f65f707a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#aab9391e1ba5774b3df74dee4f65f707a">HandleEffect</a> (<a class="el" href="../../da/db7/class_unit.html">Unit</a> *target, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply)</td></tr>
<tr class="separator:aab9391e1ba5774b3df74dee4f65f707a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a7bd5fd001ae6fb2ac680b1d25ef378"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a2a7bd5fd001ae6fb2ac680b1d25ef378">ApplySpellMod</a> (<a class="el" href="../../da/db7/class_unit.html">Unit</a> *target, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply)</td></tr>
<tr class="separator:a2a7bd5fd001ae6fb2ac680b1d25ef378"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e57c07b017695d76137b0d81074df1e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a1e57c07b017695d76137b0d81074df1e">Update</a> (<a class="el" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> <a class="el" href="../../d9/d39/dtoa_8c.html#a158860430cb5f139d88fdf19cf9ad511">diff</a>, <a class="el" href="../../da/db7/class_unit.html">Unit</a> *caster)</td></tr>
<tr class="separator:a1e57c07b017695d76137b0d81074df1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afebebaa8f9f33d8354d624561c34b461"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#afebebaa8f9f33d8354d624561c34b461">UpdatePeriodic</a> (<a class="el" href="../../da/db7/class_unit.html">Unit</a> *caster)</td></tr>
<tr class="separator:afebebaa8f9f33d8354d624561c34b461"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c28e995bc0e15c692c24154bab9df4d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a0c28e995bc0e15c692c24154bab9df4d">GetTickNumber</a> () <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a0c28e995bc0e15c692c24154bab9df4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67ca18798f448847e77665752fa4a32c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a67ca18798f448847e77665752fa4a32c">GetTotalTicks</a> () <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a67ca18798f448847e77665752fa4a32c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc2bdb287922c879abcbab9e8a6f4fab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#acc2bdb287922c879abcbab9e8a6f4fab">ResetPeriodic</a> (<a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> resetPeriodicTimer=<a class="el" href="../../d9/d5e/stdbool_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>)</td></tr>
<tr class="separator:acc2bdb287922c879abcbab9e8a6f4fab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc2f180bb606c2d4f11ae239d3293dbf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#afc2f180bb606c2d4f11ae239d3293dbf">ResetTicks</a> ()</td></tr>
<tr class="separator:afc2f180bb606c2d4f11ae239d3293dbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d45367044e196745676c63d61fbd89d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a7d45367044e196745676c63d61fbd89d">IsPeriodic</a> () <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a7d45367044e196745676c63d61fbd89d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b39616fd9d0543194c9d6dbec186f55"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a8b39616fd9d0543194c9d6dbec186f55">SetPeriodic</a> (<a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> isPeriodic)</td></tr>
<tr class="separator:a8b39616fd9d0543194c9d6dbec186f55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71cd3938d8e16b4f6363e6978077aa8f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a71cd3938d8e16b4f6363e6978077aa8f">IsAffectedOnSpell</a> (<a class="el" href="../../d4/d7d/class_spell_info.html">SpellInfo</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *spell) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a71cd3938d8e16b4f6363e6978077aa8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac47f45d58ef676d9e242852a80c96b01"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ac47f45d58ef676d9e242852a80c96b01">HasSpellClassMask</a> () <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ac47f45d58ef676d9e242852a80c96b01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94ad6938ac754595a00f0f5a8e2019c5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a94ad6938ac754595a00f0f5a8e2019c5">SendTickImmune</a> (<a class="el" href="../../da/db7/class_unit.html">Unit</a> *target, <a class="el" href="../../da/db7/class_unit.html">Unit</a> *caster) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a94ad6938ac754595a00f0f5a8e2019c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af498cc64849486b0001f558da9c5c9ef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#af498cc64849486b0001f558da9c5c9ef">PeriodicTick</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> *aurApp, <a class="el" href="../../da/db7/class_unit.html">Unit</a> *caster) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:af498cc64849486b0001f558da9c5c9ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2a6d0a6fcbf6f5d53633e0d1ab10dd3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ad2a6d0a6fcbf6f5d53633e0d1ab10dd3">HandleProc</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> *aurApp, <a class="el" href="../../df/def/class_proc_event_info.html">ProcEventInfo</a> &amp;eventInfo)</td></tr>
<tr class="separator:ad2a6d0a6fcbf6f5d53633e0d1ab10dd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac313992b1527bbeddf09365da0d28ebc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ac313992b1527bbeddf09365da0d28ebc">CleanupTriggeredSpells</a> (<a class="el" href="../../da/db7/class_unit.html">Unit</a> *target)</td></tr>
<tr class="separator:ac313992b1527bbeddf09365da0d28ebc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66eb63a01dca27eaa327c72f03710c53"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a66eb63a01dca27eaa327c72f03710c53">HandleShapeshiftBoosts</a> (<a class="el" href="../../da/db7/class_unit.html">Unit</a> *target, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a66eb63a01dca27eaa327c72f03710c53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a374ccc25c81de041d10e1ed2b52a238c"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a374ccc25c81de041d10e1ed2b52a238c">GetCritChance</a> () <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a374ccc25c81de041d10e1ed2b52a238c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5fa45a022f85bfea33ae5faf843cd69"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#aa5fa45a022f85bfea33ae5faf843cd69">SetCritChance</a> (float crit)</td></tr>
<tr class="separator:aa5fa45a022f85bfea33ae5faf843cd69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7595664aebf24652d3ce95d6bdc18ebe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a7595664aebf24652d3ce95d6bdc18ebe">GetCasterLevel</a> () <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a7595664aebf24652d3ce95d6bdc18ebe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1360fcb79edcab37b0a7b362bb6e7b2a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a1360fcb79edcab37b0a7b362bb6e7b2a">CanApplyResilience</a> () <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a1360fcb79edcab37b0a7b362bb6e7b2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81665a31d5e4a49027abd82be607a736"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a81665a31d5e4a49027abd82be607a736">GetPctMods</a> () <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a81665a31d5e4a49027abd82be607a736"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36e4e8b964658519a723d668b7ad0bba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a36e4e8b964658519a723d668b7ad0bba">GetAuraGroup</a> () <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a36e4e8b964658519a723d668b7ad0bba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a306e4d031a37294a17fb999303b71efe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a306e4d031a37294a17fb999303b71efe">GetOldAmount</a> () <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a306e4d031a37294a17fb999303b71efe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04d3cc9ebda15ebf8f10650864d0724a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a04d3cc9ebda15ebf8f10650864d0724a">SetOldAmount</a> (<a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> amount)</td></tr>
<tr class="separator:a04d3cc9ebda15ebf8f10650864d0724a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a063903240b281f490908845ef93ec68a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a063903240b281f490908845ef93ec68a">SetEnabled</a> (<a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> enabled)</td></tr>
<tr class="separator:a063903240b281f490908845ef93ec68a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22c04d564645569dc99f91ffc9196da3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a22c04d564645569dc99f91ffc9196da3">HandleNULL</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a22c04d564645569dc99f91ffc9196da3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49b7f5bcb03bab576c46e4db57e0625d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a49b7f5bcb03bab576c46e4db57e0625d">HandleUnused</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a49b7f5bcb03bab576c46e4db57e0625d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54cde21a5e4a3fb27b8a3b4cde5b2428"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a54cde21a5e4a3fb27b8a3b4cde5b2428">HandleNoImmediateEffect</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a54cde21a5e4a3fb27b8a3b4cde5b2428"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fff389a772b3a1800829b007fd09ad7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a4fff389a772b3a1800829b007fd09ad7">HandleModInvisibilityDetect</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a4fff389a772b3a1800829b007fd09ad7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff76927ae90362081a6ca6c8c77004f6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#aff76927ae90362081a6ca6c8c77004f6">HandleModInvisibility</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:aff76927ae90362081a6ca6c8c77004f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae72fd00fd9b6b1f1d19e8f5e3d62c6ee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ae72fd00fd9b6b1f1d19e8f5e3d62c6ee">HandleModStealth</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ae72fd00fd9b6b1f1d19e8f5e3d62c6ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e7dc7c97738c4404913cab0cae09027"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a9e7dc7c97738c4404913cab0cae09027">HandleModStealthLevel</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a9e7dc7c97738c4404913cab0cae09027"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa95ea36217eb2e120bb22fa8fe9c82e2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#aa95ea36217eb2e120bb22fa8fe9c82e2">HandleModStealthDetect</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:aa95ea36217eb2e120bb22fa8fe9c82e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34bf10f56f62833415339768d825a83f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a34bf10f56f62833415339768d825a83f">HandleDetectAmore</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a34bf10f56f62833415339768d825a83f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40c4c923ea3038d2285ab82992e87dc8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a40c4c923ea3038d2285ab82992e87dc8">HandleSpiritOfRedemption</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a40c4c923ea3038d2285ab82992e87dc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81f9974032b40d56489fabe89641f81d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a81f9974032b40d56489fabe89641f81d">HandleAuraGhost</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a81f9974032b40d56489fabe89641f81d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4ae88f1abefd9f50e42dce8e928b1c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ae4ae88f1abefd9f50e42dce8e928b1c9">HandlePhase</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ae4ae88f1abefd9f50e42dce8e928b1c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05a18e948bfca43240aa65cb7872c909"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a05a18e948bfca43240aa65cb7872c909">HandleAuraModShapeshift</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a05a18e948bfca43240aa65cb7872c909"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aeb4f5c3a5130afb5df2d83667b1877"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a8aeb4f5c3a5130afb5df2d83667b1877">HandleAuraTransform</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a8aeb4f5c3a5130afb5df2d83667b1877"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad290467c397f70ff3ca4c24961a05fb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#aad290467c397f70ff3ca4c24961a05fb">HandleAuraModScale</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:aad290467c397f70ff3ca4c24961a05fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d873a20f6269d508fee14b54f8190cb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a1d873a20f6269d508fee14b54f8190cb">HandleAuraCloneCaster</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a1d873a20f6269d508fee14b54f8190cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4c3dba7effbc5735869a7a49ca39005"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ab4c3dba7effbc5735869a7a49ca39005">HandleFeignDeath</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ab4c3dba7effbc5735869a7a49ca39005"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a909a2bcd0d8036c938a7a5583b4ff432"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a909a2bcd0d8036c938a7a5583b4ff432">HandleModUnattackable</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a909a2bcd0d8036c938a7a5583b4ff432"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c25ece7266e707b626dbad6de6be66e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a8c25ece7266e707b626dbad6de6be66e">HandleAuraModDisarm</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a8c25ece7266e707b626dbad6de6be66e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca9f7031c1091b23080c4c8d827fa0e3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#aca9f7031c1091b23080c4c8d827fa0e3">HandleAuraModSilence</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:aca9f7031c1091b23080c4c8d827fa0e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af48521ad2be2b43241c6bc8ca6274bd6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#af48521ad2be2b43241c6bc8ca6274bd6">HandleAuraModPacify</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:af48521ad2be2b43241c6bc8ca6274bd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3645d469d5dfd1240fb9f9af3a83920"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ae3645d469d5dfd1240fb9f9af3a83920">HandleAuraModPacifyAndSilence</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ae3645d469d5dfd1240fb9f9af3a83920"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8229a29c8125b2558b1a875ae3deace8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a8229a29c8125b2558b1a875ae3deace8">HandleAuraAllowOnlyAbility</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a8229a29c8125b2558b1a875ae3deace8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1432141df83fc575b03313f9def132ad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a1432141df83fc575b03313f9def132ad">HandleAuraTrackResources</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a1432141df83fc575b03313f9def132ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5eeb3fd5b51cc797c21c374150a7f41"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#af5eeb3fd5b51cc797c21c374150a7f41">HandleAuraTrackCreatures</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:af5eeb3fd5b51cc797c21c374150a7f41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a901e04d2d5c6418bbfeb5e7820fdba30"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a901e04d2d5c6418bbfeb5e7820fdba30">HandleAuraTrackStealthed</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a901e04d2d5c6418bbfeb5e7820fdba30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3f2b2299c080928ff7211a98a6237b5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ab3f2b2299c080928ff7211a98a6237b5">HandleAuraModStalked</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ab3f2b2299c080928ff7211a98a6237b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add3e6484132f5de2d6bfe76c0f2b21ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#add3e6484132f5de2d6bfe76c0f2b21ae">HandleAuraUntrackable</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:add3e6484132f5de2d6bfe76c0f2b21ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e9174d203a34abc924e9a58efb2473c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a3e9174d203a34abc924e9a58efb2473c">HandleAuraModPetTalentsPoints</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a3e9174d203a34abc924e9a58efb2473c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a0bdae4c5cae40a812b7cf5b00f4233"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a6a0bdae4c5cae40a812b7cf5b00f4233">HandleAuraModSkill</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a6a0bdae4c5cae40a812b7cf5b00f4233"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e6d66aa4247cf56b528a1fe2c2eae37"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a5e6d66aa4247cf56b528a1fe2c2eae37">HandleAuraMounted</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a5e6d66aa4247cf56b528a1fe2c2eae37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a696f3f2b219427697a36c4d3dd7990a5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a696f3f2b219427697a36c4d3dd7990a5">HandleAuraAllowFlight</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a696f3f2b219427697a36c4d3dd7990a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5a0845c419937a8d5450876dff3224c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#af5a0845c419937a8d5450876dff3224c">HandleAuraWaterWalk</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:af5a0845c419937a8d5450876dff3224c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fee7fad1f1f304000184269e5b94c5c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a1fee7fad1f1f304000184269e5b94c5c">HandleAuraFeatherFall</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a1fee7fad1f1f304000184269e5b94c5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7c56dc7da49ce169af1d32d111b2a57"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ae7c56dc7da49ce169af1d32d111b2a57">HandleAuraHover</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ae7c56dc7da49ce169af1d32d111b2a57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0e6dfd8b1d19f6f3ab0d60f65e4427a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ae0e6dfd8b1d19f6f3ab0d60f65e4427a">HandleWaterBreathing</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ae0e6dfd8b1d19f6f3ab0d60f65e4427a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9645e47c14c56ae888807b9027e9c34"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ad9645e47c14c56ae888807b9027e9c34">HandleForceMoveForward</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ad9645e47c14c56ae888807b9027e9c34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17a750190862b4a8b0ab247e66af3acf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a17a750190862b4a8b0ab247e66af3acf">HandleModThreat</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a17a750190862b4a8b0ab247e66af3acf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56f6eebde660cfadaeaccaf8ebc4b6b9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a56f6eebde660cfadaeaccaf8ebc4b6b9">HandleAuraModTotalThreat</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a56f6eebde660cfadaeaccaf8ebc4b6b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4230057d8bb2cc490b5868109790b811"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a4230057d8bb2cc490b5868109790b811">HandleModTaunt</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a4230057d8bb2cc490b5868109790b811"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5aba9aa102d0402b423ce57a616bb0c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#aa5aba9aa102d0402b423ce57a616bb0c">HandleModConfuse</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:aa5aba9aa102d0402b423ce57a616bb0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26498e695742b5689c35f806af38ae8a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a26498e695742b5689c35f806af38ae8a">HandleModFear</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a26498e695742b5689c35f806af38ae8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09506ef85197dd61fba8127fa65d8925"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a09506ef85197dd61fba8127fa65d8925">HandleAuraModStun</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a09506ef85197dd61fba8127fa65d8925"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab21864f1999f7797e2287c722c6f0f83"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ab21864f1999f7797e2287c722c6f0f83">HandleAuraModRoot</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ab21864f1999f7797e2287c722c6f0f83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03f0b850af3051c8815fba75d502c658"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a03f0b850af3051c8815fba75d502c658">HandlePreventFleeing</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a03f0b850af3051c8815fba75d502c658"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affc17fba71418fb11e2cffbb0b1710b6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#affc17fba71418fb11e2cffbb0b1710b6">HandleModPossess</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:affc17fba71418fb11e2cffbb0b1710b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ae2a8ce1a85f6a846a39a08566c7567"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a3ae2a8ce1a85f6a846a39a08566c7567">HandleModPossessPet</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a3ae2a8ce1a85f6a846a39a08566c7567"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3da622f21fc4e175e6948db55b60511"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ac3da622f21fc4e175e6948db55b60511">HandleModCharm</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ac3da622f21fc4e175e6948db55b60511"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9939adabdadcf853bbabb848afb5e8b4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a9939adabdadcf853bbabb848afb5e8b4">HandleCharmConvert</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a9939adabdadcf853bbabb848afb5e8b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65d82e7ba5aecd7018f082a7580fc491"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a65d82e7ba5aecd7018f082a7580fc491">HandleAuraControlVehicle</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a65d82e7ba5aecd7018f082a7580fc491"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaea11ca24fdbdb92e653f59bfd181ff0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#aaea11ca24fdbdb92e653f59bfd181ff0">HandleAuraModIncreaseSpeed</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:aaea11ca24fdbdb92e653f59bfd181ff0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4390a014a9aa70f4d90303c335a61b7c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a4390a014a9aa70f4d90303c335a61b7c">HandleAuraModIncreaseMountedSpeed</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a4390a014a9aa70f4d90303c335a61b7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af27fe9a06b1ec4e7feb0249926d69dba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#af27fe9a06b1ec4e7feb0249926d69dba">HandleAuraModIncreaseFlightSpeed</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:af27fe9a06b1ec4e7feb0249926d69dba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b5fb8fd52b54a9fc55491d48a62df4f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a9b5fb8fd52b54a9fc55491d48a62df4f">HandleAuraModIncreaseSwimSpeed</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a9b5fb8fd52b54a9fc55491d48a62df4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00cc9725cd708174a15de260fef84bda"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a00cc9725cd708174a15de260fef84bda">HandleAuraModDecreaseSpeed</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a00cc9725cd708174a15de260fef84bda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1672988a44e4d7f5d73c561892a9c72"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ae1672988a44e4d7f5d73c561892a9c72">HandleAuraModUseNormalSpeed</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ae1672988a44e4d7f5d73c561892a9c72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e98eced29d22a033eda88c17bc75ac5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a7e98eced29d22a033eda88c17bc75ac5">HandleModStateImmunityMask</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a7e98eced29d22a033eda88c17bc75ac5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5aa79360f973fbe4026586ef2eeda03"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ae5aa79360f973fbe4026586ef2eeda03">HandleModMechanicImmunity</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ae5aa79360f973fbe4026586ef2eeda03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a179b35bc601d9b36bc8be2961c0af054"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a179b35bc601d9b36bc8be2961c0af054">HandleAuraModEffectImmunity</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a179b35bc601d9b36bc8be2961c0af054"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8896bc940fa9cfe2a0cdea0cc27465bc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a8896bc940fa9cfe2a0cdea0cc27465bc">HandleAuraModStateImmunity</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a8896bc940fa9cfe2a0cdea0cc27465bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45ef0e9663bb6e5c2fe8d1d90ac670a1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a45ef0e9663bb6e5c2fe8d1d90ac670a1">HandleAuraModSchoolImmunity</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a45ef0e9663bb6e5c2fe8d1d90ac670a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dd65a07ecb6f2cfdecbed6a15c8ef08"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a3dd65a07ecb6f2cfdecbed6a15c8ef08">HandleAuraModDmgImmunity</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a3dd65a07ecb6f2cfdecbed6a15c8ef08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c107b074aa0e5e8cfe63d6c73c14803"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a0c107b074aa0e5e8cfe63d6c73c14803">HandleAuraModDispelImmunity</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a0c107b074aa0e5e8cfe63d6c73c14803"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3412eb30c1a4bd66b8cca040fc9ef6d1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a3412eb30c1a4bd66b8cca040fc9ef6d1">HandleAuraModResistanceExclusive</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a3412eb30c1a4bd66b8cca040fc9ef6d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf85e6ba3ad0ec021f53683452002782"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#adf85e6ba3ad0ec021f53683452002782">HandleAuraModResistance</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:adf85e6ba3ad0ec021f53683452002782"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acedcf3811fd678ac5192d68fd34aa176"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#acedcf3811fd678ac5192d68fd34aa176">HandleAuraModBaseResistancePCT</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:acedcf3811fd678ac5192d68fd34aa176"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2accb6290e6f7ee84c9588d641898d4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ae2accb6290e6f7ee84c9588d641898d4">HandleModResistancePercent</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ae2accb6290e6f7ee84c9588d641898d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6663b6902d2e2a6a46bf3e14a35871d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a6663b6902d2e2a6a46bf3e14a35871d8">HandleModBaseResistance</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a6663b6902d2e2a6a46bf3e14a35871d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f294bf8036e7a0c71b83950da2b3eff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a9f294bf8036e7a0c71b83950da2b3eff">HandleModTargetResistance</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a9f294bf8036e7a0c71b83950da2b3eff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7e8903a35da1f0660f5ccf53eb1e182"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ad7e8903a35da1f0660f5ccf53eb1e182">HandleAuraModStat</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ad7e8903a35da1f0660f5ccf53eb1e182"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a844dcfe2b6e78cc40b8b9996672b4f07"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a844dcfe2b6e78cc40b8b9996672b4f07">HandleModPercentStat</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a844dcfe2b6e78cc40b8b9996672b4f07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfe708f78779cd14750387b72c516b33"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#abfe708f78779cd14750387b72c516b33">HandleModSpellDamagePercentFromStat</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:abfe708f78779cd14750387b72c516b33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0ade8db29e053f3dd175102766ec745"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ad0ade8db29e053f3dd175102766ec745">HandleModSpellHealingPercentFromStat</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ad0ade8db29e053f3dd175102766ec745"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad281398afbdfcf17b271deccfda26b01"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ad281398afbdfcf17b271deccfda26b01">HandleModSpellDamagePercentFromAttackPower</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ad281398afbdfcf17b271deccfda26b01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada88a03111d74054c088f900f619adf1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ada88a03111d74054c088f900f619adf1">HandleModSpellHealingPercentFromAttackPower</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ada88a03111d74054c088f900f619adf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09dda5a0af27ab34292b312fd20203bb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a09dda5a0af27ab34292b312fd20203bb">HandleModHealingDone</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a09dda5a0af27ab34292b312fd20203bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6f7dcbeef11bbb6af9fd5d2fb52af3c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#aa6f7dcbeef11bbb6af9fd5d2fb52af3c">HandleModTotalPercentStat</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:aa6f7dcbeef11bbb6af9fd5d2fb52af3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a501803cfbe4e5b568eb98e32b2c26186"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a501803cfbe4e5b568eb98e32b2c26186">HandleAuraModResistenceOfStatPercent</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a501803cfbe4e5b568eb98e32b2c26186"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88fe5e60d633f96c842170fcaed8c7cf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a88fe5e60d633f96c842170fcaed8c7cf">HandleAuraModExpertise</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a88fe5e60d633f96c842170fcaed8c7cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f39fbf45d91d07a1835fb9b9e43f710"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a4f39fbf45d91d07a1835fb9b9e43f710">HandleModPowerRegen</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a4f39fbf45d91d07a1835fb9b9e43f710"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af38cb2bbca5005a77d57930e8a9fbb21"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#af38cb2bbca5005a77d57930e8a9fbb21">HandleModPowerRegenPCT</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:af38cb2bbca5005a77d57930e8a9fbb21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accc046bd1b9adb7c8b60be792f70e814"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#accc046bd1b9adb7c8b60be792f70e814">HandleModManaRegen</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:accc046bd1b9adb7c8b60be792f70e814"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43b0158e5c699baf571fa2a064bf70c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a43b0158e5c699baf571fa2a064bf70c9">HandleAuraModIncreaseHealth</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a43b0158e5c699baf571fa2a064bf70c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bea1efab99a42212d85ea5c39921950"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a9bea1efab99a42212d85ea5c39921950">HandleAuraModIncreaseMaxHealth</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a9bea1efab99a42212d85ea5c39921950"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab17ae5878087d1047e5163db7e95564b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ab17ae5878087d1047e5163db7e95564b">HandleAuraModIncreaseEnergy</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ab17ae5878087d1047e5163db7e95564b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbc68f3158a932f36315f4348dba5914"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#afbc68f3158a932f36315f4348dba5914">HandleAuraModIncreaseEnergyPercent</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:afbc68f3158a932f36315f4348dba5914"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3286f89b5415bd21a4831285dab7362f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a3286f89b5415bd21a4831285dab7362f">HandleAuraModIncreaseHealthPercent</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a3286f89b5415bd21a4831285dab7362f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58e57c5d8044c555227fffca09a1c1c5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a58e57c5d8044c555227fffca09a1c1c5">HandleAuraIncreaseBaseHealthPercent</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a58e57c5d8044c555227fffca09a1c1c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd6a595444acecc12c84820cc3f86865"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#abd6a595444acecc12c84820cc3f86865">HandleAuraModParryPercent</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:abd6a595444acecc12c84820cc3f86865"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b46362827d3489a5f34a9d34efa489f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a3b46362827d3489a5f34a9d34efa489f">HandleAuraModDodgePercent</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a3b46362827d3489a5f34a9d34efa489f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a037803186b7a5a458d1b7d451fc57d2b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a037803186b7a5a458d1b7d451fc57d2b">HandleAuraModBlockPercent</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a037803186b7a5a458d1b7d451fc57d2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbf214d5d4e3a9926d7809234f979ca4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#adbf214d5d4e3a9926d7809234f979ca4">HandleAuraModRegenInterrupt</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:adbf214d5d4e3a9926d7809234f979ca4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a564bd992035746f2702e9cb284d789a6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a564bd992035746f2702e9cb284d789a6">HandleAuraModWeaponCritPercent</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a564bd992035746f2702e9cb284d789a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa9f84f40fa41ddee3d6fb22c8bd3ac4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#afa9f84f40fa41ddee3d6fb22c8bd3ac4">HandleModHitChance</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:afa9f84f40fa41ddee3d6fb22c8bd3ac4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad16e337a78c3bd2df90a006745bb0ccb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ad16e337a78c3bd2df90a006745bb0ccb">HandleModSpellHitChance</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ad16e337a78c3bd2df90a006745bb0ccb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa978582e776583063a2a82af4c658c35"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#aa978582e776583063a2a82af4c658c35">HandleModSpellCritChance</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:aa978582e776583063a2a82af4c658c35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92d0072fcf334ace5a8a29d5a58616e0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a92d0072fcf334ace5a8a29d5a58616e0">HandleModSpellCritChanceShool</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a92d0072fcf334ace5a8a29d5a58616e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7d61f76c6791e1a34f20b87efb425bc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#af7d61f76c6791e1a34f20b87efb425bc">HandleAuraModCritPct</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:af7d61f76c6791e1a34f20b87efb425bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bc0fe3e6f5ce7ec0c62d3f2e25ebfb9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a9bc0fe3e6f5ce7ec0c62d3f2e25ebfb9">HandleModCastingSpeed</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a9bc0fe3e6f5ce7ec0c62d3f2e25ebfb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90f9b0656c55d016c70c02936dd73c9b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a90f9b0656c55d016c70c02936dd73c9b">HandleModMeleeRangedSpeedPct</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a90f9b0656c55d016c70c02936dd73c9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2578a0c8a91021e22ae67f2c0ff35331"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a2578a0c8a91021e22ae67f2c0ff35331">HandleModCombatSpeedPct</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a2578a0c8a91021e22ae67f2c0ff35331"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af470ebc0cd402437abab85c0203d0396"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#af470ebc0cd402437abab85c0203d0396">HandleModAttackSpeed</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:af470ebc0cd402437abab85c0203d0396"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45f86518a11aae0590304353a73b8d40"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a45f86518a11aae0590304353a73b8d40">HandleModMeleeSpeedPct</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a45f86518a11aae0590304353a73b8d40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63f78f6483abbd00e0f55ef8ea938bbe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a63f78f6483abbd00e0f55ef8ea938bbe">HandleAuraModRangedHaste</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a63f78f6483abbd00e0f55ef8ea938bbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a964b95da784412c60c9310227a614549"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a964b95da784412c60c9310227a614549">HandleRangedAmmoHaste</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a964b95da784412c60c9310227a614549"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5818f07310f7386ca2e2ce8a5fbb594b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a5818f07310f7386ca2e2ce8a5fbb594b">HandleModRating</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a5818f07310f7386ca2e2ce8a5fbb594b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b0a7eb3419f1ef986ae136c9248e173"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a0b0a7eb3419f1ef986ae136c9248e173">HandleModRatingFromStat</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a0b0a7eb3419f1ef986ae136c9248e173"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac585c3cd6f893f888463d8de7fbc4b2f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ac585c3cd6f893f888463d8de7fbc4b2f">HandleAuraModAttackPower</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ac585c3cd6f893f888463d8de7fbc4b2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3911ef5ef63aafac04aaae3a389fb3c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a3911ef5ef63aafac04aaae3a389fb3c9">HandleAuraModRangedAttackPower</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a3911ef5ef63aafac04aaae3a389fb3c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40615fe10569d7caed175b71339ae1cf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a40615fe10569d7caed175b71339ae1cf">HandleAuraModAttackPowerPercent</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a40615fe10569d7caed175b71339ae1cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a280de8cb7a520bb9b216b9735a2dca32"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a280de8cb7a520bb9b216b9735a2dca32">HandleAuraModRangedAttackPowerPercent</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a280de8cb7a520bb9b216b9735a2dca32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a3ec4c7f1ca6b978189280b4f2424a7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a1a3ec4c7f1ca6b978189280b4f2424a7">HandleAuraModRangedAttackPowerOfStatPercent</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a1a3ec4c7f1ca6b978189280b4f2424a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2a3d61e37b7ed3cee1fd37d41d6ba59"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ad2a3d61e37b7ed3cee1fd37d41d6ba59">HandleAuraModAttackPowerOfStatPercent</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ad2a3d61e37b7ed3cee1fd37d41d6ba59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab17b1ef9a6932ad13b43b0ed377e044"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#aab17b1ef9a6932ad13b43b0ed377e044">HandleAuraModAttackPowerOfArmor</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:aab17b1ef9a6932ad13b43b0ed377e044"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ee0e71dbbb4e685b4e8db327e3b639b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a3ee0e71dbbb4e685b4e8db327e3b639b">HandleModDamageDone</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a3ee0e71dbbb4e685b4e8db327e3b639b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1681732afa7c5a767eb0ba2264f4958c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a1681732afa7c5a767eb0ba2264f4958c">HandleModDamagePercentDone</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a1681732afa7c5a767eb0ba2264f4958c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d79983093faf3f9c63c9f1cc65b0155"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a8d79983093faf3f9c63c9f1cc65b0155">HandleModOffhandDamagePercent</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a8d79983093faf3f9c63c9f1cc65b0155"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3cf8ea3adbe4a9b6756c1759d515528"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ac3cf8ea3adbe4a9b6756c1759d515528">HandleShieldBlockValue</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ac3cf8ea3adbe4a9b6756c1759d515528"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a030d85dec5fb20b11ef19206f6694c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a1a030d85dec5fb20b11ef19206f6694c">HandleModPowerCostPCT</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a1a030d85dec5fb20b11ef19206f6694c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69e8e0ce986f2ada7ccaf38bef2ecf97"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a69e8e0ce986f2ada7ccaf38bef2ecf97">HandleModPowerCost</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a69e8e0ce986f2ada7ccaf38bef2ecf97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45af9668ac3271c2f5a924872d0f1614"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a45af9668ac3271c2f5a924872d0f1614">HandleArenaPreparation</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a45af9668ac3271c2f5a924872d0f1614"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9558df628dc0b414dae883571ead3ee9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a9558df628dc0b414dae883571ead3ee9">HandleNoReagentUseAura</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a9558df628dc0b414dae883571ead3ee9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ae0e56cbc82f9dde5927d069fad34e2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a0ae0e56cbc82f9dde5927d069fad34e2">HandleAuraRetainComboPoints</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a0ae0e56cbc82f9dde5927d069fad34e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab48ade74cc824d2ae0e326948c867ece"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ab48ade74cc824d2ae0e326948c867ece">HandleAuraDummy</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ab48ade74cc824d2ae0e326948c867ece"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab144ae6a14c8fd95ff6b868b64cd7c12"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ab144ae6a14c8fd95ff6b868b64cd7c12">HandleChannelDeathItem</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ab144ae6a14c8fd95ff6b868b64cd7c12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeeed00e5103faf76fec0eb8f88b8d071"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#aeeed00e5103faf76fec0eb8f88b8d071">HandleBindSight</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:aeeed00e5103faf76fec0eb8f88b8d071"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a537d6b3b15ea0530f088c4ba8e1f4c57"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a537d6b3b15ea0530f088c4ba8e1f4c57">HandleFarSight</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a537d6b3b15ea0530f088c4ba8e1f4c57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b1c8a621c824d3d9e5021c9503193f6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a3b1c8a621c824d3d9e5021c9503193f6">HandleForceReaction</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a3b1c8a621c824d3d9e5021c9503193f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cfa8fba22df7460cb11c768e8e6e3ba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a1cfa8fba22df7460cb11c768e8e6e3ba">HandleAuraEmpathy</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a1cfa8fba22df7460cb11c768e8e6e3ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26906e499e64074d01966137f9608093"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a26906e499e64074d01966137f9608093">HandleAuraModFaction</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a26906e499e64074d01966137f9608093"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95b987b958ac0ce5653d44029a31ea59"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a95b987b958ac0ce5653d44029a31ea59">HandleComprehendLanguage</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a95b987b958ac0ce5653d44029a31ea59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf478059af657f8126f4979f94b60159"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#aaf478059af657f8126f4979f94b60159">HandleAuraConvertRune</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:aaf478059af657f8126f4979f94b60159"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af91c6e2c16b5038cadfed381022dad10"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#af91c6e2c16b5038cadfed381022dad10">HandleAuraLinked</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:af91c6e2c16b5038cadfed381022dad10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5ad5d0e3406e96a0f5e5f58d2c133ce"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ae5ad5d0e3406e96a0f5e5f58d2c133ce">HandleAuraOpenStable</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:ae5ad5d0e3406e96a0f5e5f58d2c133ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a83116c26a189ee818608f1c1be2a9d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a6a83116c26a189ee818608f1c1be2a9d">HandleAuraModFakeInebriation</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a6a83116c26a189ee818608f1c1be2a9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af572ebb2a04d65ef7f1544640b5b51ab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#af572ebb2a04d65ef7f1544640b5b51ab">HandleAuraOverrideSpells</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:af572ebb2a04d65ef7f1544640b5b51ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d687bfbacc779c97d18c866a5544bfe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a2d687bfbacc779c97d18c866a5544bfe">HandleAuraSetVehicle</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a2d687bfbacc779c97d18c866a5544bfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a683b73bc2152dcc1cf895731abccdd11"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a683b73bc2152dcc1cf895731abccdd11">HandlePreventResurrection</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *aurApp, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mode, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> apply) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a683b73bc2152dcc1cf895731abccdd11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61bdb07de2581972c79e3c3e46ecdbbe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a61bdb07de2581972c79e3c3e46ecdbbe">HandlePeriodicDummyAuraTick</a> (<a class="el" href="../../da/db7/class_unit.html">Unit</a> *target, <a class="el" href="../../da/db7/class_unit.html">Unit</a> *caster) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a61bdb07de2581972c79e3c3e46ecdbbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a545377a3f6c71f42c3897206a2dc0919"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a545377a3f6c71f42c3897206a2dc0919">HandlePeriodicTriggerSpellAuraTick</a> (<a class="el" href="../../da/db7/class_unit.html">Unit</a> *target, <a class="el" href="../../da/db7/class_unit.html">Unit</a> *caster) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a545377a3f6c71f42c3897206a2dc0919"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af605dc2f9174968cb77b9d3cc50a1fb4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#af605dc2f9174968cb77b9d3cc50a1fb4">HandlePeriodicTriggerSpellWithValueAuraTick</a> (<a class="el" href="../../da/db7/class_unit.html">Unit</a> *target, <a class="el" href="../../da/db7/class_unit.html">Unit</a> *caster) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:af605dc2f9174968cb77b9d3cc50a1fb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f993bd36f255362d3801c708509a868"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a8f993bd36f255362d3801c708509a868">HandlePeriodicDamageAurasTick</a> (<a class="el" href="../../da/db7/class_unit.html">Unit</a> *target, <a class="el" href="../../da/db7/class_unit.html">Unit</a> *caster) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a8f993bd36f255362d3801c708509a868"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a757600361597c84413041214cd39dc22"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a757600361597c84413041214cd39dc22">HandlePeriodicHealthLeechAuraTick</a> (<a class="el" href="../../da/db7/class_unit.html">Unit</a> *target, <a class="el" href="../../da/db7/class_unit.html">Unit</a> *caster) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a757600361597c84413041214cd39dc22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35cc3b13cde9e1cfbdfee49d6bdcee57"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a35cc3b13cde9e1cfbdfee49d6bdcee57">HandlePeriodicHealthFunnelAuraTick</a> (<a class="el" href="../../da/db7/class_unit.html">Unit</a> *target, <a class="el" href="../../da/db7/class_unit.html">Unit</a> *caster) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a35cc3b13cde9e1cfbdfee49d6bdcee57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c497a3c954b0bade630ac996c440fa3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a3c497a3c954b0bade630ac996c440fa3">HandlePeriodicHealAurasTick</a> (<a class="el" href="../../da/db7/class_unit.html">Unit</a> *target, <a class="el" href="../../da/db7/class_unit.html">Unit</a> *caster) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a3c497a3c954b0bade630ac996c440fa3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20e3450e5f8299f76561cbe747d12c88"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a20e3450e5f8299f76561cbe747d12c88">HandlePeriodicManaLeechAuraTick</a> (<a class="el" href="../../da/db7/class_unit.html">Unit</a> *target, <a class="el" href="../../da/db7/class_unit.html">Unit</a> *caster) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a20e3450e5f8299f76561cbe747d12c88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d4f436ab67e728f66577e043143f32d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a2d4f436ab67e728f66577e043143f32d">HandleObsModPowerAuraTick</a> (<a class="el" href="../../da/db7/class_unit.html">Unit</a> *target, <a class="el" href="../../da/db7/class_unit.html">Unit</a> *caster) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a2d4f436ab67e728f66577e043143f32d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cee5e983225342908700110067f258a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a4cee5e983225342908700110067f258a">HandlePeriodicEnergizeAuraTick</a> (<a class="el" href="../../da/db7/class_unit.html">Unit</a> *target, <a class="el" href="../../da/db7/class_unit.html">Unit</a> *caster) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a4cee5e983225342908700110067f258a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e5699c43a4f49c32daa9c1b6df068ce"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a0e5699c43a4f49c32daa9c1b6df068ce">HandlePeriodicPowerBurnAuraTick</a> (<a class="el" href="../../da/db7/class_unit.html">Unit</a> *target, <a class="el" href="../../da/db7/class_unit.html">Unit</a> *caster) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a0e5699c43a4f49c32daa9c1b6df068ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9b15db701d1d804b52a425b23c1e154"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#af9b15db701d1d804b52a425b23c1e154">HandleProcTriggerSpellAuraProc</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> *aurApp, <a class="el" href="../../df/def/class_proc_event_info.html">ProcEventInfo</a> &amp;eventInfo)</td></tr>
<tr class="separator:af9b15db701d1d804b52a425b23c1e154"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8457bab110c3818d1506a3b5d767a411"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a8457bab110c3818d1506a3b5d767a411">HandleProcTriggerSpellWithValueAuraProc</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> *aurApp, <a class="el" href="../../df/def/class_proc_event_info.html">ProcEventInfo</a> &amp;eventInfo)</td></tr>
<tr class="separator:a8457bab110c3818d1506a3b5d767a411"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf1a9e6c5d480b4a72634fd4d489c81f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#abf1a9e6c5d480b4a72634fd4d489c81f">HandleProcTriggerDamageAuraProc</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> *aurApp, <a class="el" href="../../df/def/class_proc_event_info.html">ProcEventInfo</a> &amp;eventInfo)</td></tr>
<tr class="separator:abf1a9e6c5d480b4a72634fd4d489c81f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71194f9e306aa0a2f477d59f9f0a3b97"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a71194f9e306aa0a2f477d59f9f0a3b97">HandleRaidProcFromChargeAuraProc</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> *aurApp, <a class="el" href="../../df/def/class_proc_event_info.html">ProcEventInfo</a> &amp;eventInfo)</td></tr>
<tr class="separator:a71194f9e306aa0a2f477d59f9f0a3b97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac49e3ca52e3aece117127e6712d2069f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ac49e3ca52e3aece117127e6712d2069f">HandleRaidProcFromChargeWithValueAuraProc</a> (<a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> *aurApp, <a class="el" href="../../df/def/class_proc_event_info.html">ProcEventInfo</a> &amp;eventInfo)</td></tr>
<tr class="separator:ac49e3ca52e3aece117127e6712d2069f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:aea6f4b8bd401df6979e6df65f3fd841e"><td class="memItemLeft" align="right" valign="top">friend&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#aea6f4b8bd401df6979e6df65f3fd841e">Aura::~Aura</a> ()</td></tr>
<tr class="separator:aea6f4b8bd401df6979e6df65f3fd841e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2a24adc63d2e5dfd848f22ddd490525"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ad2a24adc63d2e5dfd848f22ddd490525">~AuraEffect</a> ()</td></tr>
<tr class="separator:ad2a24adc63d2e5dfd848f22ddd490525"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7778b120e414f28e95e71ce96660149e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a7778b120e414f28e95e71ce96660149e">AuraEffect</a> (<a class="el" href="../../d2/dde/class_aura.html">Aura</a> *base, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> effIndex, <a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> *baseAmount, <a class="el" href="../../da/db7/class_unit.html">Unit</a> *caster)</td></tr>
<tr class="separator:a7778b120e414f28e95e71ce96660149e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43dd810a38d13af5ffee45dc4f7d5aac"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a43dd810a38d13af5ffee45dc4f7d5aac">CalcPeriodicCritChance</a> (<a class="el" href="../../da/db7/class_unit.html">Unit</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *caster, <a class="el" href="../../da/db7/class_unit.html">Unit</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *target) <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a43dd810a38d13af5ffee45dc4f7d5aac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aff934af743b5031d558ffc9a4b55d6de"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/dde/class_aura.html">Aura</a> *<a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#aff934af743b5031d558ffc9a4b55d6de">m_base</a></td></tr>
<tr class="separator:aff934af743b5031d558ffc9a4b55d6de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4df84854746b8de74f64e2abfec76c1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d7d/class_spell_info.html">SpellInfo</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a>  *<a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a></td></tr>
<tr class="separator:ac4df84854746b8de74f64e2abfec76c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba194c9071a1b0551768b397abc9ebeb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#aba194c9071a1b0551768b397abc9ebeb">m_baseAmount</a></td></tr>
<tr class="separator:aba194c9071a1b0551768b397abc9ebeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4745b52e662a6dd92ec3b566ef7ca297"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a4745b52e662a6dd92ec3b566ef7ca297">m_applyResilience</a></td></tr>
<tr class="separator:a4745b52e662a6dd92ec3b566ef7ca297"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f9c2c6496be1ffad249825f86074def"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a3f9c2c6496be1ffad249825f86074def">m_casterLevel</a></td></tr>
<tr class="separator:a3f9c2c6496be1ffad249825f86074def"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f01908f09b465b6770f18c13e459f17"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a></td></tr>
<tr class="separator:a7f01908f09b465b6770f18c13e459f17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7eff5d08a22189f99f66695367ae250"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#af7eff5d08a22189f99f66695367ae250">m_critChance</a></td></tr>
<tr class="separator:af7eff5d08a22189f99f66695367ae250"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e00da47192a4d1c9139b037d07d565b"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a8e00da47192a4d1c9139b037d07d565b">m_pctMods</a></td></tr>
<tr class="separator:a8e00da47192a4d1c9139b037d07d565b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada78fc2515cb55583bf83667e475c7fe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ada78fc2515cb55583bf83667e475c7fe">m_auraGroup</a></td></tr>
<tr class="separator:ada78fc2515cb55583bf83667e475c7fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fa9f61c77274c75e6f3d8222142ab4e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a5fa9f61c77274c75e6f3d8222142ab4e">m_oldAmount</a></td></tr>
<tr class="separator:a5fa9f61c77274c75e6f3d8222142ab4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acec00491f0ec7f7c68d6a25d85b5b53f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#acec00491f0ec7f7c68d6a25d85b5b53f">m_isAuraEnabled</a></td></tr>
<tr class="separator:acec00491f0ec7f7c68d6a25d85b5b53f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a256fe55e1c441e5dcc7c33abb4222e69"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/dc5/struct_channel_target_data.html">ChannelTargetData</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a256fe55e1c441e5dcc7c33abb4222e69">m_channelData</a></td></tr>
<tr class="separator:a256fe55e1c441e5dcc7c33abb4222e69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25ce25c5ff12969bd62d0547c48b5753"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d39/struct_spell_modifier.html">SpellModifier</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a></td></tr>
<tr class="separator:a25ce25c5ff12969bd62d0547c48b5753"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d9b475cbf04d8597953802e1accc938"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a2d9b475cbf04d8597953802e1accc938">m_periodicTimer</a></td></tr>
<tr class="separator:a2d9b475cbf04d8597953802e1accc938"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b7657d41ca8a463e12dca94fffdddbc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a></td></tr>
<tr class="separator:a9b7657d41ca8a463e12dca94fffdddbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8c7fb50eac3482a162cbbacd64f1625"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ab8c7fb50eac3482a162cbbacd64f1625">m_tickNumber</a></td></tr>
<tr class="separator:ab8c7fb50eac3482a162cbbacd64f1625"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a355d61580194626ea54b22ff9a3ac96a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a></td></tr>
<tr class="separator:a355d61580194626ea54b22ff9a3ac96a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a334378fa304471045fd273f4d845c8dd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a334378fa304471045fd273f4d845c8dd">m_canBeRecalculated</a></td></tr>
<tr class="separator:a334378fa304471045fd273f4d845c8dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6931b2764b92bc6c2a20b092c011f0a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#ad6931b2764b92bc6c2a20b092c011f0a">m_isPeriodic</a></td></tr>
<tr class="separator:ad6931b2764b92bc6c2a20b092c011f0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a80ab74fb057cffbba01f0b5bd038ccf2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a80ab74fb057cffbba01f0b5bd038ccf2">Aura::_InitEffects</a> (<a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> effMask, <a class="el" href="../../da/db7/class_unit.html">Unit</a> *caster, <a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> *baseAmount)</td></tr>
<tr class="separator:a80ab74fb057cffbba01f0b5bd038ccf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06e65369f89484f7de1d3ad814fb4103"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/dde/class_aura.html">Aura</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df1/class_aura_effect.html#a06e65369f89484f7de1d3ad814fb4103">Unit::_TryStackingOrRefreshingExistingAura</a> (<a class="el" href="../../d4/d7d/class_spell_info.html">SpellInfo</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *newAura, <a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> effMask, <a class="el" href="../../da/db7/class_unit.html">Unit</a> *caster, <a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> *baseAmount, <a class="el" href="../../dc/d32/class_item.html">Item</a> *castItem, <a class="el" href="../../d8/d03/class_object_guid.html">ObjectGuid</a> casterGUID, <a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> noPeriodicReset)</td></tr>
<tr class="separator:a06e65369f89484f7de1d3ad814fb4103"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00031">31</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aea6f4b8bd401df6979e6df65f3fd841e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea6f4b8bd401df6979e6df65f3fd841e">&#9670;&nbsp;</a></span>Aura::~Aura()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">AuraEffect::Aura::~Aura </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ad2a24adc63d2e5dfd848f22ddd490525"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2a24adc63d2e5dfd848f22ddd490525">&#9670;&nbsp;</a></span>~AuraEffect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">AuraEffect::~AuraEffect </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00404">404</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;{</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keyword">delete</span> <a class="code" href="../../da/df1/class_aura_effect.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a>;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keyword">delete</span> <a class="code" href="../../da/df1/class_aura_effect.html#a256fe55e1c441e5dcc7c33abb4222e69">m_channelData</a>;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;}</div>
<div class="ttc" id="aclass_aura_effect_html_a256fe55e1c441e5dcc7c33abb4222e69"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a256fe55e1c441e5dcc7c33abb4222e69">AuraEffect::m_channelData</a></div><div class="ttdeci">ChannelTargetData * m_channelData</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00129">SpellAuraEffects.h:129</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a25ce25c5ff12969bd62d0547c48b5753"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a25ce25c5ff12969bd62d0547c48b5753">AuraEffect::m_spellmod</a></div><div class="ttdeci">SpellModifier * m_spellmod</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00131">SpellAuraEffects.h:131</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00129">m_channelData</a>, and <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00131">m_spellmod</a>.</p>

</div>
</div>
<a id="a7778b120e414f28e95e71ce96660149e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7778b120e414f28e95e71ce96660149e">&#9670;&nbsp;</a></span>AuraEffect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">AuraEffect::AuraEffect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/dde/class_aura.html">Aura</a> *&#160;</td>
          <td class="paramname"><em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>effIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> *&#160;</td>
          <td class="paramname"><em>baseAmount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00382">382</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                                                                                 :</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <a class="code" href="../../da/df1/class_aura_effect.html#aff934af743b5031d558ffc9a4b55d6de">m_base</a>(base), <a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>(base-&gt;<a class="code" href="../../d2/dde/class_aura.html#a7c8537a933fb3deee10c40f1345ad86b">GetSpellInfo</a>()),</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <a class="code" href="../../da/df1/class_aura_effect.html#aba194c9071a1b0551768b397abc9ebeb">m_baseAmount</a>(baseAmount ? * baseAmount : <a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[effIndex].BasePoints), <a class="code" href="../../da/df1/class_aura_effect.html#af7eff5d08a22189f99f66695367ae250">m_critChance</a>(0),</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <a class="code" href="../../da/df1/class_aura_effect.html#a5fa9f61c77274c75e6f3d8222142ab4e">m_oldAmount</a>(0), <a class="code" href="../../da/df1/class_aura_effect.html#acec00491f0ec7f7c68d6a25d85b5b53f">m_isAuraEnabled</a>(<span class="keyword">true</span>), <a class="code" href="../../da/df1/class_aura_effect.html#a256fe55e1c441e5dcc7c33abb4222e69">m_channelData</a>(<span class="keyword">nullptr</span>), <a class="code" href="../../da/df1/class_aura_effect.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a>(<span class="keyword">nullptr</span>), <a class="code" href="../../da/df1/class_aura_effect.html#a2d9b475cbf04d8597953802e1accc938">m_periodicTimer</a>(0), <a class="code" href="../../da/df1/class_aura_effect.html#ab8c7fb50eac3482a162cbbacd64f1625">m_tickNumber</a>(0), <a class="code" href="../../da/df1/class_aura_effect.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>(effIndex),</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <a class="code" href="../../da/df1/class_aura_effect.html#a334378fa304471045fd273f4d845c8dd">m_canBeRecalculated</a>(<span class="keyword">true</span>), <a class="code" href="../../da/df1/class_aura_effect.html#ad6931b2764b92bc6c2a20b092c011f0a">m_isPeriodic</a>(<span class="keyword">false</span>)</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;{</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <a class="code" href="../../da/df1/class_aura_effect.html#a5b0a6694f62bf72c41a1f461f9894581">CalculatePeriodic</a>(caster, <span class="keyword">true</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <a class="code" href="../../da/df1/class_aura_effect.html#ab0b3261b6c7f5ae45348d0113d24f1ed">CalculatePeriodicData</a>();</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160; </div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <a class="code" href="../../da/df1/class_aura_effect.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a> = <a class="code" href="../../da/df1/class_aura_effect.html#a66f8fd3fa296b59cee26c35c433e52f2">CalculateAmount</a>(caster);</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <a class="code" href="../../da/df1/class_aura_effect.html#a3f9c2c6496be1ffad249825f86074def">m_casterLevel</a> = caster ? caster-&gt;<a class="code" href="../../da/db7/class_unit.html#adc6d98745d565970b4a89088ec5b5a42">getLevel</a>() : 0;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <a class="code" href="../../da/df1/class_aura_effect.html#a4745b52e662a6dd92ec3b566ef7ca297">m_applyResilience</a> = caster &amp;&amp; caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a5eee2a0798394bc03d983d112a5d59d0">CanApplyResilience</a>();</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <a class="code" href="../../da/df1/class_aura_effect.html#ada78fc2515cb55583bf83667e475c7fe">m_auraGroup</a> = <a class="code" href="../../d3/d75/_spell_mgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellGroup(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160; </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <a class="code" href="../../da/df1/class_aura_effect.html#a5d248ef37c73049cf4df98b6fc1008fe">CalculateSpellMod</a>();</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="comment">// Xinef: channel data structure</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">if</span> (caster)</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d0d/class_spell.html">Spell</a>* spell = caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a6a942f7bfc8e8ea98ab52a0172970a35">GetCurrentSpell</a>(<a class="code" href="../../d5/d32/_unit_8h.html#ab791040bd6d685b1fd2cfd12c96d0a1fa960a792eef11d7eca70b058265e3cca6">CURRENT_CHANNELED_SPELL</a>))</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            <a class="code" href="../../da/df1/class_aura_effect.html#a256fe55e1c441e5dcc7c33abb4222e69">m_channelData</a> = <span class="keyword">new</span> <a class="code" href="../../de/dc5/struct_channel_target_data.html">ChannelTargetData</a>(caster-&gt;<a class="code" href="../../d8/d83/class_object.html#af7b6a5afebd7c3297e369213be44e059">GetGuidValue</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a2ade5a94dc5b622bd2dfdad5eddaf273">UNIT_FIELD_CHANNEL_OBJECT</a>), spell-&gt;m_targets.HasDst() ? spell-&gt;m_targets.GetDst() : <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;}</div>
<div class="ttc" id="a_spell_mgr_8h_html_aa21e14d8e1145507b746a69b5487109d"><div class="ttname"><a href="../../d3/d75/_spell_mgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a></div><div class="ttdeci">#define sSpellMgr</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d75/_spell_mgr_8h_source.html#l00794">SpellMgr.h:794</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab791040bd6d685b1fd2cfd12c96d0a1fa960a792eef11d7eca70b058265e3cca6"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab791040bd6d685b1fd2cfd12c96d0a1fa960a792eef11d7eca70b058265e3cca6">CURRENT_CHANNELED_SPELL</a></div><div class="ttdeci">@ CURRENT_CHANNELED_SPELL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01108">Unit.h:1108</a></div></div>
<div class="ttc" id="a_update_fields_8h_html_a0e42dc606678c9df7884e1aad621e881a2ade5a94dc5b622bd2dfdad5eddaf273"><div class="ttname"><a href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a2ade5a94dc5b622bd2dfdad5eddaf273">UNIT_FIELD_CHANNEL_OBJECT</a></div><div class="ttdeci">@ UNIT_FIELD_CHANNEL_OBJECT</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d65/_update_fields_8h_source.html#l00093">UpdateFields.h:93</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a2d9b475cbf04d8597953802e1accc938"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a2d9b475cbf04d8597953802e1accc938">AuraEffect::m_periodicTimer</a></div><div class="ttdeci">int32 m_periodicTimer</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00133">SpellAuraEffects.h:133</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a334378fa304471045fd273f4d845c8dd"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a334378fa304471045fd273f4d845c8dd">AuraEffect::m_canBeRecalculated</a></div><div class="ttdeci">bool m_canBeRecalculated</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00138">SpellAuraEffects.h:138</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a355d61580194626ea54b22ff9a3ac96a"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a355d61580194626ea54b22ff9a3ac96a">AuraEffect::m_effIndex</a></div><div class="ttdeci">uint8 const m_effIndex</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00137">SpellAuraEffects.h:137</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a3f9c2c6496be1ffad249825f86074def"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a3f9c2c6496be1ffad249825f86074def">AuraEffect::m_casterLevel</a></div><div class="ttdeci">uint8 m_casterLevel</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00119">SpellAuraEffects.h:119</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a4745b52e662a6dd92ec3b566ef7ca297"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a4745b52e662a6dd92ec3b566ef7ca297">AuraEffect::m_applyResilience</a></div><div class="ttdeci">bool m_applyResilience</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00118">SpellAuraEffects.h:118</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a5b0a6694f62bf72c41a1f461f9894581"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a5b0a6694f62bf72c41a1f461f9894581">AuraEffect::CalculatePeriodic</a></div><div class="ttdeci">void CalculatePeriodic(Unit *caster, bool create=false, bool load=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00586">SpellAuraEffects.cpp:586</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a5d248ef37c73049cf4df98b6fc1008fe"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a5d248ef37c73049cf4df98b6fc1008fe">AuraEffect::CalculateSpellMod</a></div><div class="ttdeci">void CalculateSpellMod()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00676">SpellAuraEffects.cpp:676</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a5fa9f61c77274c75e6f3d8222142ab4e"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a5fa9f61c77274c75e6f3d8222142ab4e">AuraEffect::m_oldAmount</a></div><div class="ttdeci">int32 m_oldAmount</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00126">SpellAuraEffects.h:126</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a63863fb01a8cf08251c0b4482be6a20f"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">AuraEffect::GetId</a></div><div class="ttdeci">uint32 GetId() const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">SpellAuraEffects.cpp:431</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a66f8fd3fa296b59cee26c35c433e52f2"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a66f8fd3fa296b59cee26c35c433e52f2">AuraEffect::CalculateAmount</a></div><div class="ttdeci">int32 CalculateAmount(Unit *caster)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00451">SpellAuraEffects.cpp:451</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a7f01908f09b465b6770f18c13e459f17"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a7f01908f09b465b6770f18c13e459f17">AuraEffect::m_amount</a></div><div class="ttdeci">int32 m_amount</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00120">SpellAuraEffects.h:120</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_ab0b3261b6c7f5ae45348d0113d24f1ed"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#ab0b3261b6c7f5ae45348d0113d24f1ed">AuraEffect::CalculatePeriodicData</a></div><div class="ttdeci">void CalculatePeriodicData()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00571">SpellAuraEffects.cpp:571</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_ab8c7fb50eac3482a162cbbacd64f1625"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#ab8c7fb50eac3482a162cbbacd64f1625">AuraEffect::m_tickNumber</a></div><div class="ttdeci">uint32 m_tickNumber</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00135">SpellAuraEffects.h:135</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_aba194c9071a1b0551768b397abc9ebeb"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#aba194c9071a1b0551768b397abc9ebeb">AuraEffect::m_baseAmount</a></div><div class="ttdeci">int32 const m_baseAmount</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00116">SpellAuraEffects.h:116</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_ac4df84854746b8de74f64e2abfec76c1"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">AuraEffect::m_spellInfo</a></div><div class="ttdeci">SpellInfo const  *const m_spellInfo</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00115">SpellAuraEffects.h:115</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_acec00491f0ec7f7c68d6a25d85b5b53f"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#acec00491f0ec7f7c68d6a25d85b5b53f">AuraEffect::m_isAuraEnabled</a></div><div class="ttdeci">bool m_isAuraEnabled</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00127">SpellAuraEffects.h:127</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_ad6931b2764b92bc6c2a20b092c011f0a"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#ad6931b2764b92bc6c2a20b092c011f0a">AuraEffect::m_isPeriodic</a></div><div class="ttdeci">bool m_isPeriodic</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00139">SpellAuraEffects.h:139</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_ada78fc2515cb55583bf83667e475c7fe"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#ada78fc2515cb55583bf83667e475c7fe">AuraEffect::m_auraGroup</a></div><div class="ttdeci">uint32 m_auraGroup</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00125">SpellAuraEffects.h:125</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_af7eff5d08a22189f99f66695367ae250"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#af7eff5d08a22189f99f66695367ae250">AuraEffect::m_critChance</a></div><div class="ttdeci">float m_critChance</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00121">SpellAuraEffects.h:121</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_aff934af743b5031d558ffc9a4b55d6de"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#aff934af743b5031d558ffc9a4b55d6de">AuraEffect::m_base</a></div><div class="ttdeci">Aura *const m_base</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00113">SpellAuraEffects.h:113</a></div></div>
<div class="ttc" id="aclass_aura_html_a7c8537a933fb3deee10c40f1345ad86b"><div class="ttname"><a href="../../d2/dde/class_aura.html#a7c8537a933fb3deee10c40f1345ad86b">Aura::GetSpellInfo</a></div><div class="ttdeci">SpellInfo const  * GetSpellInfo() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dcf/_spell_auras_8h_source.html#l00100">SpellAuras.h:100</a></div></div>
<div class="ttc" id="aclass_object_html_af7b6a5afebd7c3297e369213be44e059"><div class="ttname"><a href="../../d8/d83/class_object.html#af7b6a5afebd7c3297e369213be44e059">Object::GetGuidValue</a></div><div class="ttdeci">ObjectGuid GetGuidValue(uint16 index) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/ded/_object_8cpp_source.html#l00332">Object.cpp:332</a></div></div>
<div class="ttc" id="aclass_spell_html"><div class="ttname"><a href="../../d8/d0d/class_spell.html">Spell</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfa/_spell_8h_source.html#l00283">Spell.h:284</a></div></div>
<div class="ttc" id="aclass_spell_info_html_aa5bb0d7d6df03526d011d9cbfa3734e0"><div class="ttname"><a href="../../d4/d7d/class_spell_info.html#aa5bb0d7d6df03526d011d9cbfa3734e0">SpellInfo::Effects</a></div><div class="ttdeci">std::array&lt; SpellEffectInfo, MAX_SPELL_EFFECTS &gt; Effects</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d70/_spell_info_8h_source.html#l00387">SpellInfo.h:387</a></div></div>
<div class="ttc" id="aclass_unit_html_a5eee2a0798394bc03d983d112a5d59d0"><div class="ttname"><a href="../../da/db7/class_unit.html#a5eee2a0798394bc03d983d112a5d59d0">Unit::CanApplyResilience</a></div><div class="ttdeci">bool CanApplyResilience() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l02496">Unit.h:2496</a></div></div>
<div class="ttc" id="aclass_unit_html_a6a942f7bfc8e8ea98ab52a0172970a35"><div class="ttname"><a href="../../da/db7/class_unit.html#a6a942f7bfc8e8ea98ab52a0172970a35">Unit::GetCurrentSpell</a></div><div class="ttdeci">Spell * GetCurrentSpell(CurrentSpellTypes spellType) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l02143">Unit.h:2143</a></div></div>
<div class="ttc" id="aclass_unit_html_adc6d98745d565970b4a89088ec5b5a42"><div class="ttname"><a href="../../da/db7/class_unit.html#adc6d98745d565970b4a89088ec5b5a42">Unit::getLevel</a></div><div class="ttdeci">uint8 getLevel() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01539">Unit.h:1539</a></div></div>
<div class="ttc" id="astruct_channel_target_data_html"><div class="ttname"><a href="../../de/dc5/struct_channel_target_data.html">ChannelTargetData</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfa/_spell_8h_source.html#l00240">Spell.h:241</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00451">CalculateAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00586">CalculatePeriodic()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00571">CalculatePeriodicData()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00676">CalculateSpellMod()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02496">Unit::CanApplyResilience()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01108">CURRENT_CHANNELED_SPELL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02143">Unit::GetCurrentSpell()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00332">Object::GetGuidValue()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">GetId()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01539">Unit::getLevel()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00120">m_amount</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00118">m_applyResilience</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00125">m_auraGroup</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00119">m_casterLevel</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00129">m_channelData</a>, <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00794">sSpellMgr</a>, and <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00093">UNIT_FIELD_CHANNEL_OBJECT</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2a7bd5fd001ae6fb2ac680b1d25ef378"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a7bd5fd001ae6fb2ac680b1d25ef378">&#9670;&nbsp;</a></span>ApplySpellMod()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::ApplySpellMod </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00791">791</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;{</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../da/df1/class_aura_effect.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a> || target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160; </div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#adcd87d71d084fdc71bc92448f45cf726">AddSpellMod</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160; </div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <span class="comment">// Auras with charges do not mod amount of passive auras</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;IsUsingCharges())</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <span class="comment">// reapply some passive spells after add/remove related spellmods</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <span class="comment">// Warning: it is a dead loop if 2 auras each other amount-shouldn&#39;t happen</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>())</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    {</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#a39b60e1f12cca9b6873cb817e7717351a2afcbd3a0f99f3410cd2790a28a336ec">SPELLMOD_ALL_EFFECTS</a>:</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#a39b60e1f12cca9b6873cb817e7717351ab97b462651ee3567f2c518bd09e74e9e">SPELLMOD_EFFECT1</a>:</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#a39b60e1f12cca9b6873cb817e7717351a0424ff84a813354eb36d6f6774bbacce">SPELLMOD_EFFECT2</a>:</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#a39b60e1f12cca9b6873cb817e7717351a707c5251dd2bb2719dd4d3abe90fdbae">SPELLMOD_EFFECT3</a>:</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;            {</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                <a class="code" href="../../d8/d03/class_object_guid.html">ObjectGuid</a> guid = target-&gt;<a class="code" href="../../d8/d83/class_object.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>();</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                <a class="code" href="../../da/db7/class_unit.html#a32f102f941cf4a53fe17e7f7e957150a">Unit::AuraApplicationMap</a>&amp; auras = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a60981060c43937360baec0ea09df4ff9">GetAppliedAuras</a>();</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                <span class="keywordflow">for</span> (Unit::AuraApplicationMap::iterator iter = auras.begin(); iter != auras.end(); ++iter)</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                {</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;                    <a class="code" href="../../d2/dde/class_aura.html">Aura</a>* aura = iter-&gt;second-&gt;GetBase();</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                    <span class="comment">// only passive and permament auras-active auras should have amount set on spellcast and not be affected</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                    <span class="comment">// if aura is casted by others, it will not be affected</span></div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                    <span class="keywordflow">if</span> ((aura-&gt;<a class="code" href="../../d2/dde/class_aura.html#ae24c050668e78ef9d8728e6b5bd77c12">IsPassive</a>() || aura-&gt;<a class="code" href="../../d2/dde/class_aura.html#af70f37c9e40b7038cf952c2969ae9ab2">IsPermanent</a>()) &amp;&amp; aura-&gt;<a class="code" href="../../d2/dde/class_aura.html#a3c4dfe75dad16fbf2afaf23ce77e4262">GetCasterGUID</a>() == guid &amp;&amp; aura-&gt;<a class="code" href="../../d2/dde/class_aura.html#a7c8537a933fb3deee10c40f1345ad86b">GetSpellInfo</a>()-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a75e80fd4e12d1c445584627bb4bf9c84">IsAffectedBySpellMod</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a>))</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                    {</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == <a class="code" href="../../d5/d32/_unit_8h.html#a39b60e1f12cca9b6873cb817e7717351a2afcbd3a0f99f3410cd2790a28a336ec">SPELLMOD_ALL_EFFECTS</a>)</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;                        {</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;                            <span class="keywordflow">for</span> (<a class="code" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> i = 0; i &lt; <a class="code" href="../../d1/d22/_d_b_c_structure_8h.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>; ++i)</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                            {</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html">AuraEffect</a>* aurEff = aura-&gt;<a class="code" href="../../d2/dde/class_aura.html#a2ed7d1d11cbc433767ca25c869755f1c">GetEffect</a>(i))</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;                                    aurEff-&gt;RecalculateAmount();</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;                            }</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                        }</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == <a class="code" href="../../d5/d32/_unit_8h.html#a39b60e1f12cca9b6873cb817e7717351ab97b462651ee3567f2c518bd09e74e9e">SPELLMOD_EFFECT1</a>)</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                        {</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html">AuraEffect</a>* aurEff = aura-&gt;<a class="code" href="../../d2/dde/class_aura.html#a2ed7d1d11cbc433767ca25c869755f1c">GetEffect</a>(0))</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                                aurEff-&gt;RecalculateAmount();</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                        }</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == <a class="code" href="../../d5/d32/_unit_8h.html#a39b60e1f12cca9b6873cb817e7717351a0424ff84a813354eb36d6f6774bbacce">SPELLMOD_EFFECT2</a>)</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                        {</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html">AuraEffect</a>* aurEff = aura-&gt;<a class="code" href="../../d2/dde/class_aura.html#a2ed7d1d11cbc433767ca25c869755f1c">GetEffect</a>(1))</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                                aurEff-&gt;RecalculateAmount();</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                        }</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                        <span class="keywordflow">else</span> <span class="comment">//if (modOp == SPELLMOD_EFFECT3)</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;                        {</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html">AuraEffect</a>* aurEff = aura-&gt;<a class="code" href="../../d2/dde/class_aura.html#a2ed7d1d11cbc433767ca25c869755f1c">GetEffect</a>(2))</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;                                aurEff-&gt;RecalculateAmount();</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                        }</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                    }</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                }</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160; </div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;                <a class="code" href="../../d6/d98/class_pet.html">Pet</a>* pet = target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a5eef7fef24e4a9269d1ee834bc2bd501">GetPet</a>();</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;                <span class="keywordflow">if</span> (!pet)</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160; </div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                <a class="code" href="../../d8/d03/class_object_guid.html">ObjectGuid</a> petguid = pet-&gt;<a class="code" href="../../d8/d83/class_object.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>();</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                <a class="code" href="../../da/db7/class_unit.html#a32f102f941cf4a53fe17e7f7e957150a">Unit::AuraApplicationMap</a>&amp; petauras = pet-&gt;<a class="code" href="../../da/db7/class_unit.html#a60981060c43937360baec0ea09df4ff9">GetAppliedAuras</a>();</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;                <span class="keywordflow">for</span> (Unit::AuraApplicationMap::iterator iter = petauras.begin(); iter != petauras.end(); ++iter)</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;                {</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                    <a class="code" href="../../d2/dde/class_aura.html">Aura</a>* aura = iter-&gt;second-&gt;GetBase();</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                    <span class="comment">// only passive auras-active auras should have amount set on spellcast and not be affected</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                    <span class="comment">// if aura is casted by others, it will not be affected</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                    <span class="keywordflow">if</span> ((aura-&gt;<a class="code" href="../../d2/dde/class_aura.html#ae24c050668e78ef9d8728e6b5bd77c12">IsPassive</a>() || aura-&gt;<a class="code" href="../../d2/dde/class_aura.html#af70f37c9e40b7038cf952c2969ae9ab2">IsPermanent</a>()) &amp;&amp; aura-&gt;<a class="code" href="../../d2/dde/class_aura.html#a3c4dfe75dad16fbf2afaf23ce77e4262">GetCasterGUID</a>() == petguid &amp;&amp; aura-&gt;<a class="code" href="../../d2/dde/class_aura.html#a7c8537a933fb3deee10c40f1345ad86b">GetSpellInfo</a>()-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a75e80fd4e12d1c445584627bb4bf9c84">IsAffectedBySpellMod</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a>))</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                    {</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == <a class="code" href="../../d5/d32/_unit_8h.html#a39b60e1f12cca9b6873cb817e7717351a2afcbd3a0f99f3410cd2790a28a336ec">SPELLMOD_ALL_EFFECTS</a>)</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                        {</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                            <span class="keywordflow">for</span> (<a class="code" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> i = 0; i &lt; <a class="code" href="../../d1/d22/_d_b_c_structure_8h.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>; ++i)</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                            {</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html">AuraEffect</a>* aurEff = aura-&gt;<a class="code" href="../../d2/dde/class_aura.html#a2ed7d1d11cbc433767ca25c869755f1c">GetEffect</a>(i))</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                                    aurEff-&gt;RecalculateAmount();</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                            }</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                        }</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == <a class="code" href="../../d5/d32/_unit_8h.html#a39b60e1f12cca9b6873cb817e7717351ab97b462651ee3567f2c518bd09e74e9e">SPELLMOD_EFFECT1</a>)</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;                        {</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html">AuraEffect</a>* aurEff = aura-&gt;<a class="code" href="../../d2/dde/class_aura.html#a2ed7d1d11cbc433767ca25c869755f1c">GetEffect</a>(0))</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                                aurEff-&gt;RecalculateAmount();</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;                        }</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == <a class="code" href="../../d5/d32/_unit_8h.html#a39b60e1f12cca9b6873cb817e7717351a0424ff84a813354eb36d6f6774bbacce">SPELLMOD_EFFECT2</a>)</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                        {</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html">AuraEffect</a>* aurEff = aura-&gt;<a class="code" href="../../d2/dde/class_aura.html#a2ed7d1d11cbc433767ca25c869755f1c">GetEffect</a>(1))</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;                                aurEff-&gt;RecalculateAmount();</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;                        }</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;                        <span class="keywordflow">else</span> <span class="comment">//if (modOp == SPELLMOD_EFFECT3)</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                        {</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html">AuraEffect</a>* aurEff = aura-&gt;<a class="code" href="../../d2/dde/class_aura.html#a2ed7d1d11cbc433767ca25c869755f1c">GetEffect</a>(2))</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;                                aurEff-&gt;RecalculateAmount();</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                        }</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                    }</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                }</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;            }</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    }</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;}</div>
<div class="ttc" id="a_d_b_c_structure_8h_html_ac5733f5b58bf8a23a1919a005b5ec895"><div class="ttname"><a href="../../d1/d22/_d_b_c_structure_8h.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a></div><div class="ttdeci">#define MAX_SPELL_EFFECTS</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/_d_b_c_structure_8h_source.html#l01559">DBCStructure.h:1559</a></div></div>
<div class="ttc" id="a_object_guid_8h_html_a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c"><div class="ttname"><a href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a></div><div class="ttdeci">@ TYPEID_PLAYER</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d83/_object_guid_8h_source.html#l00038">ObjectGuid.h:38</a></div></div>
<div class="ttc" id="a_unit_8h_html_a39b60e1f12cca9b6873cb817e7717351a0424ff84a813354eb36d6f6774bbacce"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a39b60e1f12cca9b6873cb817e7717351a0424ff84a813354eb36d6f6774bbacce">SPELLMOD_EFFECT2</a></div><div class="ttdeci">@ SPELLMOD_EFFECT2</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00097">Unit.h:97</a></div></div>
<div class="ttc" id="a_unit_8h_html_a39b60e1f12cca9b6873cb817e7717351a2afcbd3a0f99f3410cd2790a28a336ec"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a39b60e1f12cca9b6873cb817e7717351a2afcbd3a0f99f3410cd2790a28a336ec">SPELLMOD_ALL_EFFECTS</a></div><div class="ttdeci">@ SPELLMOD_ALL_EFFECTS</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00093">Unit.h:93</a></div></div>
<div class="ttc" id="a_unit_8h_html_a39b60e1f12cca9b6873cb817e7717351a707c5251dd2bb2719dd4d3abe90fdbae"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a39b60e1f12cca9b6873cb817e7717351a707c5251dd2bb2719dd4d3abe90fdbae">SPELLMOD_EFFECT3</a></div><div class="ttdeci">@ SPELLMOD_EFFECT3</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00108">Unit.h:108</a></div></div>
<div class="ttc" id="a_unit_8h_html_a39b60e1f12cca9b6873cb817e7717351ab97b462651ee3567f2c518bd09e74e9e"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a39b60e1f12cca9b6873cb817e7717351ab97b462651ee3567f2c518bd09e74e9e">SPELLMOD_EFFECT1</a></div><div class="ttdeci">@ SPELLMOD_EFFECT1</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00088">Unit.h:88</a></div></div>
<div class="ttc" id="aclass_aura_effect_html"><div class="ttname"><a href="../../da/df1/class_aura_effect.html">AuraEffect</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00031">SpellAuraEffects.h:32</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a0417bd1d648cb9d2888937ddad75788c"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">AuraEffect::GetBase</a></div><div class="ttdeci">Aura * GetBase() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">SpellAuraEffects.h:42</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_aa183791665930afb43bbac2163b1d8d4"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">AuraEffect::GetMiscValue</a></div><div class="ttdeci">int32 GetMiscValue() const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">SpellAuraEffects.cpp:441</a></div></div>
<div class="ttc" id="aclass_aura_html"><div class="ttname"><a href="../../d2/dde/class_aura.html">Aura</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dcf/_spell_auras_8h_source.html#l00086">SpellAuras.h:87</a></div></div>
<div class="ttc" id="aclass_aura_html_a2ed7d1d11cbc433767ca25c869755f1c"><div class="ttname"><a href="../../d2/dde/class_aura.html#a2ed7d1d11cbc433767ca25c869755f1c">Aura::GetEffect</a></div><div class="ttdeci">AuraEffect * GetEffect(uint8 effIndex) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dcf/_spell_auras_8h_source.html#l00174">SpellAuras.h:174</a></div></div>
<div class="ttc" id="aclass_aura_html_a3c4dfe75dad16fbf2afaf23ce77e4262"><div class="ttname"><a href="../../d2/dde/class_aura.html#a3c4dfe75dad16fbf2afaf23ce77e4262">Aura::GetCasterGUID</a></div><div class="ttdeci">ObjectGuid GetCasterGUID() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dcf/_spell_auras_8h_source.html#l00105">SpellAuras.h:105</a></div></div>
<div class="ttc" id="aclass_aura_html_ae24c050668e78ef9d8728e6b5bd77c12"><div class="ttname"><a href="../../d2/dde/class_aura.html#ae24c050668e78ef9d8728e6b5bd77c12">Aura::IsPassive</a></div><div class="ttdeci">bool IsPassive() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/_spell_auras_8cpp_source.html#l01034">SpellAuras.cpp:1034</a></div></div>
<div class="ttc" id="aclass_aura_html_af70f37c9e40b7038cf952c2969ae9ab2"><div class="ttname"><a href="../../d2/dde/class_aura.html#af70f37c9e40b7038cf952c2969ae9ab2">Aura::IsPermanent</a></div><div class="ttdeci">bool IsPermanent() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dcf/_spell_auras_8h_source.html#l00138">SpellAuras.h:138</a></div></div>
<div class="ttc" id="aclass_object_guid_html"><div class="ttname"><a href="../../d8/d03/class_object_guid.html">ObjectGuid</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d83/_object_guid_8h_source.html#l00119">ObjectGuid.h:120</a></div></div>
<div class="ttc" id="aclass_object_html_a621a345fc34deed6d3a4e1e498a652da"><div class="ttname"><a href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">Object::GetTypeId</a></div><div class="ttdeci">TypeID GetTypeId() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d30/_object_8h_source.html#l00107">Object.h:107</a></div></div>
<div class="ttc" id="aclass_object_html_ad23b997e2442fa6a6228ba73a7ecc138"><div class="ttname"><a href="../../d8/d83/class_object.html#ad23b997e2442fa6a6228ba73a7ecc138">Object::GetGUID</a></div><div class="ttdeci">static ObjectGuid GetGUID(Object const *o)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d30/_object_8h_source.html#l00098">Object.h:98</a></div></div>
<div class="ttc" id="aclass_object_html_ae635434021784608b659501867538c87"><div class="ttname"><a href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">Object::ToPlayer</a></div><div class="ttdeci">Player * ToPlayer()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d30/_object_8h_source.html#l00181">Object.h:181</a></div></div>
<div class="ttc" id="aclass_pet_html"><div class="ttname"><a href="../../d6/d98/class_pet.html">Pet</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d67/_pet_8h_source.html#l00054">Pet.h:55</a></div></div>
<div class="ttc" id="aclass_player_html_a5eef7fef24e4a9269d1ee834bc2bd501"><div class="ttname"><a href="../../d8/d53/class_player.html#a5eef7fef24e4a9269d1ee834bc2bd501">Player::GetPet</a></div><div class="ttdeci">Pet * GetPet() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/_player_8cpp_source.html#l08649">Player.cpp:8649</a></div></div>
<div class="ttc" id="aclass_player_html_adcd87d71d084fdc71bc92448f45cf726"><div class="ttname"><a href="../../d8/d53/class_player.html#adcd87d71d084fdc71bc92448f45cf726">Player::AddSpellMod</a></div><div class="ttdeci">void AddSpellMod(SpellModifier *mod, bool apply)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/_player_8cpp_source.html#l09187">Player.cpp:9187</a></div></div>
<div class="ttc" id="aclass_spell_info_html_a75e80fd4e12d1c445584627bb4bf9c84"><div class="ttname"><a href="../../d4/d7d/class_spell_info.html#a75e80fd4e12d1c445584627bb4bf9c84">SpellInfo::IsAffectedBySpellMod</a></div><div class="ttdeci">bool IsAffectedBySpellMod(SpellModifier const *mod) const</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7f/_spell_info_8cpp_source.html#l01276">SpellInfo.cpp:1276</a></div></div>
<div class="ttc" id="aclass_unit_html_a32f102f941cf4a53fe17e7f7e957150a"><div class="ttname"><a href="../../da/db7/class_unit.html#a32f102f941cf4a53fe17e7f7e957150a">Unit::AuraApplicationMap</a></div><div class="ttdeci">std::multimap&lt; uint32, AuraApplication * &gt; AuraApplicationMap</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01428">Unit.h:1428</a></div></div>
<div class="ttc" id="aclass_unit_html_a60981060c43937360baec0ea09df4ff9"><div class="ttname"><a href="../../da/db7/class_unit.html#a60981060c43937360baec0ea09df4ff9">Unit::GetAppliedAuras</a></div><div class="ttdeci">AuraApplicationMap &amp; GetAppliedAuras()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l02004">Unit.h:2004</a></div></div>
<div class="ttc" id="amy__global_8h_html_adde6aaee8457bee49c2a92621fe22b79"><div class="ttname"><a href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a></div><div class="ttdeci">unsigned char uint8</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df6/my__global_8h_source.html#l00881">my_global.h:881</a></div></div>
<div class="ttc" id="anamespace_byte_converter_html_a6177d7ac84a4ea6819c57a124345540e"><div class="ttname"><a href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">ByteConverter::apply</a></div><div class="ttdeci">void apply(T *val)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter.h:40</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d82/_player_8cpp_source.html#l09187">Player::AddSpellMod()</a>, <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02004">Unit::GetAppliedAuras()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">GetBase()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00105">Aura::GetCasterGUID()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00174">Aura::GetEffect()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00098">Object::GetGUID()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l08649">Player::GetPet()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00100">Aura::GetSpellInfo()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../da/d7f/_spell_info_8cpp_source.html#l01276">SpellInfo::IsAffectedBySpellMod()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l01034">Aura::IsPassive()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00138">Aura::IsPermanent()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00199">Aura::IsUsingCharges()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00131">m_spellmod</a>, <a class="el" href="../../d1/d22/_d_b_c_structure_8h_source.html#l01559">MAX_SPELL_EFFECTS</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00093">SPELLMOD_ALL_EFFECTS</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00088">SPELLMOD_EFFECT1</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00097">SPELLMOD_EFFECT2</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00108">SPELLMOD_EFFECT3</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, and <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00733">HandleEffect()</a>.</p>

</div>
</div>
<a id="a43dd810a38d13af5ffee45dc4f7d5aac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43dd810a38d13af5ffee45dc4f7d5aac">&#9670;&nbsp;</a></span>CalcPeriodicCritChance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float AuraEffect::CalcPeriodicCritChance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>caster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01029">1029</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;{</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    <span class="keywordtype">float</span> critChance = 0.0f;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    <span class="keywordflow">if</span> (caster)</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    {</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d53/class_player.html">Player</a>* modOwner = caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a2e6a98844f96c211f47b911a2766ada8">GetSpellModOwner</a>())</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        {</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            <a class="code" href="../../da/db7/class_unit.html#adcdd87d0c137619dfc869536c1315dd7">Unit::AuraEffectList</a> <span class="keyword">const</span>&amp; mPeriodicCritAuras = modOwner-&gt;GetAuraEffectsByType(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a7758d81a4b1d1914bbc46b904e67c1f6">SPELL_AURA_ABILITY_PERIODIC_CRIT</a>);</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;            <span class="keywordflow">for</span> (Unit::AuraEffectList::const_iterator itr = mPeriodicCritAuras.begin(); itr != mPeriodicCritAuras.end(); ++itr)</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;            {</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                <span class="keywordflow">if</span> ((*itr)-&gt;IsAffectedOnSpell(<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()))</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;                {</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;                    critChance = modOwner-&gt;SpellDoneCritChance(<span class="keyword">nullptr</span>, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;GetSchoolMask(), (<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;DmgClass == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a7443b708d5bd7312fc0a420679ae10a4a26638bd2ee5365a4b278420b7dc66956">SPELL_DAMAGE_CLASS_RANGED</a> ? <a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aaa2557af152c5f2b27bbf59915cbd1670">RANGED_ATTACK</a> : <a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>), <span class="keyword">true</span>);</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;                }</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;            }</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160; </div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;            <span class="keywordflow">switch</span>(<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;SpellFamilyName)</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;            {</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                <span class="comment">// Rupture - since 3.3.3 can crit</span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba9160b2e3a87a908af25c9a594295c0c1">SPELLFAMILY_ROGUE</a>:</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;SpellFamilyFlags[0] &amp; 0x100000)</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;                        critChance = modOwner-&gt;SpellDoneCritChance(<span class="keyword">nullptr</span>, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;GetSchoolMask(), <a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;            }</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;        }</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    }</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="keywordflow">if</span> (target &amp;&amp; critChance &gt; 0.0f)</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;        critChance = target-&gt;SpellTakenCritChance(caster, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;GetSchoolMask(), critChance, <a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160; </div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d9/df6/my__global_8h.html#affe776513b24d84b39af8ab0930fef7f">std::max</a>(0.0f, critChance);</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_a7443b708d5bd7312fc0a420679ae10a4a26638bd2ee5365a4b278420b7dc66956"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a7443b708d5bd7312fc0a420679ae10a4a26638bd2ee5365a4b278420b7dc66956">SPELL_DAMAGE_CLASS_RANGED</a></div><div class="ttdeci">@ SPELL_DAMAGE_CLASS_RANGED</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01521">SharedDefines.h:1520</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a9264ae6b0ef1b61a6eeb7fdac9fbab1ba9160b2e3a87a908af25c9a594295c0c1"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba9160b2e3a87a908af25c9a594295c0c1">SPELLFAMILY_ROGUE</a></div><div class="ttdeci">@ SPELLFAMILY_ROGUE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l03462">SharedDefines.h:3462</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a7758d81a4b1d1914bbc46b904e67c1f6"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a7758d81a4b1d1914bbc46b904e67c1f6">SPELL_AURA_ABILITY_PERIODIC_CRIT</a></div><div class="ttdeci">@ SPELL_AURA_ABILITY_PERIODIC_CRIT</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00349">SpellAuraDefines.h:349</a></div></div>
<div class="ttc" id="a_unit_8h_html_a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a></div><div class="ttdeci">@ BASE_ATTACK</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00555">Unit.h:555</a></div></div>
<div class="ttc" id="a_unit_8h_html_a2a35652af7129b6f139b0f7a2af1876aaa2557af152c5f2b27bbf59915cbd1670"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aaa2557af152c5f2b27bbf59915cbd1670">RANGED_ATTACK</a></div><div class="ttdeci">@ RANGED_ATTACK</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00557">Unit.h:557</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a93f49c4b2f8cabfc0372c8aef24f022e"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">AuraEffect::GetSpellInfo</a></div><div class="ttdeci">SpellInfo const  * GetSpellInfo() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">SpellAuraEffects.h:47</a></div></div>
<div class="ttc" id="aclass_player_html"><div class="ttname"><a href="../../d8/d53/class_player.html">Player</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l01023">Player.h:1024</a></div></div>
<div class="ttc" id="aclass_unit_html_a2e6a98844f96c211f47b911a2766ada8"><div class="ttname"><a href="../../da/db7/class_unit.html#a2e6a98844f96c211f47b911a2766ada8">Unit::GetSpellModOwner</a></div><div class="ttdeci">Player * GetSpellModOwner() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l15937">Unit.cpp:15937</a></div></div>
<div class="ttc" id="aclass_unit_html_adcdd87d0c137619dfc869536c1315dd7"><div class="ttname"><a href="../../da/db7/class_unit.html#adcdd87d0c137619dfc869536c1315dd7">Unit::AuraEffectList</a></div><div class="ttdeci">std::list&lt; AuraEffect * &gt; AuraEffectList</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01435">Unit.h:1435</a></div></div>
<div class="ttc" id="amy__global_8h_html_affe776513b24d84b39af8ab0930fef7f"><div class="ttname"><a href="../../d9/df6/my__global_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a></div><div class="ttdeci">#define max(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df6/my__global_8h_source.html#l01386">my_global.h:1386</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/d32/_unit_8h_source.html#l00555">BASE_ATTACK</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l15937">Unit::GetSpellModOwner()</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l01386">max</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00557">RANGED_ATTACK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00349">SPELL_AURA_ABILITY_PERIODIC_CRIT</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01520">SPELL_DAMAGE_CLASS_RANGED</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l03462">SPELLFAMILY_ROGUE</a>, and <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l11409">Unit::SpellTakenCritChance()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00571">CalculatePeriodicData()</a>.</p>

</div>
</div>
<a id="a66f8fd3fa296b59cee26c35c433e52f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66f8fd3fa296b59cee26c35c433e52f2">&#9670;&nbsp;</a></span>CalculateAmount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> AuraEffect::CalculateAmount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00451">451</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;{</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> amount;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="comment">// default amount calculation</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    amount = <a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code" href="../../da/df1/class_aura_effect.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>].CalcValue(caster, &amp;<a class="code" href="../../da/df1/class_aura_effect.html#aba194c9071a1b0551768b397abc9ebeb">m_baseAmount</a>, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160; </div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="comment">// check item enchant aura cast</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="keywordflow">if</span> (!amount &amp;&amp; caster)</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d03/class_object_guid.html">ObjectGuid</a> itemGUID = <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;GetCastItemGUID())</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d8/d53/class_player.html">Player</a>* playerCaster = caster-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>())</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../dc/d32/class_item.html">Item</a>* castItem = playerCaster-&gt;GetItemByGuid(itemGUID))</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                    <span class="keywordflow">if</span> (castItem-&gt;GetItemSuffixFactor())</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                    {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                        <a class="code" href="../../d3/da1/struct_item_random_suffix_entry.html">ItemRandomSuffixEntry</a> <span class="keyword">const</span>* item_rand_suffix = <a class="code" href="../../dd/d17/_d_b_c_stores_8cpp.html#aa64c2b1aad757429cacc3de31f69c0a3">sItemRandomSuffixStore</a>.LookupEntry(<a class="code" href="../../d0/d45/_matrix_8h.html#aaf9f9f8a87c718439346b4e96107f5e9">abs</a>(castItem-&gt;GetItemRandomPropertyId()));</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                        <span class="keywordflow">if</span> (item_rand_suffix)</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                        {</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                            <span class="keywordflow">for</span> (<a class="code" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> k = 0; k &lt; <a class="code" href="../../d1/d22/_d_b_c_structure_8h.html#af0d8d6c7748de71fbd87ae5d02985404">MAX_ITEM_ENCHANTMENT_EFFECTS</a>; k++)</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                            {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                                <a class="code" href="../../d1/d2f/struct_spell_item_enchantment_entry.html">SpellItemEnchantmentEntry</a> <span class="keyword">const</span>* pEnchant = <a class="code" href="../../dd/d17/_d_b_c_stores_8cpp.html#a4b7782641d455ad5070f1aba070beae9">sSpellItemEnchantmentStore</a>.LookupEntry(item_rand_suffix-&gt;<a class="code" href="../../d3/da1/struct_item_random_suffix_entry.html#a45e694082c1dbdeef5229561f617d584">Enchantment</a>[k]);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                                <span class="keywordflow">if</span> (pEnchant)</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                                {</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                                    <span class="keywordflow">for</span> (<a class="code" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> t = 0; t &lt; <a class="code" href="../../d1/d22/_d_b_c_structure_8h.html#ab66cd5828c451f68f55f1b054c29a8fc">MAX_SPELL_ITEM_ENCHANTMENT_EFFECTS</a>; t++)</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                                        <span class="keywordflow">if</span> (pEnchant-&gt;<a class="code" href="../../d1/d2f/struct_spell_item_enchantment_entry.html#a694edc79cf8ba571338bff2a3aad512d">spellid</a>[t] == <a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a49bc14059c2bd3785231c52e0d54d382">Id</a>)</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                                        {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                                            amount = <a class="code" href="../../df/de2/namespace_g3_d.html#ae911b90657d7162d47997c702af655a8">uint32</a>((item_rand_suffix-&gt;<a class="code" href="../../d3/da1/struct_item_random_suffix_entry.html#a45d752dfd00a75f69d919a88573ba4fc">AllocationPct</a>[k] * castItem-&gt;GetItemSuffixFactor()) / 10000);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                                        }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                                }</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160; </div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                                <span class="keywordflow">if</span> (amount)</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                            }</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                        }</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                    }</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160; </div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="comment">// custom amount calculations go here</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="comment">// xinef: normal auras</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>())</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <span class="comment">// crowd control auras</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799adaa58e2c604243da285d64f4a95b42f7">SPELL_AURA_MOD_CONFUSE</a>:</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a44cf043145f5a78c5a4e36ecff8a034d">SPELL_AURA_MOD_FEAR</a>:</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799afdf00dd634aaa25017ad329f58bd6cfd">SPELL_AURA_MOD_STUN</a>:</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a833a8773139c4fdffb24499f28e98c63">SPELL_AURA_MOD_ROOT</a>:</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ab4e25ba6068fba0c5d7c5ac8adbbf8fa">SPELL_AURA_TRANSFORM</a>:</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            <a class="code" href="../../da/df1/class_aura_effect.html#a334378fa304471045fd273f4d845c8dd">m_canBeRecalculated</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a7909fc70161065f6107211ee8ed3c6bf">ProcFlags</a> || <a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aefe1e81c5922419ada55844bdb30e269">HasAura</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a3c6e04ab343a9f5ef767f8e8dd71af5b">SPELL_AURA_PROC_TRIGGER_SPELL</a>)) <span class="comment">// xinef: skip auras with proctriggerspell, they must have procflags...</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            amount = <a class="code" href="../../df/de2/namespace_g3_d.html#af80d9dbc6fa48c9ff714c7158adb60ae">int32</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;GetUnitOwner()-&gt;CountPctFromMaxHealth(10));</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;            <span class="keywordflow">if</span> (caster)</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            {</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                <span class="comment">// Glyphs increasing damage cap</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                <a class="code" href="../../da/db7/class_unit.html#adcdd87d0c137619dfc869536c1315dd7">Unit::AuraEffectList</a> <span class="keyword">const</span>&amp; overrideClassScripts = caster-&gt;<a class="code" href="../../da/db7/class_unit.html#af00ac6c4dc7e639ac646fdafef336e85">GetAuraEffectsByType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799aee9829857fab1a5438db7a7fdf8806fa">SPELL_AURA_OVERRIDE_CLASS_SCRIPTS</a>);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                <span class="keywordflow">for</span> (Unit::AuraEffectList::const_iterator itr = overrideClassScripts.begin(); itr != overrideClassScripts.end(); ++itr)</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                {</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                    <span class="keywordflow">if</span> ((*itr)-&gt;IsAffectedOnSpell(<a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>))</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                    {</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                        <span class="comment">// Glyph of Fear, Glyph of Frost nova and similar auras</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                        <span class="keywordflow">if</span> ((*itr)-&gt;GetMiscValue() == 7801)</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                        {</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                            <a class="code" href="../../d9/de9/src_2common_2_utilities_2util_8h.html#a53176b459b4462b058b2a1be47ef82ee">AddPct</a>(amount, (*itr)-&gt;GetAmount());</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                        }</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                    }</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                }</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            }</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ab7b51e8dff5aaafa4617c9fdde043b08">SPELL_AURA_SCHOOL_ABSORB</a>:</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a034172ccdcc57a664eff33cfbe475f55">SPELL_AURA_MANA_SHIELD</a>:</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            <a class="code" href="../../da/df1/class_aura_effect.html#a334378fa304471045fd273f4d845c8dd">m_canBeRecalculated</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a79fed7b57d432e3ad0df6492f387c8b4">SPELL_AURA_MOD_DAMAGE_PERCENT_DONE</a>:</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            <span class="comment">// Titan&#39;s Grip</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;            <span class="keywordflow">if</span> (!caster)</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>() == 49152 &amp;&amp; caster-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>())</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            {</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                <a class="code" href="../../dc/d32/class_item.html">Item</a>* item1 = caster-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#ac8e55e9ca3aec15337a7a952aa8efac8">GetWeaponForAttack</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                <a class="code" href="../../dc/d32/class_item.html">Item</a>* item2 = caster-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#ac8e55e9ca3aec15337a7a952aa8efac8">GetWeaponForAttack</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa052681ec165e5b5e3edcf2089607ae67">OFF_ATTACK</a>);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160; </div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                <span class="keywordflow">if</span> (item1 &amp;&amp; item2 &amp;&amp; (item1-&gt;<a class="code" href="../../dc/d32/class_item.html#a55223032f2942a6f46b10053afe8c73c">GetTemplate</a>()-&gt;<a class="code" href="../../da/d61/struct_item_template.html#ac47429e999906b62258c7ade930efcbf">InventoryType</a> == <a class="code" href="../../d1/d9e/_item_template_8h.html#a2793ea198e8b328078cf49008fa1d5b1aa6021d97341d71ee92c4bdd366c1491d">INVTYPE_2HWEAPON</a> || item2-&gt;<a class="code" href="../../dc/d32/class_item.html#a55223032f2942a6f46b10053afe8c73c">GetTemplate</a>()-&gt;<a class="code" href="../../da/d61/struct_item_template.html#ac47429e999906b62258c7ade930efcbf">InventoryType</a> == <a class="code" href="../../d1/d9e/_item_template_8h.html#a2793ea198e8b328078cf49008fa1d5b1aa6021d97341d71ee92c4bdd366c1491d">INVTYPE_2HWEAPON</a>))</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                    amount = -10;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                    amount = 0;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;            }</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    }</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160; </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="comment">// xinef: save base amount, before calculating sp etc. Used for Unit::CastDelayedSpellWithPeriodicAmount</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <a class="code" href="../../da/df1/class_aura_effect.html#a04d3cc9ebda15ebf8f10650864d0724a">SetOldAmount</a>(amount * <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;GetStackAmount());</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#a38c31b87dea32024c55f15d37faa93da">CallScriptEffectCalcAmountHandlers</a>(<span class="keyword">this</span>, amount, <a class="code" href="../../da/df1/class_aura_effect.html#a334378fa304471045fd273f4d845c8dd">m_canBeRecalculated</a>);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160; </div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="comment">// Xinef: Periodic auras</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="keywordflow">if</span> (caster)</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        <span class="keywordflow">switch</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>())</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        {</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a11166673929d2fda5967add284832fad">SPELL_AURA_PERIODIC_DAMAGE</a>:</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ac84a600c9fc81cbda953c9f64074ab9f">SPELL_AURA_PERIODIC_LEECH</a>:</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                <span class="comment">// xinef: save caster depending auras, always pass 1 as stack amount, effect will be multiplicated at the end of the function by correct value!</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;GetType() == <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#ade4e7c2cbd17c45015f9f70c2a5400b2a9db32fb1dd13d77afd835d5bb6f5d379">UNIT_AURA_TYPE</a>)</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                    amount = caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a0df9b48b0adee2815e7f9299ff615d46">SpellDamageBonusDone</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;GetUnitOwner(), <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), amount, <a class="code" href="../../d5/d32/_unit_8h.html#aff59f402d05917ab1de0c5f6bf148ea4a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>, <a class="code" href="../../da/df1/class_aura_effect.html#a81665a31d5e4a49027abd82be607a736">GetPctMods</a>(), 1);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a6442a4a379f82e2f08734296e1e21c9f">SPELL_AURA_PERIODIC_HEAL</a>:</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;GetType() == <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#ade4e7c2cbd17c45015f9f70c2a5400b2a9db32fb1dd13d77afd835d5bb6f5d379">UNIT_AURA_TYPE</a>)</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                    amount = caster-&gt;<a class="code" href="../../da/db7/class_unit.html#ae7c8abdd1c8486013192de0974a42415">SpellHealingBonusDone</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;GetUnitOwner(), <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), amount, <a class="code" href="../../d5/d32/_unit_8h.html#aff59f402d05917ab1de0c5f6bf148ea4a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>, <a class="code" href="../../da/df1/class_aura_effect.html#a81665a31d5e4a49027abd82be607a736">GetPctMods</a>(), 1);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a221e08dbedc5adf62f8ab5549bff2c77">SPELL_AURA_DAMAGE_SHIELD</a>:</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;GetType() == <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#ade4e7c2cbd17c45015f9f70c2a5400b2a9db32fb1dd13d77afd835d5bb6f5d379">UNIT_AURA_TYPE</a>)</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                    amount = caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a0df9b48b0adee2815e7f9299ff615d46">SpellDamageBonusDone</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;GetUnitOwner(), <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), amount, <a class="code" href="../../d5/d32/_unit_8h.html#aff59f402d05917ab1de0c5f6bf148ea4a9308d3cdd6446af40814a12302809f54">SPELL_DIRECT_DAMAGE</a>, 0.0f, 1);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        }</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160; </div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    amount *= <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#aae0b7e0da61a681e67a19b6d23c2cee6">GetStackAmount</a>();</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="keywordflow">return</span> amount;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;}</div>
<div class="ttc" id="a_d_b_c_stores_8cpp_html_a4b7782641d455ad5070f1aba070beae9"><div class="ttname"><a href="../../dd/d17/_d_b_c_stores_8cpp.html#a4b7782641d455ad5070f1aba070beae9">sSpellItemEnchantmentStore</a></div><div class="ttdeci">DBCStorage&lt; SpellItemEnchantmentEntry &gt; sSpellItemEnchantmentStore(SpellItemEnchantmentfmt)</div></div>
<div class="ttc" id="a_d_b_c_stores_8cpp_html_aa64c2b1aad757429cacc3de31f69c0a3"><div class="ttname"><a href="../../dd/d17/_d_b_c_stores_8cpp.html#aa64c2b1aad757429cacc3de31f69c0a3">sItemRandomSuffixStore</a></div><div class="ttdeci">DBCStorage&lt; ItemRandomSuffixEntry &gt; sItemRandomSuffixStore(ItemRandomSuffixfmt)</div></div>
<div class="ttc" id="a_d_b_c_structure_8h_html_ab66cd5828c451f68f55f1b054c29a8fc"><div class="ttname"><a href="../../d1/d22/_d_b_c_structure_8h.html#ab66cd5828c451f68f55f1b054c29a8fc">MAX_SPELL_ITEM_ENCHANTMENT_EFFECTS</a></div><div class="ttdeci">#define MAX_SPELL_ITEM_ENCHANTMENT_EFFECTS</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/_d_b_c_structure_8h_source.html#l01765">DBCStructure.h:1765</a></div></div>
<div class="ttc" id="a_d_b_c_structure_8h_html_af0d8d6c7748de71fbd87ae5d02985404"><div class="ttname"><a href="../../d1/d22/_d_b_c_structure_8h.html#af0d8d6c7748de71fbd87ae5d02985404">MAX_ITEM_ENCHANTMENT_EFFECTS</a></div><div class="ttdeci">#define MAX_ITEM_ENCHANTMENT_EFFECTS</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/_d_b_c_structure_8h_source.html#l01146">DBCStructure.h:1146</a></div></div>
<div class="ttc" id="a_define_8h_html_a0bf9964a3ce962c07ad3d8b5432bbbcd"><div class="ttname"><a href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a></div><div class="ttdeci">std::int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d35/_define_8h_source.html#l00110">Define.h:110</a></div></div>
<div class="ttc" id="a_item_template_8h_html_a2793ea198e8b328078cf49008fa1d5b1aa6021d97341d71ee92c4bdd366c1491d"><div class="ttname"><a href="../../d1/d9e/_item_template_8h.html#a2793ea198e8b328078cf49008fa1d5b1aa6021d97341d71ee92c4bdd366c1491d">INVTYPE_2HWEAPON</a></div><div class="ttdeci">@ INVTYPE_2HWEAPON</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d9e/_item_template_8h_source.html#l00282">ItemTemplate.h:282</a></div></div>
<div class="ttc" id="a_matrix_8h_html_aaf9f9f8a87c718439346b4e96107f5e9"><div class="ttname"><a href="../../d0/d45/_matrix_8h.html#aaf9f9f8a87c718439346b4e96107f5e9">abs</a></div><div class="ttdeci">G3D::Matrix abs(const G3D::Matrix &amp;M)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d45/_matrix_8h_source.html#l00632">Matrix.h:632</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a034172ccdcc57a664eff33cfbe475f55"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a034172ccdcc57a664eff33cfbe475f55">SPELL_AURA_MANA_SHIELD</a></div><div class="ttdeci">@ SPELL_AURA_MANA_SHIELD</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00160">SpellAuraDefines.h:160</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a11166673929d2fda5967add284832fad"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a11166673929d2fda5967add284832fad">SPELL_AURA_PERIODIC_DAMAGE</a></div><div class="ttdeci">@ SPELL_AURA_PERIODIC_DAMAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00066">SpellAuraDefines.h:66</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a221e08dbedc5adf62f8ab5549bff2c77"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a221e08dbedc5adf62f8ab5549bff2c77">SPELL_AURA_DAMAGE_SHIELD</a></div><div class="ttdeci">@ SPELL_AURA_DAMAGE_SHIELD</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00078">SpellAuraDefines.h:78</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a3c6e04ab343a9f5ef767f8e8dd71af5b"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a3c6e04ab343a9f5ef767f8e8dd71af5b">SPELL_AURA_PROC_TRIGGER_SPELL</a></div><div class="ttdeci">@ SPELL_AURA_PROC_TRIGGER_SPELL</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00105">SpellAuraDefines.h:105</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a44cf043145f5a78c5a4e36ecff8a034d"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a44cf043145f5a78c5a4e36ecff8a034d">SPELL_AURA_MOD_FEAR</a></div><div class="ttdeci">@ SPELL_AURA_MOD_FEAR</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00070">SpellAuraDefines.h:70</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a6442a4a379f82e2f08734296e1e21c9f"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a6442a4a379f82e2f08734296e1e21c9f">SPELL_AURA_PERIODIC_HEAL</a></div><div class="ttdeci">@ SPELL_AURA_PERIODIC_HEAL</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00071">SpellAuraDefines.h:71</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a79fed7b57d432e3ad0df6492f387c8b4"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a79fed7b57d432e3ad0df6492f387c8b4">SPELL_AURA_MOD_DAMAGE_PERCENT_DONE</a></div><div class="ttdeci">@ SPELL_AURA_MOD_DAMAGE_PERCENT_DONE</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00142">SpellAuraDefines.h:142</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a833a8773139c4fdffb24499f28e98c63"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a833a8773139c4fdffb24499f28e98c63">SPELL_AURA_MOD_ROOT</a></div><div class="ttdeci">@ SPELL_AURA_MOD_ROOT</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00089">SpellAuraDefines.h:89</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799ab4e25ba6068fba0c5d7c5ac8adbbf8fa"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ab4e25ba6068fba0c5d7c5ac8adbbf8fa">SPELL_AURA_TRANSFORM</a></div><div class="ttdeci">@ SPELL_AURA_TRANSFORM</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00119">SpellAuraDefines.h:119</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799ab7b51e8dff5aaafa4617c9fdde043b08"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ab7b51e8dff5aaafa4617c9fdde043b08">SPELL_AURA_SCHOOL_ABSORB</a></div><div class="ttdeci">@ SPELL_AURA_SCHOOL_ABSORB</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00132">SpellAuraDefines.h:132</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799ac84a600c9fc81cbda953c9f64074ab9f"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ac84a600c9fc81cbda953c9f64074ab9f">SPELL_AURA_PERIODIC_LEECH</a></div><div class="ttdeci">@ SPELL_AURA_PERIODIC_LEECH</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00116">SpellAuraDefines.h:116</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799adaa58e2c604243da285d64f4a95b42f7"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799adaa58e2c604243da285d64f4a95b42f7">SPELL_AURA_MOD_CONFUSE</a></div><div class="ttdeci">@ SPELL_AURA_MOD_CONFUSE</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00068">SpellAuraDefines.h:68</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799aee9829857fab1a5438db7a7fdf8806fa"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799aee9829857fab1a5438db7a7fdf8806fa">SPELL_AURA_OVERRIDE_CLASS_SCRIPTS</a></div><div class="ttdeci">@ SPELL_AURA_OVERRIDE_CLASS_SCRIPTS</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00175">SpellAuraDefines.h:175</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799afdf00dd634aaa25017ad329f58bd6cfd"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799afdf00dd634aaa25017ad329f58bd6cfd">SPELL_AURA_MOD_STUN</a></div><div class="ttdeci">@ SPELL_AURA_MOD_STUN</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00075">SpellAuraDefines.h:75</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_ade4e7c2cbd17c45015f9f70c2a5400b2a9db32fb1dd13d77afd835d5bb6f5d379"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#ade4e7c2cbd17c45015f9f70c2a5400b2a9db32fb1dd13d77afd835d5bb6f5d379">UNIT_AURA_TYPE</a></div><div class="ttdeci">@ UNIT_AURA_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00385">SpellAuraDefines.h:385</a></div></div>
<div class="ttc" id="a_unit_8h_html_a2a35652af7129b6f139b0f7a2af1876aa052681ec165e5b5e3edcf2089607ae67"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa052681ec165e5b5e3edcf2089607ae67">OFF_ATTACK</a></div><div class="ttdeci">@ OFF_ATTACK</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00556">Unit.h:556</a></div></div>
<div class="ttc" id="a_unit_8h_html_aff59f402d05917ab1de0c5f6bf148ea4a87fdcd2ffa8f71b49da9e0cfd4fb893f"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#aff59f402d05917ab1de0c5f6bf148ea4a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a></div><div class="ttdeci">@ DOT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00596">Unit.h:596</a></div></div>
<div class="ttc" id="a_unit_8h_html_aff59f402d05917ab1de0c5f6bf148ea4a9308d3cdd6446af40814a12302809f54"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#aff59f402d05917ab1de0c5f6bf148ea4a9308d3cdd6446af40814a12302809f54">SPELL_DIRECT_DAMAGE</a></div><div class="ttdeci">@ SPELL_DIRECT_DAMAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00595">Unit.h:595</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a04d3cc9ebda15ebf8f10650864d0724a"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a04d3cc9ebda15ebf8f10650864d0724a">AuraEffect::SetOldAmount</a></div><div class="ttdeci">void SetOldAmount(int32 amount)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00109">SpellAuraEffects.h:109</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a120cf8a45a3c816e4ef588733fa812e5"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">AuraEffect::GetAuraType</a></div><div class="ttdeci">AuraType GetAuraType() const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00446">SpellAuraEffects.cpp:446</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a81665a31d5e4a49027abd82be607a736"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a81665a31d5e4a49027abd82be607a736">AuraEffect::GetPctMods</a></div><div class="ttdeci">float GetPctMods() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00104">SpellAuraEffects.h:104</a></div></div>
<div class="ttc" id="aclass_aura_html_a38c31b87dea32024c55f15d37faa93da"><div class="ttname"><a href="../../d2/dde/class_aura.html#a38c31b87dea32024c55f15d37faa93da">Aura::CallScriptEffectCalcAmountHandlers</a></div><div class="ttdeci">void CallScriptEffectCalcAmountHandlers(AuraEffect const *aurEff, int32 &amp;amount, bool &amp;canBeRecalculated)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/_spell_auras_8cpp_source.html#l02434">SpellAuras.cpp:2434</a></div></div>
<div class="ttc" id="aclass_aura_html_aae0b7e0da61a681e67a19b6d23c2cee6"><div class="ttname"><a href="../../d2/dde/class_aura.html#aae0b7e0da61a681e67a19b6d23c2cee6">Aura::GetStackAmount</a></div><div class="ttdeci">uint8 GetStackAmount() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dcf/_spell_auras_8h_source.html#l00147">SpellAuras.h:147</a></div></div>
<div class="ttc" id="aclass_item_html"><div class="ttname"><a href="../../dc/d32/class_item.html">Item</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d43/_item_8h_source.html#l00213">Item.h:214</a></div></div>
<div class="ttc" id="aclass_item_html_a55223032f2942a6f46b10053afe8c73c"><div class="ttname"><a href="../../dc/d32/class_item.html#a55223032f2942a6f46b10053afe8c73c">Item::GetTemplate</a></div><div class="ttdeci">ItemTemplate const  * GetTemplate() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d54/_item_8cpp_source.html#l00507">Item.cpp:507</a></div></div>
<div class="ttc" id="aclass_player_html_ac8e55e9ca3aec15337a7a952aa8efac8"><div class="ttname"><a href="../../d8/d53/class_player.html#ac8e55e9ca3aec15337a7a952aa8efac8">Player::GetWeaponForAttack</a></div><div class="ttdeci">Item * GetWeaponForAttack(WeaponAttackType attackType, bool useable=false) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d16/_player_storage_8cpp_source.html#l00516">PlayerStorage.cpp:516</a></div></div>
<div class="ttc" id="aclass_spell_info_html_a49bc14059c2bd3785231c52e0d54d382"><div class="ttname"><a href="../../d4/d7d/class_spell_info.html#a49bc14059c2bd3785231c52e0d54d382">SpellInfo::Id</a></div><div class="ttdeci">uint32 Id</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d70/_spell_info_8h_source.html#l00315">SpellInfo.h:315</a></div></div>
<div class="ttc" id="aclass_spell_info_html_a7909fc70161065f6107211ee8ed3c6bf"><div class="ttname"><a href="../../d4/d7d/class_spell_info.html#a7909fc70161065f6107211ee8ed3c6bf">SpellInfo::ProcFlags</a></div><div class="ttdeci">uint32 ProcFlags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d70/_spell_info_8h_source.html#l00350">SpellInfo.h:350</a></div></div>
<div class="ttc" id="aclass_spell_info_html_aefe1e81c5922419ada55844bdb30e269"><div class="ttname"><a href="../../d4/d7d/class_spell_info.html#aefe1e81c5922419ada55844bdb30e269">SpellInfo::HasAura</a></div><div class="ttdeci">bool HasAura(AuraType aura) const</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7f/_spell_info_8cpp_source.html#l00876">SpellInfo.cpp:876</a></div></div>
<div class="ttc" id="aclass_unit_html_a0df9b48b0adee2815e7f9299ff615d46"><div class="ttname"><a href="../../da/db7/class_unit.html#a0df9b48b0adee2815e7f9299ff615d46">Unit::SpellDamageBonusDone</a></div><div class="ttdeci">uint32 SpellDamageBonusDone(Unit *victim, SpellInfo const *spellProto, uint32 pdamage, DamageEffectType damagetype, float TotalMod=0.0f, uint32 stack=1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l10988">Unit.cpp:10988</a></div></div>
<div class="ttc" id="aclass_unit_html_ae7c8abdd1c8486013192de0974a42415"><div class="ttname"><a href="../../da/db7/class_unit.html#ae7c8abdd1c8486013192de0974a42415">Unit::SpellHealingBonusDone</a></div><div class="ttdeci">uint32 SpellHealingBonusDone(Unit *victim, SpellInfo const *spellProto, uint32 healamount, DamageEffectType damagetype, float TotalMod=0.0f, uint32 stack=1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l11795">Unit.cpp:11795</a></div></div>
<div class="ttc" id="aclass_unit_html_af00ac6c4dc7e639ac646fdafef336e85"><div class="ttname"><a href="../../da/db7/class_unit.html#af00ac6c4dc7e639ac646fdafef336e85">Unit::GetAuraEffectsByType</a></div><div class="ttdeci">AuraEffectList const  &amp; GetAuraEffectsByType(AuraType type) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l02047">Unit.h:2047</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_ae911b90657d7162d47997c702af655a8"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#ae911b90657d7162d47997c702af655a8">G3D::uint32</a></div><div class="ttdeci">uint32_t uint32</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dfa/g3dmath_8h_source.html#l00168">g3dmath.h:168</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_af80d9dbc6fa48c9ff714c7158adb60ae"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#af80d9dbc6fa48c9ff714c7158adb60ae">G3D::int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dfa/g3dmath_8h_source.html#l00167">g3dmath.h:167</a></div></div>
<div class="ttc" id="asrc_2common_2_utilities_2util_8h_html_a53176b459b4462b058b2a1be47ef82ee"><div class="ttname"><a href="../../d9/de9/src_2common_2_utilities_2util_8h.html#a53176b459b4462b058b2a1be47ef82ee">AddPct</a></div><div class="ttdeci">T AddPct(T &amp;base, U pct)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/src_2common_2_utilities_2util_8h_source.html#l00104">Util.h:104</a></div></div>
<div class="ttc" id="astruct_item_random_suffix_entry_html"><div class="ttname"><a href="../../d3/da1/struct_item_random_suffix_entry.html">ItemRandomSuffixEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/_d_b_c_structure_8h_source.html#l01158">DBCStructure.h:1159</a></div></div>
<div class="ttc" id="astruct_item_random_suffix_entry_html_a45d752dfd00a75f69d919a88573ba4fc"><div class="ttname"><a href="../../d3/da1/struct_item_random_suffix_entry.html#a45d752dfd00a75f69d919a88573ba4fc">ItemRandomSuffixEntry::AllocationPct</a></div><div class="ttdeci">std::array&lt; uint32, MAX_ITEM_ENCHANTMENT_EFFECTS &gt; AllocationPct</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/_d_b_c_structure_8h_source.html#l01166">DBCStructure.h:1166</a></div></div>
<div class="ttc" id="astruct_item_random_suffix_entry_html_a45e694082c1dbdeef5229561f617d584"><div class="ttname"><a href="../../d3/da1/struct_item_random_suffix_entry.html#a45e694082c1dbdeef5229561f617d584">ItemRandomSuffixEntry::Enchantment</a></div><div class="ttdeci">std::array&lt; uint32, MAX_ITEM_ENCHANTMENT_EFFECTS &gt; Enchantment</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/_d_b_c_structure_8h_source.html#l01164">DBCStructure.h:1164</a></div></div>
<div class="ttc" id="astruct_item_template_html_ac47429e999906b62258c7ade930efcbf"><div class="ttname"><a href="../../da/d61/struct_item_template.html#ac47429e999906b62258c7ade930efcbf">ItemTemplate::InventoryType</a></div><div class="ttdeci">uint32 InventoryType</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d9e/_item_template_8h_source.html#l00641">ItemTemplate.h:641</a></div></div>
<div class="ttc" id="astruct_spell_item_enchantment_entry_html"><div class="ttname"><a href="../../d1/d2f/struct_spell_item_enchantment_entry.html">SpellItemEnchantmentEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/_d_b_c_structure_8h_source.html#l01767">DBCStructure.h:1768</a></div></div>
<div class="ttc" id="astruct_spell_item_enchantment_entry_html_a694edc79cf8ba571338bff2a3aad512d"><div class="ttname"><a href="../../d1/d2f/struct_spell_item_enchantment_entry.html#a694edc79cf8ba571338bff2a3aad512d">SpellItemEnchantmentEntry::spellid</a></div><div class="ttdeci">uint32 spellid[MAX_SPELL_ITEM_ENCHANTMENT_EFFECTS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/_d_b_c_structure_8h_source.html#l01774">DBCStructure.h:1774</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d0/d45/_matrix_8h_source.html#l00632">abs()</a>, <a class="el" href="../../d9/de9/src_2common_2_utilities_2util_8h_source.html#l00104">AddPct()</a>, <a class="el" href="../../d1/d22/_d_b_c_structure_8h_source.html#l01166">ItemRandomSuffixEntry::AllocationPct</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00555">BASE_ATTACK</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l02434">Aura::CallScriptEffectCalcAmountHandlers()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00596">DOT</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00387">SpellInfo::Effects</a>, <a class="el" href="../../d1/d22/_d_b_c_structure_8h_source.html#l01164">ItemRandomSuffixEntry::Enchantment</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02047">Unit::GetAuraEffectsByType()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00446">GetAuraType()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">GetBase()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00103">Aura::GetCastItemGUID()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">GetId()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00104">GetPctMods()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00147">Aura::GetStackAmount()</a>, <a class="el" href="../../db/d54/_item_8cpp_source.html#l00507">Item::GetTemplate()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l00476">Aura::GetType()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00108">Aura::GetUnitOwner()</a>, <a class="el" href="../../d4/d16/_player_storage_8cpp_source.html#l00516">Player::GetWeaponForAttack()</a>, <a class="el" href="../../da/d7f/_spell_info_8cpp_source.html#l00876">SpellInfo::HasAura()</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00315">SpellInfo::Id</a>, <a class="el" href="../../d1/d9e/_item_template_8h_source.html#l00641">ItemTemplate::InventoryType</a>, <a class="el" href="../../d1/d9e/_item_template_8h_source.html#l00282">INVTYPE_2HWEAPON</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00116">m_baseAmount</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00138">m_canBeRecalculated</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00137">m_effIndex</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00115">m_spellInfo</a>, <a class="el" href="../../d1/d22/_d_b_c_structure_8h_source.html#l01146">MAX_ITEM_ENCHANTMENT_EFFECTS</a>, <a class="el" href="../../d1/d22/_d_b_c_structure_8h_source.html#l01765">MAX_SPELL_ITEM_ENCHANTMENT_EFFECTS</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00556">OFF_ATTACK</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00350">SpellInfo::ProcFlags</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00109">SetOldAmount()</a>, <a class="el" href="../../dd/d17/_d_b_c_stores_8cpp.html#aa64c2b1aad757429cacc3de31f69c0a3">sItemRandomSuffixStore</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00078">SPELL_AURA_DAMAGE_SHIELD</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00160">SPELL_AURA_MANA_SHIELD</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00068">SPELL_AURA_MOD_CONFUSE</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00142">SPELL_AURA_MOD_DAMAGE_PERCENT_DONE</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00070">SPELL_AURA_MOD_FEAR</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00089">SPELL_AURA_MOD_ROOT</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00075">SPELL_AURA_MOD_STUN</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00175">SPELL_AURA_OVERRIDE_CLASS_SCRIPTS</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00066">SPELL_AURA_PERIODIC_DAMAGE</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00071">SPELL_AURA_PERIODIC_HEAL</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00116">SPELL_AURA_PERIODIC_LEECH</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00105">SPELL_AURA_PROC_TRIGGER_SPELL</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00132">SPELL_AURA_SCHOOL_ABSORB</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00119">SPELL_AURA_TRANSFORM</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00595">SPELL_DIRECT_DAMAGE</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l10988">Unit::SpellDamageBonusDone()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l11795">Unit::SpellHealingBonusDone()</a>, <a class="el" href="../../d1/d22/_d_b_c_structure_8h_source.html#l01774">SpellItemEnchantmentEntry::spellid</a>, <a class="el" href="../../dd/d17/_d_b_c_stores_8cpp.html#a4b7782641d455ad5070f1aba070beae9">sSpellItemEnchantmentStore</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, and <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00385">UNIT_AURA_TYPE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00382">AuraEffect()</a>, <a class="el" href="../../d6/d51/spell__dk_8cpp_source.html#l00801">spell_dk_pet_scaling::HandlePeriodic()</a>, <a class="el" href="../../db/dee/spell__hunter_8cpp_source.html#l00230">spell_hun_generic_scaling::HandlePeriodic()</a>, <a class="el" href="../../d3/df8/spell__mage_8cpp_source.html#l00309">spell_mage_pet_scaling::HandlePeriodic()</a>, <a class="el" href="../../df/dd5/spell__shaman_8cpp_source.html#l00236">spell_sha_feral_spirit_scaling::HandlePeriodic()</a>, <a class="el" href="../../d1/dd5/spell__warlock_8cpp_source.html#l00333">spell_warl_generic_scaling::HandlePeriodic()</a>, and <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00068">RecalculateAmount()</a>.</p>

</div>
</div>
<a id="a5b0a6694f62bf72c41a1f461f9894581"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b0a6694f62bf72c41a1f461f9894581">&#9670;&nbsp;</a></span>CalculatePeriodic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::CalculatePeriodic </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>create</em> = <code><a class="el" href="../../d9/d5e/stdbool_8h.html#a65e9886d74aaee76545e83dd09011727">false</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>load</em> = <code><a class="el" href="../../d9/d5e/stdbool_8h.html#a65e9886d74aaee76545e83dd09011727">false</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00586">586</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;{</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <a class="code" href="../../da/df1/class_aura_effect.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a> = <a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code" href="../../da/df1/class_aura_effect.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>].Amplitude;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160; </div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="comment">// prepare periodics</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>())</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    {</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a4f1feb3950d2776a74c938c366adbbdf">SPELL_AURA_OBS_MOD_POWER</a>:</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            <span class="comment">// 3 spells have no amplitude set</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../da/df1/class_aura_effect.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a>)</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                <a class="code" href="../../da/df1/class_aura_effect.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a> = 1 * <a class="code" href="../../d1/d8b/src_2common_2common_8h.html#a84190f79c8167211609f67284e066c58">IN_MILLISECONDS</a>;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            [[fallthrough]]; <span class="comment">// TODO: Not sure whether the fallthrough was a mistake (forgetting a break) or intended. This should be double-checked.</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a11166673929d2fda5967add284832fad">SPELL_AURA_PERIODIC_DAMAGE</a>:</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a6442a4a379f82e2f08734296e1e21c9f">SPELL_AURA_PERIODIC_HEAL</a>:</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a2616d80ed4951b4ff860a0e0e2a98da0">SPELL_AURA_OBS_MOD_HEALTH</a>:</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799af51e1877e096bbfd69505e5ab4fc69ad">SPELL_AURA_PERIODIC_TRIGGER_SPELL</a>:</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ab9f377f6e107ad1633d32a22da2ec7d2">SPELL_AURA_PERIODIC_ENERGIZE</a>:</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ac84a600c9fc81cbda953c9f64074ab9f">SPELL_AURA_PERIODIC_LEECH</a>:</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a2b064a34862eb2f85ec873398d787012">SPELL_AURA_PERIODIC_HEALTH_FUNNEL</a>:</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a2eb3f6e6a49bc0b70fa9726b1fa12bb3">SPELL_AURA_PERIODIC_MANA_LEECH</a>:</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a65c8ec2c8667d6c49c278491c113a374">SPELL_AURA_PERIODIC_DAMAGE_PERCENT</a>:</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ad06611922c0cf903c24b220140daacab">SPELL_AURA_POWER_BURN</a>:</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799add498157825d0faca2c013bbcdfbae56">SPELL_AURA_PERIODIC_DUMMY</a>:</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ab6c4d806c60e94fec189c27a7a205576">SPELL_AURA_PERIODIC_TRIGGER_SPELL_WITH_VALUE</a>:</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            <a class="code" href="../../da/df1/class_aura_effect.html#ad6931b2764b92bc6c2a20b092c011f0a">m_isPeriodic</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    }</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160; </div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#abd4f379de7ed0890f28df1209aad70c7">CallScriptEffectCalcPeriodicHandlers</a>(<span class="keyword">this</span>, <a class="code" href="../../da/df1/class_aura_effect.html#ad6931b2764b92bc6c2a20b092c011f0a">m_isPeriodic</a>, <a class="code" href="../../da/df1/class_aura_effect.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a>);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160; </div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../da/df1/class_aura_effect.html#ad6931b2764b92bc6c2a20b092c011f0a">m_isPeriodic</a>)</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160; </div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="comment">// Xinef: fix broken data in dbc</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a> &lt;= 0)</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        <a class="code" href="../../da/df1/class_aura_effect.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a> = 1000;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160; </div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <a class="code" href="../../d8/d53/class_player.html">Player</a>* modOwner = caster ? caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a2e6a98844f96c211f47b911a2766ada8">GetSpellModOwner</a>() : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160; </div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="comment">// Apply casting time mods</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a>)</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        <span class="comment">// Apply periodic time mod</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <span class="keywordflow">if</span> (modOwner)</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            modOwner-&gt;<a class="code" href="../../d8/d53/class_player.html#abe45751f505290dc65dbc0d0fd2e0370">ApplySpellMod</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../d5/d32/_unit_8h.html#a39b60e1f12cca9b6873cb817e7717351ab3f74709d60168df2a2cc72b62da55cb">SPELLMOD_ACTIVATION_TIME</a>, <a class="code" href="../../da/df1/class_aura_effect.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a>);</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160; </div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        <span class="keywordflow">if</span> (caster)</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        {</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;            <span class="keywordflow">if</span> (caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a000570a88dd253d3746e6ff5ac1c918b">HasAuraTypeWithAffectMask</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a1191ab2524c100b0d91f8d63cee8e781">SPELL_AURA_PERIODIC_HASTE</a>, <a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>) || <a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a376aa62261a98289589839b821786adaa884cc9555b9162ae33956c5ded8cb1d7">SPELL_ATTR5_SPELL_HASTE_AFFECTS_PERIODIC</a>))</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                <a class="code" href="../../da/df1/class_aura_effect.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a> = <a class="code" href="../../df/de2/namespace_g3_d.html#af80d9dbc6fa48c9ff714c7158adb60ae">int32</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a> * caster-&gt;<a class="code" href="../../d8/d83/class_object.html#a8797257c31223076c1b76b4b1a6f8007">GetFloatValue</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a5662db4f743b497fc17de3f73e4e9235">UNIT_MOD_CAST_SPEED</a>));</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        }</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    }</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160; </div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="keywordflow">if</span> (load) <span class="comment">// aura loaded from db</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    {</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        <a class="code" href="../../da/df1/class_aura_effect.html#ab8c7fb50eac3482a162cbbacd64f1625">m_tickNumber</a> = <a class="code" href="../../da/df1/class_aura_effect.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a> ? <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#a5e79eaa33b5f9ae5aaa44a62d096d6fe">GetDuration</a>() / <a class="code" href="../../da/df1/class_aura_effect.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a> : 0;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        <a class="code" href="../../da/df1/class_aura_effect.html#a2d9b475cbf04d8597953802e1accc938">m_periodicTimer</a> = <a class="code" href="../../da/df1/class_aura_effect.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a> ? <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#a5e79eaa33b5f9ae5aaa44a62d096d6fe">GetDuration</a>() % <a class="code" href="../../da/df1/class_aura_effect.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a> : 0;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a376aa62261a98289589839b821786adaa1e5646f92d527da8a1a98bb0f14f3b86">SPELL_ATTR5_EXTRA_INITIAL_PERIOD</a>))</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;            ++<a class="code" href="../../da/df1/class_aura_effect.html#ab8c7fb50eac3482a162cbbacd64f1625">m_tickNumber</a>;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    }</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="keywordflow">else</span> <span class="comment">// aura just created or reapplied</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    {</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        <a class="code" href="../../da/df1/class_aura_effect.html#ab8c7fb50eac3482a162cbbacd64f1625">m_tickNumber</a> = 0;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        <span class="comment">// reset periodic timer on aura create or on reapply when aura isn&#39;t dot</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        <span class="comment">// possibly we should not reset periodic timers only when aura is triggered by proc</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        <span class="comment">// or maybe there&#39;s a spell attribute somewhere</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        <span class="keywordtype">bool</span> resetPeriodicTimer = create</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                                  || ((<a class="code" href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>() != <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a11166673929d2fda5967add284832fad">SPELL_AURA_PERIODIC_DAMAGE</a>) &amp;&amp; (<a class="code" href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>() != <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a65c8ec2c8667d6c49c278491c113a374">SPELL_AURA_PERIODIC_DAMAGE_PERCENT</a>));</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160; </div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        <span class="keywordflow">if</span> (resetPeriodicTimer)</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        {</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            <a class="code" href="../../da/df1/class_aura_effect.html#a2d9b475cbf04d8597953802e1accc938">m_periodicTimer</a> = 0;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            <span class="comment">// Start periodic on next tick or at aura apply</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a>)</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            {</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a376aa62261a98289589839b821786adaa1e5646f92d527da8a1a98bb0f14f3b86">SPELL_ATTR5_EXTRA_INITIAL_PERIOD</a>))</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                    <a class="code" href="../../da/df1/class_aura_effect.html#a2d9b475cbf04d8597953802e1accc938">m_periodicTimer</a> += <a class="code" href="../../da/df1/class_aura_effect.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a>;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (caster &amp;&amp; caster-&gt;<a class="code" href="../../da/db7/class_unit.html#ae1ce57b02474672763481af5c4e7ef6f">IsTotem</a>()) <span class="comment">// for totems only ;d</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                {</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                    <a class="code" href="../../da/df1/class_aura_effect.html#a2d9b475cbf04d8597953802e1accc938">m_periodicTimer</a> = 100; <span class="comment">// make it ALMOST instant</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                    <span class="keywordflow">if</span> (!<a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#ae24c050668e78ef9d8728e6b5bd77c12">IsPassive</a>())</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                        <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#a99930c42ad9f6e002ffe6de5e5fbe59b">SetDuration</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#a5e79eaa33b5f9ae5aaa44a62d096d6fe">GetDuration</a>() + 100);</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                }</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;            }</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        }</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    }</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_a376aa62261a98289589839b821786adaa1e5646f92d527da8a1a98bb0f14f3b86"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a376aa62261a98289589839b821786adaa1e5646f92d527da8a1a98bb0f14f3b86">SPELL_ATTR5_EXTRA_INITIAL_PERIOD</a></div><div class="ttdeci">@ SPELL_ATTR5_EXTRA_INITIAL_PERIOD</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00548">SharedDefines.h:548</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a376aa62261a98289589839b821786adaa884cc9555b9162ae33956c5ded8cb1d7"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a376aa62261a98289589839b821786adaa884cc9555b9162ae33956c5ded8cb1d7">SPELL_ATTR5_SPELL_HASTE_AFFECTS_PERIODIC</a></div><div class="ttdeci">@ SPELL_ATTR5_SPELL_HASTE_AFFECTS_PERIODIC</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00552">SharedDefines.h:552</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a1191ab2524c100b0d91f8d63cee8e781"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a1191ab2524c100b0d91f8d63cee8e781">SPELL_AURA_PERIODIC_HASTE</a></div><div class="ttdeci">@ SPELL_AURA_PERIODIC_HASTE</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00379">SpellAuraDefines.h:379</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a2616d80ed4951b4ff860a0e0e2a98da0"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a2616d80ed4951b4ff860a0e0e2a98da0">SPELL_AURA_OBS_MOD_HEALTH</a></div><div class="ttdeci">@ SPELL_AURA_OBS_MOD_HEALTH</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00083">SpellAuraDefines.h:83</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a2b064a34862eb2f85ec873398d787012"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a2b064a34862eb2f85ec873398d787012">SPELL_AURA_PERIODIC_HEALTH_FUNNEL</a></div><div class="ttdeci">@ SPELL_AURA_PERIODIC_HEALTH_FUNNEL</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00125">SpellAuraDefines.h:125</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a2eb3f6e6a49bc0b70fa9726b1fa12bb3"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a2eb3f6e6a49bc0b70fa9726b1fa12bb3">SPELL_AURA_PERIODIC_MANA_LEECH</a></div><div class="ttdeci">@ SPELL_AURA_PERIODIC_MANA_LEECH</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00127">SpellAuraDefines.h:127</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a4f1feb3950d2776a74c938c366adbbdf"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a4f1feb3950d2776a74c938c366adbbdf">SPELL_AURA_OBS_MOD_POWER</a></div><div class="ttdeci">@ SPELL_AURA_OBS_MOD_POWER</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00084">SpellAuraDefines.h:84</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a65c8ec2c8667d6c49c278491c113a374"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a65c8ec2c8667d6c49c278491c113a374">SPELL_AURA_PERIODIC_DAMAGE_PERCENT</a></div><div class="ttdeci">@ SPELL_AURA_PERIODIC_DAMAGE_PERCENT</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00152">SpellAuraDefines.h:152</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799ab6c4d806c60e94fec189c27a7a205576"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ab6c4d806c60e94fec189c27a7a205576">SPELL_AURA_PERIODIC_TRIGGER_SPELL_WITH_VALUE</a></div><div class="ttdeci">@ SPELL_AURA_PERIODIC_TRIGGER_SPELL_WITH_VALUE</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00290">SpellAuraDefines.h:290</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799ab9f377f6e107ad1633d32a22da2ec7d2"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ab9f377f6e107ad1633d32a22da2ec7d2">SPELL_AURA_PERIODIC_ENERGIZE</a></div><div class="ttdeci">@ SPELL_AURA_PERIODIC_ENERGIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00087">SpellAuraDefines.h:87</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799ad06611922c0cf903c24b220140daacab"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ad06611922c0cf903c24b220140daacab">SPELL_AURA_POWER_BURN</a></div><div class="ttdeci">@ SPELL_AURA_POWER_BURN</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00225">SpellAuraDefines.h:225</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799add498157825d0faca2c013bbcdfbae56"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799add498157825d0faca2c013bbcdfbae56">SPELL_AURA_PERIODIC_DUMMY</a></div><div class="ttdeci">@ SPELL_AURA_PERIODIC_DUMMY</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00289">SpellAuraDefines.h:289</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799af51e1877e096bbfd69505e5ab4fc69ad"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799af51e1877e096bbfd69505e5ab4fc69ad">SPELL_AURA_PERIODIC_TRIGGER_SPELL</a></div><div class="ttdeci">@ SPELL_AURA_PERIODIC_TRIGGER_SPELL</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00086">SpellAuraDefines.h:86</a></div></div>
<div class="ttc" id="a_unit_8h_html_a39b60e1f12cca9b6873cb817e7717351ab3f74709d60168df2a2cc72b62da55cb"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a39b60e1f12cca9b6873cb817e7717351ab3f74709d60168df2a2cc72b62da55cb">SPELLMOD_ACTIVATION_TIME</a></div><div class="ttdeci">@ SPELLMOD_ACTIVATION_TIME</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00104">Unit.h:104</a></div></div>
<div class="ttc" id="a_update_fields_8h_html_a0e42dc606678c9df7884e1aad621e881a5662db4f743b497fc17de3f73e4e9235"><div class="ttname"><a href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a5662db4f743b497fc17de3f73e4e9235">UNIT_MOD_CAST_SPEED</a></div><div class="ttdeci">@ UNIT_MOD_CAST_SPEED</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d65/_update_fields_8h_source.html#l00137">UpdateFields.h:137</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a9b7657d41ca8a463e12dca94fffdddbc"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a9b7657d41ca8a463e12dca94fffdddbc">AuraEffect::m_amplitude</a></div><div class="ttdeci">int32 m_amplitude</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00134">SpellAuraEffects.h:134</a></div></div>
<div class="ttc" id="aclass_aura_html_a5e79eaa33b5f9ae5aaa44a62d096d6fe"><div class="ttname"><a href="../../d2/dde/class_aura.html#a5e79eaa33b5f9ae5aaa44a62d096d6fe">Aura::GetDuration</a></div><div class="ttdeci">int32 GetDuration() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dcf/_spell_auras_8h_source.html#l00133">SpellAuras.h:133</a></div></div>
<div class="ttc" id="aclass_aura_html_a99930c42ad9f6e002ffe6de5e5fbe59b"><div class="ttname"><a href="../../d2/dde/class_aura.html#a99930c42ad9f6e002ffe6de5e5fbe59b">Aura::SetDuration</a></div><div class="ttdeci">void SetDuration(int32 duration, bool withMods=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/_spell_auras_8cpp_source.html#l00849">SpellAuras.cpp:849</a></div></div>
<div class="ttc" id="aclass_aura_html_abd4f379de7ed0890f28df1209aad70c7"><div class="ttname"><a href="../../d2/dde/class_aura.html#abd4f379de7ed0890f28df1209aad70c7">Aura::CallScriptEffectCalcPeriodicHandlers</a></div><div class="ttdeci">void CallScriptEffectCalcPeriodicHandlers(AuraEffect const *aurEff, bool &amp;isPeriodic, int32 &amp;amplitude)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/_spell_auras_8cpp_source.html#l02448">SpellAuras.cpp:2448</a></div></div>
<div class="ttc" id="aclass_object_html_a8797257c31223076c1b76b4b1a6f8007"><div class="ttname"><a href="../../d8/d83/class_object.html#a8797257c31223076c1b76b4b1a6f8007">Object::GetFloatValue</a></div><div class="ttdeci">float GetFloatValue(uint16 index) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/ded/_object_8cpp_source.html#l00312">Object.cpp:312</a></div></div>
<div class="ttc" id="aclass_player_html_abe45751f505290dc65dbc0d0fd2e0370"><div class="ttname"><a href="../../d8/d53/class_player.html#abe45751f505290dc65dbc0d0fd2e0370">Player::ApplySpellMod</a></div><div class="ttdeci">T ApplySpellMod(uint32 spellId, SpellModOp op, T &amp;basevalue, Spell *spell=nullptr, bool temporaryPet=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l02955">Player.h:2955</a></div></div>
<div class="ttc" id="aclass_spell_info_html_a975746d6b737abb063ea037327abfc5a"><div class="ttname"><a href="../../d4/d7d/class_spell_info.html#a975746d6b737abb063ea037327abfc5a">SpellInfo::HasAttribute</a></div><div class="ttdeci">bool HasAttribute(SpellAttr0 attribute) const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d70/_spell_info_8h_source.html#l00408">SpellInfo.h:408</a></div></div>
<div class="ttc" id="aclass_unit_html_a000570a88dd253d3746e6ff5ac1c918b"><div class="ttname"><a href="../../da/db7/class_unit.html#a000570a88dd253d3746e6ff5ac1c918b">Unit::HasAuraTypeWithAffectMask</a></div><div class="ttdeci">bool HasAuraTypeWithAffectMask(AuraType auratype, SpellInfo const *affectedSpell) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l05227">Unit.cpp:5227</a></div></div>
<div class="ttc" id="aclass_unit_html_ae1ce57b02474672763481af5c4e7ef6f"><div class="ttname"><a href="../../da/db7/class_unit.html#ae1ce57b02474672763481af5c4e7ef6f">Unit::IsTotem</a></div><div class="ttdeci">bool IsTotem() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01536">Unit.h:1536</a></div></div>
<div class="ttc" id="asrc_2common_2common_8h_html_a84190f79c8167211609f67284e066c58"><div class="ttname"><a href="../../d1/d8b/src_2common_2common_8h.html#a84190f79c8167211609f67284e066c58">IN_MILLISECONDS</a></div><div class="ttdeci">constexpr auto IN_MILLISECONDS</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8b/src_2common_2common_8h_source.html#l00062">Common.h:62</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d1/d39/_player_8h_source.html#l02955">Player::ApplySpellMod()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l02448">Aura::CallScriptEffectCalcPeriodicHandlers()</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00387">SpellInfo::Effects</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00446">GetAuraType()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">GetBase()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00133">Aura::GetDuration()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00312">Object::GetFloatValue()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">GetId()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l15937">Unit::GetSpellModOwner()</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00408">SpellInfo::HasAttribute()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05227">Unit::HasAuraTypeWithAffectMask()</a>, <a class="el" href="../../d1/d8b/src_2common_2common_8h_source.html#l00062">IN_MILLISECONDS</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l01034">Aura::IsPassive()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01536">Unit::IsTotem()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00134">m_amplitude</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00137">m_effIndex</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00139">m_isPeriodic</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00133">m_periodicTimer</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00115">m_spellInfo</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00135">m_tickNumber</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l00849">Aura::SetDuration()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00548">SPELL_ATTR5_EXTRA_INITIAL_PERIOD</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00552">SPELL_ATTR5_SPELL_HASTE_AFFECTS_PERIODIC</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00083">SPELL_AURA_OBS_MOD_HEALTH</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00084">SPELL_AURA_OBS_MOD_POWER</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00066">SPELL_AURA_PERIODIC_DAMAGE</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00152">SPELL_AURA_PERIODIC_DAMAGE_PERCENT</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00289">SPELL_AURA_PERIODIC_DUMMY</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00087">SPELL_AURA_PERIODIC_ENERGIZE</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00379">SPELL_AURA_PERIODIC_HASTE</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00071">SPELL_AURA_PERIODIC_HEAL</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00125">SPELL_AURA_PERIODIC_HEALTH_FUNNEL</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00116">SPELL_AURA_PERIODIC_LEECH</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00127">SPELL_AURA_PERIODIC_MANA_LEECH</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00086">SPELL_AURA_PERIODIC_TRIGGER_SPELL</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00290">SPELL_AURA_PERIODIC_TRIGGER_SPELL_WITH_VALUE</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00225">SPELL_AURA_POWER_BURN</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00104">SPELLMOD_ACTIVATION_TIME</a>, and <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00137">UNIT_MOD_CAST_SPEED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00382">AuraEffect()</a>, <a class="el" href="../../db/dc4/instance__shadowfang__keep_8cpp_source.html#l00135">spell_shadowfang_keep_haunting_spirits::spell_shadowfang_keep_haunting_spirits_AuraScript::HandleUpdatePeriodic()</a>, and <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l01191">Aura::SetLoadedState()</a>.</p>

</div>
</div>
<a id="ab0b3261b6c7f5ae45348d0113d24f1ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0b3261b6c7f5ae45348d0113d24f1ed">&#9670;&nbsp;</a></span>CalculatePeriodicData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::CalculatePeriodicData </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00571">571</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;{</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="comment">// xinef: save caster depending auras with pct mods</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;GetType() == <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#ade4e7c2cbd17c45015f9f70c2a5400b2a9db32fb1dd13d77afd835d5bb6f5d379">UNIT_AURA_TYPE</a> &amp;&amp; <a class="code" href="../../da/df1/class_aura_effect.html#a29cf330277aeb89d17d18f6e112f035b">GetCaster</a>())</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    {</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aefe1e81c5922419ada55844bdb30e269">HasAura</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a6442a4a379f82e2f08734296e1e21c9f">SPELL_AURA_PERIODIC_HEAL</a>))</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            <a class="code" href="../../da/df1/class_aura_effect.html#a8e00da47192a4d1c9139b037d07d565b">m_pctMods</a> = <a class="code" href="../../da/df1/class_aura_effect.html#a29cf330277aeb89d17d18f6e112f035b">GetCaster</a>()-&gt;<a class="code" href="../../da/db7/class_unit.html#ab2bce497cf360520a4c41d4949969f9c">SpellPctHealingModsDone</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;GetUnitOwner(), <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), <a class="code" href="../../d5/d32/_unit_8h.html#aff59f402d05917ab1de0c5f6bf148ea4a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aefe1e81c5922419ada55844bdb30e269">HasAura</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a11166673929d2fda5967add284832fad">SPELL_AURA_PERIODIC_DAMAGE</a>) || <a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aefe1e81c5922419ada55844bdb30e269">HasAura</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ac84a600c9fc81cbda953c9f64074ab9f">SPELL_AURA_PERIODIC_LEECH</a>))</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            <a class="code" href="../../da/df1/class_aura_effect.html#a8e00da47192a4d1c9139b037d07d565b">m_pctMods</a> = <a class="code" href="../../da/df1/class_aura_effect.html#a29cf330277aeb89d17d18f6e112f035b">GetCaster</a>()-&gt;<a class="code" href="../../da/db7/class_unit.html#ab8fb7aa2acf87e3b95ac9a8daf5dbaee">SpellPctDamageModsDone</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;GetUnitOwner(), <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), <a class="code" href="../../d5/d32/_unit_8h.html#aff59f402d05917ab1de0c5f6bf148ea4a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    }</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160; </div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a29cf330277aeb89d17d18f6e112f035b">GetCaster</a>())</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <a class="code" href="../../da/df1/class_aura_effect.html#aa5fa45a022f85bfea33ae5faf843cd69">SetCritChance</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a43dd810a38d13af5ffee45dc4f7d5aac">CalcPeriodicCritChance</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a29cf330277aeb89d17d18f6e112f035b">GetCaster</a>(), (<a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;GetType() == <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#ade4e7c2cbd17c45015f9f70c2a5400b2a9db32fb1dd13d77afd835d5bb6f5d379">UNIT_AURA_TYPE</a> ? <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;GetUnitOwner() : <span class="keyword">nullptr</span>)));</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;}</div>
<div class="ttc" id="aclass_aura_effect_html_a29cf330277aeb89d17d18f6e112f035b"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a29cf330277aeb89d17d18f6e112f035b">AuraEffect::GetCaster</a></div><div class="ttdeci">Unit * GetCaster() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00040">SpellAuraEffects.h:40</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a43dd810a38d13af5ffee45dc4f7d5aac"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a43dd810a38d13af5ffee45dc4f7d5aac">AuraEffect::CalcPeriodicCritChance</a></div><div class="ttdeci">float CalcPeriodicCritChance(Unit const *caster, Unit const *target) const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01029">SpellAuraEffects.cpp:1029</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a8e00da47192a4d1c9139b037d07d565b"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a8e00da47192a4d1c9139b037d07d565b">AuraEffect::m_pctMods</a></div><div class="ttdeci">float m_pctMods</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00122">SpellAuraEffects.h:122</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_aa5fa45a022f85bfea33ae5faf843cd69"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#aa5fa45a022f85bfea33ae5faf843cd69">AuraEffect::SetCritChance</a></div><div class="ttdeci">void SetCritChance(float crit)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00101">SpellAuraEffects.h:101</a></div></div>
<div class="ttc" id="aclass_unit_html_ab2bce497cf360520a4c41d4949969f9c"><div class="ttname"><a href="../../da/db7/class_unit.html#ab2bce497cf360520a4c41d4949969f9c">Unit::SpellPctHealingModsDone</a></div><div class="ttdeci">float SpellPctHealingModsDone(Unit *victim, SpellInfo const *spellProto, DamageEffectType damagetype)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l11703">Unit.cpp:11703</a></div></div>
<div class="ttc" id="aclass_unit_html_ab8fb7aa2acf87e3b95ac9a8daf5dbaee"><div class="ttname"><a href="../../da/db7/class_unit.html#ab8fb7aa2acf87e3b95ac9a8daf5dbaee">Unit::SpellPctDamageModsDone</a></div><div class="ttdeci">float SpellPctDamageModsDone(Unit *victim, SpellInfo const *spellProto, DamageEffectType damagetype)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l10657">Unit.cpp:10657</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01029">CalcPeriodicCritChance()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00596">DOT</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">GetBase()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00040">GetCaster()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l00476">Aura::GetType()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00108">Aura::GetUnitOwner()</a>, <a class="el" href="../../da/d7f/_spell_info_8cpp_source.html#l00876">SpellInfo::HasAura()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00122">m_pctMods</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00115">m_spellInfo</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00101">SetCritChance()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00066">SPELL_AURA_PERIODIC_DAMAGE</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00071">SPELL_AURA_PERIODIC_HEAL</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00116">SPELL_AURA_PERIODIC_LEECH</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l10657">Unit::SpellPctDamageModsDone()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l11703">Unit::SpellPctHealingModsDone()</a>, and <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00385">UNIT_AURA_TYPE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00382">AuraEffect()</a>.</p>

</div>
</div>
<a id="a5d248ef37c73049cf4df98b6fc1008fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d248ef37c73049cf4df98b6fc1008fe">&#9670;&nbsp;</a></span>CalculateSpellMod()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::CalculateSpellMod </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00676">676</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;{</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>())</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    {</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a50563ee6555455f041b81ce199ad1a4f">SPELL_AURA_ADD_FLAT_MODIFIER</a>:</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a2c530c4b7d2f3b77f65f62395bda9c4a">SPELL_AURA_ADD_PCT_MODIFIER</a>:</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../da/df1/class_aura_effect.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a>)</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            {</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                <a class="code" href="../../da/df1/class_aura_effect.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a> = <span class="keyword">new</span> <a class="code" href="../../d3/d39/struct_spell_modifier.html">SpellModifier</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>());</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                <a class="code" href="../../da/df1/class_aura_effect.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a>-&gt;<a class="code" href="../../d3/d39/struct_spell_modifier.html#a21d017f0c8d3108a0eb5f48798103356">op</a> = <a class="code" href="../../d5/d32/_unit_8h.html#a39b60e1f12cca9b6873cb817e7717351">SpellModOp</a>(<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160; </div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                <a class="code" href="../../da/df1/class_aura_effect.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a>-&gt;<a class="code" href="../../d3/d39/struct_spell_modifier.html#a22f64b9c021f5a87f30f01ef117ebb0b">type</a> = <a class="code" href="../../d1/d39/_player_8h.html#a946f1b98541e5df18b4b45f6fb144ce8">SpellModType</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>()); <span class="comment">// SpellModType value == spell aura types</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                <a class="code" href="../../da/df1/class_aura_effect.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a>-&gt;<a class="code" href="../../d3/d39/struct_spell_modifier.html#a465803efab27b2ba0a49c6571b65b908">spellId</a> = <a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>();</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                <a class="code" href="../../da/df1/class_aura_effect.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a>-&gt;<a class="code" href="../../d3/d39/struct_spell_modifier.html#aba1b01bf3486d61cc1876b03078a35ee">mask</a> = <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].SpellClassMask;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                <a class="code" href="../../da/df1/class_aura_effect.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a>-&gt;<a class="code" href="../../d3/d39/struct_spell_modifier.html#a1aaf71299c2dd27b58a049d252efdee8">charges</a> = <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#ab07705be94c0c10fce558c80d7208e0b">GetCharges</a>();</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;            }</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;            <a class="code" href="../../da/df1/class_aura_effect.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a>-&gt;<a class="code" href="../../d3/d39/struct_spell_modifier.html#a31742662ba8112c9e9b972897a928e57">value</a> = <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>();</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    }</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#a205938814ca394a9a229f4b4e80e54a6">CallScriptEffectCalcSpellModHandlers</a>(<span class="keyword">this</span>, <a class="code" href="../../da/df1/class_aura_effect.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a>);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;}</div>
<div class="ttc" id="a_player_8h_html_a946f1b98541e5df18b4b45f6fb144ce8"><div class="ttname"><a href="../../d1/d39/_player_8h.html#a946f1b98541e5df18b4b45f6fb144ce8">SpellModType</a></div><div class="ttdeci">SpellModType</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l00086">Player.h:87</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a2c530c4b7d2f3b77f65f62395bda9c4a"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a2c530c4b7d2f3b77f65f62395bda9c4a">SPELL_AURA_ADD_PCT_MODIFIER</a></div><div class="ttdeci">@ SPELL_AURA_ADD_PCT_MODIFIER</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00171">SpellAuraDefines.h:171</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a50563ee6555455f041b81ce199ad1a4f"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a50563ee6555455f041b81ce199ad1a4f">SPELL_AURA_ADD_FLAT_MODIFIER</a></div><div class="ttdeci">@ SPELL_AURA_ADD_FLAT_MODIFIER</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00170">SpellAuraDefines.h:170</a></div></div>
<div class="ttc" id="a_unit_8h_html_a39b60e1f12cca9b6873cb817e7717351"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a39b60e1f12cca9b6873cb817e7717351">SpellModOp</a></div><div class="ttdeci">SpellModOp</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00083">Unit.h:84</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_ab8c4811ced24cbd9b4afff1c22fbb1b0"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">AuraEffect::GetEffIndex</a></div><div class="ttdeci">uint32 GetEffIndex() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00049">SpellAuraEffects.h:49</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_afcf272bebf373ad3aebc03cce644cbee"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">AuraEffect::GetAmount</a></div><div class="ttdeci">int32 GetAmount() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">SpellAuraEffects.h:56</a></div></div>
<div class="ttc" id="aclass_aura_html_a205938814ca394a9a229f4b4e80e54a6"><div class="ttname"><a href="../../d2/dde/class_aura.html#a205938814ca394a9a229f4b4e80e54a6">Aura::CallScriptEffectCalcSpellModHandlers</a></div><div class="ttdeci">void CallScriptEffectCalcSpellModHandlers(AuraEffect const *aurEff, SpellModifier *&amp;spellMod)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/_spell_auras_8cpp_source.html#l02462">SpellAuras.cpp:2462</a></div></div>
<div class="ttc" id="aclass_aura_html_ab07705be94c0c10fce558c80d7208e0b"><div class="ttname"><a href="../../d2/dde/class_aura.html#ab07705be94c0c10fce558c80d7208e0b">Aura::GetCharges</a></div><div class="ttdeci">uint8 GetCharges() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dcf/_spell_auras_8h_source.html#l00140">SpellAuras.h:140</a></div></div>
<div class="ttc" id="astruct_spell_modifier_html"><div class="ttname"><a href="../../d3/d39/struct_spell_modifier.html">SpellModifier</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l00175">Player.h:176</a></div></div>
<div class="ttc" id="astruct_spell_modifier_html_a1aaf71299c2dd27b58a049d252efdee8"><div class="ttname"><a href="../../d3/d39/struct_spell_modifier.html#a1aaf71299c2dd27b58a049d252efdee8">SpellModifier::charges</a></div><div class="ttdeci">int16 charges</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l00180">Player.h:180</a></div></div>
<div class="ttc" id="astruct_spell_modifier_html_a21d017f0c8d3108a0eb5f48798103356"><div class="ttname"><a href="../../d3/d39/struct_spell_modifier.html#a21d017f0c8d3108a0eb5f48798103356">SpellModifier::op</a></div><div class="ttdeci">SpellModOp op</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l00178">Player.h:178</a></div></div>
<div class="ttc" id="astruct_spell_modifier_html_a22f64b9c021f5a87f30f01ef117ebb0b"><div class="ttname"><a href="../../d3/d39/struct_spell_modifier.html#a22f64b9c021f5a87f30f01ef117ebb0b">SpellModifier::type</a></div><div class="ttdeci">SpellModType type</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l00179">Player.h:179</a></div></div>
<div class="ttc" id="astruct_spell_modifier_html_a31742662ba8112c9e9b972897a928e57"><div class="ttname"><a href="../../d3/d39/struct_spell_modifier.html#a31742662ba8112c9e9b972897a928e57">SpellModifier::value</a></div><div class="ttdeci">int32 value</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l00181">Player.h:181</a></div></div>
<div class="ttc" id="astruct_spell_modifier_html_a465803efab27b2ba0a49c6571b65b908"><div class="ttname"><a href="../../d3/d39/struct_spell_modifier.html#a465803efab27b2ba0a49c6571b65b908">SpellModifier::spellId</a></div><div class="ttdeci">uint32 spellId</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l00183">Player.h:183</a></div></div>
<div class="ttc" id="astruct_spell_modifier_html_aba1b01bf3486d61cc1876b03078a35ee"><div class="ttname"><a href="../../d3/d39/struct_spell_modifier.html#aba1b01bf3486d61cc1876b03078a35ee">SpellModifier::mask</a></div><div class="ttdeci">flag96 mask</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l00182">Player.h:182</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l02462">Aura::CallScriptEffectCalcSpellModHandlers()</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l00180">SpellModifier::charges</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00387">SpellInfo::Effects</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00446">GetAuraType()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">GetBase()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00140">Aura::GetCharges()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00049">GetEffIndex()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">GetId()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00131">m_spellmod</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l00182">SpellModifier::mask</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l00178">SpellModifier::op</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00170">SPELL_AURA_ADD_FLAT_MODIFIER</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00171">SPELL_AURA_ADD_PCT_MODIFIER</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l00183">SpellModifier::spellId</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l00179">SpellModifier::type</a>, and <a class="el" href="../../d1/d39/_player_8h_source.html#l00181">SpellModifier::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00382">AuraEffect()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00700">ChangeAmount()</a>, and <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l01191">Aura::SetLoadedState()</a>.</p>

</div>
</div>
<a id="a1360fcb79edcab37b0a7b362bb6e7b2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1360fcb79edcab37b0a7b362bb6e7b2a">&#9670;&nbsp;</a></span>CanApplyResilience()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> AuraEffect::CanApplyResilience </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00103">103</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../da/df1/class_aura_effect.html#a4745b52e662a6dd92ec3b566ef7ca297">m_applyResilience</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00118">m_applyResilience</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06190">HandlePeriodicDamageAurasTick()</a>, and <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06329">HandlePeriodicHealthLeechAuraTick()</a>.</p>

</div>
</div>
<a id="a2322ac1aaf1bdfe21733d082603c503c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2322ac1aaf1bdfe21733d082603c503c">&#9670;&nbsp;</a></span>CanBeRecalculated()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> AuraEffect::CanBeRecalculated </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00070">70</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../da/df1/class_aura_effect.html#a334378fa304471045fd273f4d845c8dd">m_canBeRecalculated</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00138">m_canBeRecalculated</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d4e/_pet_8cpp_source.html#l01379">Pet::_SaveAuras()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00068">RecalculateAmount()</a>, and <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04517">Unit::RemoveAurasDueToSpellBySteal()</a>.</p>

</div>
</div>
<a id="a07673908af178ffaee01353a6d11a703"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07673908af178ffaee01353a6d11a703">&#9670;&nbsp;</a></span>ChangeAmount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::ChangeAmount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td>
          <td class="paramname"><em>newAmount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>mark</em> = <code><a class="el" href="../../d9/d5e/stdbool_8h.html#a41f9c5fb8b08eb5dc3edce4dcb37fee7">true</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>onStackOrReapply</em> = <code><a class="el" href="../../d9/d5e/stdbool_8h.html#a65e9886d74aaee76545e83dd09011727">false</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00700">700</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;{</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="comment">// Reapply if amount change</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <a class="code" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> handleMask = 0;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="keywordflow">if</span> (newAmount != <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>())</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        handleMask |= <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a2b4b8f92986980a3905f0c2d299beaae">AURA_EFFECT_HANDLE_CHANGE_AMOUNT</a>;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="keywordflow">if</span> (onStackOrReapply)</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        handleMask |= <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9aed024920a7d989c9b024d1c7b00f0b">AURA_EFFECT_HANDLE_REAPPLY</a>;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160; </div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="keywordflow">if</span> (!handleMask)</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160; </div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    std::list&lt;AuraApplication*&gt; effectApplications;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <a class="code" href="../../da/df1/class_aura_effect.html#a3ea63ccc256382991e0802842f69e44f">GetApplicationList</a>(effectApplications);</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160; </div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="keywordflow">for</span> (std::list&lt;AuraApplication*&gt;::const_iterator apptItr = effectApplications.begin(); apptItr != effectApplications.end(); ++apptItr)</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        <span class="keywordflow">if</span> ((*apptItr)-&gt;HasEffect(<a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()))</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;            <a class="code" href="../../da/df1/class_aura_effect.html#a7710e32fe9dc267292c3b15333521560">HandleEffect</a>(*apptItr, handleMask, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160; </div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="keywordflow">if</span> (handleMask &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a2b4b8f92986980a3905f0c2d299beaae">AURA_EFFECT_HANDLE_CHANGE_AMOUNT</a>)</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    {</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        <span class="keywordflow">if</span> (!mark)</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;            <a class="code" href="../../da/df1/class_aura_effect.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a> = newAmount;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;            <a class="code" href="../../da/df1/class_aura_effect.html#a9790b9f33c52c6d3b830dc6f56f08bf0">SetAmount</a>(newAmount);</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        <a class="code" href="../../da/df1/class_aura_effect.html#a5d248ef37c73049cf4df98b6fc1008fe">CalculateSpellMod</a>();</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    }</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160; </div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordflow">for</span> (std::list&lt;AuraApplication*&gt;::const_iterator apptItr = effectApplications.begin(); apptItr != effectApplications.end(); ++apptItr)</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        <span class="keywordflow">if</span> ((*apptItr)-&gt;HasEffect(<a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()))</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;            <a class="code" href="../../da/df1/class_aura_effect.html#a7710e32fe9dc267292c3b15333521560">HandleEffect</a>(*apptItr, handleMask, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;}</div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a82ebee9e3cf7eaf2ab892a6eb7796288a2b4b8f92986980a3905f0c2d299beaae"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a2b4b8f92986980a3905f0c2d299beaae">AURA_EFFECT_HANDLE_CHANGE_AMOUNT</a></div><div class="ttdeci">@ AURA_EFFECT_HANDLE_CHANGE_AMOUNT</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00044">SpellAuraDefines.h:44</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a82ebee9e3cf7eaf2ab892a6eb7796288a9aed024920a7d989c9b024d1c7b00f0b"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9aed024920a7d989c9b024d1c7b00f0b">AURA_EFFECT_HANDLE_REAPPLY</a></div><div class="ttdeci">@ AURA_EFFECT_HANDLE_REAPPLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00045">SpellAuraDefines.h:45</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a3ea63ccc256382991e0802842f69e44f"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a3ea63ccc256382991e0802842f69e44f">AuraEffect::GetApplicationList</a></div><div class="ttdeci">void GetApplicationList(std::list&lt; AuraApplication * &gt; &amp;applicationList) const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00421">SpellAuraEffects.cpp:421</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a7710e32fe9dc267292c3b15333521560"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a7710e32fe9dc267292c3b15333521560">AuraEffect::HandleEffect</a></div><div class="ttdeci">void HandleEffect(AuraApplication *aurApp, uint8 mode, bool apply)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00733">SpellAuraEffects.cpp:733</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a9790b9f33c52c6d3b830dc6f56f08bf0"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a9790b9f33c52c6d3b830dc6f56f08bf0">AuraEffect::SetAmount</a></div><div class="ttdeci">void SetAmount(int32 amount)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00058">SpellAuraEffects.h:58</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00044">AURA_EFFECT_HANDLE_CHANGE_AMOUNT</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00045">AURA_EFFECT_HANDLE_REAPPLY</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00676">CalculateSpellMod()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00421">GetApplicationList()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00049">GetEffIndex()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00733">HandleEffect()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00120">m_amount</a>, and <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00058">SetAmount()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/d51/spell__dk_8cpp_source.html#l00801">spell_dk_pet_scaling::HandlePeriodic()</a>, <a class="el" href="../../db/dee/spell__hunter_8cpp_source.html#l00230">spell_hun_generic_scaling::HandlePeriodic()</a>, <a class="el" href="../../d3/df8/spell__mage_8cpp_source.html#l00309">spell_mage_pet_scaling::HandlePeriodic()</a>, <a class="el" href="../../df/dd5/spell__shaman_8cpp_source.html#l00236">spell_sha_feral_spirit_scaling::HandlePeriodic()</a>, <a class="el" href="../../d1/dd5/spell__warlock_8cpp_source.html#l00333">spell_warl_generic_scaling::HandlePeriodic()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00068">RecalculateAmount()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04728">Unit::RemoveMovementImpairingAuras()</a>, and <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l00947">Aura::SetStackAmount()</a>.</p>

</div>
</div>
<a id="ac313992b1527bbeddf09365da0d28ebc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac313992b1527bbeddf09365da0d28ebc">&#9670;&nbsp;</a></span>CleanupTriggeredSpells()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::CleanupTriggeredSpells </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01167">1167</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;{</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> tSpellId = <a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].TriggerSpell;</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <span class="keywordflow">if</span> (!tSpellId)</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160; </div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    <a class="code" href="../../d4/d7d/class_spell_info.html">SpellInfo</a> <span class="keyword">const</span>* tProto = <a class="code" href="../../d3/d75/_spell_mgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellInfo(tSpellId);</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    <span class="keywordflow">if</span> (!tProto)</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160; </div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    <span class="keywordflow">if</span> (tProto-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aa8de3a55617f9dbe8313e4d66907a0b7">GetDuration</a>() != -1)</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160; </div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    <span class="comment">// needed for spell 43680, maybe others</span></div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <span class="comment">// TODO: is there a spell flag, which can solve this in a more sophisticated way?</span></div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].ApplyAuraName == <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799af51e1877e096bbfd69505e5ab4fc69ad">SPELL_AURA_PERIODIC_TRIGGER_SPELL</a> &amp;&amp;</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;            <a class="code" href="../../df/de2/namespace_g3_d.html#ae911b90657d7162d47997c702af655a8">uint32</a>(<a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aa8de3a55617f9dbe8313e4d66907a0b7">GetDuration</a>()) == <a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].Amplitude)</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160; </div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(tSpellId, <a class="code" href="../../da/df1/class_aura_effect.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>());</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;}</div>
<div class="ttc" id="a_define_8h_html_a22f78cc9780bf32aff91ae17c3101c8d"><div class="ttname"><a href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a></div><div class="ttdeci">std::uint32_t uint32</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d35/_define_8h_source.html#l00114">Define.h:114</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_ad507745acb9935a3a3cb2c6f35788ef6"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#ad507745acb9935a3a3cb2c6f35788ef6">AuraEffect::GetCasterGUID</a></div><div class="ttdeci">ObjectGuid GetCasterGUID() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00041">SpellAuraEffects.h:41</a></div></div>
<div class="ttc" id="aclass_spell_info_html"><div class="ttname"><a href="../../d4/d7d/class_spell_info.html">SpellInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d70/_spell_info_8h_source.html#l00312">SpellInfo.h:313</a></div></div>
<div class="ttc" id="aclass_spell_info_html_aa8de3a55617f9dbe8313e4d66907a0b7"><div class="ttname"><a href="../../d4/d7d/class_spell_info.html#aa8de3a55617f9dbe8313e4d66907a0b7">SpellInfo::GetDuration</a></div><div class="ttdeci">int32 GetDuration() const</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7f/_spell_info_8cpp_source.html#l02280">SpellInfo.cpp:2280</a></div></div>
<div class="ttc" id="aclass_unit_html_aac612f06e84142d92dcfc432b5feb4ac"><div class="ttname"><a href="../../da/db7/class_unit.html#aac612f06e84142d92dcfc432b5feb4ac">Unit::RemoveAurasDueToSpell</a></div><div class="ttdeci">void RemoveAurasDueToSpell(uint32 spellId, ObjectGuid casterGUID=ObjectGuid::Empty, uint8 reqEffMask=0, AuraRemoveMode removeMode=AURA_REMOVE_BY_DEFAULT)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l04420">Unit.cpp:4420</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00387">SpellInfo::Effects</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00041">GetCasterGUID()</a>, <a class="el" href="../../da/d7f/_spell_info_8cpp_source.html#l02280">SpellInfo::GetDuration()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00049">GetEffIndex()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00115">m_spellInfo</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04420">Unit::RemoveAurasDueToSpell()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00086">SPELL_AURA_PERIODIC_TRIGGER_SPELL</a>, and <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00794">sSpellMgr</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l00156">AuraApplication::_HandleEffect()</a>.</p>

</div>
</div>
<a id="afcf272bebf373ad3aebc03cce644cbee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcf272bebf373ad3aebc03cce644cbee">&#9670;&nbsp;</a></span>GetAmount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> AuraEffect::GetAmount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">56</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../da/df1/class_aura_effect.html#acec00491f0ec7f7c68d6a25d85b5b53f">m_isAuraEnabled</a> ? <a class="code" href="../../da/df1/class_aura_effect.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a> : 0; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00120">m_amount</a>, and <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00127">m_isAuraEnabled</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d82/_player_8cpp_source.html#l06780">Player::_ApplyWeaponDependentAuraCritMod()</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l06813">Player::_ApplyWeaponDependentAuraDamageMod()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l00156">AuraApplication::_HandleEffect()</a>, <a class="el" href="../../df/d4e/_pet_8cpp_source.html#l01379">Pet::_SaveAuras()</a>, <a class="el" href="../../db/d55/spell__druid_8cpp_source.html#l00932">spell_dru_survival_instincts_aura::AfterApply()</a>, <a class="el" href="../../da/d78/boss__the__lich__king_8cpp_source.html#l02068">spell_the_lich_king_necrotic_plague_jump::spell_the_lich_king_necrotic_plague_AuraScript::AfterDispel()</a>, <a class="el" href="../../db/d55/spell__druid_8cpp_source.html#l00538">spell_dru_lifebloom::AfterRemove()</a>, <a class="el" href="../../d3/df8/spell__mage_8cpp_source.html#l00750">spell_mage_living_bomb::AfterRemove()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01875">Unit::CalcAbsorbResist()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l02218">Unit::CalcHealAbsorb()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00676">CalculateSpellMod()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00700">ChangeAmount()</a>, <a class="el" href="../../d1/d40/_spell_effects_8cpp_source.html#l01517">Spell::EffectHeal()</a>, <a class="el" href="../../d1/d40/_spell_effects_8cpp_source.html#l00322">Spell::EffectSchoolDMG()</a>, <a class="el" href="../../de/d21/spell__priest_8cpp_source.html#l00720">spell_pri_renew::HandleApplyEffect()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04980">HandleAuraDummy()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04367">HandleAuraIncreaseBaseHealthPercent()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05599">HandleAuraLinked()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04669">HandleAuraModAttackPower()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04692">HandleAuraModAttackPowerPercent()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03908">HandleAuraModBaseResistancePCT()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04518">HandleAuraModCritPct()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05653">HandleAuraModFakeInebriation()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04300">HandleAuraModIncreaseEnergy()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04320">HandleAuraModIncreaseEnergyPercent()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04255">HandleAuraModIncreaseHealth()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04350">HandleAuraModIncreaseHealthPercent()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04277">HandleAuraModIncreaseMaxHealth()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04679">HandleAuraModRangedAttackPower()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04703">HandleAuraModRangedAttackPowerPercent()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04607">HandleAuraModRangedHaste()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03890">HandleAuraModResistance()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03867">HandleAuraModResistanceExclusive()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02334">HandleAuraModScale()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02784">HandleAuraModSkill()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03997">HandleAuraModStat()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02989">HandleAuraModTotalThreat()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04428">HandleAuraModWeaponCritPercent()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16739">Unit::HandleAuraRaidProcFromChargeWithValue()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04959">HandleAuraRetainComboPoints()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l01253">Aura::HandleAuraSpecificMods()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05399">HandleChannelDeathItem()</a>, <a class="el" href="../../d6/d51/spell__dk_8cpp_source.html#l00143">spell_dk_raise_ally::HandleDummy()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l06013">Unit::HandleDummyAuraProc()</a>, <a class="el" href="../../db/dc4/instance__shadowfang__keep_8cpp_source.html#l00130">spell_shadowfang_keep_haunting_spirits::spell_shadowfang_keep_haunting_spirits_AuraScript::HandleDummyTick()</a>, <a class="el" href="../../d6/d51/spell__dk_8cpp_source.html#l01549">spell_dk_improved_blood_presence::HandleEffectApply()</a>, <a class="el" href="../../d6/d51/spell__dk_8cpp_source.html#l01586">spell_dk_improved_frost_presence::HandleEffectApply()</a>, <a class="el" href="../../d6/d51/spell__dk_8cpp_source.html#l01624">spell_dk_improved_unholy_presence::HandleEffectApply()</a>, <a class="el" href="../../db/d55/spell__druid_8cpp_source.html#l00472">spell_dru_idol_lifebloom::HandleEffectCalcSpellMod()</a>, <a class="el" href="../../db/d16/spell__paladin_8cpp_source.html#l00603">spell_pal_exorcism_and_holy_wrath_damage::HandleEffectCalcSpellMod()</a>, <a class="el" href="../../d1/dd5/spell__warlock_8cpp_source.html#l00180">spell_warl_improved_demonic_tactics::HandleEffectCalcSpellMod()</a>, <a class="el" href="../../d8/d08/spell__warrior_8cpp_source.html#l00772">spell_warr_glyph_of_sunder_armor::HandleEffectCalcSpellMod()</a>, <a class="el" href="../../d4/d78/boss__anubarak__trial_8cpp_source.html#l00891">spell_gen_leeching_swarm::spell_gen_leeching_swarm_AuraScript::HandleEffectPeriodic()</a>, <a class="el" href="../../d3/dec/hallows__end_8cpp_source.html#l00357">spell_hallows_end_base_fire::spell_hallows_end_base_fire_AuraScript::HandleEffectPeriodicUpdate()</a>, <a class="el" href="../../d1/de4/spell__generic_8cpp_source.html#l01322">spell_gen_burn_brutallus::HandleEffectPeriodicUpdate()</a>, <a class="el" href="../../df/dd5/spell__shaman_8cpp_source.html#l00919">spell_sha_item_t10_elemental_2p_bonus::HandleEffectProc()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04585">HandleModAttackSpeed()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03953">HandleModBaseResistance()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04543">HandleModCastingSpeed()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04572">HandleModCombatSpeedPct()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04748">HandleModDamageDone()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04833">HandleModDamagePercentDone()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04458">HandleModHitChance()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01515">HandleModInvisibility()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01490">HandleModInvisibilityDetect()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04560">HandleModMeleeRangedSpeedPct()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04596">HandleModMeleeSpeedPct()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04867">HandleModOffhandDamagePercent()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04909">HandleModPowerCost()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04896">HandleModPowerCostPCT()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04634">HandleModRating()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03932">HandleModResistancePercent()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04490">HandleModSpellCritChance()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04477">HandleModSpellHitChance()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03357">HandleModStateImmunityMask()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01607">HandleModStealth()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01582">HandleModStealthDetect()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01656">HandleModStealthLevel()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03975">HandleModTargetResistance()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02978">HandleModThreat()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04121">HandleModTotalPercentStat()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l09300">Unit::HandleOverrideClassScriptAuraProc()</a>, <a class="el" href="../../d6/d51/spell__dk_8cpp_source.html#l00388">spell_dk_chains_of_ice_aura::HandlePeriodic()</a>, <a class="el" href="../../d1/de2/boss__nethermancer__sepethrea_8cpp_source.html#l00208">spell_ragin_flames_inferno::spell_ragin_flames_inferno_AuraScript::HandlePeriodic()</a>, <a class="el" href="../../d6/d51/spell__dk_8cpp_source.html#l00319">spell_dk_death_and_decay_aura::HandlePeriodic()</a>, <a class="el" href="../../d6/d51/spell__dk_8cpp_source.html#l00801">spell_dk_pet_scaling::HandlePeriodic()</a>, <a class="el" href="../../db/dee/spell__hunter_8cpp_source.html#l00230">spell_hun_generic_scaling::HandlePeriodic()</a>, <a class="el" href="../../db/dee/spell__hunter_8cpp_source.html#l00704">spell_hun_sniper_training::HandlePeriodic()</a>, <a class="el" href="../../d3/df8/spell__mage_8cpp_source.html#l00309">spell_mage_pet_scaling::HandlePeriodic()</a>, <a class="el" href="../../df/dd5/spell__shaman_8cpp_source.html#l00236">spell_sha_feral_spirit_scaling::HandlePeriodic()</a>, <a class="el" href="../../d1/dd5/spell__warlock_8cpp_source.html#l00333">spell_warl_generic_scaling::HandlePeriodic()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06190">HandlePeriodicDamageAurasTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06425">HandlePeriodicHealthFunnelAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06329">HandlePeriodicHealthLeechAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05861">HandlePeriodicTriggerSpellAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06157">HandlePeriodicTriggerSpellWithValueAuraTick()</a>, <a class="el" href="../../db/d55/spell__druid_8cpp_source.html#l00624">spell_dru_living_seed_proc::HandleProc()</a>, <a class="el" href="../../df/dd5/spell__shaman_8cpp_source.html#l00557">spell_sha_earth_shield::HandleProc()</a>, <a class="el" href="../../d5/d4c/oculus_8cpp_source.html#l00657">spell_oculus_temporal_rift::spell_oculus_temporal_rift_AuraScript::HandleProc()</a>, <a class="el" href="../../d6/d51/spell__dk_8cpp_source.html#l00474">spell_dk_wandering_plague_aura::HandleProc()</a>, <a class="el" href="../../db/d55/spell__druid_8cpp_source.html#l00115">spell_dru_t10_balance_4p_bonus::HandleProc()</a>, <a class="el" href="../../db/d55/spell__druid_8cpp_source.html#l00601">spell_dru_living_seed::HandleProc()</a>, <a class="el" href="../../db/dee/spell__hunter_8cpp_source.html#l01032">spell_hun_glyph_of_arcane_shot::HandleProc()</a>, <a class="el" href="../../db/d6e/spell__item_8cpp_source.html#l01836">spell_item_necrotic_touch::HandleProc()</a>, <a class="el" href="../../d3/df8/spell__mage_8cpp_source.html#l00207">spell_mage_burnout::HandleProc()</a>, <a class="el" href="../../d3/df8/spell__mage_8cpp_source.html#l00837">spell_mage_master_of_elements::HandleProc()</a>, <a class="el" href="../../db/d16/spell__paladin_8cpp_source.html#l00222">spell_pal_sacred_shield_base::HandleProc()</a>, <a class="el" href="../../de/d21/spell__priest_8cpp_source.html#l00183">spell_pri_divine_aegis::HandleProc()</a>, <a class="el" href="../../de/d21/spell__priest_8cpp_source.html#l00239">spell_pri_glyph_of_prayer_of_healing::HandleProc()</a>, <a class="el" href="../../df/dd5/spell__shaman_8cpp_source.html#l00120">spell_sha_t10_restoration_4p_bonus::HandleProc()</a>, <a class="el" href="../../db/dee/spell__hunter_8cpp_source.html#l01167">spell_hun_lock_and_load::HandleProcs()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06822">HandleProcTriggerDamageAuraProc()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l08377">Unit::HandleProcTriggerSpell()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06801">HandleProcTriggerSpellWithValueAuraProc()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06890">HandleRaidProcFromChargeWithValueAuraProc()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04617">HandleRangedAmmoHaste()</a>, <a class="el" href="../../d1/dd5/spell__warlock_8cpp_source.html#l00941">spell_warl_haunt_aura::HandleRemove()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04877">HandleShieldBlockValue()</a>, <a class="el" href="../../db/dee/spell__hunter_8cpp_source.html#l00720">spell_hun_sniper_training::HandleUpdatePeriodic()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l01914">Aura::IsAuraStronger()</a>, <a class="el" href="../../d5/d33/boss__blood__prince__council_8cpp_source.html#l01660">spell_valanar_kinetic_bomb_absorb::spell_valanar_kinetic_bomb_absorb_AuraScript::OnAbsorb()</a>, <a class="el" href="../../d2/df4/boss__alar_8cpp_source.html#l00436">spell_alar_ember_blast_death::spell_alar_ember_blast_death_AuraScript::OnApply()</a>, <a class="el" href="../../da/d78/boss__the__lich__king_8cpp_source.html#l02063">spell_the_lich_king_necrotic_plague_jump::spell_the_lich_king_necrotic_plague_AuraScript::OnDispel()</a>, <a class="el" href="../../d4/dc9/boss__kalecgos_8cpp_source.html#l00690">spell_kalecgos_curse_of_boundless_agony::spell_kalecgos_curse_of_boundless_agony_AuraScript::OnPeriodic()</a>, <a class="el" href="../../d5/d7d/boss__xt002_8cpp_source.html#l00925">spell_xt002_gravity_bomb_aura::spell_xt002_gravity_bomb_aura_AuraScript::OnPeriodic()</a>, <a class="el" href="../../d2/d3d/boss__lurker__below_8cpp_source.html#l00255">spell_lurker_below_spout::spell_lurker_below_spout_AuraScript::OnPeriodic()</a>, <a class="el" href="../../df/df3/boss__blood__queen__lana__thel_8cpp_source.html#l00824">spell_blood_queen_essence_of_the_blood_queen::spell_blood_queen_essence_of_the_blood_queen_AuraScript::OnProc()</a>, <a class="el" href="../../db/d16/spell__paladin_8cpp_source.html#l00633">spell_pal_eye_for_an_eye::OnProc()</a>, <a class="el" href="../../d1/dd5/spell__warlock_8cpp_source.html#l00721">spell_warl_siphon_life::OnProc()</a>, <a class="el" href="../../d1/dd5/spell__warlock_8cpp_source.html#l00899">spell_warl_fel_synergy::OnProc()</a>, <a class="el" href="../../d8/d08/spell__warrior_8cpp_source.html#l00156">spell_warr_improved_spell_reflection::OnProc()</a>, <a class="el" href="../../d8/d08/spell__warrior_8cpp_source.html#l00358">spell_warr_damage_shield::OnProc()</a>, <a class="el" href="../../de/de5/boss__sindragosa_8cpp_source.html#l01021">spell_sindragosa_instability::spell_sindragosa_instability_AuraScript::OnRemove()</a>, <a class="el" href="../../da/d78/boss__the__lich__king_8cpp_source.html#l02044">spell_the_lich_king_necrotic_plague_jump::spell_the_lich_king_necrotic_plague_AuraScript::OnRemove()</a>, <a class="el" href="../../d9/d88/boss__assembly__of__iron_8cpp_source.html#l00854">spell_shield_of_runes::spell_shield_of_runes_AuraScript::OnRemove()</a>, <a class="el" href="../../d5/d7d/boss__xt002_8cpp_source.html#l00913">spell_xt002_gravity_bomb_aura::spell_xt002_gravity_bomb_aura_AuraScript::OnRemove()</a>, <a class="el" href="../../d5/d7d/boss__xt002_8cpp_source.html#l01017">spell_xt002_searing_light_spawn_life_spark::spell_xt002_searing_light_spawn_life_spark_AuraScript::OnRemove()</a>, <a class="el" href="../../d3/de1/boss__kologarn_8cpp_source.html#l00726">spell_ulduar_stone_grip::spell_ulduar_stone_grip_AuraScript::OnRemoveStun()</a>, <a class="el" href="../../da/d78/boss__the__lich__king_8cpp_source.html#l01893">spell_the_lich_king_infest::spell_the_lich_king_infest_AuraScript::OnUpdate()</a>, <a class="el" href="../../d2/d9d/instance__karazhan_8cpp_source.html#l00365">spell_karazhan_overload::spell_karazhan_overload_AuraScript::PeriodicTick()</a>, <a class="el" href="../../db/dd3/icecrown__citadel_8cpp_source.html#l02479">spell_icc_yh_volley::spell_icc_yh_volley_AuraScript::PrepareAuraScript()</a>, <a class="el" href="../../d1/ddb/classspell__serpentshrine__cavern__infection_1_1spell__serpentshrine__cavern__infection___aura_script.html#aa5880187714f3202b14f15e6d6ccfeda">spell_serpentshrine_cavern_infection::spell_serpentshrine_cavern_infection_AuraScript::PrepareAuraScript()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l15426">Unit::ProcDamageAndSpellFor()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04517">Unit::RemoveAurasDueToSpellBySteal()</a>, <a class="el" href="../../d8/d80/_arena_spectator_8cpp_source.html#l00282">ArenaSpectator::ShouldSendAura()</a>, <a class="el" href="../../de/d97/boss__mother__shahraz_8cpp_source.html#l00351">spell_mother_shahraz_fatal_attraction_aura::spell_mother_shahraz_fatal_attraction_aura_AuraScript::Update()</a>, <a class="el" href="../../df/d41/instance__black__temple_8cpp_source.html#l00495">spell_black_temple_shadow_inferno::spell_black_temple_shadow_inferno_AuraScript::Update()</a>, <a class="el" href="../../df/d41/instance__black__temple_8cpp_source.html#l00534">spell_black_temple_spell_absorption::spell_black_temple_spell_absorption_AuraScript::Update()</a>, <a class="el" href="../../df/d07/_stat_system_8cpp_source.html#l00323">Player::UpdateAttackPowerAndDamage()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00912">UpdatePeriodic()</a>, and <a class="el" href="../../da/d7f/_spell_info_8cpp_source.html#l01711">SpellInfo::ValidateAttribute6SpellDamageMods()</a>.</p>

</div>
</div>
<a id="a458f465c0150d16e555d1997d7b09fc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a458f465c0150d16e555d1997d7b09fc2">&#9670;&nbsp;</a></span>GetAmplitude()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> AuraEffect::GetAmplitude </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00051">51</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../da/df1/class_aura_effect.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00134">m_amplitude</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/dda/boss__icecrown__gunship__battle_8cpp_source.html#l01972">spell_igb_rocket_pack::spell_igb_rocket_pack_AuraScript::HandleRemove()</a>.</p>

</div>
</div>
<a id="a3ea63ccc256382991e0802842f69e44f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ea63ccc256382991e0802842f69e44f">&#9670;&nbsp;</a></span>GetApplicationList()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::GetApplicationList </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d68/_c_make_lists_8txt.html#a0b2e90260bc220565ca487d6b28606a3">std::list</a>&lt; <a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>applicationList</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00421">421</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;{</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <a class="code" href="../../d2/dde/class_aura.html#af94996c697b3f790489314b6175ab311">Aura::ApplicationMap</a> <span class="keyword">const</span>&amp; targetMap = <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#a6abd11d6d72d2212edfed3c1f356fbe2">GetApplicationMap</a>();</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">for</span> (Aura::ApplicationMap::const_iterator appIter = targetMap.begin(); appIter != targetMap.end(); ++appIter)</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <span class="keywordflow">if</span> (appIter-&gt;second-&gt;HasEffect(<a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()))</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;            applicationList.push_back(appIter-&gt;second);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;}</div>
<div class="ttc" id="aclass_aura_html_a6abd11d6d72d2212edfed3c1f356fbe2"><div class="ttname"><a href="../../d2/dde/class_aura.html#a6abd11d6d72d2212edfed3c1f356fbe2">Aura::GetApplicationMap</a></div><div class="ttdeci">ApplicationMap const  &amp; GetApplicationMap()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dcf/_spell_auras_8h_source.html#l00180">SpellAuras.h:180</a></div></div>
<div class="ttc" id="aclass_aura_html_af94996c697b3f790489314b6175ab311"><div class="ttname"><a href="../../d2/dde/class_aura.html#af94996c697b3f790489314b6175ab311">Aura::ApplicationMap</a></div><div class="ttdeci">std::map&lt; ObjectGuid, AuraApplication * &gt; ApplicationMap</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dcf/_spell_auras_8h_source.html#l00090">SpellAuras.h:90</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00180">Aura::GetApplicationMap()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">GetBase()</a>, and <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00049">GetEffIndex()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00700">ChangeAmount()</a>, and <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00889">Update()</a>.</p>

</div>
</div>
<a id="a36e4e8b964658519a723d668b7ad0bba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36e4e8b964658519a723d668b7ad0bba">&#9670;&nbsp;</a></span>GetAuraGroup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> AuraEffect::GetAuraGroup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00107">107</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../da/df1/class_aura_effect.html#ada78fc2515cb55583bf83667e475c7fe">m_auraGroup</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00125">m_auraGroup</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l00156">AuraApplication::_HandleEffect()</a>.</p>

</div>
</div>
<a id="a120cf8a45a3c816e4ef588733fa812e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a120cf8a45a3c816e4ef588733fa812e5">&#9670;&nbsp;</a></span>GetAuraType()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799">AuraType</a> AuraEffect::GetAuraType </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00446">446</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;{</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799">AuraType</a>)<a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code" href="../../da/df1/class_aura_effect.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>].ApplyAuraName;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;}</div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799">AuraType</a></div><div class="ttdeci">AuraType</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00061">SpellAuraDefines.h:62</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00387">SpellInfo::Effects</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00137">m_effIndex</a>, and <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00115">m_spellInfo</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d82/_player_8cpp_source.html#l06813">Player::_ApplyWeaponDependentAuraDamageMod()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l00156">AuraApplication::_HandleEffect()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04213">Unit::_RegisterAuraEffect()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00451">CalculateAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00586">CalculatePeriodic()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00676">CalculateSpellMod()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04921">HandleArenaPreparation()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02854">HandleAuraAllowFlight()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05508">HandleAuraEmpathy()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02896">HandleAuraFeatherFall()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02922">HandleAuraHover()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02517">HandleAuraModDisarm()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03260">HandleAuraModIncreaseFlightSpeed()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03780">HandleAuraModSchoolImmunity()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02784">HandleAuraModSkill()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02726">HandleAuraModStalked()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02707">HandleAuraTrackStealthed()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02747">HandleAuraUntrackable()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02874">HandleAuraWaterWalk()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05547">HandleComprehendLanguage()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00733">HandleEffect()</a>, <a class="el" href="../../d6/d51/spell__dk_8cpp_source.html#l00774">spell_dk_pet_scaling::HandleEffectApply()</a>, <a class="el" href="../../db/d55/spell__druid_8cpp_source.html#l00326">spell_dru_treant_scaling::HandleEffectApply()</a>, <a class="el" href="../../d1/de4/spell__generic_8cpp_source.html#l00471">spell_pet_hit_expertise_scalling::HandleEffectApply()</a>, <a class="el" href="../../d3/df8/spell__mage_8cpp_source.html#l00288">spell_mage_pet_scaling::HandleEffectApply()</a>, <a class="el" href="../../de/d21/spell__priest_8cpp_source.html#l00112">spell_pri_shadowfiend_scaling::HandleEffectApply()</a>, <a class="el" href="../../df/dd5/spell__shaman_8cpp_source.html#l00221">spell_sha_feral_spirit_scaling::HandleEffectApply()</a>, <a class="el" href="../../df/dd5/spell__shaman_8cpp_source.html#l00330">spell_sha_fire_elemental_scaling::HandleEffectApply()</a>, <a class="el" href="../../d1/dd5/spell__warlock_8cpp_source.html#l00433">spell_warl_infernal_scaling::HandleEffectApply()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02956">HandleForceMoveForward()</a>, <a class="el" href="../../d6/d51/spell__dk_8cpp_source.html#l00801">spell_dk_pet_scaling::HandlePeriodic()</a>, <a class="el" href="../../db/dee/spell__hunter_8cpp_source.html#l00230">spell_hun_generic_scaling::HandlePeriodic()</a>, <a class="el" href="../../d3/df8/spell__mage_8cpp_source.html#l00309">spell_mage_pet_scaling::HandlePeriodic()</a>, <a class="el" href="../../df/dd5/spell__shaman_8cpp_source.html#l00236">spell_sha_feral_spirit_scaling::HandlePeriodic()</a>, <a class="el" href="../../d1/dd5/spell__warlock_8cpp_source.html#l00333">spell_warl_generic_scaling::HandlePeriodic()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06190">HandlePeriodicDamageAurasTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06454">HandlePeriodicHealAurasTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01137">HandleProc()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l08377">Unit::HandleProcTriggerSpell()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04877">HandleShieldBlockValue()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l01914">Aura::IsAuraStronger()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01087">PeriodicTick()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l15426">Unit::ProcDamageAndSpellFor()</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l12586">Player::RestoreBaseRune()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05834">Unit::SendPeriodicAuraLog()</a>, <a class="el" href="../../d8/d80/_arena_spectator_8cpp_source.html#l00282">ArenaSpectator::ShouldSendAura()</a>, and <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00912">UpdatePeriodic()</a>.</p>

</div>
</div>
<a id="a0417bd1d648cb9d2888937ddad75788c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0417bd1d648cb9d2888937ddad75788c">&#9670;&nbsp;</a></span>GetBase()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/dde/class_aura.html">Aura</a>* AuraEffect::GetBase </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">42</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../da/df1/class_aura_effect.html#aff934af743b5031d558ffc9a4b55d6de">m_base</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00113">m_base</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l00156">AuraApplication::_HandleEffect()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00791">ApplySpellMod()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01875">Unit::CalcAbsorbResist()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l02218">Unit::CalcHealAbsorb()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00451">CalculateAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00586">CalculatePeriodic()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00571">CalculatePeriodicData()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00676">CalculateSpellMod()</a>, <a class="el" href="../../d1/d40/_spell_effects_8cpp_source.html#l01517">Spell::EffectHeal()</a>, <a class="el" href="../../d1/d40/_spell_effects_8cpp_source.html#l00322">Spell::EffectSchoolDMG()</a>, <a class="el" href="../../d1/d78/boss__festergut_8cpp_source.html#l00343">spell_festergut_blighted_spores::spell_festergut_blighted_spores_AuraScript::ExtraEffect()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00421">GetApplicationList()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00040">GetCaster()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00041">GetCasterGUID()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00410">GetTargetList()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00080">GetTotalTicks()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04980">HandleAuraDummy()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05599">HandleAuraLinked()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01828">HandleAuraModShapeshift()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03767">HandleAuraModStateImmunity()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02805">HandleAuraMounted()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16828">Unit::HandleAuraRaidProcFromCharge()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16739">Unit::HandleAuraRaidProcFromChargeWithValue()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04959">HandleAuraRetainComboPoints()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l06013">Unit::HandleDummyAuraProc()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00733">HandleEffect()</a>, <a class="el" href="../../db/d16/spell__paladin_8cpp_source.html#l00603">spell_pal_exorcism_and_holy_wrath_damage::HandleEffectCalcSpellMod()</a>, <a class="el" href="../../d1/dd5/spell__warlock_8cpp_source.html#l00180">spell_warl_improved_demonic_tactics::HandleEffectCalcSpellMod()</a>, <a class="el" href="../../d8/d08/spell__warrior_8cpp_source.html#l00772">spell_warr_glyph_of_sunder_armor::HandleEffectCalcSpellMod()</a>, <a class="el" href="../../dc/ddf/brewfest_8cpp_source.html#l00926">spell_brewfest_main_ram_buff::spell_brewfest_main_ram_buff_AuraScript::HandleEffectPeriodic()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06669">HandleObsModPowerAuraTick()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l09300">Unit::HandleOverrideClassScriptAuraProc()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06190">HandlePeriodicDamageAurasTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06703">HandlePeriodicEnergizeAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06454">HandlePeriodicHealAurasTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06329">HandlePeriodicHealthLeechAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06596">HandlePeriodicManaLeechAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05861">HandlePeriodicTriggerSpellAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01137">HandleProc()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l08377">Unit::HandleProcTriggerSpell()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06842">HandleRaidProcFromChargeAuraProc()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06890">HandleRaidProcFromChargeWithValueAuraProc()</a>, <a class="el" href="../../dd/d1f/boss__marwyn_8cpp_source.html#l00179">spell_hor_shared_suffering::spell_hor_shared_sufferingAuraScript::OnRemove()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01087">PeriodicTick()</a>, <a class="el" href="../../d8/d41/_spell_8cpp_source.html#l03243">Spell::prepare()</a>, <a class="el" href="../../d9/d1c/pit__of__saron_8cpp_source.html#l01515">spell_pos_glacial_strike::spell_pos_glacial_strikeAuraScript::PrepareAuraScript()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l15426">Unit::ProcDamageAndSpellFor()</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l12586">Player::RestoreBaseRune()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00889">Update()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00912">UpdatePeriodic()</a>, and <a class="el" href="../../da/d7f/_spell_info_8cpp_source.html#l01711">SpellInfo::ValidateAttribute6SpellDamageMods()</a>.</p>

</div>
</div>
<a id="aced766d86694ac0980a6e4f3cae77b5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aced766d86694ac0980a6e4f3cae77b5b">&#9670;&nbsp;</a></span>GetBaseAmount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> AuraEffect::GetBaseAmount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00050">50</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../da/df1/class_aura_effect.html#aba194c9071a1b0551768b397abc9ebeb">m_baseAmount</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00116">m_baseAmount</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d4e/_pet_8cpp_source.html#l01379">Pet::_SaveAuras()</a>, <a class="el" href="../../d1/dd5/spell__warlock_8cpp_source.html#l00247">spell_warl_demonic_knowledge::CalculateAmount()</a>, <a class="el" href="../../db/dee/spell__hunter_8cpp_source.html#l00720">spell_hun_sniper_training::HandleUpdatePeriodic()</a>, and <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04517">Unit::RemoveAurasDueToSpellBySteal()</a>.</p>

</div>
</div>
<a id="a29cf330277aeb89d17d18f6e112f035b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29cf330277aeb89d17d18f6e112f035b">&#9670;&nbsp;</a></span>GetCaster()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/db7/class_unit.html">Unit</a>* AuraEffect::GetCaster </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00040">40</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#a6fc52109b7711606f15d9880fda8f815">GetCaster</a>(); }</div>
<div class="ttc" id="aclass_aura_html_a6fc52109b7711606f15d9880fda8f815"><div class="ttname"><a href="../../d2/dde/class_aura.html#a6fc52109b7711606f15d9880fda8f815">Aura::GetCaster</a></div><div class="ttdeci">Unit * GetCaster() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/_spell_auras_8cpp_source.html#l00466">SpellAuras.cpp:466</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">GetBase()</a>, and <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l00466">Aura::GetCaster()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01875">Unit::CalcAbsorbResist()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00571">CalculatePeriodicData()</a>, <a class="el" href="../../d1/d40/_spell_effects_8cpp_source.html#l01517">Spell::EffectHeal()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02346">HandleAuraCloneCaster()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03198">HandleAuraControlVehicle()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04980">HandleAuraDummy()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05599">HandleAuraLinked()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02989">HandleAuraModTotalThreat()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16828">Unit::HandleAuraRaidProcFromCharge()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16739">Unit::HandleAuraRaidProcFromChargeWithValue()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02110">HandleAuraTransform()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05444">HandleBindSight()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05399">HandleChannelDeathItem()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03179">HandleCharmConvert()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l06013">Unit::HandleDummyAuraProc()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05459">HandleFarSight()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03164">HandleModCharm()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03089">HandleModPossess()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03111">HandleModPossessPet()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03004">HandleModTaunt()</a>, <a class="el" href="../../db/d16/spell__paladin_8cpp_source.html#l00222">spell_pal_sacred_shield_base::HandleProc()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06842">HandleRaidProcFromChargeAuraProc()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06890">HandleRaidProcFromChargeWithValueAuraProc()</a>, and <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00068">RecalculateAmount()</a>.</p>

</div>
</div>
<a id="ad507745acb9935a3a3cb2c6f35788ef6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad507745acb9935a3a3cb2c6f35788ef6">&#9670;&nbsp;</a></span>GetCasterGUID()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/d03/class_object_guid.html">ObjectGuid</a> AuraEffect::GetCasterGUID </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00041">41</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#a3c4dfe75dad16fbf2afaf23ce77e4262">GetCasterGUID</a>(); }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">GetBase()</a>, and <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00105">Aura::GetCasterGUID()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l19315">Unit::CastDelayedSpellWithPeriodicAmount()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01087">Unit::CastSpell()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01167">CleanupTriggeredSpells()</a>, <a class="el" href="../../d1/d40/_spell_effects_8cpp_source.html#l01517">Spell::EffectHeal()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04980">HandleAuraDummy()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05599">HandleAuraLinked()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16828">Unit::HandleAuraRaidProcFromCharge()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16739">Unit::HandleAuraRaidProcFromChargeWithValue()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02110">HandleAuraTransform()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l06013">Unit::HandleDummyAuraProc()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02374">HandleFeignDeath()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06669">HandleObsModPowerAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06190">HandlePeriodicDamageAurasTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06703">HandlePeriodicEnergizeAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06454">HandlePeriodicHealAurasTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06329">HandlePeriodicHealthLeechAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06596">HandlePeriodicManaLeechAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06842">HandleRaidProcFromChargeAuraProc()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06890">HandleRaidProcFromChargeWithValueAuraProc()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l15426">Unit::ProcDamageAndSpellFor()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05834">Unit::SendPeriodicAuraLog()</a>, and <a class="el" href="../../da/d7f/_spell_info_8cpp_source.html#l01711">SpellInfo::ValidateAttribute6SpellDamageMods()</a>.</p>

</div>
</div>
<a id="a7595664aebf24652d3ce95d6bdc18ebe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7595664aebf24652d3ce95d6bdc18ebe">&#9670;&nbsp;</a></span>GetCasterLevel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> AuraEffect::GetCasterLevel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00102">102</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../da/df1/class_aura_effect.html#a3f9c2c6496be1ffad249825f86074def">m_casterLevel</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00119">m_casterLevel</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06190">HandlePeriodicDamageAurasTick()</a>, and <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06329">HandlePeriodicHealthLeechAuraTick()</a>.</p>

</div>
</div>
<a id="a374ccc25c81de041d10e1ed2b52a238c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a374ccc25c81de041d10e1ed2b52a238c">&#9670;&nbsp;</a></span>GetCritChance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float AuraEffect::GetCritChance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00100">100</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../da/df1/class_aura_effect.html#af7eff5d08a22189f99f66695367ae250">m_critChance</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00121">m_critChance</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06190">HandlePeriodicDamageAurasTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06454">HandlePeriodicHealAurasTick()</a>, and <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06329">HandlePeriodicHealthLeechAuraTick()</a>.</p>

</div>
</div>
<a id="ab8c4811ced24cbd9b4afff1c22fbb1b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8c4811ced24cbd9b4afff1c22fbb1b0">&#9670;&nbsp;</a></span>GetEffIndex()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> AuraEffect::GetEffIndex </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00049">49</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../da/df1/class_aura_effect.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00137">m_effIndex</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l00156">AuraApplication::_HandleEffect()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01875">Unit::CalcAbsorbResist()</a>, <a class="el" href="../../db/d16/spell__paladin_8cpp_source.html#l00193">spell_pal_sacred_shield_base::CalculateAmount()</a>, <a class="el" href="../../d1/dd5/spell__warlock_8cpp_source.html#l00172">spell_warl_improved_demonic_tactics::CalculateAmount()</a>, <a class="el" href="../../d8/d08/spell__warrior_8cpp_source.html#l00558">spell_warr_rend::CalculateAmount()</a>, <a class="el" href="../../db/d55/spell__druid_8cpp_source.html#l00277">spell_dru_treant_scaling::CalculateResistanceAmount()</a>, <a class="el" href="../../db/dee/spell__hunter_8cpp_source.html#l00158">spell_hun_generic_scaling::CalculateResistanceAmount()</a>, <a class="el" href="../../d3/df8/spell__mage_8cpp_source.html#l00248">spell_mage_pet_scaling::CalculateResistanceAmount()</a>, <a class="el" href="../../de/d21/spell__priest_8cpp_source.html#l00067">spell_pri_shadowfiend_scaling::CalculateResistanceAmount()</a>, <a class="el" href="../../df/dd5/spell__shaman_8cpp_source.html#l00170">spell_sha_feral_spirit_scaling::CalculateResistanceAmount()</a>, <a class="el" href="../../df/dd5/spell__shaman_8cpp_source.html#l00285">spell_sha_fire_elemental_scaling::CalculateResistanceAmount()</a>, <a class="el" href="../../d1/dd5/spell__warlock_8cpp_source.html#l00277">spell_warl_generic_scaling::CalculateResistanceAmount()</a>, <a class="el" href="../../d1/dd5/spell__warlock_8cpp_source.html#l00383">spell_warl_infernal_scaling::CalculateResistanceAmount()</a>, <a class="el" href="../../d3/df8/spell__mage_8cpp_source.html#l00608">spell_mage_ice_barrier_aura::CalculateSpellAmount()</a>, <a class="el" href="../../d3/df8/spell__mage_8cpp_source.html#l00644">spell_mage_ice_barrier::CalculateSpellAmount()</a>, <a class="el" href="../../de/d21/spell__priest_8cpp_source.html#l00548">CalculateSpellAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00676">CalculateSpellMod()</a>, <a class="el" href="../../d6/d51/spell__dk_8cpp_source.html#l00711">spell_dk_pet_scaling::CalculateStatAmount()</a>, <a class="el" href="../../db/d55/spell__druid_8cpp_source.html#l00288">spell_dru_treant_scaling::CalculateStatAmount()</a>, <a class="el" href="../../db/dee/spell__hunter_8cpp_source.html#l00169">spell_hun_generic_scaling::CalculateStatAmount()</a>, <a class="el" href="../../d3/df8/spell__mage_8cpp_source.html#l00259">spell_mage_pet_scaling::CalculateStatAmount()</a>, <a class="el" href="../../de/d21/spell__priest_8cpp_source.html#l00078">spell_pri_shadowfiend_scaling::CalculateStatAmount()</a>, <a class="el" href="../../df/dd5/spell__shaman_8cpp_source.html#l00181">spell_sha_feral_spirit_scaling::CalculateStatAmount()</a>, <a class="el" href="../../df/dd5/spell__shaman_8cpp_source.html#l00296">spell_sha_fire_elemental_scaling::CalculateStatAmount()</a>, <a class="el" href="../../d1/dd5/spell__warlock_8cpp_source.html#l00288">spell_warl_generic_scaling::CalculateStatAmount()</a>, <a class="el" href="../../d1/dd5/spell__warlock_8cpp_source.html#l00394">spell_warl_infernal_scaling::CalculateStatAmount()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l02372">Aura::CallScriptAfterEffectApplyHandlers()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l02634">Aura::CallScriptAfterEffectProcHandlers()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l02386">Aura::CallScriptAfterEffectRemoveHandlers()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l02476">Aura::CallScriptEffectAbsorbHandlers()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l02494">Aura::CallScriptEffectAfterAbsorbHandlers()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l02522">Aura::CallScriptEffectAfterManaShieldHandlers()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l02333">Aura::CallScriptEffectApplyHandlers()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l02434">Aura::CallScriptEffectCalcAmountHandlers()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l02448">Aura::CallScriptEffectCalcPeriodicHandlers()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l02462">Aura::CallScriptEffectCalcSpellModHandlers()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l02508">Aura::CallScriptEffectManaShieldHandlers()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l02400">Aura::CallScriptEffectPeriodicHandlers()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l02615">Aura::CallScriptEffectProcHandlers()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l02353">Aura::CallScriptEffectRemoveHandlers()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l02536">Aura::CallScriptEffectSplitHandlers()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l02420">Aura::CallScriptEffectUpdatePeriodicHandlers()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l19315">Unit::CastDelayedSpellWithPeriodicAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00700">ChangeAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01167">CleanupTriggeredSpells()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00421">GetApplicationList()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00410">GetTargetList()</a>, <a class="el" href="../../d9/d3f/boss__muru_8cpp_source.html#l00337">spell_muru_summon_blood_elves_periodic::spell_muru_summon_blood_elves_periodic_AuraScript::HandleApply()</a>, <a class="el" href="../../d1/de4/spell__generic_8cpp_source.html#l00801">spell_gen_baby_murloc_passive::HandleApply()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05599">HandleAuraLinked()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03997">HandleAuraModStat()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16828">Unit::HandleAuraRaidProcFromCharge()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16739">Unit::HandleAuraRaidProcFromChargeWithValue()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l06013">Unit::HandleDummyAuraProc()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00733">HandleEffect()</a>, <a class="el" href="../../db/d55/spell__druid_8cpp_source.html#l00472">spell_dru_idol_lifebloom::HandleEffectCalcSpellMod()</a>, <a class="el" href="../../d8/d08/spell__warrior_8cpp_source.html#l00772">spell_warr_glyph_of_sunder_armor::HandleEffectCalcSpellMod()</a>, <a class="el" href="../../db/dfb/spell__quest_8cpp_source.html#l02249">spell_q12619_emblazon_runeblade::HandleEffectPeriodic()</a>, <a class="el" href="../../d5/d4c/oculus_8cpp_source.html#l00913">spell_oculus_rider_aura::spell_oculus_rider_auraAuraScript::HandleOnEffectApply()</a>, <a class="el" href="../../d1/d88/boss__flame__leviathan_8cpp_source.html#l01927">spell_transitus_shield_beam::spell_transitus_shield_beam_AuraScript::HandleOnEffectApply()</a>, <a class="el" href="../../da/d7e/boss__kiljaeden_8cpp_source.html#l01038">spell_kiljaeden_shadow_spike::spell_kiljaeden_shadow_spike_AuraScript::HandlePeriodic()</a>, <a class="el" href="../../da/d7e/boss__kiljaeden_8cpp_source.html#l01258">spell_kiljaeden_armageddon_periodic::spell_kiljaeden_armageddon_periodic_AuraScript::HandlePeriodic()</a>, <a class="el" href="../../dd/dd6/boss__halion_8cpp_source.html#l01270">spell_halion_twilight_cutter_periodic::spell_halion_twilight_cutter_periodic_AuraScript::HandlePeriodic()</a>, <a class="el" href="../../d5/d4c/oculus_8cpp_source.html#l00788">spell_oculus_ride_ruby_emerald_amber_drake_que::spell_oculus_ride_ruby_emerald_amber_drake_que_AuraScript::HandlePeriodic()</a>, <a class="el" href="../../d6/d51/spell__dk_8cpp_source.html#l00801">spell_dk_pet_scaling::HandlePeriodic()</a>, <a class="el" href="../../d1/de4/spell__generic_8cpp_source.html#l00485">spell_pet_hit_expertise_scalling::HandlePeriodic()</a>, <a class="el" href="../../db/dee/spell__hunter_8cpp_source.html#l00230">spell_hun_generic_scaling::HandlePeriodic()</a>, <a class="el" href="../../d3/df8/spell__mage_8cpp_source.html#l00309">spell_mage_pet_scaling::HandlePeriodic()</a>, <a class="el" href="../../df/dd5/spell__shaman_8cpp_source.html#l00236">spell_sha_feral_spirit_scaling::HandlePeriodic()</a>, <a class="el" href="../../d1/dd5/spell__warlock_8cpp_source.html#l00194">spell_warl_improved_demonic_tactics::HandlePeriodic()</a>, <a class="el" href="../../d1/dd5/spell__warlock_8cpp_source.html#l00259">spell_warl_demonic_knowledge::HandlePeriodic()</a>, <a class="el" href="../../d1/dd5/spell__warlock_8cpp_source.html#l00333">spell_warl_generic_scaling::HandlePeriodic()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06190">HandlePeriodicDamageAurasTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06454">HandlePeriodicHealAurasTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06425">HandlePeriodicHealthFunnelAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06329">HandlePeriodicHealthLeechAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06596">HandlePeriodicManaLeechAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06737">HandlePeriodicPowerBurnAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05861">HandlePeriodicTriggerSpellAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06157">HandlePeriodicTriggerSpellWithValueAuraTick()</a>, <a class="el" href="../../db/d6e/spell__item_8cpp_source.html#l02141">spell_item_unsated_craving::HandleProc()</a>, <a class="el" href="../../db/d16/spell__paladin_8cpp_source.html#l00222">spell_pal_sacred_shield_base::HandleProc()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l08377">Unit::HandleProcTriggerSpell()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06784">HandleProcTriggerSpellAuraProc()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06842">HandleRaidProcFromChargeAuraProc()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06890">HandleRaidProcFromChargeWithValueAuraProc()</a>, <a class="el" href="../../d8/ddf/boss__professor__putricide_8cpp_source.html#l01205">spell_putricide_mutated_plague::spell_putricide_mutated_plague_AuraScript::HandleTriggerSpell()</a>, <a class="el" href="../../db/dee/spell__hunter_8cpp_source.html#l00720">spell_hun_sniper_training::HandleUpdatePeriodic()</a>, <a class="el" href="../../d8/d41/_spell_8cpp_source.html#l08407">TriggeredByAuraSpellData::Init()</a>, <a class="el" href="../../d3/d18/boss__hadronox_8cpp_source.html#l00336">spell_hadronox_summon_periodic::spell_hadronox_summon_periodic_AuraScript::OnApply()</a>, <a class="el" href="../../d5/d41/boss__gruul_8cpp_source.html#l00205">spell_gruul_ground_slam_trigger::spell_gruul_ground_slam_trigger_AuraScript::OnApply()</a>, <a class="el" href="../../d4/dc9/boss__kalecgos_8cpp_source.html#l00690">spell_kalecgos_curse_of_boundless_agony::spell_kalecgos_curse_of_boundless_agony_AuraScript::OnPeriodic()</a>, <a class="el" href="../../da/d78/boss__the__lich__king_8cpp_source.html#l02943">spell_the_lich_king_vile_spirits::spell_the_lich_king_vile_spirits_AuraScript::OnPeriodic()</a>, <a class="el" href="../../d1/d88/boss__flame__leviathan_8cpp_source.html#l01764">spell_tar_blaze::spell_tar_blaze_AuraScript::OnPeriodic()</a>, <a class="el" href="../../d0/d89/boss__thorim_8cpp_source.html#l01768">spell_thorim_lightning_pillar_P2::spell_thorim_lightning_pillar_P2_AuraScript::OnPeriodic()</a>, <a class="el" href="../../d5/df2/boss__fathomlord__karathress_8cpp_source.html#l00195">spell_karathress_power_of_caribdis::spell_karathress_power_of_caribdis_AuraScript::OnPeriodic()</a>, <a class="el" href="../../df/de3/boss__leotheras__the__blind_8cpp_source.html#l00470">spell_leotheras_demon_link::spell_leotheras_demon_link_AuraScript::OnPeriodic()</a>, <a class="el" href="../../d1/de4/spell__generic_8cpp_source.html#l00896">spell_gen_periodic_knock_away::OnPeriodic()</a>, <a class="el" href="../../da/de8/boss__broggok_8cpp_source.html#l00183">spell_broggok_poison_cloud::spell_broggok_poison_cloud_AuraScript::PeriodicTick()</a>, <a class="el" href="../../de/d97/boss__mother__shahraz_8cpp_source.html#l00210">spell_mother_shahraz_beam_periodic::spell_mother_shahraz_beam_periodic_AuraScript::Update()</a>, <a class="el" href="../../de/d97/boss__mother__shahraz_8cpp_source.html#l00243">spell_mother_shahraz_saber_lash::spell_mother_shahraz_saber_lash_AuraScript::Update()</a>, <a class="el" href="../../db/dbe/illidari__council_8cpp_source.html#l00730">spell_illidari_council_deadly_strike::spell_illidari_council_deadly_strike_AuraScript::Update()</a>, <a class="el" href="../../df/d41/instance__black__temple_8cpp_source.html#l00467">spell_black_temple_charge_rage::spell_black_temple_charge_rage_AuraScript::Update()</a>, <a class="el" href="../../df/d41/instance__black__temple_8cpp_source.html#l00495">spell_black_temple_shadow_inferno::spell_black_temple_shadow_inferno_AuraScript::Update()</a>, <a class="el" href="../../df/d41/instance__black__temple_8cpp_source.html#l00534">spell_black_temple_spell_absorption::spell_black_temple_spell_absorption_AuraScript::Update()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00889">Update()</a>, and <a class="el" href="../../df/d07/_stat_system_8cpp_source.html#l00323">Player::UpdateAttackPowerAndDamage()</a>.</p>

</div>
</div>
<a id="a6ea46b2ccefe8e6a25eef466847503aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ea46b2ccefe8e6a25eef466847503aa">&#9670;&nbsp;</a></span>GetForcedAmount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> AuraEffect::GetForcedAmount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00057">57</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../da/df1/class_aura_effect.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00120">m_amount</a>.</p>

</div>
</div>
<a id="a63863fb01a8cf08251c0b4482be6a20f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63863fb01a8cf08251c0b4482be6a20f">&#9670;&nbsp;</a></span>GetId()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> AuraEffect::GetId </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">431</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;{</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a49bc14059c2bd3785231c52e0d54d382">Id</a>;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00315">SpellInfo::Id</a>, and <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00115">m_spellInfo</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00382">AuraEffect()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00451">CalculateAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00586">CalculatePeriodic()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00676">CalculateSpellMod()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l19315">Unit::CastDelayedSpellWithPeriodicAmount()</a>, <a class="el" href="../../d1/d40/_spell_effects_8cpp_source.html#l01517">Spell::EffectHeal()</a>, <a class="el" href="../../d1/d40/_spell_effects_8cpp_source.html#l00322">Spell::EffectSchoolDMG()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03198">HandleAuraControlVehicle()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04980">HandleAuraDummy()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03839">HandleAuraModDmgImmunity()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03744">HandleAuraModEffectImmunity()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03260">HandleAuraModIncreaseFlightSpeed()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03780">HandleAuraModSchoolImmunity()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03997">HandleAuraModStat()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03767">HandleAuraModStateImmunity()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l01253">Aura::HandleAuraSpecificMods()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02110">HandleAuraTransform()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l06013">Unit::HandleDummyAuraProc()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03677">HandleModMechanicImmunity()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03357">HandleModStateImmunityMask()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04121">HandleModTotalPercentStat()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06669">HandleObsModPowerAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06190">HandlePeriodicDamageAurasTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05770">HandlePeriodicDummyAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06703">HandlePeriodicEnergizeAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06454">HandlePeriodicHealAurasTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06329">HandlePeriodicHealthLeechAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06596">HandlePeriodicManaLeechAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05861">HandlePeriodicTriggerSpellAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06157">HandlePeriodicTriggerSpellWithValueAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06822">HandleProcTriggerDamageAuraProc()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l08377">Unit::HandleProcTriggerSpell()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06784">HandleProcTriggerSpellAuraProc()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06801">HandleProcTriggerSpellWithValueAuraProc()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06842">HandleRaidProcFromChargeAuraProc()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06890">HandleRaidProcFromChargeWithValueAuraProc()</a>, <a class="el" href="../../dc/ddf/brewfest_8cpp_source.html#l01061">spell_brewfest_ram_fatigue::spell_brewfest_ram_fatigue_AuraScript::PrepareAuraScript()</a>, <a class="el" href="../../d4/da9/boss__ignis_8cpp_source.html#l00462">spell_ignis_scorch::spell_ignis_scorch_AuraScript::PrepareAuraScript()</a>, <a class="el" href="../../db/da2/ulduar_8cpp_source.html#l00083">spell_ulduar_energy_sap::spell_ulduar_energy_sap_AuraScript::PrepareAuraScript()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l15426">Unit::ProcDamageAndSpellFor()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05834">Unit::SendPeriodicAuraLog()</a>, and <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00912">UpdatePeriodic()</a>.</p>

</div>
</div>
<a id="aa183791665930afb43bbac2163b1d8d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa183791665930afb43bbac2163b1d8d4">&#9670;&nbsp;</a></span>GetMiscValue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> AuraEffect::GetMiscValue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">441</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;{</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code" href="../../da/df1/class_aura_effect.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>].MiscValue;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00387">SpellInfo::Effects</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00137">m_effIndex</a>, and <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00115">m_spellInfo</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d82/_player_8cpp_source.html#l06813">Player::_ApplyWeaponDependentAuraDamageMod()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l00156">AuraApplication::_HandleEffect()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00791">ApplySpellMod()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01875">Unit::CalcAbsorbResist()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00676">CalculateSpellMod()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05462">Unit::GetMaxPositiveAuraModifierByMiscMask()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05565">HandleAuraConvertRune()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04980">HandleAuraDummy()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03908">HandleAuraModBaseResistancePCT()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03849">HandleAuraModDispelImmunity()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03839">HandleAuraModDmgImmunity()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03744">HandleAuraModEffectImmunity()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05526">HandleAuraModFaction()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04300">HandleAuraModIncreaseEnergy()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04320">HandleAuraModIncreaseEnergyPercent()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03890">HandleAuraModResistance()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03867">HandleAuraModResistanceExclusive()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04179">HandleAuraModResistenceOfStatPercent()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03780">HandleAuraModSchoolImmunity()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01828">HandleAuraModShapeshift()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02784">HandleAuraModSkill()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03997">HandleAuraModStat()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03767">HandleAuraModStateImmunity()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02805">HandleAuraMounted()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05694">HandleAuraOverrideSpells()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05724">HandleAuraSetVehicle()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02675">HandleAuraTrackCreatures()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02691">HandleAuraTrackResources()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02110">HandleAuraTransform()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01673">HandleDetectAmore()</a>, <a class="el" href="../../d1/dd5/spell__warlock_8cpp_source.html#l00180">spell_warl_improved_demonic_tactics::HandleEffectCalcSpellMod()</a>, <a class="el" href="../../d8/d08/spell__warrior_8cpp_source.html#l00772">spell_warr_glyph_of_sunder_armor::HandleEffectCalcSpellMod()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05485">HandleForceReaction()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03953">HandleModBaseResistance()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04748">HandleModDamageDone()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04833">HandleModDamagePercentDone()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01515">HandleModInvisibility()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01490">HandleModInvisibilityDetect()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03677">HandleModMechanicImmunity()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04023">HandleModPercentStat()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04909">HandleModPowerCost()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04896">HandleModPowerCostPCT()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04218">HandleModPowerRegen()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04634">HandleModRating()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04649">HandleModRatingFromStat()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03932">HandleModResistancePercent()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04503">HandleModSpellCritChanceShool()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03357">HandleModStateImmunityMask()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01607">HandleModStealth()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01582">HandleModStealthDetect()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01656">HandleModStealthLevel()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03975">HandleModTargetResistance()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02978">HandleModThreat()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04121">HandleModTotalPercentStat()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06669">HandleObsModPowerAuraTick()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l09300">Unit::HandleOverrideClassScriptAuraProc()</a>, <a class="el" href="../../d6/d51/spell__dk_8cpp_source.html#l00801">spell_dk_pet_scaling::HandlePeriodic()</a>, <a class="el" href="../../db/dee/spell__hunter_8cpp_source.html#l00230">spell_hun_generic_scaling::HandlePeriodic()</a>, <a class="el" href="../../d3/df8/spell__mage_8cpp_source.html#l00309">spell_mage_pet_scaling::HandlePeriodic()</a>, <a class="el" href="../../df/dd5/spell__shaman_8cpp_source.html#l00236">spell_sha_feral_spirit_scaling::HandlePeriodic()</a>, <a class="el" href="../../d1/dd5/spell__warlock_8cpp_source.html#l00333">spell_warl_generic_scaling::HandlePeriodic()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06703">HandlePeriodicEnergizeAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06596">HandlePeriodicManaLeechAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06737">HandlePeriodicPowerBurnAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01189">HandleShapeshiftBoosts()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l01914">Aura::IsAuraStronger()</a>, <a class="el" href="../../d2/df4/boss__alar_8cpp_source.html#l00436">spell_alar_ember_blast_death::spell_alar_ember_blast_death_AuraScript::OnApply()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l15426">Unit::ProcDamageAndSpellFor()</a>, and <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05834">Unit::SendPeriodicAuraLog()</a>.</p>

</div>
</div>
<a id="a88fa5605246883e095cd82ebd5d75bef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88fa5605246883e095cd82ebd5d75bef">&#9670;&nbsp;</a></span>GetMiscValueB()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> AuraEffect::GetMiscValueB </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00436">436</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;{</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code" href="../../da/df1/class_aura_effect.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>].MiscValueB;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00387">SpellInfo::Effects</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00137">m_effIndex</a>, and <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00115">m_spellInfo</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05565">HandleAuraConvertRune()</a>, and <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04218">HandleModPowerRegen()</a>.</p>

</div>
</div>
<a id="a306e4d031a37294a17fb999303b71efe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a306e4d031a37294a17fb999303b71efe">&#9670;&nbsp;</a></span>GetOldAmount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> AuraEffect::GetOldAmount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00108">108</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../da/df1/class_aura_effect.html#a5fa9f61c77274c75e6f3d8222142ab4e">m_oldAmount</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00126">m_oldAmount</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l19315">Unit::CastDelayedSpellWithPeriodicAmount()</a>.</p>

</div>
</div>
<a id="a81665a31d5e4a49027abd82be607a736"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81665a31d5e4a49027abd82be607a736">&#9670;&nbsp;</a></span>GetPctMods()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float AuraEffect::GetPctMods </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00104">104</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../da/df1/class_aura_effect.html#a8e00da47192a4d1c9139b037d07d565b">m_pctMods</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00122">m_pctMods</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00451">CalculateAmount()</a>.</p>

</div>
</div>
<a id="a6f11a0855c476d2f991995a449bcf6ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f11a0855c476d2f991995a449bcf6ae">&#9670;&nbsp;</a></span>GetPeriodicTimer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> AuraEffect::GetPeriodicTimer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00060">60</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../da/df1/class_aura_effect.html#a2d9b475cbf04d8597953802e1accc938">m_periodicTimer</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00133">m_periodicTimer</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/d1a/boss__valithria__dreamwalker_8cpp_source.html#l01285">spell_dreamwalker_decay_periodic_timer::spell_dreamwalker_decay_periodic_timer_AuraScript::DecayPeriodicTimer()</a>.</p>

</div>
</div>
<a id="a93f49c4b2f8cabfc0372c8aef24f022e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93f49c4b2f8cabfc0372c8aef24f022e">&#9670;&nbsp;</a></span>GetSpellInfo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d7d/class_spell_info.html">SpellInfo</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a>* AuraEffect::GetSpellInfo </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">47</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00115">m_spellInfo</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d82/_player_8cpp_source.html#l06780">Player::_ApplyWeaponDependentAuraCritMod()</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l06813">Player::_ApplyWeaponDependentAuraDamageMod()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l00156">AuraApplication::_HandleEffect()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01875">Unit::CalcAbsorbResist()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01029">CalcPeriodicCritChance()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00451">CalculateAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00586">CalculatePeriodic()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00571">CalculatePeriodicData()</a>, <a class="el" href="../../db/d55/spell__druid_8cpp_source.html#l00277">spell_dru_treant_scaling::CalculateResistanceAmount()</a>, <a class="el" href="../../db/dee/spell__hunter_8cpp_source.html#l00158">spell_hun_generic_scaling::CalculateResistanceAmount()</a>, <a class="el" href="../../d3/df8/spell__mage_8cpp_source.html#l00248">spell_mage_pet_scaling::CalculateResistanceAmount()</a>, <a class="el" href="../../de/d21/spell__priest_8cpp_source.html#l00067">spell_pri_shadowfiend_scaling::CalculateResistanceAmount()</a>, <a class="el" href="../../df/dd5/spell__shaman_8cpp_source.html#l00170">spell_sha_feral_spirit_scaling::CalculateResistanceAmount()</a>, <a class="el" href="../../df/dd5/spell__shaman_8cpp_source.html#l00285">spell_sha_fire_elemental_scaling::CalculateResistanceAmount()</a>, <a class="el" href="../../d1/dd5/spell__warlock_8cpp_source.html#l00277">spell_warl_generic_scaling::CalculateResistanceAmount()</a>, <a class="el" href="../../d1/dd5/spell__warlock_8cpp_source.html#l00383">spell_warl_infernal_scaling::CalculateResistanceAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00676">CalculateSpellMod()</a>, <a class="el" href="../../d6/d51/spell__dk_8cpp_source.html#l00711">spell_dk_pet_scaling::CalculateStatAmount()</a>, <a class="el" href="../../db/d55/spell__druid_8cpp_source.html#l00288">spell_dru_treant_scaling::CalculateStatAmount()</a>, <a class="el" href="../../db/dee/spell__hunter_8cpp_source.html#l00169">spell_hun_generic_scaling::CalculateStatAmount()</a>, <a class="el" href="../../d3/df8/spell__mage_8cpp_source.html#l00259">spell_mage_pet_scaling::CalculateStatAmount()</a>, <a class="el" href="../../de/d21/spell__priest_8cpp_source.html#l00078">spell_pri_shadowfiend_scaling::CalculateStatAmount()</a>, <a class="el" href="../../df/dd5/spell__shaman_8cpp_source.html#l00181">spell_sha_feral_spirit_scaling::CalculateStatAmount()</a>, <a class="el" href="../../df/dd5/spell__shaman_8cpp_source.html#l00296">spell_sha_fire_elemental_scaling::CalculateStatAmount()</a>, <a class="el" href="../../d1/dd5/spell__warlock_8cpp_source.html#l00288">spell_warl_generic_scaling::CalculateStatAmount()</a>, <a class="el" href="../../d1/dd5/spell__warlock_8cpp_source.html#l00394">spell_warl_infernal_scaling::CalculateStatAmount()</a>, <a class="el" href="../../d1/d40/_spell_effects_8cpp_source.html#l01517">Spell::EffectHeal()</a>, <a class="el" href="../../d1/d40/_spell_effects_8cpp_source.html#l00322">Spell::EffectSchoolDMG()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04980">HandleAuraDummy()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03744">HandleAuraModEffectImmunity()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03780">HandleAuraModSchoolImmunity()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01828">HandleAuraModShapeshift()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03767">HandleAuraModStateImmunity()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04428">HandleAuraModWeaponCritPercent()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02805">HandleAuraMounted()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16828">Unit::HandleAuraRaidProcFromCharge()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16739">Unit::HandleAuraRaidProcFromChargeWithValue()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02110">HandleAuraTransform()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05399">HandleChannelDeathItem()</a>, <a class="el" href="../../d6/d51/spell__dk_8cpp_source.html#l00143">spell_dk_raise_ally::HandleDummy()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l06013">Unit::HandleDummyAuraProc()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04748">HandleModDamageDone()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04833">HandleModDamagePercentDone()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03677">HandleModMechanicImmunity()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03357">HandleModStateImmunityMask()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06669">HandleObsModPowerAuraTick()</a>, <a class="el" href="../../d8/ddf/boss__professor__putricide_8cpp_source.html#l01330">spell_putricide_unbound_plague_dmg::spell_putricide_unbound_plague_dmg_AuraScript::HandlePeriodic()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06190">HandlePeriodicDamageAurasTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05770">HandlePeriodicDummyAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06703">HandlePeriodicEnergizeAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06454">HandlePeriodicHealAurasTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06425">HandlePeriodicHealthFunnelAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06329">HandlePeriodicHealthLeechAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06596">HandlePeriodicManaLeechAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06737">HandlePeriodicPowerBurnAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05861">HandlePeriodicTriggerSpellAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06157">HandlePeriodicTriggerSpellWithValueAuraTick()</a>, <a class="el" href="../../d6/d51/spell__dk_8cpp_source.html#l00554">spell_dk_blood_caked_blade::HandleProc()</a>, <a class="el" href="../../db/d16/spell__paladin_8cpp_source.html#l00108">spell_pal_seal_of_command_aura::HandleProc()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06822">HandleProcTriggerDamageAuraProc()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l08377">Unit::HandleProcTriggerSpell()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06784">HandleProcTriggerSpellAuraProc()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06801">HandleProcTriggerSpellWithValueAuraProc()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06842">HandleRaidProcFromChargeAuraProc()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06890">HandleRaidProcFromChargeWithValueAuraProc()</a>, <a class="el" href="../../d8/d41/_spell_8cpp_source.html#l08407">TriggeredByAuraSpellData::Init()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00343">Acore::AbsorbAuraOrderPred::operator()()</a>, <a class="el" href="../../d0/d70/boss__moragg_8cpp_source.html#l00141">spell_optic_link::spell_optic_linkAuraScript::PrepareAuraScript()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l15426">Unit::ProcDamageAndSpellFor()</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l12586">Player::RestoreBaseRune()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05834">Unit::SendPeriodicAuraLog()</a>, <a class="el" href="../../df/d07/_stat_system_8cpp_source.html#l00323">Player::UpdateAttackPowerAndDamage()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00912">UpdatePeriodic()</a>, and <a class="el" href="../../da/d7f/_spell_info_8cpp_source.html#l01711">SpellInfo::ValidateAttribute6SpellDamageMods()</a>.</p>

</div>
</div>
<a id="a204013c66b4f6c33b49a0baa05e16f53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a204013c66b4f6c33b49a0baa05e16f53">&#9670;&nbsp;</a></span>GetSpellModifier()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d39/struct_spell_modifier.html">SpellModifier</a>* AuraEffect::GetSpellModifier </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00045">45</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../da/df1/class_aura_effect.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00131">m_spellmod</a>.</p>

</div>
</div>
<a id="a05df315be4f02b28353b070bfb2c2fde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05df315be4f02b28353b070bfb2c2fde">&#9670;&nbsp;</a></span>GetTargetList()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::GetTargetList </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d68/_c_make_lists_8txt.html#a0b2e90260bc220565ca487d6b28606a3">std::list</a>&lt; <a class="el" href="../../da/db7/class_unit.html">Unit</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>targetList</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00410">410</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;{</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <a class="code" href="../../d2/dde/class_aura.html#af94996c697b3f790489314b6175ab311">Aura::ApplicationMap</a> <span class="keyword">const</span>&amp; targetMap = <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#a6abd11d6d72d2212edfed3c1f356fbe2">GetApplicationMap</a>();</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="comment">// remove all targets which were not added to new list - they no longer deserve area aura</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">for</span> (Aura::ApplicationMap::const_iterator appIter = targetMap.begin(); appIter != targetMap.end(); ++appIter)</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <span class="keywordflow">if</span> (appIter-&gt;second-&gt;HasEffect(<a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()))</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            targetList.push_back(appIter-&gt;second-&gt;GetTarget());</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    }</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00180">Aura::GetApplicationMap()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">GetBase()</a>, and <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00049">GetEffIndex()</a>.</p>

</div>
</div>
<a id="a0c28e995bc0e15c692c24154bab9df4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c28e995bc0e15c692c24154bab9df4d">&#9670;&nbsp;</a></span>GetTickNumber()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> AuraEffect::GetTickNumber </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00079">79</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../da/df1/class_aura_effect.html#ab8c7fb50eac3482a162cbbacd64f1625">m_tickNumber</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00135">m_tickNumber</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l19315">Unit::CastDelayedSpellWithPeriodicAmount()</a>, <a class="el" href="../../d4/d4f/boss__keleseth_8cpp_source.html#l00354">spell_frost_tomb::spell_frost_tombAuraScript::HandleEffectPeriodic()</a>, <a class="el" href="../../db/dfb/spell__quest_8cpp_source.html#l00630">spell_quest_test_flight_charging::HandleEffectPeriodicPlatform()</a>, <a class="el" href="../../db/dfb/spell__quest_8cpp_source.html#l00618">spell_quest_test_flight_charging::HandleEffectPeriodicSelf()</a>, <a class="el" href="../../d3/dec/hallows__end_8cpp_source.html#l00357">spell_hallows_end_base_fire::spell_hallows_end_base_fire_AuraScript::HandleEffectPeriodicUpdate()</a>, <a class="el" href="../../d1/de4/spell__generic_8cpp_source.html#l01322">spell_gen_burn_brutallus::HandleEffectPeriodicUpdate()</a>, <a class="el" href="../../d8/ddf/boss__professor__putricide_8cpp_source.html#l01330">spell_putricide_unbound_plague_dmg::spell_putricide_unbound_plague_dmg_AuraScript::HandlePeriodic()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06454">HandlePeriodicHealAurasTick()</a>, <a class="el" href="../../de/dc0/boss__bronjahm_8cpp_source.html#l00311">spell_bronjahm_soulstorm_channel_ooc::spell_bronjahm_soulstorm_channel_ooc_AuraScript::HandlePeriodicTick()</a>, <a class="el" href="../../de/dc0/boss__bronjahm_8cpp_source.html#l00338">spell_bronjahm_soulstorm_visual::spell_bronjahm_soulstorm_visual_AuraScript::HandlePeriodicTick()</a>, <a class="el" href="../../db/d09/boss__devourer__of__souls_8cpp_source.html#l00327">spell_wailing_souls_periodic::spell_wailing_souls_periodic_AuraScript::HandlePeriodicTick()</a>, <a class="el" href="../../de/d8f/boss__krickandick_8cpp_source.html#l00509">spell_exploding_orb_auto_grow::spell_exploding_orb_auto_grow_AuraScript::HandlePeriodicTick()</a>, <a class="el" href="../../db/d6e/spell__item_8cpp_source.html#l01140">spell_item_direbrew_remote_aura::HandlePeriodicTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05861">HandlePeriodicTriggerSpellAuraTick()</a>, <a class="el" href="../../df/dda/boss__icecrown__gunship__battle_8cpp_source.html#l01972">spell_igb_rocket_pack::spell_igb_rocket_pack_AuraScript::HandleRemove()</a>, <a class="el" href="../../d8/d41/_spell_8cpp_source.html#l08407">TriggeredByAuraSpellData::Init()</a>, <a class="el" href="../../d4/dc9/boss__kalecgos_8cpp_source.html#l00690">spell_kalecgos_curse_of_boundless_agony::spell_kalecgos_curse_of_boundless_agony_AuraScript::OnPeriodic()</a>, <a class="el" href="../../d9/d3f/boss__muru_8cpp_source.html#l00375">spell_muru_darkness::spell_muru_darkness_AuraScript::OnPeriodic()</a>, <a class="el" href="../../da/d78/boss__the__lich__king_8cpp_source.html#l02943">spell_the_lich_king_vile_spirits::spell_the_lich_king_vile_spirits_AuraScript::OnPeriodic()</a>, <a class="el" href="../../da/d78/boss__the__lich__king_8cpp_source.html#l03572">spell_the_lich_king_soul_rip::spell_the_lich_king_soul_rip_AuraScript::OnPeriodic()</a>, <a class="el" href="../../d9/d88/boss__assembly__of__iron_8cpp_source.html#l00910">spell_assembly_rune_of_summoning::spell_assembly_rune_of_summoning_AuraScript::OnPeriodic()</a>, <a class="el" href="../../d9/d02/boss__illidan_8cpp_source.html#l01249">spell_illidan_demon_transform2::spell_illidan_demon_transform2_AuraScript::OnPeriodic()</a>, <a class="el" href="../../da/d78/boss__the__lich__king_8cpp_source.html#l01893">spell_the_lich_king_infest::spell_the_lich_king_infest_AuraScript::OnUpdate()</a>, <a class="el" href="../../d2/d9d/instance__karazhan_8cpp_source.html#l00365">spell_karazhan_overload::spell_karazhan_overload_AuraScript::PeriodicTick()</a>, <a class="el" href="../../da/d0a/boss__baron__geddon_8cpp_source.html#l00161">spell_geddon_inferno::spell_geddon_inferno_AuraScript::PeriodicTick()</a>, <a class="el" href="../../d5/dd1/boss__trollgore_8cpp_source.html#l00209">spell_trollgore_corpse_explode::spell_trollgore_corpse_explode_AuraScript::PeriodicTick()</a>, <a class="el" href="../../df/df3/boss__blood__queen__lana__thel_8cpp_source.html#l00606">spell_blood_queen_pact_of_the_darkfallen_dmg::spell_blood_queen_pact_of_the_darkfallen_dmg_AuraScript::PeriodicTick()</a>, <a class="el" href="../../df/dda/boss__icecrown__gunship__battle_8cpp_source.html#l02178">spell_igb_explosion_main::spell_igb_explosion_main_AuraScript::PeriodicTick()</a>, <a class="el" href="../../d6/d1a/boss__valithria__dreamwalker_8cpp_source.html#l01249">spell_dreamwalker_mana_void::spell_dreamwalker_mana_void_AuraScript::PeriodicTick()</a>, <a class="el" href="../../da/de8/boss__broggok_8cpp_source.html#l00183">spell_broggok_poison_cloud::spell_broggok_poison_cloud_AuraScript::PeriodicTick()</a>, <a class="el" href="../../dc/d30/boss__hodir_8cpp_source.html#l01189">spell_hodir_biting_cold_main_aura::spell_hodir_biting_cold_main_aura_AuraScript::PrepareAuraScript()</a>, <a class="el" href="../../dc/d30/boss__hodir_8cpp_source.html#l01345">spell_hodir_flash_freeze::spell_hodir_flash_freeze_AuraScript::PrepareAuraScript()</a>, <a class="el" href="../../db/dd3/icecrown__citadel_8cpp_source.html#l02479">spell_icc_yh_volley::spell_icc_yh_volley_AuraScript::PrepareAuraScript()</a>, <a class="el" href="../../d4/da9/boss__ignis_8cpp_source.html#l00462">spell_ignis_scorch::spell_ignis_scorch_AuraScript::PrepareAuraScript()</a>, <a class="el" href="../../dc/d29/boss__mimiron_8cpp_source.html#l02170">spell_mimiron_rapid_burst::spell_mimiron_rapid_burst_AuraScript::PrepareAuraScript()</a>, <a class="el" href="../../d0/d70/boss__moragg_8cpp_source.html#l00141">spell_optic_link::spell_optic_linkAuraScript::PrepareAuraScript()</a>, <a class="el" href="../../d9/d1c/pit__of__saron_8cpp_source.html#l01487">spell_pos_blight::spell_pos_blightAuraScript::PrepareAuraScript()</a>, <a class="el" href="../../d1/de4/spell__generic_8cpp_source.html#l04321">spell_gen_holiday_buff_food::TriggerFoodBuff()</a>, <a class="el" href="../../de/d97/boss__mother__shahraz_8cpp_source.html#l00182">spell_mother_shahraz_random_periodic::spell_mother_shahraz_random_periodic_AuraScript::Update()</a>, and <a class="el" href="../../de/d97/boss__mother__shahraz_8cpp_source.html#l00351">spell_mother_shahraz_fatal_attraction_aura::spell_mother_shahraz_fatal_attraction_aura_AuraScript::Update()</a>.</p>

</div>
</div>
<a id="a67ca18798f448847e77665752fa4a32c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67ca18798f448847e77665752fa4a32c">&#9670;&nbsp;</a></span>GetTotalTicks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> AuraEffect::GetTotalTicks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00080">80</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../da/df1/class_aura_effect.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a> ? (<a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#a14457cfa6d589b8024bbeeb1d4aa03d3">GetMaxDuration</a>() / <a class="code" href="../../da/df1/class_aura_effect.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a>) : 1;}</div>
<div class="ttc" id="aclass_aura_html_a14457cfa6d589b8024bbeeb1d4aa03d3"><div class="ttname"><a href="../../d2/dde/class_aura.html#a14457cfa6d589b8024bbeeb1d4aa03d3">Aura::GetMaxDuration</a></div><div class="ttdeci">int32 GetMaxDuration() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dcf/_spell_auras_8h_source.html#l00129">SpellAuras.h:129</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">GetBase()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00129">Aura::GetMaxDuration()</a>, and <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00134">m_amplitude</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d55/spell__druid_8cpp_source.html#l00496">spell_dru_innervate::CalculateAmount()</a>, <a class="el" href="../../db/d55/spell__druid_8cpp_source.html#l00515">spell_dru_insect_swarm::CalculateAmount()</a>, <a class="el" href="../../d1/de4/spell__generic_8cpp_source.html#l02255">spell_gen_lifeblood::CalculateAmount()</a>, <a class="el" href="../../d1/de4/spell__generic_8cpp_source.html#l03971">spell_gen_gift_of_naaru::CalculateAmount()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l19315">Unit::CastDelayedSpellWithPeriodicAmount()</a>, <a class="el" href="../../de/d21/spell__priest_8cpp_source.html#l00720">spell_pri_renew::HandleApplyEffect()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l01253">Aura::HandleAuraSpecificMods()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06190">HandlePeriodicDamageAurasTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06454">HandlePeriodicHealAurasTick()</a>, <a class="el" href="../../db/dee/spell__hunter_8cpp_source.html#l00415">spell_hun_chimera_shot::HandleScriptEffect()</a>, <a class="el" href="../../da/de8/boss__broggok_8cpp_source.html#l00183">spell_broggok_poison_cloud::spell_broggok_poison_cloud_AuraScript::PeriodicTick()</a>, <a class="el" href="../../dc/d30/boss__hodir_8cpp_source.html#l01345">spell_hodir_flash_freeze::spell_hodir_flash_freeze_AuraScript::PrepareAuraScript()</a>, <a class="el" href="../../d4/da9/boss__ignis_8cpp_source.html#l00462">spell_ignis_scorch::spell_ignis_scorch_AuraScript::PrepareAuraScript()</a>, and <a class="el" href="../../d9/d1c/pit__of__saron_8cpp_source.html#l01487">spell_pos_blight::spell_pos_blightAuraScript::PrepareAuraScript()</a>.</p>

</div>
</div>
<a id="a45af9668ac3271c2f5a924872d0f1614"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45af9668ac3271c2f5a924872d0f1614">&#9670;&nbsp;</a></span>HandleArenaPreparation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleArenaPreparation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04921">4921</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04922"></a><span class="lineno"> 4922</span>&#160;{</div>
<div class="line"><a name="l04923"></a><span class="lineno"> 4923</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l04924"></a><span class="lineno"> 4924</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04925"></a><span class="lineno"> 4925</span>&#160; </div>
<div class="line"><a name="l04926"></a><span class="lineno"> 4926</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04927"></a><span class="lineno"> 4927</span>&#160; </div>
<div class="line"><a name="l04928"></a><span class="lineno"> 4928</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l04929"></a><span class="lineno"> 4929</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a79a7a80acdec46961b4d8aaead4ae631">SetFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881aab4868b631f1cfaf30faee627f7c9dbf">UNIT_FIELD_FLAGS</a>, <a class="code" href="../../d5/d32/_unit_8h.html#afaf72688a238d4ba16ba2ae1444cd552a41af335bbeaec4b3a181af2366a6a9ba">UNIT_FLAG_PREPARATION</a>);</div>
<div class="line"><a name="l04930"></a><span class="lineno"> 4930</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l04931"></a><span class="lineno"> 4931</span>&#160;    {</div>
<div class="line"><a name="l04932"></a><span class="lineno"> 4932</span>&#160;        <span class="comment">// do not remove unit flag if there are more than this auraEffect of that kind on unit on unit</span></div>
<div class="line"><a name="l04933"></a><span class="lineno"> 4933</span>&#160;        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>()))</div>
<div class="line"><a name="l04934"></a><span class="lineno"> 4934</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04935"></a><span class="lineno"> 4935</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a7e764fbd4b7eca84f80e36e900bca7d3">RemoveFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881aab4868b631f1cfaf30faee627f7c9dbf">UNIT_FIELD_FLAGS</a>, <a class="code" href="../../d5/d32/_unit_8h.html#afaf72688a238d4ba16ba2ae1444cd552a41af335bbeaec4b3a181af2366a6a9ba">UNIT_FLAG_PREPARATION</a>);</div>
<div class="line"><a name="l04936"></a><span class="lineno"> 4936</span>&#160;    }</div>
<div class="line"><a name="l04937"></a><span class="lineno"> 4937</span>&#160;}</div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a></div><div class="ttdeci">@ AURA_EFFECT_HANDLE_REAL</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">SpellAuraDefines.h:42</a></div></div>
<div class="ttc" id="a_unit_8h_html_afaf72688a238d4ba16ba2ae1444cd552a41af335bbeaec4b3a181af2366a6a9ba"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#afaf72688a238d4ba16ba2ae1444cd552a41af335bbeaec4b3a181af2366a6a9ba">UNIT_FLAG_PREPARATION</a></div><div class="ttdeci">@ UNIT_FLAG_PREPARATION</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00611">Unit.h:611</a></div></div>
<div class="ttc" id="a_update_fields_8h_html_a0e42dc606678c9df7884e1aad621e881aab4868b631f1cfaf30faee627f7c9dbf"><div class="ttname"><a href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881aab4868b631f1cfaf30faee627f7c9dbf">UNIT_FIELD_FLAGS</a></div><div class="ttdeci">@ UNIT_FIELD_FLAGS</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d65/_update_fields_8h_source.html#l00117">UpdateFields.h:117</a></div></div>
<div class="ttc" id="aclass_object_html_a79a7a80acdec46961b4d8aaead4ae631"><div class="ttname"><a href="../../d8/d83/class_object.html#a79a7a80acdec46961b4d8aaead4ae631">Object::SetFlag</a></div><div class="ttdeci">void SetFlag(uint16 index, uint32 newFlag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/ded/_object_8cpp_source.html#l00836">Object.cpp:836</a></div></div>
<div class="ttc" id="aclass_object_html_a7e764fbd4b7eca84f80e36e900bca7d3"><div class="ttname"><a href="../../d8/d83/class_object.html#a7e764fbd4b7eca84f80e36e900bca7d3">Object::RemoveFlag</a></div><div class="ttdeci">void RemoveFlag(uint16 index, uint32 oldFlag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/ded/_object_8cpp_source.html#l00851">Object.cpp:851</a></div></div>
<div class="ttc" id="aclass_unit_html"><div class="ttname"><a href="../../da/db7/class_unit.html">Unit</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01418">Unit.h:1419</a></div></div>
<div class="ttc" id="aclass_unit_html_a9cd076c7f1e10e71af51ffc1ea1f9136"><div class="ttname"><a href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">Unit::HasAuraType</a></div><div class="ttdeci">bool HasAuraType(AuraType auraType) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l05194">Unit.cpp:5194</a></div></div>
<div class="ttc" id="aclass_unit_html_af387d5e18806e37f65ebc3408c0b8712"><div class="ttname"><a href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">Unit::GetTarget</a></div><div class="ttdeci">ObjectGuid GetTarget() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l02502">Unit.h:2502</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00446">GetAuraType()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05194">Unit::HasAuraType()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00851">Object::RemoveFlag()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00836">Object::SetFlag()</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00117">UNIT_FIELD_FLAGS</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00611">UNIT_FLAG_PREPARATION</a>.</p>

</div>
</div>
<a id="a696f3f2b219427697a36c4d3dd7990a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a696f3f2b219427697a36c4d3dd7990a5">&#9670;&nbsp;</a></span>HandleAuraAllowFlight()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraAllowFlight </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02854">2854</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;{</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160; </div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160; </div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;    {</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;        <span class="comment">// do not remove unit flag if there are more than this auraEffect of that kind on unit on unit</span></div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>()) || target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799aee4933438da47b18e67ffeb26e91f20b">SPELL_AURA_MOD_INCREASE_MOUNTED_FLIGHT_SPEED</a>))</div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;    }</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160; </div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a8589825a8a8fd6e20c48af3605297bd4">SetCanFly</a>(<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160; </div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a> &amp;&amp; target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2a93dfa528ffc48db4993fb7ac62696db9">TYPEID_UNIT</a> &amp;&amp; !target-&gt;<a class="code" href="../../da/db7/class_unit.html#a55b787bbffa61290e6b6a247f2927c90">IsLevitating</a>())</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#aae6570959bf6129418e1db63aeafdc1a">GetMotionMaster</a>()-&gt;<a class="code" href="../../df/d4d/class_motion_master.html#ae37d25ba49a3887faa07bc194f3447fd">MoveFall</a>();</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;}</div>
<div class="ttc" id="a_object_guid_8h_html_a183c40b2ba67065929d70b3987da4cc2a93dfa528ffc48db4993fb7ac62696db9"><div class="ttname"><a href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2a93dfa528ffc48db4993fb7ac62696db9">TYPEID_UNIT</a></div><div class="ttdeci">@ TYPEID_UNIT</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d83/_object_guid_8h_source.html#l00037">ObjectGuid.h:37</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799aee4933438da47b18e67ffeb26e91f20b"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799aee4933438da47b18e67ffeb26e91f20b">SPELL_AURA_MOD_INCREASE_MOUNTED_FLIGHT_SPEED</a></div><div class="ttdeci">@ SPELL_AURA_MOD_INCREASE_MOUNTED_FLIGHT_SPEED</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00270">SpellAuraDefines.h:270</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a></div><div class="ttdeci">@ AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00048">SpellAuraDefines.h:48</a></div></div>
<div class="ttc" id="aclass_motion_master_html_ae37d25ba49a3887faa07bc194f3447fd"><div class="ttname"><a href="../../df/d4d/class_motion_master.html#ae37d25ba49a3887faa07bc194f3447fd">MotionMaster::MoveFall</a></div><div class="ttdeci">void MoveFall(uint32 id=0, bool addFlagForNPC=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d24/_motion_master_8cpp_source.html#l00548">MotionMaster.cpp:548</a></div></div>
<div class="ttc" id="aclass_unit_html_a55b787bbffa61290e6b6a247f2927c90"><div class="ttname"><a href="../../da/db7/class_unit.html#a55b787bbffa61290e6b6a247f2927c90">Unit::IsLevitating</a></div><div class="ttdeci">bool IsLevitating() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l02447">Unit.h:2447</a></div></div>
<div class="ttc" id="aclass_unit_html_a8589825a8a8fd6e20c48af3605297bd4"><div class="ttname"><a href="../../da/db7/class_unit.html#a8589825a8a8fd6e20c48af3605297bd4">Unit::SetCanFly</a></div><div class="ttdeci">virtual bool SetCanFly(bool enable, bool packetOnly=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l19711">Unit.cpp:19711</a></div></div>
<div class="ttc" id="aclass_unit_html_aae6570959bf6129418e1db63aeafdc1a"><div class="ttname"><a href="../../da/db7/class_unit.html#aae6570959bf6129418e1db63aeafdc1a">Unit::GetMotionMaster</a></div><div class="ttdeci">MotionMaster * GetMotionMaster()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l02345">Unit.h:2345</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00446">GetAuraType()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02345">Unit::GetMotionMaster()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05194">Unit::HasAuraType()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02447">Unit::IsLevitating()</a>, <a class="el" href="../../d9/d24/_motion_master_8cpp_source.html#l00548">MotionMaster::MoveFall()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l19711">Unit::SetCanFly()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00270">SPELL_AURA_MOD_INCREASE_MOUNTED_FLIGHT_SPEED</a>, and <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00037">TYPEID_UNIT</a>.</p>

</div>
</div>
<a id="a8229a29c8125b2558b1a875ae3deace8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8229a29c8125b2558b1a875ae3deace8">&#9670;&nbsp;</a></span>HandleAuraAllowOnlyAbility()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraAllowOnlyAbility </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02650">2650</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;{</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160; </div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160; </div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;    {</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;            target-&gt;<a class="code" href="../../d8/d83/class_object.html#a79a7a80acdec46961b4d8aaead4ae631">SetFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a65a8142f4727b52425e593eb2727d9f4">PLAYER_FLAGS</a>, <a class="code" href="../../d1/d39/_player_8h.html#a486dd000e9a9532459d9dd9010570621a0d4e89dc06c8c0976de45352f9800b9b">PLAYER_ALLOW_ONLY_ABILITY</a>);</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;        {</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;            <span class="comment">// do not remove unit flag if there are more than this auraEffect of that kind on unit on unit</span></div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;            <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a914df68f2d9f91943ee1c79f30eb81c2">SPELL_AURA_ALLOW_ONLY_ABILITY</a>))</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;            target-&gt;<a class="code" href="../../d8/d83/class_object.html#a7e764fbd4b7eca84f80e36e900bca7d3">RemoveFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a65a8142f4727b52425e593eb2727d9f4">PLAYER_FLAGS</a>, <a class="code" href="../../d1/d39/_player_8h.html#a486dd000e9a9532459d9dd9010570621a0d4e89dc06c8c0976de45352f9800b9b">PLAYER_ALLOW_ONLY_ABILITY</a>);</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;        }</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;    }</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;}</div>
<div class="ttc" id="a_player_8h_html_a486dd000e9a9532459d9dd9010570621a0d4e89dc06c8c0976de45352f9800b9b"><div class="ttname"><a href="../../d1/d39/_player_8h.html#a486dd000e9a9532459d9dd9010570621a0d4e89dc06c8c0976de45352f9800b9b">PLAYER_ALLOW_ONLY_ABILITY</a></div><div class="ttdeci">@ PLAYER_ALLOW_ONLY_ABILITY</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l00480">Player.h:480</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a914df68f2d9f91943ee1c79f30eb81c2"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a914df68f2d9f91943ee1c79f30eb81c2">SPELL_AURA_ALLOW_ONLY_ABILITY</a></div><div class="ttdeci">@ SPELL_AURA_ALLOW_ONLY_ABILITY</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00326">SpellAuraDefines.h:326</a></div></div>
<div class="ttc" id="a_update_fields_8h_html_a0e42dc606678c9df7884e1aad621e881a65a8142f4727b52425e593eb2727d9f4"><div class="ttname"><a href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a65a8142f4727b52425e593eb2727d9f4">PLAYER_FLAGS</a></div><div class="ttdeci">@ PLAYER_FLAGS</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d65/_update_fields_8h_source.html#l00178">UpdateFields.h:178</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05194">Unit::HasAuraType()</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l00480">PLAYER_ALLOW_ONLY_ABILITY</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00178">PLAYER_FLAGS</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00851">Object::RemoveFlag()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00836">Object::SetFlag()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00326">SPELL_AURA_ALLOW_ONLY_ABILITY</a>, and <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>.</p>

</div>
</div>
<a id="a1d873a20f6269d508fee14b54f8190cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d873a20f6269d508fee14b54f8190cb">&#9670;&nbsp;</a></span>HandleAuraCloneCaster()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraCloneCaster </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02346">2346</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;{</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160; </div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160; </div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;    {</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;        <a class="code" href="../../da/db7/class_unit.html">Unit</a>* caster = <a class="code" href="../../da/df1/class_aura_effect.html#a29cf330277aeb89d17d18f6e112f035b">GetCaster</a>();</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;        <span class="keywordflow">if</span> (!caster || caster == target)</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160; </div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;        <span class="comment">// What must be cloned? at least display and scale</span></div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#aab919c89c1c0fead6ece2c26e6c565a4">SetDisplayId</a>(caster-&gt;<a class="code" href="../../da/db7/class_unit.html#ac0d5e9692f6b96f3557333bbcaa80624">GetDisplayId</a>());</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a79a7a80acdec46961b4d8aaead4ae631">SetFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a6b03ad8147a368bbf29c0b92b12b0679">UNIT_FIELD_FLAGS_2</a>, <a class="code" href="../../d5/d32/_unit_8h.html#afd9f193edd86cc61d3f2413e3a1eaef5a1355d2f1caddf5ed3ecc942b37f16e27">UNIT_FLAG2_MIRROR_IMAGE</a>);</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;    }</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;    {</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#aab919c89c1c0fead6ece2c26e6c565a4">SetDisplayId</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#a8ac9fa13ad31b42e5d1372694d22a799">GetNativeDisplayId</a>());</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a7e764fbd4b7eca84f80e36e900bca7d3">RemoveFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a6b03ad8147a368bbf29c0b92b12b0679">UNIT_FIELD_FLAGS_2</a>, <a class="code" href="../../d5/d32/_unit_8h.html#afd9f193edd86cc61d3f2413e3a1eaef5a1355d2f1caddf5ed3ecc942b37f16e27">UNIT_FLAG2_MIRROR_IMAGE</a>);</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;    }</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;}</div>
<div class="ttc" id="a_unit_8h_html_afd9f193edd86cc61d3f2413e3a1eaef5a1355d2f1caddf5ed3ecc942b37f16e27"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#afd9f193edd86cc61d3f2413e3a1eaef5a1355d2f1caddf5ed3ecc942b37f16e27">UNIT_FLAG2_MIRROR_IMAGE</a></div><div class="ttdeci">@ UNIT_FLAG2_MIRROR_IMAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00647">Unit.h:647</a></div></div>
<div class="ttc" id="a_update_fields_8h_html_a0e42dc606678c9df7884e1aad621e881a6b03ad8147a368bbf29c0b92b12b0679"><div class="ttname"><a href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a6b03ad8147a368bbf29c0b92b12b0679">UNIT_FIELD_FLAGS_2</a></div><div class="ttdeci">@ UNIT_FIELD_FLAGS_2</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d65/_update_fields_8h_source.html#l00118">UpdateFields.h:118</a></div></div>
<div class="ttc" id="aclass_unit_html_a8ac9fa13ad31b42e5d1372694d22a799"><div class="ttname"><a href="../../da/db7/class_unit.html#a8ac9fa13ad31b42e5d1372694d22a799">Unit::GetNativeDisplayId</a></div><div class="ttdeci">uint32 GetNativeDisplayId() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l02255">Unit.h:2255</a></div></div>
<div class="ttc" id="aclass_unit_html_aab919c89c1c0fead6ece2c26e6c565a4"><div class="ttname"><a href="../../da/db7/class_unit.html#aab919c89c1c0fead6ece2c26e6c565a4">Unit::SetDisplayId</a></div><div class="ttdeci">virtual void SetDisplayId(uint32 modelId)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l16071">Unit.cpp:16071</a></div></div>
<div class="ttc" id="aclass_unit_html_ac0d5e9692f6b96f3557333bbcaa80624"><div class="ttname"><a href="../../da/db7/class_unit.html#ac0d5e9692f6b96f3557333bbcaa80624">Unit::GetDisplayId</a></div><div class="ttdeci">uint32 GetDisplayId()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l02253">Unit.h:2253</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00040">GetCaster()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02253">Unit::GetDisplayId()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02255">Unit::GetNativeDisplayId()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00851">Object::RemoveFlag()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16071">Unit::SetDisplayId()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00836">Object::SetFlag()</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00118">UNIT_FIELD_FLAGS_2</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00647">UNIT_FLAG2_MIRROR_IMAGE</a>.</p>

</div>
</div>
<a id="a65d82e7ba5aecd7018f082a7580fc491"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65d82e7ba5aecd7018f082a7580fc491">&#9670;&nbsp;</a></span>HandleAuraControlVehicle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraControlVehicle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Such auras are applied from a caster(=player) to a vehicle. This has been verified using spell #49256 </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03198">3198</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;{</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>))</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160; </div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160; </div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;    <span class="keywordflow">if</span> (!target-&gt;<a class="code" href="../../da/db7/class_unit.html#a0414b693087d7f3acc4a13eadb619660">IsVehicle</a>())</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160; </div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* caster = <a class="code" href="../../da/df1/class_aura_effect.html#a29cf330277aeb89d17d18f6e112f035b">GetCaster</a>();</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160; </div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;    <span class="keywordflow">if</span> (!caster || caster == target)</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160; </div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;    {</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;        <span class="comment">// Currently spells that have base points  0 and DieSides 0 = &quot;0/0&quot; exception are pushed to -1,</span></div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;        <span class="comment">// however the idea of 0/0 is to ingore flag VEHICLE_SEAT_FLAG_CAN_ENTER_OR_EXIT and -1 checks for it,</span></div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;        <span class="comment">// so this break such spells or most of them.</span></div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;        <span class="comment">// Current formula about m_amount: effect base points + dieside - 1</span></div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;        <span class="comment">// TO DO: Reasearch more about 0/0 and fix it.</span></div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;        caster-&gt;<a class="code" href="../../da/db7/class_unit.html#ac6fc712b61598c0a93e40a5fb33e7157">_EnterVehicle</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#ab5bd7480bb38a756459b9626c50576b7">GetVehicleKit</a>(), <a class="code" href="../../da/df1/class_aura_effect.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a> - 1, aurApp);</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;    }</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;    {</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>() == 53111) <span class="comment">// Devour Humanoid</span></div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;        {</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;            <a class="code" href="../../da/db7/class_unit.html#a9460fa097109489bcc6f710804be072a">Unit::Kill</a>(target, caster);</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;            <span class="keywordflow">if</span> (caster-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2a93dfa528ffc48db4993fb7ac62696db9">TYPEID_UNIT</a>)</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;                caster-&gt;<a class="code" href="../../d8/d83/class_object.html#a4a4bdac0d151f9193aa3581bda31193c">ToCreature</a>()-&gt;<a class="code" href="../../d1/dac/class_creature.html#a6f6a5dc263a9c68e7712b01da2065dd9">RemoveCorpse</a>();</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;        }</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160; </div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;        caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a63db938dab963f70662b18baf84237c5">_ExitVehicle</a>();</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;        <span class="comment">// some SPELL_AURA_CONTROL_VEHICLE auras have a dummy effect on the player - remove them</span></div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;        caster-&gt;<a class="code" href="../../da/db7/class_unit.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;    }</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;}</div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a></div><div class="ttdeci">@ AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">SpellAuraDefines.h:49</a></div></div>
<div class="ttc" id="aclass_creature_html_a6f6a5dc263a9c68e7712b01da2065dd9"><div class="ttname"><a href="../../d1/dac/class_creature.html#a6f6a5dc263a9c68e7712b01da2065dd9">Creature::RemoveCorpse</a></div><div class="ttdeci">void RemoveCorpse(bool setSpawnTime=true, bool skipVisibility=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d9d/_creature_8cpp_source.html#l00309">Creature.cpp:309</a></div></div>
<div class="ttc" id="aclass_object_html_a4a4bdac0d151f9193aa3581bda31193c"><div class="ttname"><a href="../../d8/d83/class_object.html#a4a4bdac0d151f9193aa3581bda31193c">Object::ToCreature</a></div><div class="ttdeci">Creature * ToCreature()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d30/_object_8h_source.html#l00183">Object.h:183</a></div></div>
<div class="ttc" id="aclass_unit_html_a0414b693087d7f3acc4a13eadb619660"><div class="ttname"><a href="../../da/db7/class_unit.html#a0414b693087d7f3acc4a13eadb619660">Unit::IsVehicle</a></div><div class="ttdeci">bool IsVehicle() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01537">Unit.h:1537</a></div></div>
<div class="ttc" id="aclass_unit_html_a63db938dab963f70662b18baf84237c5"><div class="ttname"><a href="../../da/db7/class_unit.html#a63db938dab963f70662b18baf84237c5">Unit::_ExitVehicle</a></div><div class="ttdeci">void _ExitVehicle(Position const *exitPosition=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l18841">Unit.cpp:18841</a></div></div>
<div class="ttc" id="aclass_unit_html_a9460fa097109489bcc6f710804be072a"><div class="ttname"><a href="../../da/db7/class_unit.html#a9460fa097109489bcc6f710804be072a">Unit::Kill</a></div><div class="ttdeci">static void Kill(Unit *killer, Unit *victim, bool durabilityLoss=true, WeaponAttackType attackType=BASE_ATTACK, SpellInfo const *spellProto=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l16879">Unit.cpp:16879</a></div></div>
<div class="ttc" id="aclass_unit_html_ab5bd7480bb38a756459b9626c50576b7"><div class="ttname"><a href="../../da/db7/class_unit.html#ab5bd7480bb38a756459b9626c50576b7">Unit::GetVehicleKit</a></div><div class="ttdeci">Vehicle * GetVehicleKit() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l02422">Unit.h:2422</a></div></div>
<div class="ttc" id="aclass_unit_html_ac6fc712b61598c0a93e40a5fb33e7157"><div class="ttname"><a href="../../da/db7/class_unit.html#ac6fc712b61598c0a93e40a5fb33e7157">Unit::_EnterVehicle</a></div><div class="ttdeci">void _EnterVehicle(Vehicle *vehicle, int8 seatId, AuraApplication const *aurApp=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l18725">Unit.cpp:18725</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l18725">Unit::_EnterVehicle()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l18841">Unit::_ExitVehicle()</a>, <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00040">GetCaster()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">GetId()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02422">Unit::GetVehicleKit()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01537">Unit::IsVehicle()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16879">Unit::Kill()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00120">m_amount</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04420">Unit::RemoveAurasDueToSpell()</a>, <a class="el" href="../../d3/d9d/_creature_8cpp_source.html#l00309">Creature::RemoveCorpse()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00183">Object::ToCreature()</a>, and <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00037">TYPEID_UNIT</a>.</p>

</div>
</div>
<a id="aaf478059af657f8126f4979f94b60159"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf478059af657f8126f4979f94b60159">&#9670;&nbsp;</a></span>HandleAuraConvertRune()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraConvertRune </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05565">5565</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05566"></a><span class="lineno"> 5566</span>&#160;{</div>
<div class="line"><a name="l05567"></a><span class="lineno"> 5567</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l05568"></a><span class="lineno"> 5568</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05569"></a><span class="lineno"> 5569</span>&#160; </div>
<div class="line"><a name="l05570"></a><span class="lineno"> 5570</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l05571"></a><span class="lineno"> 5571</span>&#160; </div>
<div class="line"><a name="l05572"></a><span class="lineno"> 5572</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l05573"></a><span class="lineno"> 5573</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05574"></a><span class="lineno"> 5574</span>&#160; </div>
<div class="line"><a name="l05575"></a><span class="lineno"> 5575</span>&#160;    <a class="code" href="../../d8/d53/class_player.html">Player</a>* player = target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>();</div>
<div class="line"><a name="l05576"></a><span class="lineno"> 5576</span>&#160; </div>
<div class="line"><a name="l05577"></a><span class="lineno"> 5577</span>&#160;    <span class="keywordflow">if</span> (player-&gt;<a class="code" href="../../da/db7/class_unit.html#a58a507ebe628930b8a506144b364d84b">getClass</a>() != <a class="code" href="../../df/d0b/_shared_defines_8h.html#a86e4e3df7a5142175aa5df522d3346cfa7f7b30426fd386c181799196c1739058">CLASS_DEATH_KNIGHT</a>)</div>
<div class="line"><a name="l05578"></a><span class="lineno"> 5578</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05579"></a><span class="lineno"> 5579</span>&#160; </div>
<div class="line"><a name="l05580"></a><span class="lineno"> 5580</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> runes = <a class="code" href="../../da/df1/class_aura_effect.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a>;</div>
<div class="line"><a name="l05581"></a><span class="lineno"> 5581</span>&#160;    <span class="comment">// convert number of runes specified in aura amount of rune type in miscvalue to runetype in miscvalueb</span></div>
<div class="line"><a name="l05582"></a><span class="lineno"> 5582</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l05583"></a><span class="lineno"> 5583</span>&#160;    {</div>
<div class="line"><a name="l05584"></a><span class="lineno"> 5584</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> i = 0; i &lt; <a class="code" href="../../d1/d39/_player_8h.html#a2a50815668e7443f20a14ff3fa353db4">MAX_RUNES</a> &amp;&amp; runes; ++i)</div>
<div class="line"><a name="l05585"></a><span class="lineno"> 5585</span>&#160;        {</div>
<div class="line"><a name="l05586"></a><span class="lineno"> 5586</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() != player-&gt;<a class="code" href="../../d8/d53/class_player.html#a9df30430ce60344703a33ae012e92531">GetCurrentRune</a>(i))</div>
<div class="line"><a name="l05587"></a><span class="lineno"> 5587</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l05588"></a><span class="lineno"> 5588</span>&#160;            <span class="keywordflow">if</span> (!player-&gt;<a class="code" href="../../d8/d53/class_player.html#a85b9ddea0d0cc793e51e579aaa196d70">GetRuneCooldown</a>(i))</div>
<div class="line"><a name="l05589"></a><span class="lineno"> 5589</span>&#160;            {</div>
<div class="line"><a name="l05590"></a><span class="lineno"> 5590</span>&#160;                player-&gt;<a class="code" href="../../d8/d53/class_player.html#a941506d862d404409aa0888e5244fb98">AddRuneByAuraEffect</a>(i, <a class="code" href="../../d1/d39/_player_8h.html#a2377260993cd4a14aaab6f5771385e11">RuneType</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a88fa5605246883e095cd82ebd5d75bef">GetMiscValueB</a>()), <span class="keyword">this</span>);</div>
<div class="line"><a name="l05591"></a><span class="lineno"> 5591</span>&#160;                --runes;</div>
<div class="line"><a name="l05592"></a><span class="lineno"> 5592</span>&#160;            }</div>
<div class="line"><a name="l05593"></a><span class="lineno"> 5593</span>&#160;        }</div>
<div class="line"><a name="l05594"></a><span class="lineno"> 5594</span>&#160;    }</div>
<div class="line"><a name="l05595"></a><span class="lineno"> 5595</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l05596"></a><span class="lineno"> 5596</span>&#160;        player-&gt;<a class="code" href="../../d8/d53/class_player.html#a0d99907a41953dfe2e4589a785503fc1">RemoveRunesByAuraEffect</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l05597"></a><span class="lineno"> 5597</span>&#160;}</div>
<div class="ttc" id="a_player_8h_html_a2377260993cd4a14aaab6f5771385e11"><div class="ttname"><a href="../../d1/d39/_player_8h.html#a2377260993cd4a14aaab6f5771385e11">RuneType</a></div><div class="ttdeci">RuneType</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l00390">Player.h:391</a></div></div>
<div class="ttc" id="a_player_8h_html_a2a50815668e7443f20a14ff3fa353db4"><div class="ttname"><a href="../../d1/d39/_player_8h.html#a2a50815668e7443f20a14ff3fa353db4">MAX_RUNES</a></div><div class="ttdeci">#define MAX_RUNES</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l00381">Player.h:381</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a86e4e3df7a5142175aa5df522d3346cfa7f7b30426fd386c181799196c1739058"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a86e4e3df7a5142175aa5df522d3346cfa7f7b30426fd386c181799196c1739058">CLASS_DEATH_KNIGHT</a></div><div class="ttdeci">@ CLASS_DEATH_KNIGHT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00118">SharedDefines.h:118</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a88fa5605246883e095cd82ebd5d75bef"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a88fa5605246883e095cd82ebd5d75bef">AuraEffect::GetMiscValueB</a></div><div class="ttdeci">int32 GetMiscValueB() const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00436">SpellAuraEffects.cpp:436</a></div></div>
<div class="ttc" id="aclass_player_html_a0d99907a41953dfe2e4589a785503fc1"><div class="ttname"><a href="../../d8/d53/class_player.html#a0d99907a41953dfe2e4589a785503fc1">Player::RemoveRunesByAuraEffect</a></div><div class="ttdeci">void RemoveRunesByAuraEffect(AuraEffect const *aura)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/_player_8cpp_source.html#l12574">Player.cpp:12574</a></div></div>
<div class="ttc" id="aclass_player_html_a85b9ddea0d0cc793e51e579aaa196d70"><div class="ttname"><a href="../../d8/d53/class_player.html#a85b9ddea0d0cc793e51e579aaa196d70">Player::GetRuneCooldown</a></div><div class="ttdeci">uint32 GetRuneCooldown(uint8 index) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l02466">Player.h:2466</a></div></div>
<div class="ttc" id="aclass_player_html_a941506d862d404409aa0888e5244fb98"><div class="ttname"><a href="../../d8/d53/class_player.html#a941506d862d404409aa0888e5244fb98">Player::AddRuneByAuraEffect</a></div><div class="ttdeci">void AddRuneByAuraEffect(uint8 index, RuneType newType, AuraEffect const *aura)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l02477">Player.h:2477</a></div></div>
<div class="ttc" id="aclass_player_html_a9df30430ce60344703a33ae012e92531"><div class="ttname"><a href="../../d8/d53/class_player.html#a9df30430ce60344703a33ae012e92531">Player::GetCurrentRune</a></div><div class="ttdeci">RuneType GetCurrentRune(uint8 index) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l02465">Player.h:2465</a></div></div>
<div class="ttc" id="aclass_unit_html_a58a507ebe628930b8a506144b364d84b"><div class="ttname"><a href="../../da/db7/class_unit.html#a58a507ebe628930b8a506144b364d84b">Unit::getClass</a></div><div class="ttdeci">uint8 getClass() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01545">Unit.h:1545</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d1/d39/_player_8h_source.html#l02477">Player::AddRuneByAuraEffect()</a>, <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00118">CLASS_DEATH_KNIGHT</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01545">Unit::getClass()</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l02465">Player::GetCurrentRune()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00436">GetMiscValueB()</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l02466">Player::GetRuneCooldown()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00120">m_amount</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l00381">MAX_RUNES</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l12574">Player::RemoveRunesByAuraEffect()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, and <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>.</p>

</div>
</div>
<a id="ab48ade74cc824d2ae0e326948c867ece"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab48ade74cc824d2ae0e326948c867ece">&#9670;&nbsp;</a></span>HandleAuraDummy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraDummy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04980">4980</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04981"></a><span class="lineno"> 4981</span>&#160;{</div>
<div class="line"><a name="l04982"></a><span class="lineno"> 4982</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9aed024920a7d989c9b024d1c7b00f0b">AURA_EFFECT_HANDLE_REAPPLY</a>)))</div>
<div class="line"><a name="l04983"></a><span class="lineno"> 4983</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04984"></a><span class="lineno"> 4984</span>&#160; </div>
<div class="line"><a name="l04985"></a><span class="lineno"> 4985</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04986"></a><span class="lineno"> 4986</span>&#160; </div>
<div class="line"><a name="l04987"></a><span class="lineno"> 4987</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* caster = <a class="code" href="../../da/df1/class_aura_effect.html#a29cf330277aeb89d17d18f6e112f035b">GetCaster</a>();</div>
<div class="line"><a name="l04988"></a><span class="lineno"> 4988</span>&#160; </div>
<div class="line"><a name="l04989"></a><span class="lineno"> 4989</span>&#160;    <span class="keywordflow">if</span> (mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>)</div>
<div class="line"><a name="l04990"></a><span class="lineno"> 4990</span>&#160;    {</div>
<div class="line"><a name="l04991"></a><span class="lineno"> 4991</span>&#160;        <span class="comment">// pet auras</span></div>
<div class="line"><a name="l04992"></a><span class="lineno"> 4992</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d3/d0b/class_pet_aura.html">PetAura</a> <span class="keyword">const</span>* petSpell = <a class="code" href="../../d3/d75/_spell_mgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetPetAura(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../da/df1/class_aura_effect.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>))</div>
<div class="line"><a name="l04993"></a><span class="lineno"> 4993</span>&#160;        {</div>
<div class="line"><a name="l04994"></a><span class="lineno"> 4994</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l04995"></a><span class="lineno"> 4995</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#a2c30ee763635ea710cc1101ee3c94607">AddPetAura</a>(petSpell);</div>
<div class="line"><a name="l04996"></a><span class="lineno"> 4996</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l04997"></a><span class="lineno"> 4997</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1350682846c1ddb65567ec85e75e2df3">RemovePetAura</a>(petSpell);</div>
<div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160;        }</div>
<div class="line"><a name="l04999"></a><span class="lineno"> 4999</span>&#160;    }</div>
<div class="line"><a name="l05000"></a><span class="lineno"> 5000</span>&#160; </div>
<div class="line"><a name="l05001"></a><span class="lineno"> 5001</span>&#160;    <span class="keywordflow">if</span> (mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9aed024920a7d989c9b024d1c7b00f0b">AURA_EFFECT_HANDLE_REAPPLY</a>))</div>
<div class="line"><a name="l05002"></a><span class="lineno"> 5002</span>&#160;    {</div>
<div class="line"><a name="l05003"></a><span class="lineno"> 5003</span>&#160;        <span class="comment">// AT APPLY</span></div>
<div class="line"><a name="l05004"></a><span class="lineno"> 5004</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l05005"></a><span class="lineno"> 5005</span>&#160;        {</div>
<div class="line"><a name="l05006"></a><span class="lineno"> 5006</span>&#160;            <span class="keywordflow">switch</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>())</div>
<div class="line"><a name="l05007"></a><span class="lineno"> 5007</span>&#160;            {</div>
<div class="line"><a name="l05008"></a><span class="lineno"> 5008</span>&#160;                <span class="keywordflow">case</span> 1515:                                      <span class="comment">// Tame beast</span></div>
<div class="line"><a name="l05009"></a><span class="lineno"> 5009</span>&#160;                    <span class="comment">// FIX_ME: this is 2.0.12 threat effect replaced in 2.1.x by dummy aura, must be checked for correctness</span></div>
<div class="line"><a name="l05010"></a><span class="lineno"> 5010</span>&#160;                    <span class="keywordflow">if</span> (caster &amp;&amp; target-&gt;<a class="code" href="../../da/db7/class_unit.html#a17a3a280549173c861ab2de0f1d876af">CanHaveThreatList</a>())</div>
<div class="line"><a name="l05011"></a><span class="lineno"> 5011</span>&#160;                        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a3b4dad985e3b5dde28d89afc956999e4">AddThreat</a>(caster, 10.0f);</div>
<div class="line"><a name="l05012"></a><span class="lineno"> 5012</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05013"></a><span class="lineno"> 5013</span>&#160;                <span class="keywordflow">case</span> 13139:                                     <span class="comment">// net-o-matic</span></div>
<div class="line"><a name="l05014"></a><span class="lineno"> 5014</span>&#160;                    <span class="comment">// root to self part of (root_target-&gt;charge-&gt;root_self sequence</span></div>
<div class="line"><a name="l05015"></a><span class="lineno"> 5015</span>&#160;                    <span class="keywordflow">if</span> (caster)</div>
<div class="line"><a name="l05016"></a><span class="lineno"> 5016</span>&#160;                        caster-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(caster, 13138, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l05017"></a><span class="lineno"> 5017</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05018"></a><span class="lineno"> 5018</span>&#160;                <span class="keywordflow">case</span> 34026:   <span class="comment">// kill command</span></div>
<div class="line"><a name="l05019"></a><span class="lineno"> 5019</span>&#160;                    {</div>
<div class="line"><a name="l05020"></a><span class="lineno"> 5020</span>&#160;                        <a class="code" href="../../da/db7/class_unit.html">Unit</a>* pet = target-&gt;<a class="code" href="../../da/db7/class_unit.html#ae78759acca81e2a89a82f79a4ef6e70c">GetGuardianPet</a>();</div>
<div class="line"><a name="l05021"></a><span class="lineno"> 5021</span>&#160;                        <span class="keywordflow">if</span> (!pet)</div>
<div class="line"><a name="l05022"></a><span class="lineno"> 5022</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05023"></a><span class="lineno"> 5023</span>&#160; </div>
<div class="line"><a name="l05024"></a><span class="lineno"> 5024</span>&#160;                        target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 34027, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l05025"></a><span class="lineno"> 5025</span>&#160; </div>
<div class="line"><a name="l05026"></a><span class="lineno"> 5026</span>&#160;                        <span class="comment">// set 3 stacks and 3 charges (to make all auras not disappear at once)</span></div>
<div class="line"><a name="l05027"></a><span class="lineno"> 5027</span>&#160;                        <a class="code" href="../../d2/dde/class_aura.html">Aura</a>* owner_aura = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a135e4d345c338da83450a60528f71222">GetAura</a>(34027, <a class="code" href="../../da/df1/class_aura_effect.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>());</div>
<div class="line"><a name="l05028"></a><span class="lineno"> 5028</span>&#160;                        <a class="code" href="../../d2/dde/class_aura.html">Aura</a>* pet_aura  = pet-&gt;<a class="code" href="../../da/db7/class_unit.html#a135e4d345c338da83450a60528f71222">GetAura</a>(58914, <a class="code" href="../../da/df1/class_aura_effect.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>());</div>
<div class="line"><a name="l05029"></a><span class="lineno"> 5029</span>&#160;                        <span class="keywordflow">if</span> (owner_aura)</div>
<div class="line"><a name="l05030"></a><span class="lineno"> 5030</span>&#160;                        {</div>
<div class="line"><a name="l05031"></a><span class="lineno"> 5031</span>&#160;                            owner_aura-&gt;<a class="code" href="../../d2/dde/class_aura.html#a7f7d613279717173c13708425f3a8083">SetCharges</a>(0);</div>
<div class="line"><a name="l05032"></a><span class="lineno"> 5032</span>&#160;                            owner_aura-&gt;<a class="code" href="../../d2/dde/class_aura.html#a1f6c2606d7dc499c1fc1ba0cee1f255b">SetStackAmount</a>(owner_aura-&gt;<a class="code" href="../../d2/dde/class_aura.html#a7c8537a933fb3deee10c40f1345ad86b">GetSpellInfo</a>()-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a46f51f384b1455b03000e98a08d11790">StackAmount</a>);</div>
<div class="line"><a name="l05033"></a><span class="lineno"> 5033</span>&#160;                            <span class="keywordflow">if</span> (pet_aura)</div>
<div class="line"><a name="l05034"></a><span class="lineno"> 5034</span>&#160;                            {</div>
<div class="line"><a name="l05035"></a><span class="lineno"> 5035</span>&#160;                                pet_aura-&gt;<a class="code" href="../../d2/dde/class_aura.html#a7f7d613279717173c13708425f3a8083">SetCharges</a>(0);</div>
<div class="line"><a name="l05036"></a><span class="lineno"> 5036</span>&#160;                                pet_aura-&gt;<a class="code" href="../../d2/dde/class_aura.html#a1f6c2606d7dc499c1fc1ba0cee1f255b">SetStackAmount</a>(owner_aura-&gt;<a class="code" href="../../d2/dde/class_aura.html#a7c8537a933fb3deee10c40f1345ad86b">GetSpellInfo</a>()-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a46f51f384b1455b03000e98a08d11790">StackAmount</a>);</div>
<div class="line"><a name="l05037"></a><span class="lineno"> 5037</span>&#160;                            }</div>
<div class="line"><a name="l05038"></a><span class="lineno"> 5038</span>&#160;                        }</div>
<div class="line"><a name="l05039"></a><span class="lineno"> 5039</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05040"></a><span class="lineno"> 5040</span>&#160;                    }</div>
<div class="line"><a name="l05041"></a><span class="lineno"> 5041</span>&#160;                <span class="keywordflow">case</span> 37096:                                     <span class="comment">// Blood Elf Illusion</span></div>
<div class="line"><a name="l05042"></a><span class="lineno"> 5042</span>&#160;                    {</div>
<div class="line"><a name="l05043"></a><span class="lineno"> 5043</span>&#160;                        <span class="keywordflow">if</span> (caster)</div>
<div class="line"><a name="l05044"></a><span class="lineno"> 5044</span>&#160;                        {</div>
<div class="line"><a name="l05045"></a><span class="lineno"> 5045</span>&#160;                            <span class="keywordflow">switch</span> (caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>())</div>
<div class="line"><a name="l05046"></a><span class="lineno"> 5046</span>&#160;                            {</div>
<div class="line"><a name="l05047"></a><span class="lineno"> 5047</span>&#160;                                <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3667e3c5ec056737c8789615a989324faf3da8f6e862fb5230f0bbb8613684463">GENDER_FEMALE</a>:</div>
<div class="line"><a name="l05048"></a><span class="lineno"> 5048</span>&#160;                                    caster-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 37095, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>); <span class="comment">// Blood Elf Disguise</span></div>
<div class="line"><a name="l05049"></a><span class="lineno"> 5049</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05050"></a><span class="lineno"> 5050</span>&#160;                                <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a>:</div>
<div class="line"><a name="l05051"></a><span class="lineno"> 5051</span>&#160;                                    caster-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 37093, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l05052"></a><span class="lineno"> 5052</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05053"></a><span class="lineno"> 5053</span>&#160;                                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l05054"></a><span class="lineno"> 5054</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05055"></a><span class="lineno"> 5055</span>&#160;                            }</div>
<div class="line"><a name="l05056"></a><span class="lineno"> 5056</span>&#160;                        }</div>
<div class="line"><a name="l05057"></a><span class="lineno"> 5057</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05058"></a><span class="lineno"> 5058</span>&#160;                    }</div>
<div class="line"><a name="l05059"></a><span class="lineno"> 5059</span>&#160;                <span class="keywordflow">case</span> 55198:   <span class="comment">// Tidal Force</span></div>
<div class="line"><a name="l05060"></a><span class="lineno"> 5060</span>&#160;                    {</div>
<div class="line"><a name="l05061"></a><span class="lineno"> 5061</span>&#160;                        target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 55166, <span class="keyword">true</span>);</div>
<div class="line"><a name="l05062"></a><span class="lineno"> 5062</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="../../d2/dde/class_aura.html">Aura</a>* owner_aura = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a135e4d345c338da83450a60528f71222">GetAura</a>(55166))</div>
<div class="line"><a name="l05063"></a><span class="lineno"> 5063</span>&#160;                            owner_aura-&gt;<a class="code" href="../../d2/dde/class_aura.html#a1f6c2606d7dc499c1fc1ba0cee1f255b">SetStackAmount</a>(owner_aura-&gt;<a class="code" href="../../d2/dde/class_aura.html#a7c8537a933fb3deee10c40f1345ad86b">GetSpellInfo</a>()-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a46f51f384b1455b03000e98a08d11790">StackAmount</a>);</div>
<div class="line"><a name="l05064"></a><span class="lineno"> 5064</span>&#160;                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05065"></a><span class="lineno"> 5065</span>&#160;                    }</div>
<div class="line"><a name="l05066"></a><span class="lineno"> 5066</span>&#160;                <span class="keywordflow">case</span> 39850:                                     <span class="comment">// Rocket Blast</span></div>
<div class="line"><a name="l05067"></a><span class="lineno"> 5067</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../d1/d65/src_2common_2_utilities_2_random_8h.html#a50320d4edff86db31b25138ae72161ad">roll_chance_i</a>(20))                       <span class="comment">// backfire stun</span></div>
<div class="line"><a name="l05068"></a><span class="lineno"> 5068</span>&#160;                        target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 51581, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l05069"></a><span class="lineno"> 5069</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05070"></a><span class="lineno"> 5070</span>&#160;                <span class="keywordflow">case</span> 43873:                                     <span class="comment">// Headless Horseman Laugh</span></div>
<div class="line"><a name="l05071"></a><span class="lineno"> 5071</span>&#160;                    target-&gt;<a class="code" href="../../db/df7/class_world_object.html#aaf763bad217ff546f44a04b8c977d694">PlayDistanceSound</a>(11965);</div>
<div class="line"><a name="l05072"></a><span class="lineno"> 5072</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05073"></a><span class="lineno"> 5073</span>&#160;                <span class="keywordflow">case</span> 46354:                                     <span class="comment">// Blood Elf Illusion</span></div>
<div class="line"><a name="l05074"></a><span class="lineno"> 5074</span>&#160;                    <span class="keywordflow">if</span> (caster)</div>
<div class="line"><a name="l05075"></a><span class="lineno"> 5075</span>&#160;                    {</div>
<div class="line"><a name="l05076"></a><span class="lineno"> 5076</span>&#160;                        <span class="keywordflow">switch</span> (caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>())</div>
<div class="line"><a name="l05077"></a><span class="lineno"> 5077</span>&#160;                        {</div>
<div class="line"><a name="l05078"></a><span class="lineno"> 5078</span>&#160;                            <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3667e3c5ec056737c8789615a989324faf3da8f6e862fb5230f0bbb8613684463">GENDER_FEMALE</a>:</div>
<div class="line"><a name="l05079"></a><span class="lineno"> 5079</span>&#160;                                caster-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 46356, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l05080"></a><span class="lineno"> 5080</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05081"></a><span class="lineno"> 5081</span>&#160;                            <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a>:</div>
<div class="line"><a name="l05082"></a><span class="lineno"> 5082</span>&#160;                                caster-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 46355, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l05083"></a><span class="lineno"> 5083</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05084"></a><span class="lineno"> 5084</span>&#160;                        }</div>
<div class="line"><a name="l05085"></a><span class="lineno"> 5085</span>&#160;                    }</div>
<div class="line"><a name="l05086"></a><span class="lineno"> 5086</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05087"></a><span class="lineno"> 5087</span>&#160;                <span class="keywordflow">case</span> 46361:                                     <span class="comment">// Reinforced Net</span></div>
<div class="line"><a name="l05088"></a><span class="lineno"> 5088</span>&#160;                    <span class="keywordflow">if</span> (caster)</div>
<div class="line"><a name="l05089"></a><span class="lineno"> 5089</span>&#160;                        target-&gt;<a class="code" href="../../da/db7/class_unit.html#aae6570959bf6129418e1db63aeafdc1a">GetMotionMaster</a>()-&gt;<a class="code" href="../../df/d4d/class_motion_master.html#ae37d25ba49a3887faa07bc194f3447fd">MoveFall</a>();</div>
<div class="line"><a name="l05090"></a><span class="lineno"> 5090</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05091"></a><span class="lineno"> 5091</span>&#160;                <span class="keywordflow">case</span> 46699:                                     <span class="comment">// Requires No Ammo</span></div>
<div class="line"><a name="l05092"></a><span class="lineno"> 5092</span>&#160;                    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l05093"></a><span class="lineno"> 5093</span>&#160;                        target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a64d7fc1d009a80de3b86e7ad66f5ad3c">RemoveAmmo</a>();      <span class="comment">// not use ammo and not allow use</span></div>
<div class="line"><a name="l05094"></a><span class="lineno"> 5094</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05095"></a><span class="lineno"> 5095</span>&#160;                <span class="keywordflow">case</span> 71563:</div>
<div class="line"><a name="l05096"></a><span class="lineno"> 5096</span>&#160;                    {</div>
<div class="line"><a name="l05097"></a><span class="lineno"> 5097</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="../../d2/dde/class_aura.html">Aura</a>* newAura = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a51d433dde350cd94d7c3c43e30ca997f">AddAura</a>(71564, target))</div>
<div class="line"><a name="l05098"></a><span class="lineno"> 5098</span>&#160;                            newAura-&gt;SetStackAmount(newAura-&gt;GetSpellInfo()-&gt;StackAmount);</div>
<div class="line"><a name="l05099"></a><span class="lineno"> 5099</span>&#160;                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05100"></a><span class="lineno"> 5100</span>&#160;                    }</div>
<div class="line"><a name="l05101"></a><span class="lineno"> 5101</span>&#160;            }</div>
<div class="line"><a name="l05102"></a><span class="lineno"> 5102</span>&#160;        }</div>
<div class="line"><a name="l05103"></a><span class="lineno"> 5103</span>&#160;        <span class="comment">// AT REMOVE</span></div>
<div class="line"><a name="l05104"></a><span class="lineno"> 5104</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l05105"></a><span class="lineno"> 5105</span>&#160;        {</div>
<div class="line"><a name="l05106"></a><span class="lineno"> 5106</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;IsQuestTame()) &amp;&amp; caster &amp;&amp; caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a5ea3f54af571493f7889220724667189">IsAlive</a>() &amp;&amp; target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5ea3f54af571493f7889220724667189">IsAlive</a>() &amp;&amp; aurApp-&gt;GetRemoveMode() != <a class="code" href="../../d5/d32/_unit_8h.html#a9a4f502870485ba32e759067c9adca94a132c6993498600b4a3cfda2b1639c166">AURA_REMOVE_BY_CANCEL</a>)</div>
<div class="line"><a name="l05107"></a><span class="lineno"> 5107</span>&#160;            {</div>
<div class="line"><a name="l05108"></a><span class="lineno"> 5108</span>&#160;                <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> finalSpelId = 0;</div>
<div class="line"><a name="l05109"></a><span class="lineno"> 5109</span>&#160;                <span class="keywordflow">switch</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>())</div>
<div class="line"><a name="l05110"></a><span class="lineno"> 5110</span>&#160;                {</div>
<div class="line"><a name="l05111"></a><span class="lineno"> 5111</span>&#160;                    <span class="keywordflow">case</span> 19548:</div>
<div class="line"><a name="l05112"></a><span class="lineno"> 5112</span>&#160;                        finalSpelId = 19597;</div>
<div class="line"><a name="l05113"></a><span class="lineno"> 5113</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05114"></a><span class="lineno"> 5114</span>&#160;                    <span class="keywordflow">case</span> 19674:</div>
<div class="line"><a name="l05115"></a><span class="lineno"> 5115</span>&#160;                        finalSpelId = 19677;</div>
<div class="line"><a name="l05116"></a><span class="lineno"> 5116</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05117"></a><span class="lineno"> 5117</span>&#160;                    <span class="keywordflow">case</span> 19687:</div>
<div class="line"><a name="l05118"></a><span class="lineno"> 5118</span>&#160;                        finalSpelId = 19676;</div>
<div class="line"><a name="l05119"></a><span class="lineno"> 5119</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05120"></a><span class="lineno"> 5120</span>&#160;                    <span class="keywordflow">case</span> 19688:</div>
<div class="line"><a name="l05121"></a><span class="lineno"> 5121</span>&#160;                        finalSpelId = 19678;</div>
<div class="line"><a name="l05122"></a><span class="lineno"> 5122</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05123"></a><span class="lineno"> 5123</span>&#160;                    <span class="keywordflow">case</span> 19689:</div>
<div class="line"><a name="l05124"></a><span class="lineno"> 5124</span>&#160;                        finalSpelId = 19679;</div>
<div class="line"><a name="l05125"></a><span class="lineno"> 5125</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05126"></a><span class="lineno"> 5126</span>&#160;                    <span class="keywordflow">case</span> 19692:</div>
<div class="line"><a name="l05127"></a><span class="lineno"> 5127</span>&#160;                        finalSpelId = 19680;</div>
<div class="line"><a name="l05128"></a><span class="lineno"> 5128</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05129"></a><span class="lineno"> 5129</span>&#160;                    <span class="keywordflow">case</span> 19693:</div>
<div class="line"><a name="l05130"></a><span class="lineno"> 5130</span>&#160;                        finalSpelId = 19684;</div>
<div class="line"><a name="l05131"></a><span class="lineno"> 5131</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05132"></a><span class="lineno"> 5132</span>&#160;                    <span class="keywordflow">case</span> 19694:</div>
<div class="line"><a name="l05133"></a><span class="lineno"> 5133</span>&#160;                        finalSpelId = 19681;</div>
<div class="line"><a name="l05134"></a><span class="lineno"> 5134</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05135"></a><span class="lineno"> 5135</span>&#160;                    <span class="keywordflow">case</span> 19696:</div>
<div class="line"><a name="l05136"></a><span class="lineno"> 5136</span>&#160;                        finalSpelId = 19682;</div>
<div class="line"><a name="l05137"></a><span class="lineno"> 5137</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05138"></a><span class="lineno"> 5138</span>&#160;                    <span class="keywordflow">case</span> 19697:</div>
<div class="line"><a name="l05139"></a><span class="lineno"> 5139</span>&#160;                        finalSpelId = 19683;</div>
<div class="line"><a name="l05140"></a><span class="lineno"> 5140</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05141"></a><span class="lineno"> 5141</span>&#160;                    <span class="keywordflow">case</span> 19699:</div>
<div class="line"><a name="l05142"></a><span class="lineno"> 5142</span>&#160;                        finalSpelId = 19685;</div>
<div class="line"><a name="l05143"></a><span class="lineno"> 5143</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05144"></a><span class="lineno"> 5144</span>&#160;                    <span class="keywordflow">case</span> 19700:</div>
<div class="line"><a name="l05145"></a><span class="lineno"> 5145</span>&#160;                        finalSpelId = 19686;</div>
<div class="line"><a name="l05146"></a><span class="lineno"> 5146</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05147"></a><span class="lineno"> 5147</span>&#160;                    <span class="keywordflow">case</span> 30646:</div>
<div class="line"><a name="l05148"></a><span class="lineno"> 5148</span>&#160;                        finalSpelId = 30647;</div>
<div class="line"><a name="l05149"></a><span class="lineno"> 5149</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05150"></a><span class="lineno"> 5150</span>&#160;                    <span class="keywordflow">case</span> 30653:</div>
<div class="line"><a name="l05151"></a><span class="lineno"> 5151</span>&#160;                        finalSpelId = 30648;</div>
<div class="line"><a name="l05152"></a><span class="lineno"> 5152</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05153"></a><span class="lineno"> 5153</span>&#160;                    <span class="keywordflow">case</span> 30654:</div>
<div class="line"><a name="l05154"></a><span class="lineno"> 5154</span>&#160;                        finalSpelId = 30652;</div>
<div class="line"><a name="l05155"></a><span class="lineno"> 5155</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05156"></a><span class="lineno"> 5156</span>&#160;                    <span class="keywordflow">case</span> 30099:</div>
<div class="line"><a name="l05157"></a><span class="lineno"> 5157</span>&#160;                        finalSpelId = 30100;</div>
<div class="line"><a name="l05158"></a><span class="lineno"> 5158</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05159"></a><span class="lineno"> 5159</span>&#160;                    <span class="keywordflow">case</span> 30102:</div>
<div class="line"><a name="l05160"></a><span class="lineno"> 5160</span>&#160;                        finalSpelId = 30103;</div>
<div class="line"><a name="l05161"></a><span class="lineno"> 5161</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05162"></a><span class="lineno"> 5162</span>&#160;                    <span class="keywordflow">case</span> 30105:</div>
<div class="line"><a name="l05163"></a><span class="lineno"> 5163</span>&#160;                        finalSpelId = 30104;</div>
<div class="line"><a name="l05164"></a><span class="lineno"> 5164</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05165"></a><span class="lineno"> 5165</span>&#160;                }</div>
<div class="line"><a name="l05166"></a><span class="lineno"> 5166</span>&#160; </div>
<div class="line"><a name="l05167"></a><span class="lineno"> 5167</span>&#160;                <span class="keywordflow">if</span> (finalSpelId)</div>
<div class="line"><a name="l05168"></a><span class="lineno"> 5168</span>&#160;                    caster-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, finalSpelId, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l05169"></a><span class="lineno"> 5169</span>&#160;            }</div>
<div class="line"><a name="l05170"></a><span class="lineno"> 5170</span>&#160; </div>
<div class="line"><a name="l05171"></a><span class="lineno"> 5171</span>&#160;            <span class="keywordflow">switch</span> (<a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#af6ec577353f7d3cc59badd7d332153b0">SpellFamilyName</a>)</div>
<div class="line"><a name="l05172"></a><span class="lineno"> 5172</span>&#160;            {</div>
<div class="line"><a name="l05173"></a><span class="lineno"> 5173</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0ebbb6206eb92cdc484b416eb6f41743">SPELLFAMILY_GENERIC</a>:</div>
<div class="line"><a name="l05174"></a><span class="lineno"> 5174</span>&#160;                    <span class="keywordflow">switch</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>())</div>
<div class="line"><a name="l05175"></a><span class="lineno"> 5175</span>&#160;                    {</div>
<div class="line"><a name="l05176"></a><span class="lineno"> 5176</span>&#160;                        <span class="keywordflow">case</span> 2584: <span class="comment">// Waiting to Resurrect</span></div>
<div class="line"><a name="l05177"></a><span class="lineno"> 5177</span>&#160;                            <span class="comment">// Waiting to resurrect spell cancel, we must remove player from resurrect queue</span></div>
<div class="line"><a name="l05178"></a><span class="lineno"> 5178</span>&#160;                            <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l05179"></a><span class="lineno"> 5179</span>&#160;                            {</div>
<div class="line"><a name="l05180"></a><span class="lineno"> 5180</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="../../d6/ddc/class_battleground.html">Battleground</a>* <a class="code" href="../../da/dec/color_8h.html#aff385f59fe6fc0f7d51a290ec9ff5a75">bg</a> = target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a5f17db78f9356bf239b7631ebc38fa2d">GetBattleground</a>())</div>
<div class="line"><a name="l05181"></a><span class="lineno"> 5181</span>&#160;                                    <a class="code" href="../../da/dec/color_8h.html#aff385f59fe6fc0f7d51a290ec9ff5a75">bg</a>-&gt;RemovePlayerFromResurrectQueue(target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>());</div>
<div class="line"><a name="l05182"></a><span class="lineno"> 5182</span>&#160;                                <span class="keywordflow">if</span>(<a class="code" href="../../d3/d42/class_battlefield.html">Battlefield</a>* bf = <a class="code" href="../../dc/df4/_battlefield_mgr_8h.html#a4545b2a440043037e8dad52c0f644f48">sBattlefieldMgr</a>-&gt;GetBattlefieldToZoneId(target-&gt;<a class="code" href="../../db/df7/class_world_object.html#ad498d690fbe69bb99a8a2ffdcb2f5169">GetZoneId</a>()))</div>
<div class="line"><a name="l05183"></a><span class="lineno"> 5183</span>&#160;                                    bf-&gt;RemovePlayerFromResurrectQueue(target-&gt;<a class="code" href="../../d8/d83/class_object.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>());</div>
<div class="line"><a name="l05184"></a><span class="lineno"> 5184</span>&#160;                            }</div>
<div class="line"><a name="l05185"></a><span class="lineno"> 5185</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05186"></a><span class="lineno"> 5186</span>&#160;                        <span class="keywordflow">case</span> 43681: <span class="comment">// Inactive</span></div>
<div class="line"><a name="l05187"></a><span class="lineno"> 5187</span>&#160;                            {</div>
<div class="line"><a name="l05188"></a><span class="lineno"> 5188</span>&#160;                                <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a> || aurApp-&gt;GetRemoveMode() != <a class="code" href="../../d5/d32/_unit_8h.html#a9a4f502870485ba32e759067c9adca94a9ca05b22853d12d44ac7e80a9e864a10">AURA_REMOVE_BY_EXPIRE</a>)</div>
<div class="line"><a name="l05189"></a><span class="lineno"> 5189</span>&#160;                                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05190"></a><span class="lineno"> 5190</span>&#160; </div>
<div class="line"><a name="l05191"></a><span class="lineno"> 5191</span>&#160;                                <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../db/df7/class_world_object.html#a76c507a1b3adcebf2732572bc6b67fe0">GetMap</a>()-&gt;<a class="code" href="../../dd/d11/class_map.html#a4fa855d03b7d1fa1957453767ff52429">IsBattleground</a>())</div>
<div class="line"><a name="l05192"></a><span class="lineno"> 5192</span>&#160;                                    target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#ac2c25dd9c3d9a6c3fe3901f25b0bdedf">LeaveBattleground</a>();</div>
<div class="line"><a name="l05193"></a><span class="lineno"> 5193</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05194"></a><span class="lineno"> 5194</span>&#160;                            }</div>
<div class="line"><a name="l05195"></a><span class="lineno"> 5195</span>&#160;                        <span class="keywordflow">case</span> 52172:  <span class="comment">// Coyote Spirit Despawn Aura</span></div>
<div class="line"><a name="l05196"></a><span class="lineno"> 5196</span>&#160;                        <span class="keywordflow">case</span> 60244:  <span class="comment">// Blood Parrot Despawn Aura</span></div>
<div class="line"><a name="l05197"></a><span class="lineno"> 5197</span>&#160;                            target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>((<a class="code" href="../../da/db7/class_unit.html">Unit</a>*)<span class="keyword">nullptr</span>, <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l05198"></a><span class="lineno"> 5198</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05199"></a><span class="lineno"> 5199</span>&#160;                        <span class="comment">// Halls of Lightning, Arc Lightning</span></div>
<div class="line"><a name="l05200"></a><span class="lineno"> 5200</span>&#160;                        <span class="keywordflow">case</span> 52921:</div>
<div class="line"><a name="l05201"></a><span class="lineno"> 5201</span>&#160;                            {</div>
<div class="line"><a name="l05202"></a><span class="lineno"> 5202</span>&#160;                                <span class="keywordflow">if</span>( aurApp-&gt;GetRemoveMode() != <a class="code" href="../../d5/d32/_unit_8h.html#a9a4f502870485ba32e759067c9adca94a9ca05b22853d12d44ac7e80a9e864a10">AURA_REMOVE_BY_EXPIRE</a> )</div>
<div class="line"><a name="l05203"></a><span class="lineno"> 5203</span>&#160;                                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05204"></a><span class="lineno"> 5204</span>&#160; </div>
<div class="line"><a name="l05205"></a><span class="lineno"> 5205</span>&#160;                                <a class="code" href="../../d8/d53/class_player.html">Player</a>* player = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05206"></a><span class="lineno"> 5206</span>&#160;                                <a class="code" href="../../d2/de1/class_acore_1_1_any_player_in_object_range_check.html">Acore::AnyPlayerInObjectRangeCheck</a> checker(target, 10.0f);</div>
<div class="line"><a name="l05207"></a><span class="lineno"> 5207</span>&#160;                                <a class="code" href="../../df/dab/struct_acore_1_1_player_searcher.html">Acore::PlayerSearcher&lt;Acore::AnyPlayerInObjectRangeCheck&gt;</a> searcher(target, player, checker);</div>
<div class="line"><a name="l05208"></a><span class="lineno"> 5208</span>&#160;                                <a class="code" href="../../dc/d9f/struct_cell.html#a952f2c6008bbbc3b9ee1652ea5f9188a">Cell::VisitWorldObjects</a>(target, searcher, 10.0f);</div>
<div class="line"><a name="l05209"></a><span class="lineno"> 5209</span>&#160; </div>
<div class="line"><a name="l05210"></a><span class="lineno"> 5210</span>&#160;                                <span class="keywordflow">if</span>( player &amp;&amp; player-&gt;<a class="code" href="../../d8/d83/class_object.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>() != target-&gt;<a class="code" href="../../d8/d83/class_object.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>() )</div>
<div class="line"><a name="l05211"></a><span class="lineno"> 5211</span>&#160;                                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(player, 52921, <span class="keyword">true</span>);</div>
<div class="line"><a name="l05212"></a><span class="lineno"> 5212</span>&#160; </div>
<div class="line"><a name="l05213"></a><span class="lineno"> 5213</span>&#160;                                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05214"></a><span class="lineno"> 5214</span>&#160;                            }</div>
<div class="line"><a name="l05215"></a><span class="lineno"> 5215</span>&#160;                        <span class="keywordflow">case</span> 58600: <span class="comment">// Restricted Flight Area</span></div>
<div class="line"><a name="l05216"></a><span class="lineno"> 5216</span>&#160;                        <span class="keywordflow">case</span> 58730: <span class="comment">// Restricted Flight Area</span></div>
<div class="line"><a name="l05217"></a><span class="lineno"> 5217</span>&#160;                            <span class="keywordflow">if</span> (aurApp-&gt;GetRemoveMode() == <a class="code" href="../../d5/d32/_unit_8h.html#a9a4f502870485ba32e759067c9adca94a9ca05b22853d12d44ac7e80a9e864a10">AURA_REMOVE_BY_EXPIRE</a>)</div>
<div class="line"><a name="l05218"></a><span class="lineno"> 5218</span>&#160;                                target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 58601, <span class="keyword">true</span>);</div>
<div class="line"><a name="l05219"></a><span class="lineno"> 5219</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05220"></a><span class="lineno"> 5220</span>&#160;                        <span class="keywordflow">case</span> 46374: <span class="comment">// quest The Power of the Elements (11893)</span></div>
<div class="line"><a name="l05221"></a><span class="lineno"> 5221</span>&#160;                            {</div>
<div class="line"><a name="l05222"></a><span class="lineno"> 5222</span>&#160;                                <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#afd7aa5f7719cba4d967bb7f009582d2f">isDead</a>() &amp;&amp; <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>() &amp;&amp; target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2a93dfa528ffc48db4993fb7ac62696db9">TYPEID_UNIT</a> &amp;&amp; target-&gt;<a class="code" href="../../d8/d83/class_object.html#aa627fe2967ed0e0ed1d8aeeb4365a961">GetEntry</a>() == 24601)</div>
<div class="line"><a name="l05223"></a><span class="lineno"> 5223</span>&#160;                                {</div>
<div class="line"><a name="l05224"></a><span class="lineno"> 5224</span>&#160;                                    <span class="keyword">auto</span> caster2 = <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#a6fc52109b7711606f15d9880fda8f815">GetCaster</a>();</div>
<div class="line"><a name="l05225"></a><span class="lineno"> 5225</span>&#160;                                    <span class="keywordflow">if</span> (caster2 &amp;&amp; caster2-&gt;GetTypeId() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l05226"></a><span class="lineno"> 5226</span>&#160;                                    {</div>
<div class="line"><a name="l05227"></a><span class="lineno"> 5227</span>&#160;                                        caster2-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a05924f5e9df8d5f06ba422e159a4fd8a">KilledMonsterCredit</a>(25987);</div>
<div class="line"><a name="l05228"></a><span class="lineno"> 5228</span>&#160;                                    }</div>
<div class="line"><a name="l05229"></a><span class="lineno"> 5229</span>&#160;                                }</div>
<div class="line"><a name="l05230"></a><span class="lineno"> 5230</span>&#160;                                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05231"></a><span class="lineno"> 5231</span>&#160;                            }</div>
<div class="line"><a name="l05232"></a><span class="lineno"> 5232</span>&#160;                    }</div>
<div class="line"><a name="l05233"></a><span class="lineno"> 5233</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05234"></a><span class="lineno"> 5234</span>&#160;                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l05235"></a><span class="lineno"> 5235</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05236"></a><span class="lineno"> 5236</span>&#160;            }</div>
<div class="line"><a name="l05237"></a><span class="lineno"> 5237</span>&#160;        }</div>
<div class="line"><a name="l05238"></a><span class="lineno"> 5238</span>&#160;    }</div>
<div class="line"><a name="l05239"></a><span class="lineno"> 5239</span>&#160; </div>
<div class="line"><a name="l05240"></a><span class="lineno"> 5240</span>&#160;    <span class="comment">// AT APPLY &amp; REMOVE</span></div>
<div class="line"><a name="l05241"></a><span class="lineno"> 5241</span>&#160; </div>
<div class="line"><a name="l05242"></a><span class="lineno"> 5242</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#af6ec577353f7d3cc59badd7d332153b0">SpellFamilyName</a>)</div>
<div class="line"><a name="l05243"></a><span class="lineno"> 5243</span>&#160;    {</div>
<div class="line"><a name="l05244"></a><span class="lineno"> 5244</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0ebbb6206eb92cdc484b416eb6f41743">SPELLFAMILY_GENERIC</a>:</div>
<div class="line"><a name="l05245"></a><span class="lineno"> 5245</span>&#160;            {</div>
<div class="line"><a name="l05246"></a><span class="lineno"> 5246</span>&#160;                <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l05247"></a><span class="lineno"> 5247</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05248"></a><span class="lineno"> 5248</span>&#160;                <span class="keywordflow">switch</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>())</div>
<div class="line"><a name="l05249"></a><span class="lineno"> 5249</span>&#160;                {</div>
<div class="line"><a name="l05250"></a><span class="lineno"> 5250</span>&#160;                    <span class="comment">// Recently Bandaged</span></div>
<div class="line"><a name="l05251"></a><span class="lineno"> 5251</span>&#160;                    <span class="keywordflow">case</span> 11196:</div>
<div class="line"><a name="l05252"></a><span class="lineno"> 5252</span>&#160;                        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>(), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l05253"></a><span class="lineno"> 5253</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05254"></a><span class="lineno"> 5254</span>&#160;                    <span class="comment">// Unstable Power</span></div>
<div class="line"><a name="l05255"></a><span class="lineno"> 5255</span>&#160;                    <span class="keywordflow">case</span> 24658:</div>
<div class="line"><a name="l05256"></a><span class="lineno"> 5256</span>&#160;                        {</div>
<div class="line"><a name="l05257"></a><span class="lineno"> 5257</span>&#160;                            <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellId = 24659;</div>
<div class="line"><a name="l05258"></a><span class="lineno"> 5258</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a> &amp;&amp; caster)</div>
<div class="line"><a name="l05259"></a><span class="lineno"> 5259</span>&#160;                            {</div>
<div class="line"><a name="l05260"></a><span class="lineno"> 5260</span>&#160;                                <a class="code" href="../../d4/d7d/class_spell_info.html">SpellInfo</a> <span class="keyword">const</span>* spell = <a class="code" href="../../d3/d75/_spell_mgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;AssertSpellInfo(spellId);</div>
<div class="line"><a name="l05261"></a><span class="lineno"> 5261</span>&#160; </div>
<div class="line"><a name="l05262"></a><span class="lineno"> 5262</span>&#160;                                <span class="keywordflow">for</span> (<a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> i = 0; i &lt; spell-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a46f51f384b1455b03000e98a08d11790">StackAmount</a>; ++i)</div>
<div class="line"><a name="l05263"></a><span class="lineno"> 5263</span>&#160;                                    caster-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, spell-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a49bc14059c2bd3785231c52e0d54d382">Id</a>, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <a class="code" href="../../da/df1/class_aura_effect.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>());</div>
<div class="line"><a name="l05264"></a><span class="lineno"> 5264</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05265"></a><span class="lineno"> 5265</span>&#160;                            }</div>
<div class="line"><a name="l05266"></a><span class="lineno"> 5266</span>&#160;                            target-&gt;<a class="code" href="../../da/db7/class_unit.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(spellId);</div>
<div class="line"><a name="l05267"></a><span class="lineno"> 5267</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05268"></a><span class="lineno"> 5268</span>&#160;                        }</div>
<div class="line"><a name="l05269"></a><span class="lineno"> 5269</span>&#160;                    <span class="comment">// Restless Strength</span></div>
<div class="line"><a name="l05270"></a><span class="lineno"> 5270</span>&#160;                    <span class="keywordflow">case</span> 24661:</div>
<div class="line"><a name="l05271"></a><span class="lineno"> 5271</span>&#160;                        {</div>
<div class="line"><a name="l05272"></a><span class="lineno"> 5272</span>&#160;                            <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellId = 24662;</div>
<div class="line"><a name="l05273"></a><span class="lineno"> 5273</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a> &amp;&amp; caster)</div>
<div class="line"><a name="l05274"></a><span class="lineno"> 5274</span>&#160;                            {</div>
<div class="line"><a name="l05275"></a><span class="lineno"> 5275</span>&#160;                                <a class="code" href="../../d4/d7d/class_spell_info.html">SpellInfo</a> <span class="keyword">const</span>* spell = <a class="code" href="../../d3/d75/_spell_mgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;AssertSpellInfo(spellId);</div>
<div class="line"><a name="l05276"></a><span class="lineno"> 5276</span>&#160;                                <span class="keywordflow">for</span> (<a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> i = 0; i &lt; spell-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a46f51f384b1455b03000e98a08d11790">StackAmount</a>; ++i)</div>
<div class="line"><a name="l05277"></a><span class="lineno"> 5277</span>&#160;                                    caster-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, spell-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a49bc14059c2bd3785231c52e0d54d382">Id</a>, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <a class="code" href="../../da/df1/class_aura_effect.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>());</div>
<div class="line"><a name="l05278"></a><span class="lineno"> 5278</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05279"></a><span class="lineno"> 5279</span>&#160;                            }</div>
<div class="line"><a name="l05280"></a><span class="lineno"> 5280</span>&#160;                            target-&gt;<a class="code" href="../../da/db7/class_unit.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(spellId);</div>
<div class="line"><a name="l05281"></a><span class="lineno"> 5281</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05282"></a><span class="lineno"> 5282</span>&#160;                        }</div>
<div class="line"><a name="l05283"></a><span class="lineno"> 5283</span>&#160;                    <span class="comment">// Tag Murloc</span></div>
<div class="line"><a name="l05284"></a><span class="lineno"> 5284</span>&#160;                    <span class="keywordflow">case</span> 30877:</div>
<div class="line"><a name="l05285"></a><span class="lineno"> 5285</span>&#160;                        {</div>
<div class="line"><a name="l05286"></a><span class="lineno"> 5286</span>&#160;                            <span class="comment">// Tag/untag Blacksilt Scout</span></div>
<div class="line"><a name="l05287"></a><span class="lineno"> 5287</span>&#160;                            target-&gt;<a class="code" href="../../d8/d83/class_object.html#ad5ba4799de88341246bc5ff7dd4b2d36">SetEntry</a>(<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a> ? 17654 : 17326);</div>
<div class="line"><a name="l05288"></a><span class="lineno"> 5288</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05289"></a><span class="lineno"> 5289</span>&#160;                        }</div>
<div class="line"><a name="l05290"></a><span class="lineno"> 5290</span>&#160;                    <span class="keywordflow">case</span> 57819: <span class="comment">// Argent Champion</span></div>
<div class="line"><a name="l05291"></a><span class="lineno"> 5291</span>&#160;                    <span class="keywordflow">case</span> 57820: <span class="comment">// Ebon Champion</span></div>
<div class="line"><a name="l05292"></a><span class="lineno"> 5292</span>&#160;                    <span class="keywordflow">case</span> 57821: <span class="comment">// Champion of the Kirin Tor</span></div>
<div class="line"><a name="l05293"></a><span class="lineno"> 5293</span>&#160;                    <span class="keywordflow">case</span> 57822: <span class="comment">// Wyrmrest Champion</span></div>
<div class="line"><a name="l05294"></a><span class="lineno"> 5294</span>&#160;                        {</div>
<div class="line"><a name="l05295"></a><span class="lineno"> 5295</span>&#160;                            <span class="keywordflow">if</span> (!caster || caster-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l05296"></a><span class="lineno"> 5296</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05297"></a><span class="lineno"> 5297</span>&#160; </div>
<div class="line"><a name="l05298"></a><span class="lineno"> 5298</span>&#160;                            <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> FactionID = 0;</div>
<div class="line"><a name="l05299"></a><span class="lineno"> 5299</span>&#160; </div>
<div class="line"><a name="l05300"></a><span class="lineno"> 5300</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l05301"></a><span class="lineno"> 5301</span>&#160;                            {</div>
<div class="line"><a name="l05302"></a><span class="lineno"> 5302</span>&#160;                                <span class="keywordflow">switch</span> (<a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a49bc14059c2bd3785231c52e0d54d382">Id</a>)</div>
<div class="line"><a name="l05303"></a><span class="lineno"> 5303</span>&#160;                                {</div>
<div class="line"><a name="l05304"></a><span class="lineno"> 5304</span>&#160;                                    <span class="keywordflow">case</span> 57819:</div>
<div class="line"><a name="l05305"></a><span class="lineno"> 5305</span>&#160;                                        FactionID = 1106;</div>
<div class="line"><a name="l05306"></a><span class="lineno"> 5306</span>&#160;                                        <span class="keywordflow">break</span>; <span class="comment">// Argent Crusade</span></div>
<div class="line"><a name="l05307"></a><span class="lineno"> 5307</span>&#160;                                    <span class="keywordflow">case</span> 57820:</div>
<div class="line"><a name="l05308"></a><span class="lineno"> 5308</span>&#160;                                        FactionID = 1098;</div>
<div class="line"><a name="l05309"></a><span class="lineno"> 5309</span>&#160;                                        <span class="keywordflow">break</span>; <span class="comment">// Knights of the Ebon Blade</span></div>
<div class="line"><a name="l05310"></a><span class="lineno"> 5310</span>&#160;                                    <span class="keywordflow">case</span> 57821:</div>
<div class="line"><a name="l05311"></a><span class="lineno"> 5311</span>&#160;                                        FactionID = 1090;</div>
<div class="line"><a name="l05312"></a><span class="lineno"> 5312</span>&#160;                                        <span class="keywordflow">break</span>; <span class="comment">// Kirin Tor</span></div>
<div class="line"><a name="l05313"></a><span class="lineno"> 5313</span>&#160;                                    <span class="keywordflow">case</span> 57822:</div>
<div class="line"><a name="l05314"></a><span class="lineno"> 5314</span>&#160;                                        FactionID = 1091;</div>
<div class="line"><a name="l05315"></a><span class="lineno"> 5315</span>&#160;                                        <span class="keywordflow">break</span>; <span class="comment">// The Wyrmrest Accord</span></div>
<div class="line"><a name="l05316"></a><span class="lineno"> 5316</span>&#160;                                }</div>
<div class="line"><a name="l05317"></a><span class="lineno"> 5317</span>&#160;                            }</div>
<div class="line"><a name="l05318"></a><span class="lineno"> 5318</span>&#160;                            caster-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a9c5a4099279837c4c18fc871232bf86e">SetChampioningFaction</a>(FactionID);</div>
<div class="line"><a name="l05319"></a><span class="lineno"> 5319</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05320"></a><span class="lineno"> 5320</span>&#160;                        }</div>
<div class="line"><a name="l05321"></a><span class="lineno"> 5321</span>&#160;                    <span class="comment">// LK Intro VO (1)</span></div>
<div class="line"><a name="l05322"></a><span class="lineno"> 5322</span>&#160;                    <span class="keywordflow">case</span> 58204:</div>
<div class="line"><a name="l05323"></a><span class="lineno"> 5323</span>&#160;                        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l05324"></a><span class="lineno"> 5324</span>&#160;                        {</div>
<div class="line"><a name="l05325"></a><span class="lineno"> 5325</span>&#160;                            <span class="comment">// Play part 1</span></div>
<div class="line"><a name="l05326"></a><span class="lineno"> 5326</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l05327"></a><span class="lineno"> 5327</span>&#160;                                target-&gt;<a class="code" href="../../db/df7/class_world_object.html#a40f0974be3005abb7313b4688e4cdfe3">PlayDirectSound</a>(14970, target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>());</div>
<div class="line"><a name="l05328"></a><span class="lineno"> 5328</span>&#160;                            <span class="comment">// continue in 58205</span></div>
<div class="line"><a name="l05329"></a><span class="lineno"> 5329</span>&#160;                            <span class="keywordflow">else</span></div>
<div class="line"><a name="l05330"></a><span class="lineno"> 5330</span>&#160;                                target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 58205, <span class="keyword">true</span>);</div>
<div class="line"><a name="l05331"></a><span class="lineno"> 5331</span>&#160;                        }</div>
<div class="line"><a name="l05332"></a><span class="lineno"> 5332</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05333"></a><span class="lineno"> 5333</span>&#160;                    <span class="comment">// LK Intro VO (2)</span></div>
<div class="line"><a name="l05334"></a><span class="lineno"> 5334</span>&#160;                    <span class="keywordflow">case</span> 58205:</div>
<div class="line"><a name="l05335"></a><span class="lineno"> 5335</span>&#160;                        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l05336"></a><span class="lineno"> 5336</span>&#160;                        {</div>
<div class="line"><a name="l05337"></a><span class="lineno"> 5337</span>&#160;                            <span class="comment">// Play part 2</span></div>
<div class="line"><a name="l05338"></a><span class="lineno"> 5338</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l05339"></a><span class="lineno"> 5339</span>&#160;                                target-&gt;<a class="code" href="../../db/df7/class_world_object.html#a40f0974be3005abb7313b4688e4cdfe3">PlayDirectSound</a>(14971, target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>());</div>
<div class="line"><a name="l05340"></a><span class="lineno"> 5340</span>&#160;                            <span class="comment">// Play part 3</span></div>
<div class="line"><a name="l05341"></a><span class="lineno"> 5341</span>&#160;                            <span class="keywordflow">else</span></div>
<div class="line"><a name="l05342"></a><span class="lineno"> 5342</span>&#160;                                target-&gt;<a class="code" href="../../db/df7/class_world_object.html#a40f0974be3005abb7313b4688e4cdfe3">PlayDirectSound</a>(14972, target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>());</div>
<div class="line"><a name="l05343"></a><span class="lineno"> 5343</span>&#160;                        }</div>
<div class="line"><a name="l05344"></a><span class="lineno"> 5344</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05345"></a><span class="lineno"> 5345</span>&#160;                    <span class="keywordflow">case</span> 62061: <span class="comment">// Festive Holiday Mount</span></div>
<div class="line"><a name="l05346"></a><span class="lineno"> 5346</span>&#160;                        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a8cec8a45f78b8555b8f13b8b00995acf">SPELL_AURA_MOUNTED</a>))</div>
<div class="line"><a name="l05347"></a><span class="lineno"> 5347</span>&#160;                        {</div>
<div class="line"><a name="l05348"></a><span class="lineno"> 5348</span>&#160;                            <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> creatureEntry = 0;</div>
<div class="line"><a name="l05349"></a><span class="lineno"> 5349</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l05350"></a><span class="lineno"> 5350</span>&#160;                            {</div>
<div class="line"><a name="l05351"></a><span class="lineno"> 5351</span>&#160;                                <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799aee4933438da47b18e67ffeb26e91f20b">SPELL_AURA_MOD_INCREASE_MOUNTED_FLIGHT_SPEED</a>))</div>
<div class="line"><a name="l05352"></a><span class="lineno"> 5352</span>&#160;                                    creatureEntry = 24906;</div>
<div class="line"><a name="l05353"></a><span class="lineno"> 5353</span>&#160;                                <span class="keywordflow">else</span></div>
<div class="line"><a name="l05354"></a><span class="lineno"> 5354</span>&#160;                                    creatureEntry = 15665;</div>
<div class="line"><a name="l05355"></a><span class="lineno"> 5355</span>&#160;                            }</div>
<div class="line"><a name="l05356"></a><span class="lineno"> 5356</span>&#160;                            <span class="keywordflow">else</span></div>
<div class="line"><a name="l05357"></a><span class="lineno"> 5357</span>&#160;                                creatureEntry = target-&gt;<a class="code" href="../../da/db7/class_unit.html#af00ac6c4dc7e639ac646fdafef336e85">GetAuraEffectsByType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a8cec8a45f78b8555b8f13b8b00995acf">SPELL_AURA_MOUNTED</a>).front()-&gt;GetMiscValue();</div>
<div class="line"><a name="l05358"></a><span class="lineno"> 5358</span>&#160; </div>
<div class="line"><a name="l05359"></a><span class="lineno"> 5359</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="../../d2/d0b/struct_creature_template.html">CreatureTemplate</a> <span class="keyword">const</span>* creatureInfo = <a class="code" href="../../d9/d77/_object_mgr_8h.html#a736e30da2b5261060ac6cdbb5de3b787">sObjectMgr</a>-&gt;GetCreatureTemplate(creatureEntry))</div>
<div class="line"><a name="l05360"></a><span class="lineno"> 5360</span>&#160;                            {</div>
<div class="line"><a name="l05361"></a><span class="lineno"> 5361</span>&#160;                                <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> displayID = <a class="code" href="../../d5/dbd/class_object_mgr.html#afd79285cbabfdd6097853626df3083e3">ObjectMgr::ChooseDisplayId</a>(creatureInfo);</div>
<div class="line"><a name="l05362"></a><span class="lineno"> 5362</span>&#160;                                <a class="code" href="../../d9/d77/_object_mgr_8h.html#a736e30da2b5261060ac6cdbb5de3b787">sObjectMgr</a>-&gt;GetCreatureModelRandomGender(&amp;displayID);</div>
<div class="line"><a name="l05363"></a><span class="lineno"> 5363</span>&#160; </div>
<div class="line"><a name="l05364"></a><span class="lineno"> 5364</span>&#160;                                target-&gt;<a class="code" href="../../d8/d83/class_object.html#adc7e9b205f35f9894ec9a4f0ec0871f9">SetUInt32Value</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a6d4a274cf53b00cfcea24a3479588031">UNIT_FIELD_MOUNTDISPLAYID</a>, displayID);</div>
<div class="line"><a name="l05365"></a><span class="lineno"> 5365</span>&#160;                            }</div>
<div class="line"><a name="l05366"></a><span class="lineno"> 5366</span>&#160;                        }</div>
<div class="line"><a name="l05367"></a><span class="lineno"> 5367</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05368"></a><span class="lineno"> 5368</span>&#160;                }</div>
<div class="line"><a name="l05369"></a><span class="lineno"> 5369</span>&#160; </div>
<div class="line"><a name="l05370"></a><span class="lineno"> 5370</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05371"></a><span class="lineno"> 5371</span>&#160;            }</div>
<div class="line"><a name="l05372"></a><span class="lineno"> 5372</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0e4b88db8be01ea5d62cc08d07b28aae">SPELLFAMILY_MAGE</a>:</div>
<div class="line"><a name="l05373"></a><span class="lineno"> 5373</span>&#160;            {</div>
<div class="line"><a name="l05374"></a><span class="lineno"> 5374</span>&#160;                <span class="comment">//if (!(mode &amp; AURA_EFFECT_HANDLE_REAL))</span></div>
<div class="line"><a name="l05375"></a><span class="lineno"> 5375</span>&#160;                <span class="comment">//break;</span></div>
<div class="line"><a name="l05376"></a><span class="lineno"> 5376</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05377"></a><span class="lineno"> 5377</span>&#160;            }</div>
<div class="line"><a name="l05378"></a><span class="lineno"> 5378</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba04f59ec569a753b4e47a0a230782f207">SPELLFAMILY_PRIEST</a>:</div>
<div class="line"><a name="l05379"></a><span class="lineno"> 5379</span>&#160;            {</div>
<div class="line"><a name="l05380"></a><span class="lineno"> 5380</span>&#160;                <span class="comment">//if (!(mode &amp; AURA_EFFECT_HANDLE_REAL))</span></div>
<div class="line"><a name="l05381"></a><span class="lineno"> 5381</span>&#160;                <span class="comment">//break;</span></div>
<div class="line"><a name="l05382"></a><span class="lineno"> 5382</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05383"></a><span class="lineno"> 5383</span>&#160;            }</div>
<div class="line"><a name="l05384"></a><span class="lineno"> 5384</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1bac3788ce010075b8bd4e6083638d8cd40">SPELLFAMILY_DRUID</a>:</div>
<div class="line"><a name="l05385"></a><span class="lineno"> 5385</span>&#160;            {</div>
<div class="line"><a name="l05386"></a><span class="lineno"> 5386</span>&#160;                <span class="comment">//if (!(mode &amp; AURA_EFFECT_HANDLE_REAL))</span></div>
<div class="line"><a name="l05387"></a><span class="lineno"> 5387</span>&#160;                <span class="comment">//    break;</span></div>
<div class="line"><a name="l05388"></a><span class="lineno"> 5388</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05389"></a><span class="lineno"> 5389</span>&#160;            }</div>
<div class="line"><a name="l05390"></a><span class="lineno"> 5390</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba9c8a9c6e102c760263471a93e58e80ea">SPELLFAMILY_SHAMAN</a>:</div>
<div class="line"><a name="l05391"></a><span class="lineno"> 5391</span>&#160;            {</div>
<div class="line"><a name="l05392"></a><span class="lineno"> 5392</span>&#160;                <span class="comment">//if (!(mode &amp; AURA_EFFECT_HANDLE_REAL))</span></div>
<div class="line"><a name="l05393"></a><span class="lineno"> 5393</span>&#160;                <span class="comment">//    break;</span></div>
<div class="line"><a name="l05394"></a><span class="lineno"> 5394</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05395"></a><span class="lineno"> 5395</span>&#160;            }</div>
<div class="line"><a name="l05396"></a><span class="lineno"> 5396</span>&#160;    }</div>
<div class="line"><a name="l05397"></a><span class="lineno"> 5397</span>&#160;}</div>
<div class="ttc" id="a_battlefield_mgr_8h_html_a4545b2a440043037e8dad52c0f644f48"><div class="ttname"><a href="../../dc/df4/_battlefield_mgr_8h.html#a4545b2a440043037e8dad52c0f644f48">sBattlefieldMgr</a></div><div class="ttdeci">#define sBattlefieldMgr</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/_battlefield_mgr_8h_source.html#l00077">BattlefieldMgr.h:77</a></div></div>
<div class="ttc" id="a_object_mgr_8h_html_a736e30da2b5261060ac6cdbb5de3b787"><div class="ttname"><a href="../../d9/d77/_object_mgr_8h.html#a736e30da2b5261060ac6cdbb5de3b787">sObjectMgr</a></div><div class="ttdeci">#define sObjectMgr</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d77/_object_mgr_8h_source.html#l01546">ObjectMgr.h:1546</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a></div><div class="ttdeci">@ GENDER_MALE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00060">SharedDefines.h:60</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a3667e3c5ec056737c8789615a989324faf3da8f6e862fb5230f0bbb8613684463"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a3667e3c5ec056737c8789615a989324faf3da8f6e862fb5230f0bbb8613684463">GENDER_FEMALE</a></div><div class="ttdeci">@ GENDER_FEMALE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00061">SharedDefines.h:61</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a></div><div class="ttdeci">@ IMMUNITY_MECHANIC</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01371">SharedDefines.h:1371</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a9264ae6b0ef1b61a6eeb7fdac9fbab1ba04f59ec569a753b4e47a0a230782f207"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba04f59ec569a753b4e47a0a230782f207">SPELLFAMILY_PRIEST</a></div><div class="ttdeci">@ SPELLFAMILY_PRIEST</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l03460">SharedDefines.h:3460</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0e4b88db8be01ea5d62cc08d07b28aae"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0e4b88db8be01ea5d62cc08d07b28aae">SPELLFAMILY_MAGE</a></div><div class="ttdeci">@ SPELLFAMILY_MAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l03457">SharedDefines.h:3457</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0ebbb6206eb92cdc484b416eb6f41743"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0ebbb6206eb92cdc484b416eb6f41743">SPELLFAMILY_GENERIC</a></div><div class="ttdeci">@ SPELLFAMILY_GENERIC</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l03454">SharedDefines.h:3454</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a9264ae6b0ef1b61a6eeb7fdac9fbab1ba9c8a9c6e102c760263471a93e58e80ea"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba9c8a9c6e102c760263471a93e58e80ea">SPELLFAMILY_SHAMAN</a></div><div class="ttdeci">@ SPELLFAMILY_SHAMAN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l03465">SharedDefines.h:3465</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a9264ae6b0ef1b61a6eeb7fdac9fbab1bac3788ce010075b8bd4e6083638d8cd40"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1bac3788ce010075b8bd4e6083638d8cd40">SPELLFAMILY_DRUID</a></div><div class="ttdeci">@ SPELLFAMILY_DRUID</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l03461">SharedDefines.h:3461</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a8cec8a45f78b8555b8f13b8b00995acf"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a8cec8a45f78b8555b8f13b8b00995acf">SPELL_AURA_MOUNTED</a></div><div class="ttdeci">@ SPELL_AURA_MOUNTED</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00141">SpellAuraDefines.h:141</a></div></div>
<div class="ttc" id="a_unit_8h_html_a9a4f502870485ba32e759067c9adca94a132c6993498600b4a3cfda2b1639c166"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a9a4f502870485ba32e759067c9adca94a132c6993498600b4a3cfda2b1639c166">AURA_REMOVE_BY_CANCEL</a></div><div class="ttdeci">@ AURA_REMOVE_BY_CANCEL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00388">Unit.h:388</a></div></div>
<div class="ttc" id="a_unit_8h_html_a9a4f502870485ba32e759067c9adca94a9ca05b22853d12d44ac7e80a9e864a10"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a9a4f502870485ba32e759067c9adca94a9ca05b22853d12d44ac7e80a9e864a10">AURA_REMOVE_BY_EXPIRE</a></div><div class="ttdeci">@ AURA_REMOVE_BY_EXPIRE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00390">Unit.h:390</a></div></div>
<div class="ttc" id="a_update_fields_8h_html_a0e42dc606678c9df7884e1aad621e881a6d4a274cf53b00cfcea24a3479588031"><div class="ttname"><a href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a6d4a274cf53b00cfcea24a3479588031">UNIT_FIELD_MOUNTDISPLAYID</a></div><div class="ttdeci">@ UNIT_FIELD_MOUNTDISPLAYID</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d65/_update_fields_8h_source.html#l00126">UpdateFields.h:126</a></div></div>
<div class="ttc" id="aclass_acore_1_1_any_player_in_object_range_check_html"><div class="ttname"><a href="../../d2/de1/class_acore_1_1_any_player_in_object_range_check.html">Acore::AnyPlayerInObjectRangeCheck</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dc9/_grid_notifiers_8h_source.html#l01233">GridNotifiers.h:1234</a></div></div>
<div class="ttc" id="aclass_aura_html_a1f6c2606d7dc499c1fc1ba0cee1f255b"><div class="ttname"><a href="../../d2/dde/class_aura.html#a1f6c2606d7dc499c1fc1ba0cee1f255b">Aura::SetStackAmount</a></div><div class="ttdeci">void SetStackAmount(uint8 num)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/_spell_auras_8cpp_source.html#l00947">SpellAuras.cpp:947</a></div></div>
<div class="ttc" id="aclass_aura_html_a7f7d613279717173c13708425f3a8083"><div class="ttname"><a href="../../d2/dde/class_aura.html#a7f7d613279717173c13708425f3a8083">Aura::SetCharges</a></div><div class="ttdeci">void SetCharges(uint8 charges)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/_spell_auras_8cpp_source.html#l00904">SpellAuras.cpp:904</a></div></div>
<div class="ttc" id="aclass_battlefield_html"><div class="ttname"><a href="../../d3/d42/class_battlefield.html">Battlefield</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d88/_battlefield_8h_source.html#l00204">Battlefield.h:205</a></div></div>
<div class="ttc" id="aclass_battleground_html"><div class="ttname"><a href="../../d6/ddc/class_battleground.html">Battleground</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db3/_battleground_8h_source.html#l00335">Battleground.h:336</a></div></div>
<div class="ttc" id="aclass_map_html_a4fa855d03b7d1fa1957453767ff52429"><div class="ttname"><a href="../../dd/d11/class_map.html#a4fa855d03b7d1fa1957453767ff52429">Map::IsBattleground</a></div><div class="ttdeci">bool IsBattleground() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d63/_map_8h_source.html#l00440">Map.h:440</a></div></div>
<div class="ttc" id="aclass_object_html_aa627fe2967ed0e0ed1d8aeeb4365a961"><div class="ttname"><a href="../../d8/d83/class_object.html#aa627fe2967ed0e0ed1d8aeeb4365a961">Object::GetEntry</a></div><div class="ttdeci">uint32 GetEntry() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d30/_object_8h_source.html#l00101">Object.h:101</a></div></div>
<div class="ttc" id="aclass_object_html_ad5ba4799de88341246bc5ff7dd4b2d36"><div class="ttname"><a href="../../d8/d83/class_object.html#ad5ba4799de88341246bc5ff7dd4b2d36">Object::SetEntry</a></div><div class="ttdeci">void SetEntry(uint32 entry)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d30/_object_8h_source.html#l00102">Object.h:102</a></div></div>
<div class="ttc" id="aclass_object_html_adc7e9b205f35f9894ec9a4f0ec0871f9"><div class="ttname"><a href="../../d8/d83/class_object.html#adc7e9b205f35f9894ec9a4f0ec0871f9">Object::SetUInt32Value</a></div><div class="ttdeci">void SetUInt32Value(uint16 index, uint32 value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/ded/_object_8cpp_source.html#l00641">Object.cpp:641</a></div></div>
<div class="ttc" id="aclass_object_mgr_html_afd79285cbabfdd6097853626df3083e3"><div class="ttname"><a href="../../d5/dbd/class_object_mgr.html#afd79285cbabfdd6097853626df3083e3">ObjectMgr::ChooseDisplayId</a></div><div class="ttdeci">static uint32 ChooseDisplayId(CreatureTemplate const *cinfo, CreatureData const *data=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d62/_object_mgr_8cpp_source.html#l01405">ObjectMgr.cpp:1405</a></div></div>
<div class="ttc" id="aclass_pet_aura_html"><div class="ttname"><a href="../../d3/d0b/class_pet_aura.html">PetAura</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d75/_spell_mgr_8h_source.html#l00453">SpellMgr.h:454</a></div></div>
<div class="ttc" id="aclass_player_html_a05924f5e9df8d5f06ba422e159a4fd8a"><div class="ttname"><a href="../../d8/d53/class_player.html#a05924f5e9df8d5f06ba422e159a4fd8a">Player::KilledMonsterCredit</a></div><div class="ttdeci">void KilledMonsterCredit(uint32 entry, ObjectGuid guid=ObjectGuid::Empty)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/_player_quest_8cpp_source.html#l01875">PlayerQuest.cpp:1875</a></div></div>
<div class="ttc" id="aclass_player_html_a5f17db78f9356bf239b7631ebc38fa2d"><div class="ttname"><a href="../../d8/d53/class_player.html#a5f17db78f9356bf239b7631ebc38fa2d">Player::GetBattleground</a></div><div class="ttdeci">Battleground * GetBattleground(bool create=false) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/_player_8cpp_source.html#l11489">Player.cpp:11489</a></div></div>
<div class="ttc" id="aclass_player_html_a64d7fc1d009a80de3b86e7ad66f5ad3c"><div class="ttname"><a href="../../d8/d53/class_player.html#a64d7fc1d009a80de3b86e7ad66f5ad3c">Player::RemoveAmmo</a></div><div class="ttdeci">void RemoveAmmo()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d16/_player_storage_8cpp_source.html#l02547">PlayerStorage.cpp:2547</a></div></div>
<div class="ttc" id="aclass_player_html_a9c5a4099279837c4c18fc871232bf86e"><div class="ttname"><a href="../../d8/d53/class_player.html#a9c5a4099279837c4c18fc871232bf86e">Player::SetChampioningFaction</a></div><div class="ttdeci">void SetChampioningFaction(uint32 faction)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l02504">Player.h:2504</a></div></div>
<div class="ttc" id="aclass_player_html_ac2c25dd9c3d9a6c3fe3901f25b0bdedf"><div class="ttname"><a href="../../d8/d53/class_player.html#ac2c25dd9c3d9a6c3fe3901f25b0bdedf">Player::LeaveBattleground</a></div><div class="ttdeci">void LeaveBattleground(Battleground *bg=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/_player_8cpp_source.html#l10585">Player.cpp:10585</a></div></div>
<div class="ttc" id="aclass_spell_info_html_a46f51f384b1455b03000e98a08d11790"><div class="ttname"><a href="../../d4/d7d/class_spell_info.html#a46f51f384b1455b03000e98a08d11790">SpellInfo::StackAmount</a></div><div class="ttdeci">uint32 StackAmount</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d70/_spell_info_8h_source.html#l00366">SpellInfo.h:366</a></div></div>
<div class="ttc" id="aclass_spell_info_html_af6ec577353f7d3cc59badd7d332153b0"><div class="ttname"><a href="../../d4/d7d/class_spell_info.html#af6ec577353f7d3cc59badd7d332153b0">SpellInfo::SpellFamilyName</a></div><div class="ttdeci">uint32 SpellFamilyName</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d70/_spell_info_8h_source.html#l00381">SpellInfo.h:381</a></div></div>
<div class="ttc" id="aclass_unit_html_a0d13935c40d0392f7f7b5a34540461b2"><div class="ttname"><a href="../../da/db7/class_unit.html#a0d13935c40d0392f7f7b5a34540461b2">Unit::getGender</a></div><div class="ttdeci">uint8 getGender() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01547">Unit.h:1547</a></div></div>
<div class="ttc" id="aclass_unit_html_a1350682846c1ddb65567ec85e75e2df3"><div class="ttname"><a href="../../da/db7/class_unit.html#a1350682846c1ddb65567ec85e75e2df3">Unit::RemovePetAura</a></div><div class="ttdeci">void RemovePetAura(PetAura const *petSpell)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l16507">Unit.cpp:16507</a></div></div>
<div class="ttc" id="aclass_unit_html_a135e4d345c338da83450a60528f71222"><div class="ttname"><a href="../../da/db7/class_unit.html#a135e4d345c338da83450a60528f71222">Unit::GetAura</a></div><div class="ttdeci">Aura * GetAura(uint32 spellId, ObjectGuid casterGUID=ObjectGuid::Empty, ObjectGuid itemCasterGUID=ObjectGuid::Empty, uint8 reqEffMask=0) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l05076">Unit.cpp:5076</a></div></div>
<div class="ttc" id="aclass_unit_html_a17a3a280549173c861ab2de0f1d876af"><div class="ttname"><a href="../../da/db7/class_unit.html#a17a3a280549173c861ab2de0f1d876af">Unit::CanHaveThreatList</a></div><div class="ttdeci">bool CanHaveThreatList() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l13775">Unit.cpp:13775</a></div></div>
<div class="ttc" id="aclass_unit_html_a1afc1e413f12c5bd7bc00c926fa05833"><div class="ttname"><a href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">Unit::ApplySpellImmune</a></div><div class="ttdeci">void ApplySpellImmune(uint32 spellId, uint32 op, uint32 type, bool apply, SpellImmuneBlockType blockType=SPELL_BLOCK_TYPE_ALL)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l12604">Unit.cpp:12604</a></div></div>
<div class="ttc" id="aclass_unit_html_a2c30ee763635ea710cc1101ee3c94607"><div class="ttname"><a href="../../da/db7/class_unit.html#a2c30ee763635ea710cc1101ee3c94607">Unit::AddPetAura</a></div><div class="ttdeci">void AddPetAura(PetAura const *petSpell)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l16495">Unit.cpp:16495</a></div></div>
<div class="ttc" id="aclass_unit_html_a3b4dad985e3b5dde28d89afc956999e4"><div class="ttname"><a href="../../da/db7/class_unit.html#a3b4dad985e3b5dde28d89afc956999e4">Unit::AddThreat</a></div><div class="ttdeci">void AddThreat(Unit *victim, float fThreat, SpellSchoolMask schoolMask=SPELL_SCHOOL_MASK_NORMAL, SpellInfo const *threatSpell=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l13814">Unit.cpp:13814</a></div></div>
<div class="ttc" id="aclass_unit_html_a51d433dde350cd94d7c3c43e30ca997f"><div class="ttname"><a href="../../da/db7/class_unit.html#a51d433dde350cd94d7c3c43e30ca997f">Unit::AddAura</a></div><div class="ttdeci">Aura * AddAura(uint32 spellId, Unit *target)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l17980">Unit.cpp:17980</a></div></div>
<div class="ttc" id="aclass_unit_html_a5ea3f54af571493f7889220724667189"><div class="ttname"><a href="../../da/db7/class_unit.html#a5ea3f54af571493f7889220724667189">Unit::IsAlive</a></div><div class="ttdeci">bool IsAlive() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01888">Unit.h:1888</a></div></div>
<div class="ttc" id="aclass_unit_html_aa3ca95f7a14041f562ed69c3994afdfc"><div class="ttname"><a href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">Unit::CastSpell</a></div><div class="ttdeci">SpellCastResult CastSpell(SpellCastTargets const &amp;targets, SpellInfo const *spellInfo, CustomSpellValues const *value, TriggerCastFlags triggerFlags=TRIGGERED_NONE, Item *castItem=nullptr, AuraEffect const *triggeredByAura=nullptr, ObjectGuid originalCaster=ObjectGuid::Empty)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l01087">Unit.cpp:1087</a></div></div>
<div class="ttc" id="aclass_unit_html_ae78759acca81e2a89a82f79a4ef6e70c"><div class="ttname"><a href="../../da/db7/class_unit.html#ae78759acca81e2a89a82f79a4ef6e70c">Unit::GetGuardianPet</a></div><div class="ttdeci">Guardian * GetGuardianPet() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l10045">Unit.cpp:10045</a></div></div>
<div class="ttc" id="aclass_unit_html_afd7aa5f7719cba4d967bb7f009582d2f"><div class="ttname"><a href="../../da/db7/class_unit.html#afd7aa5f7719cba4d967bb7f009582d2f">Unit::isDead</a></div><div class="ttdeci">bool isDead() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01890">Unit.h:1890</a></div></div>
<div class="ttc" id="aclass_world_object_html_a40f0974be3005abb7313b4688e4cdfe3"><div class="ttname"><a href="../../db/df7/class_world_object.html#a40f0974be3005abb7313b4688e4cdfe3">WorldObject::PlayDirectSound</a></div><div class="ttdeci">void PlayDirectSound(uint32 sound_id, Player *target=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/ded/_object_8cpp_source.html#l02965">Object.cpp:2965</a></div></div>
<div class="ttc" id="aclass_world_object_html_a76c507a1b3adcebf2732572bc6b67fe0"><div class="ttname"><a href="../../db/df7/class_world_object.html#a76c507a1b3adcebf2732572bc6b67fe0">WorldObject::GetMap</a></div><div class="ttdeci">Map * GetMap() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d30/_object_8h_source.html#l00800">Object.h:800</a></div></div>
<div class="ttc" id="aclass_world_object_html_aaf763bad217ff546f44a04b8c977d694"><div class="ttname"><a href="../../db/df7/class_world_object.html#aaf763bad217ff546f44a04b8c977d694">WorldObject::PlayDistanceSound</a></div><div class="ttdeci">void PlayDistanceSound(uint32 sound_id, Player *target=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/ded/_object_8cpp_source.html#l02954">Object.cpp:2954</a></div></div>
<div class="ttc" id="aclass_world_object_html_ad498d690fbe69bb99a8a2ffdcb2f5169"><div class="ttname"><a href="../../db/df7/class_world_object.html#ad498d690fbe69bb99a8a2ffdcb2f5169">WorldObject::GetZoneId</a></div><div class="ttdeci">uint32 GetZoneId() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/ded/_object_8cpp_source.html#l03191">Object.cpp:3191</a></div></div>
<div class="ttc" id="acolor_8h_html_aff385f59fe6fc0f7d51a290ec9ff5a75"><div class="ttname"><a href="../../da/dec/color_8h.html#aff385f59fe6fc0f7d51a290ec9ff5a75">bg</a></div><div class="ttdeci">FMT_CONSTEXPR text_style bg(detail::color_type background) FMT_NOEXCEPT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dec/color_8h_source.html#l00363">color.h:363</a></div></div>
<div class="ttc" id="asrc_2common_2_utilities_2_random_8h_html_a50320d4edff86db31b25138ae72161ad"><div class="ttname"><a href="../../d1/d65/src_2common_2_utilities_2_random_8h.html#a50320d4edff86db31b25138ae72161ad">roll_chance_i</a></div><div class="ttdeci">bool roll_chance_i(int chance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d65/src_2common_2_utilities_2_random_8h_source.html#l00059">Random.h:59</a></div></div>
<div class="ttc" id="astruct_acore_1_1_player_searcher_html"><div class="ttname"><a href="../../df/dab/struct_acore_1_1_player_searcher.html">Acore::PlayerSearcher</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dc9/_grid_notifiers_8h_source.html#l00476">GridNotifiers.h:477</a></div></div>
<div class="ttc" id="astruct_cell_html_a952f2c6008bbbc3b9ee1652ea5f9188a"><div class="ttname"><a href="../../dc/d9f/struct_cell.html#a952f2c6008bbbc3b9ee1652ea5f9188a">Cell::VisitWorldObjects</a></div><div class="ttdeci">static void VisitWorldObjects(WorldObject const *obj, T &amp;visitor, float radius, bool dont_load=true)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d39/_cell_impl_8h_source.html#l00193">CellImpl.h:193</a></div></div>
<div class="ttc" id="astruct_creature_template_html"><div class="ttname"><a href="../../d2/d0b/struct_creature_template.html">CreatureTemplate</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de2/_creature_data_8h_source.html#l00087">CreatureData.h:88</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l17980">Unit::AddAura()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16495">Unit::AddPetAura()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l13814">Unit::AddThreat()</a>, <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l12604">Unit::ApplySpellImmune()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00045">AURA_EFFECT_HANDLE_REAPPLY</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00388">AURA_REMOVE_BY_CANCEL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00390">AURA_REMOVE_BY_EXPIRE</a>, <a class="el" href="../../da/dec/color_8h_source.html#l00363">bg()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l13775">Unit::CanHaveThreatList()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01087">Unit::CastSpell()</a>, <a class="el" href="../../df/d62/_object_mgr_8cpp_source.html#l01405">ObjectMgr::ChooseDisplayId()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00061">GENDER_FEMALE</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00060">GENDER_MALE</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05076">Unit::GetAura()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02047">Unit::GetAuraEffectsByType()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">GetBase()</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l11489">Player::GetBattleground()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00040">GetCaster()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l00466">Aura::GetCaster()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00041">GetCasterGUID()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00101">Object::GetEntry()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01547">Unit::getGender()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l10045">Unit::GetGuardianPet()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00098">Object::GetGUID()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">GetId()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00800">WorldObject::GetMap()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02345">Unit::GetMotionMaster()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00073">AuraApplication::GetRemoveMode()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00100">Aura::GetSpellInfo()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l03191">WorldObject::GetZoneId()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05194">Unit::HasAuraType()</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00315">SpellInfo::Id</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01371">IMMUNITY_MECHANIC</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01888">Unit::IsAlive()</a>, <a class="el" href="../../d3/d63/_map_8h_source.html#l00440">Map::IsBattleground()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01890">Unit::isDead()</a>, <a class="el" href="../../d9/d82/_player_quest_8cpp_source.html#l01875">Player::KilledMonsterCredit()</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l10585">Player::LeaveBattleground()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00137">m_effIndex</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00115">m_spellInfo</a>, <a class="el" href="../../d9/d24/_motion_master_8cpp_source.html#l00548">MotionMaster::MoveFall()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l02965">WorldObject::PlayDirectSound()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l02954">WorldObject::PlayDistanceSound()</a>, <a class="el" href="../../d4/d16/_player_storage_8cpp_source.html#l02547">Player::RemoveAmmo()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04420">Unit::RemoveAurasDueToSpell()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16507">Unit::RemovePetAura()</a>, <a class="el" href="../../d1/d65/src_2common_2_utilities_2_random_8h_source.html#l00059">roll_chance_i()</a>, <a class="el" href="../../dc/df4/_battlefield_mgr_8h_source.html#l00077">sBattlefieldMgr</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l02504">Player::SetChampioningFaction()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l00904">Aura::SetCharges()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00102">Object::SetEntry()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l00947">Aura::SetStackAmount()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00641">Object::SetUInt32Value()</a>, <a class="el" href="../../d9/d77/_object_mgr_8h_source.html#l01546">sObjectMgr</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00270">SPELL_AURA_MOD_INCREASE_MOUNTED_FLIGHT_SPEED</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00141">SPELL_AURA_MOUNTED</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l03461">SPELLFAMILY_DRUID</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l03454">SPELLFAMILY_GENERIC</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l03457">SPELLFAMILY_MAGE</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l03460">SPELLFAMILY_PRIEST</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l03465">SPELLFAMILY_SHAMAN</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00381">SpellInfo::SpellFamilyName</a>, <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00794">sSpellMgr</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00366">SpellInfo::StackAmount</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00037">TYPEID_UNIT</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00126">UNIT_FIELD_MOUNTDISPLAYID</a>, and <a class="el" href="../../d4/d39/_cell_impl_8h_source.html#l00193">Cell::VisitWorldObjects()</a>.</p>

</div>
</div>
<a id="a1cfa8fba22df7460cb11c768e8e6e3ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1cfa8fba22df7460cb11c768e8e6e3ba">&#9670;&nbsp;</a></span>HandleAuraEmpathy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraEmpathy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05508">5508</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05509"></a><span class="lineno"> 5509</span>&#160;{</div>
<div class="line"><a name="l05510"></a><span class="lineno"> 5510</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l05511"></a><span class="lineno"> 5511</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05512"></a><span class="lineno"> 5512</span>&#160; </div>
<div class="line"><a name="l05513"></a><span class="lineno"> 5513</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l05514"></a><span class="lineno"> 5514</span>&#160; </div>
<div class="line"><a name="l05515"></a><span class="lineno"> 5515</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l05516"></a><span class="lineno"> 5516</span>&#160;    {</div>
<div class="line"><a name="l05517"></a><span class="lineno"> 5517</span>&#160;        <span class="comment">// do not remove unit flag if there are more than this auraEffect of that kind on unit on unit</span></div>
<div class="line"><a name="l05518"></a><span class="lineno"> 5518</span>&#160;        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>()))</div>
<div class="line"><a name="l05519"></a><span class="lineno"> 5519</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05520"></a><span class="lineno"> 5520</span>&#160;    }</div>
<div class="line"><a name="l05521"></a><span class="lineno"> 5521</span>&#160; </div>
<div class="line"><a name="l05522"></a><span class="lineno"> 5522</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a80140b04cc4277697de8f853e7da90e8">GetCreatureType</a>() == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a5bc40f1116d89138cda8ebd1a04694dfad8554d39e48b328aeef08647900c1927">CREATURE_TYPE_BEAST</a>)</div>
<div class="line"><a name="l05523"></a><span class="lineno"> 5523</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a830bd94d6366efff27b887ec963c1dab">ApplyModUInt32Value</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881affa05042cc4016a32cf1a66d4157d03d">UNIT_DYNAMIC_FLAGS</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a6d2f7a5452237dadf8fd3aed70f44039a078ce2ed96955f66628c22f925dc16c0">UNIT_DYNFLAG_SPECIALINFO</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l05524"></a><span class="lineno"> 5524</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_a5bc40f1116d89138cda8ebd1a04694dfad8554d39e48b328aeef08647900c1927"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a5bc40f1116d89138cda8ebd1a04694dfad8554d39e48b328aeef08647900c1927">CREATURE_TYPE_BEAST</a></div><div class="ttdeci">@ CREATURE_TYPE_BEAST</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l02598">SharedDefines.h:2598</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a6d2f7a5452237dadf8fd3aed70f44039a078ce2ed96955f66628c22f925dc16c0"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a6d2f7a5452237dadf8fd3aed70f44039a078ce2ed96955f66628c22f925dc16c0">UNIT_DYNFLAG_SPECIALINFO</a></div><div class="ttdeci">@ UNIT_DYNFLAG_SPECIALINFO</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l03095">SharedDefines.h:3095</a></div></div>
<div class="ttc" id="a_update_fields_8h_html_a0e42dc606678c9df7884e1aad621e881affa05042cc4016a32cf1a66d4157d03d"><div class="ttname"><a href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881affa05042cc4016a32cf1a66d4157d03d">UNIT_DYNAMIC_FLAGS</a></div><div class="ttdeci">@ UNIT_DYNAMIC_FLAGS</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d65/_update_fields_8h_source.html#l00136">UpdateFields.h:136</a></div></div>
<div class="ttc" id="aclass_object_html_a830bd94d6366efff27b887ec963c1dab"><div class="ttname"><a href="../../d8/d83/class_object.html#a830bd94d6366efff27b887ec963c1dab">Object::ApplyModUInt32Value</a></div><div class="ttdeci">void ApplyModUInt32Value(uint16 index, int32 val, bool apply)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/ded/_object_8cpp_source.html#l00797">Object.cpp:797</a></div></div>
<div class="ttc" id="aclass_unit_html_a80140b04cc4277697de8f853e7da90e8"><div class="ttname"><a href="../../da/db7/class_unit.html#a80140b04cc4277697de8f853e7da90e8">Unit::GetCreatureType</a></div><div class="ttdeci">uint32 GetCreatureType() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l14324">Unit.cpp:14324</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00797">Object::ApplyModUInt32Value()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l02598">CREATURE_TYPE_BEAST</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00446">GetAuraType()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l14324">Unit::GetCreatureType()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05194">Unit::HasAuraType()</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00136">UNIT_DYNAMIC_FLAGS</a>, and <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l03095">UNIT_DYNFLAG_SPECIALINFO</a>.</p>

</div>
</div>
<a id="a1fee7fad1f1f304000184269e5b94c5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fee7fad1f1f304000184269e5b94c5c">&#9670;&nbsp;</a></span>HandleAuraFeatherFall()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraFeatherFall </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02896">2896</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;{</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160; </div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160; </div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d53/class_player.html">Player</a>* targetPlayer = target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>())</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;    {</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;        <a class="code" href="../../d0/d7d/_script_mgr_8h.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a>-&gt;AnticheatSetUnderACKmount(targetPlayer);</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;    }</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160; </div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;    {</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;        <span class="comment">// do not remove unit flag if there are more than this auraEffect of that kind on unit on unit</span></div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>()))</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;    }</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160; </div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9a61b648113fb3d98bceb9a7b4338641">SetFeatherFall</a>(<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160; </div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;    <span class="comment">// start fall from current height</span></div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a> &amp;&amp; target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a5314dca58905e9e6504d140a32a60599">SetFallInformation</a>(time(<span class="keyword">nullptr</span>), target-&gt;<a class="code" href="../../d1/d26/struct_position.html#a4e813a59345a6275e8b87b96be03e60b">GetPositionZ</a>());</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;}</div>
<div class="ttc" id="a_script_mgr_8h_html_ae8161e629869974bc49b1cbfc73c1087"><div class="ttname"><a href="../../d0/d7d/_script_mgr_8h.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a></div><div class="ttdeci">#define sScriptMgr</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d7d/_script_mgr_8h_source.html#l02048">ScriptMgr.h:2048</a></div></div>
<div class="ttc" id="aclass_player_html_a5314dca58905e9e6504d140a32a60599"><div class="ttname"><a href="../../d8/d53/class_player.html#a5314dca58905e9e6504d140a32a60599">Player::SetFallInformation</a></div><div class="ttdeci">void SetFallInformation(uint32 time, float z)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l02301">Player.h:2301</a></div></div>
<div class="ttc" id="aclass_unit_html_a9a61b648113fb3d98bceb9a7b4338641"><div class="ttname"><a href="../../da/db7/class_unit.html#a9a61b648113fb3d98bceb9a7b4338641">Unit::SetFeatherFall</a></div><div class="ttdeci">virtual bool SetFeatherFall(bool enable, bool packetOnly=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l19751">Unit.cpp:19751</a></div></div>
<div class="ttc" id="astruct_position_html_a4e813a59345a6275e8b87b96be03e60b"><div class="ttname"><a href="../../d1/d26/struct_position.html#a4e813a59345a6275e8b87b96be03e60b">Position::GetPositionZ</a></div><div class="ttdeci">float GetPositionZ() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d30/_object_8h_source.html#l00336">Object.h:336</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00446">GetAuraType()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00336">Position::GetPositionZ()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05194">Unit::HasAuraType()</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l02301">Player::SetFallInformation()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l19751">Unit::SetFeatherFall()</a>, <a class="el" href="../../d0/d7d/_script_mgr_8h_source.html#l02048">sScriptMgr</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, and <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>.</p>

</div>
</div>
<a id="a81f9974032b40d56489fabe89641f81d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81f9974032b40d56489fabe89641f81d">&#9670;&nbsp;</a></span>HandleAuraGhost()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraGhost </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01741">1741</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;{</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160; </div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160; </div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160; </div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    {</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a79a7a80acdec46961b4d8aaead4ae631">SetFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a65a8142f4727b52425e593eb2727d9f4">PLAYER_FLAGS</a>, <a class="code" href="../../d1/d39/_player_8h.html#a486dd000e9a9532459d9dd9010570621a8972cf61a8fe94379d50f9b737894863">PLAYER_FLAGS_GHOST</a>);</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;        target-&gt;<a class="code" href="../../db/df7/class_world_object.html#add2aa23e80725c3efde05b8c25cfd62e">m_serverSideVisibility</a>.<a class="code" href="../../d0/dbe/class_flagged_values_array32.html#ad0d385589befe52103f077723fa2463c">SetValue</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a0105c40ec0c20daef3cbd8dfc5f473fda5b9831b2635d5fb4ec0596ec40a6487b">SERVERSIDE_VISIBILITY_GHOST</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#ab45f8901baa25b1e80ee28da43b17269ab1259865309e9253030249f694c8cb1c">GHOST_VISIBILITY_GHOST</a>);</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;        target-&gt;<a class="code" href="../../db/df7/class_world_object.html#ac34d2a601caf37ebe5764c4cd7191023">m_serverSideVisibilityDetect</a>.<a class="code" href="../../d0/dbe/class_flagged_values_array32.html#ad0d385589befe52103f077723fa2463c">SetValue</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a0105c40ec0c20daef3cbd8dfc5f473fda5b9831b2635d5fb4ec0596ec40a6487b">SERVERSIDE_VISIBILITY_GHOST</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#ab45f8901baa25b1e80ee28da43b17269ab1259865309e9253030249f694c8cb1c">GHOST_VISIBILITY_GHOST</a>);</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;    }</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;    {</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a7b48a8e2e90779303af620c79bf8bfec">SPELL_AURA_GHOST</a>))</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160; </div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a7e764fbd4b7eca84f80e36e900bca7d3">RemoveFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a65a8142f4727b52425e593eb2727d9f4">PLAYER_FLAGS</a>, <a class="code" href="../../d1/d39/_player_8h.html#a486dd000e9a9532459d9dd9010570621a8972cf61a8fe94379d50f9b737894863">PLAYER_FLAGS_GHOST</a>);</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;        target-&gt;<a class="code" href="../../db/df7/class_world_object.html#add2aa23e80725c3efde05b8c25cfd62e">m_serverSideVisibility</a>.<a class="code" href="../../d0/dbe/class_flagged_values_array32.html#ad0d385589befe52103f077723fa2463c">SetValue</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a0105c40ec0c20daef3cbd8dfc5f473fda5b9831b2635d5fb4ec0596ec40a6487b">SERVERSIDE_VISIBILITY_GHOST</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#ab45f8901baa25b1e80ee28da43b17269a26388c39650c9232d9cc7b9bc88268f1">GHOST_VISIBILITY_ALIVE</a>);</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;        target-&gt;<a class="code" href="../../db/df7/class_world_object.html#ac34d2a601caf37ebe5764c4cd7191023">m_serverSideVisibilityDetect</a>.<a class="code" href="../../d0/dbe/class_flagged_values_array32.html#ad0d385589befe52103f077723fa2463c">SetValue</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a0105c40ec0c20daef3cbd8dfc5f473fda5b9831b2635d5fb4ec0596ec40a6487b">SERVERSIDE_VISIBILITY_GHOST</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#ab45f8901baa25b1e80ee28da43b17269a26388c39650c9232d9cc7b9bc88268f1">GHOST_VISIBILITY_ALIVE</a>);</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;    }</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;}</div>
<div class="ttc" id="a_player_8h_html_a486dd000e9a9532459d9dd9010570621a8972cf61a8fe94379d50f9b737894863"><div class="ttname"><a href="../../d1/d39/_player_8h.html#a486dd000e9a9532459d9dd9010570621a8972cf61a8fe94379d50f9b737894863">PLAYER_FLAGS_GHOST</a></div><div class="ttdeci">@ PLAYER_FLAGS_GHOST</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l00461">Player.h:461</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a0105c40ec0c20daef3cbd8dfc5f473fda5b9831b2635d5fb4ec0596ec40a6487b"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a0105c40ec0c20daef3cbd8dfc5f473fda5b9831b2635d5fb4ec0596ec40a6487b">SERVERSIDE_VISIBILITY_GHOST</a></div><div class="ttdeci">@ SERVERSIDE_VISIBILITY_GHOST</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01246">SharedDefines.h:1246</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_ab45f8901baa25b1e80ee28da43b17269a26388c39650c9232d9cc7b9bc88268f1"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#ab45f8901baa25b1e80ee28da43b17269a26388c39650c9232d9cc7b9bc88268f1">GHOST_VISIBILITY_ALIVE</a></div><div class="ttdeci">@ GHOST_VISIBILITY_ALIVE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01253">SharedDefines.h:1253</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_ab45f8901baa25b1e80ee28da43b17269ab1259865309e9253030249f694c8cb1c"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#ab45f8901baa25b1e80ee28da43b17269ab1259865309e9253030249f694c8cb1c">GHOST_VISIBILITY_GHOST</a></div><div class="ttdeci">@ GHOST_VISIBILITY_GHOST</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01255">SharedDefines.h:1254</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a7b48a8e2e90779303af620c79bf8bfec"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a7b48a8e2e90779303af620c79bf8bfec">SPELL_AURA_GHOST</a></div><div class="ttdeci">@ SPELL_AURA_GHOST</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00158">SpellAuraDefines.h:158</a></div></div>
<div class="ttc" id="aclass_flagged_values_array32_html_ad0d385589befe52103f077723fa2463c"><div class="ttname"><a href="../../d0/dbe/class_flagged_values_array32.html#ad0d385589befe52103f077723fa2463c">FlaggedValuesArray32::SetValue</a></div><div class="ttdeci">void SetValue(FLAG_TYPE flag, T_VALUES value)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d30/_object_8h_source.html#l00636">Object.h:636</a></div></div>
<div class="ttc" id="aclass_world_object_html_ac34d2a601caf37ebe5764c4cd7191023"><div class="ttname"><a href="../../db/df7/class_world_object.html#ac34d2a601caf37ebe5764c4cd7191023">WorldObject::m_serverSideVisibilityDetect</a></div><div class="ttdeci">FlaggedValuesArray32&lt; int32, uint32, ServerSideVisibilityType, TOTAL_SERVERSIDE_VISIBILITY_TYPES &gt; m_serverSideVisibilityDetect</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d30/_object_8h_source.html#l00793">Object.h:793</a></div></div>
<div class="ttc" id="aclass_world_object_html_add2aa23e80725c3efde05b8c25cfd62e"><div class="ttname"><a href="../../db/df7/class_world_object.html#add2aa23e80725c3efde05b8c25cfd62e">WorldObject::m_serverSideVisibility</a></div><div class="ttdeci">FlaggedValuesArray32&lt; int32, uint32, ServerSideVisibilityType, TOTAL_SERVERSIDE_VISIBILITY_TYPES &gt; m_serverSideVisibility</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d30/_object_8h_source.html#l00792">Object.h:792</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01253">GHOST_VISIBILITY_ALIVE</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01254">GHOST_VISIBILITY_GHOST</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05194">Unit::HasAuraType()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00792">WorldObject::m_serverSideVisibility</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00793">WorldObject::m_serverSideVisibilityDetect</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00178">PLAYER_FLAGS</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l00461">PLAYER_FLAGS_GHOST</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00851">Object::RemoveFlag()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01246">SERVERSIDE_VISIBILITY_GHOST</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00836">Object::SetFlag()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00636">FlaggedValuesArray32&lt; T_VALUES, T_FLAGS, FLAG_TYPE, ARRAY_SIZE &gt;::SetValue()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00158">SPELL_AURA_GHOST</a>, and <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>.</p>

</div>
</div>
<a id="ae7c56dc7da49ce169af1d32d111b2a57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7c56dc7da49ce169af1d32d111b2a57">&#9670;&nbsp;</a></span>HandleAuraHover()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraHover </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets movementflags</p>

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02922">2922</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;{</div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160; </div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160; </div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d53/class_player.html">Player</a>* targetPlayer = target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>())</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;    {</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;        <a class="code" href="../../d0/d7d/_script_mgr_8h.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a>-&gt;AnticheatSetUnderACKmount(targetPlayer);</div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;    }</div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160; </div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;    {</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;        <span class="comment">// do not remove unit flag if there are more than this auraEffect of that kind on unit on unit</span></div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>()))</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;    }</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160; </div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a7fc1ddf0d8145327468076d48d0a882d">SetHover</a>(<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);    </div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;}</div>
<div class="ttc" id="aclass_unit_html_a7fc1ddf0d8145327468076d48d0a882d"><div class="ttname"><a href="../../da/db7/class_unit.html#a7fc1ddf0d8145327468076d48d0a882d">Unit::SetHover</a></div><div class="ttdeci">virtual bool SetHover(bool enable, bool packetOnly=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l19773">Unit.cpp:19773</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00446">GetAuraType()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05194">Unit::HasAuraType()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l19773">Unit::SetHover()</a>, <a class="el" href="../../d0/d7d/_script_mgr_8h_source.html#l02048">sScriptMgr</a>, and <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>.</p>

</div>
</div>
<a id="a58e57c5d8044c555227fffca09a1c1c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58e57c5d8044c555227fffca09a1c1c5">&#9670;&nbsp;</a></span>HandleAuraIncreaseBaseHealthPercent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraIncreaseBaseHealthPercent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04367">4367</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;{</div>
<div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160; </div>
<div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160; </div>
<div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdea45d2a58d49ab909fd6a6e78467f7ca0d">UNIT_MOD_HEALTH</a>, <a class="code" href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeabb35437d15ab9bfc3b7dbf7bac7c0dee">BASE_PCT</a>, <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;}</div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a></div><div class="ttdeci">@ AURA_EFFECT_HANDLE_STAT</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">SpellAuraDefines.h:46</a></div></div>
<div class="ttc" id="a_unit_8h_html_a4c5336cd4be5f0162bd4874b0a1e5bdea45d2a58d49ab909fd6a6e78467f7ca0d"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdea45d2a58d49ab909fd6a6e78467f7ca0d">UNIT_MOD_HEALTH</a></div><div class="ttdeci">@ UNIT_MOD_HEALTH</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00426">Unit.h:426</a></div></div>
<div class="ttc" id="a_unit_8h_html_aa21edecdaa2e077b2b87bbe5f2b2e7eeabb35437d15ab9bfc3b7dbf7bac7c0dee"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeabb35437d15ab9bfc3b7dbf7bac7c0dee">BASE_PCT</a></div><div class="ttdeci">@ BASE_PCT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00372">Unit.h:372</a></div></div>
<div class="ttc" id="aclass_unit_html_a814f9f4408cbea1438a89d09e980c5fc"><div class="ttname"><a href="../../da/db7/class_unit.html#a814f9f4408cbea1438a89d09e980c5fc">Unit::HandleStatModifier</a></div><div class="ttdeci">bool HandleStatModifier(UnitMods unitMod, UnitModifierType modifierType, float amount, bool apply)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l14345">Unit.cpp:14345</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00372">BASE_PCT</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l14345">Unit::HandleStatModifier()</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00426">UNIT_MOD_HEALTH</a>.</p>

</div>
</div>
<a id="af91c6e2c16b5038cadfed381022dad10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af91c6e2c16b5038cadfed381022dad10">&#9670;&nbsp;</a></span>HandleAuraLinked()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraLinked </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05599">5599</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05600"></a><span class="lineno"> 5600</span>&#160;{</div>
<div class="line"><a name="l05601"></a><span class="lineno"> 5601</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l05602"></a><span class="lineno"> 5602</span>&#160; </div>
<div class="line"><a name="l05603"></a><span class="lineno"> 5603</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> triggeredSpellId = <a class="code" href="../../d3/d75/_spell_mgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellIdForDifficulty(<a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code" href="../../da/df1/class_aura_effect.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>].TriggerSpell, target);</div>
<div class="line"><a name="l05604"></a><span class="lineno"> 5604</span>&#160;    <a class="code" href="../../d4/d7d/class_spell_info.html">SpellInfo</a> <span class="keyword">const</span>* triggeredSpellInfo = <a class="code" href="../../d3/d75/_spell_mgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellInfo(triggeredSpellId);</div>
<div class="line"><a name="l05605"></a><span class="lineno"> 5605</span>&#160;    <span class="keywordflow">if</span> (!triggeredSpellInfo)</div>
<div class="line"><a name="l05606"></a><span class="lineno"> 5606</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05607"></a><span class="lineno"> 5607</span>&#160; </div>
<div class="line"><a name="l05608"></a><span class="lineno"> 5608</span>&#160;    <span class="keywordflow">if</span> (mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>)</div>
<div class="line"><a name="l05609"></a><span class="lineno"> 5609</span>&#160;    {</div>
<div class="line"><a name="l05610"></a><span class="lineno"> 5610</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l05611"></a><span class="lineno"> 5611</span>&#160;        {</div>
<div class="line"><a name="l05612"></a><span class="lineno"> 5612</span>&#160;            <a class="code" href="../../da/db7/class_unit.html">Unit</a>* caster = triggeredSpellInfo-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a4c7c234798883a938f264f5ef9825e0a">NeedsToBeTriggeredByCaster</a>(<a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>, <a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()) ? <a class="code" href="../../da/df1/class_aura_effect.html#a29cf330277aeb89d17d18f6e112f035b">GetCaster</a>() : target;</div>
<div class="line"><a name="l05613"></a><span class="lineno"> 5613</span>&#160; </div>
<div class="line"><a name="l05614"></a><span class="lineno"> 5614</span>&#160;            <span class="keywordflow">if</span> (!caster)</div>
<div class="line"><a name="l05615"></a><span class="lineno"> 5615</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05616"></a><span class="lineno"> 5616</span>&#160;            <span class="comment">// If amount avalible cast with basepoints (Crypt Fever for example)</span></div>
<div class="line"><a name="l05617"></a><span class="lineno"> 5617</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>())</div>
<div class="line"><a name="l05618"></a><span class="lineno"> 5618</span>&#160;                caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(target, triggeredSpellId, &amp;<a class="code" href="../../da/df1/class_aura_effect.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l05619"></a><span class="lineno"> 5619</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l05620"></a><span class="lineno"> 5620</span>&#160;                caster-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, triggeredSpellId, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l05621"></a><span class="lineno"> 5621</span>&#160;        }</div>
<div class="line"><a name="l05622"></a><span class="lineno"> 5622</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l05623"></a><span class="lineno"> 5623</span>&#160;        {</div>
<div class="line"><a name="l05624"></a><span class="lineno"> 5624</span>&#160;            <a class="code" href="../../d8/d03/class_object_guid.html">ObjectGuid</a> casterGUID = triggeredSpellInfo-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a4c7c234798883a938f264f5ef9825e0a">NeedsToBeTriggeredByCaster</a>(<a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>, <a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()) ? <a class="code" href="../../da/df1/class_aura_effect.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>() : target-&gt;GetGUID();</div>
<div class="line"><a name="l05625"></a><span class="lineno"> 5625</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1be09c524dfdd2c3538f2ae977c58399">RemoveAura</a>(triggeredSpellId, casterGUID, 0, aurApp-&gt;GetRemoveMode());</div>
<div class="line"><a name="l05626"></a><span class="lineno"> 5626</span>&#160;        }</div>
<div class="line"><a name="l05627"></a><span class="lineno"> 5627</span>&#160;    }</div>
<div class="line"><a name="l05628"></a><span class="lineno"> 5628</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9aed024920a7d989c9b024d1c7b00f0b">AURA_EFFECT_HANDLE_REAPPLY</a> &amp;&amp; <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l05629"></a><span class="lineno"> 5629</span>&#160;    {</div>
<div class="line"><a name="l05630"></a><span class="lineno"> 5630</span>&#160;        <a class="code" href="../../d8/d03/class_object_guid.html">ObjectGuid</a> casterGUID = triggeredSpellInfo-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a4c7c234798883a938f264f5ef9825e0a">NeedsToBeTriggeredByCaster</a>(<a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>, <a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()) ? <a class="code" href="../../da/df1/class_aura_effect.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>() : target-&gt;GetGUID();</div>
<div class="line"><a name="l05631"></a><span class="lineno"> 5631</span>&#160;        <span class="comment">// change the stack amount to be equal to stack amount of our aura</span></div>
<div class="line"><a name="l05632"></a><span class="lineno"> 5632</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d2/dde/class_aura.html">Aura</a>* triggeredAura = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a135e4d345c338da83450a60528f71222">GetAura</a>(triggeredSpellId, casterGUID))</div>
<div class="line"><a name="l05633"></a><span class="lineno"> 5633</span>&#160;            triggeredAura-&gt;ModStackAmount(<a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;GetStackAmount() - triggeredAura-&gt;<a class="code" href="../../d2/dde/class_aura.html#aae0b7e0da61a681e67a19b6d23c2cee6">GetStackAmount</a>());</div>
<div class="line"><a name="l05634"></a><span class="lineno"> 5634</span>&#160;    }</div>
<div class="line"><a name="l05635"></a><span class="lineno"> 5635</span>&#160;}</div>
<div class="ttc" id="aclass_spell_info_html_a4c7c234798883a938f264f5ef9825e0a"><div class="ttname"><a href="../../d4/d7d/class_spell_info.html#a4c7c234798883a938f264f5ef9825e0a">SpellInfo::NeedsToBeTriggeredByCaster</a></div><div class="ttdeci">bool NeedsToBeTriggeredByCaster(SpellInfo const *triggeringSpell, uint8 effIndex=MAX_SPELL_EFFECTS) const</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7f/_spell_info_8cpp_source.html#l01021">SpellInfo.cpp:1021</a></div></div>
<div class="ttc" id="aclass_unit_html_a1be09c524dfdd2c3538f2ae977c58399"><div class="ttname"><a href="../../da/db7/class_unit.html#a1be09c524dfdd2c3538f2ae977c58399">Unit::RemoveAura</a></div><div class="ttdeci">void RemoveAura(AuraApplicationMap::iterator &amp;i, AuraRemoveMode mode=AURA_REMOVE_BY_DEFAULT)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l04293">Unit.cpp:4293</a></div></div>
<div class="ttc" id="aclass_unit_html_a51ec81e114bf82a2485ba9f66200afd2"><div class="ttname"><a href="../../da/db7/class_unit.html#a51ec81e114bf82a2485ba9f66200afd2">Unit::CastCustomSpell</a></div><div class="ttdeci">SpellCastResult CastCustomSpell(Unit *victim, uint32 spellId, int32 const *bp0, int32 const *bp1, int32 const *bp2, bool triggered, Item *castItem=nullptr, AuraEffect const *triggeredByAura=nullptr, ObjectGuid originalCaster=ObjectGuid::Empty)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l01144">Unit.cpp:1144</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00045">AURA_EFFECT_HANDLE_REAPPLY</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01144">Unit::CastCustomSpell()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01087">Unit::CastSpell()</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00387">SpellInfo::Effects</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05076">Unit::GetAura()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">GetBase()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00040">GetCaster()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00041">GetCasterGUID()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00049">GetEffIndex()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00098">Object::GetGUID()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00073">AuraApplication::GetRemoveMode()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00147">Aura::GetStackAmount()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00120">m_amount</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00137">m_effIndex</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00115">m_spellInfo</a>, <a class="el" href="../../da/d7f/_spell_info_8cpp_source.html#l01021">SpellInfo::NeedsToBeTriggeredByCaster()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04293">Unit::RemoveAura()</a>, and <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00794">sSpellMgr</a>.</p>

</div>
</div>
<a id="ac585c3cd6f893f888463d8de7fbc4b2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac585c3cd6f893f888463d8de7fbc4b2f">&#9670;&nbsp;</a></span>HandleAuraModAttackPower()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModAttackPower </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04669">4669</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04670"></a><span class="lineno"> 4670</span>&#160;{</div>
<div class="line"><a name="l04671"></a><span class="lineno"> 4671</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04672"></a><span class="lineno"> 4672</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160; </div>
<div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04675"></a><span class="lineno"> 4675</span>&#160; </div>
<div class="line"><a name="l04676"></a><span class="lineno"> 4676</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdea2520001e4fe2a621d4b6b232413b5a73">UNIT_MOD_ATTACK_POWER</a>, <a class="code" href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eea85637bc3b7127fbfc1d35d5e3ca4a95c">TOTAL_VALUE</a>, <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04677"></a><span class="lineno"> 4677</span>&#160;}</div>
<div class="ttc" id="a_unit_8h_html_a4c5336cd4be5f0162bd4874b0a1e5bdea2520001e4fe2a621d4b6b232413b5a73"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdea2520001e4fe2a621d4b6b232413b5a73">UNIT_MOD_ATTACK_POWER</a></div><div class="ttdeci">@ UNIT_MOD_ATTACK_POWER</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00441">Unit.h:441</a></div></div>
<div class="ttc" id="a_unit_8h_html_aa21edecdaa2e077b2b87bbe5f2b2e7eea85637bc3b7127fbfc1d35d5e3ca4a95c"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eea85637bc3b7127fbfc1d35d5e3ca4a95c">TOTAL_VALUE</a></div><div class="ttdeci">@ TOTAL_VALUE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00373">Unit.h:373</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l14345">Unit::HandleStatModifier()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00373">TOTAL_VALUE</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00441">UNIT_MOD_ATTACK_POWER</a>.</p>

</div>
</div>
<a id="aab17b1ef9a6932ad13b43b0ed377e044"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab17b1ef9a6932ad13b43b0ed377e044">&#9670;&nbsp;</a></span>HandleAuraModAttackPowerOfArmor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModAttackPowerOfArmor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04734">4734</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04735"></a><span class="lineno"> 4735</span>&#160;{</div>
<div class="line"><a name="l04736"></a><span class="lineno"> 4736</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04737"></a><span class="lineno"> 4737</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04738"></a><span class="lineno"> 4738</span>&#160; </div>
<div class="line"><a name="l04739"></a><span class="lineno"> 4739</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04740"></a><span class="lineno"> 4740</span>&#160; </div>
<div class="line"><a name="l04741"></a><span class="lineno"> 4741</span>&#160;    <span class="comment">// Recalculate bonus</span></div>
<div class="line"><a name="l04742"></a><span class="lineno"> 4742</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l04743"></a><span class="lineno"> 4743</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#af38c592a982085b6385131f9c691eca7">UpdateAttackPowerAndDamage</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l04744"></a><span class="lineno"> 4744</span>&#160;}</div>
<div class="ttc" id="aclass_player_html_af38c592a982085b6385131f9c691eca7"><div class="ttname"><a href="../../d8/d53/class_player.html#af38c592a982085b6385131f9c691eca7">Player::UpdateAttackPowerAndDamage</a></div><div class="ttdeci">void UpdateAttackPowerAndDamage(bool ranged=false) override</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d07/_stat_system_8cpp_source.html#l00323">StatSystem.cpp:323</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../df/d07/_stat_system_8cpp_source.html#l00323">Player::UpdateAttackPowerAndDamage()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04729">HandleAuraModAttackPowerOfStatPercent()</a>.</p>

</div>
</div>
<a id="ad2a3d61e37b7ed3cee1fd37d41d6ba59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2a3d61e37b7ed3cee1fd37d41d6ba59">&#9670;&nbsp;</a></span>HandleAuraModAttackPowerOfStatPercent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModAttackPowerOfStatPercent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04729">4729</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04730"></a><span class="lineno"> 4730</span>&#160;{</div>
<div class="line"><a name="l04731"></a><span class="lineno"> 4731</span>&#160;    <a class="code" href="../../da/df1/class_aura_effect.html#aab17b1ef9a6932ad13b43b0ed377e044">HandleAuraModAttackPowerOfArmor</a>(aurApp, mode, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04732"></a><span class="lineno"> 4732</span>&#160;}</div>
<div class="ttc" id="aclass_aura_effect_html_aab17b1ef9a6932ad13b43b0ed377e044"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#aab17b1ef9a6932ad13b43b0ed377e044">AuraEffect::HandleAuraModAttackPowerOfArmor</a></div><div class="ttdeci">void HandleAuraModAttackPowerOfArmor(AuraApplication const *aurApp, uint8 mode, bool apply) const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04734">SpellAuraEffects.cpp:4734</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, and <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04734">HandleAuraModAttackPowerOfArmor()</a>.</p>

</div>
</div>
<a id="a40615fe10569d7caed175b71339ae1cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40615fe10569d7caed175b71339ae1cf">&#9670;&nbsp;</a></span>HandleAuraModAttackPowerPercent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModAttackPowerPercent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04692">4692</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04693"></a><span class="lineno"> 4693</span>&#160;{</div>
<div class="line"><a name="l04694"></a><span class="lineno"> 4694</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04695"></a><span class="lineno"> 4695</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04696"></a><span class="lineno"> 4696</span>&#160; </div>
<div class="line"><a name="l04697"></a><span class="lineno"> 4697</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04698"></a><span class="lineno"> 4698</span>&#160; </div>
<div class="line"><a name="l04699"></a><span class="lineno"> 4699</span>&#160;    <span class="comment">//UNIT_FIELD_ATTACK_POWER_MULTIPLIER = multiplier - 1</span></div>
<div class="line"><a name="l04700"></a><span class="lineno"> 4700</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdea2520001e4fe2a621d4b6b232413b5a73">UNIT_MOD_ATTACK_POWER</a>, <a class="code" href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeab3ddc12b0760eec54f45b90b8671af4d">TOTAL_PCT</a>, <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04701"></a><span class="lineno"> 4701</span>&#160;}</div>
<div class="ttc" id="a_unit_8h_html_aa21edecdaa2e077b2b87bbe5f2b2e7eeab3ddc12b0760eec54f45b90b8671af4d"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeab3ddc12b0760eec54f45b90b8671af4d">TOTAL_PCT</a></div><div class="ttdeci">@ TOTAL_PCT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00374">Unit.h:374</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l14345">Unit::HandleStatModifier()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00374">TOTAL_PCT</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00441">UNIT_MOD_ATTACK_POWER</a>.</p>

</div>
</div>
<a id="acedcf3811fd678ac5192d68fd34aa176"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acedcf3811fd678ac5192d68fd34aa176">&#9670;&nbsp;</a></span>HandleAuraModBaseResistancePCT()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModBaseResistancePCT </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03908">3908</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;{</div>
<div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160; </div>
<div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160; </div>
<div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;    <span class="comment">// only players have base stats</span></div>
<div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;    {</div>
<div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;        <span class="comment">//pets only have base armor</span></div>
<div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a4ad2fdcc45e2c3c85ad59ff49268b58c">IsPet</a>() &amp;&amp; (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; <a class="code" href="../../df/d0b/_shared_defines_8h.html#aff6913cfd69489c107a071be9ec2ec8fa12667dd3f55738c93e1ddb1351779b42">SPELL_SCHOOL_MASK_NORMAL</a>))</div>
<div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdea0d5ec0678c61e8de24b4e3d731bd4716">UNIT_MOD_ARMOR</a>, <a class="code" href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeabb35437d15ab9bfc3b7dbf7bac7c0dee">BASE_PCT</a>, <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;    }</div>
<div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;    {</div>
<div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../d9/df6/my__global_8h.html#a1b956fe1df85f3c132b21edb4e116458">int8</a> <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a> = <a class="code" href="../../df/d0b/_shared_defines_8h.html#a25263e3e283b54e5280d5af1fd16da4ca0599bcfa52d292c58e15ac0f081bb5af">SPELL_SCHOOL_NORMAL</a>; <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a> &lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3d2e33bfddb1e3c28157eb6d136bfd28">MAX_SPELL_SCHOOL</a>; <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>++)</div>
<div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;        {</div>
<div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; <a class="code" href="../../df/de2/namespace_g3_d.html#af80d9dbc6fa48c9ff714c7158adb60ae">int32</a>(1 &lt;&lt; <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>))</div>
<div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bde">UnitMods</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdea2ca084c2061b3ebd16a486bd8e64a0d2">UNIT_MOD_RESISTANCE_START</a> + <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>), <a class="code" href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeabb35437d15ab9bfc3b7dbf7bac7c0dee">BASE_PCT</a>, <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;        }</div>
<div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;    }</div>
<div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_a25263e3e283b54e5280d5af1fd16da4ca0599bcfa52d292c58e15ac0f081bb5af"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a25263e3e283b54e5280d5af1fd16da4ca0599bcfa52d292c58e15ac0f081bb5af">SPELL_SCHOOL_NORMAL</a></div><div class="ttdeci">@ SPELL_SCHOOL_NORMAL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00255">SharedDefines.h:255</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a3d2e33bfddb1e3c28157eb6d136bfd28"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a3d2e33bfddb1e3c28157eb6d136bfd28">MAX_SPELL_SCHOOL</a></div><div class="ttdeci">constexpr auto MAX_SPELL_SCHOOL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00264">SharedDefines.h:264</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_aff6913cfd69489c107a071be9ec2ec8fa12667dd3f55738c93e1ddb1351779b42"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#aff6913cfd69489c107a071be9ec2ec8fa12667dd3f55738c93e1ddb1351779b42">SPELL_SCHOOL_MASK_NORMAL</a></div><div class="ttdeci">@ SPELL_SCHOOL_MASK_NORMAL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00269">SharedDefines.h:269</a></div></div>
<div class="ttc" id="a_unit_8h_html_a4c5336cd4be5f0162bd4874b0a1e5bde"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bde">UnitMods</a></div><div class="ttdeci">UnitMods</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00419">Unit.h:420</a></div></div>
<div class="ttc" id="a_unit_8h_html_a4c5336cd4be5f0162bd4874b0a1e5bdea0d5ec0678c61e8de24b4e3d731bd4716"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdea0d5ec0678c61e8de24b4e3d731bd4716">UNIT_MOD_ARMOR</a></div><div class="ttdeci">@ UNIT_MOD_ARMOR</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00434">Unit.h:434</a></div></div>
<div class="ttc" id="a_unit_8h_html_a4c5336cd4be5f0162bd4874b0a1e5bdea2ca084c2061b3ebd16a486bd8e64a0d2"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdea2ca084c2061b3ebd16a486bd8e64a0d2">UNIT_MOD_RESISTANCE_START</a></div><div class="ttdeci">@ UNIT_MOD_RESISTANCE_START</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00450">Unit.h:450</a></div></div>
<div class="ttc" id="aclass_unit_html_a4ad2fdcc45e2c3c85ad59ff49268b58c"><div class="ttname"><a href="../../da/db7/class_unit.html#a4ad2fdcc45e2c3c85ad59ff49268b58c">Unit::IsPet</a></div><div class="ttdeci">bool IsPet() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01534">Unit.h:1534</a></div></div>
<div class="ttc" id="amy__global_8h_html_a1b956fe1df85f3c132b21edb4e116458"><div class="ttname"><a href="../../d9/df6/my__global_8h.html#a1b956fe1df85f3c132b21edb4e116458">int8</a></div><div class="ttdeci">signed char int8</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df6/my__global_8h_source.html#l00878">my_global.h:878</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_a55ae91213b07da3a9e14fcd5068d497f"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">G3D::x</a></div><div class="ttdeci">G3D::int16 x</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d14/_vector2int16_8h_source.html#l00037">Vector2int16.h:37</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00372">BASE_PCT</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l14345">Unit::HandleStatModifier()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01534">Unit::IsPet()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00264">MAX_SPELL_SCHOOL</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00269">SPELL_SCHOOL_MASK_NORMAL</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00255">SPELL_SCHOOL_NORMAL</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00434">UNIT_MOD_ARMOR</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00450">UNIT_MOD_RESISTANCE_START</a>, and <a class="el" href="../../d8/d14/_vector2int16_8h_source.html#l00037">G3D::x</a>.</p>

</div>
</div>
<a id="a037803186b7a5a458d1b7d451fc57d2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a037803186b7a5a458d1b7d451fc57d2b">&#9670;&nbsp;</a></span>HandleAuraModBlockPercent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModBlockPercent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04410">4410</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;{</div>
<div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160; </div>
<div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160; </div>
<div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160; </div>
<div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;    target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a4020949ee431d0e1c3674a320412bc00">UpdateBlockPercentage</a>();</div>
<div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;}</div>
<div class="ttc" id="aclass_player_html_a4020949ee431d0e1c3674a320412bc00"><div class="ttname"><a href="../../d8/d53/class_player.html#a4020949ee431d0e1c3674a320412bc00">Player::UpdateBlockPercentage</a></div><div class="ttdeci">void UpdateBlockPercentage()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d07/_stat_system_8cpp_source.html#l00601">StatSystem.cpp:601</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../df/d07/_stat_system_8cpp_source.html#l00601">Player::UpdateBlockPercentage()</a>.</p>

</div>
</div>
<a id="af7d61f76c6791e1a34f20b87efb425bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7d61f76c6791e1a34f20b87efb425bc">&#9670;&nbsp;</a></span>HandleAuraModCritPct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModCritPct </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04518">4518</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160;{</div>
<div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160; </div>
<div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160; </div>
<div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;    {</div>
<div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a92418193751a8dc7679b00f1d9d07d35">m_baseSpellCritChance</a> += (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>) ? <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() : -<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>();</div>
<div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160;    }</div>
<div class="line"><a name="l04530"></a><span class="lineno"> 4530</span>&#160; </div>
<div class="line"><a name="l04531"></a><span class="lineno"> 4531</span>&#160;    target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#af85e4f061186ef03c3561aaf1a99a72d">HandleBaseModValue</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a938646605f1e70b8f1613bf9bdb78b4fa75a0f4d4487127ec7c34e7f0f547efb4">CRIT_PERCENTAGE</a>,         <a class="code" href="../../d5/d32/_unit_8h.html#a114d5261840f2cea1ebee7abcad43e10a13f6d70c134b3744ab0581ab8df32177">FLAT_MOD</a>, <span class="keywordtype">float</span> (<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;    target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#af85e4f061186ef03c3561aaf1a99a72d">HandleBaseModValue</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a938646605f1e70b8f1613bf9bdb78b4fa379fa05fe54b3ef17e6e9e2f159b9a8f">OFFHAND_CRIT_PERCENTAGE</a>, <a class="code" href="../../d5/d32/_unit_8h.html#a114d5261840f2cea1ebee7abcad43e10a13f6d70c134b3744ab0581ab8df32177">FLAT_MOD</a>, <span class="keywordtype">float</span> (<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160;    target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#af85e4f061186ef03c3561aaf1a99a72d">HandleBaseModValue</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a938646605f1e70b8f1613bf9bdb78b4faa6c2bba993427bbcd1ee001e9730c59d">RANGED_CRIT_PERCENTAGE</a>,  <a class="code" href="../../d5/d32/_unit_8h.html#a114d5261840f2cea1ebee7abcad43e10a13f6d70c134b3744ab0581ab8df32177">FLAT_MOD</a>, <span class="keywordtype">float</span> (<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160; </div>
<div class="line"><a name="l04535"></a><span class="lineno"> 4535</span>&#160;    <span class="comment">// included in Player::UpdateSpellCritChance calculation</span></div>
<div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160;    target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a06380d627aa5fee572465587fbdd53e4">UpdateAllSpellCritChances</a>();</div>
<div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;}</div>
<div class="ttc" id="a_unit_8h_html_a114d5261840f2cea1ebee7abcad43e10a13f6d70c134b3744ab0581ab8df32177"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a114d5261840f2cea1ebee7abcad43e10a13f6d70c134b3744ab0581ab8df32177">FLAT_MOD</a></div><div class="ttdeci">@ FLAT_MOD</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00467">Unit.h:467</a></div></div>
<div class="ttc" id="a_unit_8h_html_a938646605f1e70b8f1613bf9bdb78b4fa379fa05fe54b3ef17e6e9e2f159b9a8f"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a938646605f1e70b8f1613bf9bdb78b4fa379fa05fe54b3ef17e6e9e2f159b9a8f">OFFHAND_CRIT_PERCENTAGE</a></div><div class="ttdeci">@ OFFHAND_CRIT_PERCENTAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00460">Unit.h:460</a></div></div>
<div class="ttc" id="a_unit_8h_html_a938646605f1e70b8f1613bf9bdb78b4fa75a0f4d4487127ec7c34e7f0f547efb4"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a938646605f1e70b8f1613bf9bdb78b4fa75a0f4d4487127ec7c34e7f0f547efb4">CRIT_PERCENTAGE</a></div><div class="ttdeci">@ CRIT_PERCENTAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00458">Unit.h:458</a></div></div>
<div class="ttc" id="a_unit_8h_html_a938646605f1e70b8f1613bf9bdb78b4faa6c2bba993427bbcd1ee001e9730c59d"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a938646605f1e70b8f1613bf9bdb78b4faa6c2bba993427bbcd1ee001e9730c59d">RANGED_CRIT_PERCENTAGE</a></div><div class="ttdeci">@ RANGED_CRIT_PERCENTAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00459">Unit.h:459</a></div></div>
<div class="ttc" id="aclass_player_html_a06380d627aa5fee572465587fbdd53e4"><div class="ttname"><a href="../../d8/d53/class_player.html#a06380d627aa5fee572465587fbdd53e4">Player::UpdateAllSpellCritChances</a></div><div class="ttdeci">void UpdateAllSpellCritChances()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d07/_stat_system_8cpp_source.html#l00834">StatSystem.cpp:834</a></div></div>
<div class="ttc" id="aclass_player_html_af85e4f061186ef03c3561aaf1a99a72d"><div class="ttname"><a href="../../d8/d53/class_player.html#af85e4f061186ef03c3561aaf1a99a72d">Player::HandleBaseModValue</a></div><div class="ttdeci">void HandleBaseModValue(BaseModGroup modGroup, BaseModType modType, float amount, bool apply)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/_player_8cpp_source.html#l04853">Player.cpp:4853</a></div></div>
<div class="ttc" id="aclass_unit_html_a92418193751a8dc7679b00f1d9d07d35"><div class="ttname"><a href="../../da/db7/class_unit.html#a92418193751a8dc7679b00f1d9d07d35">Unit::m_baseSpellCritChance</a></div><div class="ttdeci">int32 m_baseSpellCritChance</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l02175">Unit.h:2175</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00458">CRIT_PERCENTAGE</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00467">FLAT_MOD</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l04853">Player::HandleBaseModValue()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02175">Unit::m_baseSpellCritChance</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00460">OFFHAND_CRIT_PERCENTAGE</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00459">RANGED_CRIT_PERCENTAGE</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../df/d07/_stat_system_8cpp_source.html#l00834">Player::UpdateAllSpellCritChances()</a>.</p>

</div>
</div>
<a id="a00cc9725cd708174a15de260fef84bda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00cc9725cd708174a15de260fef84bda">&#9670;&nbsp;</a></span>HandleAuraModDecreaseSpeed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModDecreaseSpeed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03315">3315</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;{</div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>))</div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160; </div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160; </div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#ac85eb152580735addb4e7022ae2b3d4c">UpdateSpeed</a>(<a class="code" href="../../d5/d32/_unit_8h.html#af91f7580a89722b7dc45a018bb46fce4af13a74f1c064b7481beaace4e25531f1">MOVE_WALK</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#ac85eb152580735addb4e7022ae2b3d4c">UpdateSpeed</a>(<a class="code" href="../../d5/d32/_unit_8h.html#af91f7580a89722b7dc45a018bb46fce4ad231571a48b7742c2a432eb7a8a849de">MOVE_RUN</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#ac85eb152580735addb4e7022ae2b3d4c">UpdateSpeed</a>(<a class="code" href="../../d5/d32/_unit_8h.html#af91f7580a89722b7dc45a018bb46fce4a611a24e7db53ef46584dcfb70d8343e5">MOVE_SWIM</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#ac85eb152580735addb4e7022ae2b3d4c">UpdateSpeed</a>(<a class="code" href="../../d5/d32/_unit_8h.html#af91f7580a89722b7dc45a018bb46fce4a2461b4a7be489c54989eff2c87ae1961">MOVE_FLIGHT</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#ac85eb152580735addb4e7022ae2b3d4c">UpdateSpeed</a>(<a class="code" href="../../d5/d32/_unit_8h.html#af91f7580a89722b7dc45a018bb46fce4ae5032445bbfb822102cc813971fbb6e2">MOVE_RUN_BACK</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#ac85eb152580735addb4e7022ae2b3d4c">UpdateSpeed</a>(<a class="code" href="../../d5/d32/_unit_8h.html#af91f7580a89722b7dc45a018bb46fce4ac2a44df3d73187f2e899d731f1e84908">MOVE_SWIM_BACK</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#ac85eb152580735addb4e7022ae2b3d4c">UpdateSpeed</a>(<a class="code" href="../../d5/d32/_unit_8h.html#af91f7580a89722b7dc45a018bb46fce4aace23680916adc6b61fe44054c841e57">MOVE_FLIGHT_BACK</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160; </div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d53/class_player.html">Player</a>* targetPlayer = target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>())</div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;    {</div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;        <a class="code" href="../../d0/d7d/_script_mgr_8h.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a>-&gt;AnticheatSetUnderACKmount(targetPlayer);</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;    }</div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;}</div>
<div class="ttc" id="a_unit_8h_html_af91f7580a89722b7dc45a018bb46fce4a2461b4a7be489c54989eff2c87ae1961"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#af91f7580a89722b7dc45a018bb46fce4a2461b4a7be489c54989eff2c87ae1961">MOVE_FLIGHT</a></div><div class="ttdeci">@ MOVE_FLIGHT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00543">Unit.h:543</a></div></div>
<div class="ttc" id="a_unit_8h_html_af91f7580a89722b7dc45a018bb46fce4a611a24e7db53ef46584dcfb70d8343e5"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#af91f7580a89722b7dc45a018bb46fce4a611a24e7db53ef46584dcfb70d8343e5">MOVE_SWIM</a></div><div class="ttdeci">@ MOVE_SWIM</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00540">Unit.h:540</a></div></div>
<div class="ttc" id="a_unit_8h_html_af91f7580a89722b7dc45a018bb46fce4aace23680916adc6b61fe44054c841e57"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#af91f7580a89722b7dc45a018bb46fce4aace23680916adc6b61fe44054c841e57">MOVE_FLIGHT_BACK</a></div><div class="ttdeci">@ MOVE_FLIGHT_BACK</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00544">Unit.h:544</a></div></div>
<div class="ttc" id="a_unit_8h_html_af91f7580a89722b7dc45a018bb46fce4ac2a44df3d73187f2e899d731f1e84908"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#af91f7580a89722b7dc45a018bb46fce4ac2a44df3d73187f2e899d731f1e84908">MOVE_SWIM_BACK</a></div><div class="ttdeci">@ MOVE_SWIM_BACK</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00541">Unit.h:541</a></div></div>
<div class="ttc" id="a_unit_8h_html_af91f7580a89722b7dc45a018bb46fce4ad231571a48b7742c2a432eb7a8a849de"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#af91f7580a89722b7dc45a018bb46fce4ad231571a48b7742c2a432eb7a8a849de">MOVE_RUN</a></div><div class="ttdeci">@ MOVE_RUN</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00538">Unit.h:538</a></div></div>
<div class="ttc" id="a_unit_8h_html_af91f7580a89722b7dc45a018bb46fce4ae5032445bbfb822102cc813971fbb6e2"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#af91f7580a89722b7dc45a018bb46fce4ae5032445bbfb822102cc813971fbb6e2">MOVE_RUN_BACK</a></div><div class="ttdeci">@ MOVE_RUN_BACK</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00539">Unit.h:539</a></div></div>
<div class="ttc" id="a_unit_8h_html_af91f7580a89722b7dc45a018bb46fce4af13a74f1c064b7481beaace4e25531f1"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#af91f7580a89722b7dc45a018bb46fce4af13a74f1c064b7481beaace4e25531f1">MOVE_WALK</a></div><div class="ttdeci">@ MOVE_WALK</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00537">Unit.h:537</a></div></div>
<div class="ttc" id="aclass_unit_html_ac85eb152580735addb4e7022ae2b3d4c"><div class="ttname"><a href="../../da/db7/class_unit.html#ac85eb152580735addb4e7022ae2b3d4c">Unit::UpdateSpeed</a></div><div class="ttdeci">void UpdateSpeed(UnitMoveType mtype, bool forced)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l13424">Unit.cpp:13424</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00543">MOVE_FLIGHT</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00544">MOVE_FLIGHT_BACK</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00538">MOVE_RUN</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00539">MOVE_RUN_BACK</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00540">MOVE_SWIM</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00541">MOVE_SWIM_BACK</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00537">MOVE_WALK</a>, <a class="el" href="../../d0/d7d/_script_mgr_8h_source.html#l02048">sScriptMgr</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, and <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l13424">Unit::UpdateSpeed()</a>.</p>

</div>
</div>
<a id="a8c25ece7266e707b626dbad6de6be66e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c25ece7266e707b626dbad6de6be66e">&#9670;&nbsp;</a></span>HandleAuraModDisarm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModDisarm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02517">2517</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;{</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160; </div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160; </div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;    <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799">AuraType</a> <a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a> = <a class="code" href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>();</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160; </div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;    <span class="comment">//Prevent handling aura twice</span></div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>) ? target-&gt;<a class="code" href="../../da/db7/class_unit.html#af00ac6c4dc7e639ac646fdafef336e85">GetAuraEffectsByType</a>(<a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>).size() &gt; 1 : target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>))</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160; </div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> field, flag, slot;</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;    <a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876a">WeaponAttackType</a> attType;</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>)</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;    {</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a1e7e5c8d0e92113d05321ff57d81578b">SPELL_AURA_MOD_DISARM</a>:</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;            field = <a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881aab4868b631f1cfaf30faee627f7c9dbf">UNIT_FIELD_FLAGS</a>;</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;            flag = <a class="code" href="../../d5/d32/_unit_8h.html#afaf72688a238d4ba16ba2ae1444cd552a692ab9362c9a13074521ceebca70e94b">UNIT_FLAG_DISARMED</a>;</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;            slot = <a class="code" href="../../d1/d39/_player_8h.html#a93b8041f948d575ef2d23746324a37afa559e9d51b0cff8ac6448c07e005a13bd">EQUIPMENT_SLOT_MAINHAND</a>;</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;            attType = <a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>;</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a6f4650df4228c83bc7c1bdcb059fcf81">SPELL_AURA_MOD_DISARM_OFFHAND</a>:</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;            field = <a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a6b03ad8147a368bbf29c0b92b12b0679">UNIT_FIELD_FLAGS_2</a>;</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;            flag = <a class="code" href="../../d5/d32/_unit_8h.html#afd9f193edd86cc61d3f2413e3a1eaef5ae65e45a8c442707dc45fed1c9f456daa">UNIT_FLAG2_DISARM_OFFHAND</a>;</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;            slot = <a class="code" href="../../d1/d39/_player_8h.html#a93b8041f948d575ef2d23746324a37afab44cb19f2d7a24d14ef74748716cd731">EQUIPMENT_SLOT_OFFHAND</a>;</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;            attType = <a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa052681ec165e5b5e3edcf2089607ae67">OFF_ATTACK</a>;</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a0ead1d21561a1d51aa165ba0fbbf03f0">SPELL_AURA_MOD_DISARM_RANGED</a>:</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;            field = <a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a6b03ad8147a368bbf29c0b92b12b0679">UNIT_FIELD_FLAGS_2</a>;</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;            flag = <a class="code" href="../../d5/d32/_unit_8h.html#afd9f193edd86cc61d3f2413e3a1eaef5af67a9a68cd8ef74a5993e9a64fcd07cd">UNIT_FLAG2_DISARM_RANGED</a>;</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;            slot = <a class="code" href="../../d1/d39/_player_8h.html#a93b8041f948d575ef2d23746324a37afafc73f33a54a6e48f474648a2ad5bd72a">EQUIPMENT_SLOT_RANGED</a>;</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;            attType = <a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aaa2557af152c5f2b27bbf59915cbd1670">RANGED_ATTACK</a>;</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;    }</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160; </div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;    <span class="comment">// if disarm aura is to be removed, remove the flag first to reapply damage/aura mods</span></div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a7e764fbd4b7eca84f80e36e900bca7d3">RemoveFlag</a>(field, flag);</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160; </div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;    <span class="comment">// Handle damage modification, shapeshifted druids are not affected</span></div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a> &amp;&amp; (!target-&gt;<a class="code" href="../../da/db7/class_unit.html#abbc1994b31e8c2706a99c0d35269b89c">IsInFeralForm</a>() || target-&gt;<a class="code" href="../../da/db7/class_unit.html#a373a25c8d6ff3ca2f5653267c1269ad4">GetShapeshiftForm</a>() == <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cab77bbfbe52ce8a4876d6c762735cfbc9">FORM_GHOSTWOLF</a>))</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;    {</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dc/d32/class_item.html">Item</a>* pItem = target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a6e31042962f16c90a443ff772363d22f">GetItemByPos</a>(<a class="code" href="../../d1/d39/_player_8h.html#ad3dd8ed856e16139eaa67147d40cf24e">INVENTORY_SLOT_BAG_0</a>, slot))</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;        {</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;            <a class="code" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> attacktype = <a class="code" href="../../d8/d53/class_player.html#aa8ac03d330ab1472d35f520e60454022">Player::GetAttackBySlot</a>(slot);</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160; </div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;            <span class="keywordflow">if</span> (attacktype &lt; <a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa0f966a2f1219b75a945c686c3cad21e4">MAX_ATTACK</a>)</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;            {</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;                target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a6d26b6e2d8c1f5d9532a739010594c68">_ApplyWeaponDamage</a>(slot, pItem-&gt;GetTemplate(), <span class="keyword">nullptr</span>, !<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;                target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#aa5330c83cf8abe59375e5aeac758362f">_ApplyWeaponDependentAuraMods</a>(pItem, <a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876a">WeaponAttackType</a>(attacktype), !<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;            }</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;        }</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;    }</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160; </div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;    <span class="comment">// if disarm effects should be applied, wait to set flag until damage mods are unapplied</span></div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a79a7a80acdec46961b4d8aaead4ae631">SetFlag</a>(field, flag);</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160; </div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2a93dfa528ffc48db4993fb7ac62696db9">TYPEID_UNIT</a> &amp;&amp; target-&gt;<a class="code" href="../../d8/d83/class_object.html#a4a4bdac0d151f9193aa3581bda31193c">ToCreature</a>()-&gt;<a class="code" href="../../d1/dac/class_creature.html#a1e4f1ed588789ac22b0833dceb1be880">GetCurrentEquipmentId</a>())</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a7df3efe1a18d2562a04ca1f91d03532e">UpdateDamagePhysical</a>(attType);</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;}</div>
<div class="ttc" id="a_player_8h_html_a93b8041f948d575ef2d23746324a37afa559e9d51b0cff8ac6448c07e005a13bd"><div class="ttname"><a href="../../d1/d39/_player_8h.html#a93b8041f948d575ef2d23746324a37afa559e9d51b0cff8ac6448c07e005a13bd">EQUIPMENT_SLOT_MAINHAND</a></div><div class="ttdeci">@ EQUIPMENT_SLOT_MAINHAND</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l00671">Player.h:671</a></div></div>
<div class="ttc" id="a_player_8h_html_a93b8041f948d575ef2d23746324a37afab44cb19f2d7a24d14ef74748716cd731"><div class="ttname"><a href="../../d1/d39/_player_8h.html#a93b8041f948d575ef2d23746324a37afab44cb19f2d7a24d14ef74748716cd731">EQUIPMENT_SLOT_OFFHAND</a></div><div class="ttdeci">@ EQUIPMENT_SLOT_OFFHAND</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l00672">Player.h:672</a></div></div>
<div class="ttc" id="a_player_8h_html_a93b8041f948d575ef2d23746324a37afafc73f33a54a6e48f474648a2ad5bd72a"><div class="ttname"><a href="../../d1/d39/_player_8h.html#a93b8041f948d575ef2d23746324a37afafc73f33a54a6e48f474648a2ad5bd72a">EQUIPMENT_SLOT_RANGED</a></div><div class="ttdeci">@ EQUIPMENT_SLOT_RANGED</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l00673">Player.h:673</a></div></div>
<div class="ttc" id="a_player_8h_html_ad3dd8ed856e16139eaa67147d40cf24e"><div class="ttname"><a href="../../d1/d39/_player_8h.html#ad3dd8ed856e16139eaa67147d40cf24e">INVENTORY_SLOT_BAG_0</a></div><div class="ttdeci">#define INVENTORY_SLOT_BAG_0</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l00651">Player.h:651</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a0ead1d21561a1d51aa165ba0fbbf03f0"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a0ead1d21561a1d51aa165ba0fbbf03f0">SPELL_AURA_MOD_DISARM_RANGED</a></div><div class="ttdeci">@ SPELL_AURA_MOD_DISARM_RANGED</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00341">SpellAuraDefines.h:341</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a1e7e5c8d0e92113d05321ff57d81578b"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a1e7e5c8d0e92113d05321ff57d81578b">SPELL_AURA_MOD_DISARM</a></div><div class="ttdeci">@ SPELL_AURA_MOD_DISARM</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00130">SpellAuraDefines.h:130</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a6f4650df4228c83bc7c1bdcb059fcf81"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a6f4650df4228c83bc7c1bdcb059fcf81">SPELL_AURA_MOD_DISARM_OFFHAND</a></div><div class="ttdeci">@ SPELL_AURA_MOD_DISARM_OFFHAND</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00317">SpellAuraDefines.h:317</a></div></div>
<div class="ttc" id="a_unit_8h_html_a2a35652af7129b6f139b0f7a2af1876a"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876a">WeaponAttackType</a></div><div class="ttdeci">WeaponAttackType</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00553">Unit.h:554</a></div></div>
<div class="ttc" id="a_unit_8h_html_a2a35652af7129b6f139b0f7a2af1876aa0f966a2f1219b75a945c686c3cad21e4"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa0f966a2f1219b75a945c686c3cad21e4">MAX_ATTACK</a></div><div class="ttdeci">@ MAX_ATTACK</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00559">Unit.h:558</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab1b67dd15f243c850f589f66747e547cab77bbfbe52ce8a4876d6c762735cfbc9"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cab77bbfbe52ce8a4876d6c762735cfbc9">FORM_GHOSTWOLF</a></div><div class="ttdeci">@ FORM_GHOSTWOLF</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00215">Unit.h:215</a></div></div>
<div class="ttc" id="a_unit_8h_html_afaf72688a238d4ba16ba2ae1444cd552a692ab9362c9a13074521ceebca70e94b"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#afaf72688a238d4ba16ba2ae1444cd552a692ab9362c9a13074521ceebca70e94b">UNIT_FLAG_DISARMED</a></div><div class="ttdeci">@ UNIT_FLAG_DISARMED</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00627">Unit.h:627</a></div></div>
<div class="ttc" id="a_unit_8h_html_afd9f193edd86cc61d3f2413e3a1eaef5ae65e45a8c442707dc45fed1c9f456daa"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#afd9f193edd86cc61d3f2413e3a1eaef5ae65e45a8c442707dc45fed1c9f456daa">UNIT_FLAG2_DISARM_OFFHAND</a></div><div class="ttdeci">@ UNIT_FLAG2_DISARM_OFFHAND</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00650">Unit.h:650</a></div></div>
<div class="ttc" id="a_unit_8h_html_afd9f193edd86cc61d3f2413e3a1eaef5af67a9a68cd8ef74a5993e9a64fcd07cd"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#afd9f193edd86cc61d3f2413e3a1eaef5af67a9a68cd8ef74a5993e9a64fcd07cd">UNIT_FLAG2_DISARM_RANGED</a></div><div class="ttdeci">@ UNIT_FLAG2_DISARM_RANGED</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00652">Unit.h:652</a></div></div>
<div class="ttc" id="aclass_creature_html_a1e4f1ed588789ac22b0833dceb1be880"><div class="ttname"><a href="../../d1/dac/class_creature.html#a1e4f1ed588789ac22b0833dceb1be880">Creature::GetCurrentEquipmentId</a></div><div class="ttdeci">uint8 GetCurrentEquipmentId()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d93/_creature_8h_source.html#l00179">Creature.h:179</a></div></div>
<div class="ttc" id="aclass_player_html_a6d26b6e2d8c1f5d9532a739010594c68"><div class="ttname"><a href="../../d8/d53/class_player.html#a6d26b6e2d8c1f5d9532a739010594c68">Player::_ApplyWeaponDamage</a></div><div class="ttdeci">void _ApplyWeaponDamage(uint8 slot, ItemTemplate const *proto, ScalingStatValuesEntry const *ssv, bool apply)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/_player_8cpp_source.html#l06683">Player.cpp:6683</a></div></div>
<div class="ttc" id="aclass_player_html_a6e31042962f16c90a443ff772363d22f"><div class="ttname"><a href="../../d8/d53/class_player.html#a6e31042962f16c90a443ff772363d22f">Player::GetItemByPos</a></div><div class="ttdeci">Item * GetItemByPos(uint16 pos) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d16/_player_storage_8cpp_source.html#l00469">PlayerStorage.cpp:469</a></div></div>
<div class="ttc" id="aclass_player_html_aa5330c83cf8abe59375e5aeac758362f"><div class="ttname"><a href="../../d8/d53/class_player.html#aa5330c83cf8abe59375e5aeac758362f">Player::_ApplyWeaponDependentAuraMods</a></div><div class="ttdeci">void _ApplyWeaponDependentAuraMods(Item *item, WeaponAttackType attackType, bool apply)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/_player_8cpp_source.html#l06765">Player.cpp:6765</a></div></div>
<div class="ttc" id="aclass_player_html_aa8ac03d330ab1472d35f520e60454022"><div class="ttname"><a href="../../d8/d53/class_player.html#aa8ac03d330ab1472d35f520e60454022">Player::GetAttackBySlot</a></div><div class="ttdeci">static uint8 GetAttackBySlot(uint8 slot)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d16/_player_storage_8cpp_source.html#l00570">PlayerStorage.cpp:570</a></div></div>
<div class="ttc" id="aclass_unit_html_a373a25c8d6ff3ca2f5653267c1269ad4"><div class="ttname"><a href="../../da/db7/class_unit.html#a373a25c8d6ff3ca2f5653267c1269ad4">Unit::GetShapeshiftForm</a></div><div class="ttdeci">ShapeshiftForm GetShapeshiftForm() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l02153">Unit.h:2153</a></div></div>
<div class="ttc" id="aclass_unit_html_a7df3efe1a18d2562a04ca1f91d03532e"><div class="ttname"><a href="../../da/db7/class_unit.html#a7df3efe1a18d2562a04ca1f91d03532e">Unit::UpdateDamagePhysical</a></div><div class="ttdeci">virtual void UpdateDamagePhysical(WeaponAttackType attType)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d07/_stat_system_8cpp_source.html#l00059">StatSystem.cpp:59</a></div></div>
<div class="ttc" id="aclass_unit_html_abbc1994b31e8c2706a99c0d35269b89c"><div class="ttname"><a href="../../da/db7/class_unit.html#abbc1994b31e8c2706a99c0d35269b89c">Unit::IsInFeralForm</a></div><div class="ttdeci">bool IsInFeralForm() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l02159">Unit.h:2159</a></div></div>
<div class="ttc" id="afmt_2include_2fmt_2core_8h_html_a7aead736a07eaf25623ad7bfa1f0ee2d"><div class="ttname"><a href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a></div><div class="ttdeci">type</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d71/fmt_2include_2fmt_2core_8h_source.html#l01048">core.h:1048</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d82/_player_8cpp_source.html#l06683">Player::_ApplyWeaponDamage()</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l06765">Player::_ApplyWeaponDependentAuraMods()</a>, <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00555">BASE_ATTACK</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l00671">EQUIPMENT_SLOT_MAINHAND</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l00672">EQUIPMENT_SLOT_OFFHAND</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l00673">EQUIPMENT_SLOT_RANGED</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00215">FORM_GHOSTWOLF</a>, <a class="el" href="../../d4/d16/_player_storage_8cpp_source.html#l00570">Player::GetAttackBySlot()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02047">Unit::GetAuraEffectsByType()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00446">GetAuraType()</a>, <a class="el" href="../../d8/d93/_creature_8h_source.html#l00179">Creature::GetCurrentEquipmentId()</a>, <a class="el" href="../../d4/d16/_player_storage_8cpp_source.html#l00469">Player::GetItemByPos()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02153">Unit::GetShapeshiftForm()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05194">Unit::HasAuraType()</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l00651">INVENTORY_SLOT_BAG_0</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02159">Unit::IsInFeralForm()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00558">MAX_ATTACK</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00556">OFF_ATTACK</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00557">RANGED_ATTACK</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00851">Object::RemoveFlag()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00836">Object::SetFlag()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00130">SPELL_AURA_MOD_DISARM</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00317">SPELL_AURA_MOD_DISARM_OFFHAND</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00341">SPELL_AURA_MOD_DISARM_RANGED</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00183">Object::ToCreature()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00037">TYPEID_UNIT</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00117">UNIT_FIELD_FLAGS</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00118">UNIT_FIELD_FLAGS_2</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00650">UNIT_FLAG2_DISARM_OFFHAND</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00652">UNIT_FLAG2_DISARM_RANGED</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00627">UNIT_FLAG_DISARMED</a>, and <a class="el" href="../../df/d07/_stat_system_8cpp_source.html#l00059">Unit::UpdateDamagePhysical()</a>.</p>

</div>
</div>
<a id="a0c107b074aa0e5e8cfe63d6c73c14803"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c107b074aa0e5e8cfe63d6c73c14803">&#9670;&nbsp;</a></span>HandleAuraModDispelImmunity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModDispelImmunity </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03849">3849</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;{</div>
<div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160; </div>
<div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160; </div>
<div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#ae2d8dceb2d24787c442da0f2baf40a42">ApplySpellDispelImmunity</a>(<a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#ada2b5e66b650d7a63f70c06a746070d1">DispelType</a>(<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>()), (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>));</div>
<div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_ada2b5e66b650d7a63f70c06a746070d1"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#ada2b5e66b650d7a63f70c06a746070d1">DispelType</a></div><div class="ttdeci">DispelType</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01342">SharedDefines.h:1343</a></div></div>
<div class="ttc" id="aclass_unit_html_ae2d8dceb2d24787c442da0f2baf40a42"><div class="ttname"><a href="../../da/db7/class_unit.html#ae2d8dceb2d24787c442da0f2baf40a42">Unit::ApplySpellDispelImmunity</a></div><div class="ttdeci">void ApplySpellDispelImmunity(const SpellInfo *spellProto, DispelType type, bool apply)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l12631">Unit.cpp:12631</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l12631">Unit::ApplySpellDispelImmunity()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, and <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00115">m_spellInfo</a>.</p>

</div>
</div>
<a id="a3dd65a07ecb6f2cfdecbed6a15c8ef08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3dd65a07ecb6f2cfdecbed6a15c8ef08">&#9670;&nbsp;</a></span>HandleAuraModDmgImmunity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModDmgImmunity </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03839">3839</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;{</div>
<div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160; </div>
<div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160; </div>
<div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9aafc08853a1561d6bb484698c33d2e5ce">IMMUNITY_DAMAGE</a>, <a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>(), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_a91d505a1e789c6ea6a338f3a3c85b6b9aafc08853a1561d6bb484698c33d2e5ce"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9aafc08853a1561d6bb484698c33d2e5ce">IMMUNITY_DAMAGE</a></div><div class="ttdeci">@ IMMUNITY_DAMAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01369">SharedDefines.h:1369</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l12604">Unit::ApplySpellImmune()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">GetId()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, and <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01369">IMMUNITY_DAMAGE</a>.</p>

</div>
</div>
<a id="a3b46362827d3489a5f34a9d34efa489f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b46362827d3489a5f34a9d34efa489f">&#9670;&nbsp;</a></span>HandleAuraModDodgePercent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModDodgePercent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04397">4397</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;{</div>
<div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160; </div>
<div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160; </div>
<div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160; </div>
<div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;    target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a1b8e999c74e225616c6a7bc69c441cdf">UpdateDodgePercentage</a>();</div>
<div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;}</div>
<div class="ttc" id="aclass_player_html_a1b8e999c74e225616c6a7bc69c441cdf"><div class="ttname"><a href="../../d8/d53/class_player.html#a1b8e999c74e225616c6a7bc69c441cdf">Player::UpdateDodgePercentage</a></div><div class="ttdeci">void UpdateDodgePercentage()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d07/_stat_system_8cpp_source.html#l00749">StatSystem.cpp:749</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../df/d07/_stat_system_8cpp_source.html#l00749">Player::UpdateDodgePercentage()</a>.</p>

</div>
</div>
<a id="a179b35bc601d9b36bc8be2961c0af054"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a179b35bc601d9b36bc8be2961c0af054">&#9670;&nbsp;</a></span>HandleAuraModEffectImmunity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModEffectImmunity </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03744">3744</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;{</div>
<div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160; </div>
<div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160; </div>
<div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9a5da3c36e87dda6bd23b3c55edd0830d2">IMMUNITY_EFFECT</a>, <a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>(), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160; </div>
<div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;    <span class="comment">// when removing flag aura, handle flag drop</span></div>
<div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;    <a class="code" href="../../d8/d53/class_player.html">Player</a>* player = target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>();</div>
<div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a> &amp;&amp; player &amp;&amp; (<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;AuraInterruptFlags &amp; <a class="code" href="../../d5/d32/_unit_8h.html#a0709fc3ab848cf1b8b4853813b8fe011a61b4509cc6643cd80da8b6c065d45f4a">AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</a>))</div>
<div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;    {</div>
<div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;        <span class="keywordflow">if</span> (player-&gt;<a class="code" href="../../d8/d53/class_player.html#a467189aea8a8fb26ef8482254e6f2b34">InBattleground</a>())</div>
<div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;        {</div>
<div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d6/ddc/class_battleground.html">Battleground</a>* <a class="code" href="../../da/dec/color_8h.html#aff385f59fe6fc0f7d51a290ec9ff5a75">bg</a> = player-&gt;<a class="code" href="../../d8/d53/class_player.html#a5f17db78f9356bf239b7631ebc38fa2d">GetBattleground</a>())</div>
<div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;                <a class="code" href="../../da/dec/color_8h.html#aff385f59fe6fc0f7d51a290ec9ff5a75">bg</a>-&gt;EventPlayerDroppedFlag(player);</div>
<div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;        }</div>
<div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;            <a class="code" href="../../d9/d5d/_outdoor_pv_p_mgr_8h.html#a7f16e829e6dd717c8a6a20fd1aa783cc">sOutdoorPvPMgr</a>-&gt;HandleDropFlag(player, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;Id);</div>
<div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;    }</div>
<div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;}</div>
<div class="ttc" id="a_outdoor_pv_p_mgr_8h_html_a7f16e829e6dd717c8a6a20fd1aa783cc"><div class="ttname"><a href="../../d9/d5d/_outdoor_pv_p_mgr_8h.html#a7f16e829e6dd717c8a6a20fd1aa783cc">sOutdoorPvPMgr</a></div><div class="ttdeci">#define sOutdoorPvPMgr</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d5d/_outdoor_pv_p_mgr_8h_source.html#l00106">OutdoorPvPMgr.h:106</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a91d505a1e789c6ea6a338f3a3c85b6b9a5da3c36e87dda6bd23b3c55edd0830d2"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9a5da3c36e87dda6bd23b3c55edd0830d2">IMMUNITY_EFFECT</a></div><div class="ttdeci">@ IMMUNITY_EFFECT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01366">SharedDefines.h:1366</a></div></div>
<div class="ttc" id="a_unit_8h_html_a0709fc3ab848cf1b8b4853813b8fe011a61b4509cc6643cd80da8b6c065d45f4a"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a0709fc3ab848cf1b8b4853813b8fe011a61b4509cc6643cd80da8b6c065d45f4a">AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</a></div><div class="ttdeci">@ AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00072">Unit.h:72</a></div></div>
<div class="ttc" id="aclass_player_html_a467189aea8a8fb26ef8482254e6f2b34"><div class="ttname"><a href="../../d8/d53/class_player.html#a467189aea8a8fb26ef8482254e6f2b34">Player::InBattleground</a></div><div class="ttdeci">bool InBattleground() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l02190">Player.h:2190</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l12604">Unit::ApplySpellImmune()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00072">AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</a>, <a class="el" href="../../da/dec/color_8h_source.html#l00363">bg()</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l11489">Player::GetBattleground()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">GetId()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01366">IMMUNITY_EFFECT</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l02190">Player::InBattleground()</a>, <a class="el" href="../../d9/d5d/_outdoor_pv_p_mgr_8h_source.html#l00106">sOutdoorPvPMgr</a>, and <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>.</p>

</div>
</div>
<a id="a88fe5e60d633f96c842170fcaed8c7cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88fe5e60d633f96c842170fcaed8c7cf">&#9670;&nbsp;</a></span>HandleAuraModExpertise()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModExpertise </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04201">4201</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;{</div>
<div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160; </div>
<div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160; </div>
<div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160; </div>
<div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;    target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a6efacc1a5cdce1d2466dba3fc39cdf17">UpdateExpertise</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>);</div>
<div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;    target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a6efacc1a5cdce1d2466dba3fc39cdf17">UpdateExpertise</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa052681ec165e5b5e3edcf2089607ae67">OFF_ATTACK</a>);</div>
<div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;}</div>
<div class="ttc" id="aclass_player_html_a6efacc1a5cdce1d2466dba3fc39cdf17"><div class="ttname"><a href="../../d8/d53/class_player.html#a6efacc1a5cdce1d2466dba3fc39cdf17">Player::UpdateExpertise</a></div><div class="ttdeci">void UpdateExpertise(WeaponAttackType attType)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d07/_stat_system_8cpp_source.html#l00840">StatSystem.cpp:840</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00555">BASE_ATTACK</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00556">OFF_ATTACK</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../df/d07/_stat_system_8cpp_source.html#l00840">Player::UpdateExpertise()</a>.</p>

</div>
</div>
<a id="a26906e499e64074d01966137f9608093"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26906e499e64074d01966137f9608093">&#9670;&nbsp;</a></span>HandleAuraModFaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModFaction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05526">5526</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05527"></a><span class="lineno"> 5527</span>&#160;{</div>
<div class="line"><a name="l05528"></a><span class="lineno"> 5528</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l05529"></a><span class="lineno"> 5529</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05530"></a><span class="lineno"> 5530</span>&#160; </div>
<div class="line"><a name="l05531"></a><span class="lineno"> 5531</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l05532"></a><span class="lineno"> 5532</span>&#160; </div>
<div class="line"><a name="l05533"></a><span class="lineno"> 5533</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l05534"></a><span class="lineno"> 5534</span>&#160;    {</div>
<div class="line"><a name="l05535"></a><span class="lineno"> 5535</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a2579e2b71959daec99048b4bcf7f6bf3">SetFaction</a>(<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><a name="l05536"></a><span class="lineno"> 5536</span>&#160;        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l05537"></a><span class="lineno"> 5537</span>&#160;            target-&gt;<a class="code" href="../../d8/d83/class_object.html#a7e764fbd4b7eca84f80e36e900bca7d3">RemoveFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881aab4868b631f1cfaf30faee627f7c9dbf">UNIT_FIELD_FLAGS</a>, <a class="code" href="../../d5/d32/_unit_8h.html#afaf72688a238d4ba16ba2ae1444cd552ac75aa2eacc0e809ae582c85d245c1e4c">UNIT_FLAG_PLAYER_CONTROLLED</a>);</div>
<div class="line"><a name="l05538"></a><span class="lineno"> 5538</span>&#160;    }</div>
<div class="line"><a name="l05539"></a><span class="lineno"> 5539</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l05540"></a><span class="lineno"> 5540</span>&#160;    {</div>
<div class="line"><a name="l05541"></a><span class="lineno"> 5541</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a25e4ba3fa47df09bb0492dd70c17c841">RestoreFaction</a>();</div>
<div class="line"><a name="l05542"></a><span class="lineno"> 5542</span>&#160;        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l05543"></a><span class="lineno"> 5543</span>&#160;            target-&gt;<a class="code" href="../../d8/d83/class_object.html#a79a7a80acdec46961b4d8aaead4ae631">SetFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881aab4868b631f1cfaf30faee627f7c9dbf">UNIT_FIELD_FLAGS</a>, <a class="code" href="../../d5/d32/_unit_8h.html#afaf72688a238d4ba16ba2ae1444cd552ac75aa2eacc0e809ae582c85d245c1e4c">UNIT_FLAG_PLAYER_CONTROLLED</a>);</div>
<div class="line"><a name="l05544"></a><span class="lineno"> 5544</span>&#160;    }</div>
<div class="line"><a name="l05545"></a><span class="lineno"> 5545</span>&#160;}</div>
<div class="ttc" id="a_unit_8h_html_afaf72688a238d4ba16ba2ae1444cd552ac75aa2eacc0e809ae582c85d245c1e4c"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#afaf72688a238d4ba16ba2ae1444cd552ac75aa2eacc0e809ae582c85d245c1e4c">UNIT_FLAG_PLAYER_CONTROLLED</a></div><div class="ttdeci">@ UNIT_FLAG_PLAYER_CONTROLLED</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00609">Unit.h:609</a></div></div>
<div class="ttc" id="aclass_unit_html_a2579e2b71959daec99048b4bcf7f6bf3"><div class="ttname"><a href="../../da/db7/class_unit.html#a2579e2b71959daec99048b4bcf7f6bf3">Unit::SetFaction</a></div><div class="ttdeci">void SetFaction(uint32 faction)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l09495">Unit.cpp:9495</a></div></div>
<div class="ttc" id="aclass_unit_html_a25e4ba3fa47df09bb0492dd70c17c841"><div class="ttname"><a href="../../da/db7/class_unit.html#a25e4ba3fa47df09bb0492dd70c17c841">Unit::RestoreFaction</a></div><div class="ttdeci">void RestoreFaction()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l17812">Unit.cpp:17812</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00851">Object::RemoveFlag()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l17812">Unit::RestoreFaction()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l09495">Unit::SetFaction()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00836">Object::SetFlag()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00117">UNIT_FIELD_FLAGS</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00609">UNIT_FLAG_PLAYER_CONTROLLED</a>.</p>

</div>
</div>
<a id="a6a83116c26a189ee818608f1c1be2a9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a83116c26a189ee818608f1c1be2a9d">&#9670;&nbsp;</a></span>HandleAuraModFakeInebriation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModFakeInebriation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05653">5653</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05654"></a><span class="lineno"> 5654</span>&#160;{</div>
<div class="line"><a name="l05655"></a><span class="lineno"> 5655</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>))</div>
<div class="line"><a name="l05656"></a><span class="lineno"> 5656</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05657"></a><span class="lineno"> 5657</span>&#160; </div>
<div class="line"><a name="l05658"></a><span class="lineno"> 5658</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l05659"></a><span class="lineno"> 5659</span>&#160; </div>
<div class="line"><a name="l05660"></a><span class="lineno"> 5660</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l05661"></a><span class="lineno"> 5661</span>&#160;    {</div>
<div class="line"><a name="l05662"></a><span class="lineno"> 5662</span>&#160;        target-&gt;<a class="code" href="../../db/df7/class_world_object.html#a535383de383eb9b9b20d988bdcbb3291">m_invisibilityDetect</a>.<a class="code" href="../../d0/dbe/class_flagged_values_array32.html#a273ab3607b23881628eb0c5d6a4da288">AddFlag</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a5f791d790b588bcbafa8a2f34be5c4a0ab7204c96109ce2a899e2066a3df814d2">INVISIBILITY_DRUNK</a>);</div>
<div class="line"><a name="l05663"></a><span class="lineno"> 5663</span>&#160;        target-&gt;<a class="code" href="../../db/df7/class_world_object.html#a535383de383eb9b9b20d988bdcbb3291">m_invisibilityDetect</a>.<a class="code" href="../../d0/dbe/class_flagged_values_array32.html#aacca1261b2a22525e5fd40e5f479aa06">AddValue</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a5f791d790b588bcbafa8a2f34be5c4a0ab7204c96109ce2a899e2066a3df814d2">INVISIBILITY_DRUNK</a>, <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><a name="l05664"></a><span class="lineno"> 5664</span>&#160; </div>
<div class="line"><a name="l05665"></a><span class="lineno"> 5665</span>&#160;        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l05666"></a><span class="lineno"> 5666</span>&#160;        {</div>
<div class="line"><a name="l05667"></a><span class="lineno"> 5667</span>&#160;            <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> oldval = target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d83/class_object.html#a1ae8ab32fd7bdec9e9cc0eb4c5ba68e9">GetInt32Value</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a12aec05556dba9548e48851cc0dcf48d">PLAYER_FAKE_INEBRIATION</a>);</div>
<div class="line"><a name="l05668"></a><span class="lineno"> 5668</span>&#160;            target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d83/class_object.html#a1dd144f55a02384903919242dbf17505">SetInt32Value</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a12aec05556dba9548e48851cc0dcf48d">PLAYER_FAKE_INEBRIATION</a>, oldval + <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><a name="l05669"></a><span class="lineno"> 5669</span>&#160;        }</div>
<div class="line"><a name="l05670"></a><span class="lineno"> 5670</span>&#160;    }</div>
<div class="line"><a name="l05671"></a><span class="lineno"> 5671</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l05672"></a><span class="lineno"> 5672</span>&#160;    {</div>
<div class="line"><a name="l05673"></a><span class="lineno"> 5673</span>&#160;        <span class="keywordtype">bool</span> removeDetect = !target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a738d314a9ab9a70711cf0f1fdd5033c5">SPELL_AURA_MOD_FAKE_INEBRIATE</a>);</div>
<div class="line"><a name="l05674"></a><span class="lineno"> 5674</span>&#160; </div>
<div class="line"><a name="l05675"></a><span class="lineno"> 5675</span>&#160;        target-&gt;<a class="code" href="../../db/df7/class_world_object.html#a535383de383eb9b9b20d988bdcbb3291">m_invisibilityDetect</a>.<a class="code" href="../../d0/dbe/class_flagged_values_array32.html#aacca1261b2a22525e5fd40e5f479aa06">AddValue</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a5f791d790b588bcbafa8a2f34be5c4a0ab7204c96109ce2a899e2066a3df814d2">INVISIBILITY_DRUNK</a>, -<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><a name="l05676"></a><span class="lineno"> 5676</span>&#160; </div>
<div class="line"><a name="l05677"></a><span class="lineno"> 5677</span>&#160;        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l05678"></a><span class="lineno"> 5678</span>&#160;        {</div>
<div class="line"><a name="l05679"></a><span class="lineno"> 5679</span>&#160;            <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> oldval = target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d83/class_object.html#a1ae8ab32fd7bdec9e9cc0eb4c5ba68e9">GetInt32Value</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a12aec05556dba9548e48851cc0dcf48d">PLAYER_FAKE_INEBRIATION</a>);</div>
<div class="line"><a name="l05680"></a><span class="lineno"> 5680</span>&#160;            target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d83/class_object.html#a1dd144f55a02384903919242dbf17505">SetInt32Value</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a12aec05556dba9548e48851cc0dcf48d">PLAYER_FAKE_INEBRIATION</a>, oldval - <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><a name="l05681"></a><span class="lineno"> 5681</span>&#160; </div>
<div class="line"><a name="l05682"></a><span class="lineno"> 5682</span>&#160;            <span class="keywordflow">if</span> (removeDetect)</div>
<div class="line"><a name="l05683"></a><span class="lineno"> 5683</span>&#160;                removeDetect = !target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a297de3a43b55b84e5d6ff5db6f1d4a48">GetDrunkValue</a>();</div>
<div class="line"><a name="l05684"></a><span class="lineno"> 5684</span>&#160;        }</div>
<div class="line"><a name="l05685"></a><span class="lineno"> 5685</span>&#160; </div>
<div class="line"><a name="l05686"></a><span class="lineno"> 5686</span>&#160;        <span class="keywordflow">if</span> (removeDetect)</div>
<div class="line"><a name="l05687"></a><span class="lineno"> 5687</span>&#160;            target-&gt;<a class="code" href="../../db/df7/class_world_object.html#a535383de383eb9b9b20d988bdcbb3291">m_invisibilityDetect</a>.<a class="code" href="../../d0/dbe/class_flagged_values_array32.html#a3a674b2a7b8d5874f7210372b3e92123">DelFlag</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a5f791d790b588bcbafa8a2f34be5c4a0ab7204c96109ce2a899e2066a3df814d2">INVISIBILITY_DRUNK</a>);</div>
<div class="line"><a name="l05688"></a><span class="lineno"> 5688</span>&#160;    }</div>
<div class="line"><a name="l05689"></a><span class="lineno"> 5689</span>&#160; </div>
<div class="line"><a name="l05690"></a><span class="lineno"> 5690</span>&#160;    <span class="comment">// call functions which may have additional effects after chainging state of unit</span></div>
<div class="line"><a name="l05691"></a><span class="lineno"> 5691</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5b2b731101a2c33063cef5c59e595249">UpdateObjectVisibility</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l05692"></a><span class="lineno"> 5692</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_a5f791d790b588bcbafa8a2f34be5c4a0ab7204c96109ce2a899e2066a3df814d2"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a5f791d790b588bcbafa8a2f34be5c4a0ab7204c96109ce2a899e2066a3df814d2">INVISIBILITY_DRUNK</a></div><div class="ttdeci">@ INVISIBILITY_DRUNK</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01233">SharedDefines.h:1233</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a738d314a9ab9a70711cf0f1fdd5033c5"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a738d314a9ab9a70711cf0f1fdd5033c5">SPELL_AURA_MOD_FAKE_INEBRIATE</a></div><div class="ttdeci">@ SPELL_AURA_MOD_FAKE_INEBRIATE</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00367">SpellAuraDefines.h:367</a></div></div>
<div class="ttc" id="a_update_fields_8h_html_a0e42dc606678c9df7884e1aad621e881a12aec05556dba9548e48851cc0dcf48d"><div class="ttname"><a href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a12aec05556dba9548e48851cc0dcf48d">PLAYER_FAKE_INEBRIATION</a></div><div class="ttdeci">@ PLAYER_FAKE_INEBRIATION</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d65/_update_fields_8h_source.html#l00325">UpdateFields.h:325</a></div></div>
<div class="ttc" id="aclass_flagged_values_array32_html_a273ab3607b23881628eb0c5d6a4da288"><div class="ttname"><a href="../../d0/dbe/class_flagged_values_array32.html#a273ab3607b23881628eb0c5d6a4da288">FlaggedValuesArray32::AddFlag</a></div><div class="ttdeci">void AddFlag(FLAG_TYPE flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d30/_object_8h_source.html#l00632">Object.h:632</a></div></div>
<div class="ttc" id="aclass_flagged_values_array32_html_a3a674b2a7b8d5874f7210372b3e92123"><div class="ttname"><a href="../../d0/dbe/class_flagged_values_array32.html#a3a674b2a7b8d5874f7210372b3e92123">FlaggedValuesArray32::DelFlag</a></div><div class="ttdeci">void DelFlag(FLAG_TYPE flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d30/_object_8h_source.html#l00633">Object.h:633</a></div></div>
<div class="ttc" id="aclass_flagged_values_array32_html_aacca1261b2a22525e5fd40e5f479aa06"><div class="ttname"><a href="../../d0/dbe/class_flagged_values_array32.html#aacca1261b2a22525e5fd40e5f479aa06">FlaggedValuesArray32::AddValue</a></div><div class="ttdeci">void AddValue(FLAG_TYPE flag, T_VALUES value)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d30/_object_8h_source.html#l00637">Object.h:637</a></div></div>
<div class="ttc" id="aclass_object_html_a1ae8ab32fd7bdec9e9cc0eb4c5ba68e9"><div class="ttname"><a href="../../d8/d83/class_object.html#a1ae8ab32fd7bdec9e9cc0eb4c5ba68e9">Object::GetInt32Value</a></div><div class="ttdeci">int32 GetInt32Value(uint16 index) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/ded/_object_8cpp_source.html#l00294">Object.cpp:294</a></div></div>
<div class="ttc" id="aclass_object_html_a1dd144f55a02384903919242dbf17505"><div class="ttname"><a href="../../d8/d83/class_object.html#a1dd144f55a02384903919242dbf17505">Object::SetInt32Value</a></div><div class="ttdeci">void SetInt32Value(uint16 index, int32 value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/ded/_object_8cpp_source.html#l00628">Object.cpp:628</a></div></div>
<div class="ttc" id="aclass_player_html_a297de3a43b55b84e5d6ff5db6f1d4a48"><div class="ttname"><a href="../../d8/d53/class_player.html#a297de3a43b55b84e5d6ff5db6f1d4a48">Player::GetDrunkValue</a></div><div class="ttdeci">uint8 GetDrunkValue() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l02113">Player.h:2113</a></div></div>
<div class="ttc" id="aclass_unit_html_a5b2b731101a2c33063cef5c59e595249"><div class="ttname"><a href="../../da/db7/class_unit.html#a5b2b731101a2c33063cef5c59e595249">Unit::UpdateObjectVisibility</a></div><div class="ttdeci">void UpdateObjectVisibility(bool forced=true, bool fromUpdate=false) override</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l18229">Unit.cpp:18229</a></div></div>
<div class="ttc" id="aclass_world_object_html_a535383de383eb9b9b20d988bdcbb3291"><div class="ttname"><a href="../../db/df7/class_world_object.html#a535383de383eb9b9b20d988bdcbb3291">WorldObject::m_invisibilityDetect</a></div><div class="ttdeci">FlaggedValuesArray32&lt; int32, uint32, InvisibilityType, TOTAL_INVISIBILITY_TYPES &gt; m_invisibilityDetect</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d30/_object_8h_source.html#l00790">Object.h:790</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d30/_object_8h_source.html#l00632">FlaggedValuesArray32&lt; T_VALUES, T_FLAGS, FLAG_TYPE, ARRAY_SIZE &gt;::AddFlag()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00637">FlaggedValuesArray32&lt; T_VALUES, T_FLAGS, FLAG_TYPE, ARRAY_SIZE &gt;::AddValue()</a>, <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00633">FlaggedValuesArray32&lt; T_VALUES, T_FLAGS, FLAG_TYPE, ARRAY_SIZE &gt;::DelFlag()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l02113">Player::GetDrunkValue()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00294">Object::GetInt32Value()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05194">Unit::HasAuraType()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01233">INVISIBILITY_DRUNK</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00790">WorldObject::m_invisibilityDetect</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00325">PLAYER_FAKE_INEBRIATION</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00628">Object::SetInt32Value()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00367">SPELL_AURA_MOD_FAKE_INEBRIATE</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l18229">Unit::UpdateObjectVisibility()</a>.</p>

</div>
</div>
<a id="ab17ae5878087d1047e5163db7e95564b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab17ae5878087d1047e5163db7e95564b">&#9670;&nbsp;</a></span>HandleAuraModIncreaseEnergy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModIncreaseEnergy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04300">4300</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;{</div>
<div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160; </div>
<div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160; </div>
<div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;    <a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414">Powers</a> <a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a> = <a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414">Powers</a>(<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;    <span class="comment">// do not check power type, we can always modify the maximum</span></div>
<div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160;    <span class="comment">// as the client will not see any difference</span></div>
<div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;    <span class="comment">// also, placing conditions that may change during the aura duration</span></div>
<div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;    <span class="comment">// inside effect handlers is not a good idea</span></div>
<div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;    <span class="comment">//if (int32(PowerType) != GetMiscValue())</span></div>
<div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;    <span class="comment">//    return;</span></div>
<div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160; </div>
<div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;    <a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bde">UnitMods</a> unitMod = <a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bde">UnitMods</a>(<span class="keyword">static_cast&lt;</span><a class="code" href="../../d9/df6/my__global_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a><span class="keyword">&gt;</span>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdea5aad5ea92b88fa48fb05a367e6d70bb8">UNIT_MOD_POWER_START</a>) + <a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>);</div>
<div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160; </div>
<div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(unitMod, <a class="code" href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eea85637bc3b7127fbfc1d35d5e3ca4a95c">TOTAL_VALUE</a>, <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_a17e15fab4b89f4840e745f31ca76a414"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414">Powers</a></div><div class="ttdeci">Powers</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00239">SharedDefines.h:240</a></div></div>
<div class="ttc" id="a_unit_8h_html_a4c5336cd4be5f0162bd4874b0a1e5bdea5aad5ea92b88fa48fb05a367e6d70bb8"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdea5aad5ea92b88fa48fb05a367e6d70bb8">UNIT_MOD_POWER_START</a></div><div class="ttdeci">@ UNIT_MOD_POWER_START</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00452">Unit.h:452</a></div></div>
<div class="ttc" id="a_vehicle_defines_8h_html_a0d0e3226055ad5266e487b58fd01cebd"><div class="ttname"><a href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a></div><div class="ttdeci">PowerType</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d0f/_vehicle_defines_8h_source.html#l00029">VehicleDefines.h:30</a></div></div>
<div class="ttc" id="amy__global_8h_html_a05f6b0ae8f6a6e135b0e290c25fe0e4e"><div class="ttname"><a href="../../d9/df6/my__global_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a></div><div class="ttdeci">unsigned short uint16</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df6/my__global_8h_source.html#l00887">my_global.h:887</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l14345">Unit::HandleStatModifier()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00373">TOTAL_VALUE</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00452">UNIT_MOD_POWER_START</a>.</p>

</div>
</div>
<a id="afbc68f3158a932f36315f4348dba5914"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbc68f3158a932f36315f4348dba5914">&#9670;&nbsp;</a></span>HandleAuraModIncreaseEnergyPercent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModIncreaseEnergyPercent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04320">4320</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;{</div>
<div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160; </div>
<div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160; </div>
<div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;    <a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414">Powers</a> <a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a> = <a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414">Powers</a>(<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;    <span class="comment">// do not check power type, we can always modify the maximum</span></div>
<div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;    <span class="comment">// as the client will not see any difference</span></div>
<div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;    <span class="comment">// also, placing conditions that may change during the aura duration</span></div>
<div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;    <span class="comment">// inside effect handlers is not a good idea</span></div>
<div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;    <span class="comment">//if (int32(PowerType) != GetMiscValue())</span></div>
<div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;    <span class="comment">//    return;</span></div>
<div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160; </div>
<div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;    <a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bde">UnitMods</a> unitMod = <a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bde">UnitMods</a>(<span class="keyword">static_cast&lt;</span><a class="code" href="../../d9/df6/my__global_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a><span class="keyword">&gt;</span>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdea5aad5ea92b88fa48fb05a367e6d70bb8">UNIT_MOD_POWER_START</a>) + <a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>);</div>
<div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;    <span class="keywordtype">float</span> amount = float(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160; </div>
<div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;    {</div>
<div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(unitMod, <a class="code" href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeab3ddc12b0760eec54f45b90b8671af4d">TOTAL_PCT</a>, amount, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa9753a6e5734593a4b14e6f0f198c538">ModifyPowerPct</a>(<a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>, amount, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;    }</div>
<div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;    {</div>
<div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa9753a6e5734593a4b14e6f0f198c538">ModifyPowerPct</a>(<a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>, amount, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(unitMod, <a class="code" href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeab3ddc12b0760eec54f45b90b8671af4d">TOTAL_PCT</a>, amount, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;    }</div>
<div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;}</div>
<div class="ttc" id="aclass_unit_html_aa9753a6e5734593a4b14e6f0f198c538"><div class="ttname"><a href="../../da/db7/class_unit.html#aa9753a6e5734593a4b14e6f0f198c538">Unit::ModifyPowerPct</a></div><div class="ttdeci">int32 ModifyPowerPct(Powers power, float pct, bool apply=true)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l13361">Unit.cpp:13361</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l14345">Unit::HandleStatModifier()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l13361">Unit::ModifyPowerPct()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00374">TOTAL_PCT</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00452">UNIT_MOD_POWER_START</a>.</p>

</div>
</div>
<a id="af27fe9a06b1ec4e7feb0249926d69dba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af27fe9a06b1ec4e7feb0249926d69dba">&#9670;&nbsp;</a></span>HandleAuraModIncreaseFlightSpeed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModIncreaseFlightSpeed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Update ability to fly</p>
<p>Someone should clean up these hacks and remove it from this function. It doesn't even belong here.</p>

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03260">3260</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;{</div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a45b308d91feffe9ebae9560b649b193b">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160; </div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;    <span class="keywordflow">if</span> (mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>)</div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#ac85eb152580735addb4e7022ae2b3d4c">UpdateSpeed</a>(<a class="code" href="../../d5/d32/_unit_8h.html#af91f7580a89722b7dc45a018bb46fce4a2461b4a7be489c54989eff2c87ae1961">MOVE_FLIGHT</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160; </div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>() == <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799aee4933438da47b18e67ffeb26e91f20b">SPELL_AURA_MOD_INCREASE_MOUNTED_FLIGHT_SPEED</a>)</div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;    {</div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;        <span class="comment">// do not remove unit flag if there are more than this auraEffect of that kind on unit on unit</span></div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;        <span class="keywordflow">if</span> (mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a> &amp;&amp; (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a> || (!target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799aee4933438da47b18e67ffeb26e91f20b">SPELL_AURA_MOD_INCREASE_MOUNTED_FLIGHT_SPEED</a>) &amp;&amp; !target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a6b0ccd5195567a4744da1763b92159e3">SPELL_AURA_FLY</a>))))</div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;        {</div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a8589825a8a8fd6e20c48af3605297bd4">SetCanFly</a>(<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160; </div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a> &amp;&amp; target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2a93dfa528ffc48db4993fb7ac62696db9">TYPEID_UNIT</a> &amp;&amp; !target-&gt;<a class="code" href="../../da/db7/class_unit.html#a55b787bbffa61290e6b6a247f2927c90">IsLevitating</a>())</div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#aae6570959bf6129418e1db63aeafdc1a">GetMotionMaster</a>()-&gt;<a class="code" href="../../df/d4d/class_motion_master.html#ae37d25ba49a3887faa07bc194f3447fd">MoveFall</a>();</div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;        }</div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160; </div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;        <span class="keywordflow">if</span> (mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>)</div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;        {</div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;            <span class="comment">//Players on flying mounts must be immune to polymorph</span></div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;            <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada9dd2384218d039987359150d147d3263">MECHANIC_POLYMORPH</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160; </div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;            <span class="comment">// Dragonmaw Illusion (overwrite mount model, mounted aura already applied)</span></div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a> &amp;&amp; target-&gt;<a class="code" href="../../da/db7/class_unit.html#a8fd18d697ea7e2c7fbbf4a2d1a93bfef">HasAuraEffect</a>(42016, 0) &amp;&amp; target-&gt;<a class="code" href="../../da/db7/class_unit.html#abefb328ba7a52fc7c5a16c60855b4d6a">GetMountID</a>())</div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;                target-&gt;<a class="code" href="../../d8/d83/class_object.html#adc7e9b205f35f9894ec9a4f0ec0871f9">SetUInt32Value</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a6d4a274cf53b00cfcea24a3479588031">UNIT_FIELD_MOUNTDISPLAYID</a>, 16314);</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;        }</div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;    }</div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160; </div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d53/class_player.html">Player</a>* targetPlayer = target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>())</div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;    {</div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;        <a class="code" href="../../d0/d7d/_script_mgr_8h.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a>-&gt;AnticheatSetUnderACKmount(targetPlayer);</div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;    }</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_a8fe6a763d72d84ded23cec01c772f7ada9dd2384218d039987359150d147d3263"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada9dd2384218d039987359150d147d3263">MECHANIC_POLYMORPH</a></div><div class="ttdeci">@ MECHANIC_POLYMORPH</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01314">SharedDefines.h:1314</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a6b0ccd5195567a4744da1763b92159e3"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a6b0ccd5195567a4744da1763b92159e3">SPELL_AURA_FLY</a></div><div class="ttdeci">@ SPELL_AURA_FLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00264">SpellAuraDefines.h:264</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a82ebee9e3cf7eaf2ab892a6eb7796288a45b308d91feffe9ebae9560b649b193b"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a45b308d91feffe9ebae9560b649b193b">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_SEND_FOR_CLIENT_MASK</a></div><div class="ttdeci">@ AURA_EFFECT_HANDLE_CHANGE_AMOUNT_SEND_FOR_CLIENT_MASK</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00050">SpellAuraDefines.h:50</a></div></div>
<div class="ttc" id="aclass_unit_html_a8fd18d697ea7e2c7fbbf4a2d1a93bfef"><div class="ttname"><a href="../../da/db7/class_unit.html#a8fd18d697ea7e2c7fbbf4a2d1a93bfef">Unit::HasAuraEffect</a></div><div class="ttdeci">bool HasAuraEffect(uint32 spellId, uint8 effIndex, ObjectGuid caster=ObjectGuid::Empty) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l05157">Unit.cpp:5157</a></div></div>
<div class="ttc" id="aclass_unit_html_abefb328ba7a52fc7c5a16c60855b4d6a"><div class="ttname"><a href="../../da/db7/class_unit.html#abefb328ba7a52fc7c5a16c60855b4d6a">Unit::GetMountID</a></div><div class="ttdeci">uint32 GetMountID() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01649">Unit.h:1649</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l12604">Unit::ApplySpellImmune()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00050">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00446">GetAuraType()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">GetId()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02345">Unit::GetMotionMaster()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01649">Unit::GetMountID()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05157">Unit::HasAuraEffect()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05194">Unit::HasAuraType()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01371">IMMUNITY_MECHANIC</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02447">Unit::IsLevitating()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01314">MECHANIC_POLYMORPH</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00543">MOVE_FLIGHT</a>, <a class="el" href="../../d9/d24/_motion_master_8cpp_source.html#l00548">MotionMaster::MoveFall()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l19711">Unit::SetCanFly()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00641">Object::SetUInt32Value()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00264">SPELL_AURA_FLY</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00270">SPELL_AURA_MOD_INCREASE_MOUNTED_FLIGHT_SPEED</a>, <a class="el" href="../../d0/d7d/_script_mgr_8h_source.html#l02048">sScriptMgr</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00037">TYPEID_UNIT</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00126">UNIT_FIELD_MOUNTDISPLAYID</a>, and <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l13424">Unit::UpdateSpeed()</a>.</p>

</div>
</div>
<a id="a43b0158e5c699baf571fa2a064bf70c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43b0158e5c699baf571fa2a064bf70c9">&#9670;&nbsp;</a></span>HandleAuraModIncreaseHealth()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModIncreaseHealth </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04255">4255</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;{</div>
<div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160; </div>
<div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160; </div>
<div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;    {</div>
<div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdea45d2a58d49ab909fd6a6e78467f7ca0d">UNIT_MOD_HEALTH</a>, <a class="code" href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eea85637bc3b7127fbfc1d35d5e3ca4a95c">TOTAL_VALUE</a>, <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a009a87eeb9cc40ed7017610cbb914b9b">ModifyHealth</a>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;    }</div>
<div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;    {</div>
<div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../df/de2/namespace_g3_d.html#af80d9dbc6fa48c9ff714c7158adb60ae">int32</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#a958172d6051b106e3b3c776e4f9f3952">GetHealth</a>()) &gt; <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>())</div>
<div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a009a87eeb9cc40ed7017610cbb914b9b">ModifyHealth</a>(-<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a6548d4bfff73fad6df63a0bd0d806e2e">SetHealth</a>(1);</div>
<div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdea45d2a58d49ab909fd6a6e78467f7ca0d">UNIT_MOD_HEALTH</a>, <a class="code" href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eea85637bc3b7127fbfc1d35d5e3ca4a95c">TOTAL_VALUE</a>, <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;    }</div>
<div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;}</div>
<div class="ttc" id="aclass_unit_html_a009a87eeb9cc40ed7017610cbb914b9b"><div class="ttname"><a href="../../da/db7/class_unit.html#a009a87eeb9cc40ed7017610cbb914b9b">Unit::ModifyHealth</a></div><div class="ttdeci">int32 ModifyHealth(int32 val)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l13270">Unit.cpp:13270</a></div></div>
<div class="ttc" id="aclass_unit_html_a6548d4bfff73fad6df63a0bd0d806e2e"><div class="ttname"><a href="../../da/db7/class_unit.html#a6548d4bfff73fad6df63a0bd0d806e2e">Unit::SetHealth</a></div><div class="ttdeci">void SetHealth(uint32 val)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l14619">Unit.cpp:14619</a></div></div>
<div class="ttc" id="aclass_unit_html_a958172d6051b106e3b3c776e4f9f3952"><div class="ttname"><a href="../../da/db7/class_unit.html#a958172d6051b106e3b3c776e4f9f3952">Unit::GetHealth</a></div><div class="ttdeci">uint32 GetHealth() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01559">Unit.h:1559</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01559">Unit::GetHealth()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l14345">Unit::HandleStatModifier()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l13270">Unit::ModifyHealth()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l14619">Unit::SetHealth()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00373">TOTAL_VALUE</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00426">UNIT_MOD_HEALTH</a>.</p>

</div>
</div>
<a id="a3286f89b5415bd21a4831285dab7362f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3286f89b5415bd21a4831285dab7362f">&#9670;&nbsp;</a></span>HandleAuraModIncreaseHealthPercent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModIncreaseHealthPercent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04350">4350</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;{</div>
<div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160; </div>
<div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160; </div>
<div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;    <span class="comment">// Unit will keep hp% after MaxHealth being modified if unit is alive.</span></div>
<div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;    <span class="keywordtype">float</span> percent = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a0cb842af542d302eb67b743078e1ac01">GetHealthPct</a>();</div>
<div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdea45d2a58d49ab909fd6a6e78467f7ca0d">UNIT_MOD_HEALTH</a>, <a class="code" href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeab3ddc12b0760eec54f45b90b8671af4d">TOTAL_PCT</a>, <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160; </div>
<div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160;    <span class="comment">// Xinef: pct was rounded down and could &quot;kill&quot; creature by setting its health to 0 making npc zombie</span></div>
<div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5ea3f54af571493f7889220724667189">IsAlive</a>())</div>
<div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> healthAmount = <a class="code" href="../../d9/de9/src_2common_2_utilities_2util_8h.html#ae00607f8188c59ffcea5a3997c0120b0">CalculatePct</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5173c1774b09b42c409bf31280c37d36">GetMaxHealth</a>(), percent))</div>
<div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a6548d4bfff73fad6df63a0bd0d806e2e">SetHealth</a>(healthAmount);</div>
<div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;}</div>
<div class="ttc" id="aclass_unit_html_a0cb842af542d302eb67b743078e1ac01"><div class="ttname"><a href="../../da/db7/class_unit.html#a0cb842af542d302eb67b743078e1ac01">Unit::GetHealthPct</a></div><div class="ttdeci">float GetHealthPct() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01567">Unit.h:1567</a></div></div>
<div class="ttc" id="aclass_unit_html_a5173c1774b09b42c409bf31280c37d36"><div class="ttname"><a href="../../da/db7/class_unit.html#a5173c1774b09b42c409bf31280c37d36">Unit::GetMaxHealth</a></div><div class="ttdeci">uint32 GetMaxHealth() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01560">Unit.h:1560</a></div></div>
<div class="ttc" id="asrc_2common_2_utilities_2util_8h_html_ae00607f8188c59ffcea5a3997c0120b0"><div class="ttname"><a href="../../d9/de9/src_2common_2_utilities_2util_8h.html#ae00607f8188c59ffcea5a3997c0120b0">CalculatePct</a></div><div class="ttdeci">T CalculatePct(T base, U pct)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/src_2common_2_utilities_2util_8h_source.html#l00098">Util.h:98</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../d9/de9/src_2common_2_utilities_2util_8h_source.html#l00098">CalculatePct()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01567">Unit::GetHealthPct()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01560">Unit::GetMaxHealth()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l14345">Unit::HandleStatModifier()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01888">Unit::IsAlive()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l14619">Unit::SetHealth()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00374">TOTAL_PCT</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00426">UNIT_MOD_HEALTH</a>.</p>

</div>
</div>
<a id="a9bea1efab99a42212d85ea5c39921950"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bea1efab99a42212d85ea5c39921950">&#9670;&nbsp;</a></span>HandleAuraModIncreaseMaxHealth()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModIncreaseMaxHealth </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04277">4277</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;{</div>
<div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160; </div>
<div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160; </div>
<div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> oldhealth = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a958172d6051b106e3b3c776e4f9f3952">GetHealth</a>();</div>
<div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;    <span class="keywordtype">double</span> healthPercentage = (double)oldhealth / (<span class="keywordtype">double</span>)target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5173c1774b09b42c409bf31280c37d36">GetMaxHealth</a>();</div>
<div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160; </div>
<div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdea45d2a58d49ab909fd6a6e78467f7ca0d">UNIT_MOD_HEALTH</a>, <a class="code" href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eea85637bc3b7127fbfc1d35d5e3ca4a95c">TOTAL_VALUE</a>, <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160; </div>
<div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;    <span class="comment">// refresh percentage</span></div>
<div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;    <span class="keywordflow">if</span> (oldhealth &gt; 0)</div>
<div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;    {</div>
<div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;        <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> newhealth = <a class="code" href="../../df/de2/namespace_g3_d.html#ae911b90657d7162d47997c702af655a8">uint32</a>(<a class="code" href="../../df/de2/namespace_g3_d.html#a0b6c75c6494813d83a76c9a708da97b2">ceil</a>((<span class="keywordtype">double</span>)target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5173c1774b09b42c409bf31280c37d36">GetMaxHealth</a>() * healthPercentage));</div>
<div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;        <span class="keywordflow">if</span> (newhealth == 0)</div>
<div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;            newhealth = 1;</div>
<div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160; </div>
<div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a6548d4bfff73fad6df63a0bd0d806e2e">SetHealth</a>(newhealth);</div>
<div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;    }</div>
<div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;}</div>
<div class="ttc" id="anamespace_g3_d_html_a0b6c75c6494813d83a76c9a708da97b2"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#a0b6c75c6494813d83a76c9a708da97b2">G3D::ceil</a></div><div class="ttdeci">static Vector3int16 ceil(const Vector3 &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d57/_vector3int16_8cpp_source.html#l00055">Vector3int16.cpp:55</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../d0/d57/_vector3int16_8cpp_source.html#l00055">G3D::ceil()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01559">Unit::GetHealth()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01560">Unit::GetMaxHealth()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l14345">Unit::HandleStatModifier()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l14619">Unit::SetHealth()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00373">TOTAL_VALUE</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00426">UNIT_MOD_HEALTH</a>.</p>

</div>
</div>
<a id="a4390a014a9aa70f4d90303c335a61b7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4390a014a9aa70f4d90303c335a61b7c">&#9670;&nbsp;</a></span>HandleAuraModIncreaseMountedSpeed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModIncreaseMountedSpeed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03255">3255</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;{</div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;    <a class="code" href="../../da/df1/class_aura_effect.html#aaea11ca24fdbdb92e653f59bfd181ff0">HandleAuraModIncreaseSpeed</a>(aurApp, mode, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;}</div>
<div class="ttc" id="aclass_aura_effect_html_aaea11ca24fdbdb92e653f59bfd181ff0"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#aaea11ca24fdbdb92e653f59bfd181ff0">AuraEffect::HandleAuraModIncreaseSpeed</a></div><div class="ttdeci">void HandleAuraModIncreaseSpeed(AuraApplication const *aurApp, uint8 mode, bool apply) const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03240">SpellAuraEffects.cpp:3240</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, and <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03240">HandleAuraModIncreaseSpeed()</a>.</p>

</div>
</div>
<a id="aaea11ca24fdbdb92e653f59bfd181ff0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaea11ca24fdbdb92e653f59bfd181ff0">&#9670;&nbsp;</a></span>HandleAuraModIncreaseSpeed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModIncreaseSpeed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03240">3240</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;{</div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>))</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160; </div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160; </div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#ac85eb152580735addb4e7022ae2b3d4c">UpdateSpeed</a>(<a class="code" href="../../d5/d32/_unit_8h.html#af91f7580a89722b7dc45a018bb46fce4ad231571a48b7742c2a432eb7a8a849de">MOVE_RUN</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160; </div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d53/class_player.html">Player</a>* targetPlayer = target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>())</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;    {</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;        <a class="code" href="../../d0/d7d/_script_mgr_8h.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a>-&gt;AnticheatSetUnderACKmount(targetPlayer);</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;    }</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00538">MOVE_RUN</a>, <a class="el" href="../../d0/d7d/_script_mgr_8h_source.html#l02048">sScriptMgr</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, and <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l13424">Unit::UpdateSpeed()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03255">HandleAuraModIncreaseMountedSpeed()</a>.</p>

</div>
</div>
<a id="a9b5fb8fd52b54a9fc55491d48a62df4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b5fb8fd52b54a9fc55491d48a62df4f">&#9670;&nbsp;</a></span>HandleAuraModIncreaseSwimSpeed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModIncreaseSwimSpeed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03300">3300</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;{</div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>))</div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160; </div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160; </div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#ac85eb152580735addb4e7022ae2b3d4c">UpdateSpeed</a>(<a class="code" href="../../d5/d32/_unit_8h.html#af91f7580a89722b7dc45a018bb46fce4a611a24e7db53ef46584dcfb70d8343e5">MOVE_SWIM</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160; </div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d53/class_player.html">Player</a>* targetPlayer = target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>())</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;    {</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;        <a class="code" href="../../d0/d7d/_script_mgr_8h.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a>-&gt;AnticheatSetUnderACKmount(targetPlayer);</div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;    }</div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00540">MOVE_SWIM</a>, <a class="el" href="../../d0/d7d/_script_mgr_8h_source.html#l02048">sScriptMgr</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, and <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l13424">Unit::UpdateSpeed()</a>.</p>

</div>
</div>
<a id="af48521ad2be2b43241c6bc8ca6274bd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af48521ad2be2b43241c6bc8ca6274bd6">&#9670;&nbsp;</a></span>HandleAuraModPacify()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModPacify </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02612">2612</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;{</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160; </div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160; </div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;    {</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a79a7a80acdec46961b4d8aaead4ae631">SetFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881aab4868b631f1cfaf30faee627f7c9dbf">UNIT_FIELD_FLAGS</a>, <a class="code" href="../../d5/d32/_unit_8h.html#afaf72688a238d4ba16ba2ae1444cd552a6fe41521d08dba6583ba7bb9d45cef82">UNIT_FLAG_PACIFIED</a>);</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;        <span class="comment">//target-&gt;AttackStop(); // pussywizard: wtf? why having this flag prevents from being in combat? it should just prevent melee attack</span></div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;    }</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;    {</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;        <span class="comment">// do not remove unit flag if there are more than this auraEffect of that kind on unit on unit</span></div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a6c38d7d76b8741d45023a0ccc3c0f9b3">SPELL_AURA_MOD_PACIFY</a>) || target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799aab7e99142d3a87d93f8586e2a9cd81c8">SPELL_AURA_MOD_PACIFY_SILENCE</a>))</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a7e764fbd4b7eca84f80e36e900bca7d3">RemoveFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881aab4868b631f1cfaf30faee627f7c9dbf">UNIT_FIELD_FLAGS</a>, <a class="code" href="../../d5/d32/_unit_8h.html#afaf72688a238d4ba16ba2ae1444cd552a6fe41521d08dba6583ba7bb9d45cef82">UNIT_FLAG_PACIFIED</a>);</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;    }</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;}</div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a6c38d7d76b8741d45023a0ccc3c0f9b3"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a6c38d7d76b8741d45023a0ccc3c0f9b3">SPELL_AURA_MOD_PACIFY</a></div><div class="ttdeci">@ SPELL_AURA_MOD_PACIFY</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00088">SpellAuraDefines.h:88</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799aab7e99142d3a87d93f8586e2a9cd81c8"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799aab7e99142d3a87d93f8586e2a9cd81c8">SPELL_AURA_MOD_PACIFY_SILENCE</a></div><div class="ttdeci">@ SPELL_AURA_MOD_PACIFY_SILENCE</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00123">SpellAuraDefines.h:123</a></div></div>
<div class="ttc" id="a_unit_8h_html_afaf72688a238d4ba16ba2ae1444cd552a6fe41521d08dba6583ba7bb9d45cef82"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#afaf72688a238d4ba16ba2ae1444cd552a6fe41521d08dba6583ba7bb9d45cef82">UNIT_FLAG_PACIFIED</a></div><div class="ttdeci">@ UNIT_FLAG_PACIFIED</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00623">Unit.h:623</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05194">Unit::HasAuraType()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00851">Object::RemoveFlag()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00836">Object::SetFlag()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00088">SPELL_AURA_MOD_PACIFY</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00123">SPELL_AURA_MOD_PACIFY_SILENCE</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00117">UNIT_FIELD_FLAGS</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00623">UNIT_FLAG_PACIFIED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02633">HandleAuraModPacifyAndSilence()</a>.</p>

</div>
</div>
<a id="ae3645d469d5dfd1240fb9f9af3a83920"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3645d469d5dfd1240fb9f9af3a83920">&#9670;&nbsp;</a></span>HandleAuraModPacifyAndSilence()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModPacifyAndSilence </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02633">2633</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;{</div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160; </div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160; </div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>))</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;    {</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;        <span class="comment">// do not remove unit flag if there are more than this auraEffect of that kind on unit on unit</span></div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799aab7e99142d3a87d93f8586e2a9cd81c8">SPELL_AURA_MOD_PACIFY_SILENCE</a>))</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;    }</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;    <a class="code" href="../../da/df1/class_aura_effect.html#af48521ad2be2b43241c6bc8ca6274bd6">HandleAuraModPacify</a>(aurApp, mode, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;    <a class="code" href="../../da/df1/class_aura_effect.html#aca9f7031c1091b23080c4c8d827fa0e3">HandleAuraModSilence</a>(aurApp, mode, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;}</div>
<div class="ttc" id="aclass_aura_effect_html_aca9f7031c1091b23080c4c8d827fa0e3"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#aca9f7031c1091b23080c4c8d827fa0e3">AuraEffect::HandleAuraModSilence</a></div><div class="ttdeci">void HandleAuraModSilence(AuraApplication const *aurApp, uint8 mode, bool apply) const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02583">SpellAuraEffects.cpp:2583</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_af48521ad2be2b43241c6bc8ca6274bd6"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#af48521ad2be2b43241c6bc8ca6274bd6">AuraEffect::HandleAuraModPacify</a></div><div class="ttdeci">void HandleAuraModPacify(AuraApplication const *aurApp, uint8 mode, bool apply) const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02612">SpellAuraEffects.cpp:2612</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02612">HandleAuraModPacify()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02583">HandleAuraModSilence()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05194">Unit::HasAuraType()</a>, and <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00123">SPELL_AURA_MOD_PACIFY_SILENCE</a>.</p>

</div>
</div>
<a id="abd6a595444acecc12c84820cc3f86865"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd6a595444acecc12c84820cc3f86865">&#9670;&nbsp;</a></span>HandleAuraModParryPercent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModParryPercent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04381">4381</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;{</div>
<div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160; </div>
<div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160; </div>
<div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160; </div>
<div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;    <span class="keywordflow">if</span> (!target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a25aedfffc34135ef7ac02f943a191f11">CanParry</a>())</div>
<div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a356b43d7f7437f6fdf6169aee700b94e">SetCanParry</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a0239b9a936e4e891a79b514f06d2b21c">UpdateParryPercentage</a>();</div>
<div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;}</div>
<div class="ttc" id="aclass_player_html_a0239b9a936e4e891a79b514f06d2b21c"><div class="ttname"><a href="../../d8/d53/class_player.html#a0239b9a936e4e891a79b514f06d2b21c">Player::UpdateParryPercentage</a></div><div class="ttdeci">void UpdateParryPercentage()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d07/_stat_system_8cpp_source.html#l00708">StatSystem.cpp:708</a></div></div>
<div class="ttc" id="aclass_player_html_a25aedfffc34135ef7ac02f943a191f11"><div class="ttname"><a href="../../d8/d53/class_player.html#a25aedfffc34135ef7ac02f943a191f11">Player::CanParry</a></div><div class="ttdeci">bool CanParry() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l02123">Player.h:2123</a></div></div>
<div class="ttc" id="aclass_player_html_a356b43d7f7437f6fdf6169aee700b94e"><div class="ttname"><a href="../../d8/d53/class_player.html#a356b43d7f7437f6fdf6169aee700b94e">Player::SetCanParry</a></div><div class="ttdeci">void SetCanParry(bool value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/_player_8cpp_source.html#l12315">Player.cpp:12315</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l02123">Player::CanParry()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l12315">Player::SetCanParry()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../df/d07/_stat_system_8cpp_source.html#l00708">Player::UpdateParryPercentage()</a>.</p>

</div>
</div>
<a id="a3e9174d203a34abc924e9a58efb2473c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e9174d203a34abc924e9a58efb2473c">&#9670;&nbsp;</a></span>HandleAuraModPetTalentsPoints()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModPetTalentsPoints </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02769">2769</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;{</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>))</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160; </div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160; </div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160; </div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;    <span class="comment">// Recalculate pet talent points</span></div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/d98/class_pet.html">Pet</a>* pet = target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a5eef7fef24e4a9269d1ee834bc2bd501">GetPet</a>())</div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;        pet-&gt;InitTalentForLevel();</div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l08649">Player::GetPet()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, and <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>.</p>

</div>
</div>
<a id="a3911ef5ef63aafac04aaae3a389fb3c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3911ef5ef63aafac04aaae3a389fb3c9">&#9670;&nbsp;</a></span>HandleAuraModRangedAttackPower()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModRangedAttackPower </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04679">4679</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04680"></a><span class="lineno"> 4680</span>&#160;{</div>
<div class="line"><a name="l04681"></a><span class="lineno"> 4681</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04682"></a><span class="lineno"> 4682</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04683"></a><span class="lineno"> 4683</span>&#160; </div>
<div class="line"><a name="l04684"></a><span class="lineno"> 4684</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04685"></a><span class="lineno"> 4685</span>&#160; </div>
<div class="line"><a name="l04686"></a><span class="lineno"> 4686</span>&#160;    <span class="keywordflow">if</span> ((target-&gt;<a class="code" href="../../da/db7/class_unit.html#abbbd9cc147469bc7f35075539bdf55a0">getClassMask</a>() &amp; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3002b6959a1e2bc149144b9ae9a9728c">CLASSMASK_WAND_USERS</a>) != 0)</div>
<div class="line"><a name="l04687"></a><span class="lineno"> 4687</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04688"></a><span class="lineno"> 4688</span>&#160; </div>
<div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdeafac2a3c286aff376e7cbb8ed2124534c">UNIT_MOD_ATTACK_POWER_RANGED</a>, <a class="code" href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eea85637bc3b7127fbfc1d35d5e3ca4a95c">TOTAL_VALUE</a>, <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_a3002b6959a1e2bc149144b9ae9a9728c"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a3002b6959a1e2bc149144b9ae9a9728c">CLASSMASK_WAND_USERS</a></div><div class="ttdeci">#define CLASSMASK_WAND_USERS</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00146">SharedDefines.h:146</a></div></div>
<div class="ttc" id="a_unit_8h_html_a4c5336cd4be5f0162bd4874b0a1e5bdeafac2a3c286aff376e7cbb8ed2124534c"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdeafac2a3c286aff376e7cbb8ed2124534c">UNIT_MOD_ATTACK_POWER_RANGED</a></div><div class="ttdeci">@ UNIT_MOD_ATTACK_POWER_RANGED</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00442">Unit.h:442</a></div></div>
<div class="ttc" id="aclass_unit_html_abbbd9cc147469bc7f35075539bdf55a0"><div class="ttname"><a href="../../da/db7/class_unit.html#abbbd9cc147469bc7f35075539bdf55a0">Unit::getClassMask</a></div><div class="ttdeci">uint32 getClassMask() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01546">Unit.h:1546</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00146">CLASSMASK_WAND_USERS</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01546">Unit::getClassMask()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l14345">Unit::HandleStatModifier()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00373">TOTAL_VALUE</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00442">UNIT_MOD_ATTACK_POWER_RANGED</a>.</p>

</div>
</div>
<a id="a1a3ec4c7f1ca6b978189280b4f2424a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a3ec4c7f1ca6b978189280b4f2424a7">&#9670;&nbsp;</a></span>HandleAuraModRangedAttackPowerOfStatPercent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModRangedAttackPowerOfStatPercent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04717">4717</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04718"></a><span class="lineno"> 4718</span>&#160;{</div>
<div class="line"><a name="l04719"></a><span class="lineno"> 4719</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04720"></a><span class="lineno"> 4720</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04721"></a><span class="lineno"> 4721</span>&#160; </div>
<div class="line"><a name="l04722"></a><span class="lineno"> 4722</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04723"></a><span class="lineno"> 4723</span>&#160; </div>
<div class="line"><a name="l04724"></a><span class="lineno"> 4724</span>&#160;    <span class="comment">// Recalculate bonus</span></div>
<div class="line"><a name="l04725"></a><span class="lineno"> 4725</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a> &amp;&amp; !(target-&gt;<a class="code" href="../../da/db7/class_unit.html#abbbd9cc147469bc7f35075539bdf55a0">getClassMask</a>() &amp; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3002b6959a1e2bc149144b9ae9a9728c">CLASSMASK_WAND_USERS</a>))</div>
<div class="line"><a name="l04726"></a><span class="lineno"> 4726</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#af38c592a982085b6385131f9c691eca7">UpdateAttackPowerAndDamage</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l04727"></a><span class="lineno"> 4727</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00146">CLASSMASK_WAND_USERS</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01546">Unit::getClassMask()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../df/d07/_stat_system_8cpp_source.html#l00323">Player::UpdateAttackPowerAndDamage()</a>.</p>

</div>
</div>
<a id="a280de8cb7a520bb9b216b9735a2dca32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a280de8cb7a520bb9b216b9735a2dca32">&#9670;&nbsp;</a></span>HandleAuraModRangedAttackPowerPercent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModRangedAttackPowerPercent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04703">4703</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160;{</div>
<div class="line"><a name="l04705"></a><span class="lineno"> 4705</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04706"></a><span class="lineno"> 4706</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04707"></a><span class="lineno"> 4707</span>&#160; </div>
<div class="line"><a name="l04708"></a><span class="lineno"> 4708</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04709"></a><span class="lineno"> 4709</span>&#160; </div>
<div class="line"><a name="l04710"></a><span class="lineno"> 4710</span>&#160;    <span class="keywordflow">if</span> ((target-&gt;<a class="code" href="../../da/db7/class_unit.html#abbbd9cc147469bc7f35075539bdf55a0">getClassMask</a>() &amp; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3002b6959a1e2bc149144b9ae9a9728c">CLASSMASK_WAND_USERS</a>) != 0)</div>
<div class="line"><a name="l04711"></a><span class="lineno"> 4711</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04712"></a><span class="lineno"> 4712</span>&#160; </div>
<div class="line"><a name="l04713"></a><span class="lineno"> 4713</span>&#160;    <span class="comment">//UNIT_FIELD_RANGED_ATTACK_POWER_MULTIPLIER = multiplier - 1</span></div>
<div class="line"><a name="l04714"></a><span class="lineno"> 4714</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdeafac2a3c286aff376e7cbb8ed2124534c">UNIT_MOD_ATTACK_POWER_RANGED</a>, <a class="code" href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeab3ddc12b0760eec54f45b90b8671af4d">TOTAL_PCT</a>, <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04715"></a><span class="lineno"> 4715</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00146">CLASSMASK_WAND_USERS</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01546">Unit::getClassMask()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l14345">Unit::HandleStatModifier()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00374">TOTAL_PCT</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00442">UNIT_MOD_ATTACK_POWER_RANGED</a>.</p>

</div>
</div>
<a id="a63f78f6483abbd00e0f55ef8ea938bbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63f78f6483abbd00e0f55ef8ea938bbe">&#9670;&nbsp;</a></span>HandleAuraModRangedHaste()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModRangedHaste </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04607">4607</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04608"></a><span class="lineno"> 4608</span>&#160;{</div>
<div class="line"><a name="l04609"></a><span class="lineno"> 4609</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04610"></a><span class="lineno"> 4610</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160; </div>
<div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160; </div>
<div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a60d7ad5197284d3caaed380dfc740ff0">ApplyAttackTimePercentMod</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aaa2557af152c5f2b27bbf59915cbd1670">RANGED_ATTACK</a>, (<span class="keywordtype">float</span>)<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160;}</div>
<div class="ttc" id="aclass_unit_html_a60d7ad5197284d3caaed380dfc740ff0"><div class="ttname"><a href="../../da/db7/class_unit.html#a60d7ad5197284d3caaed380dfc740ff0">Unit::ApplyAttackTimePercentMod</a></div><div class="ttdeci">void ApplyAttackTimePercentMod(WeaponAttackType att, float val, bool apply)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l16263">Unit.cpp:16263</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16263">Unit::ApplyAttackTimePercentMod()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00557">RANGED_ATTACK</a>.</p>

</div>
</div>
<a id="adbf214d5d4e3a9926d7809234f979ca4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbf214d5d4e3a9926d7809234f979ca4">&#9670;&nbsp;</a></span>HandleAuraModRegenInterrupt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModRegenInterrupt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04423">4423</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;{</div>
<div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;    <a class="code" href="../../da/df1/class_aura_effect.html#accc046bd1b9adb7c8b60be792f70e814">HandleModManaRegen</a>(aurApp, mode, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;}</div>
<div class="ttc" id="aclass_aura_effect_html_accc046bd1b9adb7c8b60be792f70e814"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#accc046bd1b9adb7c8b60be792f70e814">AuraEffect::HandleModManaRegen</a></div><div class="ttdeci">void HandleModManaRegen(AuraApplication const *aurApp, uint8 mode, bool apply) const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04241">SpellAuraEffects.cpp:4241</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, and <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04241">HandleModManaRegen()</a>.</p>

</div>
</div>
<a id="adf85e6ba3ad0ec021f53683452002782"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf85e6ba3ad0ec021f53683452002782">&#9670;&nbsp;</a></span>HandleAuraModResistance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModResistance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03890">3890</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;{</div>
<div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160; </div>
<div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160; </div>
<div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../d9/df6/my__global_8h.html#a1b956fe1df85f3c132b21edb4e116458">int8</a> <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a> = <a class="code" href="../../df/d0b/_shared_defines_8h.html#a25263e3e283b54e5280d5af1fd16da4ca0599bcfa52d292c58e15ac0f081bb5af">SPELL_SCHOOL_NORMAL</a>; <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a> &lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3d2e33bfddb1e3c28157eb6d136bfd28">MAX_SPELL_SCHOOL</a>; <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>++)</div>
<div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;    {</div>
<div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; <a class="code" href="../../df/de2/namespace_g3_d.html#af80d9dbc6fa48c9ff714c7158adb60ae">int32</a>(1 &lt;&lt; <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>))</div>
<div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;        {</div>
<div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bde">UnitMods</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdea2ca084c2061b3ebd16a486bd8e64a0d2">UNIT_MOD_RESISTANCE_START</a> + <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>), <a class="code" href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eea85637bc3b7127fbfc1d35d5e3ca4a95c">TOTAL_VALUE</a>, <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;            <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a> || target-&gt;<a class="code" href="../../da/db7/class_unit.html#a4ad2fdcc45e2c3c85ad59ff49268b58c">IsPet</a>())</div>
<div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#af2f5b6a3bb1be04e3b09e8a96e744d34">ApplyResistanceBuffModsMod</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a25263e3e283b54e5280d5af1fd16da4c">SpellSchools</a>(<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>), <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() &gt; 0, (<span class="keywordtype">float</span>)<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;        }</div>
<div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;    }</div>
<div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_a25263e3e283b54e5280d5af1fd16da4c"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a25263e3e283b54e5280d5af1fd16da4c">SpellSchools</a></div><div class="ttdeci">SpellSchools</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00253">SharedDefines.h:254</a></div></div>
<div class="ttc" id="aclass_unit_html_af2f5b6a3bb1be04e3b09e8a96e744d34"><div class="ttname"><a href="../../da/db7/class_unit.html#af2f5b6a3bb1be04e3b09e8a96e744d34">Unit::ApplyResistanceBuffModsMod</a></div><div class="ttdeci">void ApplyResistanceBuffModsMod(SpellSchools school, bool positive, float val, bool apply)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l02106">Unit.h:2106</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02106">Unit::ApplyResistanceBuffModsMod()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l14345">Unit::HandleStatModifier()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01534">Unit::IsPet()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00264">MAX_SPELL_SCHOOL</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00255">SPELL_SCHOOL_NORMAL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00373">TOTAL_VALUE</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00450">UNIT_MOD_RESISTANCE_START</a>, and <a class="el" href="../../d8/d14/_vector2int16_8h_source.html#l00037">G3D::x</a>.</p>

</div>
</div>
<a id="a3412eb30c1a4bd66b8cca040fc9ef6d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3412eb30c1a4bd66b8cca040fc9ef6d1">&#9670;&nbsp;</a></span>HandleAuraModResistanceExclusive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModResistanceExclusive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03867">3867</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;{</div>
<div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160; </div>
<div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160; </div>
<div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../d9/df6/my__global_8h.html#a1b956fe1df85f3c132b21edb4e116458">int8</a> <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a> = <a class="code" href="../../df/d0b/_shared_defines_8h.html#a25263e3e283b54e5280d5af1fd16da4ca0599bcfa52d292c58e15ac0f081bb5af">SPELL_SCHOOL_NORMAL</a>; <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a> &lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3d2e33bfddb1e3c28157eb6d136bfd28">MAX_SPELL_SCHOOL</a>; <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>++)</div>
<div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;    {</div>
<div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; <a class="code" href="../../df/de2/namespace_g3_d.html#af80d9dbc6fa48c9ff714c7158adb60ae">int32</a>(1 &lt;&lt; <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>))</div>
<div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;        {</div>
<div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;            <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> amount = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a0b11b9c93b383ee00d362c72e4ba7e8e">GetMaxPositiveAuraModifierByMiscMask</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a5d113c39c499d21187268b3f0200371c">SPELL_AURA_MOD_RESISTANCE_EXCLUSIVE</a>, 1 &lt;&lt; <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;            <span class="keywordflow">if</span> (amount &lt; <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>())</div>
<div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;            {</div>
<div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;                <span class="keywordtype">float</span> <a class="code" href="../../d7/d71/classvalue.html">value</a> = float(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() - amount);</div>
<div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bde">UnitMods</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdea2ca084c2061b3ebd16a486bd8e64a0d2">UNIT_MOD_RESISTANCE_START</a> + <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>), <a class="code" href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eea6e506f81d8257be9b031ecaf9d9922d1">BASE_VALUE</a>, <a class="code" href="../../d7/d71/classvalue.html">value</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;                <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#af2f5b6a3bb1be04e3b09e8a96e744d34">ApplyResistanceBuffModsMod</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a25263e3e283b54e5280d5af1fd16da4c">SpellSchools</a>(<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>), aurApp-&gt;IsPositive(), <a class="code" href="../../d7/d71/classvalue.html">value</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;            }</div>
<div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;        }</div>
<div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;    }</div>
<div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;}</div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a5d113c39c499d21187268b3f0200371c"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a5d113c39c499d21187268b3f0200371c">SPELL_AURA_MOD_RESISTANCE_EXCLUSIVE</a></div><div class="ttdeci">@ SPELL_AURA_MOD_RESISTANCE_EXCLUSIVE</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00206">SpellAuraDefines.h:206</a></div></div>
<div class="ttc" id="a_unit_8h_html_aa21edecdaa2e077b2b87bbe5f2b2e7eea6e506f81d8257be9b031ecaf9d9922d1"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eea6e506f81d8257be9b031ecaf9d9922d1">BASE_VALUE</a></div><div class="ttdeci">@ BASE_VALUE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00371">Unit.h:371</a></div></div>
<div class="ttc" id="aclass_unit_html_a0b11b9c93b383ee00d362c72e4ba7e8e"><div class="ttname"><a href="../../da/db7/class_unit.html#a0b11b9c93b383ee00d362c72e4ba7e8e">Unit::GetMaxPositiveAuraModifierByMiscMask</a></div><div class="ttdeci">int32 GetMaxPositiveAuraModifierByMiscMask(AuraType auratype, uint32 misc_mask, const AuraEffect *except=nullptr) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l05462">Unit.cpp:5462</a></div></div>
<div class="ttc" id="aclassvalue_html"><div class="ttname"><a href="../../d7/d71/classvalue.html">value</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d71/fmt_2include_2fmt_2core_8h_source.html#l01120">core.h:1120</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02106">Unit::ApplyResistanceBuffModsMod()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00371">BASE_VALUE</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05462">Unit::GetMaxPositiveAuraModifierByMiscMask()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l14345">Unit::HandleStatModifier()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00068">AuraApplication::IsPositive()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00264">MAX_SPELL_SCHOOL</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00206">SPELL_AURA_MOD_RESISTANCE_EXCLUSIVE</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00255">SPELL_SCHOOL_NORMAL</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00450">UNIT_MOD_RESISTANCE_START</a>, and <a class="el" href="../../d8/d14/_vector2int16_8h_source.html#l00037">G3D::x</a>.</p>

</div>
</div>
<a id="a501803cfbe4e5b568eb98e32b2c26186"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a501803cfbe4e5b568eb98e32b2c26186">&#9670;&nbsp;</a></span>HandleAuraModResistenceOfStatPercent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModResistenceOfStatPercent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04179">4179</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;{</div>
<div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160; </div>
<div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160; </div>
<div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160; </div>
<div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() != <a class="code" href="../../df/d0b/_shared_defines_8h.html#aff6913cfd69489c107a071be9ec2ec8fa12667dd3f55738c93e1ddb1351779b42">SPELL_SCHOOL_MASK_NORMAL</a>)</div>
<div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;    {</div>
<div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;        <span class="comment">// support required adding replace UpdateArmor by loop by UpdateResistence at intellect update</span></div>
<div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;        <span class="comment">// and include in UpdateResistence same code as in UpdateArmor for aura mod apply.</span></div>
<div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;        <a class="code" href="../../d3/d07/src_2common_2_logging_2_log_8h.html#a43832e3fa8508deb4ce43e520005fcd9">LOG_ERROR</a>(<span class="stringliteral">&quot;spells.aura.effect&quot;</span>, <span class="stringliteral">&quot;Aura SPELL_AURA_MOD_RESISTANCE_OF_STAT_PERCENT(182) does not work for non-armor type resistances!&quot;</span>);</div>
<div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;    }</div>
<div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160; </div>
<div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;    <span class="comment">// Recalculate Armor</span></div>
<div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a8bce30ad2c60dd476b6b48e5a33d2157">UpdateArmor</a>();</div>
<div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;}</div>
<div class="ttc" id="aclass_unit_html_a8bce30ad2c60dd476b6b48e5a33d2157"><div class="ttname"><a href="../../da/db7/class_unit.html#a8bce30ad2c60dd476b6b48e5a33d2157">Unit::UpdateArmor</a></div><div class="ttdeci">virtual void UpdateArmor()=0</div></div>
<div class="ttc" id="asrc_2common_2_logging_2_log_8h_html_a43832e3fa8508deb4ce43e520005fcd9"><div class="ttname"><a href="../../d3/d07/src_2common_2_logging_2_log_8h.html#a43832e3fa8508deb4ce43e520005fcd9">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR(filterType__,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d07/src_2common_2_logging_2_log_8h_source.html#l00261">Log.h:261</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d3/d07/src_2common_2_logging_2_log_8h_source.html#l00261">LOG_ERROR</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00269">SPELL_SCHOOL_MASK_NORMAL</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../da/db7/class_unit.html#a8bce30ad2c60dd476b6b48e5a33d2157">Unit::UpdateArmor()</a>.</p>

</div>
</div>
<a id="ab21864f1999f7797e2287c722c6f0f83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab21864f1999f7797e2287c722c6f0f83">&#9670;&nbsp;</a></span>HandleAuraModRoot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModRoot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03061">3061</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;{</div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160; </div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160; </div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a2903449b4183e13866c6e98d77578887">SetControlled</a>(<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>, <a class="code" href="../../d5/d32/_unit_8h.html#ae51d2ecb71f7a5cb3882982a622c9544a50d4f70d273dc4674d4f56fcab462a14">UNIT_STATE_ROOT</a>);</div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;}</div>
<div class="ttc" id="a_unit_8h_html_ae51d2ecb71f7a5cb3882982a622c9544a50d4f70d273dc4674d4f56fcab462a14"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ae51d2ecb71f7a5cb3882982a622c9544a50d4f70d273dc4674d4f56fcab462a14">UNIT_STATE_ROOT</a></div><div class="ttdeci">@ UNIT_STATE_ROOT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00494">Unit.h:494</a></div></div>
<div class="ttc" id="aclass_unit_html_a2903449b4183e13866c6e98d77578887"><div class="ttname"><a href="../../da/db7/class_unit.html#a2903449b4183e13866c6e98d77578887">Unit::SetControlled</a></div><div class="ttdeci">void SetControlled(bool apply, UnitState state)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l17189">Unit.cpp:17189</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l17189">Unit::SetControlled()</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00494">UNIT_STATE_ROOT</a>.</p>

</div>
</div>
<a id="aad290467c397f70ff3ca4c24961a05fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad290467c397f70ff3ca4c24961a05fb">&#9670;&nbsp;</a></span>HandleAuraModScale()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModScale </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02334">2334</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;{</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a45b308d91feffe9ebae9560b649b193b">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160; </div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160; </div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;    <span class="keywordtype">float</span> scale = target-&gt;<a class="code" href="../../d8/d83/class_object.html#a1ca2dc2f577c6c2b99f747cc08646090">GetObjectScale</a>();</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;    <a class="code" href="../../d9/de9/src_2common_2_utilities_2util_8h.html#adcb1f2b25980bd4c71cb160030213f96">ApplyPercentModFloatVar</a>(scale, <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;    target-&gt;<a class="code" href="../../d8/d83/class_object.html#ad951343e568f25e4db54e64d19c964dd">SetObjectScale</a>(scale);</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;}</div>
<div class="ttc" id="aclass_object_html_a1ca2dc2f577c6c2b99f747cc08646090"><div class="ttname"><a href="../../d8/d83/class_object.html#a1ca2dc2f577c6c2b99f747cc08646090">Object::GetObjectScale</a></div><div class="ttdeci">float GetObjectScale() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d30/_object_8h_source.html#l00104">Object.h:104</a></div></div>
<div class="ttc" id="aclass_object_html_ad951343e568f25e4db54e64d19c964dd"><div class="ttname"><a href="../../d8/d83/class_object.html#ad951343e568f25e4db54e64d19c964dd">Object::SetObjectScale</a></div><div class="ttdeci">virtual void SetObjectScale(float scale)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d30/_object_8h_source.html#l00105">Object.h:105</a></div></div>
<div class="ttc" id="asrc_2common_2_utilities_2util_8h_html_adcb1f2b25980bd4c71cb160030213f96"><div class="ttname"><a href="../../d9/de9/src_2common_2_utilities_2util_8h.html#adcb1f2b25980bd4c71cb160030213f96">ApplyPercentModFloatVar</a></div><div class="ttdeci">void ApplyPercentModFloatVar(float &amp;var, float val, bool apply)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/src_2common_2_utilities_2util_8h_source.html#l00087">Util.h:87</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d9/de9/src_2common_2_utilities_2util_8h_source.html#l00087">ApplyPercentModFloatVar()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00050">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00104">Object::GetObjectScale()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, and <a class="el" href="../../df/d30/_object_8h_source.html#l00105">Object::SetObjectScale()</a>.</p>

</div>
</div>
<a id="a45ef0e9663bb6e5c2fe8d1d90ac670a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45ef0e9663bb6e5c2fe8d1d90ac670a1">&#9670;&nbsp;</a></span>HandleAuraModSchoolImmunity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModSchoolImmunity </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03780">3780</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;{</div>
<div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160; </div>
<div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160; </div>
<div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ac7e02328e2b7e12ee79becbf777f8b3e">IMMUNITY_SCHOOL</a>, <a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>(), (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>));</div>
<div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160; </div>
<div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;Mechanic == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adaa823d24ef2d29559df9cd8de9f0c071a">MECHANIC_BANISH</a>)</div>
<div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;    {</div>
<div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a752f5f516257bfdf139098c29a55c466">AddUnitState</a>(<a class="code" href="../../d5/d32/_unit_8h.html#ae51d2ecb71f7a5cb3882982a622c9544a7c4ae74029844364315885e02df35505">UNIT_STATE_ISOLATED</a>);</div>
<div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;        {</div>
<div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;            <span class="keywordtype">bool</span> banishFound = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;            <a class="code" href="../../da/db7/class_unit.html#adcdd87d0c137619dfc869536c1315dd7">Unit::AuraEffectList</a> <span class="keyword">const</span>&amp; banishAuras = target-&gt;<a class="code" href="../../da/db7/class_unit.html#af00ac6c4dc7e639ac646fdafef336e85">GetAuraEffectsByType</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>());</div>
<div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;            <span class="keywordflow">for</span> (Unit::AuraEffectList::const_iterator i = banishAuras.begin(); i != banishAuras.end(); ++i)</div>
<div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;                <span class="keywordflow">if</span> ((*i)-&gt;GetSpellInfo()-&gt;Mechanic == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adaa823d24ef2d29559df9cd8de9f0c071a">MECHANIC_BANISH</a>)</div>
<div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;                {</div>
<div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;                    banishFound = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;                }</div>
<div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;            <span class="keywordflow">if</span> (!banishFound)</div>
<div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#a0234fee1df2999bda3ca22449164f7b5">ClearUnitState</a>(<a class="code" href="../../d5/d32/_unit_8h.html#ae51d2ecb71f7a5cb3882982a622c9544a7c4ae74029844364315885e02df35505">UNIT_STATE_ISOLATED</a>);</div>
<div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;        }</div>
<div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;    }</div>
<div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160; </div>
<div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a> &amp;&amp; <a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == <a class="code" href="../../df/d0b/_shared_defines_8h.html#aff6913cfd69489c107a071be9ec2ec8fa12667dd3f55738c93e1ddb1351779b42">SPELL_SCHOOL_MASK_NORMAL</a>)</div>
<div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a2be941a27d14de6da7676c6fdbd37bb9">RemoveAurasWithInterruptFlags</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a0709fc3ab848cf1b8b4853813b8fe011a61b4509cc6643cd80da8b6c065d45f4a">AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</a>);</div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160; </div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;    <span class="comment">// remove all flag auras (they are positive, but they must be removed when you are immune)</span></div>
<div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;HasAttribute(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a638f8f550e23b2e3180b481bb3f38076ab2ba4cd294111dc378e33055074250be">SPELL_ATTR1_IMMUNITY_PURGES_EFFECT</a>)</div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;            &amp;&amp; <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;HasAttribute(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a583cc1b9a8909370e4d51a890d897668aeaca30d371d54c1aabf98fc58134ee62">SPELL_ATTR2_FAIL_ON_ALL_TARGETS_IMMUNE</a>))</div>
<div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a2be941a27d14de6da7676c6fdbd37bb9">RemoveAurasWithInterruptFlags</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a0709fc3ab848cf1b8b4853813b8fe011a61b4509cc6643cd80da8b6c065d45f4a">AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</a>);</div>
<div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160; </div>
<div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;    <span class="comment">// TODO: optimalize this cycle - use RemoveAurasWithInterruptFlags call or something else</span></div>
<div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;            &amp;&amp; <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;HasAttribute(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a638f8f550e23b2e3180b481bb3f38076ab2ba4cd294111dc378e33055074250be">SPELL_ATTR1_IMMUNITY_PURGES_EFFECT</a>)</div>
<div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;            &amp;&amp; <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;IsPositive())                       <span class="comment">//Only positive immunity removes auras</span></div>
<div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;    {</div>
<div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;        <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> school_mask = <a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>();</div>
<div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;        <a class="code" href="../../da/db7/class_unit.html#a32f102f941cf4a53fe17e7f7e957150a">Unit::AuraApplicationMap</a>&amp; Auras = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a60981060c43937360baec0ea09df4ff9">GetAppliedAuras</a>();</div>
<div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;        <span class="keywordflow">for</span> (Unit::AuraApplicationMap::iterator iter = Auras.begin(); iter != Auras.end();)</div>
<div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;        {</div>
<div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;            <a class="code" href="../../d4/d7d/class_spell_info.html">SpellInfo</a> <span class="keyword">const</span>* spell = iter-&gt;second-&gt;GetBase()-&gt;GetSpellInfo();</div>
<div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;            <span class="keywordflow">if</span> ((spell-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a8dc618d81b8658f72b686f8ac9e90829">GetSchoolMask</a>() &amp; school_mask)<span class="comment">//Check for school mask</span></div>
<div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;                    &amp;&amp; <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;CanDispelAura(spell)</div>
<div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;                    &amp;&amp; !iter-&gt;second-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#adef74790281b92d72ac2c2118a665096">IsPositive</a>()          <span class="comment">//Don&#39;t remove positive spells</span></div>
<div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;                    &amp;&amp; spell-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a49bc14059c2bd3785231c52e0d54d382">Id</a> != <a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>())               <span class="comment">//Don&#39;t remove self</span></div>
<div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;            {</div>
<div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1be09c524dfdd2c3538f2ae977c58399">RemoveAura</a>(iter);</div>
<div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;            }</div>
<div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;                ++iter;</div>
<div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;        }</div>
<div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;    }</div>
<div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_a583cc1b9a8909370e4d51a890d897668aeaca30d371d54c1aabf98fc58134ee62"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a583cc1b9a8909370e4d51a890d897668aeaca30d371d54c1aabf98fc58134ee62">SPELL_ATTR2_FAIL_ON_ALL_TARGETS_IMMUNE</a></div><div class="ttdeci">@ SPELL_ATTR2_FAIL_ON_ALL_TARGETS_IMMUNE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00449">SharedDefines.h:449</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a638f8f550e23b2e3180b481bb3f38076ab2ba4cd294111dc378e33055074250be"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a638f8f550e23b2e3180b481bb3f38076ab2ba4cd294111dc378e33055074250be">SPELL_ATTR1_IMMUNITY_PURGES_EFFECT</a></div><div class="ttdeci">@ SPELL_ATTR1_IMMUNITY_PURGES_EFFECT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00406">SharedDefines.h:406</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a8fe6a763d72d84ded23cec01c772f7adaa823d24ef2d29559df9cd8de9f0c071a"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adaa823d24ef2d29559df9cd8de9f0c071a">MECHANIC_BANISH</a></div><div class="ttdeci">@ MECHANIC_BANISH</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01315">SharedDefines.h:1315</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a91d505a1e789c6ea6a338f3a3c85b6b9ac7e02328e2b7e12ee79becbf777f8b3e"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ac7e02328e2b7e12ee79becbf777f8b3e">IMMUNITY_SCHOOL</a></div><div class="ttdeci">@ IMMUNITY_SCHOOL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01368">SharedDefines.h:1368</a></div></div>
<div class="ttc" id="a_unit_8h_html_ae51d2ecb71f7a5cb3882982a622c9544a7c4ae74029844364315885e02df35505"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ae51d2ecb71f7a5cb3882982a622c9544a7c4ae74029844364315885e02df35505">UNIT_STATE_ISOLATED</a></div><div class="ttdeci">@ UNIT_STATE_ISOLATED</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00497">Unit.h:497</a></div></div>
<div class="ttc" id="aclass_spell_info_html_a8dc618d81b8658f72b686f8ac9e90829"><div class="ttname"><a href="../../d4/d7d/class_spell_info.html#a8dc618d81b8658f72b686f8ac9e90829">SpellInfo::GetSchoolMask</a></div><div class="ttdeci">SpellSchoolMask GetSchoolMask() const</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7f/_spell_info_8cpp_source.html#l01931">SpellInfo.cpp:1931</a></div></div>
<div class="ttc" id="aclass_spell_info_html_adef74790281b92d72ac2c2118a665096"><div class="ttname"><a href="../../d4/d7d/class_spell_info.html#adef74790281b92d72ac2c2118a665096">SpellInfo::IsPositive</a></div><div class="ttdeci">bool IsPositive() const</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7f/_spell_info_8cpp_source.html#l01220">SpellInfo.cpp:1220</a></div></div>
<div class="ttc" id="aclass_unit_html_a0234fee1df2999bda3ca22449164f7b5"><div class="ttname"><a href="../../da/db7/class_unit.html#a0234fee1df2999bda3ca22449164f7b5">Unit::ClearUnitState</a></div><div class="ttdeci">void ClearUnitState(uint32 f)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01520">Unit.h:1520</a></div></div>
<div class="ttc" id="aclass_unit_html_a2be941a27d14de6da7676c6fdbd37bb9"><div class="ttname"><a href="../../da/db7/class_unit.html#a2be941a27d14de6da7676c6fdbd37bb9">Unit::RemoveAurasWithInterruptFlags</a></div><div class="ttdeci">void RemoveAurasWithInterruptFlags(uint32 flag, uint32 except=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l04681">Unit.cpp:4681</a></div></div>
<div class="ttc" id="aclass_unit_html_a752f5f516257bfdf139098c29a55c466"><div class="ttname"><a href="../../da/db7/class_unit.html#a752f5f516257bfdf139098c29a55c466">Unit::AddUnitState</a></div><div class="ttdeci">void AddUnitState(uint32 f)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01518">Unit.h:1518</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/d32/_unit_8h_source.html#l01518">Unit::AddUnitState()</a>, <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l12604">Unit::ApplySpellImmune()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00072">AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01520">Unit::ClearUnitState()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02004">Unit::GetAppliedAuras()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02047">Unit::GetAuraEffectsByType()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00446">GetAuraType()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">GetId()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../da/d7f/_spell_info_8cpp_source.html#l01931">SpellInfo::GetSchoolMask()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00315">SpellInfo::Id</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01368">IMMUNITY_SCHOOL</a>, <a class="el" href="../../da/d7f/_spell_info_8cpp_source.html#l01220">SpellInfo::IsPositive()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01315">MECHANIC_BANISH</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04293">Unit::RemoveAura()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04681">Unit::RemoveAurasWithInterruptFlags()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00406">SPELL_ATTR1_IMMUNITY_PURGES_EFFECT</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00449">SPELL_ATTR2_FAIL_ON_ALL_TARGETS_IMMUNE</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00269">SPELL_SCHOOL_MASK_NORMAL</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00497">UNIT_STATE_ISOLATED</a>.</p>

</div>
</div>
<a id="a05a18e948bfca43240aa65cb7872c909"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05a18e948bfca43240aa65cb7872c909">&#9670;&nbsp;</a></span>HandleAuraModShapeshift()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModShapeshift </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01828">1828</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;{</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a4ba94c36d138e079c354b69fe20d3d91">AURA_EFFECT_HANDLE_REAL_OR_REAPPLY_MASK</a>))</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160; </div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160; </div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> modelid = 0;</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;    <a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414">Powers</a> <a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a> = <a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a>;</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;    <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547c">ShapeshiftForm</a> form = <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547c">ShapeshiftForm</a>(<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160; </div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;    <span class="keywordflow">switch</span> (form)</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;    {</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547caa28b6421a1efdc3a6377c480e1f80809">FORM_CAT</a>:                                      <span class="comment">// 0x01</span></div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cadcc1e9eb63ae2e0530c35f95767cfa5a">FORM_GHOUL</a>:                                    <span class="comment">// 0x07</span></div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;            <a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a> = <a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414a535f3e3322566811e43bef82808b5288">POWER_ENERGY</a>;</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160; </div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547caff14e446078e4fbc3d35a9826ae59a75">FORM_BEAR</a>:                                     <span class="comment">// 0x05</span></div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca104eb15c414a7006998ae56cf4b64f4c">FORM_DIREBEAR</a>:                                 <span class="comment">// 0x08</span></div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160; </div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cac6f4bdb76e70e28c403bbd02bf4a969d">FORM_BATTLESTANCE</a>:                             <span class="comment">// 0x11</span></div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca740528acba7c88e26c5c6970b99ed18f">FORM_DEFENSIVESTANCE</a>:                          <span class="comment">// 0x12</span></div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca6a2bb66552732011772c2d2ac6dc21b0">FORM_BERSERKERSTANCE</a>:                          <span class="comment">// 0x13</span></div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;            <a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a> = <a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414a1b514bf3a42e9a5dc4271bd25b7dce7e">POWER_RAGE</a>;</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160; </div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cadede345fd72f3a48598be8a70afe65ca">FORM_TREE</a>:                                     <span class="comment">// 0x02</span></div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca3d7db874597fdd74df839cebc5513230">FORM_TRAVEL</a>:                                   <span class="comment">// 0x03</span></div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cac2743246d577352cdae533578e3c8c1b">FORM_AQUA</a>:                                     <span class="comment">// 0x04</span></div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cac0d940f97165e877e8c3ec0fed5074c6">FORM_AMBIENT</a>:                                  <span class="comment">// 0x06</span></div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160; </div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca8658562aed63e25b6812ea6a2ac66516">FORM_STEVES_GHOUL</a>:                             <span class="comment">// 0x09</span></div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca82ca071a35cb5b21619529313156be1c">FORM_THARONJA_SKELETON</a>:                        <span class="comment">// 0x0A</span></div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cae52ec1864a96665f18b681a021b40d1e">FORM_TEST_OF_STRENGTH</a>:                         <span class="comment">// 0x0B</span></div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cad1fdce3b8651f9cc379452c672b19245">FORM_BLB_PLAYER</a>:                               <span class="comment">// 0x0C</span></div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca54c306ce24ba265a5a6b047242d3a5a7">FORM_SHADOW_DANCE</a>:                             <span class="comment">// 0x0D</span></div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca42d6a809df54cb1ee4efeeeed671aece">FORM_CREATUREBEAR</a>:                             <span class="comment">// 0x0E</span></div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547caa1fa851e463bf75f379d7b6a668c0cff">FORM_CREATURECAT</a>:                              <span class="comment">// 0x0F</span></div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cab77bbfbe52ce8a4876d6c762735cfbc9">FORM_GHOSTWOLF</a>:                                <span class="comment">// 0x10</span></div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160; </div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca28e5c8f9dbe323d4b96def6b2ffaeabc">FORM_TEST</a>:                                     <span class="comment">// 0x14</span></div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547caa9b049ea762f29c2dfb7de1ec17fb4ec">FORM_ZOMBIE</a>:                                   <span class="comment">// 0x15</span></div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cadc094fb8dc4c8a87fffe3eac62b84ad4">FORM_METAMORPHOSIS</a>:                            <span class="comment">// 0x16</span></div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca1eb0a56ef3fbef183e32a6dc1a8a5f73">FORM_UNDEAD</a>:                                   <span class="comment">// 0x19</span></div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca6ef7260c45de9cf172c2fa5cc768a181">FORM_MASTER_ANGLER</a>:                            <span class="comment">// 0x1A</span></div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca84efb6dc7feed91df401b04c5d4f9353">FORM_FLIGHT_EPIC</a>:                              <span class="comment">// 0x1B</span></div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca45e034d920948e0ba5085eb103660161">FORM_SHADOW</a>:                                   <span class="comment">// 0x1C</span></div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547caa2a3be49d483fe70fcffab38a9787557">FORM_FLIGHT</a>:                                   <span class="comment">// 0x1D</span></div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cac5b4b27f0234cd99d2a201732a392b85">FORM_STEALTH</a>:                                  <span class="comment">// 0x1E</span></div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca956565a0800ab3f327d90d6a413f4482">FORM_MOONKIN</a>:                                  <span class="comment">// 0x1F</span></div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca6580b40dee982ab6f82c1c59d34988de">FORM_SPIRITOFREDEMPTION</a>:                       <span class="comment">// 0x20</span></div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;            <a class="code" href="../../d3/d07/src_2common_2_logging_2_log_8h.html#a43832e3fa8508deb4ce43e520005fcd9">LOG_ERROR</a>(<span class="stringliteral">&quot;spells.aura.effect&quot;</span>, <span class="stringliteral">&quot;Auras: Unknown Shapeshift Type: %u&quot;</span>, <a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;    }</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160; </div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    modelid = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a2a134837f30eb9ce5bee971127e24cb3">GetModelForForm</a>(form);</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160; </div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;    {</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;        <span class="comment">// remove polymorph before changing display id to keep new display id</span></div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;        <span class="keywordflow">switch</span> (form)</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;        {</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547caa28b6421a1efdc3a6377c480e1f80809">FORM_CAT</a>:</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cadede345fd72f3a48598be8a70afe65ca">FORM_TREE</a>:</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca3d7db874597fdd74df839cebc5513230">FORM_TRAVEL</a>:</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cac2743246d577352cdae533578e3c8c1b">FORM_AQUA</a>:</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547caff14e446078e4fbc3d35a9826ae59a75">FORM_BEAR</a>:</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca104eb15c414a7006998ae56cf4b64f4c">FORM_DIREBEAR</a>:</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca84efb6dc7feed91df401b04c5d4f9353">FORM_FLIGHT_EPIC</a>:</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547caa2a3be49d483fe70fcffab38a9787557">FORM_FLIGHT</a>:</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca956565a0800ab3f327d90d6a413f4482">FORM_MOONKIN</a>:</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;                {</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;                    <span class="comment">// remove movement affects</span></div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a18139a1595cccec72363ebd1de943d63">RemoveAurasByShapeShift</a>();</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160; </div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;                    <span class="comment">// and polymorphic affects</span></div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;                    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a356d82b82f6fbae78cb55ecb7bb67c0e">IsPolymorphed</a>())</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;                        target-&gt;<a class="code" href="../../da/db7/class_unit.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#ad0d777d08ff539fa2e7be49e948025da">getTransForm</a>());</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;                }</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;        }</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160; </div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;        <span class="comment">// remove other shapeshift before applying a new one</span></div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;        <span class="comment">// xinef: rogue shouldnt be wrapped by this check (shadow dance vs stealth)</span></div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;SpellFamilyName != <a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba9160b2e3a87a908af25c9a594295c0c1">SPELLFAMILY_ROGUE</a>)</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#ad6df47a81f5f5f147e68211ee935b398">RemoveAurasByType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a1c3516bb8442ba5d970c928ffc976689">SPELL_AURA_MOD_SHAPESHIFT</a>, <a class="code" href="../../d8/d03/class_object_guid.html#a14039d3f3df79203693f713495503165">ObjectGuid::Empty</a>, <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>());</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160; </div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;        <span class="comment">// stop handling the effect if it was removed by linked event</span></div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;        <span class="keywordflow">if</span> (aurApp-&gt;GetRemoveMode())</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160; </div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a> != <a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a>)</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;        {</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;            <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> oldPower = target-&gt;<a class="code" href="../../da/db7/class_unit.html#ad7e475d80b9af430cc076d7c01f967e9">GetPower</a>(<a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>);</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;            <span class="comment">// reset power to default values only at power change</span></div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;            <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#ad44d31430fab9282a79e8682822ccd9c">getPowerType</a>() != <a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>)</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#ae3f55fb49c678fcf64976fa0ce77d0c1">setPowerType</a>(<a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>);</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160; </div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;            <span class="keywordflow">switch</span> (form)</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;            {</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547caa28b6421a1efdc3a6377c480e1f80809">FORM_CAT</a>:</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547caff14e446078e4fbc3d35a9826ae59a75">FORM_BEAR</a>:</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca104eb15c414a7006998ae56cf4b64f4c">FORM_DIREBEAR</a>:</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;                    {</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;                        <span class="comment">// get furor proc chance</span></div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;                        <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> FurorChance = 0;</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html">AuraEffect</a> <span class="keyword">const</span>* dummy = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a8ef92f1d3a61f9fb2c8c24323d5d24af">GetDummyAuraEffect</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1bac3788ce010075b8bd4e6083638d8cd40">SPELLFAMILY_DRUID</a>, 238, 0))</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;                            FurorChance = <a class="code" href="../../d9/df6/my__global_8h.html#affe776513b24d84b39af8ab0930fef7f">std::max</a>(dummy-&gt;GetAmount(), 0);</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160; </div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;                        <span class="keywordflow">switch</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>())</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;                        {</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;                            <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547caa28b6421a1efdc3a6377c480e1f80809">FORM_CAT</a>:</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;                                {</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;                                    <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> basePoints = <a class="code" href="../../df/de2/namespace_g3_d.html#af80d9dbc6fa48c9ff714c7158adb60ae">int32</a>(<a class="code" href="../../d9/df6/my__global_8h.html#ac6afabdc09a49a433ee19d8a9486056d">std::min</a>(oldPower, FurorChance));</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;                                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9bf14ad2afa43d552c76b843615a8bf8">SetPower</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414a535f3e3322566811e43bef82808b5288">POWER_ENERGY</a>, 0);</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;                                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(target, 17099, &amp;basePoints, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;                                }</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;                            <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547caff14e446078e4fbc3d35a9826ae59a75">FORM_BEAR</a>:</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;                            <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca104eb15c414a7006998ae56cf4b64f4c">FORM_DIREBEAR</a>:</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="../../d9/de8/src_2common_2_utilities_2_random_8cpp.html#ab17def34ccbbd868dc87a16bf35acdbd">urand</a>(0, 99) &lt; FurorChance)</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;                                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 17057, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;                            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;                                {</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;                                    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> newEnergy = <a class="code" href="../../d9/df6/my__global_8h.html#ac6afabdc09a49a433ee19d8a9486056d">std::min</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#ad7e475d80b9af430cc076d7c01f967e9">GetPower</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414a535f3e3322566811e43bef82808b5288">POWER_ENERGY</a>), FurorChance);</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;                                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9bf14ad2afa43d552c76b843615a8bf8">SetPower</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414a535f3e3322566811e43bef82808b5288">POWER_ENERGY</a>, newEnergy);</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;                                }</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;                        }</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;                    }</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;            }</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;        }</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;        <span class="comment">// stop handling the effect if it was removed by linked event</span></div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;        <span class="keywordflow">if</span> (aurApp-&gt;GetRemoveMode())</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160; </div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#aef7ea224b5f42ee3de39782345dfe931">SetShapeshiftForm</a>(form);</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;        <span class="comment">// xinef: allow shapeshift to override model id if forced transform aura is not present!</span></div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;        <span class="keywordflow">if</span> (modelid &gt; 0)</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;        {</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;            <span class="keywordtype">bool</span> allow = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;            <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#ad0d777d08ff539fa2e7be49e948025da">getTransForm</a>())</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d4/d7d/class_spell_info.html">SpellInfo</a> <span class="keyword">const</span>* transformSpellInfo = <a class="code" href="../../d3/d75/_spell_mgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellInfo(target-&gt;<a class="code" href="../../da/db7/class_unit.html#ad0d777d08ff539fa2e7be49e948025da">getTransForm</a>()))</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;                    <span class="keywordflow">if</span> (transformSpellInfo-&gt;HasAttribute(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a9dcd0ba8d94905ba214797c12e7c44ada6a12b14654225a9ccea65799ce6fc780">SPELL_ATTR0_NO_IMMUNITIES</a>) || !transformSpellInfo-&gt;IsPositive())</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;                        allow = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160; </div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;            <span class="keywordflow">if</span> (allow)</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#aab919c89c1c0fead6ece2c26e6c565a4">SetDisplayId</a>(modelid);</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;        }</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;    }</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;    {</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;        <span class="comment">// reset model id if no other auras present</span></div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;        <span class="comment">// may happen when aura is applied on linked event on aura removal</span></div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;        <span class="keywordflow">if</span> (!target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a1c3516bb8442ba5d970c928ffc976689">SPELL_AURA_MOD_SHAPESHIFT</a>))</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;        {</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#aef7ea224b5f42ee3de39782345dfe931">SetShapeshiftForm</a>(<a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547caa094ef89cc14332f71872d1864ec2543">FORM_NONE</a>);</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;            <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a58a507ebe628930b8a506144b364d84b">getClass</a>() == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a86e4e3df7a5142175aa5df522d3346cfa312316ea844ad336fad9eb5a00348636">CLASS_DRUID</a>)</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;            {</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#ae3f55fb49c678fcf64976fa0ce77d0c1">setPowerType</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a>);</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;                <span class="comment">// Remove movement impairing effects also when shifting out</span></div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#a18139a1595cccec72363ebd1de943d63">RemoveAurasByShapeShift</a>();</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;            }</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;        }</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160; </div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;        <span class="keywordflow">if</span> (modelid &gt; 0)</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#acb800095887418d08fdfa8ade11f0074">RestoreDisplayId</a>();</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160; </div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;        <span class="keywordflow">switch</span> (form)</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;        {</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;            <span class="comment">// Nordrassil Harness - bonus</span></div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547caff14e446078e4fbc3d35a9826ae59a75">FORM_BEAR</a>:</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca104eb15c414a7006998ae56cf4b64f4c">FORM_DIREBEAR</a>:</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547caa28b6421a1efdc3a6377c480e1f80809">FORM_CAT</a>:</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html">AuraEffect</a>* dummy = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a520e229dc1a93ea4a53d0ba81e586d11">GetAuraEffect</a>(37315, 0))</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 37316, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, dummy);</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;            <span class="comment">// Nordrassil Regalia - bonus</span></div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca956565a0800ab3f327d90d6a413f4482">FORM_MOONKIN</a>:</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html">AuraEffect</a>* dummy = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a520e229dc1a93ea4a53d0ba81e586d11">GetAuraEffect</a>(37324, 0))</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 37325, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, dummy);</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cac6f4bdb76e70e28c403bbd02bf4a969d">FORM_BATTLESTANCE</a>:</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca740528acba7c88e26c5c6970b99ed18f">FORM_DEFENSIVESTANCE</a>:</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca6a2bb66552732011772c2d2ac6dc21b0">FORM_BERSERKERSTANCE</a>:</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;                {</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;                    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> Rage_val = 0;</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;                    <span class="comment">// Defensive Tactics</span></div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;                    <span class="keywordflow">if</span> (form == <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca740528acba7c88e26c5c6970b99ed18f">FORM_DEFENSIVESTANCE</a>)</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;                    {</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html">AuraEffect</a> <span class="keyword">const</span>* aurEff = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5f074967d76067c52aaebbf8edd580f4">IsScriptOverriden</a>(<a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>, 831))</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;                            Rage_val += aurEff-&gt;GetAmount() * 10;</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;                    }</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;                    <span class="comment">// Stance mastery + Tactical mastery (both passive, and last have aura only in defense stance, but need apply at any stance switch)</span></div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;                    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;                    {</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;                        <span class="comment">// Stance mastery - trainer spell</span></div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;                        <a class="code" href="../../d1/d39/_player_8h.html#a6829a36dad31b0ac277fae810007c700">PlayerSpellMap</a> <span class="keyword">const</span>&amp; sp_list = target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a1bb68bc662edb6bc40c580fe5af98785">GetSpellMap</a>();</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;                        <span class="keywordflow">for</span> (PlayerSpellMap::const_iterator itr = sp_list.begin(); itr != sp_list.end(); ++itr)</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;                        {</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;                            <span class="keywordflow">if</span> (itr-&gt;second-&gt;State == <a class="code" href="../../d1/d39/_player_8h.html#aeba4f8d5fc0fa3fd00538df69077ba55a1a8411f74fdb6a5715ed8cfca6b96a50">PLAYERSPELL_REMOVED</a> || !itr-&gt;second-&gt;IsInSpec(target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#aadce3b13b7dcab72e227e1b404ab87ab">GetActiveSpec</a>()))</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;                                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160; </div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;                            <a class="code" href="../../d4/d7d/class_spell_info.html">SpellInfo</a> <span class="keyword">const</span>* spellInfo = <a class="code" href="../../d3/d75/_spell_mgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellInfo(itr-&gt;first);</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;                            <span class="keywordflow">if</span> (spellInfo &amp;&amp; spellInfo-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#af6ec577353f7d3cc59badd7d332153b0">SpellFamilyName</a> == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba52acbcf14a96b5ed01b8a43052a26a11">SPELLFAMILY_WARRIOR</a> &amp;&amp; spellInfo-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#ac1a82f9330481616b4b87ed9eff0f785">SpellIconID</a> == 139)</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;                                Rage_val += target-&gt;<a class="code" href="../../da/db7/class_unit.html#a31bb114ec4c1defc9e19d29840c6a6d0">CalculateSpellDamage</a>(target, spellInfo, 0) * 10;</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;                        }</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160; </div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;                        <span class="comment">// Tactical Mastery - talent</span></div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;                        <a class="code" href="../../d1/d39/_player_8h.html#a58b30b88955cb12b1f6441e41eed03b5">PlayerTalentMap</a> <span class="keyword">const</span>&amp; tp_list = target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a09de94c3f29084501439493983ac190a">GetTalentMap</a>();</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;                        <span class="keywordflow">for</span> (PlayerTalentMap::const_iterator itr = tp_list.begin(); itr != tp_list.end(); ++itr)</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;                        {</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;                            <span class="keywordflow">if</span> (itr-&gt;second-&gt;State == <a class="code" href="../../d1/d39/_player_8h.html#aeba4f8d5fc0fa3fd00538df69077ba55a1a8411f74fdb6a5715ed8cfca6b96a50">PLAYERSPELL_REMOVED</a> || !itr-&gt;second-&gt;IsInSpec(target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#aadce3b13b7dcab72e227e1b404ab87ab">GetActiveSpec</a>()))</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;                                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160; </div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;                            <a class="code" href="../../d4/d7d/class_spell_info.html">SpellInfo</a> <span class="keyword">const</span>* spellInfo = <a class="code" href="../../d3/d75/_spell_mgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellInfo(itr-&gt;first);</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;                            <span class="keywordflow">if</span> (spellInfo &amp;&amp; spellInfo-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#af6ec577353f7d3cc59badd7d332153b0">SpellFamilyName</a> == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba52acbcf14a96b5ed01b8a43052a26a11">SPELLFAMILY_WARRIOR</a> &amp;&amp; spellInfo-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#ac1a82f9330481616b4b87ed9eff0f785">SpellIconID</a> == 139)</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;                                Rage_val += target-&gt;<a class="code" href="../../da/db7/class_unit.html#a31bb114ec4c1defc9e19d29840c6a6d0">CalculateSpellDamage</a>(target, spellInfo, 0) * 10;</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;                        }</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;                    }</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;                    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#ad7e475d80b9af430cc076d7c01f967e9">GetPower</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414a1b514bf3a42e9a5dc4271bd25b7dce7e">POWER_RAGE</a>) &gt; Rage_val)</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;                        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9bf14ad2afa43d552c76b843615a8bf8">SetPower</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414a1b514bf3a42e9a5dc4271bd25b7dce7e">POWER_RAGE</a>, Rage_val);</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;                }</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;        }</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;    }</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160; </div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;    <span class="comment">// adding/removing linked auras</span></div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;    <span class="comment">// add/remove the shapeshift aura&#39;s boosts</span></div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;    <a class="code" href="../../da/df1/class_aura_effect.html#a66eb63a01dca27eaa327c72f03710c53">HandleShapeshiftBoosts</a>(target, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160; </div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a8192d0e595c3efd54b18add812bf6be7">InitDataForForm</a>();</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160; </div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a58a507ebe628930b8a506144b364d84b">getClass</a>() == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a86e4e3df7a5142175aa5df522d3346cfa312316ea844ad336fad9eb5a00348636">CLASS_DRUID</a>)</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;    {</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;        <span class="comment">// Dash</span></div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html">AuraEffect</a>* aurEff = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a520e229dc1a93ea4a53d0ba81e586d11">GetAuraEffect</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a30e12137ab8f3aa72ef04ef6092ffb9b">SPELL_AURA_MOD_INCREASE_SPEED</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1bac3788ce010075b8bd4e6083638d8cd40">SPELLFAMILY_DRUID</a>, 0, 0, 0x8))</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;            aurEff-&gt;RecalculateAmount();</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160; </div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;        <span class="comment">// Disarm handling</span></div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;        <span class="comment">// If druid shifts while being disarmed we need to deal with that since forms aren&#39;t affected by disarm</span></div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;        <span class="comment">// and also HandleAuraModDisarm is not triggered</span></div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;        <span class="keywordflow">if</span> (!target-&gt;<a class="code" href="../../da/db7/class_unit.html#a2b2c033c2df168977ab5b72644e75daf">CanUseAttackType</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>))</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;        {</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../dc/d32/class_item.html">Item</a>* pItem = target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a6e31042962f16c90a443ff772363d22f">GetItemByPos</a>(<a class="code" href="../../d1/d39/_player_8h.html#ad3dd8ed856e16139eaa67147d40cf24e">INVENTORY_SLOT_BAG_0</a>, <a class="code" href="../../d1/d39/_player_8h.html#a93b8041f948d575ef2d23746324a37afa559e9d51b0cff8ac6448c07e005a13bd">EQUIPMENT_SLOT_MAINHAND</a>))</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;            {</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;                target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a6d26b6e2d8c1f5d9532a739010594c68">_ApplyWeaponDamage</a>(<a class="code" href="../../d1/d39/_player_8h.html#a93b8041f948d575ef2d23746324a37afa559e9d51b0cff8ac6448c07e005a13bd">EQUIPMENT_SLOT_MAINHAND</a>, pItem-&gt;GetTemplate(), <span class="keyword">nullptr</span>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;            }</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;        }</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;    }</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160; </div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;    <span class="comment">// stop handling the effect if it was removed by linked event</span></div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a> &amp;&amp; aurApp-&gt;GetRemoveMode())</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160; </div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;    {</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;        <a class="code" href="../../d5/dae/struct_spell_shapeshift_entry.html">SpellShapeshiftEntry</a> <span class="keyword">const</span>* shapeInfo = <a class="code" href="../../dd/d17/_d_b_c_stores_8cpp.html#a752a8f80c3235d905725fc9e54838a4d">sSpellShapeshiftStore</a>.LookupEntry(form);</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;        <span class="comment">// Learn spells for shapeshift form - no need to send action bars or add spells to spellbook</span></div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> i = 0; i &lt; <a class="code" href="../../d1/d22/_d_b_c_structure_8h.html#a8c0b93bba896da1bb3ecaac8d847ee2d">MAX_SHAPESHIFT_SPELLS</a>; ++i)</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;        {</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;            <span class="keywordflow">if</span> (!shapeInfo-&gt;<a class="code" href="../../d5/dae/struct_spell_shapeshift_entry.html#a18f4d6a3a157eab436fa5790b6eeb520">stanceSpell</a>[i])</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;                target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a107e0be6e83289162958bd63740896d0">_addSpell</a>(shapeInfo-&gt;<a class="code" href="../../d5/dae/struct_spell_shapeshift_entry.html#a18f4d6a3a157eab436fa5790b6eeb520">stanceSpell</a>[i], <a class="code" href="../../d1/d39/_player_8h.html#a6a6dfeb0ddba76f8c51abbe98ea08609">SPEC_MASK_ALL</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;                target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a14874da88b7bd1006282e8250b3908ea">removeSpell</a>(shapeInfo-&gt;<a class="code" href="../../d5/dae/struct_spell_shapeshift_entry.html#a18f4d6a3a157eab436fa5790b6eeb520">stanceSpell</a>[i], <a class="code" href="../../d1/d39/_player_8h.html#a6a6dfeb0ddba76f8c51abbe98ea08609">SPEC_MASK_ALL</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;        }</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;    }</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;}</div>
<div class="ttc" id="a_d_b_c_stores_8cpp_html_a752a8f80c3235d905725fc9e54838a4d"><div class="ttname"><a href="../../dd/d17/_d_b_c_stores_8cpp.html#a752a8f80c3235d905725fc9e54838a4d">sSpellShapeshiftStore</a></div><div class="ttdeci">DBCStorage&lt; SpellShapeshiftEntry &gt; sSpellShapeshiftStore(SpellShapeshiftfmt)</div></div>
<div class="ttc" id="a_d_b_c_structure_8h_html_a8c0b93bba896da1bb3ecaac8d847ee2d"><div class="ttname"><a href="../../d1/d22/_d_b_c_structure_8h.html#a8c0b93bba896da1bb3ecaac8d847ee2d">MAX_SHAPESHIFT_SPELLS</a></div><div class="ttdeci">#define MAX_SHAPESHIFT_SPELLS</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/_d_b_c_structure_8h_source.html#l01740">DBCStructure.h:1740</a></div></div>
<div class="ttc" id="a_player_8h_html_a58b30b88955cb12b1f6441e41eed03b5"><div class="ttname"><a href="../../d1/d39/_player_8h.html#a58b30b88955cb12b1f6441e41eed03b5">PlayerTalentMap</a></div><div class="ttdeci">std::unordered_map&lt; uint32, PlayerTalent * &gt; PlayerTalentMap</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l00187">Player.h:187</a></div></div>
<div class="ttc" id="a_player_8h_html_a6829a36dad31b0ac277fae810007c700"><div class="ttname"><a href="../../d1/d39/_player_8h.html#a6829a36dad31b0ac277fae810007c700">PlayerSpellMap</a></div><div class="ttdeci">std::unordered_map&lt; uint32, PlayerSpell * &gt; PlayerSpellMap</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l00188">Player.h:188</a></div></div>
<div class="ttc" id="a_player_8h_html_a6a6dfeb0ddba76f8c51abbe98ea08609"><div class="ttname"><a href="../../d1/d39/_player_8h.html#a6a6dfeb0ddba76f8c51abbe98ea08609">SPEC_MASK_ALL</a></div><div class="ttdeci">#define SPEC_MASK_ALL</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l00172">Player.h:172</a></div></div>
<div class="ttc" id="a_player_8h_html_aeba4f8d5fc0fa3fd00538df69077ba55a1a8411f74fdb6a5715ed8cfca6b96a50"><div class="ttname"><a href="../../d1/d39/_player_8h.html#aeba4f8d5fc0fa3fd00538df69077ba55a1a8411f74fdb6a5715ed8cfca6b96a50">PLAYERSPELL_REMOVED</a></div><div class="ttdeci">@ PLAYERSPELL_REMOVED</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l00117">Player.h:117</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a17e15fab4b89f4840e745f31ca76a414a1b514bf3a42e9a5dc4271bd25b7dce7e"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414a1b514bf3a42e9a5dc4271bd25b7dce7e">POWER_RAGE</a></div><div class="ttdeci">@ POWER_RAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00242">SharedDefines.h:242</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a17e15fab4b89f4840e745f31ca76a414a535f3e3322566811e43bef82808b5288"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414a535f3e3322566811e43bef82808b5288">POWER_ENERGY</a></div><div class="ttdeci">@ POWER_ENERGY</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00244">SharedDefines.h:244</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a></div><div class="ttdeci">@ POWER_MANA</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00241">SharedDefines.h:241</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a86e4e3df7a5142175aa5df522d3346cfa312316ea844ad336fad9eb5a00348636"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a86e4e3df7a5142175aa5df522d3346cfa312316ea844ad336fad9eb5a00348636">CLASS_DRUID</a></div><div class="ttdeci">@ CLASS_DRUID</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00124">SharedDefines.h:123</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a9264ae6b0ef1b61a6eeb7fdac9fbab1ba52acbcf14a96b5ed01b8a43052a26a11"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba52acbcf14a96b5ed01b8a43052a26a11">SPELLFAMILY_WARRIOR</a></div><div class="ttdeci">@ SPELLFAMILY_WARRIOR</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l03458">SharedDefines.h:3458</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a9dcd0ba8d94905ba214797c12e7c44ada6a12b14654225a9ccea65799ce6fc780"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a9dcd0ba8d94905ba214797c12e7c44ada6a12b14654225a9ccea65799ce6fc780">SPELL_ATTR0_NO_IMMUNITIES</a></div><div class="ttdeci">@ SPELL_ATTR0_NO_IMMUNITIES</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00383">SharedDefines.h:383</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a1c3516bb8442ba5d970c928ffc976689"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a1c3516bb8442ba5d970c928ffc976689">SPELL_AURA_MOD_SHAPESHIFT</a></div><div class="ttdeci">@ SPELL_AURA_MOD_SHAPESHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00099">SpellAuraDefines.h:99</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a30e12137ab8f3aa72ef04ef6092ffb9b"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a30e12137ab8f3aa72ef04ef6092ffb9b">SPELL_AURA_MOD_INCREASE_SPEED</a></div><div class="ttdeci">@ SPELL_AURA_MOD_INCREASE_SPEED</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00094">SpellAuraDefines.h:94</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a82ebee9e3cf7eaf2ab892a6eb7796288a4ba94c36d138e079c354b69fe20d3d91"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a4ba94c36d138e079c354b69fe20d3d91">AURA_EFFECT_HANDLE_REAL_OR_REAPPLY_MASK</a></div><div class="ttdeci">@ AURA_EFFECT_HANDLE_REAL_OR_REAPPLY_MASK</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00051">SpellAuraDefines.h:51</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab1b67dd15f243c850f589f66747e547c"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547c">ShapeshiftForm</a></div><div class="ttdeci">ShapeshiftForm</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00197">Unit.h:198</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab1b67dd15f243c850f589f66747e547ca104eb15c414a7006998ae56cf4b64f4c"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca104eb15c414a7006998ae56cf4b64f4c">FORM_DIREBEAR</a></div><div class="ttdeci">@ FORM_DIREBEAR</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00207">Unit.h:207</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab1b67dd15f243c850f589f66747e547ca1eb0a56ef3fbef183e32a6dc1a8a5f73"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca1eb0a56ef3fbef183e32a6dc1a8a5f73">FORM_UNDEAD</a></div><div class="ttdeci">@ FORM_UNDEAD</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00222">Unit.h:222</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab1b67dd15f243c850f589f66747e547ca28e5c8f9dbe323d4b96def6b2ffaeabc"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca28e5c8f9dbe323d4b96def6b2ffaeabc">FORM_TEST</a></div><div class="ttdeci">@ FORM_TEST</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00219">Unit.h:219</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab1b67dd15f243c850f589f66747e547ca3d7db874597fdd74df839cebc5513230"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca3d7db874597fdd74df839cebc5513230">FORM_TRAVEL</a></div><div class="ttdeci">@ FORM_TRAVEL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00202">Unit.h:202</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab1b67dd15f243c850f589f66747e547ca42d6a809df54cb1ee4efeeeed671aece"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca42d6a809df54cb1ee4efeeeed671aece">FORM_CREATUREBEAR</a></div><div class="ttdeci">@ FORM_CREATUREBEAR</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00213">Unit.h:213</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab1b67dd15f243c850f589f66747e547ca45e034d920948e0ba5085eb103660161"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca45e034d920948e0ba5085eb103660161">FORM_SHADOW</a></div><div class="ttdeci">@ FORM_SHADOW</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00225">Unit.h:225</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab1b67dd15f243c850f589f66747e547ca54c306ce24ba265a5a6b047242d3a5a7"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca54c306ce24ba265a5a6b047242d3a5a7">FORM_SHADOW_DANCE</a></div><div class="ttdeci">@ FORM_SHADOW_DANCE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00212">Unit.h:212</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab1b67dd15f243c850f589f66747e547ca6580b40dee982ab6f82c1c59d34988de"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca6580b40dee982ab6f82c1c59d34988de">FORM_SPIRITOFREDEMPTION</a></div><div class="ttdeci">@ FORM_SPIRITOFREDEMPTION</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00230">Unit.h:229</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab1b67dd15f243c850f589f66747e547ca6a2bb66552732011772c2d2ac6dc21b0"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca6a2bb66552732011772c2d2ac6dc21b0">FORM_BERSERKERSTANCE</a></div><div class="ttdeci">@ FORM_BERSERKERSTANCE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00218">Unit.h:218</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab1b67dd15f243c850f589f66747e547ca6ef7260c45de9cf172c2fa5cc768a181"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca6ef7260c45de9cf172c2fa5cc768a181">FORM_MASTER_ANGLER</a></div><div class="ttdeci">@ FORM_MASTER_ANGLER</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00223">Unit.h:223</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab1b67dd15f243c850f589f66747e547ca740528acba7c88e26c5c6970b99ed18f"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca740528acba7c88e26c5c6970b99ed18f">FORM_DEFENSIVESTANCE</a></div><div class="ttdeci">@ FORM_DEFENSIVESTANCE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00217">Unit.h:217</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab1b67dd15f243c850f589f66747e547ca82ca071a35cb5b21619529313156be1c"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca82ca071a35cb5b21619529313156be1c">FORM_THARONJA_SKELETON</a></div><div class="ttdeci">@ FORM_THARONJA_SKELETON</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00209">Unit.h:209</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab1b67dd15f243c850f589f66747e547ca84efb6dc7feed91df401b04c5d4f9353"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca84efb6dc7feed91df401b04c5d4f9353">FORM_FLIGHT_EPIC</a></div><div class="ttdeci">@ FORM_FLIGHT_EPIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00224">Unit.h:224</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab1b67dd15f243c850f589f66747e547ca8658562aed63e25b6812ea6a2ac66516"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca8658562aed63e25b6812ea6a2ac66516">FORM_STEVES_GHOUL</a></div><div class="ttdeci">@ FORM_STEVES_GHOUL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00208">Unit.h:208</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab1b67dd15f243c850f589f66747e547ca956565a0800ab3f327d90d6a413f4482"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca956565a0800ab3f327d90d6a413f4482">FORM_MOONKIN</a></div><div class="ttdeci">@ FORM_MOONKIN</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00228">Unit.h:228</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab1b67dd15f243c850f589f66747e547caa094ef89cc14332f71872d1864ec2543"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547caa094ef89cc14332f71872d1864ec2543">FORM_NONE</a></div><div class="ttdeci">@ FORM_NONE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00199">Unit.h:199</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab1b67dd15f243c850f589f66747e547caa1fa851e463bf75f379d7b6a668c0cff"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547caa1fa851e463bf75f379d7b6a668c0cff">FORM_CREATURECAT</a></div><div class="ttdeci">@ FORM_CREATURECAT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00214">Unit.h:214</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab1b67dd15f243c850f589f66747e547caa28b6421a1efdc3a6377c480e1f80809"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547caa28b6421a1efdc3a6377c480e1f80809">FORM_CAT</a></div><div class="ttdeci">@ FORM_CAT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00200">Unit.h:200</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab1b67dd15f243c850f589f66747e547caa2a3be49d483fe70fcffab38a9787557"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547caa2a3be49d483fe70fcffab38a9787557">FORM_FLIGHT</a></div><div class="ttdeci">@ FORM_FLIGHT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00226">Unit.h:226</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab1b67dd15f243c850f589f66747e547caa9b049ea762f29c2dfb7de1ec17fb4ec"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547caa9b049ea762f29c2dfb7de1ec17fb4ec">FORM_ZOMBIE</a></div><div class="ttdeci">@ FORM_ZOMBIE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00220">Unit.h:220</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab1b67dd15f243c850f589f66747e547cac0d940f97165e877e8c3ec0fed5074c6"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cac0d940f97165e877e8c3ec0fed5074c6">FORM_AMBIENT</a></div><div class="ttdeci">@ FORM_AMBIENT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00205">Unit.h:205</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab1b67dd15f243c850f589f66747e547cac2743246d577352cdae533578e3c8c1b"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cac2743246d577352cdae533578e3c8c1b">FORM_AQUA</a></div><div class="ttdeci">@ FORM_AQUA</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00203">Unit.h:203</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab1b67dd15f243c850f589f66747e547cac5b4b27f0234cd99d2a201732a392b85"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cac5b4b27f0234cd99d2a201732a392b85">FORM_STEALTH</a></div><div class="ttdeci">@ FORM_STEALTH</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00227">Unit.h:227</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab1b67dd15f243c850f589f66747e547cac6f4bdb76e70e28c403bbd02bf4a969d"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cac6f4bdb76e70e28c403bbd02bf4a969d">FORM_BATTLESTANCE</a></div><div class="ttdeci">@ FORM_BATTLESTANCE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00216">Unit.h:216</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab1b67dd15f243c850f589f66747e547cad1fdce3b8651f9cc379452c672b19245"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cad1fdce3b8651f9cc379452c672b19245">FORM_BLB_PLAYER</a></div><div class="ttdeci">@ FORM_BLB_PLAYER</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00211">Unit.h:211</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab1b67dd15f243c850f589f66747e547cadc094fb8dc4c8a87fffe3eac62b84ad4"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cadc094fb8dc4c8a87fffe3eac62b84ad4">FORM_METAMORPHOSIS</a></div><div class="ttdeci">@ FORM_METAMORPHOSIS</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00221">Unit.h:221</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab1b67dd15f243c850f589f66747e547cadcc1e9eb63ae2e0530c35f95767cfa5a"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cadcc1e9eb63ae2e0530c35f95767cfa5a">FORM_GHOUL</a></div><div class="ttdeci">@ FORM_GHOUL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00206">Unit.h:206</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab1b67dd15f243c850f589f66747e547cadede345fd72f3a48598be8a70afe65ca"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cadede345fd72f3a48598be8a70afe65ca">FORM_TREE</a></div><div class="ttdeci">@ FORM_TREE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00201">Unit.h:201</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab1b67dd15f243c850f589f66747e547cae52ec1864a96665f18b681a021b40d1e"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cae52ec1864a96665f18b681a021b40d1e">FORM_TEST_OF_STRENGTH</a></div><div class="ttdeci">@ FORM_TEST_OF_STRENGTH</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00210">Unit.h:210</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab1b67dd15f243c850f589f66747e547caff14e446078e4fbc3d35a9826ae59a75"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547caff14e446078e4fbc3d35a9826ae59a75">FORM_BEAR</a></div><div class="ttdeci">@ FORM_BEAR</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00204">Unit.h:204</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a66eb63a01dca27eaa327c72f03710c53"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a66eb63a01dca27eaa327c72f03710c53">AuraEffect::HandleShapeshiftBoosts</a></div><div class="ttdeci">void HandleShapeshiftBoosts(Unit *target, bool apply) const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01189">SpellAuraEffects.cpp:1189</a></div></div>
<div class="ttc" id="aclass_object_guid_html_a14039d3f3df79203693f713495503165"><div class="ttname"><a href="../../d8/d03/class_object_guid.html#a14039d3f3df79203693f713495503165">ObjectGuid::Empty</a></div><div class="ttdeci">static ObjectGuid const Empty</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d83/_object_guid_8h_source.html#l00122">ObjectGuid.h:122</a></div></div>
<div class="ttc" id="aclass_player_html_a09de94c3f29084501439493983ac190a"><div class="ttname"><a href="../../d8/d53/class_player.html#a09de94c3f29084501439493983ac190a">Player::GetTalentMap</a></div><div class="ttdeci">const PlayerTalentMap &amp; GetTalentMap() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l02566">Player.h:2566</a></div></div>
<div class="ttc" id="aclass_player_html_a107e0be6e83289162958bd63740896d0"><div class="ttname"><a href="../../d8/d53/class_player.html#a107e0be6e83289162958bd63740896d0">Player::_addSpell</a></div><div class="ttdeci">bool _addSpell(uint32 spellId, uint8 addSpecMask, bool temporary, bool learnFromSkill=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/_player_8cpp_source.html#l02994">Player.cpp:2994</a></div></div>
<div class="ttc" id="aclass_player_html_a14874da88b7bd1006282e8250b3908ea"><div class="ttname"><a href="../../d8/d53/class_player.html#a14874da88b7bd1006282e8250b3908ea">Player::removeSpell</a></div><div class="ttdeci">void removeSpell(uint32 spellId, uint8 removeSpecMask, bool onlyTemporary)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/_player_8cpp_source.html#l03223">Player.cpp:3223</a></div></div>
<div class="ttc" id="aclass_player_html_a1bb68bc662edb6bc40c580fe5af98785"><div class="ttname"><a href="../../d8/d53/class_player.html#a1bb68bc662edb6bc40c580fe5af98785">Player::GetSpellMap</a></div><div class="ttdeci">PlayerSpellMap const  &amp; GetSpellMap() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l01705">Player.h:1705</a></div></div>
<div class="ttc" id="aclass_player_html_a8192d0e595c3efd54b18add812bf6be7"><div class="ttname"><a href="../../d8/d53/class_player.html#a8192d0e595c3efd54b18add812bf6be7">Player::InitDataForForm</a></div><div class="ttdeci">void InitDataForForm(bool reapplyMods=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/_player_8cpp_source.html#l09838">Player.cpp:9838</a></div></div>
<div class="ttc" id="aclass_player_html_aadce3b13b7dcab72e227e1b404ab87ab"><div class="ttname"><a href="../../d8/d53/class_player.html#aadce3b13b7dcab72e227e1b404ab87ab">Player::GetActiveSpec</a></div><div class="ttdeci">uint8 GetActiveSpec() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l01673">Player.h:1673</a></div></div>
<div class="ttc" id="aclass_spell_info_html_ac1a82f9330481616b4b87ed9eff0f785"><div class="ttname"><a href="../../d4/d7d/class_spell_info.html#ac1a82f9330481616b4b87ed9eff0f785">SpellInfo::SpellIconID</a></div><div class="ttdeci">uint32 SpellIconID</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d70/_spell_info_8h_source.html#l00375">SpellInfo.h:375</a></div></div>
<div class="ttc" id="aclass_unit_html_a18139a1595cccec72363ebd1de943d63"><div class="ttname"><a href="../../da/db7/class_unit.html#a18139a1595cccec72363ebd1de943d63">Unit::RemoveAurasByShapeShift</a></div><div class="ttdeci">void RemoveAurasByShapeShift()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l04769">Unit.cpp:4769</a></div></div>
<div class="ttc" id="aclass_unit_html_a2a134837f30eb9ce5bee971127e24cb3"><div class="ttname"><a href="../../da/db7/class_unit.html#a2a134837f30eb9ce5bee971127e24cb3">Unit::GetModelForForm</a></div><div class="ttdeci">uint32 GetModelForForm(ShapeshiftForm form) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l18299">Unit.cpp:18299</a></div></div>
<div class="ttc" id="aclass_unit_html_a2b2c033c2df168977ab5b72644e75daf"><div class="ttname"><a href="../../da/db7/class_unit.html#a2b2c033c2df168977ab5b72644e75daf">Unit::CanUseAttackType</a></div><div class="ttdeci">bool CanUseAttackType(uint8 attacktype) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01705">Unit.h:1705</a></div></div>
<div class="ttc" id="aclass_unit_html_a31bb114ec4c1defc9e19d29840c6a6d0"><div class="ttname"><a href="../../da/db7/class_unit.html#a31bb114ec4c1defc9e19d29840c6a6d0">Unit::CalculateSpellDamage</a></div><div class="ttdeci">int32 CalculateSpellDamage(Unit const *target, SpellInfo const *spellProto, uint8 effect_index, int32 const *basePoints=nullptr) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l14008">Unit.cpp:14008</a></div></div>
<div class="ttc" id="aclass_unit_html_a356d82b82f6fbae78cb55ecb7bb67c0e"><div class="ttname"><a href="../../da/db7/class_unit.html#a356d82b82f6fbae78cb55ecb7bb67c0e">Unit::IsPolymorphed</a></div><div class="ttdeci">bool IsPolymorphed() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l16058">Unit.cpp:16058</a></div></div>
<div class="ttc" id="aclass_unit_html_a520e229dc1a93ea4a53d0ba81e586d11"><div class="ttname"><a href="../../da/db7/class_unit.html#a520e229dc1a93ea4a53d0ba81e586d11">Unit::GetAuraEffect</a></div><div class="ttdeci">AuraEffect * GetAuraEffect(uint32 spellId, uint8 effIndex, ObjectGuid casterGUID=ObjectGuid::Empty) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l04989">Unit.cpp:4989</a></div></div>
<div class="ttc" id="aclass_unit_html_a5f074967d76067c52aaebbf8edd580f4"><div class="ttname"><a href="../../da/db7/class_unit.html#a5f074967d76067c52aaebbf8edd580f4">Unit::IsScriptOverriden</a></div><div class="ttdeci">AuraEffect * IsScriptOverriden(SpellInfo const *spell, int32 script) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l05285">Unit.cpp:5285</a></div></div>
<div class="ttc" id="aclass_unit_html_a8ef92f1d3a61f9fb2c8c24323d5d24af"><div class="ttname"><a href="../../da/db7/class_unit.html#a8ef92f1d3a61f9fb2c8c24323d5d24af">Unit::GetDummyAuraEffect</a></div><div class="ttdeci">AuraEffect * GetDummyAuraEffect(SpellFamilyNames name, uint32 iconId, uint8 effIndex) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l02056">Unit.h:2056</a></div></div>
<div class="ttc" id="aclass_unit_html_a9bf14ad2afa43d552c76b843615a8bf8"><div class="ttname"><a href="../../da/db7/class_unit.html#a9bf14ad2afa43d552c76b843615a8bf8">Unit::SetPower</a></div><div class="ttdeci">void SetPower(Powers power, uint32 val)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l14707">Unit.cpp:14707</a></div></div>
<div class="ttc" id="aclass_unit_html_acb800095887418d08fdfa8ade11f0074"><div class="ttname"><a href="../../da/db7/class_unit.html#acb800095887418d08fdfa8ade11f0074">Unit::RestoreDisplayId</a></div><div class="ttdeci">void RestoreDisplayId()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l16079">Unit.cpp:16079</a></div></div>
<div class="ttc" id="aclass_unit_html_ad0d777d08ff539fa2e7be49e948025da"><div class="ttname"><a href="../../da/db7/class_unit.html#ad0d777d08ff539fa2e7be49e948025da">Unit::getTransForm</a></div><div class="ttdeci">uint32 getTransForm() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l02259">Unit.h:2259</a></div></div>
<div class="ttc" id="aclass_unit_html_ad44d31430fab9282a79e8682822ccd9c"><div class="ttname"><a href="../../da/db7/class_unit.html#ad44d31430fab9282a79e8682822ccd9c">Unit::getPowerType</a></div><div class="ttdeci">Powers getPowerType() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01578">Unit.h:1578</a></div></div>
<div class="ttc" id="aclass_unit_html_ad6df47a81f5f5f147e68211ee935b398"><div class="ttname"><a href="../../da/db7/class_unit.html#ad6df47a81f5f5f147e68211ee935b398">Unit::RemoveAurasByType</a></div><div class="ttdeci">void RemoveAurasByType(AuraType auraType, ObjectGuid casterGUID=ObjectGuid::Empty, Aura *except=nullptr, bool negative=true, bool positive=true)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l04610">Unit.cpp:4610</a></div></div>
<div class="ttc" id="aclass_unit_html_ad7e475d80b9af430cc076d7c01f967e9"><div class="ttname"><a href="../../da/db7/class_unit.html#ad7e475d80b9af430cc076d7c01f967e9">Unit::GetPower</a></div><div class="ttdeci">uint32 GetPower(Powers power) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01580">Unit.h:1580</a></div></div>
<div class="ttc" id="aclass_unit_html_ae3f55fb49c678fcf64976fa0ce77d0c1"><div class="ttname"><a href="../../da/db7/class_unit.html#ae3f55fb49c678fcf64976fa0ce77d0c1">Unit::setPowerType</a></div><div class="ttdeci">void setPowerType(Powers power)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l09418">Unit.cpp:9418</a></div></div>
<div class="ttc" id="aclass_unit_html_aef7ea224b5f42ee3de39782345dfe931"><div class="ttname"><a href="../../da/db7/class_unit.html#aef7ea224b5f42ee3de39782345dfe931">Unit::SetShapeshiftForm</a></div><div class="ttdeci">void SetShapeshiftForm(ShapeshiftForm form)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l02154">Unit.h:2154</a></div></div>
<div class="ttc" id="amy__global_8h_html_ac6afabdc09a49a433ee19d8a9486056d"><div class="ttname"><a href="../../d9/df6/my__global_8h.html#ac6afabdc09a49a433ee19d8a9486056d">min</a></div><div class="ttdeci">#define min(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df6/my__global_8h_source.html#l01387">my_global.h:1387</a></div></div>
<div class="ttc" id="asrc_2common_2_utilities_2_random_8cpp_html_ab17def34ccbbd868dc87a16bf35acdbd"><div class="ttname"><a href="../../d9/de8/src_2common_2_utilities_2_random_8cpp.html#ab17def34ccbbd868dc87a16bf35acdbd">urand</a></div><div class="ttdeci">uint32 urand(uint32 min, uint32 max)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de8/src_2common_2_utilities_2_random_8cpp_source.html#l00044">Random.cpp:44</a></div></div>
<div class="ttc" id="astruct_spell_shapeshift_entry_html"><div class="ttname"><a href="../../d5/dae/struct_spell_shapeshift_entry.html">SpellShapeshiftEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/_d_b_c_structure_8h_source.html#l01742">DBCStructure.h:1743</a></div></div>
<div class="ttc" id="astruct_spell_shapeshift_entry_html_a18f4d6a3a157eab436fa5790b6eeb520"><div class="ttname"><a href="../../d5/dae/struct_spell_shapeshift_entry.html#a18f4d6a3a157eab436fa5790b6eeb520">SpellShapeshiftEntry::stanceSpell</a></div><div class="ttdeci">uint32 stanceSpell[MAX_SHAPESHIFT_SPELLS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/_d_b_c_structure_8h_source.html#l01756">DBCStructure.h:1756</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d82/_player_8cpp_source.html#l02994">Player::_addSpell()</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l06683">Player::_ApplyWeaponDamage()</a>, <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00051">AURA_EFFECT_HANDLE_REAL_OR_REAPPLY_MASK</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00555">BASE_ATTACK</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l14008">Unit::CalculateSpellDamage()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01705">Unit::CanUseAttackType()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01144">Unit::CastCustomSpell()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01087">Unit::CastSpell()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00123">CLASS_DRUID</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00122">ObjectGuid::Empty</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l00671">EQUIPMENT_SLOT_MAINHAND</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00205">FORM_AMBIENT</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00203">FORM_AQUA</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00216">FORM_BATTLESTANCE</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00204">FORM_BEAR</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00218">FORM_BERSERKERSTANCE</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00211">FORM_BLB_PLAYER</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00200">FORM_CAT</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00213">FORM_CREATUREBEAR</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00214">FORM_CREATURECAT</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00217">FORM_DEFENSIVESTANCE</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00207">FORM_DIREBEAR</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00226">FORM_FLIGHT</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00224">FORM_FLIGHT_EPIC</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00215">FORM_GHOSTWOLF</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00206">FORM_GHOUL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00223">FORM_MASTER_ANGLER</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00221">FORM_METAMORPHOSIS</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00228">FORM_MOONKIN</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00199">FORM_NONE</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00225">FORM_SHADOW</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00212">FORM_SHADOW_DANCE</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00229">FORM_SPIRITOFREDEMPTION</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00227">FORM_STEALTH</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00208">FORM_STEVES_GHOUL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00219">FORM_TEST</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00210">FORM_TEST_OF_STRENGTH</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00209">FORM_THARONJA_SKELETON</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00202">FORM_TRAVEL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00201">FORM_TREE</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00222">FORM_UNDEAD</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00220">FORM_ZOMBIE</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l01673">Player::GetActiveSpec()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04989">Unit::GetAuraEffect()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">GetBase()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01545">Unit::getClass()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02056">Unit::GetDummyAuraEffect()</a>, <a class="el" href="../../d4/d16/_player_storage_8cpp_source.html#l00469">Player::GetItemByPos()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l18299">Unit::GetModelForForm()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01580">Unit::GetPower()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01578">Unit::getPowerType()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00073">AuraApplication::GetRemoveMode()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l01705">Player::GetSpellMap()</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l02566">Player::GetTalentMap()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02259">Unit::getTransForm()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01189">HandleShapeshiftBoosts()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05194">Unit::HasAuraType()</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l09838">Player::InitDataForForm()</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l00651">INVENTORY_SLOT_BAG_0</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16058">Unit::IsPolymorphed()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05285">Unit::IsScriptOverriden()</a>, <a class="el" href="../../d3/d07/src_2common_2_logging_2_log_8h_source.html#l00261">LOG_ERROR</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00115">m_spellInfo</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l01386">max</a>, <a class="el" href="../../d1/d22/_d_b_c_structure_8h_source.html#l01740">MAX_SHAPESHIFT_SPELLS</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l01387">min</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l00117">PLAYERSPELL_REMOVED</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00244">POWER_ENERGY</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00241">POWER_MANA</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00242">POWER_RAGE</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04769">Unit::RemoveAurasByShapeShift()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04610">Unit::RemoveAurasByType()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04420">Unit::RemoveAurasDueToSpell()</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l03223">Player::removeSpell()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16079">Unit::RestoreDisplayId()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16071">Unit::SetDisplayId()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l14707">Unit::SetPower()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l09418">Unit::setPowerType()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02154">Unit::SetShapeshiftForm()</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l00172">SPEC_MASK_ALL</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00383">SPELL_ATTR0_NO_IMMUNITIES</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00094">SPELL_AURA_MOD_INCREASE_SPEED</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00099">SPELL_AURA_MOD_SHAPESHIFT</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l03461">SPELLFAMILY_DRUID</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l03462">SPELLFAMILY_ROGUE</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l03458">SPELLFAMILY_WARRIOR</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00381">SpellInfo::SpellFamilyName</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00375">SpellInfo::SpellIconID</a>, <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00794">sSpellMgr</a>, <a class="el" href="../../dd/d17/_d_b_c_stores_8cpp.html#a752a8f80c3235d905725fc9e54838a4d">sSpellShapeshiftStore</a>, <a class="el" href="../../d1/d22/_d_b_c_structure_8h_source.html#l01756">SpellShapeshiftEntry::stanceSpell</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../d9/de8/src_2common_2_utilities_2_random_8cpp_source.html#l00044">urand()</a>.</p>

</div>
</div>
<a id="aca9f7031c1091b23080c4c8d827fa0e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca9f7031c1091b23080c4c8d827fa0e3">&#9670;&nbsp;</a></span>HandleAuraModSilence()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModSilence </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02583">2583</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;{</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160; </div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160; </div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;    {</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a79a7a80acdec46961b4d8aaead4ae631">SetFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881aab4868b631f1cfaf30faee627f7c9dbf">UNIT_FIELD_FLAGS</a>, <a class="code" href="../../d5/d32/_unit_8h.html#afaf72688a238d4ba16ba2ae1444cd552ac5e049a6b427ad34206151958117403e">UNIT_FLAG_SILENCED</a>);</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160; </div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;        <span class="comment">// call functions which may have additional effects after chainging state of unit</span></div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;        <span class="comment">// Stop cast only spells vs PreventionType == SPELL_PREVENTION_TYPE_SILENCE</span></div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> i = <a class="code" href="../../d5/d32/_unit_8h.html#ab791040bd6d685b1fd2cfd12c96d0a1fabf840fee2a2e133105c6a92a7b43a272">CURRENT_MELEE_SPELL</a>; i &lt; <a class="code" href="../../d5/d32/_unit_8h.html#aa55ee1b0aa8f9779fbe5f0c4eeaf6bed">CURRENT_MAX_SPELL</a>; ++i)</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d8/d0d/class_spell.html">Spell</a>* spell = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a6a942f7bfc8e8ea98ab52a0172970a35">GetCurrentSpell</a>(<a class="code" href="../../d5/d32/_unit_8h.html#ab791040bd6d685b1fd2cfd12c96d0a1f">CurrentSpellTypes</a>(i)))</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;                <span class="keywordflow">if</span> (spell-&gt;m_spellInfo-&gt;PreventionType == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3194644c6ed7acd85ec8eb1b98821b8ea03702a6fae99a6fc1b0ebf339a86865e">SPELL_PREVENTION_TYPE_SILENCE</a>)</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;                    <span class="comment">// Stop spells on prepare or casting state</span></div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a080cb9749e810cdb61c36430b179c26f">InterruptSpell</a>(<a class="code" href="../../d5/d32/_unit_8h.html#ab791040bd6d685b1fd2cfd12c96d0a1f">CurrentSpellTypes</a>(i), <span class="keyword">false</span>);</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;    }</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;    {</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;        <span class="comment">// do not remove unit flag if there are more than this auraEffect of that kind on unit on unit</span></div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a6c684b941fc93d5488ff49a976973596">SPELL_AURA_MOD_SILENCE</a>) || target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799aab7e99142d3a87d93f8586e2a9cd81c8">SPELL_AURA_MOD_PACIFY_SILENCE</a>))</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160; </div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a7e764fbd4b7eca84f80e36e900bca7d3">RemoveFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881aab4868b631f1cfaf30faee627f7c9dbf">UNIT_FIELD_FLAGS</a>, <a class="code" href="../../d5/d32/_unit_8h.html#afaf72688a238d4ba16ba2ae1444cd552ac5e049a6b427ad34206151958117403e">UNIT_FLAG_SILENCED</a>);</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;    }</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_a3194644c6ed7acd85ec8eb1b98821b8ea03702a6fae99a6fc1b0ebf339a86865e"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a3194644c6ed7acd85ec8eb1b98821b8ea03702a6fae99a6fc1b0ebf339a86865e">SPELL_PREVENTION_TYPE_SILENCE</a></div><div class="ttdeci">@ SPELL_PREVENTION_TYPE_SILENCE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01526">SharedDefines.h:1526</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a6c684b941fc93d5488ff49a976973596"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a6c684b941fc93d5488ff49a976973596">SPELL_AURA_MOD_SILENCE</a></div><div class="ttdeci">@ SPELL_AURA_MOD_SILENCE</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00090">SpellAuraDefines.h:90</a></div></div>
<div class="ttc" id="a_unit_8h_html_aa55ee1b0aa8f9779fbe5f0c4eeaf6bed"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#aa55ee1b0aa8f9779fbe5f0c4eeaf6bed">CURRENT_MAX_SPELL</a></div><div class="ttdeci">#define CURRENT_MAX_SPELL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01113">Unit.h:1113</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab791040bd6d685b1fd2cfd12c96d0a1f"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab791040bd6d685b1fd2cfd12c96d0a1f">CurrentSpellTypes</a></div><div class="ttdeci">CurrentSpellTypes</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01104">Unit.h:1105</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab791040bd6d685b1fd2cfd12c96d0a1fabf840fee2a2e133105c6a92a7b43a272"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab791040bd6d685b1fd2cfd12c96d0a1fabf840fee2a2e133105c6a92a7b43a272">CURRENT_MELEE_SPELL</a></div><div class="ttdeci">@ CURRENT_MELEE_SPELL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01106">Unit.h:1106</a></div></div>
<div class="ttc" id="a_unit_8h_html_afaf72688a238d4ba16ba2ae1444cd552ac5e049a6b427ad34206151958117403e"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#afaf72688a238d4ba16ba2ae1444cd552ac5e049a6b427ad34206151958117403e">UNIT_FLAG_SILENCED</a></div><div class="ttdeci">@ UNIT_FLAG_SILENCED</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00619">Unit.h:619</a></div></div>
<div class="ttc" id="aclass_unit_html_a080cb9749e810cdb61c36430b179c26f"><div class="ttname"><a href="../../da/db7/class_unit.html#a080cb9749e810cdb61c36430b179c26f">Unit::InterruptSpell</a></div><div class="ttdeci">void InterruptSpell(CurrentSpellTypes spellType, bool withDelayed=true, bool withInstant=true, bool bySelf=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l03589">Unit.cpp:3589</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01113">CURRENT_MAX_SPELL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01106">CURRENT_MELEE_SPELL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02143">Unit::GetCurrentSpell()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05194">Unit::HasAuraType()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l03589">Unit::InterruptSpell()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00851">Object::RemoveFlag()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00836">Object::SetFlag()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00123">SPELL_AURA_MOD_PACIFY_SILENCE</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00090">SPELL_AURA_MOD_SILENCE</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01526">SPELL_PREVENTION_TYPE_SILENCE</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00117">UNIT_FIELD_FLAGS</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00619">UNIT_FLAG_SILENCED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02633">HandleAuraModPacifyAndSilence()</a>.</p>

</div>
</div>
<a id="a6a0bdae4c5cae40a812b7cf5b00f4233"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a0bdae4c5cae40a812b7cf5b00f4233">&#9670;&nbsp;</a></span>HandleAuraModSkill()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModSkill </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02784">2784</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;{</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288aaf4c81ebe8cba51f1c5d7b5001d41600">AURA_EFFECT_HANDLE_SKILL</a>)))</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160; </div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160; </div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> prot = <a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>();</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> points = <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>();</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160; </div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;    target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#aa54c231ef84c1e324f81c67fa1f55ac2">ModifySkillBonus</a>(prot, ((<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>) ? points : -points), <a class="code" href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>() == <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799af738b7ff53fd0abfed65bad7827a482b">SPELL_AURA_MOD_SKILL_TALENT</a>);</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;    <span class="keywordflow">if</span> (prot == <a class="code" href="../../df/d0b/_shared_defines_8h.html#af4541d30ebbff76b1f9f689519789234a1c73e94578e3650948e1848854274649">SKILL_DEFENSE</a>)</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#adb3b88c4fe2061e13c6653cf3bd8967e">UpdateDefenseBonusesMod</a>();</div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_af4541d30ebbff76b1f9f689519789234a1c73e94578e3650948e1848854274649"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#af4541d30ebbff76b1f9f689519789234a1c73e94578e3650948e1848854274649">SKILL_DEFENSE</a></div><div class="ttdeci">@ SKILL_DEFENSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l02851">SharedDefines.h:2851</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799af738b7ff53fd0abfed65bad7827a482b"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799af738b7ff53fd0abfed65bad7827a482b">SPELL_AURA_MOD_SKILL_TALENT</a></div><div class="ttdeci">@ SPELL_AURA_MOD_SKILL_TALENT</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00161">SpellAuraDefines.h:161</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a82ebee9e3cf7eaf2ab892a6eb7796288aaf4c81ebe8cba51f1c5d7b5001d41600"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288aaf4c81ebe8cba51f1c5d7b5001d41600">AURA_EFFECT_HANDLE_SKILL</a></div><div class="ttdeci">@ AURA_EFFECT_HANDLE_SKILL</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00047">SpellAuraDefines.h:47</a></div></div>
<div class="ttc" id="aclass_player_html_aa54c231ef84c1e324f81c67fa1f55ac2"><div class="ttname"><a href="../../d8/d53/class_player.html#aa54c231ef84c1e324f81c67fa1f55ac2">Player::ModifySkillBonus</a></div><div class="ttdeci">void ModifySkillBonus(uint32 skillid, int32 val, bool talent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/_player_8cpp_source.html#l05144">Player.cpp:5144</a></div></div>
<div class="ttc" id="aclass_player_html_adb3b88c4fe2061e13c6653cf3bd8967e"><div class="ttname"><a href="../../d8/d53/class_player.html#adb3b88c4fe2061e13c6653cf3bd8967e">Player::UpdateDefenseBonusesMod</a></div><div class="ttdeci">void UpdateDefenseBonusesMod()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d07/_stat_system_8cpp_source.html#l00594">StatSystem.cpp:594</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00047">AURA_EFFECT_HANDLE_SKILL</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00446">GetAuraType()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l05144">Player::ModifySkillBonus()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l02851">SKILL_DEFENSE</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00161">SPELL_AURA_MOD_SKILL_TALENT</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../df/d07/_stat_system_8cpp_source.html#l00594">Player::UpdateDefenseBonusesMod()</a>.</p>

</div>
</div>
<a id="ab3f2b2299c080928ff7211a98a6237b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3f2b2299c080928ff7211a98a6237b5">&#9670;&nbsp;</a></span>HandleAuraModStalked()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModStalked </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02726">2726</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;{</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160; </div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160; </div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;    <span class="comment">// used by spells: Hunter&#39;s Mark, Mind Vision, Syndicate Tracker (MURP) DND</span></div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a79a7a80acdec46961b4d8aaead4ae631">SetFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881affa05042cc4016a32cf1a66d4157d03d">UNIT_DYNAMIC_FLAGS</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a6d2f7a5452237dadf8fd3aed70f44039a55f87e0bbcb3a94aec5a9e2c7a771790">UNIT_DYNFLAG_TRACK_UNIT</a>);</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;    {</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;        <span class="comment">// do not remove unit flag if there are more than this auraEffect of that kind on unit on unit</span></div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;        <span class="keywordflow">if</span> (!target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>()))</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;            target-&gt;<a class="code" href="../../d8/d83/class_object.html#a7e764fbd4b7eca84f80e36e900bca7d3">RemoveFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881affa05042cc4016a32cf1a66d4157d03d">UNIT_DYNAMIC_FLAGS</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a6d2f7a5452237dadf8fd3aed70f44039a55f87e0bbcb3a94aec5a9e2c7a771790">UNIT_DYNFLAG_TRACK_UNIT</a>);</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;    }</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160; </div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;    <span class="comment">// call functions which may have additional effects after chainging state of unit</span></div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5b2b731101a2c33063cef5c59e595249">UpdateObjectVisibility</a>(target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>);</div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_a6d2f7a5452237dadf8fd3aed70f44039a55f87e0bbcb3a94aec5a9e2c7a771790"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a6d2f7a5452237dadf8fd3aed70f44039a55f87e0bbcb3a94aec5a9e2c7a771790">UNIT_DYNFLAG_TRACK_UNIT</a></div><div class="ttdeci">@ UNIT_DYNFLAG_TRACK_UNIT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l03092">SharedDefines.h:3092</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00446">GetAuraType()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05194">Unit::HasAuraType()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00851">Object::RemoveFlag()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00836">Object::SetFlag()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00136">UNIT_DYNAMIC_FLAGS</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l03092">UNIT_DYNFLAG_TRACK_UNIT</a>, and <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l18229">Unit::UpdateObjectVisibility()</a>.</p>

</div>
</div>
<a id="ad7e8903a35da1f0660f5ccf53eb1e182"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7e8903a35da1f0660f5ccf53eb1e182">&#9670;&nbsp;</a></span>HandleAuraModStat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModStat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03997">3997</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;{</div>
<div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160; </div>
<div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160; </div>
<div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &lt; -2 || <a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &gt; 4)</div>
<div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;    {</div>
<div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;        <a class="code" href="../../d3/d07/src_2common_2_logging_2_log_8h.html#a43832e3fa8508deb4ce43e520005fcd9">LOG_ERROR</a>(<span class="stringliteral">&quot;spells.aura.effect&quot;</span>, <span class="stringliteral">&quot;WARNING: Spell %u effect %u has an unsupported misc value (%i) for SPELL_AURA_MOD_STAT &quot;</span>, <a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>(), <a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;    }</div>
<div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160; </div>
<div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> i = <a class="code" href="../../df/d0b/_shared_defines_8h.html#ad28c24e82986133459dee232a5360bc4aa8b5028ba51024ead888adb32c0b7778">STAT_STRENGTH</a>; i &lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a0f8923f02eb7dfba43a426b8320354da">MAX_STATS</a>; i++)</div>
<div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;    {</div>
<div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;        <span class="comment">// -1 or -2 is all stats (misc &lt; -2 checked in function beginning)</span></div>
<div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &lt; 0 || <a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == i)</div>
<div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;        {</div>
<div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;            <span class="comment">//target-&gt;ApplyStatMod(Stats(i), m_amount, apply);</span></div>
<div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bde">UnitMods</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdeae4231ed105be6058ed4deb6b4a5f3ba0">UNIT_MOD_STAT_START</a> + i), <a class="code" href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eea85637bc3b7127fbfc1d35d5e3ca4a95c">TOTAL_VALUE</a>, <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;            <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a> || target-&gt;<a class="code" href="../../da/db7/class_unit.html#a4ad2fdcc45e2c3c85ad59ff49268b58c">IsPet</a>())</div>
<div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#a332bb1d1368d49a5d0fd54eaaf5f4e9a">ApplyStatBuffMod</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#ad28c24e82986133459dee232a5360bc4">Stats</a>(i), (<span class="keywordtype">float</span>)<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;        }</div>
<div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;    }</div>
<div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_a0f8923f02eb7dfba43a426b8320354da"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a0f8923f02eb7dfba43a426b8320354da">MAX_STATS</a></div><div class="ttdeci">#define MAX_STATS</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00237">SharedDefines.h:237</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_ad28c24e82986133459dee232a5360bc4"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#ad28c24e82986133459dee232a5360bc4">Stats</a></div><div class="ttdeci">Stats</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00228">SharedDefines.h:229</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_ad28c24e82986133459dee232a5360bc4aa8b5028ba51024ead888adb32c0b7778"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#ad28c24e82986133459dee232a5360bc4aa8b5028ba51024ead888adb32c0b7778">STAT_STRENGTH</a></div><div class="ttdeci">@ STAT_STRENGTH</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00230">SharedDefines.h:230</a></div></div>
<div class="ttc" id="a_unit_8h_html_a4c5336cd4be5f0162bd4874b0a1e5bdeae4231ed105be6058ed4deb6b4a5f3ba0"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdeae4231ed105be6058ed4deb6b4a5f3ba0">UNIT_MOD_STAT_START</a></div><div class="ttdeci">@ UNIT_MOD_STAT_START</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00448">Unit.h:448</a></div></div>
<div class="ttc" id="aclass_unit_html_a332bb1d1368d49a5d0fd54eaaf5f4e9a"><div class="ttname"><a href="../../da/db7/class_unit.html#a332bb1d1368d49a5d0fd54eaaf5f4e9a">Unit::ApplyStatBuffMod</a></div><div class="ttdeci">void ApplyStatBuffMod(Stats stat, float val, bool apply)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l02113">Unit.h:2113</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02113">Unit::ApplyStatBuffMod()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00049">GetEffIndex()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">GetId()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l14345">Unit::HandleStatModifier()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01534">Unit::IsPet()</a>, <a class="el" href="../../d3/d07/src_2common_2_logging_2_log_8h_source.html#l00261">LOG_ERROR</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00237">MAX_STATS</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00230">STAT_STRENGTH</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00373">TOTAL_VALUE</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00448">UNIT_MOD_STAT_START</a>.</p>

</div>
</div>
<a id="a8896bc940fa9cfe2a0cdea0cc27465bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8896bc940fa9cfe2a0cdea0cc27465bc">&#9670;&nbsp;</a></span>HandleAuraModStateImmunity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModStateImmunity </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03767">3767</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;{</div>
<div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160; </div>
<div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160; </div>
<div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9a1c2e514db062426deb4673fb86e3459e">IMMUNITY_STATE</a>, <a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>(), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160; </div>
<div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a> &amp;&amp; <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;HasAttribute(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a638f8f550e23b2e3180b481bb3f38076ab2ba4cd294111dc378e33055074250be">SPELL_ATTR1_IMMUNITY_PURGES_EFFECT</a>))</div>
<div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#ad6df47a81f5f5f147e68211ee935b398">RemoveAurasByType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799">AuraType</a>(<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>()), <a class="code" href="../../d8/d03/class_object_guid.html#a14039d3f3df79203693f713495503165">ObjectGuid::Empty</a>, <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>());</div>
<div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_a91d505a1e789c6ea6a338f3a3c85b6b9a1c2e514db062426deb4673fb86e3459e"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9a1c2e514db062426deb4673fb86e3459e">IMMUNITY_STATE</a></div><div class="ttdeci">@ IMMUNITY_STATE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01367">SharedDefines.h:1367</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l12604">Unit::ApplySpellImmune()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00122">ObjectGuid::Empty</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">GetBase()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">GetId()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01367">IMMUNITY_STATE</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04610">Unit::RemoveAurasByType()</a>, and <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00406">SPELL_ATTR1_IMMUNITY_PURGES_EFFECT</a>.</p>

</div>
</div>
<a id="a09506ef85197dd61fba8127fa65d8925"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09506ef85197dd61fba8127fa65d8925">&#9670;&nbsp;</a></span>HandleAuraModStun()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModStun </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03051">3051</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;{</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160; </div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160; </div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a2903449b4183e13866c6e98d77578887">SetControlled</a>(<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>, <a class="code" href="../../d5/d32/_unit_8h.html#ae51d2ecb71f7a5cb3882982a622c9544aefe799c73ede1e5d5ffed28f69074106">UNIT_STATE_STUNNED</a>);</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;}</div>
<div class="ttc" id="a_unit_8h_html_ae51d2ecb71f7a5cb3882982a622c9544aefe799c73ede1e5d5ffed28f69074106"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ae51d2ecb71f7a5cb3882982a622c9544aefe799c73ede1e5d5ffed28f69074106">UNIT_STATE_STUNNED</a></div><div class="ttdeci">@ UNIT_STATE_STUNNED</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00487">Unit.h:487</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l17189">Unit::SetControlled()</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00487">UNIT_STATE_STUNNED</a>.</p>

</div>
</div>
<a id="a56f6eebde660cfadaeaccaf8ebc4b6b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56f6eebde660cfadaeaccaf8ebc4b6b9">&#9670;&nbsp;</a></span>HandleAuraModTotalThreat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModTotalThreat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02989">2989</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;{</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>))</div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160; </div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160; </div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;    <span class="keywordflow">if</span> (!target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5ea3f54af571493f7889220724667189">IsAlive</a>() || target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160; </div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* caster = <a class="code" href="../../da/df1/class_aura_effect.html#a29cf330277aeb89d17d18f6e112f035b">GetCaster</a>();</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;    <span class="keywordflow">if</span> (caster &amp;&amp; caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a5ea3f54af571493f7889220724667189">IsAlive</a>())</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a7f568bbe5292ed618cd40bde9297b094">getHostileRefMgr</a>().<a class="code" href="../../d9/d07/class_hostile_ref_mgr.html#a2c74a35806e10917a5d619dcf785f5a5">addTempThreat</a>((<span class="keywordtype">float</span>)<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;}</div>
<div class="ttc" id="aclass_hostile_ref_mgr_html_a2c74a35806e10917a5d619dcf785f5a5"><div class="ttname"><a href="../../d9/d07/class_hostile_ref_mgr.html#a2c74a35806e10917a5d619dcf785f5a5">HostileRefMgr::addTempThreat</a></div><div class="ttdeci">void addTempThreat(float threat, bool apply)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d30/_hostile_ref_mgr_8cpp_source.html#l00054">HostileRefMgr.cpp:54</a></div></div>
<div class="ttc" id="aclass_unit_html_a7f568bbe5292ed618cd40bde9297b094"><div class="ttname"><a href="../../da/db7/class_unit.html#a7f568bbe5292ed618cd40bde9297b094">Unit::getHostileRefMgr</a></div><div class="ttdeci">HostileRefMgr &amp; getHostileRefMgr()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l02236">Unit.h:2236</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d1/d30/_hostile_ref_mgr_8cpp_source.html#l00054">HostileRefMgr::addTempThreat()</a>, <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00040">GetCaster()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02236">Unit::getHostileRefMgr()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01888">Unit::IsAlive()</a>, and <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>.</p>

</div>
</div>
<a id="ae1672988a44e4d7f5d73c561892a9c72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1672988a44e4d7f5d73c561892a9c72">&#9670;&nbsp;</a></span>HandleAuraModUseNormalSpeed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModUseNormalSpeed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03336">3336</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;{</div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160; </div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160; </div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#ac85eb152580735addb4e7022ae2b3d4c">UpdateSpeed</a>(<a class="code" href="../../d5/d32/_unit_8h.html#af91f7580a89722b7dc45a018bb46fce4ad231571a48b7742c2a432eb7a8a849de">MOVE_RUN</a>,  <span class="keyword">true</span>);</div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#ac85eb152580735addb4e7022ae2b3d4c">UpdateSpeed</a>(<a class="code" href="../../d5/d32/_unit_8h.html#af91f7580a89722b7dc45a018bb46fce4a611a24e7db53ef46584dcfb70d8343e5">MOVE_SWIM</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#ac85eb152580735addb4e7022ae2b3d4c">UpdateSpeed</a>(<a class="code" href="../../d5/d32/_unit_8h.html#af91f7580a89722b7dc45a018bb46fce4a2461b4a7be489c54989eff2c87ae1961">MOVE_FLIGHT</a>,  <span class="keyword">true</span>);</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160; </div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d53/class_player.html">Player</a>* targetPlayer = target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>())</div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;    {</div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;        <a class="code" href="../../d0/d7d/_script_mgr_8h.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a>-&gt;AnticheatSetUnderACKmount(targetPlayer);</div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;    }</div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00543">MOVE_FLIGHT</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00538">MOVE_RUN</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00540">MOVE_SWIM</a>, <a class="el" href="../../d0/d7d/_script_mgr_8h_source.html#l02048">sScriptMgr</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, and <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l13424">Unit::UpdateSpeed()</a>.</p>

</div>
</div>
<a id="a564bd992035746f2702e9cb284d789a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a564bd992035746f2702e9cb284d789a6">&#9670;&nbsp;</a></span>HandleAuraModWeaponCritPercent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModWeaponCritPercent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04428">4428</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;{</div>
<div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160; </div>
<div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160; </div>
<div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160; </div>
<div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa0f966a2f1219b75a945c686c3cad21e4">MAX_ATTACK</a>; ++i)</div>
<div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dc/d32/class_item.html">Item</a>* pItem = target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#ac8e55e9ca3aec15337a7a952aa8efac8">GetWeaponForAttack</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876a">WeaponAttackType</a>(i), <span class="keyword">true</span>))</div>
<div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;            target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a78de8e7893c21b7d996b7a08371b0e37">_ApplyWeaponDependentAuraCritMod</a>(pItem, <a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876a">WeaponAttackType</a>(i), <span class="keyword">this</span>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160; </div>
<div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;    <span class="comment">// mods must be applied base at equipped weapon class and subclass comparison</span></div>
<div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;    <span class="comment">// with spell-&gt;EquippedItemClass and  EquippedItemSubClassMask and EquippedItemInventoryTypeMask</span></div>
<div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;    <span class="comment">// GetMiscValue() comparison with item generated damage types</span></div>
<div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160; </div>
<div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;EquippedItemClass == -1)</div>
<div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;    {</div>
<div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#af85e4f061186ef03c3561aaf1a99a72d">HandleBaseModValue</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a938646605f1e70b8f1613bf9bdb78b4fa75a0f4d4487127ec7c34e7f0f547efb4">CRIT_PERCENTAGE</a>,         <a class="code" href="../../d5/d32/_unit_8h.html#a114d5261840f2cea1ebee7abcad43e10a13f6d70c134b3744ab0581ab8df32177">FLAT_MOD</a>, <span class="keywordtype">float</span> (<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#af85e4f061186ef03c3561aaf1a99a72d">HandleBaseModValue</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a938646605f1e70b8f1613bf9bdb78b4fa379fa05fe54b3ef17e6e9e2f159b9a8f">OFFHAND_CRIT_PERCENTAGE</a>, <a class="code" href="../../d5/d32/_unit_8h.html#a114d5261840f2cea1ebee7abcad43e10a13f6d70c134b3744ab0581ab8df32177">FLAT_MOD</a>, <span class="keywordtype">float</span> (<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#af85e4f061186ef03c3561aaf1a99a72d">HandleBaseModValue</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a938646605f1e70b8f1613bf9bdb78b4faa6c2bba993427bbcd1ee001e9730c59d">RANGED_CRIT_PERCENTAGE</a>,  <a class="code" href="../../d5/d32/_unit_8h.html#a114d5261840f2cea1ebee7abcad43e10a13f6d70c134b3744ab0581ab8df32177">FLAT_MOD</a>, <span class="keywordtype">float</span> (<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;    }</div>
<div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;    {</div>
<div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;        <span class="comment">// done in Player::_ApplyWeaponDependentAuraMods</span></div>
<div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;    }</div>
<div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;}</div>
<div class="ttc" id="aclass_player_html_a78de8e7893c21b7d996b7a08371b0e37"><div class="ttname"><a href="../../d8/d53/class_player.html#a78de8e7893c21b7d996b7a08371b0e37">Player::_ApplyWeaponDependentAuraCritMod</a></div><div class="ttdeci">void _ApplyWeaponDependentAuraCritMod(Item *item, WeaponAttackType attackType, AuraEffect const *aura, bool apply)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/_player_8cpp_source.html#l06780">Player.cpp:6780</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d82/_player_8cpp_source.html#l06780">Player::_ApplyWeaponDependentAuraCritMod()</a>, <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00458">CRIT_PERCENTAGE</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00467">FLAT_MOD</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d4/d16/_player_storage_8cpp_source.html#l00516">Player::GetWeaponForAttack()</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l04853">Player::HandleBaseModValue()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00558">MAX_ATTACK</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00460">OFFHAND_CRIT_PERCENTAGE</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00459">RANGED_CRIT_PERCENTAGE</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, and <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>.</p>

</div>
</div>
<a id="a5e6d66aa4247cf56b528a1fe2c2eae37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e6d66aa4247cf56b528a1fe2c2eae37">&#9670;&nbsp;</a></span>HandleAuraMounted()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraMounted </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02805">2805</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;{</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160; </div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160; </div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;    {</div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;        <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> creatureEntry = <a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>();</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160; </div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;        <span class="comment">// Festive Holiday Mount</span></div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a69c5ac45b65cf0dede6e0ee837361f61">HasAura</a>(62061))</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;        {</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;HasEffectType(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799aee4933438da47b18e67ffeb26e91f20b">SPELL_AURA_MOD_INCREASE_MOUNTED_FLIGHT_SPEED</a>))</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;                creatureEntry = 24906;</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;                creatureEntry = 15665;</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;        }</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160; </div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;        <a class="code" href="../../d2/d0b/struct_creature_template.html">CreatureTemplate</a> <span class="keyword">const</span>* ci = <a class="code" href="../../d9/d77/_object_mgr_8h.html#a736e30da2b5261060ac6cdbb5de3b787">sObjectMgr</a>-&gt;GetCreatureTemplate(creatureEntry);</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;        <span class="keywordflow">if</span> (!ci)</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;        {</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;            <a class="code" href="../../d3/d07/src_2common_2_logging_2_log_8h.html#a43832e3fa8508deb4ce43e520005fcd9">LOG_ERROR</a>(<span class="stringliteral">&quot;sql.sql&quot;</span>, <span class="stringliteral">&quot;AuraMounted: `creature_template`=&#39;%u&#39; not found in database (only need its modelid)&quot;</span>, <a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;        }</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160; </div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;        <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> displayID = <a class="code" href="../../d5/dbd/class_object_mgr.html#afd79285cbabfdd6097853626df3083e3">ObjectMgr::ChooseDisplayId</a>(ci);</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;        <a class="code" href="../../d9/d77/_object_mgr_8h.html#a736e30da2b5261060ac6cdbb5de3b787">sObjectMgr</a>-&gt;GetCreatureModelRandomGender(&amp;displayID);</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160; </div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;        <span class="comment">//some spell has one aura of mount and one of vehicle</span></div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> i = 0; i &lt; <a class="code" href="../../d1/d22/_d_b_c_structure_8h.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>; ++i)</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;Effects[i].Effect == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a292c893150c454dd75628b719db1fe97aa7be476935ce81144c2b383b7af7bf47">SPELL_EFFECT_SUMMON</a></div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;                    &amp;&amp; <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;Effects[i].MiscValue == <a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>())</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;                displayID = 0;</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160; </div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a76a05f1a743edc939472c8402674b5e0">Mount</a>(displayID, ci-&gt;<a class="code" href="../../d2/d0b/struct_creature_template.html#a577c6f90b926b2ee7403d7a22dac78b9">VehicleId</a>, <a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;    }</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;    {</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a4c786d459751c90df99fb7f1526e43e7">Dismount</a>();</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;        <span class="comment">//some mounts like Headless Horseman&#39;s Mount or broom stick are skill based spell</span></div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;        <span class="comment">// need to remove ALL arura related to mounts, this will stop client crash with broom stick</span></div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;        <span class="comment">// and never endless flying after using Headless Horseman&#39;s Mount</span></div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;        <span class="keywordflow">if</span> (mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>)</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#ad6df47a81f5f5f147e68211ee935b398">RemoveAurasByType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a8cec8a45f78b8555b8f13b8b00995acf">SPELL_AURA_MOUNTED</a>);</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;    }</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_a292c893150c454dd75628b719db1fe97aa7be476935ce81144c2b383b7af7bf47"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a292c893150c454dd75628b719db1fe97aa7be476935ce81144c2b383b7af7bf47">SPELL_EFFECT_SUMMON</a></div><div class="ttdeci">@ SPELL_EFFECT_SUMMON</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00778">SharedDefines.h:778</a></div></div>
<div class="ttc" id="aclass_unit_html_a4c786d459751c90df99fb7f1526e43e7"><div class="ttname"><a href="../../da/db7/class_unit.html#a4c786d459751c90df99fb7f1526e43e7">Unit::Dismount</a></div><div class="ttdeci">void Dismount()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l12739">Unit.cpp:12739</a></div></div>
<div class="ttc" id="aclass_unit_html_a69c5ac45b65cf0dede6e0ee837361f61"><div class="ttname"><a href="../../da/db7/class_unit.html#a69c5ac45b65cf0dede6e0ee837361f61">Unit::HasAura</a></div><div class="ttdeci">bool HasAura(uint32 spellId, ObjectGuid casterGUID=ObjectGuid::Empty, ObjectGuid itemCasterGUID=ObjectGuid::Empty, uint8 reqEffMask=0) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l05187">Unit.cpp:5187</a></div></div>
<div class="ttc" id="aclass_unit_html_a76a05f1a743edc939472c8402674b5e0"><div class="ttname"><a href="../../da/db7/class_unit.html#a76a05f1a743edc939472c8402674b5e0">Unit::Mount</a></div><div class="ttdeci">void Mount(uint32 mount, uint32 vehicleId=0, uint32 creatureEntry=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l12680">Unit.cpp:12680</a></div></div>
<div class="ttc" id="astruct_creature_template_html_a577c6f90b926b2ee7403d7a22dac78b9"><div class="ttname"><a href="../../d2/d0b/struct_creature_template.html#a577c6f90b926b2ee7403d7a22dac78b9">CreatureTemplate::VehicleId</a></div><div class="ttdeci">uint32 VehicleId</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de2/_creature_data_8h_source.html#l00133">CreatureData.h:133</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../df/d62/_object_mgr_8cpp_source.html#l01405">ObjectMgr::ChooseDisplayId()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l12739">Unit::Dismount()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">GetBase()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05187">Unit::HasAura()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l01210">Aura::HasEffectType()</a>, <a class="el" href="../../d3/d07/src_2common_2_logging_2_log_8h_source.html#l00261">LOG_ERROR</a>, <a class="el" href="../../d1/d22/_d_b_c_structure_8h_source.html#l01559">MAX_SPELL_EFFECTS</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l12680">Unit::Mount()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04610">Unit::RemoveAurasByType()</a>, <a class="el" href="../../d9/d77/_object_mgr_8h_source.html#l01546">sObjectMgr</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00270">SPELL_AURA_MOD_INCREASE_MOUNTED_FLIGHT_SPEED</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00141">SPELL_AURA_MOUNTED</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00778">SPELL_EFFECT_SUMMON</a>, and <a class="el" href="../../dd/de2/_creature_data_8h_source.html#l00133">CreatureTemplate::VehicleId</a>.</p>

</div>
</div>
<a id="ae5ad5d0e3406e96a0f5e5f58d2c133ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5ad5d0e3406e96a0f5e5f58d2c133ce">&#9670;&nbsp;</a></span>HandleAuraOpenStable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraOpenStable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05637">5637</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05638"></a><span class="lineno"> 5638</span>&#160;{</div>
<div class="line"><a name="l05639"></a><span class="lineno"> 5639</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l05640"></a><span class="lineno"> 5640</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05641"></a><span class="lineno"> 5641</span>&#160; </div>
<div class="line"><a name="l05642"></a><span class="lineno"> 5642</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l05643"></a><span class="lineno"> 5643</span>&#160; </div>
<div class="line"><a name="l05644"></a><span class="lineno"> 5644</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a> || !target-&gt;<a class="code" href="../../d8/d83/class_object.html#a3aeab7def818ba6c50249f197ad2f9ca">IsInWorld</a>())</div>
<div class="line"><a name="l05645"></a><span class="lineno"> 5645</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05646"></a><span class="lineno"> 5646</span>&#160; </div>
<div class="line"><a name="l05647"></a><span class="lineno"> 5647</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l05648"></a><span class="lineno"> 5648</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a1c212b8f9ae8b1a38a41f9c7db005dca">GetSession</a>()-&gt;<a class="code" href="../../d1/d47/class_world_session.html#aeb9c5d11267618b090c926ac7709a3cf">SendStablePet</a>(target-&gt;<a class="code" href="../../d8/d83/class_object.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>());</div>
<div class="line"><a name="l05649"></a><span class="lineno"> 5649</span>&#160; </div>
<div class="line"><a name="l05650"></a><span class="lineno"> 5650</span>&#160;    <span class="comment">// client auto close stable dialog at !apply aura</span></div>
<div class="line"><a name="l05651"></a><span class="lineno"> 5651</span>&#160;}</div>
<div class="ttc" id="aclass_object_html_a3aeab7def818ba6c50249f197ad2f9ca"><div class="ttname"><a href="../../d8/d83/class_object.html#a3aeab7def818ba6c50249f197ad2f9ca">Object::IsInWorld</a></div><div class="ttdeci">bool IsInWorld() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d30/_object_8h_source.html#l00093">Object.h:93</a></div></div>
<div class="ttc" id="aclass_player_html_a1c212b8f9ae8b1a38a41f9c7db005dca"><div class="ttname"><a href="../../d8/d53/class_player.html#a1c212b8f9ae8b1a38a41f9c7db005dca">Player::GetSession</a></div><div class="ttdeci">WorldSession * GetSession() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l01940">Player.h:1940</a></div></div>
<div class="ttc" id="aclass_world_session_html_aeb9c5d11267618b090c926ac7709a3cf"><div class="ttname"><a href="../../d1/d47/class_world_session.html#aeb9c5d11267618b090c926ac7709a3cf">WorldSession::SendStablePet</a></div><div class="ttdeci">void SendStablePet(ObjectGuid guid)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d67/_n_p_c_handler_8cpp_source.html#l00509">NPCHandler.cpp:509</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00098">Object::GetGUID()</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l01940">Player::GetSession()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00093">Object::IsInWorld()</a>, <a class="el" href="../../d0/d67/_n_p_c_handler_8cpp_source.html#l00509">WorldSession::SendStablePet()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, and <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>.</p>

</div>
</div>
<a id="af572ebb2a04d65ef7f1544640b5b51ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af572ebb2a04d65ef7f1544640b5b51ab">&#9670;&nbsp;</a></span>HandleAuraOverrideSpells()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraOverrideSpells </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05694">5694</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05695"></a><span class="lineno"> 5695</span>&#160;{</div>
<div class="line"><a name="l05696"></a><span class="lineno"> 5696</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l05697"></a><span class="lineno"> 5697</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05698"></a><span class="lineno"> 5698</span>&#160; </div>
<div class="line"><a name="l05699"></a><span class="lineno"> 5699</span>&#160;    <a class="code" href="../../d8/d53/class_player.html">Player</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>()-&gt;ToPlayer();</div>
<div class="line"><a name="l05700"></a><span class="lineno"> 5700</span>&#160; </div>
<div class="line"><a name="l05701"></a><span class="lineno"> 5701</span>&#160;    <span class="keywordflow">if</span> (!target || !target-&gt;<a class="code" href="../../d8/d83/class_object.html#a3aeab7def818ba6c50249f197ad2f9ca">IsInWorld</a>())</div>
<div class="line"><a name="l05702"></a><span class="lineno"> 5702</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05703"></a><span class="lineno"> 5703</span>&#160; </div>
<div class="line"><a name="l05704"></a><span class="lineno"> 5704</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> overrideId = <a class="code" href="../../df/de2/namespace_g3_d.html#ae911b90657d7162d47997c702af655a8">uint32</a>(<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><a name="l05705"></a><span class="lineno"> 5705</span>&#160; </div>
<div class="line"><a name="l05706"></a><span class="lineno"> 5706</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l05707"></a><span class="lineno"> 5707</span>&#160;    {</div>
<div class="line"><a name="l05708"></a><span class="lineno"> 5708</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a2c1b0dfb53bdedb46f13733dcde3d216">SetUInt16Value</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a6094e668574a870242f146ac00369951">PLAYER_FIELD_BYTES2</a>, <a class="code" href="../../d1/d39/_player_8h.html#a5762ddb9f9cc6b6a6f8fb2669f6398a3">PLAYER_BYTES_2_OVERRIDE_SPELLS_UINT16_OFFSET</a>, overrideId);</div>
<div class="line"><a name="l05709"></a><span class="lineno"> 5709</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d7/d01/struct_override_spell_data_entry.html">OverrideSpellDataEntry</a> <span class="keyword">const</span>* overrideSpells = <a class="code" href="../../dd/d17/_d_b_c_stores_8cpp.html#a982a7bf247893d62307cef9026cd791d">sOverrideSpellDataStore</a>.LookupEntry(overrideId))</div>
<div class="line"><a name="l05710"></a><span class="lineno"> 5710</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> i = 0; i &lt; <a class="code" href="../../d1/d22/_d_b_c_structure_8h.html#af5ab857719ce6437c52aee4b87c639f3">MAX_OVERRIDE_SPELL</a>; ++i)</div>
<div class="line"><a name="l05711"></a><span class="lineno"> 5711</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellId = overrideSpells-&gt;spellId[i])</div>
<div class="line"><a name="l05712"></a><span class="lineno"> 5712</span>&#160;                    target-&gt;<a class="code" href="../../d8/d53/class_player.html#a107e0be6e83289162958bd63740896d0">_addSpell</a>(spellId, <a class="code" href="../../d1/d39/_player_8h.html#a6a6dfeb0ddba76f8c51abbe98ea08609">SPEC_MASK_ALL</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l05713"></a><span class="lineno"> 5713</span>&#160;    }</div>
<div class="line"><a name="l05714"></a><span class="lineno"> 5714</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l05715"></a><span class="lineno"> 5715</span>&#160;    {</div>
<div class="line"><a name="l05716"></a><span class="lineno"> 5716</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a2c1b0dfb53bdedb46f13733dcde3d216">SetUInt16Value</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a6094e668574a870242f146ac00369951">PLAYER_FIELD_BYTES2</a>, <a class="code" href="../../d1/d39/_player_8h.html#a5762ddb9f9cc6b6a6f8fb2669f6398a3">PLAYER_BYTES_2_OVERRIDE_SPELLS_UINT16_OFFSET</a>, 0);</div>
<div class="line"><a name="l05717"></a><span class="lineno"> 5717</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d7/d01/struct_override_spell_data_entry.html">OverrideSpellDataEntry</a> <span class="keyword">const</span>* overrideSpells = <a class="code" href="../../dd/d17/_d_b_c_stores_8cpp.html#a982a7bf247893d62307cef9026cd791d">sOverrideSpellDataStore</a>.LookupEntry(overrideId))</div>
<div class="line"><a name="l05718"></a><span class="lineno"> 5718</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> i = 0; i &lt; <a class="code" href="../../d1/d22/_d_b_c_structure_8h.html#af5ab857719ce6437c52aee4b87c639f3">MAX_OVERRIDE_SPELL</a>; ++i)</div>
<div class="line"><a name="l05719"></a><span class="lineno"> 5719</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellId = overrideSpells-&gt;spellId[i])</div>
<div class="line"><a name="l05720"></a><span class="lineno"> 5720</span>&#160;                    target-&gt;<a class="code" href="../../d8/d53/class_player.html#a14874da88b7bd1006282e8250b3908ea">removeSpell</a>(spellId, <a class="code" href="../../d1/d39/_player_8h.html#a6a6dfeb0ddba76f8c51abbe98ea08609">SPEC_MASK_ALL</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l05721"></a><span class="lineno"> 5721</span>&#160;    }</div>
<div class="line"><a name="l05722"></a><span class="lineno"> 5722</span>&#160;}</div>
<div class="ttc" id="a_d_b_c_stores_8cpp_html_a982a7bf247893d62307cef9026cd791d"><div class="ttname"><a href="../../dd/d17/_d_b_c_stores_8cpp.html#a982a7bf247893d62307cef9026cd791d">sOverrideSpellDataStore</a></div><div class="ttdeci">DBCStorage&lt; OverrideSpellDataEntry &gt; sOverrideSpellDataStore(OverrideSpellDatafmt)</div></div>
<div class="ttc" id="a_d_b_c_structure_8h_html_af5ab857719ce6437c52aee4b87c639f3"><div class="ttname"><a href="../../d1/d22/_d_b_c_structure_8h.html#af5ab857719ce6437c52aee4b87c639f3">MAX_OVERRIDE_SPELL</a></div><div class="ttdeci">#define MAX_OVERRIDE_SPELL</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/_d_b_c_structure_8h_source.html#l01343">DBCStructure.h:1343</a></div></div>
<div class="ttc" id="a_player_8h_html_a5762ddb9f9cc6b6a6f8fb2669f6398a3"><div class="ttname"><a href="../../d1/d39/_player_8h.html#a5762ddb9f9cc6b6a6f8fb2669f6398a3">PLAYER_BYTES_2_OVERRIDE_SPELLS_UINT16_OFFSET</a></div><div class="ttdeci">#define PLAYER_BYTES_2_OVERRIDE_SPELLS_UINT16_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l00532">Player.h:532</a></div></div>
<div class="ttc" id="a_update_fields_8h_html_a0e42dc606678c9df7884e1aad621e881a6094e668574a870242f146ac00369951"><div class="ttname"><a href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a6094e668574a870242f146ac00369951">PLAYER_FIELD_BYTES2</a></div><div class="ttdeci">@ PLAYER_FIELD_BYTES2</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d65/_update_fields_8h_source.html#l00378">UpdateFields.h:378</a></div></div>
<div class="ttc" id="aclass_object_html_a2c1b0dfb53bdedb46f13733dcde3d216"><div class="ttname"><a href="../../d8/d83/class_object.html#a2c1b0dfb53bdedb46f13733dcde3d216">Object::SetUInt16Value</a></div><div class="ttdeci">void SetUInt16Value(uint16 index, uint8 offset, uint16 value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/ded/_object_8cpp_source.html#l00761">Object.cpp:761</a></div></div>
<div class="ttc" id="astruct_override_spell_data_entry_html"><div class="ttname"><a href="../../d7/d01/struct_override_spell_data_entry.html">OverrideSpellDataEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/_d_b_c_structure_8h_source.html#l01345">DBCStructure.h:1346</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d82/_player_8cpp_source.html#l02994">Player::_addSpell()</a>, <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00093">Object::IsInWorld()</a>, <a class="el" href="../../d1/d22/_d_b_c_structure_8h_source.html#l01343">MAX_OVERRIDE_SPELL</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l00532">PLAYER_BYTES_2_OVERRIDE_SPELLS_UINT16_OFFSET</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00378">PLAYER_FIELD_BYTES2</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l03223">Player::removeSpell()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00761">Object::SetUInt16Value()</a>, <a class="el" href="../../dd/d17/_d_b_c_stores_8cpp.html#a982a7bf247893d62307cef9026cd791d">sOverrideSpellDataStore</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l00172">SPEC_MASK_ALL</a>, and <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>.</p>

</div>
</div>
<a id="a0ae0e56cbc82f9dde5927d069fad34e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ae0e56cbc82f9dde5927d069fad34e2">&#9670;&nbsp;</a></span>HandleAuraRetainComboPoints()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraRetainComboPoints </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04959">4959</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04960"></a><span class="lineno"> 4960</span>&#160;{</div>
<div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l04962"></a><span class="lineno"> 4962</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04963"></a><span class="lineno"> 4963</span>&#160; </div>
<div class="line"><a name="l04964"></a><span class="lineno"> 4964</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04965"></a><span class="lineno"> 4965</span>&#160; </div>
<div class="line"><a name="l04966"></a><span class="lineno"> 4966</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l04967"></a><span class="lineno"> 4967</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04968"></a><span class="lineno"> 4968</span>&#160; </div>
<div class="line"><a name="l04969"></a><span class="lineno"> 4969</span>&#160;    <span class="comment">// combo points was added in SPELL_EFFECT_ADD_COMBO_POINTS handler</span></div>
<div class="line"><a name="l04970"></a><span class="lineno"> 4970</span>&#160;    <span class="comment">// remove only if aura expire by time (in case combo points amount change aura removed without combo points lost)</span></div>
<div class="line"><a name="l04971"></a><span class="lineno"> 4971</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>) &amp;&amp; <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;GetDuration() == 0 &amp;&amp; target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#ae0c1d183b665e6223a8f464d88fe942e">GetComboTarget</a>())</div>
<div class="line"><a name="l04972"></a><span class="lineno"> 4972</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/db7/class_unit.html">Unit</a>* unit = <a class="code" href="../../d4/d27/namespace_object_accessor.html#a02c2dfb59db7d7e2501dcc9a4f9baf07">ObjectAccessor::GetUnit</a>(*target, target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#ae0c1d183b665e6223a8f464d88fe942e">GetComboTarget</a>()))</div>
<div class="line"><a name="l04973"></a><span class="lineno"> 4973</span>&#160;            target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a84faee17057ad092ec9fce41985d099d">AddComboPoints</a>(unit, -<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><a name="l04974"></a><span class="lineno"> 4974</span>&#160;}</div>
<div class="ttc" id="aclass_player_html_a84faee17057ad092ec9fce41985d099d"><div class="ttname"><a href="../../d8/d53/class_player.html#a84faee17057ad092ec9fce41985d099d">Player::AddComboPoints</a></div><div class="ttdeci">void AddComboPoints(Unit *target, int8 count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/_player_8cpp_source.html#l10800">Player.cpp:10800</a></div></div>
<div class="ttc" id="aclass_player_html_ae0c1d183b665e6223a8f464d88fe942e"><div class="ttname"><a href="../../d8/d53/class_player.html#ae0c1d183b665e6223a8f464d88fe942e">Player::GetComboTarget</a></div><div class="ttdeci">ObjectGuid GetComboTarget() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l01573">Player.h:1573</a></div></div>
<div class="ttc" id="anamespace_object_accessor_html_a02c2dfb59db7d7e2501dcc9a4f9baf07"><div class="ttname"><a href="../../d4/d27/namespace_object_accessor.html#a02c2dfb59db7d7e2501dcc9a4f9baf07">ObjectAccessor::GetUnit</a></div><div class="ttdeci">Unit * GetUnit(WorldObject const &amp;, ObjectGuid const guid)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5d/_object_accessor_8cpp_source.html#l00199">ObjectAccessor.cpp:199</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d82/_player_8cpp_source.html#l10800">Player::AddComboPoints()</a>, <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">GetBase()</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l01573">Player::GetComboTarget()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00133">Aura::GetDuration()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../df/d5d/_object_accessor_8cpp_source.html#l00199">ObjectAccessor::GetUnit()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, and <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>.</p>

</div>
</div>
<a id="a2d687bfbacc779c97d18c866a5544bfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d687bfbacc779c97d18c866a5544bfe">&#9670;&nbsp;</a></span>HandleAuraSetVehicle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraSetVehicle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05724">5724</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05725"></a><span class="lineno"> 5725</span>&#160;{</div>
<div class="line"><a name="l05726"></a><span class="lineno"> 5726</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l05727"></a><span class="lineno"> 5727</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05728"></a><span class="lineno"> 5728</span>&#160; </div>
<div class="line"><a name="l05729"></a><span class="lineno"> 5729</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l05730"></a><span class="lineno"> 5730</span>&#160; </div>
<div class="line"><a name="l05731"></a><span class="lineno"> 5731</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a> || !target-&gt;<a class="code" href="../../d8/d83/class_object.html#a3aeab7def818ba6c50249f197ad2f9ca">IsInWorld</a>())</div>
<div class="line"><a name="l05732"></a><span class="lineno"> 5732</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05733"></a><span class="lineno"> 5733</span>&#160; </div>
<div class="line"><a name="l05734"></a><span class="lineno"> 5734</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> vehicleId = <a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>();</div>
<div class="line"><a name="l05735"></a><span class="lineno"> 5735</span>&#160; </div>
<div class="line"><a name="l05736"></a><span class="lineno"> 5736</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l05737"></a><span class="lineno"> 5737</span>&#160;    {</div>
<div class="line"><a name="l05738"></a><span class="lineno"> 5738</span>&#160;        <span class="keywordflow">if</span> (!target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa8ccfbea62971de629706f3800a09f52">CreateVehicleKit</a>(vehicleId, 0))</div>
<div class="line"><a name="l05739"></a><span class="lineno"> 5739</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05740"></a><span class="lineno"> 5740</span>&#160;    }</div>
<div class="line"><a name="l05741"></a><span class="lineno"> 5741</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#ab5bd7480bb38a756459b9626c50576b7">GetVehicleKit</a>())</div>
<div class="line"><a name="l05742"></a><span class="lineno"> 5742</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a65ee899ca8381fb07b31ad005abd2349">RemoveVehicleKit</a>();</div>
<div class="line"><a name="l05743"></a><span class="lineno"> 5743</span>&#160; </div>
<div class="line"><a name="l05744"></a><span class="lineno"> 5744</span>&#160;    <a class="code" href="../../d6/d1a/class_world_packet.html">WorldPacket</a> <a class="code" href="../../df/dea/structdata.html">data</a>(<a class="code" href="../../d2/dec/group__u2w.html#gga1073b6abb3a749f18bf1633020879e9ba7069d40b50de402762dc3a592172d175">SMSG_PLAYER_VEHICLE_DATA</a>, target-&gt;<a class="code" href="../../d8/d83/class_object.html#ad4b3f372b6700cd50e1eb7ef238cf3be">GetPackGUID</a>().<a class="code" href="../../d5/df6/class_packed_guid.html#a22ac06b7072951e84bbf69abcd7d58f6">size</a>() + 4);</div>
<div class="line"><a name="l05745"></a><span class="lineno"> 5745</span>&#160;    <a class="code" href="../../df/dea/structdata.html">data</a> &lt;&lt; target-&gt;<a class="code" href="../../d8/d83/class_object.html#ad4b3f372b6700cd50e1eb7ef238cf3be">GetPackGUID</a>();</div>
<div class="line"><a name="l05746"></a><span class="lineno"> 5746</span>&#160;    <a class="code" href="../../df/dea/structdata.html">data</a> &lt;&lt; <a class="code" href="../../df/de2/namespace_g3_d.html#ae911b90657d7162d47997c702af655a8">uint32</a>(<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a> ? vehicleId : 0);</div>
<div class="line"><a name="l05747"></a><span class="lineno"> 5747</span>&#160;    target-&gt;<a class="code" href="../../db/df7/class_world_object.html#a244693d75c766f83ce5cba27ed08a064">SendMessageToSet</a>(&amp;<a class="code" href="../../df/dea/structdata.html">data</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l05748"></a><span class="lineno"> 5748</span>&#160; </div>
<div class="line"><a name="l05749"></a><span class="lineno"> 5749</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l05750"></a><span class="lineno"> 5750</span>&#160;    {</div>
<div class="line"><a name="l05751"></a><span class="lineno"> 5751</span>&#160;        <a class="code" href="../../df/dea/structdata.html">data</a>.Initialize(<a class="code" href="../../d2/dec/group__u2w.html#gga1073b6abb3a749f18bf1633020879e9baf2f9d8055130765053678690390c111e">SMSG_ON_CANCEL_EXPECTED_RIDE_VEHICLE_AURA</a>, 0);</div>
<div class="line"><a name="l05752"></a><span class="lineno"> 5752</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a1c212b8f9ae8b1a38a41f9c7db005dca">GetSession</a>()-&gt;<a class="code" href="../../d1/d47/class_world_session.html#a2c74b80ca9b81765049e315813b29269">SendPacket</a>(&amp;<a class="code" href="../../df/dea/structdata.html">data</a>);</div>
<div class="line"><a name="l05753"></a><span class="lineno"> 5753</span>&#160;    }</div>
<div class="line"><a name="l05754"></a><span class="lineno"> 5754</span>&#160;}</div>
<div class="ttc" id="aclass_object_html_ad4b3f372b6700cd50e1eb7ef238cf3be"><div class="ttname"><a href="../../d8/d83/class_object.html#ad4b3f372b6700cd50e1eb7ef238cf3be">Object::GetPackGUID</a></div><div class="ttdeci">PackedGuid const  &amp; GetPackGUID() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d30/_object_8h_source.html#l00100">Object.h:100</a></div></div>
<div class="ttc" id="aclass_packed_guid_html_a22ac06b7072951e84bbf69abcd7d58f6"><div class="ttname"><a href="../../d5/df6/class_packed_guid.html#a22ac06b7072951e84bbf69abcd7d58f6">PackedGuid::size</a></div><div class="ttdeci">std::size_t size() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d83/_object_guid_8h_source.html#l00276">ObjectGuid.h:276</a></div></div>
<div class="ttc" id="aclass_unit_html_a65ee899ca8381fb07b31ad005abd2349"><div class="ttname"><a href="../../da/db7/class_unit.html#a65ee899ca8381fb07b31ad005abd2349">Unit::RemoveVehicleKit</a></div><div class="ttdeci">void RemoveVehicleKit()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l17844">Unit.cpp:17844</a></div></div>
<div class="ttc" id="aclass_unit_html_aa8ccfbea62971de629706f3800a09f52"><div class="ttname"><a href="../../da/db7/class_unit.html#aa8ccfbea62971de629706f3800a09f52">Unit::CreateVehicleKit</a></div><div class="ttdeci">bool CreateVehicleKit(uint32 id, uint32 creatureEntry)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l17832">Unit.cpp:17832</a></div></div>
<div class="ttc" id="aclass_world_object_html_a244693d75c766f83ce5cba27ed08a064"><div class="ttname"><a href="../../db/df7/class_world_object.html#a244693d75c766f83ce5cba27ed08a064">WorldObject::SendMessageToSet</a></div><div class="ttdeci">virtual void SendMessageToSet(WorldPacket *data, bool self)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d30/_object_8h_source.html#l00765">Object.h:765</a></div></div>
<div class="ttc" id="aclass_world_packet_html"><div class="ttname"><a href="../../d6/d1a/class_world_packet.html">WorldPacket</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d66/_world_packet_8h_source.html#l00026">WorldPacket.h:27</a></div></div>
<div class="ttc" id="aclass_world_session_html_a2c74b80ca9b81765049e315813b29269"><div class="ttname"><a href="../../d1/d47/class_world_session.html#a2c74b80ca9b81765049e315813b29269">WorldSession::SendPacket</a></div><div class="ttdeci">void SendPacket(WorldPacket const *packet)</div><div class="ttdoc">Send a packet to the client.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dcc/_world_session_8cpp_source.html#l00210">WorldSession.cpp:210</a></div></div>
<div class="ttc" id="agroup__u2w_html_gga1073b6abb3a749f18bf1633020879e9ba7069d40b50de402762dc3a592172d175"><div class="ttname"><a href="../../d2/dec/group__u2w.html#gga1073b6abb3a749f18bf1633020879e9ba7069d40b50de402762dc3a592172d175">SMSG_PLAYER_VEHICLE_DATA</a></div><div class="ttdeci">@ SMSG_PLAYER_VEHICLE_DATA</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d10/_opcodes_8h_source.html#l01221">Opcodes.h:1221</a></div></div>
<div class="ttc" id="agroup__u2w_html_gga1073b6abb3a749f18bf1633020879e9baf2f9d8055130765053678690390c111e"><div class="ttname"><a href="../../d2/dec/group__u2w.html#gga1073b6abb3a749f18bf1633020879e9baf2f9d8055130765053678690390c111e">SMSG_ON_CANCEL_EXPECTED_RIDE_VEHICLE_AURA</a></div><div class="ttdeci">@ SMSG_ON_CANCEL_EXPECTED_RIDE_VEHICLE_AURA</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d10/_opcodes_8h_source.html#l01211">Opcodes.h:1211</a></div></div>
<div class="ttc" id="astructdata_html"><div class="ttname"><a href="../../df/dea/structdata.html">data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddf/fmt_2include_2fmt_2format_8h_source.html#l00897">format.h:897</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l17832">Unit::CreateVehicleKit()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00100">Object::GetPackGUID()</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l01940">Player::GetSession()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02422">Unit::GetVehicleKit()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00093">Object::IsInWorld()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l17844">Unit::RemoveVehicleKit()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00765">WorldObject::SendMessageToSet()</a>, <a class="el" href="../../d8/dcc/_world_session_8cpp_source.html#l00210">WorldSession::SendPacket()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00276">PackedGuid::size()</a>, <a class="el" href="../../da/d10/_opcodes_8h_source.html#l01211">SMSG_ON_CANCEL_EXPECTED_RIDE_VEHICLE_AURA</a>, <a class="el" href="../../da/d10/_opcodes_8h_source.html#l01221">SMSG_PLAYER_VEHICLE_DATA</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, and <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>.</p>

</div>
</div>
<a id="af5eeb3fd5b51cc797c21c374150a7f41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5eeb3fd5b51cc797c21c374150a7f41">&#9670;&nbsp;</a></span>HandleAuraTrackCreatures()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraTrackCreatures </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02675">2675</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;{</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160; </div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160; </div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160; </div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a79a7a80acdec46961b4d8aaead4ae631">SetFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881abf147d97c80985ae38d40088bf1e8804">PLAYER_TRACK_CREATURES</a>, <a class="code" href="../../df/de2/namespace_g3_d.html#ae911b90657d7162d47997c702af655a8">uint32</a>(1) &lt;&lt; (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() - 1));</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a7e764fbd4b7eca84f80e36e900bca7d3">RemoveFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881abf147d97c80985ae38d40088bf1e8804">PLAYER_TRACK_CREATURES</a>, <a class="code" href="../../df/de2/namespace_g3_d.html#ae911b90657d7162d47997c702af655a8">uint32</a>(1) &lt;&lt; (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() - 1));</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;}</div>
<div class="ttc" id="a_update_fields_8h_html_a0e42dc606678c9df7884e1aad621e881abf147d97c80985ae38d40088bf1e8804"><div class="ttname"><a href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881abf147d97c80985ae38d40088bf1e8804">PLAYER_TRACK_CREATURES</a></div><div class="ttdeci">@ PLAYER_TRACK_CREATURES</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d65/_update_fields_8h_source.html#l00344">UpdateFields.h:344</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00344">PLAYER_TRACK_CREATURES</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00851">Object::RemoveFlag()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00836">Object::SetFlag()</a>, and <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>.</p>

</div>
</div>
<a id="a1432141df83fc575b03313f9def132ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1432141df83fc575b03313f9def132ad">&#9670;&nbsp;</a></span>HandleAuraTrackResources()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraTrackResources </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02691">2691</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;{</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160; </div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160; </div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160; </div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a79a7a80acdec46961b4d8aaead4ae631">SetFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881adec70967051c839c7d205c14e21dfc14">PLAYER_TRACK_RESOURCES</a>, <a class="code" href="../../df/de2/namespace_g3_d.html#ae911b90657d7162d47997c702af655a8">uint32</a>(1) &lt;&lt; (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() - 1));</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a7e764fbd4b7eca84f80e36e900bca7d3">RemoveFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881adec70967051c839c7d205c14e21dfc14">PLAYER_TRACK_RESOURCES</a>, <a class="code" href="../../df/de2/namespace_g3_d.html#ae911b90657d7162d47997c702af655a8">uint32</a>(1) &lt;&lt; (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() - 1));</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;}</div>
<div class="ttc" id="a_update_fields_8h_html_a0e42dc606678c9df7884e1aad621e881adec70967051c839c7d205c14e21dfc14"><div class="ttname"><a href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881adec70967051c839c7d205c14e21dfc14">PLAYER_TRACK_RESOURCES</a></div><div class="ttdeci">@ PLAYER_TRACK_RESOURCES</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d65/_update_fields_8h_source.html#l00345">UpdateFields.h:345</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00345">PLAYER_TRACK_RESOURCES</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00851">Object::RemoveFlag()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00836">Object::SetFlag()</a>, and <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>.</p>

</div>
</div>
<a id="a901e04d2d5c6418bbfeb5e7820fdba30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a901e04d2d5c6418bbfeb5e7820fdba30">&#9670;&nbsp;</a></span>HandleAuraTrackStealthed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraTrackStealthed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02707">2707</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;{</div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160; </div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160; </div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160; </div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>))</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;    {</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;        <span class="comment">// do not remove unit flag if there are more than this auraEffect of that kind on unit on unit</span></div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>()))</div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;    }</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;    target-&gt;<a class="code" href="../../d8/d83/class_object.html#a882b48728ca660c0f6251bb595e8c67e">ApplyModFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881adec3c53fd2c3fb2d9849fb52e62f418c">PLAYER_FIELD_BYTES</a>, <a class="code" href="../../d1/d39/_player_8h.html#a31ae2504a623eb1746ff5da8a1902333aaf1cbce95c600ce8b27067d9c8f47da8">PLAYER_FIELD_BYTE_TRACK_STEALTHED</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;}</div>
<div class="ttc" id="a_player_8h_html_a31ae2504a623eb1746ff5da8a1902333aaf1cbce95c600ce8b27067d9c8f47da8"><div class="ttname"><a href="../../d1/d39/_player_8h.html#a31ae2504a623eb1746ff5da8a1902333aaf1cbce95c600ce8b27067d9c8f47da8">PLAYER_FIELD_BYTE_TRACK_STEALTHED</a></div><div class="ttdeci">@ PLAYER_FIELD_BYTE_TRACK_STEALTHED</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l00540">Player.h:540</a></div></div>
<div class="ttc" id="a_update_fields_8h_html_a0e42dc606678c9df7884e1aad621e881adec3c53fd2c3fb2d9849fb52e62f418c"><div class="ttname"><a href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881adec3c53fd2c3fb2d9849fb52e62f418c">PLAYER_FIELD_BYTES</a></div><div class="ttdeci">@ PLAYER_FIELD_BYTES</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d65/_update_fields_8h_source.html#l00368">UpdateFields.h:368</a></div></div>
<div class="ttc" id="aclass_object_html_a882b48728ca660c0f6251bb595e8c67e"><div class="ttname"><a href="../../d8/d83/class_object.html#a882b48728ca660c0f6251bb595e8c67e">Object::ApplyModFlag</a></div><div class="ttdeci">void ApplyModFlag(uint16 index, uint32 flag, bool apply)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/ded/_object_8cpp_source.html#l00890">Object.cpp:890</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00890">Object::ApplyModFlag()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00446">GetAuraType()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05194">Unit::HasAuraType()</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l00540">PLAYER_FIELD_BYTE_TRACK_STEALTHED</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00368">PLAYER_FIELD_BYTES</a>, and <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>.</p>

</div>
</div>
<a id="a8aeb4f5c3a5130afb5df2d83667b1877"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8aeb4f5c3a5130afb5df2d83667b1877">&#9670;&nbsp;</a></span>HandleAuraTransform()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraTransform </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02110">2110</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;{</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160; </div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160; </div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;    {</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;        <span class="comment">// update active transform spell only when transform or shapeshift not set or not overwriting negative by positive case</span></div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;HasAttribute(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a9dcd0ba8d94905ba214797c12e7c44ada6a12b14654225a9ccea65799ce6fc780">SPELL_ATTR0_NO_IMMUNITIES</a>) || !target-&gt;<a class="code" href="../../da/db7/class_unit.html#a2a134837f30eb9ce5bee971127e24cb3">GetModelForForm</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#a373a25c8d6ff3ca2f5653267c1269ad4">GetShapeshiftForm</a>()) || !<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;IsPositive())</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;        {</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;            <span class="comment">// special case (spell specific functionality)</span></div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == 0)</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;            {</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;                <span class="keywordflow">switch</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>())</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;                {</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;                    <span class="comment">// Orb of Deception</span></div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;                    <span class="keywordflow">case</span> 16739:</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;                        {</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;                            <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;                                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160; </div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;                            <span class="keywordflow">switch</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a60368071d6d8e6a23977ea4b44249de1">getRace</a>())</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;                            {</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;                                <span class="comment">// Blood Elf</span></div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;                                <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#abece64758d84aa91fa2b6bb82123cc80aa1357e803e964cc4737c2820e4ed1c7b">RACE_BLOODELF</a>:</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;                                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aab919c89c1c0fead6ece2c26e6c565a4">SetDisplayId</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 17829 : 17830);</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;                                <span class="comment">// Orc</span></div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;                                <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#abece64758d84aa91fa2b6bb82123cc80a446767743ece0d95b9bbe498ef1476b5">RACE_ORC</a>:</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;                                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aab919c89c1c0fead6ece2c26e6c565a4">SetDisplayId</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 10139 : 10140);</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;                                <span class="comment">// Troll</span></div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;                                <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#abece64758d84aa91fa2b6bb82123cc80a101b985cb59bea5d2463ab04e339feaa">RACE_TROLL</a>:</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;                                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aab919c89c1c0fead6ece2c26e6c565a4">SetDisplayId</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 10135 : 10134);</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;                                <span class="comment">// Tauren</span></div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;                                <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#abece64758d84aa91fa2b6bb82123cc80af53d3825f30ea6b3545ddc8f8d5e6938">RACE_TAUREN</a>:</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;                                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aab919c89c1c0fead6ece2c26e6c565a4">SetDisplayId</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 10136 : 10147);</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;                                <span class="comment">// Undead</span></div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;                                <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#abece64758d84aa91fa2b6bb82123cc80a2b9d8ca3a451a2bd60b29614cbc6b167">RACE_UNDEAD_PLAYER</a>:</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;                                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aab919c89c1c0fead6ece2c26e6c565a4">SetDisplayId</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 10146 : 10145);</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;                                <span class="comment">// Draenei</span></div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;                                <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#abece64758d84aa91fa2b6bb82123cc80a612f7cbe8f6ee425f6de12163d36f08d">RACE_DRAENEI</a>:</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;                                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aab919c89c1c0fead6ece2c26e6c565a4">SetDisplayId</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 17827 : 17828);</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;                                <span class="comment">// Dwarf</span></div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;                                <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#abece64758d84aa91fa2b6bb82123cc80aa205d146ad42dcf361e62da3e2b2afec">RACE_DWARF</a>:</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;                                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aab919c89c1c0fead6ece2c26e6c565a4">SetDisplayId</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 10141 : 10142);</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;                                <span class="comment">// Gnome</span></div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;                                <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#abece64758d84aa91fa2b6bb82123cc80aa8a1dc88cc120a9a5b25d1f651d08538">RACE_GNOME</a>:</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;                                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aab919c89c1c0fead6ece2c26e6c565a4">SetDisplayId</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 10148 : 10149);</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;                                <span class="comment">// Human</span></div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;                                <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#abece64758d84aa91fa2b6bb82123cc80ab70d874fe662deadb3bc53be59d896e7">RACE_HUMAN</a>:</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;                                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aab919c89c1c0fead6ece2c26e6c565a4">SetDisplayId</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 10137 : 10138);</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;                                <span class="comment">// Night Elf</span></div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;                                <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#abece64758d84aa91fa2b6bb82123cc80a9ef7a57e61b0f05d7d1e50b0de89820c">RACE_NIGHTELF</a>:</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;                                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aab919c89c1c0fead6ece2c26e6c565a4">SetDisplayId</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 10143 : 10144);</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;                                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;                            }</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;                        }</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;                    <span class="comment">// Murloc costume</span></div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;                    <span class="keywordflow">case</span> 42365:</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;                        target-&gt;<a class="code" href="../../da/db7/class_unit.html#aab919c89c1c0fead6ece2c26e6c565a4">SetDisplayId</a>(21723);</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;                    <span class="comment">// Dread Corsair</span></div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;                    <span class="keywordflow">case</span> 50517:</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;                    <span class="comment">// Corsair Costume</span></div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;                    <span class="keywordflow">case</span> 51926:</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;                        {</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;                            <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;                                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160; </div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;                            <span class="keywordflow">switch</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a60368071d6d8e6a23977ea4b44249de1">getRace</a>())</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;                            {</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;                                <span class="comment">// Blood Elf</span></div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;                                <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#abece64758d84aa91fa2b6bb82123cc80aa1357e803e964cc4737c2820e4ed1c7b">RACE_BLOODELF</a>:</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;                                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aab919c89c1c0fead6ece2c26e6c565a4">SetDisplayId</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 25032 : 25043);</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;                                <span class="comment">// Orc</span></div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;                                <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#abece64758d84aa91fa2b6bb82123cc80a446767743ece0d95b9bbe498ef1476b5">RACE_ORC</a>:</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;                                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aab919c89c1c0fead6ece2c26e6c565a4">SetDisplayId</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 25039 : 25050);</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;                                <span class="comment">// Troll</span></div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;                                <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#abece64758d84aa91fa2b6bb82123cc80a101b985cb59bea5d2463ab04e339feaa">RACE_TROLL</a>:</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;                                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aab919c89c1c0fead6ece2c26e6c565a4">SetDisplayId</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 25041 : 25052);</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;                                <span class="comment">// Tauren</span></div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;                                <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#abece64758d84aa91fa2b6bb82123cc80af53d3825f30ea6b3545ddc8f8d5e6938">RACE_TAUREN</a>:</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;                                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aab919c89c1c0fead6ece2c26e6c565a4">SetDisplayId</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 25040 : 25051);</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;                                <span class="comment">// Undead</span></div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;                                <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#abece64758d84aa91fa2b6bb82123cc80a2b9d8ca3a451a2bd60b29614cbc6b167">RACE_UNDEAD_PLAYER</a>:</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;                                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aab919c89c1c0fead6ece2c26e6c565a4">SetDisplayId</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 25042 : 25053);</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;                                <span class="comment">// Draenei</span></div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;                                <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#abece64758d84aa91fa2b6bb82123cc80a612f7cbe8f6ee425f6de12163d36f08d">RACE_DRAENEI</a>:</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;                                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aab919c89c1c0fead6ece2c26e6c565a4">SetDisplayId</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 25033 : 25044);</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;                                <span class="comment">// Dwarf</span></div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;                                <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#abece64758d84aa91fa2b6bb82123cc80aa205d146ad42dcf361e62da3e2b2afec">RACE_DWARF</a>:</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;                                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aab919c89c1c0fead6ece2c26e6c565a4">SetDisplayId</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 25034 : 25045);</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;                                <span class="comment">// Gnome</span></div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;                                <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#abece64758d84aa91fa2b6bb82123cc80aa8a1dc88cc120a9a5b25d1f651d08538">RACE_GNOME</a>:</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;                                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aab919c89c1c0fead6ece2c26e6c565a4">SetDisplayId</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 25035 : 25046);</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;                                <span class="comment">// Human</span></div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;                                <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#abece64758d84aa91fa2b6bb82123cc80ab70d874fe662deadb3bc53be59d896e7">RACE_HUMAN</a>:</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;                                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aab919c89c1c0fead6ece2c26e6c565a4">SetDisplayId</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 25037 : 25048);</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;                                <span class="comment">// Night Elf</span></div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;                                <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#abece64758d84aa91fa2b6bb82123cc80a9ef7a57e61b0f05d7d1e50b0de89820c">RACE_NIGHTELF</a>:</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;                                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aab919c89c1c0fead6ece2c26e6c565a4">SetDisplayId</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 25038 : 25049);</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;                                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;                            }</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;                        }</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;                    <span class="comment">// Pygmy Oil</span></div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;                    <span class="keywordflow">case</span> 53806:</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;                        target-&gt;<a class="code" href="../../da/db7/class_unit.html#aab919c89c1c0fead6ece2c26e6c565a4">SetDisplayId</a>(22512);</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;                    <span class="comment">// Honor the Dead</span></div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;                    <span class="keywordflow">case</span> 65386:</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;                    <span class="keywordflow">case</span> 65495:</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;                        target-&gt;<a class="code" href="../../da/db7/class_unit.html#aab919c89c1c0fead6ece2c26e6c565a4">SetDisplayId</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 29203 : 29204);</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;                    <span class="comment">// Darkspear Pride</span></div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;                    <span class="keywordflow">case</span> 75532:</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;                        target-&gt;<a class="code" href="../../da/db7/class_unit.html#aab919c89c1c0fead6ece2c26e6c565a4">SetDisplayId</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 31737 : 31738);</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;                    <span class="comment">// Gnomeregan Pride</span></div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;                    <span class="keywordflow">case</span> 75531:</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;                        target-&gt;<a class="code" href="../../da/db7/class_unit.html#aab919c89c1c0fead6ece2c26e6c565a4">SetDisplayId</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 31654 : 31655);</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;                    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;                }</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;            }</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;            {</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;                <a class="code" href="../../d2/d0b/struct_creature_template.html">CreatureTemplate</a> <span class="keyword">const</span>* ci = <a class="code" href="../../d9/d77/_object_mgr_8h.html#a736e30da2b5261060ac6cdbb5de3b787">sObjectMgr</a>-&gt;GetCreatureTemplate(<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;                <span class="keywordflow">if</span> (!ci)</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;                {</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aab919c89c1c0fead6ece2c26e6c565a4">SetDisplayId</a>(16358);              <span class="comment">// pig pink ^_^</span></div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;                    <a class="code" href="../../d3/d07/src_2common_2_logging_2_log_8h.html#a43832e3fa8508deb4ce43e520005fcd9">LOG_ERROR</a>(<span class="stringliteral">&quot;spells.aura.effect&quot;</span>, <span class="stringliteral">&quot;Auras: unknown creature id = %d (only need its modelid) From Spell Aura Transform in Spell ID = %d&quot;</span>, <a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>(), <a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;                }</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;                {</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;                    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> model_id = 0;</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160; </div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> modelid = ci-&gt;<a class="code" href="../../d2/d0b/struct_creature_template.html#af47f3165bc939303428d99c7797c36a2">GetRandomValidModelId</a>())</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;                        model_id = modelid;                     <span class="comment">// Will use the default model here</span></div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160; </div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;                    <span class="comment">// Polymorph (sheep)</span></div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;SpellFamilyName == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0e4b88db8be01ea5d62cc08d07b28aae">SPELLFAMILY_MAGE</a> &amp;&amp; <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;SpellIconID == 82 &amp;&amp; <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;SpellVisual[0] == 12978)</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="../../da/db7/class_unit.html">Unit</a>* caster = <a class="code" href="../../da/df1/class_aura_effect.html#a29cf330277aeb89d17d18f6e112f035b">GetCaster</a>())</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;                            <span class="keywordflow">if</span> (caster-&gt;HasAura(52648))         <span class="comment">// Glyph of the Penguin</span></div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;                                model_id = 26452;</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160; </div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aab919c89c1c0fead6ece2c26e6c565a4">SetDisplayId</a>(model_id);</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160; </div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;                    <span class="comment">// Dragonmaw Illusion (set mount model also)</span></div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>() == 42016 &amp;&amp; target-&gt;<a class="code" href="../../da/db7/class_unit.html#abefb328ba7a52fc7c5a16c60855b4d6a">GetMountID</a>() &amp;&amp; !target-&gt;<a class="code" href="../../da/db7/class_unit.html#af00ac6c4dc7e639ac646fdafef336e85">GetAuraEffectsByType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799aee4933438da47b18e67ffeb26e91f20b">SPELL_AURA_MOD_INCREASE_MOUNTED_FLIGHT_SPEED</a>).empty())</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;                        target-&gt;<a class="code" href="../../d8/d83/class_object.html#adc7e9b205f35f9894ec9a4f0ec0871f9">SetUInt32Value</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a6d4a274cf53b00cfcea24a3479588031">UNIT_FIELD_MOUNTDISPLAYID</a>, 16314);</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;                }</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;            }</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;        }</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160; </div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;        <span class="comment">// update active transform spell only when transform or shapeshift not set or not overwriting negative by positive case</span></div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;        <a class="code" href="../../d4/d7d/class_spell_info.html">SpellInfo</a> <span class="keyword">const</span>* transformSpellInfo = <a class="code" href="../../d3/d75/_spell_mgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellInfo(target-&gt;<a class="code" href="../../da/db7/class_unit.html#ad0d777d08ff539fa2e7be49e948025da">getTransForm</a>());</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;        <span class="keywordflow">if</span> (!transformSpellInfo || <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;HasAttribute(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a9dcd0ba8d94905ba214797c12e7c44ada6a12b14654225a9ccea65799ce6fc780">SPELL_ATTR0_NO_IMMUNITIES</a>) || !<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;IsPositive() || transformSpellInfo-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#adef74790281b92d72ac2c2118a665096">IsPositive</a>())</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa49c923da2e4cbd86e2215c75a4acda1">setTransForm</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160; </div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;        <span class="comment">// polymorph case</span></div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;        <span class="keywordflow">if</span> ((mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>) &amp;&amp; target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a> &amp;&amp; target-&gt;<a class="code" href="../../da/db7/class_unit.html#a356d82b82f6fbae78cb55ecb7bb67c0e">IsPolymorphed</a>())</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;        {</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;            <span class="comment">// for players, start regeneration after 1s (in polymorph fast regeneration case)</span></div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;            <span class="comment">// only if caster is Player (after patch 2.4.2)</span></div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>().IsPlayer())</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;                target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a54629b2ae206dce339b04d334b2c9ae2">setRegenTimerCount</a>(1 * <a class="code" href="../../d1/d8b/src_2common_2common_8h.html#a84190f79c8167211609f67284e066c58">IN_MILLISECONDS</a>);</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160; </div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;            <span class="comment">//dismount polymorphed target (after patch 2.4.2)</span></div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;            <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa8ff700c8aec70f3ab1e1385262959b1">IsMounted</a>())</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#ad6df47a81f5f5f147e68211ee935b398">RemoveAurasByType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a8cec8a45f78b8555b8f13b8b00995acf">SPELL_AURA_MOUNTED</a>);</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;        }</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;    }</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;    {</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;        <span class="comment">// HandleEffect(this, AURA_EFFECT_HANDLE_SEND_FOR_CLIENT, true) will reapply it if need</span></div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#ad0d777d08ff539fa2e7be49e948025da">getTransForm</a>() == <a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>())</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa49c923da2e4cbd86e2215c75a4acda1">setTransForm</a>(0);</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160; </div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#acb800095887418d08fdfa8ade11f0074">RestoreDisplayId</a>();</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160; </div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;        <span class="comment">// Dragonmaw Illusion (restore mount model)</span></div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>() == 42016 &amp;&amp; target-&gt;<a class="code" href="../../da/db7/class_unit.html#abefb328ba7a52fc7c5a16c60855b4d6a">GetMountID</a>() == 16314)</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;        {</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;            <span class="keywordflow">if</span> (!target-&gt;<a class="code" href="../../da/db7/class_unit.html#af00ac6c4dc7e639ac646fdafef336e85">GetAuraEffectsByType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a8cec8a45f78b8555b8f13b8b00995acf">SPELL_AURA_MOUNTED</a>).empty())</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;            {</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;                <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> cr_id = target-&gt;<a class="code" href="../../da/db7/class_unit.html#af00ac6c4dc7e639ac646fdafef336e85">GetAuraEffectsByType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a8cec8a45f78b8555b8f13b8b00995acf">SPELL_AURA_MOUNTED</a>).front()-&gt;GetMiscValue();</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d2/d0b/struct_creature_template.html">CreatureTemplate</a> <span class="keyword">const</span>* ci = <a class="code" href="../../d9/d77/_object_mgr_8h.html#a736e30da2b5261060ac6cdbb5de3b787">sObjectMgr</a>-&gt;GetCreatureTemplate(cr_id))</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;                {</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;                    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> displayID = <a class="code" href="../../d5/dbd/class_object_mgr.html#afd79285cbabfdd6097853626df3083e3">ObjectMgr::ChooseDisplayId</a>(ci);</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;                    <a class="code" href="../../d9/d77/_object_mgr_8h.html#a736e30da2b5261060ac6cdbb5de3b787">sObjectMgr</a>-&gt;GetCreatureModelRandomGender(&amp;displayID);</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160; </div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;                    target-&gt;<a class="code" href="../../d8/d83/class_object.html#adc7e9b205f35f9894ec9a4f0ec0871f9">SetUInt32Value</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a6d4a274cf53b00cfcea24a3479588031">UNIT_FIELD_MOUNTDISPLAYID</a>, displayID);</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;                }</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;            }</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;        }</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;    }</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_abece64758d84aa91fa2b6bb82123cc80a101b985cb59bea5d2463ab04e339feaa"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#abece64758d84aa91fa2b6bb82123cc80a101b985cb59bea5d2463ab04e339feaa">RACE_TROLL</a></div><div class="ttdeci">@ RACE_TROLL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00077">SharedDefines.h:77</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_abece64758d84aa91fa2b6bb82123cc80a2b9d8ca3a451a2bd60b29614cbc6b167"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#abece64758d84aa91fa2b6bb82123cc80a2b9d8ca3a451a2bd60b29614cbc6b167">RACE_UNDEAD_PLAYER</a></div><div class="ttdeci">@ RACE_UNDEAD_PLAYER</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00074">SharedDefines.h:74</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_abece64758d84aa91fa2b6bb82123cc80a446767743ece0d95b9bbe498ef1476b5"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#abece64758d84aa91fa2b6bb82123cc80a446767743ece0d95b9bbe498ef1476b5">RACE_ORC</a></div><div class="ttdeci">@ RACE_ORC</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00071">SharedDefines.h:71</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_abece64758d84aa91fa2b6bb82123cc80a612f7cbe8f6ee425f6de12163d36f08d"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#abece64758d84aa91fa2b6bb82123cc80a612f7cbe8f6ee425f6de12163d36f08d">RACE_DRAENEI</a></div><div class="ttdeci">@ RACE_DRAENEI</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00091">SharedDefines.h:80</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_abece64758d84aa91fa2b6bb82123cc80a9ef7a57e61b0f05d7d1e50b0de89820c"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#abece64758d84aa91fa2b6bb82123cc80a9ef7a57e61b0f05d7d1e50b0de89820c">RACE_NIGHTELF</a></div><div class="ttdeci">@ RACE_NIGHTELF</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00073">SharedDefines.h:73</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_abece64758d84aa91fa2b6bb82123cc80aa1357e803e964cc4737c2820e4ed1c7b"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#abece64758d84aa91fa2b6bb82123cc80aa1357e803e964cc4737c2820e4ed1c7b">RACE_BLOODELF</a></div><div class="ttdeci">@ RACE_BLOODELF</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00079">SharedDefines.h:79</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_abece64758d84aa91fa2b6bb82123cc80aa205d146ad42dcf361e62da3e2b2afec"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#abece64758d84aa91fa2b6bb82123cc80aa205d146ad42dcf361e62da3e2b2afec">RACE_DWARF</a></div><div class="ttdeci">@ RACE_DWARF</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00072">SharedDefines.h:72</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_abece64758d84aa91fa2b6bb82123cc80aa8a1dc88cc120a9a5b25d1f651d08538"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#abece64758d84aa91fa2b6bb82123cc80aa8a1dc88cc120a9a5b25d1f651d08538">RACE_GNOME</a></div><div class="ttdeci">@ RACE_GNOME</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00076">SharedDefines.h:76</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_abece64758d84aa91fa2b6bb82123cc80ab70d874fe662deadb3bc53be59d896e7"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#abece64758d84aa91fa2b6bb82123cc80ab70d874fe662deadb3bc53be59d896e7">RACE_HUMAN</a></div><div class="ttdeci">@ RACE_HUMAN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00070">SharedDefines.h:70</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_abece64758d84aa91fa2b6bb82123cc80af53d3825f30ea6b3545ddc8f8d5e6938"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#abece64758d84aa91fa2b6bb82123cc80af53d3825f30ea6b3545ddc8f8d5e6938">RACE_TAUREN</a></div><div class="ttdeci">@ RACE_TAUREN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00075">SharedDefines.h:75</a></div></div>
<div class="ttc" id="aclass_player_html_a54629b2ae206dce339b04d334b2c9ae2"><div class="ttname"><a href="../../d8/d53/class_player.html#a54629b2ae206dce339b04d334b2c9ae2">Player::setRegenTimerCount</a></div><div class="ttdeci">void setRegenTimerCount(uint32 time)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l01536">Player.h:1536</a></div></div>
<div class="ttc" id="aclass_unit_html_a60368071d6d8e6a23977ea4b44249de1"><div class="ttname"><a href="../../da/db7/class_unit.html#a60368071d6d8e6a23977ea4b44249de1">Unit::getRace</a></div><div class="ttdeci">uint8 getRace(bool original=false) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l20028">Unit.cpp:20028</a></div></div>
<div class="ttc" id="aclass_unit_html_aa49c923da2e4cbd86e2215c75a4acda1"><div class="ttname"><a href="../../da/db7/class_unit.html#aa49c923da2e4cbd86e2215c75a4acda1">Unit::setTransForm</a></div><div class="ttdeci">void setTransForm(uint32 spellid)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l02258">Unit.h:2258</a></div></div>
<div class="ttc" id="aclass_unit_html_aa8ff700c8aec70f3ab1e1385262959b1"><div class="ttname"><a href="../../da/db7/class_unit.html#aa8ff700c8aec70f3ab1e1385262959b1">Unit::IsMounted</a></div><div class="ttdeci">bool IsMounted() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01648">Unit.h:1648</a></div></div>
<div class="ttc" id="astruct_creature_template_html_af47f3165bc939303428d99c7797c36a2"><div class="ttname"><a href="../../d2/d0b/struct_creature_template.html#af47f3165bc939303428d99c7797c36a2">CreatureTemplate::GetRandomValidModelId</a></div><div class="ttdeci">uint32 GetRandomValidModelId() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d9d/_creature_8cpp_source.html#l00093">Creature.cpp:93</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../df/d62/_object_mgr_8cpp_source.html#l01405">ObjectMgr::ChooseDisplayId()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00060">GENDER_MALE</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02047">Unit::GetAuraEffectsByType()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00040">GetCaster()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00041">GetCasterGUID()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01547">Unit::getGender()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">GetId()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l18299">Unit::GetModelForForm()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01649">Unit::GetMountID()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l20028">Unit::getRace()</a>, <a class="el" href="../../d3/d9d/_creature_8cpp_source.html#l00093">CreatureTemplate::GetRandomValidModelId()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02153">Unit::GetShapeshiftForm()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02259">Unit::getTransForm()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d1/d8b/src_2common_2common_8h_source.html#l00062">IN_MILLISECONDS</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01648">Unit::IsMounted()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16058">Unit::IsPolymorphed()</a>, <a class="el" href="../../da/d7f/_spell_info_8cpp_source.html#l01220">SpellInfo::IsPositive()</a>, <a class="el" href="../../d3/d07/src_2common_2_logging_2_log_8h_source.html#l00261">LOG_ERROR</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00079">RACE_BLOODELF</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00080">RACE_DRAENEI</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00072">RACE_DWARF</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00076">RACE_GNOME</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00070">RACE_HUMAN</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00073">RACE_NIGHTELF</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00071">RACE_ORC</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00075">RACE_TAUREN</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00077">RACE_TROLL</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00074">RACE_UNDEAD_PLAYER</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04610">Unit::RemoveAurasByType()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16079">Unit::RestoreDisplayId()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16071">Unit::SetDisplayId()</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l01536">Player::setRegenTimerCount()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02258">Unit::setTransForm()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00641">Object::SetUInt32Value()</a>, <a class="el" href="../../d9/d77/_object_mgr_8h_source.html#l01546">sObjectMgr</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00383">SPELL_ATTR0_NO_IMMUNITIES</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00270">SPELL_AURA_MOD_INCREASE_MOUNTED_FLIGHT_SPEED</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00141">SPELL_AURA_MOUNTED</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l03457">SPELLFAMILY_MAGE</a>, <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00794">sSpellMgr</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00126">UNIT_FIELD_MOUNTDISPLAYID</a>.</p>

</div>
</div>
<a id="add3e6484132f5de2d6bfe76c0f2b21ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add3e6484132f5de2d6bfe76c0f2b21ae">&#9670;&nbsp;</a></span>HandleAuraUntrackable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraUntrackable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02747">2747</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;{</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160; </div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160; </div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#afe65b1ab32dbcd51890b754fb8b5e1b0">SetByteFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881ae16e28b92accfc3468e9dd713086e2ac">UNIT_FIELD_BYTES_1</a>, <a class="code" href="../../d5/d32/_unit_8h.html#aaaff909c1b98b597799809a880a5a442afb9ad4eb10498c4a1e8cad3425d65d0f">UNIT_BYTES_1_OFFSET_VIS_FLAG</a>, <a class="code" href="../../d5/d32/_unit_8h.html#a88cad5664df249863d4ebed6162a2343af148583098f9670660b2d18ed8fa1ccd">UNIT_STAND_FLAGS_UNTRACKABLE</a>);</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;    {</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;        <span class="comment">// do not remove unit flag if there are more than this auraEffect of that kind on unit on unit</span></div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>()))</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#acef75a7f84673fda790861bd1b0b68b7">RemoveByteFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881ae16e28b92accfc3468e9dd713086e2ac">UNIT_FIELD_BYTES_1</a>, <a class="code" href="../../d5/d32/_unit_8h.html#aaaff909c1b98b597799809a880a5a442afb9ad4eb10498c4a1e8cad3425d65d0f">UNIT_BYTES_1_OFFSET_VIS_FLAG</a>, <a class="code" href="../../d5/d32/_unit_8h.html#a88cad5664df249863d4ebed6162a2343af148583098f9670660b2d18ed8fa1ccd">UNIT_STAND_FLAGS_UNTRACKABLE</a>);</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;    }</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;}</div>
<div class="ttc" id="a_unit_8h_html_a88cad5664df249863d4ebed6162a2343af148583098f9670660b2d18ed8fa1ccd"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a88cad5664df249863d4ebed6162a2343af148583098f9670660b2d18ed8fa1ccd">UNIT_STAND_FLAGS_UNTRACKABLE</a></div><div class="ttdeci">@ UNIT_STAND_FLAGS_UNTRACKABLE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00179">Unit.h:179</a></div></div>
<div class="ttc" id="a_unit_8h_html_aaaff909c1b98b597799809a880a5a442afb9ad4eb10498c4a1e8cad3425d65d0f"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#aaaff909c1b98b597799809a880a5a442afb9ad4eb10498c4a1e8cad3425d65d0f">UNIT_BYTES_1_OFFSET_VIS_FLAG</a></div><div class="ttdeci">@ UNIT_BYTES_1_OFFSET_VIS_FLAG</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00155">Unit.h:155</a></div></div>
<div class="ttc" id="a_update_fields_8h_html_a0e42dc606678c9df7884e1aad621e881ae16e28b92accfc3468e9dd713086e2ac"><div class="ttname"><a href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881ae16e28b92accfc3468e9dd713086e2ac">UNIT_FIELD_BYTES_1</a></div><div class="ttdeci">@ UNIT_FIELD_BYTES_1</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d65/_update_fields_8h_source.html#l00131">UpdateFields.h:131</a></div></div>
<div class="ttc" id="aclass_object_html_acef75a7f84673fda790861bd1b0b68b7"><div class="ttname"><a href="../../d8/d83/class_object.html#acef75a7f84673fda790861bd1b0b68b7">Object::RemoveByteFlag</a></div><div class="ttdeci">void RemoveByteFlag(uint16 index, uint8 offset, uint8 newFlag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/ded/_object_8cpp_source.html#l00921">Object.cpp:921</a></div></div>
<div class="ttc" id="aclass_object_html_afe65b1ab32dbcd51890b754fb8b5e1b0"><div class="ttname"><a href="../../d8/d83/class_object.html#afe65b1ab32dbcd51890b754fb8b5e1b0">Object::SetByteFlag</a></div><div class="ttdeci">void SetByteFlag(uint16 index, uint8 offset, uint8 newFlag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/ded/_object_8cpp_source.html#l00902">Object.cpp:902</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00446">GetAuraType()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05194">Unit::HasAuraType()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00921">Object::RemoveByteFlag()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00902">Object::SetByteFlag()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00155">UNIT_BYTES_1_OFFSET_VIS_FLAG</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00131">UNIT_FIELD_BYTES_1</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00179">UNIT_STAND_FLAGS_UNTRACKABLE</a>.</p>

</div>
</div>
<a id="af5a0845c419937a8d5450876dff3224c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5a0845c419937a8d5450876dff3224c">&#9670;&nbsp;</a></span>HandleAuraWaterWalk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraWaterWalk </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02874">2874</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;{</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160; </div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160; </div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d53/class_player.html">Player</a>* targetPlayer = target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>())</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;    {</div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;        <a class="code" href="../../d0/d7d/_script_mgr_8h.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a>-&gt;AnticheatSetUnderACKmount(targetPlayer);</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;    }</div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160; </div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;    {</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;        <span class="comment">// do not remove unit flag if there are more than this auraEffect of that kind on unit on unit</span></div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>()))</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;    }</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160; </div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#afadef7f8d4b6ebc276131926f194e8d8">SetWaterWalking</a>(<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;}</div>
<div class="ttc" id="aclass_unit_html_afadef7f8d4b6ebc276131926f194e8d8"><div class="ttname"><a href="../../da/db7/class_unit.html#afadef7f8d4b6ebc276131926f194e8d8">Unit::SetWaterWalking</a></div><div class="ttdeci">virtual bool SetWaterWalking(bool enable, bool packetOnly=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l19729">Unit.cpp:19729</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00446">GetAuraType()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05194">Unit::HasAuraType()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l19729">Unit::SetWaterWalking()</a>, <a class="el" href="../../d0/d7d/_script_mgr_8h_source.html#l02048">sScriptMgr</a>, and <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>.</p>

</div>
</div>
<a id="aeeed00e5103faf76fec0eb8f88b8d071"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeeed00e5103faf76fec0eb8f88b8d071">&#9670;&nbsp;</a></span>HandleBindSight()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleBindSight </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05444">5444</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05445"></a><span class="lineno"> 5445</span>&#160;{</div>
<div class="line"><a name="l05446"></a><span class="lineno"> 5446</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l05447"></a><span class="lineno"> 5447</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05448"></a><span class="lineno"> 5448</span>&#160; </div>
<div class="line"><a name="l05449"></a><span class="lineno"> 5449</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l05450"></a><span class="lineno"> 5450</span>&#160; </div>
<div class="line"><a name="l05451"></a><span class="lineno"> 5451</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* caster = <a class="code" href="../../da/df1/class_aura_effect.html#a29cf330277aeb89d17d18f6e112f035b">GetCaster</a>();</div>
<div class="line"><a name="l05452"></a><span class="lineno"> 5452</span>&#160; </div>
<div class="line"><a name="l05453"></a><span class="lineno"> 5453</span>&#160;    <span class="keywordflow">if</span> (!caster || caster-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l05454"></a><span class="lineno"> 5454</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05455"></a><span class="lineno"> 5455</span>&#160; </div>
<div class="line"><a name="l05456"></a><span class="lineno"> 5456</span>&#160;    caster-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a6fc53a958e4d3a3cc454aae855289983">SetViewpoint</a>(target, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l05457"></a><span class="lineno"> 5457</span>&#160;}</div>
<div class="ttc" id="aclass_player_html_a6fc53a958e4d3a3cc454aae855289983"><div class="ttname"><a href="../../d8/d53/class_player.html#a6fc53a958e4d3a3cc454aae855289983">Player::SetViewpoint</a></div><div class="ttdeci">void SetViewpoint(WorldObject *target, bool apply)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/_player_8cpp_source.html#l12359">Player.cpp:12359</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00040">GetCaster()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l12359">Player::SetViewpoint()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, and <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>.</p>

</div>
</div>
<a id="ab144ae6a14c8fd95ff6b868b64cd7c12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab144ae6a14c8fd95ff6b868b64cd7c12">&#9670;&nbsp;</a></span>HandleChannelDeathItem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleChannelDeathItem </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05399">5399</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05400"></a><span class="lineno"> 5400</span>&#160;{</div>
<div class="line"><a name="l05401"></a><span class="lineno"> 5401</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l05402"></a><span class="lineno"> 5402</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05403"></a><span class="lineno"> 5403</span>&#160; </div>
<div class="line"><a name="l05404"></a><span class="lineno"> 5404</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a> || aurApp-&gt;GetRemoveMode() != <a class="code" href="../../d5/d32/_unit_8h.html#a9a4f502870485ba32e759067c9adca94a8b8b753a1458a21a162528088acee913">AURA_REMOVE_BY_DEATH</a>)</div>
<div class="line"><a name="l05405"></a><span class="lineno"> 5405</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05406"></a><span class="lineno"> 5406</span>&#160; </div>
<div class="line"><a name="l05407"></a><span class="lineno"> 5407</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* caster = <a class="code" href="../../da/df1/class_aura_effect.html#a29cf330277aeb89d17d18f6e112f035b">GetCaster</a>();</div>
<div class="line"><a name="l05408"></a><span class="lineno"> 5408</span>&#160; </div>
<div class="line"><a name="l05409"></a><span class="lineno"> 5409</span>&#160;    <span class="keywordflow">if</span> (!caster || caster-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l05410"></a><span class="lineno"> 5410</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05411"></a><span class="lineno"> 5411</span>&#160; </div>
<div class="line"><a name="l05412"></a><span class="lineno"> 5412</span>&#160;    <a class="code" href="../../d8/d53/class_player.html">Player</a>* plCaster = caster-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>();</div>
<div class="line"><a name="l05413"></a><span class="lineno"> 5413</span>&#160; </div>
<div class="line"><a name="l05414"></a><span class="lineno"> 5414</span>&#160;    <span class="comment">// Item amount</span></div>
<div class="line"><a name="l05415"></a><span class="lineno"> 5415</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() &lt;= 0)</div>
<div class="line"><a name="l05416"></a><span class="lineno"> 5416</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05417"></a><span class="lineno"> 5417</span>&#160; </div>
<div class="line"><a name="l05418"></a><span class="lineno"> 5418</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;Effects[<a class="code" href="../../da/df1/class_aura_effect.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>].ItemType == 0)</div>
<div class="line"><a name="l05419"></a><span class="lineno"> 5419</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05420"></a><span class="lineno"> 5420</span>&#160; </div>
<div class="line"><a name="l05421"></a><span class="lineno"> 5421</span>&#160;    <span class="comment">//Adding items</span></div>
<div class="line"><a name="l05422"></a><span class="lineno"> 5422</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> noSpaceForCount = 0;</div>
<div class="line"><a name="l05423"></a><span class="lineno"> 5423</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> <a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a501bb1bb2f0cc5706178ed237958e73b">count</a> = <a class="code" href="../../da/df1/class_aura_effect.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a>;</div>
<div class="line"><a name="l05424"></a><span class="lineno"> 5424</span>&#160; </div>
<div class="line"><a name="l05425"></a><span class="lineno"> 5425</span>&#160;    <a class="code" href="../../d1/d39/_player_8h.html#a06f492a0a20f5264c8395684220fec84">ItemPosCountVec</a> dest;</div>
<div class="line"><a name="l05426"></a><span class="lineno"> 5426</span>&#160;    <a class="code" href="../../da/d43/_item_8h.html#a73617af2b3e5e935646638fa13678391">InventoryResult</a> msg = plCaster-&gt;<a class="code" href="../../d8/d53/class_player.html#af059a10625d50ca7674771ea1c1c4c4c">CanStoreNewItem</a>(<a class="code" href="../../d5/d32/_unit_8h.html#aadcc1e3338f8cbbe511ad060db42dfb5a843659af0a40139bfa505d7e7982477b">NULL_BAG</a>, <a class="code" href="../../d5/d32/_unit_8h.html#aadcc1e3338f8cbbe511ad060db42dfb5aeb5cbd7990d2f5e679ec4ecc65e83130">NULL_SLOT</a>, dest, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;Effects[<a class="code" href="../../da/df1/class_aura_effect.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>].ItemType, <a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a501bb1bb2f0cc5706178ed237958e73b">count</a>, &amp;noSpaceForCount);</div>
<div class="line"><a name="l05427"></a><span class="lineno"> 5427</span>&#160;    <span class="keywordflow">if</span> (msg != <a class="code" href="../../da/d43/_item_8h.html#a73617af2b3e5e935646638fa13678391a939b6661cd19d6c18274906abb28021c">EQUIP_ERR_OK</a>)</div>
<div class="line"><a name="l05428"></a><span class="lineno"> 5428</span>&#160;    {</div>
<div class="line"><a name="l05429"></a><span class="lineno"> 5429</span>&#160;        <a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a501bb1bb2f0cc5706178ed237958e73b">count</a> -= noSpaceForCount;</div>
<div class="line"><a name="l05430"></a><span class="lineno"> 5430</span>&#160;        plCaster-&gt;<a class="code" href="../../d8/d53/class_player.html#ade216a89981dfce501f02f38cec9ad3f">SendEquipError</a>(msg, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;Effects[<a class="code" href="../../da/df1/class_aura_effect.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>].ItemType);</div>
<div class="line"><a name="l05431"></a><span class="lineno"> 5431</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a501bb1bb2f0cc5706178ed237958e73b">count</a> == 0)</div>
<div class="line"><a name="l05432"></a><span class="lineno"> 5432</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05433"></a><span class="lineno"> 5433</span>&#160;    }</div>
<div class="line"><a name="l05434"></a><span class="lineno"> 5434</span>&#160; </div>
<div class="line"><a name="l05435"></a><span class="lineno"> 5435</span>&#160;    <a class="code" href="../../dc/d32/class_item.html">Item</a>* newitem = plCaster-&gt;<a class="code" href="../../d8/d53/class_player.html#ac996a41fc3f89d8683de8695bb7db13c">StoreNewItem</a>(dest, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;Effects[<a class="code" href="../../da/df1/class_aura_effect.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>].ItemType, <span class="keyword">true</span>);</div>
<div class="line"><a name="l05436"></a><span class="lineno"> 5436</span>&#160;    <span class="keywordflow">if</span> (!newitem)</div>
<div class="line"><a name="l05437"></a><span class="lineno"> 5437</span>&#160;    {</div>
<div class="line"><a name="l05438"></a><span class="lineno"> 5438</span>&#160;        plCaster-&gt;<a class="code" href="../../d8/d53/class_player.html#ade216a89981dfce501f02f38cec9ad3f">SendEquipError</a>(<a class="code" href="../../da/d43/_item_8h.html#a73617af2b3e5e935646638fa13678391a8b1b5966ea1ccbf5ee6d1d4a244b272e">EQUIP_ERR_ITEM_NOT_FOUND</a>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l05439"></a><span class="lineno"> 5439</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05440"></a><span class="lineno"> 5440</span>&#160;    }</div>
<div class="line"><a name="l05441"></a><span class="lineno"> 5441</span>&#160;    plCaster-&gt;<a class="code" href="../../d8/d53/class_player.html#a9b1ad78b229913ff669912d2fb80c6e0">SendNewItem</a>(newitem, <a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a501bb1bb2f0cc5706178ed237958e73b">count</a>, <span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l05442"></a><span class="lineno"> 5442</span>&#160;}</div>
<div class="ttc" id="a_item_8h_html_a73617af2b3e5e935646638fa13678391"><div class="ttname"><a href="../../da/d43/_item_8h.html#a73617af2b3e5e935646638fa13678391">InventoryResult</a></div><div class="ttdeci">InventoryResult</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d43/_item_8h_source.html#l00039">Item.h:40</a></div></div>
<div class="ttc" id="a_item_8h_html_a73617af2b3e5e935646638fa13678391a8b1b5966ea1ccbf5ee6d1d4a244b272e"><div class="ttname"><a href="../../da/d43/_item_8h.html#a73617af2b3e5e935646638fa13678391a8b1b5966ea1ccbf5ee6d1d4a244b272e">EQUIP_ERR_ITEM_NOT_FOUND</a></div><div class="ttdeci">@ EQUIP_ERR_ITEM_NOT_FOUND</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d43/_item_8h_source.html#l00064">Item.h:64</a></div></div>
<div class="ttc" id="a_item_8h_html_a73617af2b3e5e935646638fa13678391a939b6661cd19d6c18274906abb28021c"><div class="ttname"><a href="../../da/d43/_item_8h.html#a73617af2b3e5e935646638fa13678391a939b6661cd19d6c18274906abb28021c">EQUIP_ERR_OK</a></div><div class="ttdeci">@ EQUIP_ERR_OK</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d43/_item_8h_source.html#l00041">Item.h:41</a></div></div>
<div class="ttc" id="a_player_8h_html_a06f492a0a20f5264c8395684220fec84"><div class="ttname"><a href="../../d1/d39/_player_8h.html#a06f492a0a20f5264c8395684220fec84">ItemPosCountVec</a></div><div class="ttdeci">std::vector&lt; ItemPosCount &gt; ItemPosCountVec</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l00752">Player.h:752</a></div></div>
<div class="ttc" id="a_unit_8h_html_a9a4f502870485ba32e759067c9adca94a8b8b753a1458a21a162528088acee913"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a9a4f502870485ba32e759067c9adca94a8b8b753a1458a21a162528088acee913">AURA_REMOVE_BY_DEATH</a></div><div class="ttdeci">@ AURA_REMOVE_BY_DEATH</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00392">Unit.h:391</a></div></div>
<div class="ttc" id="a_unit_8h_html_aadcc1e3338f8cbbe511ad060db42dfb5a843659af0a40139bfa505d7e7982477b"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#aadcc1e3338f8cbbe511ad060db42dfb5a843659af0a40139bfa505d7e7982477b">NULL_BAG</a></div><div class="ttdeci">@ NULL_BAG</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00319">Unit.h:319</a></div></div>
<div class="ttc" id="a_unit_8h_html_aadcc1e3338f8cbbe511ad060db42dfb5aeb5cbd7990d2f5e679ec4ecc65e83130"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#aadcc1e3338f8cbbe511ad060db42dfb5aeb5cbd7990d2f5e679ec4ecc65e83130">NULL_SLOT</a></div><div class="ttdeci">@ NULL_SLOT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00321">Unit.h:320</a></div></div>
<div class="ttc" id="aclass_player_html_a9b1ad78b229913ff669912d2fb80c6e0"><div class="ttname"><a href="../../d8/d53/class_player.html#a9b1ad78b229913ff669912d2fb80c6e0">Player::SendNewItem</a></div><div class="ttdeci">void SendNewItem(Item *item, uint32 count, bool received, bool created, bool broadcast=false, bool sendChatMessage=true)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d16/_player_storage_8cpp_source.html#l04782">PlayerStorage.cpp:4782</a></div></div>
<div class="ttc" id="aclass_player_html_ac996a41fc3f89d8683de8695bb7db13c"><div class="ttname"><a href="../../d8/d53/class_player.html#ac996a41fc3f89d8683de8695bb7db13c">Player::StoreNewItem</a></div><div class="ttdeci">Item * StoreNewItem(ItemPosCountVec const &amp;pos, uint32 item, bool update, int32 randomPropertyId=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d16/_player_storage_8cpp_source.html#l02557">PlayerStorage.cpp:2557</a></div></div>
<div class="ttc" id="aclass_player_html_ade216a89981dfce501f02f38cec9ad3f"><div class="ttname"><a href="../../d8/d53/class_player.html#ade216a89981dfce501f02f38cec9ad3f">Player::SendEquipError</a></div><div class="ttdeci">void SendEquipError(InventoryResult msg, Item *pItem, Item *pItem2=nullptr, uint32 itemid=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d16/_player_storage_8cpp_source.html#l04063">PlayerStorage.cpp:4063</a></div></div>
<div class="ttc" id="aclass_player_html_af059a10625d50ca7674771ea1c1c4c4c"><div class="ttname"><a href="../../d8/d53/class_player.html#af059a10625d50ca7674771ea1c1c4c4c">Player::CanStoreNewItem</a></div><div class="ttdeci">InventoryResult CanStoreNewItem(uint8 bag, uint8 slot, ItemPosCountVec &amp;dest, uint32 item, uint32 count, uint32 *no_space_count=nullptr) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l01218">Player.h:1218</a></div></div>
<div class="ttc" id="afmt_2include_2fmt_2core_8h_html_a501bb1bb2f0cc5706178ed237958e73b"><div class="ttname"><a href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a501bb1bb2f0cc5706178ed237958e73b">count</a></div><div class="ttdeci">constexpr auto count() -&gt; size_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d71/fmt_2include_2fmt_2core_8h_source.html#l01039">core.h:1039</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00391">AURA_REMOVE_BY_DEATH</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l01218">Player::CanStoreNewItem()</a>, <a class="el" href="../../d5/d71/fmt_2include_2fmt_2core_8h_source.html#l01039">count()</a>, <a class="el" href="../../da/d43/_item_8h_source.html#l00064">EQUIP_ERR_ITEM_NOT_FOUND</a>, <a class="el" href="../../da/d43/_item_8h_source.html#l00041">EQUIP_ERR_OK</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00040">GetCaster()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00073">AuraApplication::GetRemoveMode()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00120">m_amount</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00137">m_effIndex</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00319">NULL_BAG</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00320">NULL_SLOT</a>, <a class="el" href="../../d4/d16/_player_storage_8cpp_source.html#l04063">Player::SendEquipError()</a>, <a class="el" href="../../d4/d16/_player_storage_8cpp_source.html#l04782">Player::SendNewItem()</a>, <a class="el" href="../../d4/d16/_player_storage_8cpp_source.html#l02557">Player::StoreNewItem()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, and <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>.</p>

</div>
</div>
<a id="a9939adabdadcf853bbabb848afb5e8b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9939adabdadcf853bbabb848afb5e8b4">&#9670;&nbsp;</a></span>HandleCharmConvert()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleCharmConvert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03179">3179</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;{</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160; </div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160; </div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* caster = <a class="code" href="../../da/df1/class_aura_effect.html#a29cf330277aeb89d17d18f6e112f035b">GetCaster</a>();</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160; </div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#ad02c1207bd4ccb5df03df1d4eec80293">SetCharmedBy</a>(caster, <a class="code" href="../../d5/d32/_unit_8h.html#ab341828eccd0b2de05fb7be084a9437aa3086533ebf4fa00b6546f53176b512db">CHARM_TYPE_CONVERT</a>, aurApp);</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa897a679d63c8d6272d4bc85395a708f">RemoveCharmedBy</a>(caster);</div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;}</div>
<div class="ttc" id="a_unit_8h_html_ab341828eccd0b2de05fb7be084a9437aa3086533ebf4fa00b6546f53176b512db"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab341828eccd0b2de05fb7be084a9437aa3086533ebf4fa00b6546f53176b512db">CHARM_TYPE_CONVERT</a></div><div class="ttdeci">@ CHARM_TYPE_CONVERT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01206">Unit.h:1206</a></div></div>
<div class="ttc" id="aclass_unit_html_aa897a679d63c8d6272d4bc85395a708f"><div class="ttname"><a href="../../da/db7/class_unit.html#aa897a679d63c8d6272d4bc85395a708f">Unit::RemoveCharmedBy</a></div><div class="ttdeci">void RemoveCharmedBy(Unit *charmer)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l17671">Unit.cpp:17671</a></div></div>
<div class="ttc" id="aclass_unit_html_ad02c1207bd4ccb5df03df1d4eec80293"><div class="ttname"><a href="../../da/db7/class_unit.html#ad02c1207bd4ccb5df03df1d4eec80293">Unit::SetCharmedBy</a></div><div class="ttdeci">bool SetCharmedBy(Unit *charmer, CharmType type, AuraApplication const *aurApp=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l17487">Unit.cpp:17487</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01206">CHARM_TYPE_CONVERT</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00040">GetCaster()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l17671">Unit::RemoveCharmedBy()</a>, and <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l17487">Unit::SetCharmedBy()</a>.</p>

</div>
</div>
<a id="a95b987b958ac0ce5653d44029a31ea59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95b987b958ac0ce5653d44029a31ea59">&#9670;&nbsp;</a></span>HandleComprehendLanguage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleComprehendLanguage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05547">5547</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05548"></a><span class="lineno"> 5548</span>&#160;{</div>
<div class="line"><a name="l05549"></a><span class="lineno"> 5549</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><a name="l05550"></a><span class="lineno"> 5550</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05551"></a><span class="lineno"> 5551</span>&#160; </div>
<div class="line"><a name="l05552"></a><span class="lineno"> 5552</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l05553"></a><span class="lineno"> 5553</span>&#160; </div>
<div class="line"><a name="l05554"></a><span class="lineno"> 5554</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l05555"></a><span class="lineno"> 5555</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a79a7a80acdec46961b4d8aaead4ae631">SetFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a6b03ad8147a368bbf29c0b92b12b0679">UNIT_FIELD_FLAGS_2</a>, <a class="code" href="../../d5/d32/_unit_8h.html#afd9f193edd86cc61d3f2413e3a1eaef5a565914b319bc66d76b91e95970e13acd">UNIT_FLAG2_COMPREHEND_LANG</a>);</div>
<div class="line"><a name="l05556"></a><span class="lineno"> 5556</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l05557"></a><span class="lineno"> 5557</span>&#160;    {</div>
<div class="line"><a name="l05558"></a><span class="lineno"> 5558</span>&#160;        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>()))</div>
<div class="line"><a name="l05559"></a><span class="lineno"> 5559</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05560"></a><span class="lineno"> 5560</span>&#160; </div>
<div class="line"><a name="l05561"></a><span class="lineno"> 5561</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a7e764fbd4b7eca84f80e36e900bca7d3">RemoveFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a6b03ad8147a368bbf29c0b92b12b0679">UNIT_FIELD_FLAGS_2</a>, <a class="code" href="../../d5/d32/_unit_8h.html#afd9f193edd86cc61d3f2413e3a1eaef5a565914b319bc66d76b91e95970e13acd">UNIT_FLAG2_COMPREHEND_LANG</a>);</div>
<div class="line"><a name="l05562"></a><span class="lineno"> 5562</span>&#160;    }</div>
<div class="line"><a name="l05563"></a><span class="lineno"> 5563</span>&#160;}</div>
<div class="ttc" id="a_unit_8h_html_afd9f193edd86cc61d3f2413e3a1eaef5a565914b319bc66d76b91e95970e13acd"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#afd9f193edd86cc61d3f2413e3a1eaef5a565914b319bc66d76b91e95970e13acd">UNIT_FLAG2_COMPREHEND_LANG</a></div><div class="ttdeci">@ UNIT_FLAG2_COMPREHEND_LANG</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00646">Unit.h:646</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00446">GetAuraType()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05194">Unit::HasAuraType()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00851">Object::RemoveFlag()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00836">Object::SetFlag()</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00118">UNIT_FIELD_FLAGS_2</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00646">UNIT_FLAG2_COMPREHEND_LANG</a>.</p>

</div>
</div>
<a id="a34bf10f56f62833415339768d825a83f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34bf10f56f62833415339768d825a83f">&#9670;&nbsp;</a></span>HandleDetectAmore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleDetectAmore </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01673">1673</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;{</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;    {</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    }</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160; </div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    {</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    }</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160; </div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    {</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#afe65b1ab32dbcd51890b754fb8b5e1b0">SetByteFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a6094e668574a870242f146ac00369951">PLAYER_FIELD_BYTES2</a>, 3, 1 &lt;&lt; (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() - 1));</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;    }</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    {</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a832ce5d9dd4224e90b25c6aacef11e20">SPELL_AURA_DETECT_AMORE</a>))</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;        {</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;            <a class="code" href="../../da/db7/class_unit.html#adcdd87d0c137619dfc869536c1315dd7">Unit::AuraEffectList</a> <span class="keyword">const</span>&amp; amoreAuras = target-&gt;<a class="code" href="../../da/db7/class_unit.html#af00ac6c4dc7e639ac646fdafef336e85">GetAuraEffectsByType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a832ce5d9dd4224e90b25c6aacef11e20">SPELL_AURA_DETECT_AMORE</a>);</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="../../da/df1/class_aura_effect.html">AuraEffect</a> <span class="keyword">const</span>* aurEff : amoreAuras)</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == aurEff-&gt;GetMiscValue())</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;                {</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;                }</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;        }</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160; </div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#acef75a7f84673fda790861bd1b0b68b7">RemoveByteFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a6094e668574a870242f146ac00369951">PLAYER_FIELD_BYTES2</a>, 3, 1 &lt;&lt; (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() - 1));</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    }</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;}</div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a832ce5d9dd4224e90b25c6aacef11e20"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a832ce5d9dd4224e90b25c6aacef11e20">SPELL_AURA_DETECT_AMORE</a></div><div class="ttdeci">@ SPELL_AURA_DETECT_AMORE</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00233">SpellAuraDefines.h:233</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02047">Unit::GetAuraEffectsByType()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05194">Unit::HasAuraType()</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00378">PLAYER_FIELD_BYTES2</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00921">Object::RemoveByteFlag()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00902">Object::SetByteFlag()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00233">SPELL_AURA_DETECT_AMORE</a>, and <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>.</p>

</div>
</div>
<a id="a7710e32fe9dc267292c3b15333521560"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7710e32fe9dc267292c3b15333521560">&#9670;&nbsp;</a></span>HandleEffect() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleEffect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00733">733</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;{</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="comment">// check if call is correct, we really don&#39;t want using bitmasks here (with 1 exception)</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <a class="code" href="../../db/d16/_errors_8h.html#af343b20373ba49a92fce523e948f2ab3">ASSERT</a>(mode == <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;           || mode == <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288adad3e656000301a0e16b5fa6f5d0fc8f">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT</a></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;           || mode == <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a2b4b8f92986980a3905f0c2d299beaae">AURA_EFFECT_HANDLE_CHANGE_AMOUNT</a></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;           || mode == <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;           || mode == <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288aaf4c81ebe8cba51f1c5d7b5001d41600">AURA_EFFECT_HANDLE_SKILL</a></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;           || mode == <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9aed024920a7d989c9b024d1c7b00f0b">AURA_EFFECT_HANDLE_REAPPLY</a></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;           || mode == (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a2b4b8f92986980a3905f0c2d299beaae">AURA_EFFECT_HANDLE_CHANGE_AMOUNT</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9aed024920a7d989c9b024d1c7b00f0b">AURA_EFFECT_HANDLE_REAPPLY</a>));</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160; </div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="comment">// register/unregister effect in lists in case of real AuraEffect apply/remove</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="comment">// registration/unregistration is done always before real effect handling (some effect handlers code is depending on this)</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="keywordflow">if</span> (mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>)</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        aurApp-&gt;<a class="code" href="../../d8/da3/class_aura_application.html#a48f6d82daf06f6f2ced98484c2b56248">GetTarget</a>()-&gt;<a class="code" href="../../da/db7/class_unit.html#ac6b29511984119cf4c430697a505cb45">_RegisterAuraEffect</a>(<span class="keyword">this</span>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160; </div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="comment">// xinef: stacking system, force return if effect is disabled, prevents double apply / unapply</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="comment">// xinef: placed here so above line can unregister effect from the list</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="comment">// xinef: this condition works under assumption that effect handlers performs ALL necessery action with CHANGE_AMOUNT mode</span></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="comment">// xinef: as far as i&#39;ve checked, all grouped spells meet this condition</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <span class="keywordflow">if</span> (!aurApp-&gt;<a class="code" href="../../d8/da3/class_aura_application.html#a051b0814a63b9398b523a6bfd23998d2">IsActive</a>(<a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()))</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160; </div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="comment">// real aura apply/remove, handle modifier</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="keywordflow">if</span> (mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>)</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <a class="code" href="../../da/df1/class_aura_effect.html#a2a7bd5fd001ae6fb2ac680b1d25ef378">ApplySpellMod</a>(aurApp-&gt;<a class="code" href="../../d8/da3/class_aura_application.html#a48f6d82daf06f6f2ced98484c2b56248">GetTarget</a>(), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160; </div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <span class="comment">// call scripts helping/replacing effect handlers</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="keywordtype">bool</span> prevented = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        prevented = <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#a882f4ec3b0f104d3c18c718dc71ec668">CallScriptEffectApplyHandlers</a>(<span class="keyword">this</span>, <span class="keyword">const_cast&lt;</span><a class="code" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="code" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a>*<span class="keyword">&gt;</span>(aurApp), (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288">AuraEffectHandleModes</a>)mode);</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        prevented = <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#a37a192c8e0119a8bc304c1711b15376e">CallScriptEffectRemoveHandlers</a>(<span class="keyword">this</span>, <span class="keyword">const_cast&lt;</span><a class="code" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="code" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a>*<span class="keyword">&gt;</span>(aurApp), (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288">AuraEffectHandleModes</a>)mode);</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160; </div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    <span class="comment">// check if script events have removed the aura or if default effect prevention was requested</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a> &amp;&amp; aurApp-&gt;<a class="code" href="../../d8/da3/class_aura_application.html#ae6b921446fc7901f8f053e19c3fb3f4c">GetRemoveMode</a>()) || prevented)</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160; </div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    (*this.*<a class="code" href="../../dc/d3c/_spell_aura_effects_8cpp.html#a2817e7c4c5917ae8deba00b38850e8db">AuraEffectHandler</a> [<a class="code" href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>()])(aurApp, mode, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160; </div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="comment">// check if script events have removed the aura or if default effect prevention was requested</span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a> &amp;&amp; aurApp-&gt;<a class="code" href="../../d8/da3/class_aura_application.html#ae6b921446fc7901f8f053e19c3fb3f4c">GetRemoveMode</a>())</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160; </div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="comment">// call scripts triggering additional events after apply/remove</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#a76282958056070ecbf58c7a864ea7494">CallScriptAfterEffectApplyHandlers</a>(<span class="keyword">this</span>, aurApp, (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288">AuraEffectHandleModes</a>)mode);</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#a893e1bed86677e695a28d8eb4fab763d">CallScriptAfterEffectRemoveHandlers</a>(<span class="keyword">this</span>, aurApp, (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288">AuraEffectHandleModes</a>)mode);</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;}</div>
<div class="ttc" id="a_errors_8h_html_af343b20373ba49a92fce523e948f2ab3"><div class="ttname"><a href="../../db/d16/_errors_8h.html#af343b20373ba49a92fce523e948f2ab3">ASSERT</a></div><div class="ttdeci">#define ASSERT</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d16/_errors_8h_source.html#l00058">Errors.h:58</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a82ebee9e3cf7eaf2ab892a6eb7796288"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288">AuraEffectHandleModes</a></div><div class="ttdeci">AuraEffectHandleModes</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00039">SpellAuraDefines.h:40</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a82ebee9e3cf7eaf2ab892a6eb7796288adad3e656000301a0e16b5fa6f5d0fc8f"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288adad3e656000301a0e16b5fa6f5d0fc8f">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT</a></div><div class="ttdeci">@ AURA_EFFECT_HANDLE_SEND_FOR_CLIENT</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00043">SpellAuraDefines.h:43</a></div></div>
<div class="ttc" id="a_spell_aura_effects_8cpp_html_a2817e7c4c5917ae8deba00b38850e8db"><div class="ttname"><a href="../../dc/d3c/_spell_aura_effects_8cpp.html#a2817e7c4c5917ae8deba00b38850e8db">AuraEffectHandler</a></div><div class="ttdeci">pAuraEffectHandler AuraEffectHandler[TOTAL_AURAS]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00061">SpellAuraEffects.cpp:61</a></div></div>
<div class="ttc" id="aclass_aura_application_html"><div class="ttname"><a href="../../d8/da3/class_aura_application.html">AuraApplication</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dcf/_spell_auras_8h_source.html#l00036">SpellAuras.h:37</a></div></div>
<div class="ttc" id="aclass_aura_application_html_a051b0814a63b9398b523a6bfd23998d2"><div class="ttname"><a href="../../d8/da3/class_aura_application.html#a051b0814a63b9398b523a6bfd23998d2">AuraApplication::IsActive</a></div><div class="ttdeci">bool IsActive(uint8 effIdx)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dcf/_spell_auras_8h_source.html#l00081">SpellAuras.h:81</a></div></div>
<div class="ttc" id="aclass_aura_application_html_a48f6d82daf06f6f2ced98484c2b56248"><div class="ttname"><a href="../../d8/da3/class_aura_application.html#a48f6d82daf06f6f2ced98484c2b56248">AuraApplication::GetTarget</a></div><div class="ttdeci">Unit * GetTarget() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dcf/_spell_auras_8h_source.html#l00061">SpellAuras.h:61</a></div></div>
<div class="ttc" id="aclass_aura_application_html_ae6b921446fc7901f8f053e19c3fb3f4c"><div class="ttname"><a href="../../d8/da3/class_aura_application.html#ae6b921446fc7901f8f053e19c3fb3f4c">AuraApplication::GetRemoveMode</a></div><div class="ttdeci">AuraRemoveMode GetRemoveMode() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dcf/_spell_auras_8h_source.html#l00073">SpellAuras.h:73</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a2a7bd5fd001ae6fb2ac680b1d25ef378"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a2a7bd5fd001ae6fb2ac680b1d25ef378">AuraEffect::ApplySpellMod</a></div><div class="ttdeci">void ApplySpellMod(Unit *target, bool apply)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00791">SpellAuraEffects.cpp:791</a></div></div>
<div class="ttc" id="aclass_aura_html_a37a192c8e0119a8bc304c1711b15376e"><div class="ttname"><a href="../../d2/dde/class_aura.html#a37a192c8e0119a8bc304c1711b15376e">Aura::CallScriptEffectRemoveHandlers</a></div><div class="ttdeci">bool CallScriptEffectRemoveHandlers(AuraEffect const *aurEff, AuraApplication const *aurApp, AuraEffectHandleModes mode)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/_spell_auras_8cpp_source.html#l02353">SpellAuras.cpp:2353</a></div></div>
<div class="ttc" id="aclass_aura_html_a76282958056070ecbf58c7a864ea7494"><div class="ttname"><a href="../../d2/dde/class_aura.html#a76282958056070ecbf58c7a864ea7494">Aura::CallScriptAfterEffectApplyHandlers</a></div><div class="ttdeci">void CallScriptAfterEffectApplyHandlers(AuraEffect const *aurEff, AuraApplication const *aurApp, AuraEffectHandleModes mode)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/_spell_auras_8cpp_source.html#l02372">SpellAuras.cpp:2372</a></div></div>
<div class="ttc" id="aclass_aura_html_a882f4ec3b0f104d3c18c718dc71ec668"><div class="ttname"><a href="../../d2/dde/class_aura.html#a882f4ec3b0f104d3c18c718dc71ec668">Aura::CallScriptEffectApplyHandlers</a></div><div class="ttdeci">bool CallScriptEffectApplyHandlers(AuraEffect const *aurEff, AuraApplication const *aurApp, AuraEffectHandleModes mode)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/_spell_auras_8cpp_source.html#l02333">SpellAuras.cpp:2333</a></div></div>
<div class="ttc" id="aclass_aura_html_a893e1bed86677e695a28d8eb4fab763d"><div class="ttname"><a href="../../d2/dde/class_aura.html#a893e1bed86677e695a28d8eb4fab763d">Aura::CallScriptAfterEffectRemoveHandlers</a></div><div class="ttdeci">void CallScriptAfterEffectRemoveHandlers(AuraEffect const *aurEff, AuraApplication const *aurApp, AuraEffectHandleModes mode)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/_spell_auras_8cpp_source.html#l02386">SpellAuras.cpp:2386</a></div></div>
<div class="ttc" id="aclass_unit_html_ac6b29511984119cf4c430697a505cb45"><div class="ttname"><a href="../../da/db7/class_unit.html#ac6b29511984119cf4c430697a505cb45">Unit::_RegisterAuraEffect</a></div><div class="ttdeci">void _RegisterAuraEffect(AuraEffect *aurEff, bool apply)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l04213">Unit.cpp:4213</a></div></div>
<div class="ttc" id="azconf_8h_html_a2c212835823e3c54a8ab6d95c652660e"><div class="ttname"><a href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></div><div class="ttdeci">#define const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d95/zconf_8h_source.html#l00214">zconf.h:214</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04213">Unit::_RegisterAuraEffect()</a>, <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00791">ApplySpellMod()</a>, <a class="el" href="../../db/d16/_errors_8h_source.html#l00058">ASSERT</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00044">AURA_EFFECT_HANDLE_CHANGE_AMOUNT</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00045">AURA_EFFECT_HANDLE_REAPPLY</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00043">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00047">AURA_EFFECT_HANDLE_SKILL</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00061">AuraEffectHandler</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l02372">Aura::CallScriptAfterEffectApplyHandlers()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l02386">Aura::CallScriptAfterEffectRemoveHandlers()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l02333">Aura::CallScriptEffectApplyHandlers()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l02353">Aura::CallScriptEffectRemoveHandlers()</a>, <a class="el" href="../../de/d95/zconf_8h_source.html#l00214">const</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00446">GetAuraType()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">GetBase()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00049">GetEffIndex()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00073">AuraApplication::GetRemoveMode()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, and <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00081">AuraApplication::IsActive()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l00156">AuraApplication::_HandleEffect()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00700">ChangeAmount()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l01229">Aura::HandleAllEffects()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00784">HandleEffect()</a>, and <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16079">Unit::RestoreDisplayId()</a>.</p>

</div>
</div>
<a id="aab9391e1ba5774b3df74dee4f65f707a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab9391e1ba5774b3df74dee4f65f707a">&#9670;&nbsp;</a></span>HandleEffect() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleEffect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00784">784</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;{</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <a class="code" href="../../d8/da3/class_aura_application.html">AuraApplication</a>* aurApp = <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#a9fb02e4e6e4b16378e89d2126cc291e7">GetApplicationOfTarget</a>(target-&gt;<a class="code" href="../../d8/d83/class_object.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>());</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <a class="code" href="../../db/d16/_errors_8h.html#af343b20373ba49a92fce523e948f2ab3">ASSERT</a>(aurApp);</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <a class="code" href="../../da/df1/class_aura_effect.html#a7710e32fe9dc267292c3b15333521560">HandleEffect</a>(aurApp, mode, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;}</div>
<div class="ttc" id="aclass_aura_html_a9fb02e4e6e4b16378e89d2126cc291e7"><div class="ttname"><a href="../../d2/dde/class_aura.html#a9fb02e4e6e4b16378e89d2126cc291e7">Aura::GetApplicationOfTarget</a></div><div class="ttdeci">const AuraApplication * GetApplicationOfTarget(ObjectGuid guid) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dcf/_spell_auras_8h_source.html#l00182">SpellAuras.h:182</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../db/d16/_errors_8h_source.html#l00058">ASSERT</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00182">Aura::GetApplicationOfTarget()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">GetBase()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00098">Object::GetGUID()</a>, and <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00733">HandleEffect()</a>.</p>

</div>
</div>
<a id="a537d6b3b15ea0530f088c4ba8e1f4c57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a537d6b3b15ea0530f088c4ba8e1f4c57">&#9670;&nbsp;</a></span>HandleFarSight()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleFarSight </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05459">5459</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05460"></a><span class="lineno"> 5460</span>&#160;{</div>
<div class="line"><a name="l05461"></a><span class="lineno"> 5461</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l05462"></a><span class="lineno"> 5462</span>&#160;    {</div>
<div class="line"><a name="l05463"></a><span class="lineno"> 5463</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05464"></a><span class="lineno"> 5464</span>&#160;    }</div>
<div class="line"><a name="l05465"></a><span class="lineno"> 5465</span>&#160; </div>
<div class="line"><a name="l05466"></a><span class="lineno"> 5466</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* caster = <a class="code" href="../../da/df1/class_aura_effect.html#a29cf330277aeb89d17d18f6e112f035b">GetCaster</a>();</div>
<div class="line"><a name="l05467"></a><span class="lineno"> 5467</span>&#160;    <span class="keywordflow">if</span> (!caster || caster-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l05468"></a><span class="lineno"> 5468</span>&#160;    {</div>
<div class="line"><a name="l05469"></a><span class="lineno"> 5469</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05470"></a><span class="lineno"> 5470</span>&#160;    }</div>
<div class="line"><a name="l05471"></a><span class="lineno"> 5471</span>&#160; </div>
<div class="line"><a name="l05472"></a><span class="lineno"> 5472</span>&#160;    <a class="code" href="../../d8/d53/class_player.html">Player</a>* player = caster-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>();</div>
<div class="line"><a name="l05473"></a><span class="lineno"> 5473</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l05474"></a><span class="lineno"> 5474</span>&#160;    {</div>
<div class="line"><a name="l05475"></a><span class="lineno"> 5475</span>&#160;        player-&gt;<a class="code" href="../../d8/d53/class_player.html#a203791fa6ecad8052ca3d3a6dd412cd6">SetFarSightDistance</a>(<a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#ab2a598820f94464fba55f9706449ce25">GetMaxRange</a>());</div>
<div class="line"><a name="l05476"></a><span class="lineno"> 5476</span>&#160;    }</div>
<div class="line"><a name="l05477"></a><span class="lineno"> 5477</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l05478"></a><span class="lineno"> 5478</span>&#160;    {</div>
<div class="line"><a name="l05479"></a><span class="lineno"> 5479</span>&#160;        player-&gt;<a class="code" href="../../d8/d53/class_player.html#a74135dbbdf68a4ea1d5eb72bd6c89162">ResetFarSightDistance</a>();</div>
<div class="line"><a name="l05480"></a><span class="lineno"> 5480</span>&#160;    }</div>
<div class="line"><a name="l05481"></a><span class="lineno"> 5481</span>&#160; </div>
<div class="line"><a name="l05482"></a><span class="lineno"> 5482</span>&#160;    caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a5b2b731101a2c33063cef5c59e595249">UpdateObjectVisibility</a>(!<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l05483"></a><span class="lineno"> 5483</span>&#160;}</div>
<div class="ttc" id="aclass_player_html_a203791fa6ecad8052ca3d3a6dd412cd6"><div class="ttname"><a href="../../d8/d53/class_player.html#a203791fa6ecad8052ca3d3a6dd412cd6">Player::SetFarSightDistance</a></div><div class="ttdeci">void SetFarSightDistance(float radius)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/_player_8cpp_source.html#l15382">Player.cpp:15382</a></div></div>
<div class="ttc" id="aclass_player_html_a74135dbbdf68a4ea1d5eb72bd6c89162"><div class="ttname"><a href="../../d8/d53/class_player.html#a74135dbbdf68a4ea1d5eb72bd6c89162">Player::ResetFarSightDistance</a></div><div class="ttdeci">void ResetFarSightDistance()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/_player_8cpp_source.html#l15387">Player.cpp:15387</a></div></div>
<div class="ttc" id="aclass_spell_info_html_ab2a598820f94464fba55f9706449ce25"><div class="ttname"><a href="../../d4/d7d/class_spell_info.html#ab2a598820f94464fba55f9706449ce25">SpellInfo::GetMaxRange</a></div><div class="ttdeci">float GetMaxRange(bool positive=false, Unit *caster=nullptr, Spell *spell=nullptr) const</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7f/_spell_info_8cpp_source.html#l02265">SpellInfo.cpp:2265</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00040">GetCaster()</a>, <a class="el" href="../../da/d7f/_spell_info_8cpp_source.html#l02265">SpellInfo::GetMaxRange()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00115">m_spellInfo</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l15387">Player::ResetFarSightDistance()</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l15382">Player::SetFarSightDistance()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l18229">Unit::UpdateObjectVisibility()</a>.</p>

</div>
</div>
<a id="ab4c3dba7effbc5735869a7a49ca39005"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4c3dba7effbc5735869a7a49ca39005">&#9670;&nbsp;</a></span>HandleFeignDeath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleFeignDeath </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02374">2374</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;{</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160; </div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160; </div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160; </div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d53/class_player.html">Player</a>* targetPlayer = target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>())</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;    {</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;        <a class="code" href="../../d0/d7d/_script_mgr_8h.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a>-&gt;AnticheatSetUnderACKmount(targetPlayer);</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;    }</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160; </div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;    {</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;<span class="comment">        WorldPacket data(SMSG_FEIGN_DEATH_RESISTED, 9);</span></div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;<span class="comment">        data&lt;&lt;target-&gt;GetGUID();</span></div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;<span class="comment">        data&lt;&lt;uint8(0);</span></div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;<span class="comment">        target-&gt;SendMessageToSet(&amp;data, true);</span></div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;<span class="comment">        */</span></div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160; </div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;        <a class="code" href="../../d5/d32/_unit_8h.html#abbe331960980fa852a0be15ccebef947">UnitList</a> targets;</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;        <a class="code" href="../../d5/dbb/class_acore_1_1_any_unfriendly_unit_in_object_range_check.html">Acore::AnyUnfriendlyUnitInObjectRangeCheck</a> u_check(target, target, target-&gt;<a class="code" href="../../db/df7/class_world_object.html#abc340e4279a3a719bf5e14ed332b722f">GetVisibilityRange</a>()); <span class="comment">// no VISIBILITY_COMPENSATION, distance is enough</span></div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;        <a class="code" href="../../da/d76/struct_acore_1_1_unit_list_searcher.html">Acore::UnitListSearcher&lt;Acore::AnyUnfriendlyUnitInObjectRangeCheck&gt;</a> searcher(target, targets, u_check);</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;        <a class="code" href="../../dc/d9f/struct_cell.html#a15697efba7478b6e227b5f3c7aafc961">Cell::VisitAllObjects</a>(target, searcher, target-&gt;<a class="code" href="../../db/df7/class_world_object.html#a76c507a1b3adcebf2732572bc6b67fe0">GetMap</a>()-&gt;<a class="code" href="../../dd/d11/class_map.html#ac309ee57ae1a2058047c749d85d9bc95">GetVisibilityRange</a>());</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;        <span class="keywordflow">for</span> (UnitList::iterator iter = targets.begin(); iter != targets.end(); ++iter)</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;        {</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;            <span class="keywordflow">if</span> (!(*iter)-&gt;HasUnitState(<a class="code" href="../../d5/d32/_unit_8h.html#ae51d2ecb71f7a5cb3882982a622c9544addeb46481f5261653c159d6f0db9cd54">UNIT_STATE_CASTING</a>))</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160; </div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> i = <a class="code" href="../../d5/d32/_unit_8h.html#a67df18abace700a63e433024dee15b90">CURRENT_FIRST_NON_MELEE_SPELL</a>; i &lt; <a class="code" href="../../d5/d32/_unit_8h.html#aa55ee1b0aa8f9779fbe5f0c4eeaf6bed">CURRENT_MAX_SPELL</a>; i++)</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;            {</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;                <span class="keywordflow">if</span> ((*iter)-&gt;GetCurrentSpell(i) &amp;&amp; (*iter)-&gt;GetCurrentSpell(i)-&gt;m_targets.GetUnitTargetGUID() == target-&gt;<a class="code" href="../../d8/d83/class_object.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>())</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;                {</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;                    <span class="keyword">const</span> <a class="code" href="../../d4/d7d/class_spell_info.html">SpellInfo</a>* si = (*iter)-&gt;GetCurrentSpell(i)-&gt;GetSpellInfo();</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;                    <span class="keywordflow">if</span> (si-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#afc0226d0611e178e6edb4d2776e03094a78992c0cb395380959dea6189150d8bb">SPELL_ATTR6_IGNORE_PHASE_SHIFT</a>) &amp;&amp; (*iter)-&gt;GetTypeId() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2a93dfa528ffc48db4993fb7ac62696db9">TYPEID_UNIT</a>)</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;                    {</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;                        <a class="code" href="../../d1/dac/class_creature.html">Creature</a>* <a class="code" href="../../d4/d71/namespacempq.html#af509b98ca1ebe6c0248f215d23e06c93">c</a> = (*iter)-&gt;ToCreature();</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;                        <span class="keywordflow">if</span> ((!<a class="code" href="../../d4/d71/namespacempq.html#af509b98ca1ebe6c0248f215d23e06c93">c</a>-&gt;IsPet() &amp;&amp; <a class="code" href="../../d4/d71/namespacempq.html#af509b98ca1ebe6c0248f215d23e06c93">c</a>-&gt;GetCreatureTemplate()-&gt;rank == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8af71d86ca00a430958a42922ac6ceafab7aa8a6a53346999967dee75b6f87565">CREATURE_ELITE_WORLDBOSS</a>) || <a class="code" href="../../d4/d71/namespacempq.html#af509b98ca1ebe6c0248f215d23e06c93">c</a>-&gt;isWorldBoss() || <a class="code" href="../../d4/d71/namespacempq.html#af509b98ca1ebe6c0248f215d23e06c93">c</a>-&gt;IsDungeonBoss())</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;                            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;                    }</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;                    <span class="keywordtype">bool</span> interrupt = <span class="keyword">false</span>; <span class="comment">// pussywizard: skip spells that don&#39;t target units, but casted on unit (eg. TARGET_DEST_TARGET_ENEMY)</span></div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;                    <span class="keywordflow">for</span> (<a class="code" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> j = 0; j &lt; <a class="code" href="../../d1/d22/_d_b_c_structure_8h.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>; ++j)</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;                        <span class="keywordflow">if</span> (si-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[j].Effect &amp;&amp; (si-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[j].GetUsedTargetObjectType() == <a class="code" href="../../dc/d70/_spell_info_8h.html#abd452c9e8451ab6d47620dbda77f087aa07a11fb9bb20374e8b0b52385ebdac6a">TARGET_OBJECT_TYPE_UNIT</a> || si-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[j].GetUsedTargetObjectType() == <a class="code" href="../../dc/d70/_spell_info_8h.html#abd452c9e8451ab6d47620dbda77f087aa305e23c44d8e1b887ed9a4eee850b744">TARGET_OBJECT_TYPE_UNIT_AND_DEST</a>))</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;                        {</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;                            <span class="comment">// at least one effect truly targets an unit, interrupt the spell</span></div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;                            interrupt = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;                        }</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;                    <span class="keywordflow">if</span> (interrupt)</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;                        (*iter)-&gt;InterruptSpell(<a class="code" href="../../d5/d32/_unit_8h.html#ab791040bd6d685b1fd2cfd12c96d0a1f">CurrentSpellTypes</a>(i), <span class="keyword">false</span>);</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;                }</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;            }</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;        }</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160; </div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../db/df7/class_world_object.html#a29762f86d0726e4d229df51281b9d710">GetInstanceScript</a>() &amp;&amp; target-&gt;<a class="code" href="../../db/df7/class_world_object.html#a29762f86d0726e4d229df51281b9d710">GetInstanceScript</a>()-&gt;<a class="code" href="../../d8/d83/class_instance_script.html#a9753c3c71fef44fcbc33b89ff68350cd">IsEncounterInProgress</a>())</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;        {</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;            <span class="comment">// Xinef: replaced with CombatStop(false)</span></div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#aee07e22b70ed433a845b0673579d5fee">AttackStop</a>();</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#ac10ce49db853cbab9f0c56444c9ecd25">RemoveAllAttackers</a>();</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a7f568bbe5292ed618cd40bde9297b094">getHostileRefMgr</a>().<a class="code" href="../../d9/d07/class_hostile_ref_mgr.html#af19a7681493ed53a3a8bafbed2c80f76">addThreatPercent</a>(-100);</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;            target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a0eaf8ade1fc32527b845a3213bb27703">SendAttackSwingCancelAttack</a>();     <span class="comment">// melee and ranged forced attack cancel</span></div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;        }</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;        {</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a18f77484ed2acc7be7fa29d1df7a0c12">CombatStop</a>();</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a7f568bbe5292ed618cd40bde9297b094">getHostileRefMgr</a>().<a class="code" href="../../d9/d07/class_hostile_ref_mgr.html#a0327a7238535a3d0961da1cca2102b0e">deleteReferences</a>();</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;        }</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160; </div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a2be941a27d14de6da7676c6fdbd37bb9">RemoveAurasWithInterruptFlags</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a0709fc3ab848cf1b8b4853813b8fe011a61b4509cc6643cd80da8b6c065d45f4a">AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</a>);</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160; </div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;        <span class="comment">// prevent interrupt message</span></div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>() == target-&gt;<a class="code" href="../../d8/d83/class_object.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>())</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;        {</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;            <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a6a942f7bfc8e8ea98ab52a0172970a35">GetCurrentSpell</a>(<a class="code" href="../../d5/d32/_unit_8h.html#ab791040bd6d685b1fd2cfd12c96d0a1fa9cbac6c5133585dece51a40e9c1908b0">CURRENT_GENERIC_SPELL</a>))</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#ab9349116923cba29e3de802e86c3e2ec">FinishSpell</a>(<a class="code" href="../../d5/d32/_unit_8h.html#ab791040bd6d685b1fd2cfd12c96d0a1fa9cbac6c5133585dece51a40e9c1908b0">CURRENT_GENERIC_SPELL</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160; </div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;            <span class="comment">// interrupt autoshot</span></div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;            <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a6a942f7bfc8e8ea98ab52a0172970a35">GetCurrentSpell</a>(<a class="code" href="../../d5/d32/_unit_8h.html#ab791040bd6d685b1fd2cfd12c96d0a1faf4d9017fa01b68842e61b948323e93c1">CURRENT_AUTOREPEAT_SPELL</a>))</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;            {</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#ab9349116923cba29e3de802e86c3e2ec">FinishSpell</a>(<a class="code" href="../../d5/d32/_unit_8h.html#ab791040bd6d685b1fd2cfd12c96d0a1faf4d9017fa01b68842e61b948323e93c1">CURRENT_AUTOREPEAT_SPELL</a>);</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;                target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a2f876e332a71e68aa8fd08863ad3623c">SendAutoRepeatCancel</a>(target);</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;            }</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;        }</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160; </div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a2bdfe38bdc28869a9002094e4341d56e">InterruptNonMeleeSpells</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160; </div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;        <span class="comment">// stop handling the effect if it was removed by linked event</span></div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;        <span class="keywordflow">if</span> (aurApp-&gt;GetRemoveMode())</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;        <span class="comment">// blizz like 2.0.x</span></div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a79a7a80acdec46961b4d8aaead4ae631">SetFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881aab4868b631f1cfaf30faee627f7c9dbf">UNIT_FIELD_FLAGS</a>, <a class="code" href="../../d5/d32/_unit_8h.html#afaf72688a238d4ba16ba2ae1444cd552a15cbbb6244dd6afc8afc84ccbed4c981">UNIT_FLAG_PREVENT_EMOTES_FROM_CHAT_TEXT</a>);</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;        <span class="comment">// blizz like 2.0.x</span></div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a79a7a80acdec46961b4d8aaead4ae631">SetFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a6b03ad8147a368bbf29c0b92b12b0679">UNIT_FIELD_FLAGS_2</a>, <a class="code" href="../../d5/d32/_unit_8h.html#afd9f193edd86cc61d3f2413e3a1eaef5a79163df63e20fe477d0b2a6f5043a515">UNIT_FLAG2_FEIGN_DEATH</a>);</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;        <span class="comment">// blizz like 2.0.x</span></div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a79a7a80acdec46961b4d8aaead4ae631">SetFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881affa05042cc4016a32cf1a66d4157d03d">UNIT_DYNAMIC_FLAGS</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a6d2f7a5452237dadf8fd3aed70f44039a0d49a1984bca491e07dc726a7b2b53fe">UNIT_DYNFLAG_DEAD</a>);</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160; </div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a752f5f516257bfdf139098c29a55c466">AddUnitState</a>(<a class="code" href="../../d5/d32/_unit_8h.html#ae51d2ecb71f7a5cb3882982a622c9544a1fba79641d6d2749fd2f2dc26e0e7fba">UNIT_STATE_DIED</a>);</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;    }</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;    {</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;<span class="comment">        WorldPacket data(SMSG_FEIGN_DEATH_RESISTED, 9);</span></div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;<span class="comment">        data&lt;&lt;target-&gt;GetGUID();</span></div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;<span class="comment">        data&lt;&lt;uint8(1);</span></div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;<span class="comment">        target-&gt;SendMessageToSet(&amp;data, true);</span></div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;<span class="comment">        */</span></div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;        <span class="comment">// blizz like 2.0.x</span></div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a7e764fbd4b7eca84f80e36e900bca7d3">RemoveFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881aab4868b631f1cfaf30faee627f7c9dbf">UNIT_FIELD_FLAGS</a>, <a class="code" href="../../d5/d32/_unit_8h.html#afaf72688a238d4ba16ba2ae1444cd552a15cbbb6244dd6afc8afc84ccbed4c981">UNIT_FLAG_PREVENT_EMOTES_FROM_CHAT_TEXT</a>);</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;        <span class="comment">// blizz like 2.0.x</span></div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a7e764fbd4b7eca84f80e36e900bca7d3">RemoveFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a6b03ad8147a368bbf29c0b92b12b0679">UNIT_FIELD_FLAGS_2</a>, <a class="code" href="../../d5/d32/_unit_8h.html#afd9f193edd86cc61d3f2413e3a1eaef5a79163df63e20fe477d0b2a6f5043a515">UNIT_FLAG2_FEIGN_DEATH</a>);</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;        <span class="comment">// blizz like 2.0.x</span></div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a7e764fbd4b7eca84f80e36e900bca7d3">RemoveFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881affa05042cc4016a32cf1a66d4157d03d">UNIT_DYNAMIC_FLAGS</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a6d2f7a5452237dadf8fd3aed70f44039a0d49a1984bca491e07dc726a7b2b53fe">UNIT_DYNFLAG_DEAD</a>);</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160; </div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a0234fee1df2999bda3ca22449164f7b5">ClearUnitState</a>(<a class="code" href="../../d5/d32/_unit_8h.html#ae51d2ecb71f7a5cb3882982a622c9544a1fba79641d6d2749fd2f2dc26e0e7fba">UNIT_STATE_DIED</a>);</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;    }</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_a6d2f7a5452237dadf8fd3aed70f44039a0d49a1984bca491e07dc726a7b2b53fe"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a6d2f7a5452237dadf8fd3aed70f44039a0d49a1984bca491e07dc726a7b2b53fe">UNIT_DYNFLAG_DEAD</a></div><div class="ttdeci">@ UNIT_DYNFLAG_DEAD</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l03096">SharedDefines.h:3096</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a8af71d86ca00a430958a42922ac6ceafab7aa8a6a53346999967dee75b6f87565"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a8af71d86ca00a430958a42922ac6ceafab7aa8a6a53346999967dee75b6f87565">CREATURE_ELITE_WORLDBOSS</a></div><div class="ttdeci">@ CREATURE_ELITE_WORLDBOSS</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l02704">SharedDefines.h:2704</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_afc0226d0611e178e6edb4d2776e03094a78992c0cb395380959dea6189150d8bb"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#afc0226d0611e178e6edb4d2776e03094a78992c0cb395380959dea6189150d8bb">SPELL_ATTR6_IGNORE_PHASE_SHIFT</a></div><div class="ttdeci">@ SPELL_ATTR6_IGNORE_PHASE_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00589">SharedDefines.h:589</a></div></div>
<div class="ttc" id="a_spell_info_8h_html_abd452c9e8451ab6d47620dbda77f087aa07a11fb9bb20374e8b0b52385ebdac6a"><div class="ttname"><a href="../../dc/d70/_spell_info_8h.html#abd452c9e8451ab6d47620dbda77f087aa07a11fb9bb20374e8b0b52385ebdac6a">TARGET_OBJECT_TYPE_UNIT</a></div><div class="ttdeci">@ TARGET_OBJECT_TYPE_UNIT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d70/_spell_info_8h_source.html#l00101">SpellInfo.h:101</a></div></div>
<div class="ttc" id="a_spell_info_8h_html_abd452c9e8451ab6d47620dbda77f087aa305e23c44d8e1b887ed9a4eee850b744"><div class="ttname"><a href="../../dc/d70/_spell_info_8h.html#abd452c9e8451ab6d47620dbda77f087aa305e23c44d8e1b887ed9a4eee850b744">TARGET_OBJECT_TYPE_UNIT_AND_DEST</a></div><div class="ttdeci">@ TARGET_OBJECT_TYPE_UNIT_AND_DEST</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d70/_spell_info_8h_source.html#l00102">SpellInfo.h:102</a></div></div>
<div class="ttc" id="a_unit_8h_html_a67df18abace700a63e433024dee15b90"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a67df18abace700a63e433024dee15b90">CURRENT_FIRST_NON_MELEE_SPELL</a></div><div class="ttdeci">#define CURRENT_FIRST_NON_MELEE_SPELL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01112">Unit.h:1112</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab791040bd6d685b1fd2cfd12c96d0a1fa9cbac6c5133585dece51a40e9c1908b0"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab791040bd6d685b1fd2cfd12c96d0a1fa9cbac6c5133585dece51a40e9c1908b0">CURRENT_GENERIC_SPELL</a></div><div class="ttdeci">@ CURRENT_GENERIC_SPELL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01107">Unit.h:1107</a></div></div>
<div class="ttc" id="a_unit_8h_html_ab791040bd6d685b1fd2cfd12c96d0a1faf4d9017fa01b68842e61b948323e93c1"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab791040bd6d685b1fd2cfd12c96d0a1faf4d9017fa01b68842e61b948323e93c1">CURRENT_AUTOREPEAT_SPELL</a></div><div class="ttdeci">@ CURRENT_AUTOREPEAT_SPELL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01110">Unit.h:1109</a></div></div>
<div class="ttc" id="a_unit_8h_html_abbe331960980fa852a0be15ccebef947"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#abbe331960980fa852a0be15ccebef947">UnitList</a></div><div class="ttdeci">std::list&lt; Unit * &gt; UnitList</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00349">Unit.h:347</a></div></div>
<div class="ttc" id="a_unit_8h_html_ae51d2ecb71f7a5cb3882982a622c9544a1fba79641d6d2749fd2f2dc26e0e7fba"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ae51d2ecb71f7a5cb3882982a622c9544a1fba79641d6d2749fd2f2dc26e0e7fba">UNIT_STATE_DIED</a></div><div class="ttdeci">@ UNIT_STATE_DIED</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00484">Unit.h:484</a></div></div>
<div class="ttc" id="a_unit_8h_html_ae51d2ecb71f7a5cb3882982a622c9544addeb46481f5261653c159d6f0db9cd54"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ae51d2ecb71f7a5cb3882982a622c9544addeb46481f5261653c159d6f0db9cd54">UNIT_STATE_CASTING</a></div><div class="ttdeci">@ UNIT_STATE_CASTING</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00499">Unit.h:499</a></div></div>
<div class="ttc" id="a_unit_8h_html_afaf72688a238d4ba16ba2ae1444cd552a15cbbb6244dd6afc8afc84ccbed4c981"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#afaf72688a238d4ba16ba2ae1444cd552a15cbbb6244dd6afc8afc84ccbed4c981">UNIT_FLAG_PREVENT_EMOTES_FROM_CHAT_TEXT</a></div><div class="ttdeci">@ UNIT_FLAG_PREVENT_EMOTES_FROM_CHAT_TEXT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00635">Unit.h:635</a></div></div>
<div class="ttc" id="a_unit_8h_html_afd9f193edd86cc61d3f2413e3a1eaef5a79163df63e20fe477d0b2a6f5043a515"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#afd9f193edd86cc61d3f2413e3a1eaef5a79163df63e20fe477d0b2a6f5043a515">UNIT_FLAG2_FEIGN_DEATH</a></div><div class="ttdeci">@ UNIT_FLAG2_FEIGN_DEATH</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00643">Unit.h:643</a></div></div>
<div class="ttc" id="aclass_acore_1_1_any_unfriendly_unit_in_object_range_check_html"><div class="ttname"><a href="../../d5/dbb/class_acore_1_1_any_unfriendly_unit_in_object_range_check.html">Acore::AnyUnfriendlyUnitInObjectRangeCheck</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dc9/_grid_notifiers_8h_source.html#l00802">GridNotifiers.h:803</a></div></div>
<div class="ttc" id="aclass_creature_html"><div class="ttname"><a href="../../d1/dac/class_creature.html">Creature</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d93/_creature_8h_source.html#l00045">Creature.h:46</a></div></div>
<div class="ttc" id="aclass_hostile_ref_mgr_html_a0327a7238535a3d0961da1cca2102b0e"><div class="ttname"><a href="../../d9/d07/class_hostile_ref_mgr.html#a0327a7238535a3d0961da1cca2102b0e">HostileRefMgr::deleteReferences</a></div><div class="ttdeci">void deleteReferences(bool removeFromMap=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d30/_hostile_ref_mgr_8cpp_source.html#l00114">HostileRefMgr.cpp:114</a></div></div>
<div class="ttc" id="aclass_hostile_ref_mgr_html_af19a7681493ed53a3a8bafbed2c80f76"><div class="ttname"><a href="../../d9/d07/class_hostile_ref_mgr.html#af19a7681493ed53a3a8bafbed2c80f76">HostileRefMgr::addThreatPercent</a></div><div class="ttdeci">void addThreatPercent(int32 percent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d30/_hostile_ref_mgr_8cpp_source.html#l00074">HostileRefMgr.cpp:74</a></div></div>
<div class="ttc" id="aclass_instance_script_html_a9753c3c71fef44fcbc33b89ff68350cd"><div class="ttname"><a href="../../d8/d83/class_instance_script.html#a9753c3c71fef44fcbc33b89ff68350cd">InstanceScript::IsEncounterInProgress</a></div><div class="ttdeci">virtual bool IsEncounterInProgress() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d83/_instance_script_8cpp_source.html#l00112">InstanceScript.cpp:112</a></div></div>
<div class="ttc" id="aclass_map_html_ac309ee57ae1a2058047c749d85d9bc95"><div class="ttname"><a href="../../dd/d11/class_map.html#ac309ee57ae1a2058047c749d85d9bc95">Map::GetVisibilityRange</a></div><div class="ttdeci">float GetVisibilityRange() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d63/_map_8h_source.html#l00337">Map.h:337</a></div></div>
<div class="ttc" id="aclass_player_html_a0eaf8ade1fc32527b845a3213bb27703"><div class="ttname"><a href="../../d8/d53/class_player.html#a0eaf8ade1fc32527b845a3213bb27703">Player::SendAttackSwingCancelAttack</a></div><div class="ttdeci">void SendAttackSwingCancelAttack()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d7b/_player_misc_8cpp_source.html#l00138">PlayerMisc.cpp:138</a></div></div>
<div class="ttc" id="aclass_player_html_a2f876e332a71e68aa8fd08863ad3623c"><div class="ttname"><a href="../../d8/d53/class_player.html#a2f876e332a71e68aa8fd08863ad3623c">Player::SendAutoRepeatCancel</a></div><div class="ttdeci">void SendAutoRepeatCancel(Unit *target)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d7b/_player_misc_8cpp_source.html#l00150">PlayerMisc.cpp:150</a></div></div>
<div class="ttc" id="aclass_unit_html_a18f77484ed2acc7be7fa29d1df7a0c12"><div class="ttname"><a href="../../da/db7/class_unit.html#a18f77484ed2acc7be7fa29d1df7a0c12">Unit::CombatStop</a></div><div class="ttdeci">void CombatStop(bool includingCast=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l09835">Unit.cpp:9835</a></div></div>
<div class="ttc" id="aclass_unit_html_a2bdfe38bdc28869a9002094e4341d56e"><div class="ttname"><a href="../../da/db7/class_unit.html#a2bdfe38bdc28869a9002094e4341d56e">Unit::InterruptNonMeleeSpells</a></div><div class="ttdeci">void InterruptNonMeleeSpells(bool withDelayed, uint32 spellid=0, bool withInstant=true, bool bySelf=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l03656">Unit.cpp:3656</a></div></div>
<div class="ttc" id="aclass_unit_html_ab9349116923cba29e3de802e86c3e2ec"><div class="ttname"><a href="../../da/db7/class_unit.html#ab9349116923cba29e3de802e86c3e2ec">Unit::FinishSpell</a></div><div class="ttdeci">void FinishSpell(CurrentSpellTypes spellType, bool ok=true)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l03614">Unit.cpp:3614</a></div></div>
<div class="ttc" id="aclass_unit_html_ac10ce49db853cbab9f0c56444c9ecd25"><div class="ttname"><a href="../../da/db7/class_unit.html#ac10ce49db853cbab9f0c56444c9ecd25">Unit::RemoveAllAttackers</a></div><div class="ttdeci">void RemoveAllAttackers()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l09878">Unit.cpp:9878</a></div></div>
<div class="ttc" id="aclass_unit_html_aee07e22b70ed433a845b0673579d5fee"><div class="ttname"><a href="../../da/db7/class_unit.html#aee07e22b70ed433a845b0673579d5fee">Unit::AttackStop</a></div><div class="ttdeci">bool AttackStop()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l09802">Unit.cpp:9802</a></div></div>
<div class="ttc" id="aclass_world_object_html_a29762f86d0726e4d229df51281b9d710"><div class="ttname"><a href="../../db/df7/class_world_object.html#a29762f86d0726e4d229df51281b9d710">WorldObject::GetInstanceScript</a></div><div class="ttdeci">InstanceScript * GetInstanceScript() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/ded/_object_8cpp_source.html#l01240">Object.cpp:1240</a></div></div>
<div class="ttc" id="aclass_world_object_html_abc340e4279a3a719bf5e14ed332b722f"><div class="ttname"><a href="../../db/df7/class_world_object.html#abc340e4279a3a719bf5e14ed332b722f">WorldObject::GetVisibilityRange</a></div><div class="ttdeci">float GetVisibilityRange() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/ded/_object_8cpp_source.html#l01814">Object.cpp:1814</a></div></div>
<div class="ttc" id="anamespacempq_html_af509b98ca1ebe6c0248f215d23e06c93"><div class="ttname"><a href="../../d4/d71/namespacempq.html#af509b98ca1ebe6c0248f215d23e06c93">mpq.c</a></div><div class="ttdeci">list c</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d3e/mpq_8py_source.html#l00295">mpq.py:295</a></div></div>
<div class="ttc" id="astruct_acore_1_1_unit_list_searcher_html"><div class="ttname"><a href="../../da/d76/struct_acore_1_1_unit_list_searcher.html">Acore::UnitListSearcher</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dc9/_grid_notifiers_8h_source.html#l00391">GridNotifiers.h:392</a></div></div>
<div class="ttc" id="astruct_cell_html_a15697efba7478b6e227b5f3c7aafc961"><div class="ttname"><a href="../../dc/d9f/struct_cell.html#a15697efba7478b6e227b5f3c7aafc961">Cell::VisitAllObjects</a></div><div class="ttdeci">static void VisitAllObjects(WorldObject const *obj, T &amp;visitor, float radius, bool dont_load=true)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d39/_cell_impl_8h_source.html#l00207">CellImpl.h:207</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d1/d30/_hostile_ref_mgr_8cpp_source.html#l00074">HostileRefMgr::addThreatPercent()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01518">Unit::AddUnitState()</a>, <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l09802">Unit::AttackStop()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00072">AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</a>, <a class="el" href="../../d6/d3e/mpq_8py_source.html#l00295">mpq::c</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01520">Unit::ClearUnitState()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l09835">Unit::CombatStop()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l02704">CREATURE_ELITE_WORLDBOSS</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01109">CURRENT_AUTOREPEAT_SPELL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01112">CURRENT_FIRST_NON_MELEE_SPELL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01107">CURRENT_GENERIC_SPELL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01113">CURRENT_MAX_SPELL</a>, <a class="el" href="../../d1/d30/_hostile_ref_mgr_8cpp_source.html#l00114">HostileRefMgr::deleteReferences()</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00387">SpellInfo::Effects</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l03614">Unit::FinishSpell()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00041">GetCasterGUID()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02143">Unit::GetCurrentSpell()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00098">Object::GetGUID()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02236">Unit::getHostileRefMgr()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l01240">WorldObject::GetInstanceScript()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00800">WorldObject::GetMap()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00073">AuraApplication::GetRemoveMode()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l01814">WorldObject::GetVisibilityRange()</a>, <a class="el" href="../../d3/d63/_map_8h_source.html#l00337">Map::GetVisibilityRange()</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00408">SpellInfo::HasAttribute()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l03656">Unit::InterruptNonMeleeSpells()</a>, <a class="el" href="../../d5/d83/_instance_script_8cpp_source.html#l00112">InstanceScript::IsEncounterInProgress()</a>, <a class="el" href="../../d1/d22/_d_b_c_structure_8h_source.html#l01559">MAX_SPELL_EFFECTS</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l09878">Unit::RemoveAllAttackers()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04681">Unit::RemoveAurasWithInterruptFlags()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00851">Object::RemoveFlag()</a>, <a class="el" href="../../d2/d7b/_player_misc_8cpp_source.html#l00138">Player::SendAttackSwingCancelAttack()</a>, <a class="el" href="../../d2/d7b/_player_misc_8cpp_source.html#l00150">Player::SendAutoRepeatCancel()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00836">Object::SetFlag()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00589">SPELL_ATTR6_IGNORE_PHASE_SHIFT</a>, <a class="el" href="../../d0/d7d/_script_mgr_8h_source.html#l02048">sScriptMgr</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00101">TARGET_OBJECT_TYPE_UNIT</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00102">TARGET_OBJECT_TYPE_UNIT_AND_DEST</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00037">TYPEID_UNIT</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00136">UNIT_DYNAMIC_FLAGS</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l03096">UNIT_DYNFLAG_DEAD</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00117">UNIT_FIELD_FLAGS</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00118">UNIT_FIELD_FLAGS_2</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00643">UNIT_FLAG2_FEIGN_DEATH</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00635">UNIT_FLAG_PREVENT_EMOTES_FROM_CHAT_TEXT</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00499">UNIT_STATE_CASTING</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00484">UNIT_STATE_DIED</a>, and <a class="el" href="../../d4/d39/_cell_impl_8h_source.html#l00207">Cell::VisitAllObjects()</a>.</p>

</div>
</div>
<a id="ad9645e47c14c56ae888807b9027e9c34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9645e47c14c56ae888807b9027e9c34">&#9670;&nbsp;</a></span>HandleForceMoveForward()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleForceMoveForward </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02956">2956</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;{</div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160; </div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160; </div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a79a7a80acdec46961b4d8aaead4ae631">SetFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a6b03ad8147a368bbf29c0b92b12b0679">UNIT_FIELD_FLAGS_2</a>, <a class="code" href="../../d5/d32/_unit_8h.html#afd9f193edd86cc61d3f2413e3a1eaef5a6b5e14f64219057e58c20f8345702ed0">UNIT_FLAG2_FORCE_MOVEMENT</a>);</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;    {</div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;        <span class="comment">// do not remove unit flag if there are more than this auraEffect of that kind on unit on unit</span></div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>()))</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a7e764fbd4b7eca84f80e36e900bca7d3">RemoveFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a6b03ad8147a368bbf29c0b92b12b0679">UNIT_FIELD_FLAGS_2</a>, <a class="code" href="../../d5/d32/_unit_8h.html#afd9f193edd86cc61d3f2413e3a1eaef5a6b5e14f64219057e58c20f8345702ed0">UNIT_FLAG2_FORCE_MOVEMENT</a>);</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;    }</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;}</div>
<div class="ttc" id="a_unit_8h_html_afd9f193edd86cc61d3f2413e3a1eaef5a6b5e14f64219057e58c20f8345702ed0"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#afd9f193edd86cc61d3f2413e3a1eaef5a6b5e14f64219057e58c20f8345702ed0">UNIT_FLAG2_FORCE_MOVEMENT</a></div><div class="ttdeci">@ UNIT_FLAG2_FORCE_MOVEMENT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00649">Unit.h:649</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00446">GetAuraType()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05194">Unit::HasAuraType()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00851">Object::RemoveFlag()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00836">Object::SetFlag()</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00118">UNIT_FIELD_FLAGS_2</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00649">UNIT_FLAG2_FORCE_MOVEMENT</a>.</p>

</div>
</div>
<a id="a3b1c8a621c824d3d9e5021c9503193f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b1c8a621c824d3d9e5021c9503193f6">&#9670;&nbsp;</a></span>HandleForceReaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleForceReaction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05485">5485</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05486"></a><span class="lineno"> 5486</span>&#160;{</div>
<div class="line"><a name="l05487"></a><span class="lineno"> 5487</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>))</div>
<div class="line"><a name="l05488"></a><span class="lineno"> 5488</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05489"></a><span class="lineno"> 5489</span>&#160; </div>
<div class="line"><a name="l05490"></a><span class="lineno"> 5490</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l05491"></a><span class="lineno"> 5491</span>&#160; </div>
<div class="line"><a name="l05492"></a><span class="lineno"> 5492</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l05493"></a><span class="lineno"> 5493</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05494"></a><span class="lineno"> 5494</span>&#160; </div>
<div class="line"><a name="l05495"></a><span class="lineno"> 5495</span>&#160;    <a class="code" href="../../d8/d53/class_player.html">Player</a>* player = target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>();</div>
<div class="line"><a name="l05496"></a><span class="lineno"> 5496</span>&#160; </div>
<div class="line"><a name="l05497"></a><span class="lineno"> 5497</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> faction_id = <a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>();</div>
<div class="line"><a name="l05498"></a><span class="lineno"> 5498</span>&#160;    <a class="code" href="../../df/d0b/_shared_defines_8h.html#aa544c39c4535f97454397d5fb4a1ed76">ReputationRank</a> faction_rank = <a class="code" href="../../df/d0b/_shared_defines_8h.html#aa544c39c4535f97454397d5fb4a1ed76">ReputationRank</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a>);</div>
<div class="line"><a name="l05499"></a><span class="lineno"> 5499</span>&#160; </div>
<div class="line"><a name="l05500"></a><span class="lineno"> 5500</span>&#160;    player-&gt;<a class="code" href="../../d8/d53/class_player.html#a06adafbf0eb3a828dfc0049cc81ca31c">GetReputationMgr</a>().<a class="code" href="../../df/dee/class_reputation_mgr.html#a840258781abe2d2143525c7467c71258">ApplyForceReaction</a>(faction_id, faction_rank, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l05501"></a><span class="lineno"> 5501</span>&#160;    player-&gt;<a class="code" href="../../d8/d53/class_player.html#a06adafbf0eb3a828dfc0049cc81ca31c">GetReputationMgr</a>().<a class="code" href="../../df/dee/class_reputation_mgr.html#ada7a924a1bb1eea6b8da692ec483c7c6">SendForceReactions</a>();</div>
<div class="line"><a name="l05502"></a><span class="lineno"> 5502</span>&#160; </div>
<div class="line"><a name="l05503"></a><span class="lineno"> 5503</span>&#160;    <span class="comment">// stop fighting if at apply forced rank friendly or at remove real rank friendly</span></div>
<div class="line"><a name="l05504"></a><span class="lineno"> 5504</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a> &amp;&amp; faction_rank &gt;= <a class="code" href="../../df/d0b/_shared_defines_8h.html#aa544c39c4535f97454397d5fb4a1ed76acacb6fa3b41a9e3ebeea1ba226ca407f">REP_FRIENDLY</a>) || (!<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a> &amp;&amp; player-&gt;<a class="code" href="../../d8/d53/class_player.html#ac3ed608b721a2bea2b86a62995e7622a">GetReputationRank</a>(faction_id) &gt;= <a class="code" href="../../df/d0b/_shared_defines_8h.html#aa544c39c4535f97454397d5fb4a1ed76acacb6fa3b41a9e3ebeea1ba226ca407f">REP_FRIENDLY</a>))</div>
<div class="line"><a name="l05505"></a><span class="lineno"> 5505</span>&#160;        player-&gt;<a class="code" href="../../da/db7/class_unit.html#aa655b9b66c027ff7a6e2f1775cc2dfd8">StopAttackFaction</a>(faction_id);</div>
<div class="line"><a name="l05506"></a><span class="lineno"> 5506</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_aa544c39c4535f97454397d5fb4a1ed76"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#aa544c39c4535f97454397d5fb4a1ed76">ReputationRank</a></div><div class="ttdeci">ReputationRank</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00150">SharedDefines.h:151</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_aa544c39c4535f97454397d5fb4a1ed76acacb6fa3b41a9e3ebeea1ba226ca407f"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#aa544c39c4535f97454397d5fb4a1ed76acacb6fa3b41a9e3ebeea1ba226ca407f">REP_FRIENDLY</a></div><div class="ttdeci">@ REP_FRIENDLY</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00156">SharedDefines.h:156</a></div></div>
<div class="ttc" id="aclass_player_html_a06adafbf0eb3a828dfc0049cc81ca31c"><div class="ttname"><a href="../../d8/d53/class_player.html#a06adafbf0eb3a828dfc0049cc81ca31c">Player::GetReputationMgr</a></div><div class="ttdeci">ReputationMgr &amp; GetReputationMgr()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l02067">Player.h:2067</a></div></div>
<div class="ttc" id="aclass_player_html_ac3ed608b721a2bea2b86a62995e7622a"><div class="ttname"><a href="../../d8/d53/class_player.html#ac3ed608b721a2bea2b86a62995e7622a">Player::GetReputationRank</a></div><div class="ttdeci">ReputationRank GetReputationRank(uint32 faction_id) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/_player_8cpp_source.html#l05666">Player.cpp:5666</a></div></div>
<div class="ttc" id="aclass_reputation_mgr_html_a840258781abe2d2143525c7467c71258"><div class="ttname"><a href="../../df/dee/class_reputation_mgr.html#a840258781abe2d2143525c7467c71258">ReputationMgr::ApplyForceReaction</a></div><div class="ttdeci">void ApplyForceReaction(uint32 faction_id, ReputationRank rank, bool apply)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/ded/_reputation_mgr_8cpp_source.html#l00126">ReputationMgr.cpp:126</a></div></div>
<div class="ttc" id="aclass_reputation_mgr_html_ada7a924a1bb1eea6b8da692ec483c7c6"><div class="ttname"><a href="../../df/dee/class_reputation_mgr.html#ada7a924a1bb1eea6b8da692ec483c7c6">ReputationMgr::SendForceReactions</a></div><div class="ttdeci">void SendForceReactions()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/ded/_reputation_mgr_8cpp_source.html#l00154">ReputationMgr.cpp:154</a></div></div>
<div class="ttc" id="aclass_unit_html_aa655b9b66c027ff7a6e2f1775cc2dfd8"><div class="ttname"><a href="../../da/db7/class_unit.html#aa655b9b66c027ff7a6e2f1775cc2dfd8">Unit::StopAttackFaction</a></div><div class="ttdeci">void StopAttackFaction(uint32 faction_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l19222">Unit.cpp:19222</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d9/ded/_reputation_mgr_8cpp_source.html#l00126">ReputationMgr::ApplyForceReaction()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l02067">Player::GetReputationMgr()</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l05666">Player::GetReputationRank()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00120">m_amount</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00156">REP_FRIENDLY</a>, <a class="el" href="../../d9/ded/_reputation_mgr_8cpp_source.html#l00154">ReputationMgr::SendForceReactions()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l19222">Unit::StopAttackFaction()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, and <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>.</p>

</div>
</div>
<a id="af470ebc0cd402437abab85c0203d0396"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af470ebc0cd402437abab85c0203d0396">&#9670;&nbsp;</a></span>HandleModAttackSpeed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModAttackSpeed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04585">4585</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160;{</div>
<div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04588"></a><span class="lineno"> 4588</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160; </div>
<div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160; </div>
<div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a60d7ad5197284d3caaed380dfc740ff0">ApplyAttackTimePercentMod</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a7df3efe1a18d2562a04ca1f91d03532e">UpdateDamagePhysical</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>);</div>
<div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16263">Unit::ApplyAttackTimePercentMod()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00555">BASE_ATTACK</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, and <a class="el" href="../../df/d07/_stat_system_8cpp_source.html#l00059">Unit::UpdateDamagePhysical()</a>.</p>

</div>
</div>
<a id="a6663b6902d2e2a6a46bf3e14a35871d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6663b6902d2e2a6a46bf3e14a35871d8">&#9670;&nbsp;</a></span>HandleModBaseResistance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModBaseResistance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03953">3953</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;{</div>
<div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160; </div>
<div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160; </div>
<div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;    <span class="comment">// only players have base stats</span></div>
<div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;    {</div>
<div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;        <span class="comment">//only pets have base stats</span></div>
<div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a4ad2fdcc45e2c3c85ad59ff49268b58c">IsPet</a>() &amp;&amp; (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; <a class="code" href="../../df/d0b/_shared_defines_8h.html#aff6913cfd69489c107a071be9ec2ec8fa12667dd3f55738c93e1ddb1351779b42">SPELL_SCHOOL_MASK_NORMAL</a>))</div>
<div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdea0d5ec0678c61e8de24b4e3d731bd4716">UNIT_MOD_ARMOR</a>, <a class="code" href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eea85637bc3b7127fbfc1d35d5e3ca4a95c">TOTAL_VALUE</a>, <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;    }</div>
<div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;    {</div>
<div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = <a class="code" href="../../df/d0b/_shared_defines_8h.html#a25263e3e283b54e5280d5af1fd16da4ca0599bcfa52d292c58e15ac0f081bb5af">SPELL_SCHOOL_NORMAL</a>; i &lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3d2e33bfddb1e3c28157eb6d136bfd28">MAX_SPELL_SCHOOL</a>; i++)</div>
<div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; i))</div>
<div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bde">UnitMods</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdea2ca084c2061b3ebd16a486bd8e64a0d2">UNIT_MOD_RESISTANCE_START</a> + i), <a class="code" href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eea85637bc3b7127fbfc1d35d5e3ca4a95c">TOTAL_VALUE</a>, <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;    }</div>
<div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l14345">Unit::HandleStatModifier()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01534">Unit::IsPet()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00264">MAX_SPELL_SCHOOL</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00269">SPELL_SCHOOL_MASK_NORMAL</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00255">SPELL_SCHOOL_NORMAL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00373">TOTAL_VALUE</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00434">UNIT_MOD_ARMOR</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00450">UNIT_MOD_RESISTANCE_START</a>.</p>

</div>
</div>
<a id="a9bc0fe3e6f5ce7ec0c62d3f2e25ebfb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bc0fe3e6f5ce7ec0c62d3f2e25ebfb9">&#9670;&nbsp;</a></span>HandleModCastingSpeed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModCastingSpeed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04543">4543</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;{</div>
<div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160; </div>
<div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160; </div>
<div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;    <span class="comment">// Xinef: Do not apply such auras in normal way</span></div>
<div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() &gt;= 1000)</div>
<div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;    {</div>
<div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a8120b00fa748ab79370b47b529052345">SetInstantCast</a>(<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160;    }</div>
<div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160; </div>
<div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#ab40be0231d6df4acb06fb3726b29aedc">ApplyCastTimePercentMod</a>((<span class="keywordtype">float</span>)<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;}</div>
<div class="ttc" id="aclass_unit_html_a8120b00fa748ab79370b47b529052345"><div class="ttname"><a href="../../da/db7/class_unit.html#a8120b00fa748ab79370b47b529052345">Unit::SetInstantCast</a></div><div class="ttdeci">void SetInstantCast(bool set)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l02505">Unit.h:2505</a></div></div>
<div class="ttc" id="aclass_unit_html_ab40be0231d6df4acb06fb3726b29aedc"><div class="ttname"><a href="../../da/db7/class_unit.html#ab40be0231d6df4acb06fb3726b29aedc">Unit::ApplyCastTimePercentMod</a></div><div class="ttdeci">void ApplyCastTimePercentMod(float val, bool apply)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l16279">Unit.cpp:16279</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16279">Unit::ApplyCastTimePercentMod()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l02505">Unit::SetInstantCast()</a>.</p>

</div>
</div>
<a id="ac3da622f21fc4e175e6948db55b60511"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3da622f21fc4e175e6948db55b60511">&#9670;&nbsp;</a></span>HandleModCharm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModCharm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03164">3164</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;{</div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160; </div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160; </div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* caster = <a class="code" href="../../da/df1/class_aura_effect.html#a29cf330277aeb89d17d18f6e112f035b">GetCaster</a>();</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160; </div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#ad02c1207bd4ccb5df03df1d4eec80293">SetCharmedBy</a>(caster, <a class="code" href="../../d5/d32/_unit_8h.html#ab341828eccd0b2de05fb7be084a9437aa1a1eeed651d163cde9401370f9684249">CHARM_TYPE_CHARM</a>, aurApp);</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa897a679d63c8d6272d4bc85395a708f">RemoveCharmedBy</a>(caster);</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;}</div>
<div class="ttc" id="a_unit_8h_html_ab341828eccd0b2de05fb7be084a9437aa1a1eeed651d163cde9401370f9684249"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab341828eccd0b2de05fb7be084a9437aa1a1eeed651d163cde9401370f9684249">CHARM_TYPE_CHARM</a></div><div class="ttdeci">@ CHARM_TYPE_CHARM</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01203">Unit.h:1203</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01203">CHARM_TYPE_CHARM</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00040">GetCaster()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l17671">Unit::RemoveCharmedBy()</a>, and <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l17487">Unit::SetCharmedBy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03089">HandleModPossess()</a>.</p>

</div>
</div>
<a id="a2578a0c8a91021e22ae67f2c0ff35331"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2578a0c8a91021e22ae67f2c0ff35331">&#9670;&nbsp;</a></span>HandleModCombatSpeedPct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModCombatSpeedPct </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04572">4572</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160;{</div>
<div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04575"></a><span class="lineno"> 4575</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04576"></a><span class="lineno"> 4576</span>&#160; </div>
<div class="line"><a name="l04577"></a><span class="lineno"> 4577</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04578"></a><span class="lineno"> 4578</span>&#160; </div>
<div class="line"><a name="l04579"></a><span class="lineno"> 4579</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#ab40be0231d6df4acb06fb3726b29aedc">ApplyCastTimePercentMod</a>(<span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04580"></a><span class="lineno"> 4580</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a60d7ad5197284d3caaed380dfc740ff0">ApplyAttackTimePercentMod</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04581"></a><span class="lineno"> 4581</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a60d7ad5197284d3caaed380dfc740ff0">ApplyAttackTimePercentMod</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa052681ec165e5b5e3edcf2089607ae67">OFF_ATTACK</a>, <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a60d7ad5197284d3caaed380dfc740ff0">ApplyAttackTimePercentMod</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aaa2557af152c5f2b27bbf59915cbd1670">RANGED_ATTACK</a>, <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16263">Unit::ApplyAttackTimePercentMod()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16279">Unit::ApplyCastTimePercentMod()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00555">BASE_ATTACK</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00556">OFF_ATTACK</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00557">RANGED_ATTACK</a>.</p>

</div>
</div>
<a id="aa5aba9aa102d0402b423ce57a616bb0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5aba9aa102d0402b423ce57a616bb0c">&#9670;&nbsp;</a></span>HandleModConfuse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModConfuse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03031">3031</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;{</div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160; </div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160; </div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a2903449b4183e13866c6e98d77578887">SetControlled</a>(<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>, <a class="code" href="../../d5/d32/_unit_8h.html#ae51d2ecb71f7a5cb3882982a622c9544a3d7431ccd5efc9f24766e69bf19845c0">UNIT_STATE_CONFUSED</a>);</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;}</div>
<div class="ttc" id="a_unit_8h_html_ae51d2ecb71f7a5cb3882982a622c9544a3d7431ccd5efc9f24766e69bf19845c0"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ae51d2ecb71f7a5cb3882982a622c9544a3d7431ccd5efc9f24766e69bf19845c0">UNIT_STATE_CONFUSED</a></div><div class="ttdeci">@ UNIT_STATE_CONFUSED</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00495">Unit.h:495</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l17189">Unit::SetControlled()</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00495">UNIT_STATE_CONFUSED</a>.</p>

</div>
</div>
<a id="a3ee0e71dbbb4e685b4e8db327e3b639b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ee0e71dbbb4e685b4e8db327e3b639b">&#9670;&nbsp;</a></span>HandleModDamageDone()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModDamageDone </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04748">4748</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04749"></a><span class="lineno"> 4749</span>&#160;{</div>
<div class="line"><a name="l04750"></a><span class="lineno"> 4750</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04751"></a><span class="lineno"> 4751</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04752"></a><span class="lineno"> 4752</span>&#160; </div>
<div class="line"><a name="l04753"></a><span class="lineno"> 4753</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04754"></a><span class="lineno"> 4754</span>&#160; </div>
<div class="line"><a name="l04755"></a><span class="lineno"> 4755</span>&#160;    <span class="comment">// apply item specific bonuses for already equipped weapon</span></div>
<div class="line"><a name="l04756"></a><span class="lineno"> 4756</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l04757"></a><span class="lineno"> 4757</span>&#160;    {</div>
<div class="line"><a name="l04758"></a><span class="lineno"> 4758</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa0f966a2f1219b75a945c686c3cad21e4">MAX_ATTACK</a>; ++i)</div>
<div class="line"><a name="l04759"></a><span class="lineno"> 4759</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../dc/d32/class_item.html">Item</a>* pItem = target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#ac8e55e9ca3aec15337a7a952aa8efac8">GetWeaponForAttack</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876a">WeaponAttackType</a>(i), <span class="keyword">true</span>))</div>
<div class="line"><a name="l04760"></a><span class="lineno"> 4760</span>&#160;                target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a6712cd5410dae42bef9ffe46b05190bf">_ApplyWeaponDependentAuraDamageMod</a>(pItem, <a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876a">WeaponAttackType</a>(i), <span class="keyword">this</span>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04761"></a><span class="lineno"> 4761</span>&#160;    }</div>
<div class="line"><a name="l04762"></a><span class="lineno"> 4762</span>&#160; </div>
<div class="line"><a name="l04763"></a><span class="lineno"> 4763</span>&#160;    <span class="comment">// GetMiscValue() is bitmask of spell schools</span></div>
<div class="line"><a name="l04764"></a><span class="lineno"> 4764</span>&#160;    <span class="comment">// 1 (0-bit) - normal school damage (SPELL_SCHOOL_MASK_NORMAL)</span></div>
<div class="line"><a name="l04765"></a><span class="lineno"> 4765</span>&#160;    <span class="comment">// 126 - full bitmask all magic damages (SPELL_SCHOOL_MASK_MAGIC) including wands</span></div>
<div class="line"><a name="l04766"></a><span class="lineno"> 4766</span>&#160;    <span class="comment">// 127 - full bitmask any damages</span></div>
<div class="line"><a name="l04767"></a><span class="lineno"> 4767</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l04768"></a><span class="lineno"> 4768</span>&#160;    <span class="comment">// mods must be applied base at equipped weapon class and subclass comparison</span></div>
<div class="line"><a name="l04769"></a><span class="lineno"> 4769</span>&#160;    <span class="comment">// with spell-&gt;EquippedItemClass and  EquippedItemSubClassMask and EquippedItemInventoryTypeMask</span></div>
<div class="line"><a name="l04770"></a><span class="lineno"> 4770</span>&#160;    <span class="comment">// GetMiscValue() comparison with item generated damage types</span></div>
<div class="line"><a name="l04771"></a><span class="lineno"> 4771</span>&#160; </div>
<div class="line"><a name="l04772"></a><span class="lineno"> 4772</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; <a class="code" href="../../df/d0b/_shared_defines_8h.html#aff6913cfd69489c107a071be9ec2ec8fa12667dd3f55738c93e1ddb1351779b42">SPELL_SCHOOL_MASK_NORMAL</a>) != 0 &amp;&amp; <a class="code" href="../../d0/d7d/_script_mgr_8h.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a>-&gt;CanModAuraEffectDamageDone(<span class="keyword">this</span>, target, aurApp, mode, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>))</div>
<div class="line"><a name="l04773"></a><span class="lineno"> 4773</span>&#160;    {</div>
<div class="line"><a name="l04774"></a><span class="lineno"> 4774</span>&#160;        <span class="comment">// apply generic physical damage bonuses including wand case</span></div>
<div class="line"><a name="l04775"></a><span class="lineno"> 4775</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;EquippedItemClass == -1 || target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l04776"></a><span class="lineno"> 4776</span>&#160;        {</div>
<div class="line"><a name="l04777"></a><span class="lineno"> 4777</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdeaccdf98ed89e64b2482699a13bc1fd28c">UNIT_MOD_DAMAGE_MAINHAND</a>, <a class="code" href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eea85637bc3b7127fbfc1d35d5e3ca4a95c">TOTAL_VALUE</a>, <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04778"></a><span class="lineno"> 4778</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdea036e8ca8fe78e5addf8e68a79732b742">UNIT_MOD_DAMAGE_OFFHAND</a>, <a class="code" href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eea85637bc3b7127fbfc1d35d5e3ca4a95c">TOTAL_VALUE</a>, <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04779"></a><span class="lineno"> 4779</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdea49e9d4df8d30a4fa19a5d422dbb2fb41">UNIT_MOD_DAMAGE_RANGED</a>, <a class="code" href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eea85637bc3b7127fbfc1d35d5e3ca4a95c">TOTAL_VALUE</a>, <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04780"></a><span class="lineno"> 4780</span>&#160; </div>
<div class="line"><a name="l04781"></a><span class="lineno"> 4781</span>&#160;            <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l04782"></a><span class="lineno"> 4782</span>&#160;            {</div>
<div class="line"><a name="l04783"></a><span class="lineno"> 4783</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() &gt; 0)</div>
<div class="line"><a name="l04784"></a><span class="lineno"> 4784</span>&#160;                    target-&gt;<a class="code" href="../../d8/d83/class_object.html#a494b539a938499639eab3f8d9a0c3364">ApplyModInt32Value</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a051300eea16c88b14b85e24e8002188d">PLAYER_FIELD_MOD_DAMAGE_DONE_POS</a>, <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04785"></a><span class="lineno"> 4785</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l04786"></a><span class="lineno"> 4786</span>&#160;                    target-&gt;<a class="code" href="../../d8/d83/class_object.html#a494b539a938499639eab3f8d9a0c3364">ApplyModInt32Value</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881ae6173f0310815b32f65cbd7983309c6a">PLAYER_FIELD_MOD_DAMAGE_DONE_NEG</a>, <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04787"></a><span class="lineno"> 4787</span>&#160;            }</div>
<div class="line"><a name="l04788"></a><span class="lineno"> 4788</span>&#160;        }</div>
<div class="line"><a name="l04789"></a><span class="lineno"> 4789</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l04790"></a><span class="lineno"> 4790</span>&#160;        {</div>
<div class="line"><a name="l04791"></a><span class="lineno"> 4791</span>&#160;            <span class="comment">// done in Player::_ApplyWeaponDependentAuraMods</span></div>
<div class="line"><a name="l04792"></a><span class="lineno"> 4792</span>&#160;        }</div>
<div class="line"><a name="l04793"></a><span class="lineno"> 4793</span>&#160;    }</div>
<div class="line"><a name="l04794"></a><span class="lineno"> 4794</span>&#160; </div>
<div class="line"><a name="l04795"></a><span class="lineno"> 4795</span>&#160;    <span class="comment">// Skip non magic case for Speedup</span></div>
<div class="line"><a name="l04796"></a><span class="lineno"> 4796</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; <a class="code" href="../../df/d0b/_shared_defines_8h.html#aff6913cfd69489c107a071be9ec2ec8fa53b7883ddb2ff484fe7e089afe2c85dc">SPELL_SCHOOL_MASK_MAGIC</a>) == 0)</div>
<div class="line"><a name="l04797"></a><span class="lineno"> 4797</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04798"></a><span class="lineno"> 4798</span>&#160; </div>
<div class="line"><a name="l04799"></a><span class="lineno"> 4799</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;EquippedItemClass != -1 || <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;EquippedItemInventoryTypeMask != 0)</div>
<div class="line"><a name="l04800"></a><span class="lineno"> 4800</span>&#160;    {</div>
<div class="line"><a name="l04801"></a><span class="lineno"> 4801</span>&#160;        <span class="comment">// wand magic case (skip generic to all item spell bonuses)</span></div>
<div class="line"><a name="l04802"></a><span class="lineno"> 4802</span>&#160;        <span class="comment">// done in Player::_ApplyWeaponDependentAuraMods</span></div>
<div class="line"><a name="l04803"></a><span class="lineno"> 4803</span>&#160; </div>
<div class="line"><a name="l04804"></a><span class="lineno"> 4804</span>&#160;        <span class="comment">// Skip item specific requirements for not wand magic damage</span></div>
<div class="line"><a name="l04805"></a><span class="lineno"> 4805</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04806"></a><span class="lineno"> 4806</span>&#160;    }</div>
<div class="line"><a name="l04807"></a><span class="lineno"> 4807</span>&#160; </div>
<div class="line"><a name="l04808"></a><span class="lineno"> 4808</span>&#160;    <span class="comment">// Magic damage modifiers implemented in Unit::SpellDamageBonus</span></div>
<div class="line"><a name="l04809"></a><span class="lineno"> 4809</span>&#160;    <span class="comment">// This information for client side use only</span></div>
<div class="line"><a name="l04810"></a><span class="lineno"> 4810</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l04811"></a><span class="lineno"> 4811</span>&#160;    {</div>
<div class="line"><a name="l04812"></a><span class="lineno"> 4812</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() &gt; 0)</div>
<div class="line"><a name="l04813"></a><span class="lineno"> 4813</span>&#160;        {</div>
<div class="line"><a name="l04814"></a><span class="lineno"> 4814</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> i = <a class="code" href="../../df/d0b/_shared_defines_8h.html#a25263e3e283b54e5280d5af1fd16da4cad4192a372d6a664e2a3c50e186b2ed62">SPELL_SCHOOL_HOLY</a>; i &lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3d2e33bfddb1e3c28157eb6d136bfd28">MAX_SPELL_SCHOOL</a>; i++)</div>
<div class="line"><a name="l04815"></a><span class="lineno"> 4815</span>&#160;            {</div>
<div class="line"><a name="l04816"></a><span class="lineno"> 4816</span>&#160;                <span class="keywordflow">if</span> ((<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; i)) != 0)</div>
<div class="line"><a name="l04817"></a><span class="lineno"> 4817</span>&#160;                    target-&gt;<a class="code" href="../../d8/d83/class_object.html#a494b539a938499639eab3f8d9a0c3364">ApplyModInt32Value</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a051300eea16c88b14b85e24e8002188d">PLAYER_FIELD_MOD_DAMAGE_DONE_POS</a> + i, <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04818"></a><span class="lineno"> 4818</span>&#160;            }</div>
<div class="line"><a name="l04819"></a><span class="lineno"> 4819</span>&#160;        }</div>
<div class="line"><a name="l04820"></a><span class="lineno"> 4820</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l04821"></a><span class="lineno"> 4821</span>&#160;        {</div>
<div class="line"><a name="l04822"></a><span class="lineno"> 4822</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> i = <a class="code" href="../../df/d0b/_shared_defines_8h.html#a25263e3e283b54e5280d5af1fd16da4cad4192a372d6a664e2a3c50e186b2ed62">SPELL_SCHOOL_HOLY</a>; i &lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3d2e33bfddb1e3c28157eb6d136bfd28">MAX_SPELL_SCHOOL</a>; i++)</div>
<div class="line"><a name="l04823"></a><span class="lineno"> 4823</span>&#160;            {</div>
<div class="line"><a name="l04824"></a><span class="lineno"> 4824</span>&#160;                <span class="keywordflow">if</span> ((<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; i)) != 0)</div>
<div class="line"><a name="l04825"></a><span class="lineno"> 4825</span>&#160;                    target-&gt;<a class="code" href="../../d8/d83/class_object.html#a494b539a938499639eab3f8d9a0c3364">ApplyModInt32Value</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881ae6173f0310815b32f65cbd7983309c6a">PLAYER_FIELD_MOD_DAMAGE_DONE_NEG</a> + i, <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04826"></a><span class="lineno"> 4826</span>&#160;            }</div>
<div class="line"><a name="l04827"></a><span class="lineno"> 4827</span>&#160;        }</div>
<div class="line"><a name="l04828"></a><span class="lineno"> 4828</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dc/dd7/class_guardian.html">Guardian</a>* pet = target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../da/db7/class_unit.html#ae78759acca81e2a89a82f79a4ef6e70c">GetGuardianPet</a>())</div>
<div class="line"><a name="l04829"></a><span class="lineno"> 4829</span>&#160;            pet-&gt;UpdateAttackPowerAndDamage();</div>
<div class="line"><a name="l04830"></a><span class="lineno"> 4830</span>&#160;    }</div>
<div class="line"><a name="l04831"></a><span class="lineno"> 4831</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_a25263e3e283b54e5280d5af1fd16da4cad4192a372d6a664e2a3c50e186b2ed62"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a25263e3e283b54e5280d5af1fd16da4cad4192a372d6a664e2a3c50e186b2ed62">SPELL_SCHOOL_HOLY</a></div><div class="ttdeci">@ SPELL_SCHOOL_HOLY</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00256">SharedDefines.h:256</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_aff6913cfd69489c107a071be9ec2ec8fa53b7883ddb2ff484fe7e089afe2c85dc"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#aff6913cfd69489c107a071be9ec2ec8fa53b7883ddb2ff484fe7e089afe2c85dc">SPELL_SCHOOL_MASK_MAGIC</a></div><div class="ttdeci">@ SPELL_SCHOOL_MASK_MAGIC</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00284">SharedDefines.h:284</a></div></div>
<div class="ttc" id="a_unit_8h_html_a4c5336cd4be5f0162bd4874b0a1e5bdea036e8ca8fe78e5addf8e68a79732b742"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdea036e8ca8fe78e5addf8e68a79732b742">UNIT_MOD_DAMAGE_OFFHAND</a></div><div class="ttdeci">@ UNIT_MOD_DAMAGE_OFFHAND</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00444">Unit.h:444</a></div></div>
<div class="ttc" id="a_unit_8h_html_a4c5336cd4be5f0162bd4874b0a1e5bdea49e9d4df8d30a4fa19a5d422dbb2fb41"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdea49e9d4df8d30a4fa19a5d422dbb2fb41">UNIT_MOD_DAMAGE_RANGED</a></div><div class="ttdeci">@ UNIT_MOD_DAMAGE_RANGED</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00445">Unit.h:445</a></div></div>
<div class="ttc" id="a_unit_8h_html_a4c5336cd4be5f0162bd4874b0a1e5bdeaccdf98ed89e64b2482699a13bc1fd28c"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdeaccdf98ed89e64b2482699a13bc1fd28c">UNIT_MOD_DAMAGE_MAINHAND</a></div><div class="ttdeci">@ UNIT_MOD_DAMAGE_MAINHAND</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00443">Unit.h:443</a></div></div>
<div class="ttc" id="a_update_fields_8h_html_a0e42dc606678c9df7884e1aad621e881a051300eea16c88b14b85e24e8002188d"><div class="ttname"><a href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a051300eea16c88b14b85e24e8002188d">PLAYER_FIELD_MOD_DAMAGE_DONE_POS</a></div><div class="ttdeci">@ PLAYER_FIELD_MOD_DAMAGE_DONE_POS</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d65/_update_fields_8h_source.html#l00360">UpdateFields.h:360</a></div></div>
<div class="ttc" id="a_update_fields_8h_html_a0e42dc606678c9df7884e1aad621e881ae6173f0310815b32f65cbd7983309c6a"><div class="ttname"><a href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881ae6173f0310815b32f65cbd7983309c6a">PLAYER_FIELD_MOD_DAMAGE_DONE_NEG</a></div><div class="ttdeci">@ PLAYER_FIELD_MOD_DAMAGE_DONE_NEG</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d65/_update_fields_8h_source.html#l00361">UpdateFields.h:361</a></div></div>
<div class="ttc" id="aclass_guardian_html"><div class="ttname"><a href="../../dc/dd7/class_guardian.html">Guardian</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/_temporary_summon_8h_source.html#l00085">TemporarySummon.h:86</a></div></div>
<div class="ttc" id="aclass_object_html_a494b539a938499639eab3f8d9a0c3364"><div class="ttname"><a href="../../d8/d83/class_object.html#a494b539a938499639eab3f8d9a0c3364">Object::ApplyModInt32Value</a></div><div class="ttdeci">void ApplyModInt32Value(uint16 index, int32 val, bool apply)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/ded/_object_8cpp_source.html#l00806">Object.cpp:806</a></div></div>
<div class="ttc" id="aclass_player_html_a6712cd5410dae42bef9ffe46b05190bf"><div class="ttname"><a href="../../d8/d53/class_player.html#a6712cd5410dae42bef9ffe46b05190bf">Player::_ApplyWeaponDependentAuraDamageMod</a></div><div class="ttdeci">void _ApplyWeaponDependentAuraDamageMod(Item *item, WeaponAttackType attackType, AuraEffect const *aura, bool apply)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/_player_8cpp_source.html#l06813">Player.cpp:6813</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d82/_player_8cpp_source.html#l06813">Player::_ApplyWeaponDependentAuraDamageMod()</a>, <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00806">Object::ApplyModInt32Value()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l10045">Unit::GetGuardianPet()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d4/d16/_player_storage_8cpp_source.html#l00516">Player::GetWeaponForAttack()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l14345">Unit::HandleStatModifier()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00558">MAX_ATTACK</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00264">MAX_SPELL_SCHOOL</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00361">PLAYER_FIELD_MOD_DAMAGE_DONE_NEG</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00360">PLAYER_FIELD_MOD_DAMAGE_DONE_POS</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00256">SPELL_SCHOOL_HOLY</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00284">SPELL_SCHOOL_MASK_MAGIC</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00269">SPELL_SCHOOL_MASK_NORMAL</a>, <a class="el" href="../../d0/d7d/_script_mgr_8h_source.html#l02048">sScriptMgr</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00373">TOTAL_VALUE</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00443">UNIT_MOD_DAMAGE_MAINHAND</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00444">UNIT_MOD_DAMAGE_OFFHAND</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00445">UNIT_MOD_DAMAGE_RANGED</a>.</p>

</div>
</div>
<a id="a1681732afa7c5a767eb0ba2264f4958c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1681732afa7c5a767eb0ba2264f4958c">&#9670;&nbsp;</a></span>HandleModDamagePercentDone()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModDamagePercentDone </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04833">4833</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04834"></a><span class="lineno"> 4834</span>&#160;{</div>
<div class="line"><a name="l04835"></a><span class="lineno"> 4835</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04836"></a><span class="lineno"> 4836</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04837"></a><span class="lineno"> 4837</span>&#160; </div>
<div class="line"><a name="l04838"></a><span class="lineno"> 4838</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04839"></a><span class="lineno"> 4839</span>&#160;    <span class="keywordflow">if</span> (!target)</div>
<div class="line"><a name="l04840"></a><span class="lineno"> 4840</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04841"></a><span class="lineno"> 4841</span>&#160; </div>
<div class="line"><a name="l04842"></a><span class="lineno"> 4842</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d7d/_script_mgr_8h.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a>-&gt;CanModAuraEffectModDamagePercentDone(<span class="keyword">this</span>, target, aurApp, mode, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>))</div>
<div class="line"><a name="l04843"></a><span class="lineno"> 4843</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04844"></a><span class="lineno"> 4844</span>&#160; </div>
<div class="line"><a name="l04845"></a><span class="lineno"> 4845</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l04846"></a><span class="lineno"> 4846</span>&#160;    {</div>
<div class="line"><a name="l04847"></a><span class="lineno"> 4847</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa0f966a2f1219b75a945c686c3cad21e4">MAX_ATTACK</a>; ++i)</div>
<div class="line"><a name="l04848"></a><span class="lineno"> 4848</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../dc/d32/class_item.html">Item</a>* item = target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#ac8e55e9ca3aec15337a7a952aa8efac8">GetWeaponForAttack</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876a">WeaponAttackType</a>(i), <span class="keyword">false</span>))</div>
<div class="line"><a name="l04849"></a><span class="lineno"> 4849</span>&#160;                target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a6712cd5410dae42bef9ffe46b05190bf">_ApplyWeaponDependentAuraDamageMod</a>(item, <a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876a">WeaponAttackType</a>(i), <span class="keyword">this</span>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04850"></a><span class="lineno"> 4850</span>&#160;    }</div>
<div class="line"><a name="l04851"></a><span class="lineno"> 4851</span>&#160; </div>
<div class="line"><a name="l04852"></a><span class="lineno"> 4852</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; <a class="code" href="../../df/d0b/_shared_defines_8h.html#aff6913cfd69489c107a071be9ec2ec8fa12667dd3f55738c93e1ddb1351779b42">SPELL_SCHOOL_MASK_NORMAL</a>) &amp;&amp; (<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;EquippedItemClass == -1 || target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>))</div>
<div class="line"><a name="l04853"></a><span class="lineno"> 4853</span>&#160;    {</div>
<div class="line"><a name="l04854"></a><span class="lineno"> 4854</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdeaccdf98ed89e64b2482699a13bc1fd28c">UNIT_MOD_DAMAGE_MAINHAND</a>, <a class="code" href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeab3ddc12b0760eec54f45b90b8671af4d">TOTAL_PCT</a>, <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04855"></a><span class="lineno"> 4855</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdea036e8ca8fe78e5addf8e68a79732b742">UNIT_MOD_DAMAGE_OFFHAND</a>,  <a class="code" href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeab3ddc12b0760eec54f45b90b8671af4d">TOTAL_PCT</a>, <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04856"></a><span class="lineno"> 4856</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdea49e9d4df8d30a4fa19a5d422dbb2fb41">UNIT_MOD_DAMAGE_RANGED</a>,   <a class="code" href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeab3ddc12b0760eec54f45b90b8671af4d">TOTAL_PCT</a>, <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04857"></a><span class="lineno"> 4857</span>&#160; </div>
<div class="line"><a name="l04858"></a><span class="lineno"> 4858</span>&#160;        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l04859"></a><span class="lineno"> 4859</span>&#160;            target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d83/class_object.html#aeff5b9b739f39137cb0c5d83a1a50457">ApplyPercentModFloatValue</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881ada19763bd0e6188ecf508c748d74e8f3">PLAYER_FIELD_MOD_DAMAGE_DONE_PCT</a>, <span class="keywordtype">float</span> (<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04860"></a><span class="lineno"> 4860</span>&#160;    }</div>
<div class="line"><a name="l04861"></a><span class="lineno"> 4861</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l04862"></a><span class="lineno"> 4862</span>&#160;    {</div>
<div class="line"><a name="l04863"></a><span class="lineno"> 4863</span>&#160;        <span class="comment">// done in Player::_ApplyWeaponDependentAuraMods for SPELL_SCHOOL_MASK_NORMAL &amp;&amp; EquippedItemClass != -1 and also for wand case</span></div>
<div class="line"><a name="l04864"></a><span class="lineno"> 4864</span>&#160;    }</div>
<div class="line"><a name="l04865"></a><span class="lineno"> 4865</span>&#160;}</div>
<div class="ttc" id="a_update_fields_8h_html_a0e42dc606678c9df7884e1aad621e881ada19763bd0e6188ecf508c748d74e8f3"><div class="ttname"><a href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881ada19763bd0e6188ecf508c748d74e8f3">PLAYER_FIELD_MOD_DAMAGE_DONE_PCT</a></div><div class="ttdeci">@ PLAYER_FIELD_MOD_DAMAGE_DONE_PCT</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d65/_update_fields_8h_source.html#l00362">UpdateFields.h:362</a></div></div>
<div class="ttc" id="aclass_object_html_aeff5b9b739f39137cb0c5d83a1a50457"><div class="ttname"><a href="../../d8/d83/class_object.html#aeff5b9b739f39137cb0c5d83a1a50457">Object::ApplyPercentModFloatValue</a></div><div class="ttdeci">void ApplyPercentModFloatValue(uint16 index, float val, bool apply)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/ded/_object_8cpp_source.html#l00820">Object.cpp:820</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d82/_player_8cpp_source.html#l06813">Player::_ApplyWeaponDependentAuraDamageMod()</a>, <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00820">Object::ApplyPercentModFloatValue()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d4/d16/_player_storage_8cpp_source.html#l00516">Player::GetWeaponForAttack()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l14345">Unit::HandleStatModifier()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00558">MAX_ATTACK</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00362">PLAYER_FIELD_MOD_DAMAGE_DONE_PCT</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00269">SPELL_SCHOOL_MASK_NORMAL</a>, <a class="el" href="../../d0/d7d/_script_mgr_8h_source.html#l02048">sScriptMgr</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00374">TOTAL_PCT</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00443">UNIT_MOD_DAMAGE_MAINHAND</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00444">UNIT_MOD_DAMAGE_OFFHAND</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00445">UNIT_MOD_DAMAGE_RANGED</a>.</p>

</div>
</div>
<a id="a26498e695742b5689c35f806af38ae8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26498e695742b5689c35f806af38ae8a">&#9670;&nbsp;</a></span>HandleModFear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModFear </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03041">3041</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;{</div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160; </div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160; </div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a2903449b4183e13866c6e98d77578887">SetControlled</a>(<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>, <a class="code" href="../../d5/d32/_unit_8h.html#ae51d2ecb71f7a5cb3882982a622c9544ab254220382db03ed44e6cea86ad4c87d">UNIT_STATE_FLEEING</a>);</div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;}</div>
<div class="ttc" id="a_unit_8h_html_ae51d2ecb71f7a5cb3882982a622c9544ab254220382db03ed44e6cea86ad4c87d"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ae51d2ecb71f7a5cb3882982a622c9544ab254220382db03ed44e6cea86ad4c87d">UNIT_STATE_FLEEING</a></div><div class="ttdeci">@ UNIT_STATE_FLEEING</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00491">Unit.h:491</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l17189">Unit::SetControlled()</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00491">UNIT_STATE_FLEEING</a>.</p>

</div>
</div>
<a id="a09dda5a0af27ab34292b312fd20203bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09dda5a0af27ab34292b312fd20203bb">&#9670;&nbsp;</a></span>HandleModHealingDone()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModHealingDone </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04107">4107</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;{</div>
<div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160; </div>
<div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160; </div>
<div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;    <span class="comment">// implemented in Unit::SpellHealingBonus</span></div>
<div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;    <span class="comment">// this information is for client side only</span></div>
<div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;    target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a9c9c56019156a846d7437279bfcc31bf">UpdateSpellDamageAndHealingBonus</a>();</div>
<div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;}</div>
<div class="ttc" id="aclass_player_html_a9c9c56019156a846d7437279bfcc31bf"><div class="ttname"><a href="../../d8/d53/class_player.html#a9c9c56019156a846d7437279bfcc31bf">Player::UpdateSpellDamageAndHealingBonus</a></div><div class="ttdeci">void UpdateSpellDamageAndHealingBonus()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d07/_stat_system_8cpp_source.html#l00170">StatSystem.cpp:170</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../df/d07/_stat_system_8cpp_source.html#l00170">Player::UpdateSpellDamageAndHealingBonus()</a>.</p>

</div>
</div>
<a id="afa9f84f40fa41ddee3d6fb22c8bd3ac4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa9f84f40fa41ddee3d6fb22c8bd3ac4">&#9670;&nbsp;</a></span>HandleModHitChance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModHitChance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04458">4458</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;{</div>
<div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160; </div>
<div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160; </div>
<div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;    {</div>
<div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#aa0562ee67ebc6ef7730bba008f8e61f3">UpdateMeleeHitChances</a>();</div>
<div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#ab17aa17e78fda3217af0d7281e92b98b">UpdateRangedHitChances</a>();</div>
<div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;    }</div>
<div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;    {</div>
<div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa34f5a7c9aafd7aef3e34588a9b3601f">m_modMeleeHitChance</a> += (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>) ? <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() : (-<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5f745ec33a32bdf6c0934418c126101a">m_modRangedHitChance</a> += (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>) ? <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() : (-<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;    }</div>
<div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;}</div>
<div class="ttc" id="aclass_player_html_aa0562ee67ebc6ef7730bba008f8e61f3"><div class="ttname"><a href="../../d8/d53/class_player.html#aa0562ee67ebc6ef7730bba008f8e61f3">Player::UpdateMeleeHitChances</a></div><div class="ttdeci">void UpdateMeleeHitChances()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d07/_stat_system_8cpp_source.html#l00816">StatSystem.cpp:816</a></div></div>
<div class="ttc" id="aclass_player_html_ab17aa17e78fda3217af0d7281e92b98b"><div class="ttname"><a href="../../d8/d53/class_player.html#ab17aa17e78fda3217af0d7281e92b98b">Player::UpdateRangedHitChances</a></div><div class="ttdeci">void UpdateRangedHitChances()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d07/_stat_system_8cpp_source.html#l00822">StatSystem.cpp:822</a></div></div>
<div class="ttc" id="aclass_unit_html_a5f745ec33a32bdf6c0934418c126101a"><div class="ttname"><a href="../../da/db7/class_unit.html#a5f745ec33a32bdf6c0934418c126101a">Unit::m_modRangedHitChance</a></div><div class="ttdeci">float m_modRangedHitChance</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l02173">Unit.h:2173</a></div></div>
<div class="ttc" id="aclass_unit_html_aa34f5a7c9aafd7aef3e34588a9b3601f"><div class="ttname"><a href="../../da/db7/class_unit.html#aa34f5a7c9aafd7aef3e34588a9b3601f">Unit::m_modMeleeHitChance</a></div><div class="ttdeci">float m_modMeleeHitChance</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l02172">Unit.h:2172</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02172">Unit::m_modMeleeHitChance</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02173">Unit::m_modRangedHitChance</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, <a class="el" href="../../df/d07/_stat_system_8cpp_source.html#l00816">Player::UpdateMeleeHitChances()</a>, and <a class="el" href="../../df/d07/_stat_system_8cpp_source.html#l00822">Player::UpdateRangedHitChances()</a>.</p>

</div>
</div>
<a id="aff76927ae90362081a6ca6c8c77004f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff76927ae90362081a6ca6c8c77004f6">&#9670;&nbsp;</a></span>HandleModInvisibility()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModInvisibility </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01515">1515</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;{</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a45b308d91feffe9ebae9560b649b193b">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160; </div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    <a class="code" href="../../df/d0b/_shared_defines_8h.html#a5f791d790b588bcbafa8a2f34be5c4a0">InvisibilityType</a> <a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a> = <a class="code" href="../../df/d0b/_shared_defines_8h.html#a5f791d790b588bcbafa8a2f34be5c4a0">InvisibilityType</a>(<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160; </div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    {</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;        <span class="comment">// apply glow vision</span></div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a> &amp;&amp; <a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a> == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a5f791d790b588bcbafa8a2f34be5c4a0aecf03cb7f42dc44356b530f9b9dc2c9a">INVISIBILITY_GENERAL</a>)</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;            target-&gt;<a class="code" href="../../d8/d83/class_object.html#afe65b1ab32dbcd51890b754fb8b5e1b0">SetByteFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a6094e668574a870242f146ac00369951">PLAYER_FIELD_BYTES2</a>, <a class="code" href="../../d1/d39/_player_8h.html#ae0c57a2bb851b9d5a88e5d5fef69f939a9ad97828a3dd598a45dcbbcd3969879b">PLAYER_FIELD_BYTES_2_OFFSET_AURA_VISION</a>, <a class="code" href="../../d1/d39/_player_8h.html#a29b0496d910c02e5cc98d349c4427474a512b317a67d45505043fcae61dcca393">PLAYER_FIELD_BYTE2_INVISIBILITY_GLOW</a>);</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160; </div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;        target-&gt;<a class="code" href="../../db/df7/class_world_object.html#a41d85385408958edcecb5883dd89c3d9">m_invisibility</a>.<a class="code" href="../../d0/dbe/class_flagged_values_array32.html#a273ab3607b23881628eb0c5d6a4da288">AddFlag</a>(<a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>);</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;        target-&gt;<a class="code" href="../../db/df7/class_world_object.html#a41d85385408958edcecb5883dd89c3d9">m_invisibility</a>.<a class="code" href="../../d0/dbe/class_flagged_values_array32.html#aacca1261b2a22525e5fd40e5f479aa06">AddValue</a>(<a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>, <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    }</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    {</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;        <span class="keywordflow">if</span> (!target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a600ad2316202aec206facbfa746a136b">SPELL_AURA_MOD_INVISIBILITY</a>))</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;        {</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;            <span class="comment">// if not have different invisibility auras.</span></div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;            <span class="comment">// always remove glow vision</span></div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;            <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;                target-&gt;<a class="code" href="../../d8/d83/class_object.html#acef75a7f84673fda790861bd1b0b68b7">RemoveByteFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a6094e668574a870242f146ac00369951">PLAYER_FIELD_BYTES2</a>, 3, <a class="code" href="../../d1/d39/_player_8h.html#a29b0496d910c02e5cc98d349c4427474a512b317a67d45505043fcae61dcca393">PLAYER_FIELD_BYTE2_INVISIBILITY_GLOW</a>);</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160; </div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;            target-&gt;<a class="code" href="../../db/df7/class_world_object.html#a41d85385408958edcecb5883dd89c3d9">m_invisibility</a>.<a class="code" href="../../d0/dbe/class_flagged_values_array32.html#a3a674b2a7b8d5874f7210372b3e92123">DelFlag</a>(<a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>);</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;        }</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;        {</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;            <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;            <a class="code" href="../../da/db7/class_unit.html#adcdd87d0c137619dfc869536c1315dd7">Unit::AuraEffectList</a> <span class="keyword">const</span>&amp; invisAuras = target-&gt;<a class="code" href="../../da/db7/class_unit.html#af00ac6c4dc7e639ac646fdafef336e85">GetAuraEffectsByType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a600ad2316202aec206facbfa746a136b">SPELL_AURA_MOD_INVISIBILITY</a>);</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;            <span class="keywordflow">for</span> (Unit::AuraEffectList::const_iterator i = invisAuras.begin(); i != invisAuras.end(); ++i)</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;            {</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == (*i)-&gt;GetMiscValue())</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;                {</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;                    found = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;                }</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;            }</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;            <span class="keywordflow">if</span> (!found)</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;            {</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;                <span class="comment">// if not have invisibility auras of type INVISIBILITY_GENERAL</span></div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;                <span class="comment">// remove glow vision</span></div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;                <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a> &amp;&amp; <a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a> == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a5f791d790b588bcbafa8a2f34be5c4a0aecf03cb7f42dc44356b530f9b9dc2c9a">INVISIBILITY_GENERAL</a>)</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;                {</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;                    target-&gt;<a class="code" href="../../d8/d83/class_object.html#acef75a7f84673fda790861bd1b0b68b7">RemoveByteFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a6094e668574a870242f146ac00369951">PLAYER_FIELD_BYTES2</a>, <a class="code" href="../../d1/d39/_player_8h.html#ae0c57a2bb851b9d5a88e5d5fef69f939a9ad97828a3dd598a45dcbbcd3969879b">PLAYER_FIELD_BYTES_2_OFFSET_AURA_VISION</a>, <a class="code" href="../../d1/d39/_player_8h.html#a29b0496d910c02e5cc98d349c4427474a512b317a67d45505043fcae61dcca393">PLAYER_FIELD_BYTE2_INVISIBILITY_GLOW</a>);</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;                }</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160; </div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;                target-&gt;<a class="code" href="../../db/df7/class_world_object.html#a41d85385408958edcecb5883dd89c3d9">m_invisibility</a>.<a class="code" href="../../d0/dbe/class_flagged_values_array32.html#a3a674b2a7b8d5874f7210372b3e92123">DelFlag</a>(<a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>);</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;            }</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;        }</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160; </div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;        target-&gt;<a class="code" href="../../db/df7/class_world_object.html#a41d85385408958edcecb5883dd89c3d9">m_invisibility</a>.<a class="code" href="../../d0/dbe/class_flagged_values_array32.html#aacca1261b2a22525e5fd40e5f479aa06">AddValue</a>(<a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>, -<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;    }</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160; </div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    <span class="comment">// call functions which may have additional effects after chainging state of unit</span></div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a> &amp;&amp; (mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;    {</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;        <span class="comment">// drop flag at invisibiliy in bg</span></div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a2be941a27d14de6da7676c6fdbd37bb9">RemoveAurasWithInterruptFlags</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a0709fc3ab848cf1b8b4853813b8fe011a61b4509cc6643cd80da8b6c065d45f4a">AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</a>);</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    }</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160; </div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5b2b731101a2c33063cef5c59e595249">UpdateObjectVisibility</a>(target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a> || target-&gt;<a class="code" href="../../da/db7/class_unit.html#ac0f51b4cac0b9ad35347a50a91826785">GetOwnerGUID</a>().<a class="code" href="../../d8/d03/class_object_guid.html#a676c61adb79a8be696a771a116253ee1">IsPlayer</a>() || target-&gt;<a class="code" href="../../db/df7/class_world_object.html#a76c507a1b3adcebf2732572bc6b67fe0">GetMap</a>()-&gt;<a class="code" href="../../dd/d11/class_map.html#aae3a929aefb05046ef304ffba10aae71">Instanceable</a>(), <span class="keyword">true</span>);</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a76e5156ec045582923f6d1541b66367b">bRequestForcedVisibilityUpdate</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;}</div>
<div class="ttc" id="a_player_8h_html_a29b0496d910c02e5cc98d349c4427474a512b317a67d45505043fcae61dcca393"><div class="ttname"><a href="../../d1/d39/_player_8h.html#a29b0496d910c02e5cc98d349c4427474a512b317a67d45505043fcae61dcca393">PLAYER_FIELD_BYTE2_INVISIBILITY_GLOW</a></div><div class="ttdeci">@ PLAYER_FIELD_BYTE2_INVISIBILITY_GLOW</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l00551">Player.h:550</a></div></div>
<div class="ttc" id="a_player_8h_html_ae0c57a2bb851b9d5a88e5d5fef69f939a9ad97828a3dd598a45dcbbcd3969879b"><div class="ttname"><a href="../../d1/d39/_player_8h.html#ae0c57a2bb851b9d5a88e5d5fef69f939a9ad97828a3dd598a45dcbbcd3969879b">PLAYER_FIELD_BYTES_2_OFFSET_AURA_VISION</a></div><div class="ttdeci">@ PLAYER_FIELD_BYTES_2_OFFSET_AURA_VISION</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l00528">Player.h:527</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a5f791d790b588bcbafa8a2f34be5c4a0"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a5f791d790b588bcbafa8a2f34be5c4a0">InvisibilityType</a></div><div class="ttdeci">InvisibilityType</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01225">SharedDefines.h:1226</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a5f791d790b588bcbafa8a2f34be5c4a0aecf03cb7f42dc44356b530f9b9dc2c9a"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a5f791d790b588bcbafa8a2f34be5c4a0aecf03cb7f42dc44356b530f9b9dc2c9a">INVISIBILITY_GENERAL</a></div><div class="ttdeci">@ INVISIBILITY_GENERAL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01227">SharedDefines.h:1227</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a600ad2316202aec206facbfa746a136b"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a600ad2316202aec206facbfa746a136b">SPELL_AURA_MOD_INVISIBILITY</a></div><div class="ttdeci">@ SPELL_AURA_MOD_INVISIBILITY</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00081">SpellAuraDefines.h:81</a></div></div>
<div class="ttc" id="aclass_map_html_aae3a929aefb05046ef304ffba10aae71"><div class="ttname"><a href="../../dd/d11/class_map.html#aae3a929aefb05046ef304ffba10aae71">Map::Instanceable</a></div><div class="ttdeci">bool Instanceable() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d63/_map_8h_source.html#l00433">Map.h:433</a></div></div>
<div class="ttc" id="aclass_object_guid_html_a676c61adb79a8be696a771a116253ee1"><div class="ttname"><a href="../../d8/d03/class_object_guid.html#a676c61adb79a8be696a771a116253ee1">ObjectGuid::IsPlayer</a></div><div class="ttdeci">bool IsPlayer() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d83/_object_guid_8h_source.html#l00170">ObjectGuid.h:170</a></div></div>
<div class="ttc" id="aclass_unit_html_a76e5156ec045582923f6d1541b66367b"><div class="ttname"><a href="../../da/db7/class_unit.html#a76e5156ec045582923f6d1541b66367b">Unit::bRequestForcedVisibilityUpdate</a></div><div class="ttdeci">bool bRequestForcedVisibilityUpdate</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l02482">Unit.h:2482</a></div></div>
<div class="ttc" id="aclass_unit_html_ac0f51b4cac0b9ad35347a50a91826785"><div class="ttname"><a href="../../da/db7/class_unit.html#ac0f51b4cac0b9ad35347a50a91826785">Unit::GetOwnerGUID</a></div><div class="ttdeci">ObjectGuid GetOwnerGUID() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01894">Unit.h:1894</a></div></div>
<div class="ttc" id="aclass_world_object_html_a41d85385408958edcecb5883dd89c3d9"><div class="ttname"><a href="../../db/df7/class_world_object.html#a41d85385408958edcecb5883dd89c3d9">WorldObject::m_invisibility</a></div><div class="ttdeci">FlaggedValuesArray32&lt; int32, uint32, InvisibilityType, TOTAL_INVISIBILITY_TYPES &gt; m_invisibility</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d30/_object_8h_source.html#l00789">Object.h:789</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d30/_object_8h_source.html#l00632">FlaggedValuesArray32&lt; T_VALUES, T_FLAGS, FLAG_TYPE, ARRAY_SIZE &gt;::AddFlag()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00637">FlaggedValuesArray32&lt; T_VALUES, T_FLAGS, FLAG_TYPE, ARRAY_SIZE &gt;::AddValue()</a>, <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00050">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00072">AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02482">Unit::bRequestForcedVisibilityUpdate</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00633">FlaggedValuesArray32&lt; T_VALUES, T_FLAGS, FLAG_TYPE, ARRAY_SIZE &gt;::DelFlag()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02047">Unit::GetAuraEffectsByType()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00800">WorldObject::GetMap()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01894">Unit::GetOwnerGUID()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05194">Unit::HasAuraType()</a>, <a class="el" href="../../d3/d63/_map_8h_source.html#l00433">Map::Instanceable()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01227">INVISIBILITY_GENERAL</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00170">ObjectGuid::IsPlayer()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00789">WorldObject::m_invisibility</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l00550">PLAYER_FIELD_BYTE2_INVISIBILITY_GLOW</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00378">PLAYER_FIELD_BYTES2</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l00527">PLAYER_FIELD_BYTES_2_OFFSET_AURA_VISION</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04681">Unit::RemoveAurasWithInterruptFlags()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00921">Object::RemoveByteFlag()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00902">Object::SetByteFlag()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00081">SPELL_AURA_MOD_INVISIBILITY</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l18229">Unit::UpdateObjectVisibility()</a>.</p>

</div>
</div>
<a id="a4fff389a772b3a1800829b007fd09ad7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fff389a772b3a1800829b007fd09ad7">&#9670;&nbsp;</a></span>HandleModInvisibilityDetect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModInvisibilityDetect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01490">1490</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;{</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>))</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160; </div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    <a class="code" href="../../df/d0b/_shared_defines_8h.html#a5f791d790b588bcbafa8a2f34be5c4a0">InvisibilityType</a> <a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a> = <a class="code" href="../../df/d0b/_shared_defines_8h.html#a5f791d790b588bcbafa8a2f34be5c4a0">InvisibilityType</a>(<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160; </div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    {</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;        target-&gt;<a class="code" href="../../db/df7/class_world_object.html#a535383de383eb9b9b20d988bdcbb3291">m_invisibilityDetect</a>.<a class="code" href="../../d0/dbe/class_flagged_values_array32.html#a273ab3607b23881628eb0c5d6a4da288">AddFlag</a>(<a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>);</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;        target-&gt;<a class="code" href="../../db/df7/class_world_object.html#a535383de383eb9b9b20d988bdcbb3291">m_invisibilityDetect</a>.<a class="code" href="../../d0/dbe/class_flagged_values_array32.html#aacca1261b2a22525e5fd40e5f479aa06">AddValue</a>(<a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>, <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    }</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    {</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;        <span class="keywordflow">if</span> (!target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ac0dfa842319d63f7923d74c30ef38dfb">SPELL_AURA_MOD_INVISIBILITY_DETECT</a>))</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;            target-&gt;<a class="code" href="../../db/df7/class_world_object.html#a535383de383eb9b9b20d988bdcbb3291">m_invisibilityDetect</a>.<a class="code" href="../../d0/dbe/class_flagged_values_array32.html#a3a674b2a7b8d5874f7210372b3e92123">DelFlag</a>(<a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>);</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160; </div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;        target-&gt;<a class="code" href="../../db/df7/class_world_object.html#a535383de383eb9b9b20d988bdcbb3291">m_invisibilityDetect</a>.<a class="code" href="../../d0/dbe/class_flagged_values_array32.html#aacca1261b2a22525e5fd40e5f479aa06">AddValue</a>(<a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>, -<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    }</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160; </div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    <span class="comment">// call functions which may have additional effects after chainging state of unit</span></div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5b2b731101a2c33063cef5c59e595249">UpdateObjectVisibility</a>(target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a> || target-&gt;<a class="code" href="../../da/db7/class_unit.html#ac0f51b4cac0b9ad35347a50a91826785">GetOwnerGUID</a>().<a class="code" href="../../d8/d03/class_object_guid.html#a676c61adb79a8be696a771a116253ee1">IsPlayer</a>());</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;}</div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799ac0dfa842319d63f7923d74c30ef38dfb"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ac0dfa842319d63f7923d74c30ef38dfb">SPELL_AURA_MOD_INVISIBILITY_DETECT</a></div><div class="ttdeci">@ SPELL_AURA_MOD_INVISIBILITY_DETECT</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00082">SpellAuraDefines.h:82</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d30/_object_8h_source.html#l00632">FlaggedValuesArray32&lt; T_VALUES, T_FLAGS, FLAG_TYPE, ARRAY_SIZE &gt;::AddFlag()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00637">FlaggedValuesArray32&lt; T_VALUES, T_FLAGS, FLAG_TYPE, ARRAY_SIZE &gt;::AddValue()</a>, <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00633">FlaggedValuesArray32&lt; T_VALUES, T_FLAGS, FLAG_TYPE, ARRAY_SIZE &gt;::DelFlag()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01894">Unit::GetOwnerGUID()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05194">Unit::HasAuraType()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00170">ObjectGuid::IsPlayer()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00790">WorldObject::m_invisibilityDetect</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00082">SPELL_AURA_MOD_INVISIBILITY_DETECT</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l18229">Unit::UpdateObjectVisibility()</a>.</p>

</div>
</div>
<a id="accc046bd1b9adb7c8b60be792f70e814"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accc046bd1b9adb7c8b60be792f70e814">&#9670;&nbsp;</a></span>HandleModManaRegen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModManaRegen </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04241">4241</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;{</div>
<div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160; </div>
<div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160; </div>
<div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160; </div>
<div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;    <span class="comment">//Note: an increase in regen does NOT cause threat.</span></div>
<div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;    target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a54f5e92a4fbfcf953339440c2a827394">UpdateManaRegen</a>();</div>
<div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;}</div>
<div class="ttc" id="aclass_player_html_a54f5e92a4fbfcf953339440c2a827394"><div class="ttname"><a href="../../d8/d53/class_player.html#a54f5e92a4fbfcf953339440c2a827394">Player::UpdateManaRegen</a></div><div class="ttdeci">void UpdateManaRegen()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d07/_stat_system_8cpp_source.html#l00887">StatSystem.cpp:887</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../df/d07/_stat_system_8cpp_source.html#l00887">Player::UpdateManaRegen()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04423">HandleAuraModRegenInterrupt()</a>.</p>

</div>
</div>
<a id="ae5aa79360f973fbe4026586ef2eeda03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5aa79360f973fbe4026586ef2eeda03">&#9670;&nbsp;</a></span>HandleModMechanicImmunity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModMechanicImmunity </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03677">3677</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;{</div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160; </div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> mechanic = 0;</div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160; </div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>())</div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;    {</div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;        <span class="keywordflow">case</span> 46924: <span class="comment">// BladeStorm</span></div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;        <span class="keywordflow">case</span> 34471: <span class="comment">// The Beast Within</span></div>
<div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;        <span class="keywordflow">case</span> 19574: <span class="comment">// Bestial Wrath</span></div>
<div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;            mechanic = <a class="code" href="../../df/d0b/_shared_defines_8h.html#aad347546e73152f50df1695839e39ca1">IMMUNE_TO_MOVEMENT_IMPAIRMENT_AND_LOSS_CONTROL_MASK</a>;</div>
<div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada655f913cba9a74b4321f72f001ca174e">MECHANIC_CHARM</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974">MECHANIC_DISORIENTED</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada3f5a5b15800c7e6d11e1c1482fc53f96">MECHANIC_FEAR</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada8edb909788821535a07afdb9bf8957a8">MECHANIC_ROOT</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada94162e45f3c41a104fa71a593b39a926">MECHANIC_SLEEP</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada857bb0c20ddc48863218d8987f4593a5">MECHANIC_FREEZE</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada5bd5524686a4163521296cb159b22363">MECHANIC_KNOCKOUT</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada9dd2384218d039987359150d147d3263">MECHANIC_POLYMORPH</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adaa823d24ef2d29559df9cd8de9f0c071a">MECHANIC_BANISH</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adad1d6dcbfe100975b5e19ea7037126fb2">MECHANIC_SHACKLE</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada76d854166bbc1fbebd24e0899d712be8">MECHANIC_TURN</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adaedfaf974478ae49d77b1d7ffd7bbafff">MECHANIC_HORROR</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adab01f0d1cee33a302eff7530e77385ee2">MECHANIC_DAZE</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adad9aacefd364ef80ddcf9f0caaf7bc930">MECHANIC_SAPPED</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;        <span class="keywordflow">case</span> 42292: <span class="comment">// PvP trinket</span></div>
<div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;        <span class="keywordflow">case</span> 59752: <span class="comment">// Every Man for Himself</span></div>
<div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;        <span class="keywordflow">case</span> 65547: <span class="comment">// PvP trinket for Faction Champions (ToC 25)</span></div>
<div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;        <span class="keywordflow">case</span> 53490: <span class="comment">// Bullheaded</span></div>
<div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;        <span class="keywordflow">case</span> 46227: <span class="comment">// Medalion of Immunity</span></div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;            mechanic = <a class="code" href="../../df/d0b/_shared_defines_8h.html#aad347546e73152f50df1695839e39ca1">IMMUNE_TO_MOVEMENT_IMPAIRMENT_AND_LOSS_CONTROL_MASK</a>;</div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#ad6df47a81f5f5f147e68211ee935b398">RemoveAurasByType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a4b2bdc3e98a82e8735a5d6b052e53029">SPELL_AURA_PREVENTS_FLEEING</a>); <span class="comment">// xinef: Patch 2.3.0 PvP Trinkets: Insignia of the Alliance, Insignia of the Horde, Medallion of the Alliance, and Medallion of the Horde now clear the debuff from Judgement of Justice.</span></div>
<div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;            <span class="comment">// Actually we should apply immunities here, too, but the aura has only 100 ms duration, so there is practically no point</span></div>
<div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;        <span class="keywordflow">case</span> 54508: <span class="comment">// Demonic Empowerment</span></div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;            mechanic = (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada8edb909788821535a07afdb9bf8957a8">MECHANIC_ROOT</a>);</div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#ad6df47a81f5f5f147e68211ee935b398">RemoveAurasByType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799afdf00dd634aaa25017ad329f58bd6cfd">SPELL_AURA_MOD_STUN</a>);</div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada8edb909788821535a07afdb9bf8957a8">MECHANIC_ROOT</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &lt; 1)</div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;            mechanic = 1 &lt;&lt; <a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>();</div>
<div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>(), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;    }</div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160; </div>
<div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a> &amp;&amp; <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;HasAttribute(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a638f8f550e23b2e3180b481bb3f38076ab2ba4cd294111dc378e33055074250be">SPELL_ATTR1_IMMUNITY_PURGES_EFFECT</a>))</div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;    {</div>
<div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;        <span class="comment">// Xinef: exception for purely snare mechanic (eg. hands of freedom)!</span></div>
<div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;        <span class="keywordflow">if</span> (mechanic == (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>))</div>
<div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#add77c4101065571410ecb5c2867feff5">RemoveMovementImpairingAuras</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1914cb06489a11617ad9f8c9e343876b">RemoveAurasWithMechanic</a>(mechanic, <a class="code" href="../../d5/d32/_unit_8h.html#a9a4f502870485ba32e759067c9adca94a51dd2d6d8e90e4ea4113c02fb772b80c">AURA_REMOVE_BY_DEFAULT</a>, <a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;    }</div>
<div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_a8fe6a763d72d84ded23cec01c772f7ada3f5a5b15800c7e6d11e1c1482fc53f96"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada3f5a5b15800c7e6d11e1c1482fc53f96">MECHANIC_FEAR</a></div><div class="ttdeci">@ MECHANIC_FEAR</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01302">SharedDefines.h:1302</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974">MECHANIC_DISORIENTED</a></div><div class="ttdeci">@ MECHANIC_DISORIENTED</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01299">SharedDefines.h:1299</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a8fe6a763d72d84ded23cec01c772f7ada5bd5524686a4163521296cb159b22363"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada5bd5524686a4163521296cb159b22363">MECHANIC_KNOCKOUT</a></div><div class="ttdeci">@ MECHANIC_KNOCKOUT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01311">SharedDefines.h:1311</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a8fe6a763d72d84ded23cec01c772f7ada655f913cba9a74b4321f72f001ca174e"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada655f913cba9a74b4321f72f001ca174e">MECHANIC_CHARM</a></div><div class="ttdeci">@ MECHANIC_CHARM</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01298">SharedDefines.h:1298</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a8fe6a763d72d84ded23cec01c772f7ada76d854166bbc1fbebd24e0899d712be8"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada76d854166bbc1fbebd24e0899d712be8">MECHANIC_TURN</a></div><div class="ttdeci">@ MECHANIC_TURN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01320">SharedDefines.h:1320</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a></div><div class="ttdeci">@ MECHANIC_STUN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01309">SharedDefines.h:1309</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a8fe6a763d72d84ded23cec01c772f7ada857bb0c20ddc48863218d8987f4593a5"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada857bb0c20ddc48863218d8987f4593a5">MECHANIC_FREEZE</a></div><div class="ttdeci">@ MECHANIC_FREEZE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01310">SharedDefines.h:1310</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a8fe6a763d72d84ded23cec01c772f7ada8edb909788821535a07afdb9bf8957a8"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada8edb909788821535a07afdb9bf8957a8">MECHANIC_ROOT</a></div><div class="ttdeci">@ MECHANIC_ROOT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01304">SharedDefines.h:1304</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a8fe6a763d72d84ded23cec01c772f7ada94162e45f3c41a104fa71a593b39a926"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada94162e45f3c41a104fa71a593b39a926">MECHANIC_SLEEP</a></div><div class="ttdeci">@ MECHANIC_SLEEP</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01307">SharedDefines.h:1307</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a8fe6a763d72d84ded23cec01c772f7adab01f0d1cee33a302eff7530e77385ee2"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adab01f0d1cee33a302eff7530e77385ee2">MECHANIC_DAZE</a></div><div class="ttdeci">@ MECHANIC_DAZE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01324">SharedDefines.h:1324</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a></div><div class="ttdeci">@ MECHANIC_SNARE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01308">SharedDefines.h:1308</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a8fe6a763d72d84ded23cec01c772f7adad1d6dcbfe100975b5e19ea7037126fb2"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adad1d6dcbfe100975b5e19ea7037126fb2">MECHANIC_SHACKLE</a></div><div class="ttdeci">@ MECHANIC_SHACKLE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01317">SharedDefines.h:1317</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a8fe6a763d72d84ded23cec01c772f7adad9aacefd364ef80ddcf9f0caaf7bc930"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adad9aacefd364ef80ddcf9f0caaf7bc930">MECHANIC_SAPPED</a></div><div class="ttdeci">@ MECHANIC_SAPPED</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01327">SharedDefines.h:1327</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a8fe6a763d72d84ded23cec01c772f7adaedfaf974478ae49d77b1d7ffd7bbafff"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adaedfaf974478ae49d77b1d7ffd7bbafff">MECHANIC_HORROR</a></div><div class="ttdeci">@ MECHANIC_HORROR</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01321">SharedDefines.h:1321</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_aad347546e73152f50df1695839e39ca1"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#aad347546e73152f50df1695839e39ca1">IMMUNE_TO_MOVEMENT_IMPAIRMENT_AND_LOSS_CONTROL_MASK</a></div><div class="ttdeci">#define IMMUNE_TO_MOVEMENT_IMPAIRMENT_AND_LOSS_CONTROL_MASK</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01333">SharedDefines.h:1333</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a4b2bdc3e98a82e8735a5d6b052e53029"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a4b2bdc3e98a82e8735a5d6b052e53029">SPELL_AURA_PREVENTS_FLEEING</a></div><div class="ttdeci">@ SPELL_AURA_PREVENTS_FLEEING</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00155">SpellAuraDefines.h:155</a></div></div>
<div class="ttc" id="a_unit_8h_html_a9a4f502870485ba32e759067c9adca94a51dd2d6d8e90e4ea4113c02fb772b80c"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a9a4f502870485ba32e759067c9adca94a51dd2d6d8e90e4ea4113c02fb772b80c">AURA_REMOVE_BY_DEFAULT</a></div><div class="ttdeci">@ AURA_REMOVE_BY_DEFAULT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00387">Unit.h:387</a></div></div>
<div class="ttc" id="aclass_unit_html_a1914cb06489a11617ad9f8c9e343876b"><div class="ttname"><a href="../../da/db7/class_unit.html#a1914cb06489a11617ad9f8c9e343876b">Unit::RemoveAurasWithMechanic</a></div><div class="ttdeci">void RemoveAurasWithMechanic(uint32 mechanic_mask, AuraRemoveMode removemode=AURA_REMOVE_BY_DEFAULT, uint32 except=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l04752">Unit.cpp:4752</a></div></div>
<div class="ttc" id="aclass_unit_html_add77c4101065571410ecb5c2867feff5"><div class="ttname"><a href="../../da/db7/class_unit.html#add77c4101065571410ecb5c2867feff5">Unit::RemoveMovementImpairingAuras</a></div><div class="ttdeci">void RemoveMovementImpairingAuras(bool withRoot)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l04728">Unit.cpp:4728</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l12604">Unit::ApplySpellImmune()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00387">AURA_REMOVE_BY_DEFAULT</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">GetId()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01333">IMMUNE_TO_MOVEMENT_IMPAIRMENT_AND_LOSS_CONTROL_MASK</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01371">IMMUNITY_MECHANIC</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01315">MECHANIC_BANISH</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01298">MECHANIC_CHARM</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01324">MECHANIC_DAZE</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01299">MECHANIC_DISORIENTED</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01302">MECHANIC_FEAR</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01310">MECHANIC_FREEZE</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01321">MECHANIC_HORROR</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01311">MECHANIC_KNOCKOUT</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01314">MECHANIC_POLYMORPH</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01304">MECHANIC_ROOT</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01327">MECHANIC_SAPPED</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01317">MECHANIC_SHACKLE</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01307">MECHANIC_SLEEP</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01308">MECHANIC_SNARE</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01309">MECHANIC_STUN</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01320">MECHANIC_TURN</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04610">Unit::RemoveAurasByType()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04752">Unit::RemoveAurasWithMechanic()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04728">Unit::RemoveMovementImpairingAuras()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00406">SPELL_ATTR1_IMMUNITY_PURGES_EFFECT</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00075">SPELL_AURA_MOD_STUN</a>, and <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00155">SPELL_AURA_PREVENTS_FLEEING</a>.</p>

</div>
</div>
<a id="a90f9b0656c55d016c70c02936dd73c9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90f9b0656c55d016c70c02936dd73c9b">&#9670;&nbsp;</a></span>HandleModMeleeRangedSpeedPct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModMeleeRangedSpeedPct </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04560">4560</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;{</div>
<div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160; </div>
<div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160; </div>
<div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a60d7ad5197284d3caaed380dfc740ff0">ApplyAttackTimePercentMod</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, (<span class="keywordtype">float</span>)<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a60d7ad5197284d3caaed380dfc740ff0">ApplyAttackTimePercentMod</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa052681ec165e5b5e3edcf2089607ae67">OFF_ATTACK</a>, (<span class="keywordtype">float</span>)<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a60d7ad5197284d3caaed380dfc740ff0">ApplyAttackTimePercentMod</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aaa2557af152c5f2b27bbf59915cbd1670">RANGED_ATTACK</a>, (<span class="keywordtype">float</span>)<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16263">Unit::ApplyAttackTimePercentMod()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00555">BASE_ATTACK</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00556">OFF_ATTACK</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00557">RANGED_ATTACK</a>.</p>

</div>
</div>
<a id="a45f86518a11aae0590304353a73b8d40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45f86518a11aae0590304353a73b8d40">&#9670;&nbsp;</a></span>HandleModMeleeSpeedPct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModMeleeSpeedPct </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04596">4596</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;{</div>
<div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160; </div>
<div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160; </div>
<div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a60d7ad5197284d3caaed380dfc740ff0">ApplyAttackTimePercentMod</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a60d7ad5197284d3caaed380dfc740ff0">ApplyAttackTimePercentMod</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa052681ec165e5b5e3edcf2089607ae67">OFF_ATTACK</a>,  <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16263">Unit::ApplyAttackTimePercentMod()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00555">BASE_ATTACK</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00556">OFF_ATTACK</a>.</p>

</div>
</div>
<a id="a8d79983093faf3f9c63c9f1cc65b0155"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d79983093faf3f9c63c9f1cc65b0155">&#9670;&nbsp;</a></span>HandleModOffhandDamagePercent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModOffhandDamagePercent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04867">4867</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04868"></a><span class="lineno"> 4868</span>&#160;{</div>
<div class="line"><a name="l04869"></a><span class="lineno"> 4869</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04870"></a><span class="lineno"> 4870</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04871"></a><span class="lineno"> 4871</span>&#160; </div>
<div class="line"><a name="l04872"></a><span class="lineno"> 4872</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04873"></a><span class="lineno"> 4873</span>&#160; </div>
<div class="line"><a name="l04874"></a><span class="lineno"> 4874</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdea036e8ca8fe78e5addf8e68a79732b742">UNIT_MOD_DAMAGE_OFFHAND</a>, <a class="code" href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeab3ddc12b0760eec54f45b90b8671af4d">TOTAL_PCT</a>, <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04875"></a><span class="lineno"> 4875</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l14345">Unit::HandleStatModifier()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00374">TOTAL_PCT</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00444">UNIT_MOD_DAMAGE_OFFHAND</a>.</p>

</div>
</div>
<a id="a844dcfe2b6e78cc40b8b9996672b4f07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a844dcfe2b6e78cc40b8b9996672b4f07">&#9670;&nbsp;</a></span>HandleModPercentStat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModPercentStat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04023">4023</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;{</div>
<div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160; </div>
<div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160; </div>
<div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &lt; -1 || <a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &gt; 4)</div>
<div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;    {</div>
<div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;        <a class="code" href="../../d3/d07/src_2common_2_logging_2_log_8h.html#a43832e3fa8508deb4ce43e520005fcd9">LOG_ERROR</a>(<span class="stringliteral">&quot;spells.aura.effect&quot;</span>, <span class="stringliteral">&quot;WARNING: Misc Value for SPELL_AURA_MOD_PERCENT_STAT not valid&quot;</span>);</div>
<div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;    }</div>
<div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160; </div>
<div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;    <span class="comment">// only players have base stats</span></div>
<div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160; </div>
<div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> i = <a class="code" href="../../df/d0b/_shared_defines_8h.html#ad28c24e82986133459dee232a5360bc4aa8b5028ba51024ead888adb32c0b7778">STAT_STRENGTH</a>; i &lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a0f8923f02eb7dfba43a426b8320354da">MAX_STATS</a>; ++i)</div>
<div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;    {</div>
<div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == i || <a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == -1)</div>
<div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bde">UnitMods</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdeae4231ed105be6058ed4deb6b4a5f3ba0">UNIT_MOD_STAT_START</a> + i), <a class="code" href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeabb35437d15ab9bfc3b7dbf7bac7c0dee">BASE_PCT</a>, <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a>), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;    }</div>
<div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00372">BASE_PCT</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l14345">Unit::HandleStatModifier()</a>, <a class="el" href="../../d3/d07/src_2common_2_logging_2_log_8h_source.html#l00261">LOG_ERROR</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00120">m_amount</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00237">MAX_STATS</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00230">STAT_STRENGTH</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00448">UNIT_MOD_STAT_START</a>.</p>

</div>
</div>
<a id="affc17fba71418fb11e2cffbb0b1710b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affc17fba71418fb11e2cffbb0b1710b6">&#9670;&nbsp;</a></span>HandleModPossess()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModPossess </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03089">3089</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;{</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160; </div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160; </div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* caster = <a class="code" href="../../da/df1/class_aura_effect.html#a29cf330277aeb89d17d18f6e112f035b">GetCaster</a>();</div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160; </div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;    <span class="comment">// no support for posession AI yet</span></div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;    <span class="keywordflow">if</span> (caster &amp;&amp; caster-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2a93dfa528ffc48db4993fb7ac62696db9">TYPEID_UNIT</a>)</div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;    {</div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;        <a class="code" href="../../da/df1/class_aura_effect.html#ac3da622f21fc4e175e6948db55b60511">HandleModCharm</a>(aurApp, mode, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;    }</div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160; </div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#ad02c1207bd4ccb5df03df1d4eec80293">SetCharmedBy</a>(caster, <a class="code" href="../../d5/d32/_unit_8h.html#ab341828eccd0b2de05fb7be084a9437aa2a5727b1c99073b12be5d2e5413cc9eb">CHARM_TYPE_POSSESS</a>, aurApp);</div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa897a679d63c8d6272d4bc85395a708f">RemoveCharmedBy</a>(caster);</div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;}</div>
<div class="ttc" id="a_unit_8h_html_ab341828eccd0b2de05fb7be084a9437aa2a5727b1c99073b12be5d2e5413cc9eb"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#ab341828eccd0b2de05fb7be084a9437aa2a5727b1c99073b12be5d2e5413cc9eb">CHARM_TYPE_POSSESS</a></div><div class="ttdeci">@ CHARM_TYPE_POSSESS</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01204">Unit.h:1204</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_ac3da622f21fc4e175e6948db55b60511"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#ac3da622f21fc4e175e6948db55b60511">AuraEffect::HandleModCharm</a></div><div class="ttdeci">void HandleModCharm(AuraApplication const *aurApp, uint8 mode, bool apply) const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03164">SpellAuraEffects.cpp:3164</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01204">CHARM_TYPE_POSSESS</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00040">GetCaster()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03164">HandleModCharm()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l17671">Unit::RemoveCharmedBy()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l17487">Unit::SetCharmedBy()</a>, and <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00037">TYPEID_UNIT</a>.</p>

</div>
</div>
<a id="a3ae2a8ce1a85f6a846a39a08566c7567"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ae2a8ce1a85f6a846a39a08566c7567">&#9670;&nbsp;</a></span>HandleModPossessPet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModPossessPet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03111">3111</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;{</div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;    <span class="comment">// Used by spell &quot;Eyes of the Beast&quot;</span></div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160; </div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160; </div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* caster = <a class="code" href="../../da/df1/class_aura_effect.html#a29cf330277aeb89d17d18f6e112f035b">GetCaster</a>();</div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;    <span class="keywordflow">if</span> (!caster || caster-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160; </div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;    <span class="comment">//seems it may happen that when removing it is no longer owner&#39;s pet</span></div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;    <span class="comment">//if (caster-&gt;ToPlayer()-&gt;GetPet() != target)</span></div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;    <span class="comment">//    return;</span></div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160; </div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2a93dfa528ffc48db4993fb7ac62696db9">TYPEID_UNIT</a> || !target-&gt;<a class="code" href="../../da/db7/class_unit.html#a4ad2fdcc45e2c3c85ad59ff49268b58c">IsPet</a>())</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160; </div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;    <a class="code" href="../../d6/d98/class_pet.html">Pet</a>* pet = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a496c3d83ea8d441167407fe815da8344">ToPet</a>();</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160; </div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;    {</div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;        <span class="keywordflow">if</span> (caster-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a5eef7fef24e4a9269d1ee834bc2bd501">GetPet</a>() != pet)</div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160; </div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;        <span class="comment">// Must clear current motion or pet leashes back to owner after a few yards</span></div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;        <span class="comment">//  when under spell &#39;Eyes of the Beast&#39;</span></div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;        pet-&gt;<a class="code" href="../../da/db7/class_unit.html#aae6570959bf6129418e1db63aeafdc1a">GetMotionMaster</a>()-&gt;<a class="code" href="../../df/d4d/class_motion_master.html#afa6ffa9c5d6897f3aad3ac524c7bb35a">Clear</a>();</div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;        pet-&gt;<a class="code" href="../../da/db7/class_unit.html#ad02c1207bd4ccb5df03df1d4eec80293">SetCharmedBy</a>(caster, <a class="code" href="../../d5/d32/_unit_8h.html#ab341828eccd0b2de05fb7be084a9437aa2a5727b1c99073b12be5d2e5413cc9eb">CHARM_TYPE_POSSESS</a>, aurApp);</div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;    }</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;    {</div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;        pet-&gt;<a class="code" href="../../da/db7/class_unit.html#aa897a679d63c8d6272d4bc85395a708f">RemoveCharmedBy</a>(caster);</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160; </div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;        <span class="keywordflow">if</span> (!pet-&gt;<a class="code" href="../../db/df7/class_world_object.html#ab73407bcdf13a30519a953d24773ed02">IsWithinDistInMap</a>(caster, pet-&gt;<a class="code" href="../../db/df7/class_world_object.html#a76c507a1b3adcebf2732572bc6b67fe0">GetMap</a>()-&gt;<a class="code" href="../../dd/d11/class_map.html#ac309ee57ae1a2058047c749d85d9bc95">GetVisibilityRange</a>()))</div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;            pet-&gt;<a class="code" href="../../d6/d98/class_pet.html#aad26ada9ab82a5ec5a327976f4f51167">Remove</a>(<a class="code" href="../../d7/d23/_pet_defines_8h.html#a006372e9693754ac0d923d8764ec55fdae55abbb64855962852c91fb8638ad6cd">PET_SAVE_NOT_IN_SLOT</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;        {</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;            <span class="comment">// Reinitialize the pet bar or it will appear greyed out</span></div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;            caster-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a4f64d53f6bc67d1aeafbb575054fa35b">PetSpellInitialize</a>();</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160; </div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;            <span class="comment">// Follow owner only if not fighting or owner didn&#39;t click &quot;stay&quot; at new location</span></div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;            <span class="comment">// This may be confusing because pet bar shows &quot;stay&quot; when under the spell but it retains</span></div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;            <span class="comment">//  the &quot;follow&quot; flag. Player MUST click &quot;stay&quot; while under the spell.</span></div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;            <span class="keywordflow">if</span> (!pet-&gt;<a class="code" href="../../da/db7/class_unit.html#af8c91dcb86bd35e070c646e8baeaa4b4">GetVictim</a>() &amp;&amp; !pet-&gt;<a class="code" href="../../da/db7/class_unit.html#ab29708b224bb3cb458449e97a3e88610">GetCharmInfo</a>()-&gt;<a class="code" href="../../df/da2/struct_charm_info.html#ab817266875b889133f8297d31c0f911e">HasCommandState</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a7eae48d6e87258317f7ee7e8d84a4abdab33055c9492afc567e3a602f88347ca5">COMMAND_STAY</a>))</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;            {</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;                pet-&gt;<a class="code" href="../../da/db7/class_unit.html#aae6570959bf6129418e1db63aeafdc1a">GetMotionMaster</a>()-&gt;<a class="code" href="../../df/d4d/class_motion_master.html#a5c4f6d1163174b909c83901d7f770d72">MoveFollow</a>(caster, <a class="code" href="../../d7/d23/_pet_defines_8h.html#a83e96c6d024ceb5d1189baac7b823d5d">PET_FOLLOW_DIST</a>, pet-&gt;<a class="code" href="../../d3/d0f/class_minion.html#a6b4a4409bd7a8ff455bb13f8c4e5560a">GetFollowAngle</a>());</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;            }</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;        }</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;    }</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;}</div>
<div class="ttc" id="a_pet_defines_8h_html_a006372e9693754ac0d923d8764ec55fdae55abbb64855962852c91fb8638ad6cd"><div class="ttname"><a href="../../d7/d23/_pet_defines_8h.html#a006372e9693754ac0d923d8764ec55fdae55abbb64855962852c91fb8638ad6cd">PET_SAVE_NOT_IN_SLOT</a></div><div class="ttdeci">@ PET_SAVE_NOT_IN_SLOT</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d23/_pet_defines_8h_source.html#l00038">PetDefines.h:37</a></div></div>
<div class="ttc" id="a_pet_defines_8h_html_a83e96c6d024ceb5d1189baac7b823d5d"><div class="ttname"><a href="../../d7/d23/_pet_defines_8h.html#a83e96c6d024ceb5d1189baac7b823d5d">PET_FOLLOW_DIST</a></div><div class="ttdeci">#define PET_FOLLOW_DIST</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d23/_pet_defines_8h_source.html#l00202">PetDefines.h:202</a></div></div>
<div class="ttc" id="a_unit_8h_html_a7eae48d6e87258317f7ee7e8d84a4abdab33055c9492afc567e3a602f88347ca5"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a7eae48d6e87258317f7ee7e8d84a4abdab33055c9492afc567e3a602f88347ca5">COMMAND_STAY</a></div><div class="ttdeci">@ COMMAND_STAY</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01158">Unit.h:1158</a></div></div>
<div class="ttc" id="aclass_minion_html_a6b4a4409bd7a8ff455bb13f8c4e5560a"><div class="ttname"><a href="../../d3/d0f/class_minion.html#a6b4a4409bd7a8ff455bb13f8c4e5560a">Minion::GetFollowAngle</a></div><div class="ttdeci">float GetFollowAngle() const override</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/_temporary_summon_8h_source.html#l00075">TemporarySummon.h:75</a></div></div>
<div class="ttc" id="aclass_motion_master_html_a5c4f6d1163174b909c83901d7f770d72"><div class="ttname"><a href="../../df/d4d/class_motion_master.html#a5c4f6d1163174b909c83901d7f770d72">MotionMaster::MoveFollow</a></div><div class="ttdeci">void MoveFollow(Unit *target, float dist, float angle, MovementSlot slot=MOTION_SLOT_ACTIVE)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d24/_motion_master_8cpp_source.html#l00370">MotionMaster.cpp:370</a></div></div>
<div class="ttc" id="aclass_motion_master_html_afa6ffa9c5d6897f3aad3ac524c7bb35a"><div class="ttname"><a href="../../df/d4d/class_motion_master.html#afa6ffa9c5d6897f3aad3ac524c7bb35a">MotionMaster::Clear</a></div><div class="ttdeci">void Clear(bool reset=true)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dea/_motion_master_8h_source.html#l00165">MotionMaster.h:165</a></div></div>
<div class="ttc" id="aclass_pet_html_aad26ada9ab82a5ec5a327976f4f51167"><div class="ttname"><a href="../../d6/d98/class_pet.html#aad26ada9ab82a5ec5a327976f4f51167">Pet::Remove</a></div><div class="ttdeci">void Remove(PetSaveMode mode, bool returnreagent=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d4e/_pet_8cpp_source.html#l00611">Pet.cpp:611</a></div></div>
<div class="ttc" id="aclass_player_html_a4f64d53f6bc67d1aeafbb575054fa35b"><div class="ttname"><a href="../../d8/d53/class_player.html#a4f64d53f6bc67d1aeafbb575054fa35b">Player::PetSpellInitialize</a></div><div class="ttdeci">void PetSpellInitialize()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/_player_8cpp_source.html#l08899">Player.cpp:8899</a></div></div>
<div class="ttc" id="aclass_unit_html_a496c3d83ea8d441167407fe815da8344"><div class="ttname"><a href="../../da/db7/class_unit.html#a496c3d83ea8d441167407fe815da8344">Unit::ToPet</a></div><div class="ttdeci">Pet * ToPet()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l02467">Unit.h:2467</a></div></div>
<div class="ttc" id="aclass_unit_html_ab29708b224bb3cb458449e97a3e88610"><div class="ttname"><a href="../../da/db7/class_unit.html#ab29708b224bb3cb458449e97a3e88610">Unit::GetCharmInfo</a></div><div class="ttdeci">CharmInfo * GetCharmInfo()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01963">Unit.h:1963</a></div></div>
<div class="ttc" id="aclass_unit_html_af8c91dcb86bd35e070c646e8baeaa4b4"><div class="ttname"><a href="../../da/db7/class_unit.html#af8c91dcb86bd35e070c646e8baeaa4b4">Unit::GetVictim</a></div><div class="ttdeci">Unit * GetVictim() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01508">Unit.h:1508</a></div></div>
<div class="ttc" id="aclass_world_object_html_ab73407bcdf13a30519a953d24773ed02"><div class="ttname"><a href="../../db/df7/class_world_object.html#ab73407bcdf13a30519a953d24773ed02">WorldObject::IsWithinDistInMap</a></div><div class="ttdeci">bool IsWithinDistInMap(WorldObject const *obj, float dist2compare, bool is3D=true, bool useBoundingRadius=true) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/ded/_object_8cpp_source.html#l01369">Object.cpp:1369</a></div></div>
<div class="ttc" id="astruct_charm_info_html_ab817266875b889133f8297d31c0f911e"><div class="ttname"><a href="../../df/da2/struct_charm_info.html#ab817266875b889133f8297d31c0f911e">CharmInfo::HasCommandState</a></div><div class="ttdeci">bool HasCommandState(CommandStates state) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01232">Unit.h:1232</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01204">CHARM_TYPE_POSSESS</a>, <a class="el" href="../../d8/dea/_motion_master_8h_source.html#l00165">MotionMaster::Clear()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01158">COMMAND_STAY</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00040">GetCaster()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01963">Unit::GetCharmInfo()</a>, <a class="el" href="../../d6/db3/_temporary_summon_8h_source.html#l00075">Minion::GetFollowAngle()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00800">WorldObject::GetMap()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02345">Unit::GetMotionMaster()</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l08649">Player::GetPet()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01508">Unit::GetVictim()</a>, <a class="el" href="../../d3/d63/_map_8h_source.html#l00337">Map::GetVisibilityRange()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01232">CharmInfo::HasCommandState()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01534">Unit::IsPet()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l01369">WorldObject::IsWithinDistInMap()</a>, <a class="el" href="../../d9/d24/_motion_master_8cpp_source.html#l00370">MotionMaster::MoveFollow()</a>, <a class="el" href="../../d7/d23/_pet_defines_8h_source.html#l00202">PET_FOLLOW_DIST</a>, <a class="el" href="../../d7/d23/_pet_defines_8h_source.html#l00037">PET_SAVE_NOT_IN_SLOT</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l08899">Player::PetSpellInitialize()</a>, <a class="el" href="../../df/d4e/_pet_8cpp_source.html#l00611">Pet::Remove()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l17671">Unit::RemoveCharmedBy()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l17487">Unit::SetCharmedBy()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02467">Unit::ToPet()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00037">TYPEID_UNIT</a>.</p>

</div>
</div>
<a id="a69e8e0ce986f2ada7ccaf38bef2ecf97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69e8e0ce986f2ada7ccaf38bef2ecf97">&#9670;&nbsp;</a></span>HandleModPowerCost()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModPowerCost </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04909">4909</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04910"></a><span class="lineno"> 4910</span>&#160;{</div>
<div class="line"><a name="l04911"></a><span class="lineno"> 4911</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>))</div>
<div class="line"><a name="l04912"></a><span class="lineno"> 4912</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04913"></a><span class="lineno"> 4913</span>&#160; </div>
<div class="line"><a name="l04914"></a><span class="lineno"> 4914</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04915"></a><span class="lineno"> 4915</span>&#160; </div>
<div class="line"><a name="l04916"></a><span class="lineno"> 4916</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3d2e33bfddb1e3c28157eb6d136bfd28">MAX_SPELL_SCHOOL</a>; ++i)</div>
<div class="line"><a name="l04917"></a><span class="lineno"> 4917</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; i))</div>
<div class="line"><a name="l04918"></a><span class="lineno"> 4918</span>&#160;            target-&gt;<a class="code" href="../../d8/d83/class_object.html#a494b539a938499639eab3f8d9a0c3364">ApplyModInt32Value</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a1f16c4385c6f555e384b123886377fa1">UNIT_FIELD_POWER_COST_MODIFIER</a> + i, <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04919"></a><span class="lineno"> 4919</span>&#160;}</div>
<div class="ttc" id="a_update_fields_8h_html_a0e42dc606678c9df7884e1aad621e881a1f16c4385c6f555e384b123886377fa1"><div class="ttname"><a href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a1f16c4385c6f555e384b123886377fa1">UNIT_FIELD_POWER_COST_MODIFIER</a></div><div class="ttdeci">@ UNIT_FIELD_POWER_COST_MODIFIER</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d65/_update_fields_8h_source.html#l00170">UpdateFields.h:170</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00806">Object::ApplyModInt32Value()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00264">MAX_SPELL_SCHOOL</a>, and <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00170">UNIT_FIELD_POWER_COST_MODIFIER</a>.</p>

</div>
</div>
<a id="a1a030d85dec5fb20b11ef19206f6694c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a030d85dec5fb20b11ef19206f6694c">&#9670;&nbsp;</a></span>HandleModPowerCostPCT()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModPowerCostPCT </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04896">4896</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04897"></a><span class="lineno"> 4897</span>&#160;{</div>
<div class="line"><a name="l04898"></a><span class="lineno"> 4898</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>))</div>
<div class="line"><a name="l04899"></a><span class="lineno"> 4899</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04900"></a><span class="lineno"> 4900</span>&#160; </div>
<div class="line"><a name="l04901"></a><span class="lineno"> 4901</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04902"></a><span class="lineno"> 4902</span>&#160; </div>
<div class="line"><a name="l04903"></a><span class="lineno"> 4903</span>&#160;    <span class="keywordtype">float</span> amount = <a class="code" href="../../d9/de9/src_2common_2_utilities_2util_8h.html#ae00607f8188c59ffcea5a3997c0120b0">CalculatePct</a>(1.0f, <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><a name="l04904"></a><span class="lineno"> 4904</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3d2e33bfddb1e3c28157eb6d136bfd28">MAX_SPELL_SCHOOL</a>; ++i)</div>
<div class="line"><a name="l04905"></a><span class="lineno"> 4905</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; i))</div>
<div class="line"><a name="l04906"></a><span class="lineno"> 4906</span>&#160;            target-&gt;<a class="code" href="../../d8/d83/class_object.html#a00340fbc92fd28dfaa5e945a7f5e5a77">ApplyModSignedFloatValue</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881ae2928aeed1af182ed918045f3823ac38">UNIT_FIELD_POWER_COST_MULTIPLIER</a> + i, amount, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04907"></a><span class="lineno"> 4907</span>&#160;}</div>
<div class="ttc" id="a_update_fields_8h_html_a0e42dc606678c9df7884e1aad621e881ae2928aeed1af182ed918045f3823ac38"><div class="ttname"><a href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881ae2928aeed1af182ed918045f3823ac38">UNIT_FIELD_POWER_COST_MULTIPLIER</a></div><div class="ttdeci">@ UNIT_FIELD_POWER_COST_MULTIPLIER</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d65/_update_fields_8h_source.html#l00171">UpdateFields.h:171</a></div></div>
<div class="ttc" id="aclass_object_html_a00340fbc92fd28dfaa5e945a7f5e5a77"><div class="ttname"><a href="../../d8/d83/class_object.html#a00340fbc92fd28dfaa5e945a7f5e5a77">Object::ApplyModSignedFloatValue</a></div><div class="ttdeci">void ApplyModSignedFloatValue(uint16 index, float val, bool apply)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/ded/_object_8cpp_source.html#l00813">Object.cpp:813</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00813">Object::ApplyModSignedFloatValue()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d9/de9/src_2common_2_utilities_2util_8h_source.html#l00098">CalculatePct()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00264">MAX_SPELL_SCHOOL</a>, and <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00171">UNIT_FIELD_POWER_COST_MULTIPLIER</a>.</p>

</div>
</div>
<a id="a4f39fbf45d91d07a1835fb9b9e43f710"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f39fbf45d91d07a1835fb9b9e43f710">&#9670;&nbsp;</a></span>HandleModPowerRegen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModPowerRegen </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04218">4218</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;{</div>
<div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160; </div>
<div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160; </div>
<div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160; </div>
<div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;    <span class="comment">// Update manaregen value</span></div>
<div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a>)</div>
<div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a54f5e92a4fbfcf953339440c2a827394">UpdateManaRegen</a>();</div>
<div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414ad2662f90ffd864b9483e8265c2cc08df">POWER_RUNE</a>)</div>
<div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a0fa7c719535ba8b27b8b055878e80fb2">UpdateRuneRegen</a>(<a class="code" href="../../d1/d39/_player_8h.html#a2377260993cd4a14aaab6f5771385e11">RuneType</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a88fa5605246883e095cd82ebd5d75bef">GetMiscValueB</a>()));</div>
<div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;    <span class="comment">// other powers are not immediate effects - implemented in Player::Regenerate, Creature::Regenerate</span></div>
<div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_a17e15fab4b89f4840e745f31ca76a414ad2662f90ffd864b9483e8265c2cc08df"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414ad2662f90ffd864b9483e8265c2cc08df">POWER_RUNE</a></div><div class="ttdeci">@ POWER_RUNE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00246">SharedDefines.h:246</a></div></div>
<div class="ttc" id="aclass_player_html_a0fa7c719535ba8b27b8b055878e80fb2"><div class="ttname"><a href="../../d8/d53/class_player.html#a0fa7c719535ba8b27b8b055878e80fb2">Player::UpdateRuneRegen</a></div><div class="ttdeci">void UpdateRuneRegen(RuneType rune)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d07/_stat_system_8cpp_source.html#l00921">StatSystem.cpp:921</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00436">GetMiscValueB()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00241">POWER_MANA</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00246">POWER_RUNE</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, <a class="el" href="../../df/d07/_stat_system_8cpp_source.html#l00887">Player::UpdateManaRegen()</a>, and <a class="el" href="../../df/d07/_stat_system_8cpp_source.html#l00921">Player::UpdateRuneRegen()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04236">HandleModPowerRegenPCT()</a>.</p>

</div>
</div>
<a id="af38cb2bbca5005a77d57930e8a9fbb21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af38cb2bbca5005a77d57930e8a9fbb21">&#9670;&nbsp;</a></span>HandleModPowerRegenPCT()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModPowerRegenPCT </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04236">4236</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;{</div>
<div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;    <a class="code" href="../../da/df1/class_aura_effect.html#a4f39fbf45d91d07a1835fb9b9e43f710">HandleModPowerRegen</a>(aurApp, mode, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;}</div>
<div class="ttc" id="aclass_aura_effect_html_a4f39fbf45d91d07a1835fb9b9e43f710"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a4f39fbf45d91d07a1835fb9b9e43f710">AuraEffect::HandleModPowerRegen</a></div><div class="ttdeci">void HandleModPowerRegen(AuraApplication const *aurApp, uint8 mode, bool apply) const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04218">SpellAuraEffects.cpp:4218</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, and <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04218">HandleModPowerRegen()</a>.</p>

</div>
</div>
<a id="a5818f07310f7386ca2e2ce8a5fbb594b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5818f07310f7386ca2e2ce8a5fbb594b">&#9670;&nbsp;</a></span>HandleModRating()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModRating </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04634">4634</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04635"></a><span class="lineno"> 4635</span>&#160;{</div>
<div class="line"><a name="l04636"></a><span class="lineno"> 4636</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04638"></a><span class="lineno"> 4638</span>&#160; </div>
<div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04640"></a><span class="lineno"> 4640</span>&#160; </div>
<div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04643"></a><span class="lineno"> 4643</span>&#160; </div>
<div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> rating = 0; rating &lt; <a class="code" href="../../d5/d32/_unit_8h.html#a89a822f82e3d3eafe03f7ae0d1310300">MAX_COMBAT_RATING</a>; ++rating)</div>
<div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; rating))</div>
<div class="line"><a name="l04646"></a><span class="lineno"> 4646</span>&#160;            target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a2843d3ed237aba682ef70f8e32bd9576">ApplyRatingMod</a>(<a class="code" href="../../d5/d32/_unit_8h.html#aa60e4ef21982cf41b489e5242f01b64f">CombatRating</a>(rating), <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160;}</div>
<div class="ttc" id="a_unit_8h_html_a89a822f82e3d3eafe03f7ae0d1310300"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a89a822f82e3d3eafe03f7ae0d1310300">MAX_COMBAT_RATING</a></div><div class="ttdeci">#define MAX_COMBAT_RATING</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00590">Unit.h:590</a></div></div>
<div class="ttc" id="a_unit_8h_html_aa60e4ef21982cf41b489e5242f01b64f"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#aa60e4ef21982cf41b489e5242f01b64f">CombatRating</a></div><div class="ttdeci">CombatRating</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00561">Unit.h:562</a></div></div>
<div class="ttc" id="aclass_player_html_a2843d3ed237aba682ef70f8e32bd9576"><div class="ttname"><a href="../../d8/d53/class_player.html#a2843d3ed237aba682ef70f8e32bd9576">Player::ApplyRatingMod</a></div><div class="ttdeci">void ApplyRatingMod(CombatRating cr, int32 value, bool apply)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/_player_8cpp_source.html#l05094">Player.cpp:5094</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l05094">Player::ApplyRatingMod()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00590">MAX_COMBAT_RATING</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, and <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>.</p>

</div>
</div>
<a id="a0b0a7eb3419f1ef986ae136c9248e173"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b0a7eb3419f1ef986ae136c9248e173">&#9670;&nbsp;</a></span>HandleModRatingFromStat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModRatingFromStat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04649">4649</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04650"></a><span class="lineno"> 4650</span>&#160;{</div>
<div class="line"><a name="l04651"></a><span class="lineno"> 4651</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04652"></a><span class="lineno"> 4652</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04653"></a><span class="lineno"> 4653</span>&#160; </div>
<div class="line"><a name="l04654"></a><span class="lineno"> 4654</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160; </div>
<div class="line"><a name="l04656"></a><span class="lineno"> 4656</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l04657"></a><span class="lineno"> 4657</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04658"></a><span class="lineno"> 4658</span>&#160; </div>
<div class="line"><a name="l04659"></a><span class="lineno"> 4659</span>&#160;    <span class="comment">// Just recalculate ratings</span></div>
<div class="line"><a name="l04660"></a><span class="lineno"> 4660</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> rating = 0; rating &lt; <a class="code" href="../../d5/d32/_unit_8h.html#a89a822f82e3d3eafe03f7ae0d1310300">MAX_COMBAT_RATING</a>; ++rating)</div>
<div class="line"><a name="l04661"></a><span class="lineno"> 4661</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; rating))</div>
<div class="line"><a name="l04662"></a><span class="lineno"> 4662</span>&#160;            target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a2843d3ed237aba682ef70f8e32bd9576">ApplyRatingMod</a>(<a class="code" href="../../d5/d32/_unit_8h.html#aa60e4ef21982cf41b489e5242f01b64f">CombatRating</a>(rating), 0, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04663"></a><span class="lineno"> 4663</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l05094">Player::ApplyRatingMod()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00590">MAX_COMBAT_RATING</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, and <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>.</p>

</div>
</div>
<a id="ae2accb6290e6f7ee84c9588d641898d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2accb6290e6f7ee84c9588d641898d4">&#9670;&nbsp;</a></span>HandleModResistancePercent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModResistancePercent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03932">3932</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;{</div>
<div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160; </div>
<div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160; </div>
<div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../d9/df6/my__global_8h.html#a1b956fe1df85f3c132b21edb4e116458">int8</a> i = <a class="code" href="../../df/d0b/_shared_defines_8h.html#a25263e3e283b54e5280d5af1fd16da4ca0599bcfa52d292c58e15ac0f081bb5af">SPELL_SCHOOL_NORMAL</a>; i &lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3d2e33bfddb1e3c28157eb6d136bfd28">MAX_SPELL_SCHOOL</a>; i++)</div>
<div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;    {</div>
<div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; <a class="code" href="../../df/de2/namespace_g3_d.html#af80d9dbc6fa48c9ff714c7158adb60ae">int32</a>(1 &lt;&lt; i))</div>
<div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;        {</div>
<div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bde">UnitMods</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdea2ca084c2061b3ebd16a486bd8e64a0d2">UNIT_MOD_RESISTANCE_START</a> + i), <a class="code" href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeab3ddc12b0760eec54f45b90b8671af4d">TOTAL_PCT</a>, <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;            <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a> || target-&gt;<a class="code" href="../../da/db7/class_unit.html#a4ad2fdcc45e2c3c85ad59ff49268b58c">IsPet</a>())</div>
<div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;            {</div>
<div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#a10525f4529dc72c0d70dae637022250f">ApplyResistanceBuffModsPercentMod</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a25263e3e283b54e5280d5af1fd16da4c">SpellSchools</a>(i), <span class="keyword">true</span>, (<span class="keywordtype">float</span>)<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#a10525f4529dc72c0d70dae637022250f">ApplyResistanceBuffModsPercentMod</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a25263e3e283b54e5280d5af1fd16da4c">SpellSchools</a>(i), <span class="keyword">false</span>, (<span class="keywordtype">float</span>)<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;            }</div>
<div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;        }</div>
<div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;    }</div>
<div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;}</div>
<div class="ttc" id="aclass_unit_html_a10525f4529dc72c0d70dae637022250f"><div class="ttname"><a href="../../da/db7/class_unit.html#a10525f4529dc72c0d70dae637022250f">Unit::ApplyResistanceBuffModsPercentMod</a></div><div class="ttdeci">void ApplyResistanceBuffModsPercentMod(SpellSchools school, bool positive, float val, bool apply)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l02107">Unit.h:2107</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02107">Unit::ApplyResistanceBuffModsPercentMod()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l14345">Unit::HandleStatModifier()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01534">Unit::IsPet()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00264">MAX_SPELL_SCHOOL</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00255">SPELL_SCHOOL_NORMAL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00374">TOTAL_PCT</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00450">UNIT_MOD_RESISTANCE_START</a>.</p>

</div>
</div>
<a id="aa978582e776583063a2a82af4c658c35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa978582e776583063a2a82af4c658c35">&#9670;&nbsp;</a></span>HandleModSpellCritChance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModSpellCritChance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04490">4490</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04491"></a><span class="lineno"> 4491</span>&#160;{</div>
<div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160; </div>
<div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160; </div>
<div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a06380d627aa5fee572465587fbdd53e4">UpdateAllSpellCritChances</a>();</div>
<div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a92418193751a8dc7679b00f1d9d07d35">m_baseSpellCritChance</a> += (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>) ? <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() : -<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>();</div>
<div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02175">Unit::m_baseSpellCritChance</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../df/d07/_stat_system_8cpp_source.html#l00834">Player::UpdateAllSpellCritChances()</a>.</p>

</div>
</div>
<a id="a92d0072fcf334ace5a8a29d5a58616e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92d0072fcf334ace5a8a29d5a58616e0">&#9670;&nbsp;</a></span>HandleModSpellCritChanceShool()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModSpellCritChanceShool </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04503">4503</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;{</div>
<div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160; </div>
<div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160; </div>
<div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160; </div>
<div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> school = <a class="code" href="../../df/d0b/_shared_defines_8h.html#a25263e3e283b54e5280d5af1fd16da4ca0599bcfa52d292c58e15ac0f081bb5af">SPELL_SCHOOL_NORMAL</a>; school &lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3d2e33bfddb1e3c28157eb6d136bfd28">MAX_SPELL_SCHOOL</a>; ++school)</div>
<div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; school))</div>
<div class="line"><a name="l04515"></a><span class="lineno"> 4515</span>&#160;            target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#af92906e643e5e1895fd2fb4205977568">UpdateSpellCritChance</a>(school);</div>
<div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;}</div>
<div class="ttc" id="aclass_player_html_af92906e643e5e1895fd2fb4205977568"><div class="ttname"><a href="../../d8/d53/class_player.html#af92906e643e5e1895fd2fb4205977568">Player::UpdateSpellCritChance</a></div><div class="ttdeci">void UpdateSpellCritChance(uint32 school)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d07/_stat_system_8cpp_source.html#l00785">StatSystem.cpp:785</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00264">MAX_SPELL_SCHOOL</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00255">SPELL_SCHOOL_NORMAL</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../df/d07/_stat_system_8cpp_source.html#l00785">Player::UpdateSpellCritChance()</a>.</p>

</div>
</div>
<a id="ad281398afbdfcf17b271deccfda26b01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad281398afbdfcf17b271deccfda26b01">&#9670;&nbsp;</a></span>HandleModSpellDamagePercentFromAttackPower()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModSpellDamagePercentFromAttackPower </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04077">4077</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;{</div>
<div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160; </div>
<div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160; </div>
<div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160; </div>
<div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;    <span class="comment">// Magic damage modifiers implemented in Unit::SpellDamageBonus</span></div>
<div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;    <span class="comment">// This information for client side use only</span></div>
<div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;    <span class="comment">// Recalculate bonus</span></div>
<div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;    target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a9c9c56019156a846d7437279bfcc31bf">UpdateSpellDamageAndHealingBonus</a>();</div>
<div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../df/d07/_stat_system_8cpp_source.html#l00170">Player::UpdateSpellDamageAndHealingBonus()</a>.</p>

</div>
</div>
<a id="abfe708f78779cd14750387b72c516b33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfe708f78779cd14750387b72c516b33">&#9670;&nbsp;</a></span>HandleModSpellDamagePercentFromStat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModSpellDamagePercentFromStat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04047">4047</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;{</div>
<div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160; </div>
<div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160; </div>
<div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160; </div>
<div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;    <span class="comment">// Magic damage modifiers implemented in Unit::SpellDamageBonus</span></div>
<div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;    <span class="comment">// This information for client side use only</span></div>
<div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;    <span class="comment">// Recalculate bonus</span></div>
<div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;    target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a9c9c56019156a846d7437279bfcc31bf">UpdateSpellDamageAndHealingBonus</a>();</div>
<div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../df/d07/_stat_system_8cpp_source.html#l00170">Player::UpdateSpellDamageAndHealingBonus()</a>.</p>

</div>
</div>
<a id="ada88a03111d74054c088f900f619adf1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada88a03111d74054c088f900f619adf1">&#9670;&nbsp;</a></span>HandleModSpellHealingPercentFromAttackPower()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModSpellHealingPercentFromAttackPower </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04093">4093</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;{</div>
<div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160; </div>
<div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160; </div>
<div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160; </div>
<div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;    <span class="comment">// Recalculate bonus</span></div>
<div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;    target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a9c9c56019156a846d7437279bfcc31bf">UpdateSpellDamageAndHealingBonus</a>();</div>
<div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../df/d07/_stat_system_8cpp_source.html#l00170">Player::UpdateSpellDamageAndHealingBonus()</a>.</p>

</div>
</div>
<a id="ad0ade8db29e053f3dd175102766ec745"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0ade8db29e053f3dd175102766ec745">&#9670;&nbsp;</a></span>HandleModSpellHealingPercentFromStat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModSpellHealingPercentFromStat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04063">4063</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;{</div>
<div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160; </div>
<div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160; </div>
<div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160; </div>
<div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;    <span class="comment">// Recalculate bonus</span></div>
<div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;    target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a9c9c56019156a846d7437279bfcc31bf">UpdateSpellDamageAndHealingBonus</a>();</div>
<div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../df/d07/_stat_system_8cpp_source.html#l00170">Player::UpdateSpellDamageAndHealingBonus()</a>.</p>

</div>
</div>
<a id="ad16e337a78c3bd2df90a006745bb0ccb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad16e337a78c3bd2df90a006745bb0ccb">&#9670;&nbsp;</a></span>HandleModSpellHitChance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModSpellHitChance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04477">4477</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;{</div>
<div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160; </div>
<div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160; </div>
<div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a6bc4b82c2c1255669483736f8509a508">UpdateSpellHitChances</a>();</div>
<div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#ae6fb11a9a0a02d10be57c2c713ec8e05">m_modSpellHitChance</a> += (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>) ? <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() : (-<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;}</div>
<div class="ttc" id="aclass_player_html_a6bc4b82c2c1255669483736f8509a508"><div class="ttname"><a href="../../d8/d53/class_player.html#a6bc4b82c2c1255669483736f8509a508">Player::UpdateSpellHitChances</a></div><div class="ttdeci">void UpdateSpellHitChances()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d07/_stat_system_8cpp_source.html#l00828">StatSystem.cpp:828</a></div></div>
<div class="ttc" id="aclass_unit_html_ae6fb11a9a0a02d10be57c2c713ec8e05"><div class="ttname"><a href="../../da/db7/class_unit.html#ae6fb11a9a0a02d10be57c2c713ec8e05">Unit::m_modSpellHitChance</a></div><div class="ttdeci">float m_modSpellHitChance</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l02174">Unit.h:2174</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02174">Unit::m_modSpellHitChance</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../df/d07/_stat_system_8cpp_source.html#l00828">Player::UpdateSpellHitChances()</a>.</p>

</div>
</div>
<a id="a7e98eced29d22a033eda88c17bc75ac5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e98eced29d22a033eda88c17bc75ac5">&#9670;&nbsp;</a></span>HandleModStateImmunityMask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModStateImmunityMask </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03357">3357</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;{</div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160; </div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;    std::list &lt;AuraType&gt; aura_immunity_list;</div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> mechanic_immunity_list = 0;</div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> miscVal = <a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>();</div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160; </div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;    <span class="keywordflow">switch</span> (miscVal)</div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;    {</div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;        <span class="keywordflow">case</span> 96:</div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;        <span class="keywordflow">case</span> 1615:</div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;            {</div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>())</div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;                {</div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;                    mechanic_immunity_list = (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada8edb909788821535a07afdb9bf8957a8">MECHANIC_ROOT</a>)</div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;                                             | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada3f5a5b15800c7e6d11e1c1482fc53f96">MECHANIC_FEAR</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>)</div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;                                             | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada94162e45f3c41a104fa71a593b39a926">MECHANIC_SLEEP</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada655f913cba9a74b4321f72f001ca174e">MECHANIC_CHARM</a>)</div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;                                             | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adad9aacefd364ef80ddcf9f0caaf7bc930">MECHANIC_SAPPED</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adaedfaf974478ae49d77b1d7ffd7bbafff">MECHANIC_HORROR</a>)</div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;                                             | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada9dd2384218d039987359150d147d3263">MECHANIC_POLYMORPH</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974">MECHANIC_DISORIENTED</a>)</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;                                             | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada857bb0c20ddc48863218d8987f4593a5">MECHANIC_FREEZE</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada76d854166bbc1fbebd24e0899d712be8">MECHANIC_TURN</a>);</div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160; </div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada655f913cba9a74b4321f72f001ca174e">MECHANIC_CHARM</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada8edb909788821535a07afdb9bf8957a8">MECHANIC_ROOT</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada3f5a5b15800c7e6d11e1c1482fc53f96">MECHANIC_FEAR</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada94162e45f3c41a104fa71a593b39a926">MECHANIC_SLEEP</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adad9aacefd364ef80ddcf9f0caaf7bc930">MECHANIC_SAPPED</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adaedfaf974478ae49d77b1d7ffd7bbafff">MECHANIC_HORROR</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada9dd2384218d039987359150d147d3263">MECHANIC_POLYMORPH</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974">MECHANIC_DISORIENTED</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada857bb0c20ddc48863218d8987f4593a5">MECHANIC_FREEZE</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada76d854166bbc1fbebd24e0899d712be8">MECHANIC_TURN</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;                    aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a7b5d0b48f9a7e84bf7a896602e8c66b9">SPELL_AURA_MOD_CHARM</a>);</div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;                    aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799afdf00dd634aaa25017ad329f58bd6cfd">SPELL_AURA_MOD_STUN</a>);</div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;                    aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ab3987db9e154ae9a2086efb43e5af610">SPELL_AURA_MOD_DECREASE_SPEED</a>);</div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;                    aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a833a8773139c4fdffb24499f28e98c63">SPELL_AURA_MOD_ROOT</a>);</div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;                    aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799adaa58e2c604243da285d64f4a95b42f7">SPELL_AURA_MOD_CONFUSE</a>);</div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;                    aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a44cf043145f5a78c5a4e36ecff8a034d">SPELL_AURA_MOD_FEAR</a>);</div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;                }</div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;            }</div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;        <span class="keywordflow">case</span> 679:</div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;            {</div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>() == 57742)</div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;                {</div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;                    mechanic_immunity_list = (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada8edb909788821535a07afdb9bf8957a8">MECHANIC_ROOT</a>)</div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;                                             | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada3f5a5b15800c7e6d11e1c1482fc53f96">MECHANIC_FEAR</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>)</div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;                                             | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada94162e45f3c41a104fa71a593b39a926">MECHANIC_SLEEP</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada655f913cba9a74b4321f72f001ca174e">MECHANIC_CHARM</a>)</div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;                                             | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adad9aacefd364ef80ddcf9f0caaf7bc930">MECHANIC_SAPPED</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adaedfaf974478ae49d77b1d7ffd7bbafff">MECHANIC_HORROR</a>)</div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;                                             | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada9dd2384218d039987359150d147d3263">MECHANIC_POLYMORPH</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974">MECHANIC_DISORIENTED</a>)</div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;                                             | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada857bb0c20ddc48863218d8987f4593a5">MECHANIC_FREEZE</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada76d854166bbc1fbebd24e0899d712be8">MECHANIC_TURN</a>);</div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160; </div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada8edb909788821535a07afdb9bf8957a8">MECHANIC_ROOT</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada3f5a5b15800c7e6d11e1c1482fc53f96">MECHANIC_FEAR</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada94162e45f3c41a104fa71a593b39a926">MECHANIC_SLEEP</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada655f913cba9a74b4321f72f001ca174e">MECHANIC_CHARM</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adad9aacefd364ef80ddcf9f0caaf7bc930">MECHANIC_SAPPED</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adaedfaf974478ae49d77b1d7ffd7bbafff">MECHANIC_HORROR</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada9dd2384218d039987359150d147d3263">MECHANIC_POLYMORPH</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974">MECHANIC_DISORIENTED</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada857bb0c20ddc48863218d8987f4593a5">MECHANIC_FREEZE</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada76d854166bbc1fbebd24e0899d712be8">MECHANIC_TURN</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;                    aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799afdf00dd634aaa25017ad329f58bd6cfd">SPELL_AURA_MOD_STUN</a>);</div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;                    aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ab3987db9e154ae9a2086efb43e5af610">SPELL_AURA_MOD_DECREASE_SPEED</a>);</div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;                    aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a833a8773139c4fdffb24499f28e98c63">SPELL_AURA_MOD_ROOT</a>);</div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;                    aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799adaa58e2c604243da285d64f4a95b42f7">SPELL_AURA_MOD_CONFUSE</a>);</div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;                    aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a44cf043145f5a78c5a4e36ecff8a034d">SPELL_AURA_MOD_FEAR</a>);</div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;                }</div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;            }</div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;        <span class="keywordflow">case</span> 1557:</div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;            {</div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>() == 64187)</div>
<div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;                {</div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;                    mechanic_immunity_list = (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>);</div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;                    aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799afdf00dd634aaa25017ad329f58bd6cfd">SPELL_AURA_MOD_STUN</a>);</div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;                }</div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;                {</div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;                    mechanic_immunity_list = (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada8edb909788821535a07afdb9bf8957a8">MECHANIC_ROOT</a>)</div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;                                             | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada3f5a5b15800c7e6d11e1c1482fc53f96">MECHANIC_FEAR</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>)</div>
<div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;                                             | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada94162e45f3c41a104fa71a593b39a926">MECHANIC_SLEEP</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada655f913cba9a74b4321f72f001ca174e">MECHANIC_CHARM</a>)</div>
<div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;                                             | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adad9aacefd364ef80ddcf9f0caaf7bc930">MECHANIC_SAPPED</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adaedfaf974478ae49d77b1d7ffd7bbafff">MECHANIC_HORROR</a>)</div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;                                             | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada9dd2384218d039987359150d147d3263">MECHANIC_POLYMORPH</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974">MECHANIC_DISORIENTED</a>)</div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;                                             | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada857bb0c20ddc48863218d8987f4593a5">MECHANIC_FREEZE</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada76d854166bbc1fbebd24e0899d712be8">MECHANIC_TURN</a>);</div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160; </div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada8edb909788821535a07afdb9bf8957a8">MECHANIC_ROOT</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada3f5a5b15800c7e6d11e1c1482fc53f96">MECHANIC_FEAR</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada94162e45f3c41a104fa71a593b39a926">MECHANIC_SLEEP</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada655f913cba9a74b4321f72f001ca174e">MECHANIC_CHARM</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adad9aacefd364ef80ddcf9f0caaf7bc930">MECHANIC_SAPPED</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adaedfaf974478ae49d77b1d7ffd7bbafff">MECHANIC_HORROR</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada9dd2384218d039987359150d147d3263">MECHANIC_POLYMORPH</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974">MECHANIC_DISORIENTED</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada857bb0c20ddc48863218d8987f4593a5">MECHANIC_FREEZE</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada76d854166bbc1fbebd24e0899d712be8">MECHANIC_TURN</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;                    aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799afdf00dd634aaa25017ad329f58bd6cfd">SPELL_AURA_MOD_STUN</a>);</div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;                    aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ab3987db9e154ae9a2086efb43e5af610">SPELL_AURA_MOD_DECREASE_SPEED</a>);</div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;                    aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a833a8773139c4fdffb24499f28e98c63">SPELL_AURA_MOD_ROOT</a>);</div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;                    aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799adaa58e2c604243da285d64f4a95b42f7">SPELL_AURA_MOD_CONFUSE</a>);</div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;                    aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a44cf043145f5a78c5a4e36ecff8a034d">SPELL_AURA_MOD_FEAR</a>);</div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;                }</div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;            }</div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;        <span class="keywordflow">case</span> 1614:</div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;        <span class="keywordflow">case</span> 1694:</div>
<div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;            {</div>
<div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9a5da3c36e87dda6bd23b3c55edd0830d2">IMMUNITY_EFFECT</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a292c893150c454dd75628b719db1fe97a7b3799697914dfaca12e793546900d61">SPELL_EFFECT_ATTACK_ME</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;                aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a9a82bcb2293394d7dc4a105cc52f8aa1">SPELL_AURA_MOD_TAUNT</a>);</div>
<div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;            }</div>
<div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;        <span class="keywordflow">case</span> 1630:</div>
<div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;            {</div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>())</div>
<div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;                {</div>
<div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9a5da3c36e87dda6bd23b3c55edd0830d2">IMMUNITY_EFFECT</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a292c893150c454dd75628b719db1fe97a7b3799697914dfaca12e793546900d61">SPELL_EFFECT_ATTACK_ME</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;                    aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a9a82bcb2293394d7dc4a105cc52f8aa1">SPELL_AURA_MOD_TAUNT</a>);</div>
<div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;                }</div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;                {</div>
<div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;                    mechanic_immunity_list = (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada8edb909788821535a07afdb9bf8957a8">MECHANIC_ROOT</a>)</div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;                                             | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada3f5a5b15800c7e6d11e1c1482fc53f96">MECHANIC_FEAR</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>)</div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;                                             | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada94162e45f3c41a104fa71a593b39a926">MECHANIC_SLEEP</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada655f913cba9a74b4321f72f001ca174e">MECHANIC_CHARM</a>)</div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;                                             | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adad9aacefd364ef80ddcf9f0caaf7bc930">MECHANIC_SAPPED</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adaedfaf974478ae49d77b1d7ffd7bbafff">MECHANIC_HORROR</a>)</div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;                                             | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada9dd2384218d039987359150d147d3263">MECHANIC_POLYMORPH</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974">MECHANIC_DISORIENTED</a>)</div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;                                             | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada857bb0c20ddc48863218d8987f4593a5">MECHANIC_FREEZE</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada76d854166bbc1fbebd24e0899d712be8">MECHANIC_TURN</a>);</div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160; </div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada8edb909788821535a07afdb9bf8957a8">MECHANIC_ROOT</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada3f5a5b15800c7e6d11e1c1482fc53f96">MECHANIC_FEAR</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada94162e45f3c41a104fa71a593b39a926">MECHANIC_SLEEP</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada655f913cba9a74b4321f72f001ca174e">MECHANIC_CHARM</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adad9aacefd364ef80ddcf9f0caaf7bc930">MECHANIC_SAPPED</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adaedfaf974478ae49d77b1d7ffd7bbafff">MECHANIC_HORROR</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada9dd2384218d039987359150d147d3263">MECHANIC_POLYMORPH</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974">MECHANIC_DISORIENTED</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada857bb0c20ddc48863218d8987f4593a5">MECHANIC_FREEZE</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada76d854166bbc1fbebd24e0899d712be8">MECHANIC_TURN</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;                    aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799afdf00dd634aaa25017ad329f58bd6cfd">SPELL_AURA_MOD_STUN</a>);</div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;                    aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ab3987db9e154ae9a2086efb43e5af610">SPELL_AURA_MOD_DECREASE_SPEED</a>);</div>
<div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;                    aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a833a8773139c4fdffb24499f28e98c63">SPELL_AURA_MOD_ROOT</a>);</div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;                    aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799adaa58e2c604243da285d64f4a95b42f7">SPELL_AURA_MOD_CONFUSE</a>);</div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;                    aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a44cf043145f5a78c5a4e36ecff8a034d">SPELL_AURA_MOD_FEAR</a>);</div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;                }</div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;            }</div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;        <span class="keywordflow">case</span> 477:</div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;        <span class="keywordflow">case</span> 1733:</div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;        <span class="keywordflow">case</span> 1632:</div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;            {</div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>())</div>
<div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;                {</div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;                    mechanic_immunity_list = (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada8edb909788821535a07afdb9bf8957a8">MECHANIC_ROOT</a>)</div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;                                             | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada3f5a5b15800c7e6d11e1c1482fc53f96">MECHANIC_FEAR</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>)</div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;                                             | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada94162e45f3c41a104fa71a593b39a926">MECHANIC_SLEEP</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada655f913cba9a74b4321f72f001ca174e">MECHANIC_CHARM</a>)</div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;                                             | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adad9aacefd364ef80ddcf9f0caaf7bc930">MECHANIC_SAPPED</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adaedfaf974478ae49d77b1d7ffd7bbafff">MECHANIC_HORROR</a>)</div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;                                             | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada9dd2384218d039987359150d147d3263">MECHANIC_POLYMORPH</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974">MECHANIC_DISORIENTED</a>)</div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;                                             | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada857bb0c20ddc48863218d8987f4593a5">MECHANIC_FREEZE</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada76d854166bbc1fbebd24e0899d712be8">MECHANIC_TURN</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adaa823d24ef2d29559df9cd8de9f0c071a">MECHANIC_BANISH</a>);</div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160; </div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada8edb909788821535a07afdb9bf8957a8">MECHANIC_ROOT</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada3f5a5b15800c7e6d11e1c1482fc53f96">MECHANIC_FEAR</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada94162e45f3c41a104fa71a593b39a926">MECHANIC_SLEEP</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada655f913cba9a74b4321f72f001ca174e">MECHANIC_CHARM</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adad9aacefd364ef80ddcf9f0caaf7bc930">MECHANIC_SAPPED</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adaedfaf974478ae49d77b1d7ffd7bbafff">MECHANIC_HORROR</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada9dd2384218d039987359150d147d3263">MECHANIC_POLYMORPH</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974">MECHANIC_DISORIENTED</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada857bb0c20ddc48863218d8987f4593a5">MECHANIC_FREEZE</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada76d854166bbc1fbebd24e0899d712be8">MECHANIC_TURN</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adaa823d24ef2d29559df9cd8de9f0c071a">MECHANIC_BANISH</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9a5da3c36e87dda6bd23b3c55edd0830d2">IMMUNITY_EFFECT</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a292c893150c454dd75628b719db1fe97aba465dfeb8a8eb233b90d6beb5414b8f">SPELL_EFFECT_KNOCK_BACK</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9a5da3c36e87dda6bd23b3c55edd0830d2">IMMUNITY_EFFECT</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a292c893150c454dd75628b719db1fe97a92566a4e474f18e338723ded05f57ff5">SPELL_EFFECT_KNOCK_BACK_DEST</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;                    aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799afdf00dd634aaa25017ad329f58bd6cfd">SPELL_AURA_MOD_STUN</a>);</div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160; </div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;                    aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ab3987db9e154ae9a2086efb43e5af610">SPELL_AURA_MOD_DECREASE_SPEED</a>);</div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;                    aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a833a8773139c4fdffb24499f28e98c63">SPELL_AURA_MOD_ROOT</a>);</div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;                    aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799adaa58e2c604243da285d64f4a95b42f7">SPELL_AURA_MOD_CONFUSE</a>);</div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;                    aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a44cf043145f5a78c5a4e36ecff8a034d">SPELL_AURA_MOD_FEAR</a>);</div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;                }</div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;            }</div>
<div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;        <span class="keywordflow">case</span> 878:</div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;            {</div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() == 1)</div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;                {</div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;                    mechanic_immunity_list = (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>)</div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;                                             | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974">MECHANIC_DISORIENTED</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada857bb0c20ddc48863218d8987f4593a5">MECHANIC_FREEZE</a>);</div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160; </div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974">MECHANIC_DISORIENTED</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada857bb0c20ddc48863218d8987f4593a5">MECHANIC_FREEZE</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;                    aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799afdf00dd634aaa25017ad329f58bd6cfd">SPELL_AURA_MOD_STUN</a>);</div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;                    aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ab3987db9e154ae9a2086efb43e5af610">SPELL_AURA_MOD_DECREASE_SPEED</a>);</div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;                }</div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;            }</div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;    }</div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160; </div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;    <span class="keywordflow">if</span> (aura_immunity_list.empty())</div>
<div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;    {</div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;        <span class="comment">// Roots, OK</span></div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; 0))</div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;        {</div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;            mechanic_immunity_list = (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>);</div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160; </div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;            aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a833a8773139c4fdffb24499f28e98c63">SPELL_AURA_MOD_ROOT</a>);</div>
<div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;        }</div>
<div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;        <span class="comment">// Taunt, OK</span></div>
<div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; 1))</div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;        {</div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;            aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a9a82bcb2293394d7dc4a105cc52f8aa1">SPELL_AURA_MOD_TAUNT</a>);</div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;        }</div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;        <span class="comment">// Crowd-Control auras?</span></div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; 2))</div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;        {</div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;            mechanic_immunity_list = (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada9dd2384218d039987359150d147d3263">MECHANIC_POLYMORPH</a>) | (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974">MECHANIC_DISORIENTED</a>);</div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160; </div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada9dd2384218d039987359150d147d3263">MECHANIC_POLYMORPH</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974">MECHANIC_DISORIENTED</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;            aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799adaa58e2c604243da285d64f4a95b42f7">SPELL_AURA_MOD_CONFUSE</a>);</div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;        }</div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;        <span class="comment">// Interrupt, OK</span></div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; 3))</div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;        {</div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;            mechanic_immunity_list = (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada88ed11eafe3064e81a7694bea883af79">MECHANIC_INTERRUPT</a>);</div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160; </div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada88ed11eafe3064e81a7694bea883af79">MECHANIC_INTERRUPT</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;        }</div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;        <span class="comment">// Transform?</span></div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; 4))</div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;        {</div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;            aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ab4e25ba6068fba0c5d7c5ac8adbbf8fa">SPELL_AURA_TRANSFORM</a>);</div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;        }</div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;        <span class="comment">// Stun auras breakable by damage (Incapacitate effects), OK</span></div>
<div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; 5))</div>
<div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;        {</div>
<div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;            mechanic_immunity_list = (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada5bd5524686a4163521296cb159b22363">MECHANIC_KNOCKOUT</a>);</div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160; </div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada5bd5524686a4163521296cb159b22363">MECHANIC_KNOCKOUT</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;        }</div>
<div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;        <span class="comment">// // Slowing effects</span></div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; 6))</div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;        {</div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;            mechanic_immunity_list = (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>);</div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160; </div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;            aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ab3987db9e154ae9a2086efb43e5af610">SPELL_AURA_MOD_DECREASE_SPEED</a>);</div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;        }</div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;        <span class="comment">// Charm auras?, 90%</span></div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; 7)))</div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;        {</div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;            mechanic_immunity_list = (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada655f913cba9a74b4321f72f001ca174e">MECHANIC_CHARM</a>);</div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160; </div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada655f913cba9a74b4321f72f001ca174e">MECHANIC_CHARM</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;            aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a7b5d0b48f9a7e84bf7a896602e8c66b9">SPELL_AURA_MOD_CHARM</a>);</div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;            aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799adc30e3257d95c2736a98331a53766eea">SPELL_AURA_MOD_POSSESS</a>);</div>
<div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;        }</div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;        <span class="comment">// UNK</span></div>
<div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;        <span class="comment">// if ((GetMiscValue() &amp; (1 &lt;&lt; 8)))</span></div>
<div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;        <span class="comment">// {</span></div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;        <span class="comment">// }</span></div>
<div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;        <span class="comment">// Fear, OK</span></div>
<div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; 9))</div>
<div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;        {</div>
<div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;            mechanic_immunity_list = (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada3f5a5b15800c7e6d11e1c1482fc53f96">MECHANIC_FEAR</a>);</div>
<div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160; </div>
<div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada3f5a5b15800c7e6d11e1c1482fc53f96">MECHANIC_FEAR</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;            aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a44cf043145f5a78c5a4e36ecff8a034d">SPELL_AURA_MOD_FEAR</a>);</div>
<div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;        }</div>
<div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;        <span class="comment">// Stuns, OK</span></div>
<div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; 10))</div>
<div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;        {</div>
<div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;            mechanic_immunity_list = (1 &lt;&lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>);</div>
<div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160; </div>
<div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;            aura_immunity_list.push_back(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799afdf00dd634aaa25017ad329f58bd6cfd">SPELL_AURA_MOD_STUN</a>);</div>
<div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;        }</div>
<div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;    }</div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160; </div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;    <span class="comment">// apply immunities</span></div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;    <span class="keywordflow">for</span> (std::list &lt;AuraType&gt;::iterator iter = aura_immunity_list.begin(); iter != aura_immunity_list.end(); ++iter)</div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9a1c2e514db062426deb4673fb86e3459e">IMMUNITY_STATE</a>, *iter, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160; </div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;    <span class="comment">// Patch 3.0.3 Bladestorm now breaks all snares and roots on the warrior when activated.</span></div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>() == 46924)</div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;    {</div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;        {</div>
<div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#ae7f942c448b14628617639978bf6bd00">resetAttackTimer</a>();</div>
<div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#ae7f942c448b14628617639978bf6bd00">resetAttackTimer</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa052681ec165e5b5e3edcf2089607ae67">OFF_ATTACK</a>);</div>
<div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;        }</div>
<div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160; </div>
<div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;        <span class="comment">// Knockback and hex</span></div>
<div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a91d505a1e789c6ea6a338f3a3c85b6b9a5da3c36e87dda6bd23b3c55edd0830d2">IMMUNITY_EFFECT</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a292c893150c454dd75628b719db1fe97aba465dfeb8a8eb233b90d6beb5414b8f">SPELL_EFFECT_KNOCK_BACK</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;    }</div>
<div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160; </div>
<div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a> &amp;&amp; <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a638f8f550e23b2e3180b481bb3f38076ab2ba4cd294111dc378e33055074250be">SPELL_ATTR1_IMMUNITY_PURGES_EFFECT</a>))</div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;    {</div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1914cb06489a11617ad9f8c9e343876b">RemoveAurasWithMechanic</a>(mechanic_immunity_list, <a class="code" href="../../d5/d32/_unit_8h.html#a9a4f502870485ba32e759067c9adca94a51dd2d6d8e90e4ea4113c02fb772b80c">AURA_REMOVE_BY_DEFAULT</a>, <a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;        <span class="keywordflow">for</span> (std::list &lt;AuraType&gt;::iterator iter = aura_immunity_list.begin(); iter != aura_immunity_list.end(); ++iter)</div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#ad6df47a81f5f5f147e68211ee935b398">RemoveAurasByType</a>(*iter);</div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;    }</div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_a292c893150c454dd75628b719db1fe97a7b3799697914dfaca12e793546900d61"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a292c893150c454dd75628b719db1fe97a7b3799697914dfaca12e793546900d61">SPELL_EFFECT_ATTACK_ME</a></div><div class="ttdeci">@ SPELL_EFFECT_ATTACK_ME</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00864">SharedDefines.h:864</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a292c893150c454dd75628b719db1fe97a92566a4e474f18e338723ded05f57ff5"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a292c893150c454dd75628b719db1fe97a92566a4e474f18e338723ded05f57ff5">SPELL_EFFECT_KNOCK_BACK_DEST</a></div><div class="ttdeci">@ SPELL_EFFECT_KNOCK_BACK_DEST</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00894">SharedDefines.h:894</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a292c893150c454dd75628b719db1fe97aba465dfeb8a8eb233b90d6beb5414b8f"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a292c893150c454dd75628b719db1fe97aba465dfeb8a8eb233b90d6beb5414b8f">SPELL_EFFECT_KNOCK_BACK</a></div><div class="ttdeci">@ SPELL_EFFECT_KNOCK_BACK</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00848">SharedDefines.h:848</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a8fe6a763d72d84ded23cec01c772f7ada88ed11eafe3064e81a7694bea883af79"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a8fe6a763d72d84ded23cec01c772f7ada88ed11eafe3064e81a7694bea883af79">MECHANIC_INTERRUPT</a></div><div class="ttdeci">@ MECHANIC_INTERRUPT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01323">SharedDefines.h:1323</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a7b5d0b48f9a7e84bf7a896602e8c66b9"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a7b5d0b48f9a7e84bf7a896602e8c66b9">SPELL_AURA_MOD_CHARM</a></div><div class="ttdeci">@ SPELL_AURA_MOD_CHARM</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00069">SpellAuraDefines.h:69</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a9a82bcb2293394d7dc4a105cc52f8aa1"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a9a82bcb2293394d7dc4a105cc52f8aa1">SPELL_AURA_MOD_TAUNT</a></div><div class="ttdeci">@ SPELL_AURA_MOD_TAUNT</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00074">SpellAuraDefines.h:74</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799ab3987db9e154ae9a2086efb43e5af610"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ab3987db9e154ae9a2086efb43e5af610">SPELL_AURA_MOD_DECREASE_SPEED</a></div><div class="ttdeci">@ SPELL_AURA_MOD_DECREASE_SPEED</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00096">SpellAuraDefines.h:96</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799adc30e3257d95c2736a98331a53766eea"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799adc30e3257d95c2736a98331a53766eea">SPELL_AURA_MOD_POSSESS</a></div><div class="ttdeci">@ SPELL_AURA_MOD_POSSESS</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00065">SpellAuraDefines.h:65</a></div></div>
<div class="ttc" id="aclass_unit_html_ae7f942c448b14628617639978bf6bd00"><div class="ttname"><a href="../../da/db7/class_unit.html#ae7f942c448b14628617639978bf6bd00">Unit::resetAttackTimer</a></div><div class="ttdeci">void resetAttackTimer(WeaponAttackType type=BASE_ATTACK)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l00619">Unit.cpp:619</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l12604">Unit::ApplySpellImmune()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00387">AURA_REMOVE_BY_DEFAULT</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">GetId()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00408">SpellInfo::HasAttribute()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01366">IMMUNITY_EFFECT</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01371">IMMUNITY_MECHANIC</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01367">IMMUNITY_STATE</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01315">MECHANIC_BANISH</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01298">MECHANIC_CHARM</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01299">MECHANIC_DISORIENTED</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01302">MECHANIC_FEAR</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01310">MECHANIC_FREEZE</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01321">MECHANIC_HORROR</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01323">MECHANIC_INTERRUPT</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01311">MECHANIC_KNOCKOUT</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01314">MECHANIC_POLYMORPH</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01304">MECHANIC_ROOT</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01327">MECHANIC_SAPPED</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01307">MECHANIC_SLEEP</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01308">MECHANIC_SNARE</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01309">MECHANIC_STUN</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01320">MECHANIC_TURN</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00556">OFF_ATTACK</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04610">Unit::RemoveAurasByType()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04752">Unit::RemoveAurasWithMechanic()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l00619">Unit::resetAttackTimer()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00406">SPELL_ATTR1_IMMUNITY_PURGES_EFFECT</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00069">SPELL_AURA_MOD_CHARM</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00068">SPELL_AURA_MOD_CONFUSE</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00096">SPELL_AURA_MOD_DECREASE_SPEED</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00070">SPELL_AURA_MOD_FEAR</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00065">SPELL_AURA_MOD_POSSESS</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00089">SPELL_AURA_MOD_ROOT</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00075">SPELL_AURA_MOD_STUN</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00074">SPELL_AURA_MOD_TAUNT</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00119">SPELL_AURA_TRANSFORM</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00864">SPELL_EFFECT_ATTACK_ME</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00848">SPELL_EFFECT_KNOCK_BACK</a>, and <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00894">SPELL_EFFECT_KNOCK_BACK_DEST</a>.</p>

</div>
</div>
<a id="ae72fd00fd9b6b1f1d19e8f5e3d62c6ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae72fd00fd9b6b1f1d19e8f5e3d62c6ee">&#9670;&nbsp;</a></span>HandleModStealth()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModStealth </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01607">1607</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;{</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a45b308d91feffe9ebae9560b649b193b">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160; </div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    <a class="code" href="../../df/d0b/_shared_defines_8h.html#a266a631efc8ceb2255ea6886537215c8">StealthType</a> <a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a> = <a class="code" href="../../df/d0b/_shared_defines_8h.html#a266a631efc8ceb2255ea6886537215c8">StealthType</a>(<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160; </div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    {</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;        target-&gt;<a class="code" href="../../db/df7/class_world_object.html#abfd070bd8d8a25a562f5070948edf7b8">m_stealth</a>.<a class="code" href="../../d0/dbe/class_flagged_values_array32.html#a273ab3607b23881628eb0c5d6a4da288">AddFlag</a>(<a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>);</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;        target-&gt;<a class="code" href="../../db/df7/class_world_object.html#abfd070bd8d8a25a562f5070948edf7b8">m_stealth</a>.<a class="code" href="../../d0/dbe/class_flagged_values_array32.html#aacca1261b2a22525e5fd40e5f479aa06">AddValue</a>(<a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>, <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160; </div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#af2a18ad150f433db1ad8d63b3c1f98cc">SetStandFlags</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a88cad5664df249863d4ebed6162a2343ae886d5d056abd0ef34207cb400c54bca">UNIT_STAND_FLAGS_CREEP</a>);</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;            target-&gt;<a class="code" href="../../d8/d83/class_object.html#afe65b1ab32dbcd51890b754fb8b5e1b0">SetByteFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a6094e668574a870242f146ac00369951">PLAYER_FIELD_BYTES2</a>, 3, <a class="code" href="../../d1/d39/_player_8h.html#a29b0496d910c02e5cc98d349c4427474a1c01d4f3e3f54b6e479482ce3f3fc9dd">PLAYER_FIELD_BYTE2_STEALTH</a>);</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160; </div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;        <span class="comment">// interrupt autoshot</span></div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a6a942f7bfc8e8ea98ab52a0172970a35">GetCurrentSpell</a>(<a class="code" href="../../d5/d32/_unit_8h.html#ab791040bd6d685b1fd2cfd12c96d0a1faf4d9017fa01b68842e61b948323e93c1">CURRENT_AUTOREPEAT_SPELL</a>))</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;        {</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#ab9349116923cba29e3de802e86c3e2ec">FinishSpell</a>(<a class="code" href="../../d5/d32/_unit_8h.html#ab791040bd6d685b1fd2cfd12c96d0a1faf4d9017fa01b68842e61b948323e93c1">CURRENT_AUTOREPEAT_SPELL</a>);</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;            target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a2f876e332a71e68aa8fd08863ad3623c">SendAutoRepeatCancel</a>(target);</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;        }</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    }</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    {</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;        target-&gt;<a class="code" href="../../db/df7/class_world_object.html#abfd070bd8d8a25a562f5070948edf7b8">m_stealth</a>.<a class="code" href="../../d0/dbe/class_flagged_values_array32.html#aacca1261b2a22525e5fd40e5f479aa06">AddValue</a>(<a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>, -<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160; </div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;        <span class="keywordflow">if</span> (!target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799aeb8f5c79c441187541514b36a00918a1">SPELL_AURA_MOD_STEALTH</a>)) <span class="comment">// if last SPELL_AURA_MOD_STEALTH</span></div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;        {</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;            target-&gt;<a class="code" href="../../db/df7/class_world_object.html#abfd070bd8d8a25a562f5070948edf7b8">m_stealth</a>.<a class="code" href="../../d0/dbe/class_flagged_values_array32.html#a3a674b2a7b8d5874f7210372b3e92123">DelFlag</a>(<a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>);</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160; </div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a90a81ab485d5ec49b878d24ff0d0d3f7">RemoveStandFlags</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a88cad5664df249863d4ebed6162a2343ae886d5d056abd0ef34207cb400c54bca">UNIT_STAND_FLAGS_CREEP</a>);</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;            <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;                target-&gt;<a class="code" href="../../d8/d83/class_object.html#acef75a7f84673fda790861bd1b0b68b7">RemoveByteFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a6094e668574a870242f146ac00369951">PLAYER_FIELD_BYTES2</a>, 3, <a class="code" href="../../d1/d39/_player_8h.html#a29b0496d910c02e5cc98d349c4427474a1c01d4f3e3f54b6e479482ce3f3fc9dd">PLAYER_FIELD_BYTE2_STEALTH</a>);</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;        }</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    }</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160; </div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    <span class="comment">// call functions which may have additional effects after chainging state of unit</span></div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a> &amp;&amp; (mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    {</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;        <span class="comment">// drop flag at stealth in bg</span></div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a2be941a27d14de6da7676c6fdbd37bb9">RemoveAurasWithInterruptFlags</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a0709fc3ab848cf1b8b4853813b8fe011a61b4509cc6643cd80da8b6c065d45f4a">AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</a>);</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    }</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160; </div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5b2b731101a2c33063cef5c59e595249">UpdateObjectVisibility</a>(target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a> || target-&gt;<a class="code" href="../../da/db7/class_unit.html#ac0f51b4cac0b9ad35347a50a91826785">GetOwnerGUID</a>().<a class="code" href="../../d8/d03/class_object_guid.html#a676c61adb79a8be696a771a116253ee1">IsPlayer</a>() || target-&gt;<a class="code" href="../../db/df7/class_world_object.html#a76c507a1b3adcebf2732572bc6b67fe0">GetMap</a>()-&gt;<a class="code" href="../../dd/d11/class_map.html#aae3a929aefb05046ef304ffba10aae71">Instanceable</a>(), <span class="keyword">true</span>);</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a76e5156ec045582923f6d1541b66367b">bRequestForcedVisibilityUpdate</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;}</div>
<div class="ttc" id="a_player_8h_html_a29b0496d910c02e5cc98d349c4427474a1c01d4f3e3f54b6e479482ce3f3fc9dd"><div class="ttname"><a href="../../d1/d39/_player_8h.html#a29b0496d910c02e5cc98d349c4427474a1c01d4f3e3f54b6e479482ce3f3fc9dd">PLAYER_FIELD_BYTE2_STEALTH</a></div><div class="ttdeci">@ PLAYER_FIELD_BYTE2_STEALTH</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l00549">Player.h:549</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a266a631efc8ceb2255ea6886537215c8"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a266a631efc8ceb2255ea6886537215c8">StealthType</a></div><div class="ttdeci">StealthType</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01217">SharedDefines.h:1218</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799aeb8f5c79c441187541514b36a00918a1"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799aeb8f5c79c441187541514b36a00918a1">SPELL_AURA_MOD_STEALTH</a></div><div class="ttdeci">@ SPELL_AURA_MOD_STEALTH</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00079">SpellAuraDefines.h:79</a></div></div>
<div class="ttc" id="a_unit_8h_html_a88cad5664df249863d4ebed6162a2343ae886d5d056abd0ef34207cb400c54bca"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a88cad5664df249863d4ebed6162a2343ae886d5d056abd0ef34207cb400c54bca">UNIT_STAND_FLAGS_CREEP</a></div><div class="ttdeci">@ UNIT_STAND_FLAGS_CREEP</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00178">Unit.h:178</a></div></div>
<div class="ttc" id="aclass_unit_html_a90a81ab485d5ec49b878d24ff0d0d3f7"><div class="ttname"><a href="../../da/db7/class_unit.html#a90a81ab485d5ec49b878d24ff0d0d3f7">Unit::RemoveStandFlags</a></div><div class="ttdeci">void RemoveStandFlags(uint8 flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01646">Unit.h:1646</a></div></div>
<div class="ttc" id="aclass_unit_html_af2a18ad150f433db1ad8d63b3c1f98cc"><div class="ttname"><a href="../../da/db7/class_unit.html#af2a18ad150f433db1ad8d63b3c1f98cc">Unit::SetStandFlags</a></div><div class="ttdeci">void SetStandFlags(uint8 flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01645">Unit.h:1645</a></div></div>
<div class="ttc" id="aclass_world_object_html_abfd070bd8d8a25a562f5070948edf7b8"><div class="ttname"><a href="../../db/df7/class_world_object.html#abfd070bd8d8a25a562f5070948edf7b8">WorldObject::m_stealth</a></div><div class="ttdeci">FlaggedValuesArray32&lt; int32, uint32, StealthType, TOTAL_STEALTH_TYPES &gt; m_stealth</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d30/_object_8h_source.html#l00786">Object.h:786</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d30/_object_8h_source.html#l00632">FlaggedValuesArray32&lt; T_VALUES, T_FLAGS, FLAG_TYPE, ARRAY_SIZE &gt;::AddFlag()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00637">FlaggedValuesArray32&lt; T_VALUES, T_FLAGS, FLAG_TYPE, ARRAY_SIZE &gt;::AddValue()</a>, <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00050">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00072">AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02482">Unit::bRequestForcedVisibilityUpdate</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01109">CURRENT_AUTOREPEAT_SPELL</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00633">FlaggedValuesArray32&lt; T_VALUES, T_FLAGS, FLAG_TYPE, ARRAY_SIZE &gt;::DelFlag()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l03614">Unit::FinishSpell()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02143">Unit::GetCurrentSpell()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00800">WorldObject::GetMap()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01894">Unit::GetOwnerGUID()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05194">Unit::HasAuraType()</a>, <a class="el" href="../../d3/d63/_map_8h_source.html#l00433">Map::Instanceable()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00170">ObjectGuid::IsPlayer()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00786">WorldObject::m_stealth</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l00549">PLAYER_FIELD_BYTE2_STEALTH</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00378">PLAYER_FIELD_BYTES2</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04681">Unit::RemoveAurasWithInterruptFlags()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00921">Object::RemoveByteFlag()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01646">Unit::RemoveStandFlags()</a>, <a class="el" href="../../d2/d7b/_player_misc_8cpp_source.html#l00150">Player::SendAutoRepeatCancel()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00902">Object::SetByteFlag()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01645">Unit::SetStandFlags()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00079">SPELL_AURA_MOD_STEALTH</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00178">UNIT_STAND_FLAGS_CREEP</a>, and <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l18229">Unit::UpdateObjectVisibility()</a>.</p>

</div>
</div>
<a id="aa95ea36217eb2e120bb22fa8fe9c82e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa95ea36217eb2e120bb22fa8fe9c82e2">&#9670;&nbsp;</a></span>HandleModStealthDetect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModStealthDetect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01582">1582</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;{</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>))</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160; </div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    <a class="code" href="../../df/d0b/_shared_defines_8h.html#a266a631efc8ceb2255ea6886537215c8">StealthType</a> <a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a> = <a class="code" href="../../df/d0b/_shared_defines_8h.html#a266a631efc8ceb2255ea6886537215c8">StealthType</a>(<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160; </div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    {</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;        target-&gt;<a class="code" href="../../db/df7/class_world_object.html#aa4dc29f8a2f18513bcf41c90f8cc43ba">m_stealthDetect</a>.<a class="code" href="../../d0/dbe/class_flagged_values_array32.html#a273ab3607b23881628eb0c5d6a4da288">AddFlag</a>(<a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>);</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;        target-&gt;<a class="code" href="../../db/df7/class_world_object.html#aa4dc29f8a2f18513bcf41c90f8cc43ba">m_stealthDetect</a>.<a class="code" href="../../d0/dbe/class_flagged_values_array32.html#aacca1261b2a22525e5fd40e5f479aa06">AddValue</a>(<a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>, <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    }</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;    {</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;        <span class="keywordflow">if</span> (!target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a522afc0b32950f4b4cc054a9a18f8a1e">SPELL_AURA_MOD_STEALTH_DETECT</a>))</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;            target-&gt;<a class="code" href="../../db/df7/class_world_object.html#aa4dc29f8a2f18513bcf41c90f8cc43ba">m_stealthDetect</a>.<a class="code" href="../../d0/dbe/class_flagged_values_array32.html#a3a674b2a7b8d5874f7210372b3e92123">DelFlag</a>(<a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>);</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160; </div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;        target-&gt;<a class="code" href="../../db/df7/class_world_object.html#aa4dc29f8a2f18513bcf41c90f8cc43ba">m_stealthDetect</a>.<a class="code" href="../../d0/dbe/class_flagged_values_array32.html#aacca1261b2a22525e5fd40e5f479aa06">AddValue</a>(<a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>, -<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    }</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160; </div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;    <span class="comment">// call functions which may have additional effects after chainging state of unit</span></div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5b2b731101a2c33063cef5c59e595249">UpdateObjectVisibility</a>(target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a> || target-&gt;<a class="code" href="../../da/db7/class_unit.html#ac0f51b4cac0b9ad35347a50a91826785">GetOwnerGUID</a>().<a class="code" href="../../d8/d03/class_object_guid.html#a676c61adb79a8be696a771a116253ee1">IsPlayer</a>());</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;}</div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a522afc0b32950f4b4cc054a9a18f8a1e"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a522afc0b32950f4b4cc054a9a18f8a1e">SPELL_AURA_MOD_STEALTH_DETECT</a></div><div class="ttdeci">@ SPELL_AURA_MOD_STEALTH_DETECT</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00080">SpellAuraDefines.h:80</a></div></div>
<div class="ttc" id="aclass_world_object_html_aa4dc29f8a2f18513bcf41c90f8cc43ba"><div class="ttname"><a href="../../db/df7/class_world_object.html#aa4dc29f8a2f18513bcf41c90f8cc43ba">WorldObject::m_stealthDetect</a></div><div class="ttdeci">FlaggedValuesArray32&lt; int32, uint32, StealthType, TOTAL_STEALTH_TYPES &gt; m_stealthDetect</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d30/_object_8h_source.html#l00787">Object.h:787</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d30/_object_8h_source.html#l00632">FlaggedValuesArray32&lt; T_VALUES, T_FLAGS, FLAG_TYPE, ARRAY_SIZE &gt;::AddFlag()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00637">FlaggedValuesArray32&lt; T_VALUES, T_FLAGS, FLAG_TYPE, ARRAY_SIZE &gt;::AddValue()</a>, <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00633">FlaggedValuesArray32&lt; T_VALUES, T_FLAGS, FLAG_TYPE, ARRAY_SIZE &gt;::DelFlag()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01894">Unit::GetOwnerGUID()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05194">Unit::HasAuraType()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00170">ObjectGuid::IsPlayer()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00787">WorldObject::m_stealthDetect</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00080">SPELL_AURA_MOD_STEALTH_DETECT</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l18229">Unit::UpdateObjectVisibility()</a>.</p>

</div>
</div>
<a id="a9e7dc7c97738c4404913cab0cae09027"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e7dc7c97738c4404913cab0cae09027">&#9670;&nbsp;</a></span>HandleModStealthLevel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModStealthLevel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01656">1656</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;{</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>))</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160; </div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    <a class="code" href="../../df/d0b/_shared_defines_8h.html#a266a631efc8ceb2255ea6886537215c8">StealthType</a> <a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a> = <a class="code" href="../../df/d0b/_shared_defines_8h.html#a266a631efc8ceb2255ea6886537215c8">StealthType</a>(<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160; </div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;        target-&gt;<a class="code" href="../../db/df7/class_world_object.html#abfd070bd8d8a25a562f5070948edf7b8">m_stealth</a>.<a class="code" href="../../d0/dbe/class_flagged_values_array32.html#aacca1261b2a22525e5fd40e5f479aa06">AddValue</a>(<a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>, <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;        target-&gt;<a class="code" href="../../db/df7/class_world_object.html#abfd070bd8d8a25a562f5070948edf7b8">m_stealth</a>.<a class="code" href="../../d0/dbe/class_flagged_values_array32.html#aacca1261b2a22525e5fd40e5f479aa06">AddValue</a>(<a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>, -<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160; </div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;    <span class="comment">// call functions which may have additional effects after chainging state of unit</span></div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5b2b731101a2c33063cef5c59e595249">UpdateObjectVisibility</a>(target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a> || target-&gt;<a class="code" href="../../da/db7/class_unit.html#ac0f51b4cac0b9ad35347a50a91826785">GetOwnerGUID</a>().<a class="code" href="../../d8/d03/class_object_guid.html#a676c61adb79a8be696a771a116253ee1">IsPlayer</a>());</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d30/_object_8h_source.html#l00637">FlaggedValuesArray32&lt; T_VALUES, T_FLAGS, FLAG_TYPE, ARRAY_SIZE &gt;::AddValue()</a>, <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01894">Unit::GetOwnerGUID()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00170">ObjectGuid::IsPlayer()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00786">WorldObject::m_stealth</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l18229">Unit::UpdateObjectVisibility()</a>.</p>

</div>
</div>
<a id="a9f294bf8036e7a0c71b83950da2b3eff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f294bf8036e7a0c71b83950da2b3eff">&#9670;&nbsp;</a></span>HandleModTargetResistance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModTargetResistance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03975">3975</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;{</div>
<div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160; </div>
<div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160; </div>
<div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;    <span class="comment">// applied to damage as HandleNoImmediateEffect in Unit::CalcAbsorbResist and Unit::CalcArmorReducedDamage</span></div>
<div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160; </div>
<div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;    <span class="comment">// show armor penetration</span></div>
<div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a> &amp;&amp; (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; <a class="code" href="../../df/d0b/_shared_defines_8h.html#aff6913cfd69489c107a071be9ec2ec8fa12667dd3f55738c93e1ddb1351779b42">SPELL_SCHOOL_MASK_NORMAL</a>))</div>
<div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a494b539a938499639eab3f8d9a0c3364">ApplyModInt32Value</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881afee94ef13dedb3621bdaa1be73477be0">PLAYER_FIELD_MOD_TARGET_PHYSICAL_RESISTANCE</a>, <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160; </div>
<div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;    <span class="comment">// show as spell penetration only full spell penetration bonuses (all resistances except armor and holy</span></div>
<div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a> &amp;&amp; (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; <a class="code" href="../../df/d0b/_shared_defines_8h.html#aff6913cfd69489c107a071be9ec2ec8fa73f8353b80cc15deb2fbcecd8a2ac3c0">SPELL_SCHOOL_MASK_SPELL</a>) == <a class="code" href="../../df/d0b/_shared_defines_8h.html#aff6913cfd69489c107a071be9ec2ec8fa73f8353b80cc15deb2fbcecd8a2ac3c0">SPELL_SCHOOL_MASK_SPELL</a>)</div>
<div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a494b539a938499639eab3f8d9a0c3364">ApplyModInt32Value</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a42c340a1b77d8a9d208a0fcf249370bb">PLAYER_FIELD_MOD_TARGET_RESISTANCE</a>, <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_aff6913cfd69489c107a071be9ec2ec8fa73f8353b80cc15deb2fbcecd8a2ac3c0"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#aff6913cfd69489c107a071be9ec2ec8fa73f8353b80cc15deb2fbcecd8a2ac3c0">SPELL_SCHOOL_MASK_SPELL</a></div><div class="ttdeci">@ SPELL_SCHOOL_MASK_SPELL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00282">SharedDefines.h:280</a></div></div>
<div class="ttc" id="a_update_fields_8h_html_a0e42dc606678c9df7884e1aad621e881a42c340a1b77d8a9d208a0fcf249370bb"><div class="ttname"><a href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a42c340a1b77d8a9d208a0fcf249370bb">PLAYER_FIELD_MOD_TARGET_RESISTANCE</a></div><div class="ttdeci">@ PLAYER_FIELD_MOD_TARGET_RESISTANCE</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d65/_update_fields_8h_source.html#l00366">UpdateFields.h:366</a></div></div>
<div class="ttc" id="a_update_fields_8h_html_a0e42dc606678c9df7884e1aad621e881afee94ef13dedb3621bdaa1be73477be0"><div class="ttname"><a href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881afee94ef13dedb3621bdaa1be73477be0">PLAYER_FIELD_MOD_TARGET_PHYSICAL_RESISTANCE</a></div><div class="ttdeci">@ PLAYER_FIELD_MOD_TARGET_PHYSICAL_RESISTANCE</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d65/_update_fields_8h_source.html#l00367">UpdateFields.h:367</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00806">Object::ApplyModInt32Value()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00367">PLAYER_FIELD_MOD_TARGET_PHYSICAL_RESISTANCE</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00366">PLAYER_FIELD_MOD_TARGET_RESISTANCE</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00269">SPELL_SCHOOL_MASK_NORMAL</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00280">SPELL_SCHOOL_MASK_SPELL</a>, and <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>.</p>

</div>
</div>
<a id="a4230057d8bb2cc490b5868109790b811"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4230057d8bb2cc490b5868109790b811">&#9670;&nbsp;</a></span>HandleModTaunt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModTaunt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03004">3004</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;{</div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160; </div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160; </div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;    <span class="keywordflow">if</span> (!target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5ea3f54af571493f7889220724667189">IsAlive</a>() || !target-&gt;<a class="code" href="../../da/db7/class_unit.html#a17a3a280549173c861ab2de0f1d876af">CanHaveThreatList</a>())</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160; </div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* caster = <a class="code" href="../../da/df1/class_aura_effect.html#a29cf330277aeb89d17d18f6e112f035b">GetCaster</a>();</div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;    <span class="keywordflow">if</span> (!caster || !caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a5ea3f54af571493f7889220724667189">IsAlive</a>())</div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160; </div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a51ee419801f2fdfed8f57ea5c19b9cb8">TauntApply</a>(caster);</div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;    {</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;        <span class="comment">// When taunt aura fades out, mob will switch to previous target if current has less than 1.1 * secondthreat</span></div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a6f920c99b9681e81a1389cf4da7ba5c6">TauntFadeOut</a>(caster);</div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;    }</div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;}</div>
<div class="ttc" id="aclass_unit_html_a51ee419801f2fdfed8f57ea5c19b9cb8"><div class="ttname"><a href="../../da/db7/class_unit.html#a51ee419801f2fdfed8f57ea5c19b9cb8">Unit::TauntApply</a></div><div class="ttdeci">void TauntApply(Unit *victim)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l13834">Unit.cpp:13834</a></div></div>
<div class="ttc" id="aclass_unit_html_a6f920c99b9681e81a1389cf4da7ba5c6"><div class="ttname"><a href="../../da/db7/class_unit.html#a6f920c99b9681e81a1389cf4da7ba5c6">Unit::TauntFadeOut</a></div><div class="ttdeci">void TauntFadeOut(Unit *taunter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l13862">Unit.cpp:13862</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l13775">Unit::CanHaveThreatList()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00040">GetCaster()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01888">Unit::IsAlive()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l13834">Unit::TauntApply()</a>, and <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l13862">Unit::TauntFadeOut()</a>.</p>

</div>
</div>
<a id="a17a750190862b4a8b0ab247e66af3acf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17a750190862b4a8b0ab247e66af3acf">&#9670;&nbsp;</a></span>HandleModThreat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModThreat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02978">2978</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;{</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>))</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160; </div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../d9/df6/my__global_8h.html#a1b956fe1df85f3c132b21edb4e116458">int8</a> i = 0; i &lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a3d2e33bfddb1e3c28157eb6d136bfd28">MAX_SPELL_SCHOOL</a>; ++i)</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; i))</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;            <a class="code" href="../../d9/de9/src_2common_2_utilities_2util_8h.html#adcb1f2b25980bd4c71cb160030213f96">ApplyPercentModFloatVar</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#af92510a02fea467f33bb3a19b3f4aa63">m_threatModifier</a>[i], <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;}</div>
<div class="ttc" id="aclass_unit_html_af92510a02fea467f33bb3a19b3f4aa63"><div class="ttname"><a href="../../da/db7/class_unit.html#af92510a02fea467f33bb3a19b3f4aa63">Unit::m_threatModifier</a></div><div class="ttdeci">float m_threatModifier[MAX_SPELL_SCHOOL]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l02177">Unit.h:2177</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d9/de9/src_2common_2_utilities_2util_8h_source.html#l00087">ApplyPercentModFloatVar()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02177">Unit::m_threatModifier</a>, and <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00264">MAX_SPELL_SCHOOL</a>.</p>

</div>
</div>
<a id="aa6f7dcbeef11bbb6af9fd5d2fb52af3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6f7dcbeef11bbb6af9fd5d2fb52af3c">&#9670;&nbsp;</a></span>HandleModTotalPercentStat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModTotalPercentStat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04121">4121</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;{</div>
<div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160; </div>
<div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160; </div>
<div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &lt; -1 || <a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &gt; 4)</div>
<div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;    {</div>
<div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;        <a class="code" href="../../d3/d07/src_2common_2_logging_2_log_8h.html#a43832e3fa8508deb4ce43e520005fcd9">LOG_ERROR</a>(<span class="stringliteral">&quot;spells.aura.effect&quot;</span>, <span class="stringliteral">&quot;WARNING: Misc Value for SPELL_AURA_MOD_PERCENT_STAT not valid&quot;</span>);</div>
<div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;    }</div>
<div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160; </div>
<div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;    <span class="comment">// save current health state</span></div>
<div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;    <span class="keywordtype">float</span> healthPct = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a0cb842af542d302eb67b743078e1ac01">GetHealthPct</a>();</div>
<div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;    <span class="keywordtype">bool</span> alive = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5ea3f54af571493f7889220724667189">IsAlive</a>();</div>
<div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../d7/d71/classvalue.html">value</a> = <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>();</div>
<div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160; </div>
<div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>() == 67480) <span class="comment">// xinef: hack fix for blessing of sanctuary stats stack with blessing of kings...</span></div>
<div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;    {</div>
<div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d7/d71/classvalue.html">value</a>) <span class="comment">// not turned off</span></div>
<div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;            <a class="code" href="../../d7/d71/classvalue.html">value</a> = 10.0f;</div>
<div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> i = <a class="code" href="../../df/d0b/_shared_defines_8h.html#ad28c24e82986133459dee232a5360bc4aa8b5028ba51024ead888adb32c0b7778">STAT_STRENGTH</a>; i &lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a0f8923f02eb7dfba43a426b8320354da">MAX_STATS</a>; i++)</div>
<div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;        {</div>
<div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;            <span class="keywordflow">if</span> (i == <a class="code" href="../../df/d0b/_shared_defines_8h.html#ad28c24e82986133459dee232a5360bc4aa8b5028ba51024ead888adb32c0b7778">STAT_STRENGTH</a> || i == <a class="code" href="../../df/d0b/_shared_defines_8h.html#ad28c24e82986133459dee232a5360bc4aba471c4391bfb89db5a1e1f89e7473a5">STAT_STAMINA</a>)</div>
<div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;            {</div>
<div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a> &amp;&amp; (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a> || target-&gt;<a class="code" href="../../da/db7/class_unit.html#a4ad2fdcc45e2c3c85ad59ff49268b58c">IsPet</a>()))</div>
<div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a607f22b5bdf49b097aada9baf9f58f65">ApplyStatPercentBuffMod</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#ad28c24e82986133459dee232a5360bc4">Stats</a>(i), <a class="code" href="../../d7/d71/classvalue.html">value</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160; </div>
<div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bde">UnitMods</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdeae4231ed105be6058ed4deb6b4a5f3ba0">UNIT_MOD_STAT_START</a> + i), <a class="code" href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeab3ddc12b0760eec54f45b90b8671af4d">TOTAL_PCT</a>, <a class="code" href="../../d7/d71/classvalue.html">value</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160; </div>
<div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a> &amp;&amp; (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a> || target-&gt;<a class="code" href="../../da/db7/class_unit.html#a4ad2fdcc45e2c3c85ad59ff49268b58c">IsPet</a>()))</div>
<div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a607f22b5bdf49b097aada9baf9f58f65">ApplyStatPercentBuffMod</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#ad28c24e82986133459dee232a5360bc4">Stats</a>(i), <a class="code" href="../../d7/d71/classvalue.html">value</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;            }</div>
<div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;        }</div>
<div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;    }</div>
<div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160; </div>
<div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> i = <a class="code" href="../../df/d0b/_shared_defines_8h.html#ad28c24e82986133459dee232a5360bc4aa8b5028ba51024ead888adb32c0b7778">STAT_STRENGTH</a>; i &lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a0f8923f02eb7dfba43a426b8320354da">MAX_STATS</a>; i++)</div>
<div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;    {</div>
<div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == i || <a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == -1)</div>
<div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;        {</div>
<div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a> &amp;&amp; (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a> || target-&gt;<a class="code" href="../../da/db7/class_unit.html#a4ad2fdcc45e2c3c85ad59ff49268b58c">IsPet</a>()))</div>
<div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#a607f22b5bdf49b097aada9baf9f58f65">ApplyStatPercentBuffMod</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#ad28c24e82986133459dee232a5360bc4">Stats</a>(i), <a class="code" href="../../d7/d71/classvalue.html">value</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160; </div>
<div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bde">UnitMods</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4c5336cd4be5f0162bd4874b0a1e5bdeae4231ed105be6058ed4deb6b4a5f3ba0">UNIT_MOD_STAT_START</a> + i), <a class="code" href="../../d5/d32/_unit_8h.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeab3ddc12b0760eec54f45b90b8671af4d">TOTAL_PCT</a>, <a class="code" href="../../d7/d71/classvalue.html">value</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160; </div>
<div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a> &amp;&amp; (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a> || target-&gt;<a class="code" href="../../da/db7/class_unit.html#a4ad2fdcc45e2c3c85ad59ff49268b58c">IsPet</a>()))</div>
<div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#a607f22b5bdf49b097aada9baf9f58f65">ApplyStatPercentBuffMod</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#ad28c24e82986133459dee232a5360bc4">Stats</a>(i), <a class="code" href="../../d7/d71/classvalue.html">value</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;        }</div>
<div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;    }</div>
<div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160; </div>
<div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;    <span class="comment">// recalculate current HP/MP after applying aura modifications (only for spells with SPELL_ATTR0_UNK4 0x00000010 flag)</span></div>
<div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;    <span class="comment">// this check is total bullshit i think</span></div>
<div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == <a class="code" href="../../df/d0b/_shared_defines_8h.html#ad28c24e82986133459dee232a5360bc4aba471c4391bfb89db5a1e1f89e7473a5">STAT_STAMINA</a> &amp;&amp; <a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a9dcd0ba8d94905ba214797c12e7c44ada46b6f1510e54490ecf24ee8a769b0aab">SPELL_ATTR0_IS_ABILITY</a>))</div>
<div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a6548d4bfff73fad6df63a0bd0d806e2e">SetHealth</a>(std::max&lt;uint32&gt;(<a class="code" href="../../df/de2/namespace_g3_d.html#ae911b90657d7162d47997c702af655a8">uint32</a>(healthPct * target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5173c1774b09b42c409bf31280c37d36">GetMaxHealth</a>() * 0.01f), (alive ? 1 : 0)));</div>
<div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_a9dcd0ba8d94905ba214797c12e7c44ada46b6f1510e54490ecf24ee8a769b0aab"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a9dcd0ba8d94905ba214797c12e7c44ada46b6f1510e54490ecf24ee8a769b0aab">SPELL_ATTR0_IS_ABILITY</a></div><div class="ttdeci">@ SPELL_ATTR0_IS_ABILITY</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00358">SharedDefines.h:358</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_ad28c24e82986133459dee232a5360bc4aba471c4391bfb89db5a1e1f89e7473a5"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#ad28c24e82986133459dee232a5360bc4aba471c4391bfb89db5a1e1f89e7473a5">STAT_STAMINA</a></div><div class="ttdeci">@ STAT_STAMINA</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00232">SharedDefines.h:232</a></div></div>
<div class="ttc" id="aclass_unit_html_a607f22b5bdf49b097aada9baf9f58f65"><div class="ttname"><a href="../../da/db7/class_unit.html#a607f22b5bdf49b097aada9baf9f58f65">Unit::ApplyStatPercentBuffMod</a></div><div class="ttdeci">void ApplyStatPercentBuffMod(Stats stat, float val, bool apply)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l14479">Unit.cpp:14479</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l14479">Unit::ApplyStatPercentBuffMod()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01567">Unit::GetHealthPct()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">GetId()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01560">Unit::GetMaxHealth()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l14345">Unit::HandleStatModifier()</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00408">SpellInfo::HasAttribute()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01888">Unit::IsAlive()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01534">Unit::IsPet()</a>, <a class="el" href="../../d3/d07/src_2common_2_logging_2_log_8h_source.html#l00261">LOG_ERROR</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00115">m_spellInfo</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00237">MAX_STATS</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l14619">Unit::SetHealth()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00358">SPELL_ATTR0_IS_ABILITY</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00232">STAT_STAMINA</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00230">STAT_STRENGTH</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00374">TOTAL_PCT</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00448">UNIT_MOD_STAT_START</a>.</p>

</div>
</div>
<a id="a909a2bcd0d8036c938a7a5583b4ff432"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a909a2bcd0d8036c938a7a5583b4ff432">&#9670;&nbsp;</a></span>HandleModUnattackable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModUnattackable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02495">2495</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;{</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160; </div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160; </div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;    <span class="comment">// do not remove unit flag if there are more than this auraEffect of that kind on unit on unit</span></div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a> &amp;&amp; target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ae528761bbbd24dbe4e995bf7aa52fe21">SPELL_AURA_MOD_UNATTACKABLE</a>))</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160; </div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;    target-&gt;<a class="code" href="../../d8/d83/class_object.html#a882b48728ca660c0f6251bb595e8c67e">ApplyModFlag</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881aab4868b631f1cfaf30faee627f7c9dbf">UNIT_FIELD_FLAGS</a>, <a class="code" href="../../d5/d32/_unit_8h.html#afaf72688a238d4ba16ba2ae1444cd552a2ecf000dcea1c08aeb8721570707f922">UNIT_FLAG_NON_ATTACKABLE</a>, <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160; </div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;    <span class="comment">// call functions which may have additional effects after chainging state of unit</span></div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a> &amp;&amp; (mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;    {</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;        <span class="comment">// xinef: this aura should not stop combat (movie with sindragosa proves that)</span></div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;        <span class="comment">//target-&gt;CombatStop();</span></div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a2be941a27d14de6da7676c6fdbd37bb9">RemoveAurasWithInterruptFlags</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a0709fc3ab848cf1b8b4853813b8fe011a61b4509cc6643cd80da8b6c065d45f4a">AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</a>);</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;    }</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;}</div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799ae528761bbbd24dbe4e995bf7aa52fe21"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ae528761bbbd24dbe4e995bf7aa52fe21">SPELL_AURA_MOD_UNATTACKABLE</a></div><div class="ttdeci">@ SPELL_AURA_MOD_UNATTACKABLE</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00156">SpellAuraDefines.h:156</a></div></div>
<div class="ttc" id="a_unit_8h_html_afaf72688a238d4ba16ba2ae1444cd552a2ecf000dcea1c08aeb8721570707f922"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#afaf72688a238d4ba16ba2ae1444cd552a2ecf000dcea1c08aeb8721570707f922">UNIT_FLAG_NON_ATTACKABLE</a></div><div class="ttdeci">@ UNIT_FLAG_NON_ATTACKABLE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00607">Unit.h:607</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00890">Object::ApplyModFlag()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00072">AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05194">Unit::HasAuraType()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04681">Unit::RemoveAurasWithInterruptFlags()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00156">SPELL_AURA_MOD_UNATTACKABLE</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00117">UNIT_FIELD_FLAGS</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00607">UNIT_FLAG_NON_ATTACKABLE</a>.</p>

</div>
</div>
<a id="a54cde21a5e4a3fb27b8a3b4cde5b2428"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54cde21a5e4a3fb27b8a3b4cde5b2428">&#9670;&nbsp;</a></span>HandleNoImmediateEffect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleNoImmediateEffect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00153">153</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="comment">// aura type not have immediate effect at add/remove and handled by ID in other code place</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9558df628dc0b414dae883571ead3ee9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9558df628dc0b414dae883571ead3ee9">&#9670;&nbsp;</a></span>HandleNoReagentUseAura()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleNoReagentUseAura </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04939">4939</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04940"></a><span class="lineno"> 4940</span>&#160;{</div>
<div class="line"><a name="l04941"></a><span class="lineno"> 4941</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l04942"></a><span class="lineno"> 4942</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04943"></a><span class="lineno"> 4943</span>&#160; </div>
<div class="line"><a name="l04944"></a><span class="lineno"> 4944</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04945"></a><span class="lineno"> 4945</span>&#160; </div>
<div class="line"><a name="l04946"></a><span class="lineno"> 4946</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l04947"></a><span class="lineno"> 4947</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04948"></a><span class="lineno"> 4948</span>&#160; </div>
<div class="line"><a name="l04949"></a><span class="lineno"> 4949</span>&#160;    <a class="code" href="../../dc/dd4/classflag96.html">flag96</a> mask;</div>
<div class="line"><a name="l04950"></a><span class="lineno"> 4950</span>&#160;    <a class="code" href="../../da/db7/class_unit.html#adcdd87d0c137619dfc869536c1315dd7">Unit::AuraEffectList</a> <span class="keyword">const</span>&amp; noReagent = target-&gt;<a class="code" href="../../da/db7/class_unit.html#af00ac6c4dc7e639ac646fdafef336e85">GetAuraEffectsByType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ae2f673fac8c562b187da52c3db035e28">SPELL_AURA_NO_REAGENT_USE</a>);</div>
<div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160;    <span class="keywordflow">for</span> (Unit::AuraEffectList::const_iterator i = noReagent.begin(); i != noReagent.end(); ++i)</div>
<div class="line"><a name="l04952"></a><span class="lineno"> 4952</span>&#160;        mask |= (*i)-&gt;m_spellInfo-&gt;Effects[(*i)-&gt;m_effIndex].SpellClassMask;</div>
<div class="line"><a name="l04953"></a><span class="lineno"> 4953</span>&#160; </div>
<div class="line"><a name="l04954"></a><span class="lineno"> 4954</span>&#160;    target-&gt;<a class="code" href="../../d8/d83/class_object.html#adc7e9b205f35f9894ec9a4f0ec0871f9">SetUInt32Value</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a3870faef2067e89ff30e761cdd484625">PLAYER_NO_REAGENT_COST_1</a>, mask[0]);</div>
<div class="line"><a name="l04955"></a><span class="lineno"> 4955</span>&#160;    target-&gt;<a class="code" href="../../d8/d83/class_object.html#adc7e9b205f35f9894ec9a4f0ec0871f9">SetUInt32Value</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a3870faef2067e89ff30e761cdd484625">PLAYER_NO_REAGENT_COST_1</a> + 1, mask[1]);</div>
<div class="line"><a name="l04956"></a><span class="lineno"> 4956</span>&#160;    target-&gt;<a class="code" href="../../d8/d83/class_object.html#adc7e9b205f35f9894ec9a4f0ec0871f9">SetUInt32Value</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a3870faef2067e89ff30e761cdd484625">PLAYER_NO_REAGENT_COST_1</a> + 2, mask[2]);</div>
<div class="line"><a name="l04957"></a><span class="lineno"> 4957</span>&#160;}</div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799ae2f673fac8c562b187da52c3db035e28"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ae2f673fac8c562b187da52c3db035e28">SPELL_AURA_NO_REAGENT_USE</a></div><div class="ttdeci">@ SPELL_AURA_NO_REAGENT_USE</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00319">SpellAuraDefines.h:319</a></div></div>
<div class="ttc" id="a_update_fields_8h_html_a0e42dc606678c9df7884e1aad621e881a3870faef2067e89ff30e761cdd484625"><div class="ttname"><a href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881a3870faef2067e89ff30e761cdd484625">PLAYER_NO_REAGENT_COST_1</a></div><div class="ttdeci">@ PLAYER_NO_REAGENT_COST_1</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d65/_update_fields_8h_source.html#l00387">UpdateFields.h:387</a></div></div>
<div class="ttc" id="aclassflag96_html"><div class="ttname"><a href="../../dc/dd4/classflag96.html">flag96</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/src_2common_2_utilities_2util_8h_source.html#l00482">Util.h:483</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02047">Unit::GetAuraEffectsByType()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00387">PLAYER_NO_REAGENT_COST_1</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00641">Object::SetUInt32Value()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00319">SPELL_AURA_NO_REAGENT_USE</a>, and <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>.</p>

</div>
</div>
<a id="a22c04d564645569dc99f91ffc9196da3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22c04d564645569dc99f91ffc9196da3">&#9670;&nbsp;</a></span>HandleNULL()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleNULL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00145">145</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="comment">// not implemented</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2d4f436ab67e728f66577e043143f32d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d4f436ab67e728f66577e043143f32d">&#9670;&nbsp;</a></span>HandleObsModPowerAuraTick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleObsModPowerAuraTick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06669">6669</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l06670"></a><span class="lineno"> 6670</span>&#160;{</div>
<div class="line"><a name="l06671"></a><span class="lineno"> 6671</span>&#160;    <a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414">Powers</a> <a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>;</div>
<div class="line"><a name="l06672"></a><span class="lineno"> 6672</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414a2cb95b74082766aff9aea094edcd3eee">POWER_ALL</a>)</div>
<div class="line"><a name="l06673"></a><span class="lineno"> 6673</span>&#160;        <a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a> = target-&gt;<a class="code" href="../../da/db7/class_unit.html#ad44d31430fab9282a79e8682822ccd9c">getPowerType</a>();</div>
<div class="line"><a name="l06674"></a><span class="lineno"> 6674</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l06675"></a><span class="lineno"> 6675</span>&#160;        <a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a> = <a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414">Powers</a>(<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><a name="l06676"></a><span class="lineno"> 6676</span>&#160; </div>
<div class="line"><a name="l06677"></a><span class="lineno"> 6677</span>&#160;    <span class="keywordflow">if</span> (!target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5ea3f54af571493f7889220724667189">IsAlive</a>() || !target-&gt;<a class="code" href="../../da/db7/class_unit.html#a93f83fd909310de2c76382d00d7dbbf1">GetMaxPower</a>(<a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>))</div>
<div class="line"><a name="l06678"></a><span class="lineno"> 6678</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06679"></a><span class="lineno"> 6679</span>&#160; </div>
<div class="line"><a name="l06680"></a><span class="lineno"> 6680</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#ab78147cd520d2dac6be709b4c80a7de3">HasUnitState</a>(<a class="code" href="../../d5/d32/_unit_8h.html#ae51d2ecb71f7a5cb3882982a622c9544a7c4ae74029844364315885e02df35505">UNIT_STATE_ISOLATED</a>))</div>
<div class="line"><a name="l06681"></a><span class="lineno"> 6681</span>&#160;    {</div>
<div class="line"><a name="l06682"></a><span class="lineno"> 6682</span>&#160;        <a class="code" href="../../da/df1/class_aura_effect.html#a94ad6938ac754595a00f0f5a8e2019c5">SendTickImmune</a>(target, caster);</div>
<div class="line"><a name="l06683"></a><span class="lineno"> 6683</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06684"></a><span class="lineno"> 6684</span>&#160;    }</div>
<div class="line"><a name="l06685"></a><span class="lineno"> 6685</span>&#160; </div>
<div class="line"><a name="l06686"></a><span class="lineno"> 6686</span>&#160;    <span class="comment">// don&#39;t regen when permanent aura target has full power</span></div>
<div class="line"><a name="l06687"></a><span class="lineno"> 6687</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;IsPermanent() &amp;&amp; target-&gt;<a class="code" href="../../da/db7/class_unit.html#ad7e475d80b9af430cc076d7c01f967e9">GetPower</a>(<a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>) == target-&gt;<a class="code" href="../../da/db7/class_unit.html#a93f83fd909310de2c76382d00d7dbbf1">GetMaxPower</a>(<a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>))</div>
<div class="line"><a name="l06688"></a><span class="lineno"> 6688</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06689"></a><span class="lineno"> 6689</span>&#160; </div>
<div class="line"><a name="l06690"></a><span class="lineno"> 6690</span>&#160;    <span class="comment">// ignore negative values (can be result apply spellmods to aura damage</span></div>
<div class="line"><a name="l06691"></a><span class="lineno"> 6691</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> amount = <a class="code" href="../../d9/df6/my__global_8h.html#affe776513b24d84b39af8ab0930fef7f">std::max</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a>, 0) * target-&gt;<a class="code" href="../../da/db7/class_unit.html#a93f83fd909310de2c76382d00d7dbbf1">GetMaxPower</a>(<a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>) / 100;</div>
<div class="line"><a name="l06692"></a><span class="lineno"> 6692</span>&#160;    <a class="code" href="../../d3/d07/src_2common_2_logging_2_log_8h.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura.effect&quot;</span>, <span class="stringliteral">&quot;PeriodicTick: %s energize %s for %u dmg inflicted by %u&quot;</span>,</div>
<div class="line"><a name="l06693"></a><span class="lineno"> 6693</span>&#160;                    <a class="code" href="../../da/df1/class_aura_effect.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>().<a class="code" href="../../d1/d7d/namespace_acore.html#ac2cb308fb001c35fbaa90489ea6cf478">ToString</a>().c_str(), target-&gt;<a class="code" href="../../d8/d83/class_object.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>().<a class="code" href="../../d8/d03/class_object_guid.html#a78f5fb47e3b35addf8984000c175125b">ToString</a>().c_str(), amount, <a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><a name="l06694"></a><span class="lineno"> 6694</span>&#160;    <a class="code" href="../../db/d9b/struct_spell_periodic_aura_log_info.html">SpellPeriodicAuraLogInfo</a> pInfo(<span class="keyword">this</span>, amount, 0, 0, 0, 0.0f, <span class="keyword">false</span>);</div>
<div class="line"><a name="l06695"></a><span class="lineno"> 6695</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#ac6e545dc53605a0c05d8556cf66040c1">SendPeriodicAuraLog</a>(&amp;pInfo);</div>
<div class="line"><a name="l06696"></a><span class="lineno"> 6696</span>&#160; </div>
<div class="line"><a name="l06697"></a><span class="lineno"> 6697</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> gain = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a71c66b7e4d8815d9ea68b838f4ff0f09">ModifyPower</a>(<a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>, amount);</div>
<div class="line"><a name="l06698"></a><span class="lineno"> 6698</span>&#160; </div>
<div class="line"><a name="l06699"></a><span class="lineno"> 6699</span>&#160;    <span class="keywordflow">if</span> (caster)</div>
<div class="line"><a name="l06700"></a><span class="lineno"> 6700</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a7f568bbe5292ed618cd40bde9297b094">getHostileRefMgr</a>().<a class="code" href="../../d9/d07/class_hostile_ref_mgr.html#a69c355d1c078cfba9927c8c752912b48">threatAssist</a>(caster, <span class="keywordtype">float</span>(gain) * 0.5f, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>());</div>
<div class="line"><a name="l06701"></a><span class="lineno"> 6701</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_a17e15fab4b89f4840e745f31ca76a414a2cb95b74082766aff9aea094edcd3eee"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414a2cb95b74082766aff9aea094edcd3eee">POWER_ALL</a></div><div class="ttdeci">@ POWER_ALL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00249">SharedDefines.h:249</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a94ad6938ac754595a00f0f5a8e2019c5"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a94ad6938ac754595a00f0f5a8e2019c5">AuraEffect::SendTickImmune</a></div><div class="ttdeci">void SendTickImmune(Unit *target, Unit *caster) const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01081">SpellAuraEffects.cpp:1081</a></div></div>
<div class="ttc" id="aclass_hostile_ref_mgr_html_a69c355d1c078cfba9927c8c752912b48"><div class="ttname"><a href="../../d9/d07/class_hostile_ref_mgr.html#a69c355d1c078cfba9927c8c752912b48">HostileRefMgr::threatAssist</a></div><div class="ttdeci">void threatAssist(Unit *victim, float baseThreat, SpellInfo const *threatSpell=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d30/_hostile_ref_mgr_8cpp_source.html#l00035">HostileRefMgr.cpp:35</a></div></div>
<div class="ttc" id="aclass_object_guid_html_a78f5fb47e3b35addf8984000c175125b"><div class="ttname"><a href="../../d8/d03/class_object_guid.html#a78f5fb47e3b35addf8984000c175125b">ObjectGuid::ToString</a></div><div class="ttdeci">std::string ToString() const</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d5f/_object_guid_8cpp_source.html#l00047">ObjectGuid.cpp:47</a></div></div>
<div class="ttc" id="aclass_unit_html_a71c66b7e4d8815d9ea68b838f4ff0f09"><div class="ttname"><a href="../../da/db7/class_unit.html#a71c66b7e4d8815d9ea68b838f4ff0f09">Unit::ModifyPower</a></div><div class="ttdeci">int32 ModifyPower(Powers power, int32 val)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l13328">Unit.cpp:13328</a></div></div>
<div class="ttc" id="aclass_unit_html_a93f83fd909310de2c76382d00d7dbbf1"><div class="ttname"><a href="../../da/db7/class_unit.html#a93f83fd909310de2c76382d00d7dbbf1">Unit::GetMaxPower</a></div><div class="ttdeci">uint32 GetMaxPower(Powers power) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01581">Unit.h:1581</a></div></div>
<div class="ttc" id="aclass_unit_html_ab78147cd520d2dac6be709b4c80a7de3"><div class="ttname"><a href="../../da/db7/class_unit.html#ab78147cd520d2dac6be709b4c80a7de3">Unit::HasUnitState</a></div><div class="ttdeci">bool HasUnitState(const uint32 f) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01519">Unit.h:1519</a></div></div>
<div class="ttc" id="aclass_unit_html_ac6e545dc53605a0c05d8556cf66040c1"><div class="ttname"><a href="../../da/db7/class_unit.html#ac6e545dc53605a0c05d8556cf66040c1">Unit::SendPeriodicAuraLog</a></div><div class="ttdeci">void SendPeriodicAuraLog(SpellPeriodicAuraLogInfo *pInfo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l05834">Unit.cpp:5834</a></div></div>
<div class="ttc" id="anamespace_acore_html_ac2cb308fb001c35fbaa90489ea6cf478"><div class="ttname"><a href="../../d1/d7d/namespace_acore.html#ac2cb308fb001c35fbaa90489ea6cf478">Acore::ToString</a></div><div class="ttdeci">std::string ToString(Type &amp;&amp;val, Params &amp;&amp;... params)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3c/_string_convert_8h_source.html#l00315">StringConvert.h:315</a></div></div>
<div class="ttc" id="asrc_2common_2_logging_2_log_8h_html_a47ac782b14a7531c6232777165a1a161"><div class="ttname"><a href="../../d3/d07/src_2common_2_logging_2_log_8h.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a></div><div class="ttdeci">#define LOG_DEBUG(filterType__,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d07/src_2common_2_logging_2_log_8h_source.html#l00273">Log.h:273</a></div></div>
<div class="ttc" id="astruct_spell_periodic_aura_log_info_html"><div class="ttname"><a href="../../db/d9b/struct_spell_periodic_aura_log_info.html">SpellPeriodicAuraLogInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01058">Unit.h:1059</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">GetBase()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00041">GetCasterGUID()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00098">Object::GetGUID()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02236">Unit::getHostileRefMgr()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">GetId()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01581">Unit::GetMaxPower()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01580">Unit::GetPower()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01578">Unit::getPowerType()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01519">Unit::HasUnitState()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01888">Unit::IsAlive()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00138">Aura::IsPermanent()</a>, <a class="el" href="../../d3/d07/src_2common_2_logging_2_log_8h_source.html#l00273">LOG_DEBUG</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00120">m_amount</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l01386">max</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l13328">Unit::ModifyPower()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00249">POWER_ALL</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05834">Unit::SendPeriodicAuraLog()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01081">SendTickImmune()</a>, <a class="el" href="../../d1/d30/_hostile_ref_mgr_8cpp_source.html#l00035">HostileRefMgr::threatAssist()</a>, <a class="el" href="../../da/d5f/_object_guid_8cpp_source.html#l00047">ObjectGuid::ToString()</a>, <a class="el" href="../../de/d3c/_string_convert_8h_source.html#l00315">Acore::ToString()</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00497">UNIT_STATE_ISOLATED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01087">PeriodicTick()</a>.</p>

</div>
</div>
<a id="a8f993bd36f255362d3801c708509a868"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f993bd36f255362d3801c708509a868">&#9670;&nbsp;</a></span>HandlePeriodicDamageAurasTick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandlePeriodicDamageAurasTick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06190">6190</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l06191"></a><span class="lineno"> 6191</span>&#160;{</div>
<div class="line"><a name="l06192"></a><span class="lineno"> 6192</span>&#160;    <span class="keywordflow">if</span> (!target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5ea3f54af571493f7889220724667189">IsAlive</a>())</div>
<div class="line"><a name="l06193"></a><span class="lineno"> 6193</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06194"></a><span class="lineno"> 6194</span>&#160; </div>
<div class="line"><a name="l06195"></a><span class="lineno"> 6195</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#ab78147cd520d2dac6be709b4c80a7de3">HasUnitState</a>(<a class="code" href="../../d5/d32/_unit_8h.html#ae51d2ecb71f7a5cb3882982a622c9544a7c4ae74029844364315885e02df35505">UNIT_STATE_ISOLATED</a>) || target-&gt;<a class="code" href="../../da/db7/class_unit.html#ae7269683ec5b0e44c3ee49bd6f896615">IsImmunedToDamageOrSchool</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()) || target-&gt;<a class="code" href="../../da/db7/class_unit.html#ae1ce57b02474672763481af5c4e7ef6f">IsTotem</a>())</div>
<div class="line"><a name="l06196"></a><span class="lineno"> 6196</span>&#160;    {</div>
<div class="line"><a name="l06197"></a><span class="lineno"> 6197</span>&#160;        <a class="code" href="../../da/df1/class_aura_effect.html#a94ad6938ac754595a00f0f5a8e2019c5">SendTickImmune</a>(target, caster);</div>
<div class="line"><a name="l06198"></a><span class="lineno"> 6198</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06199"></a><span class="lineno"> 6199</span>&#160;    }</div>
<div class="line"><a name="l06200"></a><span class="lineno"> 6200</span>&#160; </div>
<div class="line"><a name="l06201"></a><span class="lineno"> 6201</span>&#160;    <span class="comment">// Consecrate ticks can miss and will not show up in the combat log</span></div>
<div class="line"><a name="l06202"></a><span class="lineno"> 6202</span>&#160;    <span class="keywordflow">if</span> (caster &amp;&amp; <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;Effects[<a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].Effect == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a292c893150c454dd75628b719db1fe97aa3290e738b6cd09859039989143f9ac1">SPELL_EFFECT_PERSISTENT_AREA_AURA</a> &amp;&amp;</div>
<div class="line"><a name="l06203"></a><span class="lineno"> 6203</span>&#160;            caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a8698eb184506578c00250d3c4c352722">SpellHitResult</a>(target, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), <span class="keyword">false</span>) != <a class="code" href="../../df/d0b/_shared_defines_8h.html#ac42174a036914cd9ca25c52e98bef65aa893d017f010f243616e70394c7fec096">SPELL_MISS_NONE</a>)</div>
<div class="line"><a name="l06204"></a><span class="lineno"> 6204</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06205"></a><span class="lineno"> 6205</span>&#160; </div>
<div class="line"><a name="l06206"></a><span class="lineno"> 6206</span>&#160;    <span class="comment">// some auras remove at specific health level or more</span></div>
<div class="line"><a name="l06207"></a><span class="lineno"> 6207</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>() == <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a11166673929d2fda5967add284832fad">SPELL_AURA_PERIODIC_DAMAGE</a>)</div>
<div class="line"><a name="l06208"></a><span class="lineno"> 6208</span>&#160;    {</div>
<div class="line"><a name="l06209"></a><span class="lineno"> 6209</span>&#160;        <span class="keywordflow">switch</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;Id)</div>
<div class="line"><a name="l06210"></a><span class="lineno"> 6210</span>&#160;        {</div>
<div class="line"><a name="l06211"></a><span class="lineno"> 6211</span>&#160;            <span class="keywordflow">case</span> 43093:</div>
<div class="line"><a name="l06212"></a><span class="lineno"> 6212</span>&#160;            <span class="keywordflow">case</span> 31956:</div>
<div class="line"><a name="l06213"></a><span class="lineno"> 6213</span>&#160;            <span class="keywordflow">case</span> 38801:  <span class="comment">// Grievous Wound</span></div>
<div class="line"><a name="l06214"></a><span class="lineno"> 6214</span>&#160;            <span class="keywordflow">case</span> 35321:</div>
<div class="line"><a name="l06215"></a><span class="lineno"> 6215</span>&#160;            <span class="keywordflow">case</span> 38363:</div>
<div class="line"><a name="l06216"></a><span class="lineno"> 6216</span>&#160;            <span class="keywordflow">case</span> 39215:  <span class="comment">// Gushing Wound</span></div>
<div class="line"><a name="l06217"></a><span class="lineno"> 6217</span>&#160;                <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5725cda05eb9a83f0731778d27a2a80c">IsFullHealth</a>())</div>
<div class="line"><a name="l06218"></a><span class="lineno"> 6218</span>&#160;                {</div>
<div class="line"><a name="l06219"></a><span class="lineno"> 6219</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;Id);</div>
<div class="line"><a name="l06220"></a><span class="lineno"> 6220</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06221"></a><span class="lineno"> 6221</span>&#160;                }</div>
<div class="line"><a name="l06222"></a><span class="lineno"> 6222</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06223"></a><span class="lineno"> 6223</span>&#160;            <span class="keywordflow">case</span> 38772: <span class="comment">// Grievous Wound</span></div>
<div class="line"><a name="l06224"></a><span class="lineno"> 6224</span>&#160;                {</div>
<div class="line"><a name="l06225"></a><span class="lineno"> 6225</span>&#160;                    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> percent = <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code" href="../../df/d0b/_shared_defines_8h.html#a0b4a3c2c7210e88f82b3dc3abb6e6f77a8ad5debef66c8aadbaf13f97f522e791">EFFECT_1</a>].CalcValue(caster);</div>
<div class="line"><a name="l06226"></a><span class="lineno"> 6226</span>&#160;                    <span class="keywordflow">if</span> (!target-&gt;<a class="code" href="../../da/db7/class_unit.html#a8bcfed25889f307b4849743956ae67fc">HealthBelowPct</a>(percent))</div>
<div class="line"><a name="l06227"></a><span class="lineno"> 6227</span>&#160;                    {</div>
<div class="line"><a name="l06228"></a><span class="lineno"> 6228</span>&#160;                        target-&gt;<a class="code" href="../../da/db7/class_unit.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;Id);</div>
<div class="line"><a name="l06229"></a><span class="lineno"> 6229</span>&#160;                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06230"></a><span class="lineno"> 6230</span>&#160;                    }</div>
<div class="line"><a name="l06231"></a><span class="lineno"> 6231</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06232"></a><span class="lineno"> 6232</span>&#160;                }</div>
<div class="line"><a name="l06233"></a><span class="lineno"> 6233</span>&#160;        }</div>
<div class="line"><a name="l06234"></a><span class="lineno"> 6234</span>&#160;    }</div>
<div class="line"><a name="l06235"></a><span class="lineno"> 6235</span>&#160; </div>
<div class="line"><a name="l06236"></a><span class="lineno"> 6236</span>&#160;    <a class="code" href="../../d1/d6c/struct_clean_damage.html">CleanDamage</a> cleanDamage = <a class="code" href="../../d1/d6c/struct_clean_damage.html">CleanDamage</a>(0, 0, <a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <a class="code" href="../../d5/d32/_unit_8h.html#aba4a9525e87c7e76c6c005bc3c3f53a5a9c5d76fbca1fce33b08a1655b9017272">MELEE_HIT_NORMAL</a>);</div>
<div class="line"><a name="l06237"></a><span class="lineno"> 6237</span>&#160; </div>
<div class="line"><a name="l06238"></a><span class="lineno"> 6238</span>&#160;    <span class="comment">// ignore non positive values (can be result apply spellmods to aura damage</span></div>
<div class="line"><a name="l06239"></a><span class="lineno"> 6239</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> damage = <a class="code" href="../../d9/df6/my__global_8h.html#affe776513b24d84b39af8ab0930fef7f">std::max</a>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), 0);</div>
<div class="line"><a name="l06240"></a><span class="lineno"> 6240</span>&#160; </div>
<div class="line"><a name="l06241"></a><span class="lineno"> 6241</span>&#160;    <span class="comment">// Script Hook For HandlePeriodicDamageAurasTick -- Allow scripts to change the Damage pre class mitigation calculations</span></div>
<div class="line"><a name="l06242"></a><span class="lineno"> 6242</span>&#160;    <a class="code" href="../../d0/d7d/_script_mgr_8h.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a>-&gt;ModifyPeriodicDamageAurasTick(target, caster, damage);</div>
<div class="line"><a name="l06243"></a><span class="lineno"> 6243</span>&#160; </div>
<div class="line"><a name="l06244"></a><span class="lineno"> 6244</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>() == <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a11166673929d2fda5967add284832fad">SPELL_AURA_PERIODIC_DAMAGE</a>)</div>
<div class="line"><a name="l06245"></a><span class="lineno"> 6245</span>&#160;    {</div>
<div class="line"><a name="l06246"></a><span class="lineno"> 6246</span>&#160;        <span class="comment">// xinef: leave only target depending bonuses, rest is handled in calculate amount</span></div>
<div class="line"><a name="l06247"></a><span class="lineno"> 6247</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;GetType() == <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#ade4e7c2cbd17c45015f9f70c2a5400b2a51cd79314936d46d8bc738a8c1207ab4">DYNOBJ_AURA_TYPE</a> &amp;&amp; caster)</div>
<div class="line"><a name="l06248"></a><span class="lineno"> 6248</span>&#160;            damage = caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a0df9b48b0adee2815e7f9299ff615d46">SpellDamageBonusDone</a>(target, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), damage, <a class="code" href="../../d5/d32/_unit_8h.html#aff59f402d05917ab1de0c5f6bf148ea4a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>, 0.0f, <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;GetStackAmount());</div>
<div class="line"><a name="l06249"></a><span class="lineno"> 6249</span>&#160;        damage = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a8e8d13276a1ebef454bd4fc27fedc3f1">SpellDamageBonusTaken</a>(caster, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), damage, <a class="code" href="../../d5/d32/_unit_8h.html#aff59f402d05917ab1de0c5f6bf148ea4a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>, <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;GetStackAmount());</div>
<div class="line"><a name="l06250"></a><span class="lineno"> 6250</span>&#160; </div>
<div class="line"><a name="l06251"></a><span class="lineno"> 6251</span>&#160;        <span class="comment">// Calculate armor mitigation</span></div>
<div class="line"><a name="l06252"></a><span class="lineno"> 6252</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/db7/class_unit.html#ad53cf516713368986bab84af35245b53">Unit::IsDamageReducedByArmor</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;GetSchoolMask(), <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), <a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()))</div>
<div class="line"><a name="l06253"></a><span class="lineno"> 6253</span>&#160;        {</div>
<div class="line"><a name="l06254"></a><span class="lineno"> 6254</span>&#160;            <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> damageReductedArmor = <a class="code" href="../../da/db7/class_unit.html#a3dee46b283ebc2e4bcace26c01895387">Unit::CalcArmorReducedDamage</a>(caster, target, damage, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), <a class="code" href="../../da/df1/class_aura_effect.html#a7595664aebf24652d3ce95d6bdc18ebe">GetCasterLevel</a>());</div>
<div class="line"><a name="l06255"></a><span class="lineno"> 6255</span>&#160;            cleanDamage.<a class="code" href="../../d1/d6c/struct_clean_damage.html#a6aeffc94560ac510c0b89e4384a2f41a">mitigated_damage</a> += damage - damageReductedArmor;</div>
<div class="line"><a name="l06256"></a><span class="lineno"> 6256</span>&#160;            damage = damageReductedArmor;</div>
<div class="line"><a name="l06257"></a><span class="lineno"> 6257</span>&#160;        }</div>
<div class="line"><a name="l06258"></a><span class="lineno"> 6258</span>&#160; </div>
<div class="line"><a name="l06259"></a><span class="lineno"> 6259</span>&#160;        <span class="comment">// Curse of Agony damage-per-tick calculation</span></div>
<div class="line"><a name="l06260"></a><span class="lineno"> 6260</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;SpellFamilyName == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0a134bc75d430da10f6c1df4977c29cf">SPELLFAMILY_WARLOCK</a> &amp;&amp; (<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;SpellFamilyFlags[0] &amp; 0x400) &amp;&amp; <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;SpellIconID == 544)</div>
<div class="line"><a name="l06261"></a><span class="lineno"> 6261</span>&#160;        {</div>
<div class="line"><a name="l06262"></a><span class="lineno"> 6262</span>&#160;            <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> totalTick = <a class="code" href="../../da/df1/class_aura_effect.html#a67ca18798f448847e77665752fa4a32c">GetTotalTicks</a>();</div>
<div class="line"><a name="l06263"></a><span class="lineno"> 6263</span>&#160;            <span class="comment">// 1..4 ticks, 1/2 from normal tick damage</span></div>
<div class="line"><a name="l06264"></a><span class="lineno"> 6264</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#ab8c7fb50eac3482a162cbbacd64f1625">m_tickNumber</a> &lt;= totalTick / 3)</div>
<div class="line"><a name="l06265"></a><span class="lineno"> 6265</span>&#160;                damage = damage / 2;</div>
<div class="line"><a name="l06266"></a><span class="lineno"> 6266</span>&#160;            <span class="comment">// 9..12 ticks, 3/2 from normal tick damage</span></div>
<div class="line"><a name="l06267"></a><span class="lineno"> 6267</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#ab8c7fb50eac3482a162cbbacd64f1625">m_tickNumber</a> &gt; totalTick * 2 / 3)</div>
<div class="line"><a name="l06268"></a><span class="lineno"> 6268</span>&#160;                damage += (damage + 1) / 2;       <span class="comment">// +1 prevent 0.5 damage possible lost at 1..4 ticks</span></div>
<div class="line"><a name="l06269"></a><span class="lineno"> 6269</span>&#160;            <span class="comment">// 5..8 ticks have normal tick damage</span></div>
<div class="line"><a name="l06270"></a><span class="lineno"> 6270</span>&#160;        }</div>
<div class="line"><a name="l06271"></a><span class="lineno"> 6271</span>&#160;    }</div>
<div class="line"><a name="l06272"></a><span class="lineno"> 6272</span>&#160;    <span class="keywordflow">else</span> <span class="comment">// xinef: ceil obtained value, it may happen that 10 ticks for 10% damage may not kill owner</span></div>
<div class="line"><a name="l06273"></a><span class="lineno"> 6273</span>&#160;        damage = <a class="code" href="../../df/de2/namespace_g3_d.html#ae911b90657d7162d47997c702af655a8">uint32</a>(<a class="code" href="../../df/de2/namespace_g3_d.html#a0b6c75c6494813d83a76c9a708da97b2">ceil</a>(CalculatePct&lt;float, float&gt;(target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5173c1774b09b42c409bf31280c37d36">GetMaxHealth</a>(), damage)));</div>
<div class="line"><a name="l06274"></a><span class="lineno"> 6274</span>&#160; </div>
<div class="line"><a name="l06275"></a><span class="lineno"> 6275</span>&#160;    <span class="comment">// calculate crit chance</span></div>
<div class="line"><a name="l06276"></a><span class="lineno"> 6276</span>&#160;    <span class="keywordtype">bool</span> crit = <span class="keyword">false</span>;</div>
<div class="line"><a name="l06277"></a><span class="lineno"> 6277</span>&#160;    <span class="keywordflow">if</span> ((crit = <a class="code" href="../../d1/d65/src_2common_2_utilities_2_random_8h.html#a4b15099bc81731469c5078a778673c94">roll_chance_f</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a374ccc25c81de041d10e1ed2b52a238c">GetCritChance</a>())))</div>
<div class="line"><a name="l06278"></a><span class="lineno"> 6278</span>&#160;        damage = <a class="code" href="../../da/db7/class_unit.html#a8a91714bd4edbbb272b5c90cefc8089d">Unit::SpellCriticalDamageBonus</a>(caster, <a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>, damage, target);</div>
<div class="line"><a name="l06279"></a><span class="lineno"> 6279</span>&#160; </div>
<div class="line"><a name="l06280"></a><span class="lineno"> 6280</span>&#160;    <span class="comment">// Auras reducing damage from AOE spells</span></div>
<div class="line"><a name="l06281"></a><span class="lineno"> 6281</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;Effects[<a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].IsAreaAuraEffect() || <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;Effects[<a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].IsTargetingArea() || <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;Effects[<a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].Effect == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a292c893150c454dd75628b719db1fe97aa3290e738b6cd09859039989143f9ac1">SPELL_EFFECT_PERSISTENT_AREA_AURA</a>) <span class="comment">// some persistent area auras have targets like A=53 B=28</span></div>
<div class="line"><a name="l06282"></a><span class="lineno"> 6282</span>&#160;    {</div>
<div class="line"><a name="l06283"></a><span class="lineno"> 6283</span>&#160;        damage = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a4f7bacd5659d1e3ca130dc7cf7df7bee">CalculateAOEDamageReduction</a>(damage, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;SchoolMask, caster);</div>
<div class="line"><a name="l06284"></a><span class="lineno"> 6284</span>&#160;    }</div>
<div class="line"><a name="l06285"></a><span class="lineno"> 6285</span>&#160; </div>
<div class="line"><a name="l06286"></a><span class="lineno"> 6286</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a1360fcb79edcab37b0a7b362bb6e7b2a">CanApplyResilience</a>())</div>
<div class="line"><a name="l06287"></a><span class="lineno"> 6287</span>&#160;    {</div>
<div class="line"><a name="l06288"></a><span class="lineno"> 6288</span>&#160;        <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> resilienceReduction = damage;</div>
<div class="line"><a name="l06289"></a><span class="lineno"> 6289</span>&#160;        <a class="code" href="../../da/db7/class_unit.html#a0bd6c785f03c6b0010f9da02b880cee3">Unit::ApplyResilience</a>(target, <span class="keyword">nullptr</span>, &amp;resilienceReduction, crit, <a class="code" href="../../d5/d32/_unit_8h.html#aa60e4ef21982cf41b489e5242f01b64fa40402f79e36b6c6687d2a6511bb19aad">CR_CRIT_TAKEN_SPELL</a>);</div>
<div class="line"><a name="l06290"></a><span class="lineno"> 6290</span>&#160; </div>
<div class="line"><a name="l06291"></a><span class="lineno"> 6291</span>&#160;        resilienceReduction = damage - resilienceReduction;</div>
<div class="line"><a name="l06292"></a><span class="lineno"> 6292</span>&#160;        damage -= resilienceReduction;</div>
<div class="line"><a name="l06293"></a><span class="lineno"> 6293</span>&#160;        cleanDamage.<a class="code" href="../../d1/d6c/struct_clean_damage.html#a6aeffc94560ac510c0b89e4384a2f41a">mitigated_damage</a> += resilienceReduction;</div>
<div class="line"><a name="l06294"></a><span class="lineno"> 6294</span>&#160;    }</div>
<div class="line"><a name="l06295"></a><span class="lineno"> 6295</span>&#160; </div>
<div class="line"><a name="l06296"></a><span class="lineno"> 6296</span>&#160;    <a class="code" href="../../d6/d2a/class_damage_info.html">DamageInfo</a> dmgInfo(caster, target, damage, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;GetSchoolMask(), <a class="code" href="../../d5/d32/_unit_8h.html#aff59f402d05917ab1de0c5f6bf148ea4a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>, cleanDamage.<a class="code" href="../../d1/d6c/struct_clean_damage.html#a6aeffc94560ac510c0b89e4384a2f41a">mitigated_damage</a>);</div>
<div class="line"><a name="l06297"></a><span class="lineno"> 6297</span>&#160;    <a class="code" href="../../da/db7/class_unit.html#af003db5856d82574c3db286a3a0186fd">Unit::CalcAbsorbResist</a>(dmgInfo);</div>
<div class="line"><a name="l06298"></a><span class="lineno"> 6298</span>&#160; </div>
<div class="line"><a name="l06299"></a><span class="lineno"> 6299</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> absorb = dmgInfo.GetAbsorb();</div>
<div class="line"><a name="l06300"></a><span class="lineno"> 6300</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> resist = dmgInfo.GetResist();</div>
<div class="line"><a name="l06301"></a><span class="lineno"> 6301</span>&#160;    damage = dmgInfo.GetDamage();</div>
<div class="line"><a name="l06302"></a><span class="lineno"> 6302</span>&#160; </div>
<div class="line"><a name="l06303"></a><span class="lineno"> 6303</span>&#160;    <a class="code" href="../../d3/d07/src_2common_2_logging_2_log_8h.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura.effect&quot;</span>, <span class="stringliteral">&quot;PeriodicTick: %s attacked %s for %u dmg inflicted by %u abs is %u&quot;</span>,</div>
<div class="line"><a name="l06304"></a><span class="lineno"> 6304</span>&#160;                    <a class="code" href="../../da/df1/class_aura_effect.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>().<a class="code" href="../../d1/d7d/namespace_acore.html#ac2cb308fb001c35fbaa90489ea6cf478">ToString</a>().c_str(), target-&gt;<a class="code" href="../../d8/d83/class_object.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>().<a class="code" href="../../d8/d03/class_object_guid.html#a78f5fb47e3b35addf8984000c175125b">ToString</a>().c_str(), damage, <a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), absorb);</div>
<div class="line"><a name="l06305"></a><span class="lineno"> 6305</span>&#160;    <a class="code" href="../../da/db7/class_unit.html#af0c5f2f98b065f2d3976f18e4bc964a4">Unit::DealDamageMods</a>(target, damage, &amp;absorb);</div>
<div class="line"><a name="l06306"></a><span class="lineno"> 6306</span>&#160; </div>
<div class="line"><a name="l06307"></a><span class="lineno"> 6307</span>&#160;    <span class="comment">// Set trigger flag</span></div>
<div class="line"><a name="l06308"></a><span class="lineno"> 6308</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> procAttacker = <a class="code" href="../../d3/d75/_spell_mgr_8h.html#ade1c2af066d4cf1bbcd88f13f01cd4d6a429d6c885f9687a1b041436cb45d74ce">PROC_FLAG_DONE_PERIODIC</a>;</div>
<div class="line"><a name="l06309"></a><span class="lineno"> 6309</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> procVictim   = <a class="code" href="../../d3/d75/_spell_mgr_8h.html#ade1c2af066d4cf1bbcd88f13f01cd4d6a968d75fc25f1413369015f9ba98870b4">PROC_FLAG_TAKEN_PERIODIC</a>;</div>
<div class="line"><a name="l06310"></a><span class="lineno"> 6310</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> procEx = (crit ? <a class="code" href="../../d3/d75/_spell_mgr_8h.html#ac9aaef596a1061b6b944e1dc0e679b46a970bdf3e5f6192a44f1047c0a9c01310">PROC_EX_CRITICAL_HIT</a> : <a class="code" href="../../d3/d75/_spell_mgr_8h.html#ac9aaef596a1061b6b944e1dc0e679b46aa0c2a4e7377d6217e94cc8fc7c77b5b2">PROC_EX_NORMAL_HIT</a>) | <a class="code" href="../../d3/d75/_spell_mgr_8h.html#ac9aaef596a1061b6b944e1dc0e679b46a94a1aa9ac3cd331d95f2d0c421f35f59">PROC_EX_INTERNAL_DOT</a>;</div>
<div class="line"><a name="l06311"></a><span class="lineno"> 6311</span>&#160;    <span class="keywordflow">if</span> (absorb &gt; 0)</div>
<div class="line"><a name="l06312"></a><span class="lineno"> 6312</span>&#160;        procEx |= <a class="code" href="../../d3/d75/_spell_mgr_8h.html#ac9aaef596a1061b6b944e1dc0e679b46ad0f376666fe646253e445dedfae7753f">PROC_EX_ABSORB</a>;</div>
<div class="line"><a name="l06313"></a><span class="lineno"> 6313</span>&#160; </div>
<div class="line"><a name="l06314"></a><span class="lineno"> 6314</span>&#160;    <span class="keywordflow">if</span> (damage)</div>
<div class="line"><a name="l06315"></a><span class="lineno"> 6315</span>&#160;        procVictim |= <a class="code" href="../../d3/d75/_spell_mgr_8h.html#ade1c2af066d4cf1bbcd88f13f01cd4d6abcffcf75e3fd5015383c586153dc32c1">PROC_FLAG_TAKEN_DAMAGE</a>;</div>
<div class="line"><a name="l06316"></a><span class="lineno"> 6316</span>&#160; </div>
<div class="line"><a name="l06317"></a><span class="lineno"> 6317</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> overkill = damage - target-&gt;<a class="code" href="../../da/db7/class_unit.html#a958172d6051b106e3b3c776e4f9f3952">GetHealth</a>();</div>
<div class="line"><a name="l06318"></a><span class="lineno"> 6318</span>&#160;    <span class="keywordflow">if</span> (overkill &lt; 0)</div>
<div class="line"><a name="l06319"></a><span class="lineno"> 6319</span>&#160;        overkill = 0;</div>
<div class="line"><a name="l06320"></a><span class="lineno"> 6320</span>&#160; </div>
<div class="line"><a name="l06321"></a><span class="lineno"> 6321</span>&#160;    <a class="code" href="../../db/d9b/struct_spell_periodic_aura_log_info.html">SpellPeriodicAuraLogInfo</a> pInfo(<span class="keyword">this</span>, damage, overkill, absorb, resist, 0.0f, crit);</div>
<div class="line"><a name="l06322"></a><span class="lineno"> 6322</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#ac6e545dc53605a0c05d8556cf66040c1">SendPeriodicAuraLog</a>(&amp;pInfo);</div>
<div class="line"><a name="l06323"></a><span class="lineno"> 6323</span>&#160; </div>
<div class="line"><a name="l06324"></a><span class="lineno"> 6324</span>&#160;    <a class="code" href="../../da/db7/class_unit.html#a17634e22688c21c1d7152d3b6c32edaa">Unit::DealDamage</a>(caster, target, damage, &amp;cleanDamage, <a class="code" href="../../d5/d32/_unit_8h.html#aff59f402d05917ab1de0c5f6bf148ea4a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;GetSchoolMask(), <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), <span class="keyword">true</span>);</div>
<div class="line"><a name="l06325"></a><span class="lineno"> 6325</span>&#160;    <span class="comment">// allow null caster to call this function</span></div>
<div class="line"><a name="l06326"></a><span class="lineno"> 6326</span>&#160;    caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a375e0763d4b957264485484db71be2d6">ProcDamageAndSpell</a>(target, caster ? procAttacker : 0, procVictim, procEx, damage, <a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), <span class="keyword">nullptr</span>, <a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>(), <span class="keyword">nullptr</span>, &amp;dmgInfo);</div>
<div class="line"><a name="l06327"></a><span class="lineno"> 6327</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_a0b4a3c2c7210e88f82b3dc3abb6e6f77a8ad5debef66c8aadbaf13f97f522e791"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a0b4a3c2c7210e88f82b3dc3abb6e6f77a8ad5debef66c8aadbaf13f97f522e791">EFFECT_1</a></div><div class="ttdeci">@ EFFECT_1</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00031">SharedDefines.h:31</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a292c893150c454dd75628b719db1fe97aa3290e738b6cd09859039989143f9ac1"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a292c893150c454dd75628b719db1fe97aa3290e738b6cd09859039989143f9ac1">SPELL_EFFECT_PERSISTENT_AREA_AURA</a></div><div class="ttdeci">@ SPELL_EFFECT_PERSISTENT_AREA_AURA</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00777">SharedDefines.h:777</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0a134bc75d430da10f6c1df4977c29cf"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0a134bc75d430da10f6c1df4977c29cf">SPELLFAMILY_WARLOCK</a></div><div class="ttdeci">@ SPELLFAMILY_WARLOCK</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l03459">SharedDefines.h:3459</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_ac42174a036914cd9ca25c52e98bef65aa893d017f010f243616e70394c7fec096"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#ac42174a036914cd9ca25c52e98bef65aa893d017f010f243616e70394c7fec096">SPELL_MISS_NONE</a></div><div class="ttdeci">@ SPELL_MISS_NONE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01491">SharedDefines.h:1491</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_ade4e7c2cbd17c45015f9f70c2a5400b2a51cd79314936d46d8bc738a8c1207ab4"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#ade4e7c2cbd17c45015f9f70c2a5400b2a51cd79314936d46d8bc738a8c1207ab4">DYNOBJ_AURA_TYPE</a></div><div class="ttdeci">@ DYNOBJ_AURA_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00386">SpellAuraDefines.h:386</a></div></div>
<div class="ttc" id="a_spell_mgr_8h_html_ac9aaef596a1061b6b944e1dc0e679b46a94a1aa9ac3cd331d95f2d0c421f35f59"><div class="ttname"><a href="../../d3/d75/_spell_mgr_8h.html#ac9aaef596a1061b6b944e1dc0e679b46a94a1aa9ac3cd331d95f2d0c421f35f59">PROC_EX_INTERNAL_DOT</a></div><div class="ttdeci">@ PROC_EX_INTERNAL_DOT</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d75/_spell_mgr_8h_source.html#l00219">SpellMgr.h:219</a></div></div>
<div class="ttc" id="a_spell_mgr_8h_html_ac9aaef596a1061b6b944e1dc0e679b46a970bdf3e5f6192a44f1047c0a9c01310"><div class="ttname"><a href="../../d3/d75/_spell_mgr_8h.html#ac9aaef596a1061b6b944e1dc0e679b46a970bdf3e5f6192a44f1047c0a9c01310">PROC_EX_CRITICAL_HIT</a></div><div class="ttdeci">@ PROC_EX_CRITICAL_HIT</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d75/_spell_mgr_8h_source.html#l00195">SpellMgr.h:195</a></div></div>
<div class="ttc" id="a_spell_mgr_8h_html_ac9aaef596a1061b6b944e1dc0e679b46aa0c2a4e7377d6217e94cc8fc7c77b5b2"><div class="ttname"><a href="../../d3/d75/_spell_mgr_8h.html#ac9aaef596a1061b6b944e1dc0e679b46aa0c2a4e7377d6217e94cc8fc7c77b5b2">PROC_EX_NORMAL_HIT</a></div><div class="ttdeci">@ PROC_EX_NORMAL_HIT</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d75/_spell_mgr_8h_source.html#l00194">SpellMgr.h:194</a></div></div>
<div class="ttc" id="a_spell_mgr_8h_html_ac9aaef596a1061b6b944e1dc0e679b46ad0f376666fe646253e445dedfae7753f"><div class="ttname"><a href="../../d3/d75/_spell_mgr_8h.html#ac9aaef596a1061b6b944e1dc0e679b46ad0f376666fe646253e445dedfae7753f">PROC_EX_ABSORB</a></div><div class="ttdeci">@ PROC_EX_ABSORB</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d75/_spell_mgr_8h_source.html#l00204">SpellMgr.h:204</a></div></div>
<div class="ttc" id="a_spell_mgr_8h_html_ade1c2af066d4cf1bbcd88f13f01cd4d6a429d6c885f9687a1b041436cb45d74ce"><div class="ttname"><a href="../../d3/d75/_spell_mgr_8h.html#ade1c2af066d4cf1bbcd88f13f01cd4d6a429d6c885f9687a1b041436cb45d74ce">PROC_FLAG_DONE_PERIODIC</a></div><div class="ttdeci">@ PROC_FLAG_DONE_PERIODIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d75/_spell_mgr_8h_source.html#l00134">SpellMgr.h:134</a></div></div>
<div class="ttc" id="a_spell_mgr_8h_html_ade1c2af066d4cf1bbcd88f13f01cd4d6a968d75fc25f1413369015f9ba98870b4"><div class="ttname"><a href="../../d3/d75/_spell_mgr_8h.html#ade1c2af066d4cf1bbcd88f13f01cd4d6a968d75fc25f1413369015f9ba98870b4">PROC_FLAG_TAKEN_PERIODIC</a></div><div class="ttdeci">@ PROC_FLAG_TAKEN_PERIODIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d75/_spell_mgr_8h_source.html#l00135">SpellMgr.h:135</a></div></div>
<div class="ttc" id="a_spell_mgr_8h_html_ade1c2af066d4cf1bbcd88f13f01cd4d6abcffcf75e3fd5015383c586153dc32c1"><div class="ttname"><a href="../../d3/d75/_spell_mgr_8h.html#ade1c2af066d4cf1bbcd88f13f01cd4d6abcffcf75e3fd5015383c586153dc32c1">PROC_FLAG_TAKEN_DAMAGE</a></div><div class="ttdeci">@ PROC_FLAG_TAKEN_DAMAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d75/_spell_mgr_8h_source.html#l00137">SpellMgr.h:137</a></div></div>
<div class="ttc" id="a_unit_8h_html_aa60e4ef21982cf41b489e5242f01b64fa40402f79e36b6c6687d2a6511bb19aad"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#aa60e4ef21982cf41b489e5242f01b64fa40402f79e36b6c6687d2a6511bb19aad">CR_CRIT_TAKEN_SPELL</a></div><div class="ttdeci">@ CR_CRIT_TAKEN_SPELL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00579">Unit.h:579</a></div></div>
<div class="ttc" id="a_unit_8h_html_aba4a9525e87c7e76c6c005bc3c3f53a5a9c5d76fbca1fce33b08a1655b9017272"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#aba4a9525e87c7e76c6c005bc3c3f53a5a9c5d76fbca1fce33b08a1655b9017272">MELEE_HIT_NORMAL</a></div><div class="ttdeci">@ MELEE_HIT_NORMAL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00866">Unit.h:865</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a1360fcb79edcab37b0a7b362bb6e7b2a"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a1360fcb79edcab37b0a7b362bb6e7b2a">AuraEffect::CanApplyResilience</a></div><div class="ttdeci">bool CanApplyResilience() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00103">SpellAuraEffects.h:103</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a374ccc25c81de041d10e1ed2b52a238c"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a374ccc25c81de041d10e1ed2b52a238c">AuraEffect::GetCritChance</a></div><div class="ttdeci">float GetCritChance() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00100">SpellAuraEffects.h:100</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a67ca18798f448847e77665752fa4a32c"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a67ca18798f448847e77665752fa4a32c">AuraEffect::GetTotalTicks</a></div><div class="ttdeci">int32 GetTotalTicks() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00080">SpellAuraEffects.h:80</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a7595664aebf24652d3ce95d6bdc18ebe"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a7595664aebf24652d3ce95d6bdc18ebe">AuraEffect::GetCasterLevel</a></div><div class="ttdeci">uint8 GetCasterLevel() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00102">SpellAuraEffects.h:102</a></div></div>
<div class="ttc" id="aclass_damage_info_html"><div class="ttname"><a href="../../d6/d2a/class_damage_info.html">DamageInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00902">Unit.h:903</a></div></div>
<div class="ttc" id="aclass_unit_html_a0bd6c785f03c6b0010f9da02b880cee3"><div class="ttname"><a href="../../da/db7/class_unit.html#a0bd6c785f03c6b0010f9da02b880cee3">Unit::ApplyResilience</a></div><div class="ttdeci">static void ApplyResilience(const Unit *victim, float *crit, int32 *damage, bool isCrit, CombatRating type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l18044">Unit.cpp:18044</a></div></div>
<div class="ttc" id="aclass_unit_html_a17634e22688c21c1d7152d3b6c32edaa"><div class="ttname"><a href="../../da/db7/class_unit.html#a17634e22688c21c1d7152d3b6c32edaa">Unit::DealDamage</a></div><div class="ttdeci">static uint32 DealDamage(Unit *attacker, Unit *victim, uint32 damage, CleanDamage const *cleanDamage=nullptr, DamageEffectType damagetype=DIRECT_DAMAGE, SpellSchoolMask damageSchoolMask=SPELL_SCHOOL_MASK_NORMAL, SpellInfo const *spellProto=nullptr, bool durabilityLoss=true, bool allowGM=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l00773">Unit.cpp:773</a></div></div>
<div class="ttc" id="aclass_unit_html_a375e0763d4b957264485484db71be2d6"><div class="ttname"><a href="../../da/db7/class_unit.html#a375e0763d4b957264485484db71be2d6">Unit::ProcDamageAndSpell</a></div><div class="ttdeci">void ProcDamageAndSpell(Unit *victim, uint32 procAttacker, uint32 procVictim, uint32 procEx, uint32 amount, WeaponAttackType attType=BASE_ATTACK, SpellInfo const *procSpellInfo=nullptr, SpellInfo const *procAura=nullptr, int8 procAuraEffectIndex=-1, Spell const *procSpell=nullptr, DamageInfo *damageInfo=nullptr, HealInfo *healInfo=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l05823">Unit.cpp:5823</a></div></div>
<div class="ttc" id="aclass_unit_html_a3dee46b283ebc2e4bcace26c01895387"><div class="ttname"><a href="../../da/db7/class_unit.html#a3dee46b283ebc2e4bcace26c01895387">Unit::CalcArmorReducedDamage</a></div><div class="ttdeci">static uint32 CalcArmorReducedDamage(Unit const *attacker, Unit const *victim, const uint32 damage, SpellInfo const *spellInfo, uint8 attackerLevel=0, WeaponAttackType attackType=MAX_ATTACK)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l01752">Unit.cpp:1752</a></div></div>
<div class="ttc" id="aclass_unit_html_a4f7bacd5659d1e3ca130dc7cf7df7bee"><div class="ttname"><a href="../../da/db7/class_unit.html#a4f7bacd5659d1e3ca130dc7cf7df7bee">Unit::CalculateAOEDamageReduction</a></div><div class="ttdeci">int32 CalculateAOEDamageReduction(int32 damage, uint32 schoolMask, Unit *caster) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l19494">Unit.cpp:19494</a></div></div>
<div class="ttc" id="aclass_unit_html_a5725cda05eb9a83f0731778d27a2a80c"><div class="ttname"><a href="../../da/db7/class_unit.html#a5725cda05eb9a83f0731778d27a2a80c">Unit::IsFullHealth</a></div><div class="ttdeci">bool IsFullHealth() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01562">Unit.h:1562</a></div></div>
<div class="ttc" id="aclass_unit_html_a8698eb184506578c00250d3c4c352722"><div class="ttname"><a href="../../da/db7/class_unit.html#a8698eb184506578c00250d3c4c352722">Unit::SpellHitResult</a></div><div class="ttdeci">SpellMissInfo SpellHitResult(Unit *victim, SpellInfo const *spell, bool canReflect=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l03114">Unit.cpp:3114</a></div></div>
<div class="ttc" id="aclass_unit_html_a8a91714bd4edbbb272b5c90cefc8089d"><div class="ttname"><a href="../../da/db7/class_unit.html#a8a91714bd4edbbb272b5c90cefc8089d">Unit::SpellCriticalDamageBonus</a></div><div class="ttdeci">static uint32 SpellCriticalDamageBonus(Unit const *caster, SpellInfo const *spellProto, uint32 damage, Unit const *victim)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l11621">Unit.cpp:11621</a></div></div>
<div class="ttc" id="aclass_unit_html_a8bcfed25889f307b4849743956ae67fc"><div class="ttname"><a href="../../da/db7/class_unit.html#a8bcfed25889f307b4849743956ae67fc">Unit::HealthBelowPct</a></div><div class="ttdeci">bool HealthBelowPct(int32 pct) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01563">Unit.h:1563</a></div></div>
<div class="ttc" id="aclass_unit_html_a8e8d13276a1ebef454bd4fc27fedc3f1"><div class="ttname"><a href="../../da/db7/class_unit.html#a8e8d13276a1ebef454bd4fc27fedc3f1">Unit::SpellDamageBonusTaken</a></div><div class="ttdeci">uint32 SpellDamageBonusTaken(Unit *caster, SpellInfo const *spellProto, uint32 pdamage, DamageEffectType damagetype, uint32 stack=1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l11131">Unit.cpp:11131</a></div></div>
<div class="ttc" id="aclass_unit_html_ad53cf516713368986bab84af35245b53"><div class="ttname"><a href="../../da/db7/class_unit.html#ad53cf516713368986bab84af35245b53">Unit::IsDamageReducedByArmor</a></div><div class="ttdeci">static bool IsDamageReducedByArmor(SpellSchoolMask damageSchoolMask, SpellInfo const *spellInfo=nullptr, uint8 effIndex=MAX_SPELL_EFFECTS)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l01729">Unit.cpp:1729</a></div></div>
<div class="ttc" id="aclass_unit_html_ae7269683ec5b0e44c3ee49bd6f896615"><div class="ttname"><a href="../../da/db7/class_unit.html#ae7269683ec5b0e44c3ee49bd6f896615">Unit::IsImmunedToDamageOrSchool</a></div><div class="ttdeci">bool IsImmunedToDamageOrSchool(SpellSchoolMask meleeSchoolMask) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l12143">Unit.cpp:12143</a></div></div>
<div class="ttc" id="aclass_unit_html_af003db5856d82574c3db286a3a0186fd"><div class="ttname"><a href="../../da/db7/class_unit.html#af003db5856d82574c3db286a3a0186fd">Unit::CalcAbsorbResist</a></div><div class="ttdeci">static void CalcAbsorbResist(DamageInfo &amp;dmgInfo, bool Splited=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l01875">Unit.cpp:1875</a></div></div>
<div class="ttc" id="aclass_unit_html_af0c5f2f98b065f2d3976f18e4bc964a4"><div class="ttname"><a href="../../da/db7/class_unit.html#af0c5f2f98b065f2d3976f18e4bc964a4">Unit::DealDamageMods</a></div><div class="ttdeci">static void DealDamageMods(Unit const *victim, uint32 &amp;damage, uint32 *absorb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l00763">Unit.cpp:763</a></div></div>
<div class="ttc" id="asrc_2common_2_utilities_2_random_8h_html_a4b15099bc81731469c5078a778673c94"><div class="ttname"><a href="../../d1/d65/src_2common_2_utilities_2_random_8h.html#a4b15099bc81731469c5078a778673c94">roll_chance_f</a></div><div class="ttdeci">bool roll_chance_f(float chance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d65/src_2common_2_utilities_2_random_8h_source.html#l00053">Random.h:53</a></div></div>
<div class="ttc" id="astruct_clean_damage_html"><div class="ttname"><a href="../../d1/d6c/struct_clean_damage.html">CleanDamage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00887">Unit.h:888</a></div></div>
<div class="ttc" id="astruct_clean_damage_html_a6aeffc94560ac510c0b89e4384a2f41a"><div class="ttname"><a href="../../d1/d6c/struct_clean_damage.html#a6aeffc94560ac510c0b89e4384a2f41a">CleanDamage::mitigated_damage</a></div><div class="ttdeci">uint32 mitigated_damage</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00893">Unit.h:893</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l18044">Unit::ApplyResilience()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00555">BASE_ATTACK</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01875">Unit::CalcAbsorbResist()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01752">Unit::CalcArmorReducedDamage()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l19494">Unit::CalculateAOEDamageReduction()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00103">CanApplyResilience()</a>, <a class="el" href="../../d0/d57/_vector3int16_8cpp_source.html#l00055">G3D::ceil()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00579">CR_CRIT_TAKEN_SPELL</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l00773">Unit::DealDamage()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l00763">Unit::DealDamageMods()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00596">DOT</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00386">DYNOBJ_AURA_TYPE</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00031">EFFECT_1</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00387">SpellInfo::Effects</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00933">DamageInfo::GetAbsorb()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00446">GetAuraType()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">GetBase()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00041">GetCasterGUID()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00102">GetCasterLevel()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00100">GetCritChance()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00932">DamageInfo::GetDamage()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00049">GetEffIndex()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00098">Object::GetGUID()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01559">Unit::GetHealth()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">GetId()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01560">Unit::GetMaxHealth()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00934">DamageInfo::GetResist()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00147">Aura::GetStackAmount()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00080">GetTotalTicks()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l00476">Aura::GetType()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01519">Unit::HasUnitState()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01563">Unit::HealthBelowPct()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01888">Unit::IsAlive()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01729">Unit::IsDamageReducedByArmor()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01562">Unit::IsFullHealth()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l12143">Unit::IsImmunedToDamageOrSchool()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01536">Unit::IsTotem()</a>, <a class="el" href="../../d3/d07/src_2common_2_logging_2_log_8h_source.html#l00273">LOG_DEBUG</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00115">m_spellInfo</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00135">m_tickNumber</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l01386">max</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00865">MELEE_HIT_NORMAL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00893">CleanDamage::mitigated_damage</a>, <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00204">PROC_EX_ABSORB</a>, <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00195">PROC_EX_CRITICAL_HIT</a>, <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00219">PROC_EX_INTERNAL_DOT</a>, <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00194">PROC_EX_NORMAL_HIT</a>, <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00134">PROC_FLAG_DONE_PERIODIC</a>, <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00137">PROC_FLAG_TAKEN_DAMAGE</a>, <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00135">PROC_FLAG_TAKEN_PERIODIC</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05823">Unit::ProcDamageAndSpell()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04420">Unit::RemoveAurasDueToSpell()</a>, <a class="el" href="../../d1/d65/src_2common_2_utilities_2_random_8h_source.html#l00053">roll_chance_f()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05834">Unit::SendPeriodicAuraLog()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01081">SendTickImmune()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00066">SPELL_AURA_PERIODIC_DAMAGE</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00777">SPELL_EFFECT_PERSISTENT_AREA_AURA</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01491">SPELL_MISS_NONE</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l11621">Unit::SpellCriticalDamageBonus()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l10988">Unit::SpellDamageBonusDone()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l11131">Unit::SpellDamageBonusTaken()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l03459">SPELLFAMILY_WARLOCK</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l03114">Unit::SpellHitResult()</a>, <a class="el" href="../../d0/d7d/_script_mgr_8h_source.html#l02048">sScriptMgr</a>, <a class="el" href="../../da/d5f/_object_guid_8cpp_source.html#l00047">ObjectGuid::ToString()</a>, <a class="el" href="../../de/d3c/_string_convert_8h_source.html#l00315">Acore::ToString()</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00497">UNIT_STATE_ISOLATED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01087">PeriodicTick()</a>.</p>

</div>
</div>
<a id="a61bdb07de2581972c79e3c3e46ecdbbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61bdb07de2581972c79e3c3e46ecdbbe">&#9670;&nbsp;</a></span>HandlePeriodicDummyAuraTick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandlePeriodicDummyAuraTick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05770">5770</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05771"></a><span class="lineno"> 5771</span>&#160;{</div>
<div class="line"><a name="l05772"></a><span class="lineno"> 5772</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;SpellFamilyName)</div>
<div class="line"><a name="l05773"></a><span class="lineno"> 5773</span>&#160;    {</div>
<div class="line"><a name="l05774"></a><span class="lineno"> 5774</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1bac3788ce010075b8bd4e6083638d8cd40">SPELLFAMILY_DRUID</a>:</div>
<div class="line"><a name="l05775"></a><span class="lineno"> 5775</span>&#160;            {</div>
<div class="line"><a name="l05776"></a><span class="lineno"> 5776</span>&#160;                <span class="keywordflow">switch</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;Id)</div>
<div class="line"><a name="l05777"></a><span class="lineno"> 5777</span>&#160;                {</div>
<div class="line"><a name="l05778"></a><span class="lineno"> 5778</span>&#160;                    <span class="comment">// Frenzied Regeneration</span></div>
<div class="line"><a name="l05779"></a><span class="lineno"> 5779</span>&#160;                    <span class="keywordflow">case</span> 22842:</div>
<div class="line"><a name="l05780"></a><span class="lineno"> 5780</span>&#160;                        {</div>
<div class="line"><a name="l05781"></a><span class="lineno"> 5781</span>&#160;                            <span class="comment">// Converts up to 10 rage per second into health for $d.  Each point of rage is converted into ${$m2/10}.1% of max health.</span></div>
<div class="line"><a name="l05782"></a><span class="lineno"> 5782</span>&#160;                            <span class="comment">// Should be manauser</span></div>
<div class="line"><a name="l05783"></a><span class="lineno"> 5783</span>&#160;                            <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#ad44d31430fab9282a79e8682822ccd9c">getPowerType</a>() != <a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414a1b514bf3a42e9a5dc4271bd25b7dce7e">POWER_RAGE</a>)</div>
<div class="line"><a name="l05784"></a><span class="lineno"> 5784</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05785"></a><span class="lineno"> 5785</span>&#160;                            <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> rage = target-&gt;<a class="code" href="../../da/db7/class_unit.html#ad7e475d80b9af430cc076d7c01f967e9">GetPower</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414a1b514bf3a42e9a5dc4271bd25b7dce7e">POWER_RAGE</a>);</div>
<div class="line"><a name="l05786"></a><span class="lineno"> 5786</span>&#160;                            <span class="comment">// Nothing todo</span></div>
<div class="line"><a name="l05787"></a><span class="lineno"> 5787</span>&#160;                            <span class="keywordflow">if</span> (rage == 0)</div>
<div class="line"><a name="l05788"></a><span class="lineno"> 5788</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05789"></a><span class="lineno"> 5789</span>&#160;                            <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> <a class="code" href="../../dd/d90/chrono_8h.html#ade692a13be7c7dfac09a8ff2fd00d172">mod</a> = (rage &lt; 100) ? rage : 100;</div>
<div class="line"><a name="l05790"></a><span class="lineno"> 5790</span>&#160;                            <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> points = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a31bb114ec4c1defc9e19d29840c6a6d0">CalculateSpellDamage</a>(target, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), 1);</div>
<div class="line"><a name="l05791"></a><span class="lineno"> 5791</span>&#160;                            <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> regen = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5173c1774b09b42c409bf31280c37d36">GetMaxHealth</a>() * (<a class="code" href="../../dd/d90/chrono_8h.html#ade692a13be7c7dfac09a8ff2fd00d172">mod</a> * points / 10) / 1000;</div>
<div class="line"><a name="l05792"></a><span class="lineno"> 5792</span>&#160;                            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(target, 22845, &amp;regen, 0, 0, <span class="keyword">true</span>, 0, <span class="keyword">this</span>);</div>
<div class="line"><a name="l05793"></a><span class="lineno"> 5793</span>&#160;                            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9bf14ad2afa43d552c76b843615a8bf8">SetPower</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414a1b514bf3a42e9a5dc4271bd25b7dce7e">POWER_RAGE</a>, rage - <a class="code" href="../../dd/d90/chrono_8h.html#ade692a13be7c7dfac09a8ff2fd00d172">mod</a>);</div>
<div class="line"><a name="l05794"></a><span class="lineno"> 5794</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05795"></a><span class="lineno"> 5795</span>&#160;                        }</div>
<div class="line"><a name="l05796"></a><span class="lineno"> 5796</span>&#160;                }</div>
<div class="line"><a name="l05797"></a><span class="lineno"> 5797</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05798"></a><span class="lineno"> 5798</span>&#160;            }</div>
<div class="line"><a name="l05799"></a><span class="lineno"> 5799</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba66df9b34a3b922a8242d3dfb74494026">SPELLFAMILY_HUNTER</a>:</div>
<div class="line"><a name="l05800"></a><span class="lineno"> 5800</span>&#160;            {</div>
<div class="line"><a name="l05801"></a><span class="lineno"> 5801</span>&#160;                <span class="comment">// Explosive Shot</span></div>
<div class="line"><a name="l05802"></a><span class="lineno"> 5802</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a30452de2bd62607418f3962d00124144">SpellFamilyFlags</a>[1] &amp; 0x80000000)</div>
<div class="line"><a name="l05803"></a><span class="lineno"> 5803</span>&#160;                {</div>
<div class="line"><a name="l05804"></a><span class="lineno"> 5804</span>&#160;                    <span class="keywordflow">if</span> (caster)</div>
<div class="line"><a name="l05805"></a><span class="lineno"> 5805</span>&#160;                        caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(53352, <a class="code" href="../../d5/d32/_unit_8h.html#a4ad87b8c967acbbcb154a32bc123371bae5c19f392b2ebda372a39538fa9b592a">SPELLVALUE_BASE_POINT0</a>, <a class="code" href="../../da/df1/class_aura_effect.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a>, target, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l05806"></a><span class="lineno"> 5806</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05807"></a><span class="lineno"> 5807</span>&#160;                }</div>
<div class="line"><a name="l05808"></a><span class="lineno"> 5808</span>&#160;                <span class="keywordflow">switch</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a49bc14059c2bd3785231c52e0d54d382">Id</a>)</div>
<div class="line"><a name="l05809"></a><span class="lineno"> 5809</span>&#160;                {</div>
<div class="line"><a name="l05810"></a><span class="lineno"> 5810</span>&#160;                    <span class="comment">// Feeding Frenzy Rank 1</span></div>
<div class="line"><a name="l05811"></a><span class="lineno"> 5811</span>&#160;                    <span class="keywordflow">case</span> 53511:</div>
<div class="line"><a name="l05812"></a><span class="lineno"> 5812</span>&#160;                        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#af8c91dcb86bd35e070c646e8baeaa4b4">GetVictim</a>() &amp;&amp; target-&gt;<a class="code" href="../../da/db7/class_unit.html#af8c91dcb86bd35e070c646e8baeaa4b4">GetVictim</a>()-&gt;<a class="code" href="../../da/db7/class_unit.html#a8bcfed25889f307b4849743956ae67fc">HealthBelowPct</a>(35))</div>
<div class="line"><a name="l05813"></a><span class="lineno"> 5813</span>&#160;                            target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 60096, <span class="keyword">true</span>, 0, <span class="keyword">this</span>);</div>
<div class="line"><a name="l05814"></a><span class="lineno"> 5814</span>&#160;                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05815"></a><span class="lineno"> 5815</span>&#160;                    <span class="comment">// Feeding Frenzy Rank 2</span></div>
<div class="line"><a name="l05816"></a><span class="lineno"> 5816</span>&#160;                    <span class="keywordflow">case</span> 53512:</div>
<div class="line"><a name="l05817"></a><span class="lineno"> 5817</span>&#160;                        <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#af8c91dcb86bd35e070c646e8baeaa4b4">GetVictim</a>() &amp;&amp; target-&gt;<a class="code" href="../../da/db7/class_unit.html#af8c91dcb86bd35e070c646e8baeaa4b4">GetVictim</a>()-&gt;<a class="code" href="../../da/db7/class_unit.html#a8bcfed25889f307b4849743956ae67fc">HealthBelowPct</a>(35))</div>
<div class="line"><a name="l05818"></a><span class="lineno"> 5818</span>&#160;                            target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 60097, <span class="keyword">true</span>, 0, <span class="keyword">this</span>);</div>
<div class="line"><a name="l05819"></a><span class="lineno"> 5819</span>&#160;                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05820"></a><span class="lineno"> 5820</span>&#160;                    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l05821"></a><span class="lineno"> 5821</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05822"></a><span class="lineno"> 5822</span>&#160;                }</div>
<div class="line"><a name="l05823"></a><span class="lineno"> 5823</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05824"></a><span class="lineno"> 5824</span>&#160;            }</div>
<div class="line"><a name="l05825"></a><span class="lineno"> 5825</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba9c8a9c6e102c760263471a93e58e80ea">SPELLFAMILY_SHAMAN</a>:</div>
<div class="line"><a name="l05826"></a><span class="lineno"> 5826</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>() == 52179) <span class="comment">// Astral Shift</span></div>
<div class="line"><a name="l05827"></a><span class="lineno"> 5827</span>&#160;            {</div>
<div class="line"><a name="l05828"></a><span class="lineno"> 5828</span>&#160;                <span class="comment">// Periodic need for remove visual on stun/fear/silence lost</span></div>
<div class="line"><a name="l05829"></a><span class="lineno"> 5829</span>&#160;                <span class="keywordflow">if</span> (!(target-&gt;<a class="code" href="../../d8/d83/class_object.html#a3264388b9f92da9de7641477b3dc77f9">GetUInt32Value</a>(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881aab4868b631f1cfaf30faee627f7c9dbf">UNIT_FIELD_FLAGS</a>) &amp; (<a class="code" href="../../d5/d32/_unit_8h.html#afaf72688a238d4ba16ba2ae1444cd552a20d03528858479b31941a42820257eeb">UNIT_FLAG_STUNNED</a> | <a class="code" href="../../d5/d32/_unit_8h.html#afaf72688a238d4ba16ba2ae1444cd552a8ad2e62c7207250ee894d9a30d6bf130">UNIT_FLAG_FLEEING</a> | <a class="code" href="../../d5/d32/_unit_8h.html#afaf72688a238d4ba16ba2ae1444cd552ac5e049a6b427ad34206151958117403e">UNIT_FLAG_SILENCED</a>)))</div>
<div class="line"><a name="l05830"></a><span class="lineno"> 5830</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(52179);</div>
<div class="line"><a name="l05831"></a><span class="lineno"> 5831</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05832"></a><span class="lineno"> 5832</span>&#160;            }</div>
<div class="line"><a name="l05833"></a><span class="lineno"> 5833</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05834"></a><span class="lineno"> 5834</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1badc34b27f2cd523716d80c51d4e1d6f02">SPELLFAMILY_DEATHKNIGHT</a>:</div>
<div class="line"><a name="l05835"></a><span class="lineno"> 5835</span>&#160;            <span class="keywordflow">switch</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>())</div>
<div class="line"><a name="l05836"></a><span class="lineno"> 5836</span>&#160;            {</div>
<div class="line"><a name="l05837"></a><span class="lineno"> 5837</span>&#160;                <span class="keywordflow">case</span> 49016: <span class="comment">// Hysteria</span></div>
<div class="line"><a name="l05838"></a><span class="lineno"> 5838</span>&#160;                    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> damage = <a class="code" href="../../df/de2/namespace_g3_d.html#ae911b90657d7162d47997c702af655a8">uint32</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#ac6fc3f50b72cb6f2fd8bb988d48a8dba">CountPctFromMaxHealth</a>(1));</div>
<div class="line"><a name="l05839"></a><span class="lineno"> 5839</span>&#160;                    <a class="code" href="../../da/db7/class_unit.html#a17634e22688c21c1d7152d3b6c32edaa">Unit::DealDamage</a>(target, target, damage, <span class="keyword">nullptr</span>, <a class="code" href="../../d5/d32/_unit_8h.html#aff59f402d05917ab1de0c5f6bf148ea4a4d37f6fc3002a603384fa9e9d9368d35">NODAMAGE</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#aff6913cfd69489c107a071be9ec2ec8fa12667dd3f55738c93e1ddb1351779b42">SPELL_SCHOOL_MASK_NORMAL</a>, <span class="keyword">nullptr</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l05840"></a><span class="lineno"> 5840</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05841"></a><span class="lineno"> 5841</span>&#160;            }</div>
<div class="line"><a name="l05842"></a><span class="lineno"> 5842</span>&#160;            <span class="comment">// Blood of the North</span></div>
<div class="line"><a name="l05843"></a><span class="lineno"> 5843</span>&#160;            <span class="comment">// Reaping</span></div>
<div class="line"><a name="l05844"></a><span class="lineno"> 5844</span>&#160;            <span class="comment">// Death Rune Mastery</span></div>
<div class="line"><a name="l05845"></a><span class="lineno"> 5845</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;SpellIconID == 3041 || <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;SpellIconID == 22 || <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;SpellIconID == 2622)</div>
<div class="line"><a name="l05846"></a><span class="lineno"> 5846</span>&#160;            {</div>
<div class="line"><a name="l05847"></a><span class="lineno"> 5847</span>&#160;                <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l05848"></a><span class="lineno"> 5848</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05849"></a><span class="lineno"> 5849</span>&#160;                <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../da/db7/class_unit.html#a58a507ebe628930b8a506144b364d84b">getClass</a>() != <a class="code" href="../../df/d0b/_shared_defines_8h.html#a86e4e3df7a5142175aa5df522d3346cfa7f7b30426fd386c181799196c1739058">CLASS_DEATH_KNIGHT</a>)</div>
<div class="line"><a name="l05850"></a><span class="lineno"> 5850</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05851"></a><span class="lineno"> 5851</span>&#160; </div>
<div class="line"><a name="l05852"></a><span class="lineno"> 5852</span>&#160;                <span class="comment">// timer expired - remove death runes</span></div>
<div class="line"><a name="l05853"></a><span class="lineno"> 5853</span>&#160;                target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a0d99907a41953dfe2e4589a785503fc1">RemoveRunesByAuraEffect</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l05854"></a><span class="lineno"> 5854</span>&#160;            }</div>
<div class="line"><a name="l05855"></a><span class="lineno"> 5855</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05856"></a><span class="lineno"> 5856</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l05857"></a><span class="lineno"> 5857</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05858"></a><span class="lineno"> 5858</span>&#160;    }</div>
<div class="line"><a name="l05859"></a><span class="lineno"> 5859</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_a9264ae6b0ef1b61a6eeb7fdac9fbab1ba66df9b34a3b922a8242d3dfb74494026"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba66df9b34a3b922a8242d3dfb74494026">SPELLFAMILY_HUNTER</a></div><div class="ttdeci">@ SPELLFAMILY_HUNTER</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l03463">SharedDefines.h:3463</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a9264ae6b0ef1b61a6eeb7fdac9fbab1badc34b27f2cd523716d80c51d4e1d6f02"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1badc34b27f2cd523716d80c51d4e1d6f02">SPELLFAMILY_DEATHKNIGHT</a></div><div class="ttdeci">@ SPELLFAMILY_DEATHKNIGHT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l03469">SharedDefines.h:3469</a></div></div>
<div class="ttc" id="a_unit_8h_html_a4ad87b8c967acbbcb154a32bc123371bae5c19f392b2ebda372a39538fa9b592a"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a4ad87b8c967acbbcb154a32bc123371bae5c19f392b2ebda372a39538fa9b592a">SPELLVALUE_BASE_POINT0</a></div><div class="ttdeci">@ SPELLVALUE_BASE_POINT0</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00122">Unit.h:122</a></div></div>
<div class="ttc" id="a_unit_8h_html_afaf72688a238d4ba16ba2ae1444cd552a20d03528858479b31941a42820257eeb"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#afaf72688a238d4ba16ba2ae1444cd552a20d03528858479b31941a42820257eeb">UNIT_FLAG_STUNNED</a></div><div class="ttdeci">@ UNIT_FLAG_STUNNED</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00624">Unit.h:624</a></div></div>
<div class="ttc" id="a_unit_8h_html_afaf72688a238d4ba16ba2ae1444cd552a8ad2e62c7207250ee894d9a30d6bf130"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#afaf72688a238d4ba16ba2ae1444cd552a8ad2e62c7207250ee894d9a30d6bf130">UNIT_FLAG_FLEEING</a></div><div class="ttdeci">@ UNIT_FLAG_FLEEING</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00629">Unit.h:629</a></div></div>
<div class="ttc" id="a_unit_8h_html_aff59f402d05917ab1de0c5f6bf148ea4a4d37f6fc3002a603384fa9e9d9368d35"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#aff59f402d05917ab1de0c5f6bf148ea4a4d37f6fc3002a603384fa9e9d9368d35">NODAMAGE</a></div><div class="ttdeci">@ NODAMAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00598">Unit.h:598</a></div></div>
<div class="ttc" id="achrono_8h_html_ade692a13be7c7dfac09a8ff2fd00d172"><div class="ttname"><a href="../../dd/d90/chrono_8h.html#ade692a13be7c7dfac09a8ff2fd00d172">mod</a></div><div class="ttdeci">T mod(T x, int y)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d90/chrono_8h_source.html#l00822">chrono.h:822</a></div></div>
<div class="ttc" id="aclass_object_html_a3264388b9f92da9de7641477b3dc77f9"><div class="ttname"><a href="../../d8/d83/class_object.html#a3264388b9f92da9de7641477b3dc77f9">Object::GetUInt32Value</a></div><div class="ttdeci">uint32 GetUInt32Value(uint16 index) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/ded/_object_8cpp_source.html#l00300">Object.cpp:300</a></div></div>
<div class="ttc" id="aclass_spell_info_html_a30452de2bd62607418f3962d00124144"><div class="ttname"><a href="../../d4/d7d/class_spell_info.html#a30452de2bd62607418f3962d00124144">SpellInfo::SpellFamilyFlags</a></div><div class="ttdeci">flag96 SpellFamilyFlags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d70/_spell_info_8h_source.html#l00382">SpellInfo.h:382</a></div></div>
<div class="ttc" id="aclass_unit_html_ac6fc3f50b72cb6f2fd8bb988d48a8dba"><div class="ttname"><a href="../../da/db7/class_unit.html#ac6fc3f50b72cb6f2fd8bb988d48a8dba">Unit::CountPctFromMaxHealth</a></div><div class="ttdeci">uint32 CountPctFromMaxHealth(int32 pct) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01568">Unit.h:1568</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l14008">Unit::CalculateSpellDamage()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01144">Unit::CastCustomSpell()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01087">Unit::CastSpell()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00118">CLASS_DEATH_KNIGHT</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01568">Unit::CountPctFromMaxHealth()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l00773">Unit::DealDamage()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01545">Unit::getClass()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">GetId()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01560">Unit::GetMaxHealth()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01580">Unit::GetPower()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01578">Unit::getPowerType()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00300">Object::GetUInt32Value()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01508">Unit::GetVictim()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01563">Unit::HealthBelowPct()</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00315">SpellInfo::Id</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00120">m_amount</a>, <a class="el" href="../../dd/d90/chrono_8h_source.html#l00822">mod()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00598">NODAMAGE</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00242">POWER_RAGE</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04420">Unit::RemoveAurasDueToSpell()</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l12574">Player::RemoveRunesByAuraEffect()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l14707">Unit::SetPower()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00269">SPELL_SCHOOL_MASK_NORMAL</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l03469">SPELLFAMILY_DEATHKNIGHT</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l03461">SPELLFAMILY_DRUID</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l03463">SPELLFAMILY_HUNTER</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l03465">SPELLFAMILY_SHAMAN</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00382">SpellInfo::SpellFamilyFlags</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00122">SPELLVALUE_BASE_POINT0</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00117">UNIT_FIELD_FLAGS</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00629">UNIT_FLAG_FLEEING</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00619">UNIT_FLAG_SILENCED</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00624">UNIT_FLAG_STUNNED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01087">PeriodicTick()</a>.</p>

</div>
</div>
<a id="a4cee5e983225342908700110067f258a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cee5e983225342908700110067f258a">&#9670;&nbsp;</a></span>HandlePeriodicEnergizeAuraTick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandlePeriodicEnergizeAuraTick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06703">6703</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l06704"></a><span class="lineno"> 6704</span>&#160;{</div>
<div class="line"><a name="l06705"></a><span class="lineno"> 6705</span>&#160;    <a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414">Powers</a> <a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a> = <a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414">Powers</a>(<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><a name="l06706"></a><span class="lineno"> 6706</span>&#160; </div>
<div class="line"><a name="l06707"></a><span class="lineno"> 6707</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a> &amp;&amp; target-&gt;<a class="code" href="../../da/db7/class_unit.html#ad44d31430fab9282a79e8682822ccd9c">getPowerType</a>() != <a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a> &amp;&amp; !<a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a25ff5d34ce79433dfc852484cef1d47da1e9f8e7b13f64d6fd671411d5e906dfb">SPELL_ATTR7_ONLY_IN_SPELLBOOK_UNTIL_LEARNED</a>))</div>
<div class="line"><a name="l06708"></a><span class="lineno"> 6708</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06709"></a><span class="lineno"> 6709</span>&#160; </div>
<div class="line"><a name="l06710"></a><span class="lineno"> 6710</span>&#160;    <span class="keywordflow">if</span> (!target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5ea3f54af571493f7889220724667189">IsAlive</a>() || !target-&gt;<a class="code" href="../../da/db7/class_unit.html#a93f83fd909310de2c76382d00d7dbbf1">GetMaxPower</a>(<a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>))</div>
<div class="line"><a name="l06711"></a><span class="lineno"> 6711</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06712"></a><span class="lineno"> 6712</span>&#160; </div>
<div class="line"><a name="l06713"></a><span class="lineno"> 6713</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#ab78147cd520d2dac6be709b4c80a7de3">HasUnitState</a>(<a class="code" href="../../d5/d32/_unit_8h.html#ae51d2ecb71f7a5cb3882982a622c9544a7c4ae74029844364315885e02df35505">UNIT_STATE_ISOLATED</a>))</div>
<div class="line"><a name="l06714"></a><span class="lineno"> 6714</span>&#160;    {</div>
<div class="line"><a name="l06715"></a><span class="lineno"> 6715</span>&#160;        <a class="code" href="../../da/df1/class_aura_effect.html#a94ad6938ac754595a00f0f5a8e2019c5">SendTickImmune</a>(target, caster);</div>
<div class="line"><a name="l06716"></a><span class="lineno"> 6716</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06717"></a><span class="lineno"> 6717</span>&#160;    }</div>
<div class="line"><a name="l06718"></a><span class="lineno"> 6718</span>&#160; </div>
<div class="line"><a name="l06719"></a><span class="lineno"> 6719</span>&#160;    <span class="comment">// don&#39;t regen when permanent aura target has full power</span></div>
<div class="line"><a name="l06720"></a><span class="lineno"> 6720</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;IsPermanent() &amp;&amp; target-&gt;<a class="code" href="../../da/db7/class_unit.html#ad7e475d80b9af430cc076d7c01f967e9">GetPower</a>(<a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>) == target-&gt;<a class="code" href="../../da/db7/class_unit.html#a93f83fd909310de2c76382d00d7dbbf1">GetMaxPower</a>(<a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>))</div>
<div class="line"><a name="l06721"></a><span class="lineno"> 6721</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06722"></a><span class="lineno"> 6722</span>&#160; </div>
<div class="line"><a name="l06723"></a><span class="lineno"> 6723</span>&#160;    <span class="comment">// ignore negative values (can be result apply spellmods to aura damage</span></div>
<div class="line"><a name="l06724"></a><span class="lineno"> 6724</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> amount = <a class="code" href="../../d9/df6/my__global_8h.html#affe776513b24d84b39af8ab0930fef7f">std::max</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a>, 0);</div>
<div class="line"><a name="l06725"></a><span class="lineno"> 6725</span>&#160; </div>
<div class="line"><a name="l06726"></a><span class="lineno"> 6726</span>&#160;    <a class="code" href="../../db/d9b/struct_spell_periodic_aura_log_info.html">SpellPeriodicAuraLogInfo</a> pInfo(<span class="keyword">this</span>, amount, 0, 0, 0, 0.0f, <span class="keyword">false</span>);</div>
<div class="line"><a name="l06727"></a><span class="lineno"> 6727</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#ac6e545dc53605a0c05d8556cf66040c1">SendPeriodicAuraLog</a>(&amp;pInfo);</div>
<div class="line"><a name="l06728"></a><span class="lineno"> 6728</span>&#160; </div>
<div class="line"><a name="l06729"></a><span class="lineno"> 6729</span>&#160;    <a class="code" href="../../d3/d07/src_2common_2_logging_2_log_8h.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura.effect&quot;</span>, <span class="stringliteral">&quot;PeriodicTick: %s energize %s for %u dmg inflicted by %u&quot;</span>,</div>
<div class="line"><a name="l06730"></a><span class="lineno"> 6730</span>&#160;                    <a class="code" href="../../da/df1/class_aura_effect.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>().<a class="code" href="../../d1/d7d/namespace_acore.html#ac2cb308fb001c35fbaa90489ea6cf478">ToString</a>().c_str(), target-&gt;<a class="code" href="../../d8/d83/class_object.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>().<a class="code" href="../../d8/d03/class_object_guid.html#a78f5fb47e3b35addf8984000c175125b">ToString</a>().c_str(), amount, <a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><a name="l06731"></a><span class="lineno"> 6731</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> gain = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a71c66b7e4d8815d9ea68b838f4ff0f09">ModifyPower</a>(<a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>, amount);</div>
<div class="line"><a name="l06732"></a><span class="lineno"> 6732</span>&#160; </div>
<div class="line"><a name="l06733"></a><span class="lineno"> 6733</span>&#160;    <span class="keywordflow">if</span> (caster)</div>
<div class="line"><a name="l06734"></a><span class="lineno"> 6734</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a7f568bbe5292ed618cd40bde9297b094">getHostileRefMgr</a>().<a class="code" href="../../d9/d07/class_hostile_ref_mgr.html#a69c355d1c078cfba9927c8c752912b48">threatAssist</a>(caster, <span class="keywordtype">float</span>(gain) * 0.5f, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>());</div>
<div class="line"><a name="l06735"></a><span class="lineno"> 6735</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_a25ff5d34ce79433dfc852484cef1d47da1e9f8e7b13f64d6fd671411d5e906dfb"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a25ff5d34ce79433dfc852484cef1d47da1e9f8e7b13f64d6fd671411d5e906dfb">SPELL_ATTR7_ONLY_IN_SPELLBOOK_UNTIL_LEARNED</a></div><div class="ttdeci">@ SPELL_ATTR7_ONLY_IN_SPELLBOOK_UNTIL_LEARNED</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00629">SharedDefines.h:629</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">GetBase()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00041">GetCasterGUID()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00098">Object::GetGUID()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02236">Unit::getHostileRefMgr()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">GetId()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01581">Unit::GetMaxPower()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01580">Unit::GetPower()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01578">Unit::getPowerType()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00408">SpellInfo::HasAttribute()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01519">Unit::HasUnitState()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01888">Unit::IsAlive()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00138">Aura::IsPermanent()</a>, <a class="el" href="../../d3/d07/src_2common_2_logging_2_log_8h_source.html#l00273">LOG_DEBUG</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00120">m_amount</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00115">m_spellInfo</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l01386">max</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l13328">Unit::ModifyPower()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05834">Unit::SendPeriodicAuraLog()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01081">SendTickImmune()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00629">SPELL_ATTR7_ONLY_IN_SPELLBOOK_UNTIL_LEARNED</a>, <a class="el" href="../../d1/d30/_hostile_ref_mgr_8cpp_source.html#l00035">HostileRefMgr::threatAssist()</a>, <a class="el" href="../../da/d5f/_object_guid_8cpp_source.html#l00047">ObjectGuid::ToString()</a>, <a class="el" href="../../de/d3c/_string_convert_8h_source.html#l00315">Acore::ToString()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00497">UNIT_STATE_ISOLATED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01087">PeriodicTick()</a>.</p>

</div>
</div>
<a id="a3c497a3c954b0bade630ac996c440fa3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c497a3c954b0bade630ac996c440fa3">&#9670;&nbsp;</a></span>HandlePeriodicHealAurasTick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandlePeriodicHealAurasTick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06454">6454</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l06455"></a><span class="lineno"> 6455</span>&#160;{</div>
<div class="line"><a name="l06456"></a><span class="lineno"> 6456</span>&#160;    <span class="keywordflow">if</span> (!target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5ea3f54af571493f7889220724667189">IsAlive</a>())</div>
<div class="line"><a name="l06457"></a><span class="lineno"> 6457</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06458"></a><span class="lineno"> 6458</span>&#160; </div>
<div class="line"><a name="l06459"></a><span class="lineno"> 6459</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#ab78147cd520d2dac6be709b4c80a7de3">HasUnitState</a>(<a class="code" href="../../d5/d32/_unit_8h.html#ae51d2ecb71f7a5cb3882982a622c9544a7c4ae74029844364315885e02df35505">UNIT_STATE_ISOLATED</a>))</div>
<div class="line"><a name="l06460"></a><span class="lineno"> 6460</span>&#160;    {</div>
<div class="line"><a name="l06461"></a><span class="lineno"> 6461</span>&#160;        <a class="code" href="../../da/df1/class_aura_effect.html#a94ad6938ac754595a00f0f5a8e2019c5">SendTickImmune</a>(target, caster);</div>
<div class="line"><a name="l06462"></a><span class="lineno"> 6462</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06463"></a><span class="lineno"> 6463</span>&#160;    }</div>
<div class="line"><a name="l06464"></a><span class="lineno"> 6464</span>&#160; </div>
<div class="line"><a name="l06465"></a><span class="lineno"> 6465</span>&#160;    <span class="comment">// heal for caster damage (must be alive)</span></div>
<div class="line"><a name="l06466"></a><span class="lineno"> 6466</span>&#160;    <span class="keywordflow">if</span> (target != caster &amp;&amp; <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;HasAttribute(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a583cc1b9a8909370e4d51a890d897668a546d420c10fbdd64888c71cf01c821ec">SPELL_ATTR2_NO_TARGET_PER_SECOND_COST</a>) &amp;&amp; (!caster || !caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a5ea3f54af571493f7889220724667189">IsAlive</a>()))</div>
<div class="line"><a name="l06467"></a><span class="lineno"> 6467</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06468"></a><span class="lineno"> 6468</span>&#160; </div>
<div class="line"><a name="l06469"></a><span class="lineno"> 6469</span>&#160;    <span class="comment">// don&#39;t regen when permanent aura target has full power</span></div>
<div class="line"><a name="l06470"></a><span class="lineno"> 6470</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;IsPermanent() &amp;&amp; target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5725cda05eb9a83f0731778d27a2a80c">IsFullHealth</a>())</div>
<div class="line"><a name="l06471"></a><span class="lineno"> 6471</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06472"></a><span class="lineno"> 6472</span>&#160; </div>
<div class="line"><a name="l06473"></a><span class="lineno"> 6473</span>&#160;    <span class="comment">// ignore negative values (can be result apply spellmods to aura damage</span></div>
<div class="line"><a name="l06474"></a><span class="lineno"> 6474</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> damage = <a class="code" href="../../d9/df6/my__global_8h.html#affe776513b24d84b39af8ab0930fef7f">std::max</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a>, 0);</div>
<div class="line"><a name="l06475"></a><span class="lineno"> 6475</span>&#160; </div>
<div class="line"><a name="l06476"></a><span class="lineno"> 6476</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>() == <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a2616d80ed4951b4ff860a0e0e2a98da0">SPELL_AURA_OBS_MOD_HEALTH</a>)</div>
<div class="line"><a name="l06477"></a><span class="lineno"> 6477</span>&#160;    {</div>
<div class="line"><a name="l06478"></a><span class="lineno"> 6478</span>&#160;        <span class="comment">// Taken mods</span></div>
<div class="line"><a name="l06479"></a><span class="lineno"> 6479</span>&#160;        <span class="keywordtype">float</span> TakenTotalMod = 1.0f;</div>
<div class="line"><a name="l06480"></a><span class="lineno"> 6480</span>&#160; </div>
<div class="line"><a name="l06481"></a><span class="lineno"> 6481</span>&#160;        <span class="comment">// Tenacity increase healing % taken</span></div>
<div class="line"><a name="l06482"></a><span class="lineno"> 6482</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html">AuraEffect</a> <span class="keyword">const</span>* Tenacity = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a520e229dc1a93ea4a53d0ba81e586d11">GetAuraEffect</a>(58549, 0))</div>
<div class="line"><a name="l06483"></a><span class="lineno"> 6483</span>&#160;            <a class="code" href="../../d9/de9/src_2common_2_utilities_2util_8h.html#a53176b459b4462b058b2a1be47ef82ee">AddPct</a>(TakenTotalMod, Tenacity-&gt;GetAmount());</div>
<div class="line"><a name="l06484"></a><span class="lineno"> 6484</span>&#160; </div>
<div class="line"><a name="l06485"></a><span class="lineno"> 6485</span>&#160;        <span class="comment">// Healing taken percent</span></div>
<div class="line"><a name="l06486"></a><span class="lineno"> 6486</span>&#160;        <span class="keywordtype">float</span> minval = (float)target-&gt;<a class="code" href="../../da/db7/class_unit.html#abf8fc4eaa597bd84ad83fb2c8c7f0647">GetMaxNegativeAuraModifier</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a79269de8dea27ac7f7622e49e14a687a">SPELL_AURA_MOD_HEALING_PCT</a>);</div>
<div class="line"><a name="l06487"></a><span class="lineno"> 6487</span>&#160;        <span class="keywordflow">if</span> (minval)</div>
<div class="line"><a name="l06488"></a><span class="lineno"> 6488</span>&#160;            <a class="code" href="../../d9/de9/src_2common_2_utilities_2util_8h.html#a53176b459b4462b058b2a1be47ef82ee">AddPct</a>(TakenTotalMod, minval);</div>
<div class="line"><a name="l06489"></a><span class="lineno"> 6489</span>&#160; </div>
<div class="line"><a name="l06490"></a><span class="lineno"> 6490</span>&#160;        <span class="keywordtype">float</span> maxval = (float)target-&gt;<a class="code" href="../../da/db7/class_unit.html#a7c31e00bd5228734b74fd24c56d45c6d">GetMaxPositiveAuraModifier</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a79269de8dea27ac7f7622e49e14a687a">SPELL_AURA_MOD_HEALING_PCT</a>);</div>
<div class="line"><a name="l06491"></a><span class="lineno"> 6491</span>&#160;        <span class="keywordflow">if</span> (maxval)</div>
<div class="line"><a name="l06492"></a><span class="lineno"> 6492</span>&#160;            <a class="code" href="../../d9/de9/src_2common_2_utilities_2util_8h.html#a53176b459b4462b058b2a1be47ef82ee">AddPct</a>(TakenTotalMod, maxval);</div>
<div class="line"><a name="l06493"></a><span class="lineno"> 6493</span>&#160; </div>
<div class="line"><a name="l06494"></a><span class="lineno"> 6494</span>&#160;        <span class="comment">// Healing over time taken percent</span></div>
<div class="line"><a name="l06495"></a><span class="lineno"> 6495</span>&#160;        <span class="keywordtype">float</span> minval_hot = (float)target-&gt;<a class="code" href="../../da/db7/class_unit.html#abf8fc4eaa597bd84ad83fb2c8c7f0647">GetMaxNegativeAuraModifier</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799aa7668cc1bc2df918f334cc75767f6048">SPELL_AURA_MOD_HOT_PCT</a>);</div>
<div class="line"><a name="l06496"></a><span class="lineno"> 6496</span>&#160;        <span class="keywordflow">if</span> (minval_hot)</div>
<div class="line"><a name="l06497"></a><span class="lineno"> 6497</span>&#160;            <a class="code" href="../../d9/de9/src_2common_2_utilities_2util_8h.html#a53176b459b4462b058b2a1be47ef82ee">AddPct</a>(TakenTotalMod, minval_hot);</div>
<div class="line"><a name="l06498"></a><span class="lineno"> 6498</span>&#160; </div>
<div class="line"><a name="l06499"></a><span class="lineno"> 6499</span>&#160;        <span class="keywordtype">float</span> maxval_hot = (float)target-&gt;<a class="code" href="../../da/db7/class_unit.html#a7c31e00bd5228734b74fd24c56d45c6d">GetMaxPositiveAuraModifier</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799aa7668cc1bc2df918f334cc75767f6048">SPELL_AURA_MOD_HOT_PCT</a>);</div>
<div class="line"><a name="l06500"></a><span class="lineno"> 6500</span>&#160;        <span class="keywordflow">if</span> (maxval_hot)</div>
<div class="line"><a name="l06501"></a><span class="lineno"> 6501</span>&#160;            <a class="code" href="../../d9/de9/src_2common_2_utilities_2util_8h.html#a53176b459b4462b058b2a1be47ef82ee">AddPct</a>(TakenTotalMod, maxval_hot);</div>
<div class="line"><a name="l06502"></a><span class="lineno"> 6502</span>&#160; </div>
<div class="line"><a name="l06503"></a><span class="lineno"> 6503</span>&#160;        <span class="comment">// Arena / BG Dampening</span></div>
<div class="line"><a name="l06504"></a><span class="lineno"> 6504</span>&#160;        <span class="keywordtype">float</span> minval_pct = (float)target-&gt;<a class="code" href="../../da/db7/class_unit.html#abf8fc4eaa597bd84ad83fb2c8c7f0647">GetMaxNegativeAuraModifier</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a47e92c7387722615239d60a75bf858fa">SPELL_AURA_MOD_HEALING_DONE_PERCENT</a>);</div>
<div class="line"><a name="l06505"></a><span class="lineno"> 6505</span>&#160;        <span class="keywordflow">if</span> (minval_pct)</div>
<div class="line"><a name="l06506"></a><span class="lineno"> 6506</span>&#160;            <a class="code" href="../../d9/de9/src_2common_2_utilities_2util_8h.html#a53176b459b4462b058b2a1be47ef82ee">AddPct</a>(TakenTotalMod, minval_pct);</div>
<div class="line"><a name="l06507"></a><span class="lineno"> 6507</span>&#160; </div>
<div class="line"><a name="l06508"></a><span class="lineno"> 6508</span>&#160;        TakenTotalMod = <a class="code" href="../../d9/df6/my__global_8h.html#affe776513b24d84b39af8ab0930fef7f">std::max</a>(TakenTotalMod, 0.0f);</div>
<div class="line"><a name="l06509"></a><span class="lineno"> 6509</span>&#160; </div>
<div class="line"><a name="l06510"></a><span class="lineno"> 6510</span>&#160;        <span class="comment">// the most ugly hack i made :P the other option is to change all spellvalues to float...</span></div>
<div class="line"><a name="l06511"></a><span class="lineno"> 6511</span>&#160;        <span class="comment">// demonic aegis</span></div>
<div class="line"><a name="l06512"></a><span class="lineno"> 6512</span>&#160;        <span class="keywordflow">if</span> (caster &amp;&amp; <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;SpellFamilyName == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0a134bc75d430da10f6c1df4977c29cf">SPELLFAMILY_WARLOCK</a> &amp;&amp; (<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;SpellFamilyFlags[1] &amp; 0x20000000))</div>
<div class="line"><a name="l06513"></a><span class="lineno"> 6513</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html">AuraEffect</a>* aurEff = caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a520e229dc1a93ea4a53d0ba81e586d11">GetAuraEffect</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a2c530c4b7d2f3b77f65f62395bda9c4a">SPELL_AURA_ADD_PCT_MODIFIER</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0a134bc75d430da10f6c1df4977c29cf">SPELLFAMILY_WARLOCK</a>, 89, 0))</div>
<div class="line"><a name="l06514"></a><span class="lineno"> 6514</span>&#160;                <a class="code" href="../../d9/de9/src_2common_2_utilities_2util_8h.html#a53176b459b4462b058b2a1be47ef82ee">AddPct</a>(TakenTotalMod, aurEff-&gt;GetAmount());</div>
<div class="line"><a name="l06515"></a><span class="lineno"> 6515</span>&#160; </div>
<div class="line"><a name="l06516"></a><span class="lineno"> 6516</span>&#160;        damage = <a class="code" href="../../df/de2/namespace_g3_d.html#ae911b90657d7162d47997c702af655a8">uint32</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#ac6fc3f50b72cb6f2fd8bb988d48a8dba">CountPctFromMaxHealth</a>(damage));</div>
<div class="line"><a name="l06517"></a><span class="lineno"> 6517</span>&#160;        damage = <a class="code" href="../../df/de2/namespace_g3_d.html#ae911b90657d7162d47997c702af655a8">uint32</a>(damage * TakenTotalMod);</div>
<div class="line"><a name="l06518"></a><span class="lineno"> 6518</span>&#160;    }</div>
<div class="line"><a name="l06519"></a><span class="lineno"> 6519</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l06520"></a><span class="lineno"> 6520</span>&#160;    {</div>
<div class="line"><a name="l06521"></a><span class="lineno"> 6521</span>&#160;        <span class="comment">// Wild Growth = amount + (6 - 2*doneTicks) * ticks* amount / 100</span></div>
<div class="line"><a name="l06522"></a><span class="lineno"> 6522</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;SpellFamilyName == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1bac3788ce010075b8bd4e6083638d8cd40">SPELLFAMILY_DRUID</a> &amp;&amp; <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;SpellIconID == 2864)</div>
<div class="line"><a name="l06523"></a><span class="lineno"> 6523</span>&#160;        {</div>
<div class="line"><a name="l06524"></a><span class="lineno"> 6524</span>&#160;            <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> tickNumber = <a class="code" href="../../da/df1/class_aura_effect.html#a0c28e995bc0e15c692c24154bab9df4d">GetTickNumber</a>() - 1;</div>
<div class="line"><a name="l06525"></a><span class="lineno"> 6525</span>&#160;            <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> tempAmount = <a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code" href="../../da/df1/class_aura_effect.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>].CalcValue(caster, &amp;<a class="code" href="../../da/df1/class_aura_effect.html#aba194c9071a1b0551768b397abc9ebeb">m_baseAmount</a>, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l06526"></a><span class="lineno"> 6526</span>&#160; </div>
<div class="line"><a name="l06527"></a><span class="lineno"> 6527</span>&#160;            <span class="keywordtype">float</span> drop = 2.0f;</div>
<div class="line"><a name="l06528"></a><span class="lineno"> 6528</span>&#160; </div>
<div class="line"><a name="l06529"></a><span class="lineno"> 6529</span>&#160;            <span class="comment">// Item - Druid T10 Restoration 2P Bonus</span></div>
<div class="line"><a name="l06530"></a><span class="lineno"> 6530</span>&#160;            <span class="keywordflow">if</span> (caster)</div>
<div class="line"><a name="l06531"></a><span class="lineno"> 6531</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html">AuraEffect</a>* aurEff = caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a520e229dc1a93ea4a53d0ba81e586d11">GetAuraEffect</a>(70658, 0))</div>
<div class="line"><a name="l06532"></a><span class="lineno"> 6532</span>&#160;                    <a class="code" href="../../d9/de9/src_2common_2_utilities_2util_8h.html#a53176b459b4462b058b2a1be47ef82ee">AddPct</a>(drop, -aurEff-&gt;GetAmount());</div>
<div class="line"><a name="l06533"></a><span class="lineno"> 6533</span>&#160; </div>
<div class="line"><a name="l06534"></a><span class="lineno"> 6534</span>&#160;            damage += <a class="code" href="../../da/df1/class_aura_effect.html#a67ca18798f448847e77665752fa4a32c">GetTotalTicks</a>() * tempAmount * (6 - (drop * tickNumber)) * 0.01f;</div>
<div class="line"><a name="l06535"></a><span class="lineno"> 6535</span>&#160;        }</div>
<div class="line"><a name="l06536"></a><span class="lineno"> 6536</span>&#160; </div>
<div class="line"><a name="l06537"></a><span class="lineno"> 6537</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#aaddb94cd3bd95b145a8b8392e9feecca">GetType</a>() == <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#ade4e7c2cbd17c45015f9f70c2a5400b2a51cd79314936d46d8bc738a8c1207ab4">DYNOBJ_AURA_TYPE</a>)</div>
<div class="line"><a name="l06538"></a><span class="lineno"> 6538</span>&#160;            damage = caster-&gt;<a class="code" href="../../da/db7/class_unit.html#ae7c8abdd1c8486013192de0974a42415">SpellHealingBonusDone</a>(target, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), damage, <a class="code" href="../../d5/d32/_unit_8h.html#aff59f402d05917ab1de0c5f6bf148ea4a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>, 0.0f, <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#aae0b7e0da61a681e67a19b6d23c2cee6">GetStackAmount</a>());</div>
<div class="line"><a name="l06539"></a><span class="lineno"> 6539</span>&#160;        damage = target-&gt;<a class="code" href="../../da/db7/class_unit.html#aeac23e55488fc69a1b90f0e92eaf1626">SpellHealingBonusTaken</a>(caster, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), damage, <a class="code" href="../../d5/d32/_unit_8h.html#aff59f402d05917ab1de0c5f6bf148ea4a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>, <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#aae0b7e0da61a681e67a19b6d23c2cee6">GetStackAmount</a>());</div>
<div class="line"><a name="l06540"></a><span class="lineno"> 6540</span>&#160;    }</div>
<div class="line"><a name="l06541"></a><span class="lineno"> 6541</span>&#160; </div>
<div class="line"><a name="l06542"></a><span class="lineno"> 6542</span>&#160;    <span class="keywordtype">bool</span> crit = <span class="keyword">false</span>;</div>
<div class="line"><a name="l06543"></a><span class="lineno"> 6543</span>&#160;    <span class="keywordflow">if</span> ((crit = <a class="code" href="../../d1/d65/src_2common_2_utilities_2_random_8h.html#a4b15099bc81731469c5078a778673c94">roll_chance_f</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a374ccc25c81de041d10e1ed2b52a238c">GetCritChance</a>())))</div>
<div class="line"><a name="l06544"></a><span class="lineno"> 6544</span>&#160;        damage = <a class="code" href="../../da/db7/class_unit.html#aa6ce8b2e82075c03c6086fdb83b9ab35">Unit::SpellCriticalHealingBonus</a>(caster, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), damage, target);</div>
<div class="line"><a name="l06545"></a><span class="lineno"> 6545</span>&#160; </div>
<div class="line"><a name="l06546"></a><span class="lineno"> 6546</span>&#160;    <a class="code" href="../../d3/d07/src_2common_2_logging_2_log_8h.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura.effect&quot;</span>, <span class="stringliteral">&quot;PeriodicTick: %s heal of %s for %u health inflicted by %u&quot;</span>,</div>
<div class="line"><a name="l06547"></a><span class="lineno"> 6547</span>&#160;                    <a class="code" href="../../da/df1/class_aura_effect.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>().<a class="code" href="../../d1/d7d/namespace_acore.html#ac2cb308fb001c35fbaa90489ea6cf478">ToString</a>().c_str(), target-&gt;<a class="code" href="../../d8/d83/class_object.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>().<a class="code" href="../../d8/d03/class_object_guid.html#a78f5fb47e3b35addf8984000c175125b">ToString</a>().c_str(), damage, <a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><a name="l06548"></a><span class="lineno"> 6548</span>&#160; </div>
<div class="line"><a name="l06549"></a><span class="lineno"> 6549</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> heal = <a class="code" href="../../df/de2/namespace_g3_d.html#ae911b90657d7162d47997c702af655a8">uint32</a>(damage);</div>
<div class="line"><a name="l06550"></a><span class="lineno"> 6550</span>&#160; </div>
<div class="line"><a name="l06551"></a><span class="lineno"> 6551</span>&#160;    <span class="comment">// Script Hook For HandlePeriodicDamageAurasTick -- Allow scripts to change the Damage pre class mitigation calculations</span></div>
<div class="line"><a name="l06552"></a><span class="lineno"> 6552</span>&#160;    <a class="code" href="../../d0/d7d/_script_mgr_8h.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a>-&gt;ModifyPeriodicDamageAurasTick(target, caster, heal);</div>
<div class="line"><a name="l06553"></a><span class="lineno"> 6553</span>&#160; </div>
<div class="line"><a name="l06554"></a><span class="lineno"> 6554</span>&#160;    <a class="code" href="../../db/d5d/class_heal_info.html">HealInfo</a> healInfo(caster, target, heal, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;GetSchoolMask());</div>
<div class="line"><a name="l06555"></a><span class="lineno"> 6555</span>&#160;    <a class="code" href="../../da/db7/class_unit.html#a3bb06bc22c7b60ab2fae8d7141335043">Unit::CalcHealAbsorb</a>(healInfo);</div>
<div class="line"><a name="l06556"></a><span class="lineno"> 6556</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> gain = <a class="code" href="../../da/db7/class_unit.html#a724ee0c4edc9ee0b05ba1cc56893264c">Unit::DealHeal</a>(caster, target, healInfo.GetHeal());</div>
<div class="line"><a name="l06557"></a><span class="lineno"> 6557</span>&#160; </div>
<div class="line"><a name="l06558"></a><span class="lineno"> 6558</span>&#160;    <a class="code" href="../../db/d9b/struct_spell_periodic_aura_log_info.html">SpellPeriodicAuraLogInfo</a> pInfo(<span class="keyword">this</span>, healInfo.GetHeal(), healInfo.GetHeal() - gain, healInfo.GetAbsorb(), 0, 0.0f, crit);</div>
<div class="line"><a name="l06559"></a><span class="lineno"> 6559</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#ac6e545dc53605a0c05d8556cf66040c1">SendPeriodicAuraLog</a>(&amp;pInfo);</div>
<div class="line"><a name="l06560"></a><span class="lineno"> 6560</span>&#160; </div>
<div class="line"><a name="l06561"></a><span class="lineno"> 6561</span>&#160;    <span class="keywordflow">if</span> (caster)</div>
<div class="line"><a name="l06562"></a><span class="lineno"> 6562</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a7f568bbe5292ed618cd40bde9297b094">getHostileRefMgr</a>().<a class="code" href="../../d9/d07/class_hostile_ref_mgr.html#a69c355d1c078cfba9927c8c752912b48">threatAssist</a>(caster, <span class="keywordtype">float</span>(gain) * 0.5f, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>());</div>
<div class="line"><a name="l06563"></a><span class="lineno"> 6563</span>&#160; </div>
<div class="line"><a name="l06564"></a><span class="lineno"> 6564</span>&#160;    <span class="keywordtype">bool</span> haveCastItem = <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#ab5641e8e175470f121e2c6eda7dfb253">GetCastItemGUID</a>();</div>
<div class="line"><a name="l06565"></a><span class="lineno"> 6565</span>&#160; </div>
<div class="line"><a name="l06566"></a><span class="lineno"> 6566</span>&#160;    <span class="comment">// Health Funnel</span></div>
<div class="line"><a name="l06567"></a><span class="lineno"> 6567</span>&#160;    <span class="comment">// damage caster for heal amount</span></div>
<div class="line"><a name="l06568"></a><span class="lineno"> 6568</span>&#160;    <span class="comment">// xinef: caster is available, checked earlier</span></div>
<div class="line"><a name="l06569"></a><span class="lineno"> 6569</span>&#160;    <span class="keywordflow">if</span> (target != caster &amp;&amp; <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;HasAttribute(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a583cc1b9a8909370e4d51a890d897668a546d420c10fbdd64888c71cf01c821ec">SPELL_ATTR2_NO_TARGET_PER_SECOND_COST</a>))</div>
<div class="line"><a name="l06570"></a><span class="lineno"> 6570</span>&#160;    {</div>
<div class="line"><a name="l06571"></a><span class="lineno"> 6571</span>&#160;        <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> manaPerSecond = <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a8fff47546b8052ac55963dd40e4ae394">ManaPerSecond</a>;</div>
<div class="line"><a name="l06572"></a><span class="lineno"> 6572</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>)manaPerSecond &gt; gain &amp;&amp; gain &gt; 0)</div>
<div class="line"><a name="l06573"></a><span class="lineno"> 6573</span>&#160;        {</div>
<div class="line"><a name="l06574"></a><span class="lineno"> 6574</span>&#160;            manaPerSecond = gain;</div>
<div class="line"><a name="l06575"></a><span class="lineno"> 6575</span>&#160;        }</div>
<div class="line"><a name="l06576"></a><span class="lineno"> 6576</span>&#160; </div>
<div class="line"><a name="l06577"></a><span class="lineno"> 6577</span>&#160;        <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> absorb2 = 0;</div>
<div class="line"><a name="l06578"></a><span class="lineno"> 6578</span>&#160;        <a class="code" href="../../da/db7/class_unit.html#af0c5f2f98b065f2d3976f18e4bc964a4">Unit::DealDamageMods</a>(caster, manaPerSecond, &amp;absorb2);</div>
<div class="line"><a name="l06579"></a><span class="lineno"> 6579</span>&#160; </div>
<div class="line"><a name="l06580"></a><span class="lineno"> 6580</span>&#160;        <a class="code" href="../../d1/d6c/struct_clean_damage.html">CleanDamage</a> cleanDamage = <a class="code" href="../../d1/d6c/struct_clean_damage.html">CleanDamage</a>(0, 0, <a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <a class="code" href="../../d5/d32/_unit_8h.html#aba4a9525e87c7e76c6c005bc3c3f53a5a9c5d76fbca1fce33b08a1655b9017272">MELEE_HIT_NORMAL</a>);</div>
<div class="line"><a name="l06581"></a><span class="lineno"> 6581</span>&#160;        <a class="code" href="../../da/db7/class_unit.html#a17634e22688c21c1d7152d3b6c32edaa">Unit::DealDamage</a>(caster, caster, manaPerSecond, &amp;cleanDamage, <a class="code" href="../../d5/d32/_unit_8h.html#aff59f402d05917ab1de0c5f6bf148ea4a28acdc0c8049108b938b341f90a9183a">SELF_DAMAGE</a>, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;GetSchoolMask(), <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), <span class="keyword">true</span>);</div>
<div class="line"><a name="l06582"></a><span class="lineno"> 6582</span>&#160;    }</div>
<div class="line"><a name="l06583"></a><span class="lineno"> 6583</span>&#160; </div>
<div class="line"><a name="l06584"></a><span class="lineno"> 6584</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> procAttacker = <a class="code" href="../../d3/d75/_spell_mgr_8h.html#ade1c2af066d4cf1bbcd88f13f01cd4d6a429d6c885f9687a1b041436cb45d74ce">PROC_FLAG_DONE_PERIODIC</a>;</div>
<div class="line"><a name="l06585"></a><span class="lineno"> 6585</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> procVictim   = <a class="code" href="../../d3/d75/_spell_mgr_8h.html#ade1c2af066d4cf1bbcd88f13f01cd4d6a968d75fc25f1413369015f9ba98870b4">PROC_FLAG_TAKEN_PERIODIC</a>;</div>
<div class="line"><a name="l06586"></a><span class="lineno"> 6586</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> procEx = (crit ? <a class="code" href="../../d3/d75/_spell_mgr_8h.html#ac9aaef596a1061b6b944e1dc0e679b46a970bdf3e5f6192a44f1047c0a9c01310">PROC_EX_CRITICAL_HIT</a> : <a class="code" href="../../d3/d75/_spell_mgr_8h.html#ac9aaef596a1061b6b944e1dc0e679b46aa0c2a4e7377d6217e94cc8fc7c77b5b2">PROC_EX_NORMAL_HIT</a>) | <a class="code" href="../../d3/d75/_spell_mgr_8h.html#ac9aaef596a1061b6b944e1dc0e679b46ab92a05b298c10d1c2b9c3a2af4fe819b">PROC_EX_INTERNAL_HOT</a>;</div>
<div class="line"><a name="l06587"></a><span class="lineno"> 6587</span>&#160;    <span class="keywordflow">if</span> (healInfo.GetAbsorb() &gt; 0)</div>
<div class="line"><a name="l06588"></a><span class="lineno"> 6588</span>&#160;        procEx |= <a class="code" href="../../d3/d75/_spell_mgr_8h.html#ac9aaef596a1061b6b944e1dc0e679b46ad0f376666fe646253e445dedfae7753f">PROC_EX_ABSORB</a>;</div>
<div class="line"><a name="l06589"></a><span class="lineno"> 6589</span>&#160; </div>
<div class="line"><a name="l06590"></a><span class="lineno"> 6590</span>&#160;    <span class="comment">// ignore item heals</span></div>
<div class="line"><a name="l06591"></a><span class="lineno"> 6591</span>&#160;    <span class="keywordflow">if</span> (!haveCastItem &amp;&amp; <a class="code" href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>() != <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a2616d80ed4951b4ff860a0e0e2a98da0">SPELL_AURA_OBS_MOD_HEALTH</a>) <span class="comment">// xinef: dont allow obs_mod_health to proc spells, this is passive regeneration and not hot</span></div>
<div class="line"><a name="l06592"></a><span class="lineno"> 6592</span>&#160;        <span class="comment">// xinef: allow null caster to proc</span></div>
<div class="line"><a name="l06593"></a><span class="lineno"> 6593</span>&#160;        caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a375e0763d4b957264485484db71be2d6">ProcDamageAndSpell</a>(target, caster ? procAttacker : 0, procVictim, procEx, heal, <a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), <span class="keyword">nullptr</span>, <a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>(), <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, &amp;healInfo);</div>
<div class="line"><a name="l06594"></a><span class="lineno"> 6594</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_a583cc1b9a8909370e4d51a890d897668a546d420c10fbdd64888c71cf01c821ec"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a583cc1b9a8909370e4d51a890d897668a546d420c10fbdd64888c71cf01c821ec">SPELL_ATTR2_NO_TARGET_PER_SECOND_COST</a></div><div class="ttdeci">@ SPELL_ATTR2_NO_TARGET_PER_SECOND_COST</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00439">SharedDefines.h:439</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a47e92c7387722615239d60a75bf858fa"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a47e92c7387722615239d60a75bf858fa">SPELL_AURA_MOD_HEALING_DONE_PERCENT</a></div><div class="ttdeci">@ SPELL_AURA_MOD_HEALING_DONE_PERCENT</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00199">SpellAuraDefines.h:199</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a79269de8dea27ac7f7622e49e14a687a"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a79269de8dea27ac7f7622e49e14a687a">SPELL_AURA_MOD_HEALING_PCT</a></div><div class="ttdeci">@ SPELL_AURA_MOD_HEALING_PCT</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00181">SpellAuraDefines.h:181</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799aa7668cc1bc2df918f334cc75767f6048"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799aa7668cc1bc2df918f334cc75767f6048">SPELL_AURA_MOD_HOT_PCT</a></div><div class="ttdeci">@ SPELL_AURA_MOD_HOT_PCT</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00322">SpellAuraDefines.h:322</a></div></div>
<div class="ttc" id="a_spell_mgr_8h_html_ac9aaef596a1061b6b944e1dc0e679b46ab92a05b298c10d1c2b9c3a2af4fe819b"><div class="ttname"><a href="../../d3/d75/_spell_mgr_8h.html#ac9aaef596a1061b6b944e1dc0e679b46ab92a05b298c10d1c2b9c3a2af4fe819b">PROC_EX_INTERNAL_HOT</a></div><div class="ttdeci">@ PROC_EX_INTERNAL_HOT</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d75/_spell_mgr_8h_source.html#l00220">SpellMgr.h:220</a></div></div>
<div class="ttc" id="a_unit_8h_html_aff59f402d05917ab1de0c5f6bf148ea4a28acdc0c8049108b938b341f90a9183a"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#aff59f402d05917ab1de0c5f6bf148ea4a28acdc0c8049108b938b341f90a9183a">SELF_DAMAGE</a></div><div class="ttdeci">@ SELF_DAMAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00600">Unit.h:599</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a0c28e995bc0e15c692c24154bab9df4d"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a0c28e995bc0e15c692c24154bab9df4d">AuraEffect::GetTickNumber</a></div><div class="ttdeci">uint32 GetTickNumber() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00079">SpellAuraEffects.h:79</a></div></div>
<div class="ttc" id="aclass_aura_html_aaddb94cd3bd95b145a8b8392e9feecca"><div class="ttname"><a href="../../d2/dde/class_aura.html#aaddb94cd3bd95b145a8b8392e9feecca">Aura::GetType</a></div><div class="ttdeci">AuraObjectType GetType() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/_spell_auras_8cpp_source.html#l00476">SpellAuras.cpp:476</a></div></div>
<div class="ttc" id="aclass_aura_html_ab5641e8e175470f121e2c6eda7dfb253"><div class="ttname"><a href="../../d2/dde/class_aura.html#ab5641e8e175470f121e2c6eda7dfb253">Aura::GetCastItemGUID</a></div><div class="ttdeci">ObjectGuid GetCastItemGUID() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dcf/_spell_auras_8h_source.html#l00103">SpellAuras.h:103</a></div></div>
<div class="ttc" id="aclass_heal_info_html"><div class="ttname"><a href="../../db/d5d/class_heal_info.html">HealInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00940">Unit.h:941</a></div></div>
<div class="ttc" id="aclass_spell_info_html_a8fff47546b8052ac55963dd40e4ae394"><div class="ttname"><a href="../../d4/d7d/class_spell_info.html#a8fff47546b8052ac55963dd40e4ae394">SpellInfo::ManaPerSecond</a></div><div class="ttdeci">uint32 ManaPerSecond</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d70/_spell_info_8h_source.html#l00360">SpellInfo.h:360</a></div></div>
<div class="ttc" id="aclass_unit_html_a3bb06bc22c7b60ab2fae8d7141335043"><div class="ttname"><a href="../../da/db7/class_unit.html#a3bb06bc22c7b60ab2fae8d7141335043">Unit::CalcHealAbsorb</a></div><div class="ttdeci">static void CalcHealAbsorb(HealInfo &amp;healInfo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l02218">Unit.cpp:2218</a></div></div>
<div class="ttc" id="aclass_unit_html_a724ee0c4edc9ee0b05ba1cc56893264c"><div class="ttname"><a href="../../da/db7/class_unit.html#a724ee0c4edc9ee0b05ba1cc56893264c">Unit::DealHeal</a></div><div class="ttdeci">static int32 DealHeal(Unit *healer, Unit *victim, uint32 addhealth)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l10328">Unit.cpp:10328</a></div></div>
<div class="ttc" id="aclass_unit_html_a7c31e00bd5228734b74fd24c56d45c6d"><div class="ttname"><a href="../../da/db7/class_unit.html#a7c31e00bd5228734b74fd24c56d45c6d">Unit::GetMaxPositiveAuraModifier</a></div><div class="ttdeci">int32 GetMaxPositiveAuraModifier(AuraType auratype)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l05411">Unit.cpp:5411</a></div></div>
<div class="ttc" id="aclass_unit_html_aa6ce8b2e82075c03c6086fdb83b9ab35"><div class="ttname"><a href="../../da/db7/class_unit.html#aa6ce8b2e82075c03c6086fdb83b9ab35">Unit::SpellCriticalHealingBonus</a></div><div class="ttdeci">static uint32 SpellCriticalHealingBonus(Unit const *caster, SpellInfo const *spellProto, uint32 damage, Unit const *victim)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l11664">Unit.cpp:11664</a></div></div>
<div class="ttc" id="aclass_unit_html_abf8fc4eaa597bd84ad83fb2c8c7f0647"><div class="ttname"><a href="../../da/db7/class_unit.html#abf8fc4eaa597bd84ad83fb2c8c7f0647">Unit::GetMaxNegativeAuraModifier</a></div><div class="ttdeci">int32 GetMaxNegativeAuraModifier(AuraType auratype) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l05425">Unit.cpp:5425</a></div></div>
<div class="ttc" id="aclass_unit_html_aeac23e55488fc69a1b90f0e92eaf1626"><div class="ttname"><a href="../../da/db7/class_unit.html#aeac23e55488fc69a1b90f0e92eaf1626">Unit::SpellHealingBonusTaken</a></div><div class="ttdeci">uint32 SpellHealingBonusTaken(Unit *caster, SpellInfo const *spellProto, uint32 healamount, DamageEffectType damagetype, uint32 stack=1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l11904">Unit.cpp:11904</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/de9/src_2common_2_utilities_2util_8h_source.html#l00104">AddPct()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00555">BASE_ATTACK</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l02218">Unit::CalcHealAbsorb()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01568">Unit::CountPctFromMaxHealth()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l00773">Unit::DealDamage()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l00763">Unit::DealDamageMods()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l10328">Unit::DealHeal()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00596">DOT</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00386">DYNOBJ_AURA_TYPE</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00387">SpellInfo::Effects</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00970">HealInfo::GetAbsorb()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04989">Unit::GetAuraEffect()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00446">GetAuraType()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">GetBase()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00041">GetCasterGUID()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00103">Aura::GetCastItemGUID()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00100">GetCritChance()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00049">GetEffIndex()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00098">Object::GetGUID()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00969">HealInfo::GetHeal()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02236">Unit::getHostileRefMgr()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">GetId()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05425">Unit::GetMaxNegativeAuraModifier()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05411">Unit::GetMaxPositiveAuraModifier()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00147">Aura::GetStackAmount()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00079">GetTickNumber()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00080">GetTotalTicks()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l00476">Aura::GetType()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01519">Unit::HasUnitState()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01888">Unit::IsAlive()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01562">Unit::IsFullHealth()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00138">Aura::IsPermanent()</a>, <a class="el" href="../../d3/d07/src_2common_2_logging_2_log_8h_source.html#l00273">LOG_DEBUG</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00120">m_amount</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00116">m_baseAmount</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00137">m_effIndex</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00115">m_spellInfo</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00360">SpellInfo::ManaPerSecond</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l01386">max</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00865">MELEE_HIT_NORMAL</a>, <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00204">PROC_EX_ABSORB</a>, <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00195">PROC_EX_CRITICAL_HIT</a>, <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00220">PROC_EX_INTERNAL_HOT</a>, <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00194">PROC_EX_NORMAL_HIT</a>, <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00134">PROC_FLAG_DONE_PERIODIC</a>, <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00135">PROC_FLAG_TAKEN_PERIODIC</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05823">Unit::ProcDamageAndSpell()</a>, <a class="el" href="../../d1/d65/src_2common_2_utilities_2_random_8h_source.html#l00053">roll_chance_f()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00599">SELF_DAMAGE</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05834">Unit::SendPeriodicAuraLog()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01081">SendTickImmune()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00439">SPELL_ATTR2_NO_TARGET_PER_SECOND_COST</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00171">SPELL_AURA_ADD_PCT_MODIFIER</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00199">SPELL_AURA_MOD_HEALING_DONE_PERCENT</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00181">SPELL_AURA_MOD_HEALING_PCT</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00322">SPELL_AURA_MOD_HOT_PCT</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00083">SPELL_AURA_OBS_MOD_HEALTH</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l11664">Unit::SpellCriticalHealingBonus()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l03461">SPELLFAMILY_DRUID</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l03459">SPELLFAMILY_WARLOCK</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l11795">Unit::SpellHealingBonusDone()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l11904">Unit::SpellHealingBonusTaken()</a>, <a class="el" href="../../d0/d7d/_script_mgr_8h_source.html#l02048">sScriptMgr</a>, <a class="el" href="../../d1/d30/_hostile_ref_mgr_8cpp_source.html#l00035">HostileRefMgr::threatAssist()</a>, <a class="el" href="../../da/d5f/_object_guid_8cpp_source.html#l00047">ObjectGuid::ToString()</a>, <a class="el" href="../../de/d3c/_string_convert_8h_source.html#l00315">Acore::ToString()</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00497">UNIT_STATE_ISOLATED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01087">PeriodicTick()</a>.</p>

</div>
</div>
<a id="a35cc3b13cde9e1cfbdfee49d6bdcee57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35cc3b13cde9e1cfbdfee49d6bdcee57">&#9670;&nbsp;</a></span>HandlePeriodicHealthFunnelAuraTick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandlePeriodicHealthFunnelAuraTick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06425">6425</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l06426"></a><span class="lineno"> 6426</span>&#160;{</div>
<div class="line"><a name="l06427"></a><span class="lineno"> 6427</span>&#160;    <span class="keywordflow">if</span> (!caster || !caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a5ea3f54af571493f7889220724667189">IsAlive</a>() || !target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5ea3f54af571493f7889220724667189">IsAlive</a>())</div>
<div class="line"><a name="l06428"></a><span class="lineno"> 6428</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06429"></a><span class="lineno"> 6429</span>&#160; </div>
<div class="line"><a name="l06430"></a><span class="lineno"> 6430</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#ab78147cd520d2dac6be709b4c80a7de3">HasUnitState</a>(<a class="code" href="../../d5/d32/_unit_8h.html#ae51d2ecb71f7a5cb3882982a622c9544a7c4ae74029844364315885e02df35505">UNIT_STATE_ISOLATED</a>))</div>
<div class="line"><a name="l06431"></a><span class="lineno"> 6431</span>&#160;    {</div>
<div class="line"><a name="l06432"></a><span class="lineno"> 6432</span>&#160;        <a class="code" href="../../da/df1/class_aura_effect.html#a94ad6938ac754595a00f0f5a8e2019c5">SendTickImmune</a>(target, caster);</div>
<div class="line"><a name="l06433"></a><span class="lineno"> 6433</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06434"></a><span class="lineno"> 6434</span>&#160;    }</div>
<div class="line"><a name="l06435"></a><span class="lineno"> 6435</span>&#160; </div>
<div class="line"><a name="l06436"></a><span class="lineno"> 6436</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> damage = <a class="code" href="../../d9/df6/my__global_8h.html#affe776513b24d84b39af8ab0930fef7f">std::max</a>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), 0);</div>
<div class="line"><a name="l06437"></a><span class="lineno"> 6437</span>&#160;    <span class="comment">// do not kill health donator</span></div>
<div class="line"><a name="l06438"></a><span class="lineno"> 6438</span>&#160;    <span class="keywordflow">if</span> (caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a958172d6051b106e3b3c776e4f9f3952">GetHealth</a>() &lt; damage)</div>
<div class="line"><a name="l06439"></a><span class="lineno"> 6439</span>&#160;        damage = caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a958172d6051b106e3b3c776e4f9f3952">GetHealth</a>() - 1;</div>
<div class="line"><a name="l06440"></a><span class="lineno"> 6440</span>&#160;    <span class="keywordflow">if</span> (!damage)</div>
<div class="line"><a name="l06441"></a><span class="lineno"> 6441</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06442"></a><span class="lineno"> 6442</span>&#160; </div>
<div class="line"><a name="l06443"></a><span class="lineno"> 6443</span>&#160;    caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a009a87eeb9cc40ed7017610cbb914b9b">ModifyHealth</a>(-(<a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>)damage);</div>
<div class="line"><a name="l06444"></a><span class="lineno"> 6444</span>&#160;    <a class="code" href="../../d3/d07/src_2common_2_logging_2_log_8h.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura&quot;</span>, <span class="stringliteral">&quot;PeriodicTick: donator %u target %u damage %u.&quot;</span>, caster-&gt;<a class="code" href="../../d8/d83/class_object.html#aa627fe2967ed0e0ed1d8aeeb4365a961">GetEntry</a>(), target-&gt;<a class="code" href="../../d8/d83/class_object.html#aa627fe2967ed0e0ed1d8aeeb4365a961">GetEntry</a>(), damage);</div>
<div class="line"><a name="l06445"></a><span class="lineno"> 6445</span>&#160; </div>
<div class="line"><a name="l06446"></a><span class="lineno"> 6446</span>&#160;    <span class="keywordtype">float</span> gainMultiplier = <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].CalcValueMultiplier(caster);</div>
<div class="line"><a name="l06447"></a><span class="lineno"> 6447</span>&#160; </div>
<div class="line"><a name="l06448"></a><span class="lineno"> 6448</span>&#160;    damage = <a class="code" href="../../df/de2/namespace_g3_d.html#af80d9dbc6fa48c9ff714c7158adb60ae">int32</a>(damage * gainMultiplier);</div>
<div class="line"><a name="l06449"></a><span class="lineno"> 6449</span>&#160; </div>
<div class="line"><a name="l06450"></a><span class="lineno"> 6450</span>&#160;    <a class="code" href="../../db/d5d/class_heal_info.html">HealInfo</a> healInfo(caster, target, damage, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;GetSchoolMask());</div>
<div class="line"><a name="l06451"></a><span class="lineno"> 6451</span>&#160;    caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a62382ca15ef5f687651acd024efa1714">HealBySpell</a>(healInfo);</div>
<div class="line"><a name="l06452"></a><span class="lineno"> 6452</span>&#160;}</div>
<div class="ttc" id="aclass_unit_html_a62382ca15ef5f687651acd024efa1714"><div class="ttname"><a href="../../da/db7/class_unit.html#a62382ca15ef5f687651acd024efa1714">Unit::HealBySpell</a></div><div class="ttdeci">int32 HealBySpell(HealInfo &amp;healInfo, bool critical=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l10619">Unit.cpp:10619</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00387">SpellInfo::Effects</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00049">GetEffIndex()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00101">Object::GetEntry()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01559">Unit::GetHealth()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01519">Unit::HasUnitState()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l10619">Unit::HealBySpell()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01888">Unit::IsAlive()</a>, <a class="el" href="../../d3/d07/src_2common_2_logging_2_log_8h_source.html#l00273">LOG_DEBUG</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l01386">max</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l13270">Unit::ModifyHealth()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01081">SendTickImmune()</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00497">UNIT_STATE_ISOLATED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01087">PeriodicTick()</a>.</p>

</div>
</div>
<a id="a757600361597c84413041214cd39dc22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a757600361597c84413041214cd39dc22">&#9670;&nbsp;</a></span>HandlePeriodicHealthLeechAuraTick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandlePeriodicHealthLeechAuraTick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06329">6329</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l06330"></a><span class="lineno"> 6330</span>&#160;{</div>
<div class="line"><a name="l06331"></a><span class="lineno"> 6331</span>&#160;    <span class="keywordflow">if</span> (!target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5ea3f54af571493f7889220724667189">IsAlive</a>())</div>
<div class="line"><a name="l06332"></a><span class="lineno"> 6332</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06333"></a><span class="lineno"> 6333</span>&#160; </div>
<div class="line"><a name="l06334"></a><span class="lineno"> 6334</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#ab78147cd520d2dac6be709b4c80a7de3">HasUnitState</a>(<a class="code" href="../../d5/d32/_unit_8h.html#ae51d2ecb71f7a5cb3882982a622c9544a7c4ae74029844364315885e02df35505">UNIT_STATE_ISOLATED</a>) || target-&gt;<a class="code" href="../../da/db7/class_unit.html#ae7269683ec5b0e44c3ee49bd6f896615">IsImmunedToDamageOrSchool</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()))</div>
<div class="line"><a name="l06335"></a><span class="lineno"> 6335</span>&#160;    {</div>
<div class="line"><a name="l06336"></a><span class="lineno"> 6336</span>&#160;        <a class="code" href="../../da/df1/class_aura_effect.html#a94ad6938ac754595a00f0f5a8e2019c5">SendTickImmune</a>(target, caster);</div>
<div class="line"><a name="l06337"></a><span class="lineno"> 6337</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06338"></a><span class="lineno"> 6338</span>&#160;    }</div>
<div class="line"><a name="l06339"></a><span class="lineno"> 6339</span>&#160; </div>
<div class="line"><a name="l06340"></a><span class="lineno"> 6340</span>&#160;    <span class="keywordflow">if</span> (caster &amp;&amp; <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;Effects[<a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].Effect == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a292c893150c454dd75628b719db1fe97aa3290e738b6cd09859039989143f9ac1">SPELL_EFFECT_PERSISTENT_AREA_AURA</a> &amp;&amp;</div>
<div class="line"><a name="l06341"></a><span class="lineno"> 6341</span>&#160;            caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a8698eb184506578c00250d3c4c352722">SpellHitResult</a>(target, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), <span class="keyword">false</span>) != <a class="code" href="../../df/d0b/_shared_defines_8h.html#ac42174a036914cd9ca25c52e98bef65aa893d017f010f243616e70394c7fec096">SPELL_MISS_NONE</a>)</div>
<div class="line"><a name="l06342"></a><span class="lineno"> 6342</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06343"></a><span class="lineno"> 6343</span>&#160; </div>
<div class="line"><a name="l06344"></a><span class="lineno"> 6344</span>&#160;    <a class="code" href="../../d1/d6c/struct_clean_damage.html">CleanDamage</a> cleanDamage = <a class="code" href="../../d1/d6c/struct_clean_damage.html">CleanDamage</a>(0, 0, <a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <a class="code" href="../../d5/d32/_unit_8h.html#aba4a9525e87c7e76c6c005bc3c3f53a5a9c5d76fbca1fce33b08a1655b9017272">MELEE_HIT_NORMAL</a>);</div>
<div class="line"><a name="l06345"></a><span class="lineno"> 6345</span>&#160; </div>
<div class="line"><a name="l06346"></a><span class="lineno"> 6346</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> damage = <a class="code" href="../../d9/df6/my__global_8h.html#affe776513b24d84b39af8ab0930fef7f">std::max</a>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), 0);</div>
<div class="line"><a name="l06347"></a><span class="lineno"> 6347</span>&#160; </div>
<div class="line"><a name="l06348"></a><span class="lineno"> 6348</span>&#160;    <span class="comment">// Script Hook For HandlePeriodicHealthLeechAurasTick -- Allow scripts to change the Damage pre class mitigation calculations</span></div>
<div class="line"><a name="l06349"></a><span class="lineno"> 6349</span>&#160;    <a class="code" href="../../d0/d7d/_script_mgr_8h.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a>-&gt;ModifyPeriodicDamageAurasTick(target, caster, damage);</div>
<div class="line"><a name="l06350"></a><span class="lineno"> 6350</span>&#160; </div>
<div class="line"><a name="l06351"></a><span class="lineno"> 6351</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;GetType() == <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#ade4e7c2cbd17c45015f9f70c2a5400b2a51cd79314936d46d8bc738a8c1207ab4">DYNOBJ_AURA_TYPE</a>)</div>
<div class="line"><a name="l06352"></a><span class="lineno"> 6352</span>&#160;        damage = caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a0df9b48b0adee2815e7f9299ff615d46">SpellDamageBonusDone</a>(target, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), damage, <a class="code" href="../../d5/d32/_unit_8h.html#aff59f402d05917ab1de0c5f6bf148ea4a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>, 0.0f, <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;GetStackAmount());</div>
<div class="line"><a name="l06353"></a><span class="lineno"> 6353</span>&#160;    damage = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a8e8d13276a1ebef454bd4fc27fedc3f1">SpellDamageBonusTaken</a>(caster, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), damage, <a class="code" href="../../d5/d32/_unit_8h.html#aff59f402d05917ab1de0c5f6bf148ea4a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>, <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;GetStackAmount());</div>
<div class="line"><a name="l06354"></a><span class="lineno"> 6354</span>&#160; </div>
<div class="line"><a name="l06355"></a><span class="lineno"> 6355</span>&#160;    <span class="keywordtype">bool</span> crit = <span class="keyword">false</span>;</div>
<div class="line"><a name="l06356"></a><span class="lineno"> 6356</span>&#160;    <span class="keywordflow">if</span> ((crit = <a class="code" href="../../d1/d65/src_2common_2_utilities_2_random_8h.html#a4b15099bc81731469c5078a778673c94">roll_chance_f</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a374ccc25c81de041d10e1ed2b52a238c">GetCritChance</a>())))</div>
<div class="line"><a name="l06357"></a><span class="lineno"> 6357</span>&#160;        damage = <a class="code" href="../../da/db7/class_unit.html#a8a91714bd4edbbb272b5c90cefc8089d">Unit::SpellCriticalDamageBonus</a>(caster, <a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>, damage, target);</div>
<div class="line"><a name="l06358"></a><span class="lineno"> 6358</span>&#160; </div>
<div class="line"><a name="l06359"></a><span class="lineno"> 6359</span>&#160;    <span class="comment">// Calculate armor mitigation</span></div>
<div class="line"><a name="l06360"></a><span class="lineno"> 6360</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/db7/class_unit.html#ad53cf516713368986bab84af35245b53">Unit::IsDamageReducedByArmor</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;GetSchoolMask(), <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), <a class="code" href="../../da/df1/class_aura_effect.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>))</div>
<div class="line"><a name="l06361"></a><span class="lineno"> 6361</span>&#160;    {</div>
<div class="line"><a name="l06362"></a><span class="lineno"> 6362</span>&#160;        <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> damageReductedArmor = <a class="code" href="../../da/db7/class_unit.html#a3dee46b283ebc2e4bcace26c01895387">Unit::CalcArmorReducedDamage</a>(caster, target, damage, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), <a class="code" href="../../da/df1/class_aura_effect.html#a7595664aebf24652d3ce95d6bdc18ebe">GetCasterLevel</a>());</div>
<div class="line"><a name="l06363"></a><span class="lineno"> 6363</span>&#160;        cleanDamage.<a class="code" href="../../d1/d6c/struct_clean_damage.html#a6aeffc94560ac510c0b89e4384a2f41a">mitigated_damage</a> += damage - damageReductedArmor;</div>
<div class="line"><a name="l06364"></a><span class="lineno"> 6364</span>&#160;        damage = damageReductedArmor;</div>
<div class="line"><a name="l06365"></a><span class="lineno"> 6365</span>&#160;    }</div>
<div class="line"><a name="l06366"></a><span class="lineno"> 6366</span>&#160; </div>
<div class="line"><a name="l06367"></a><span class="lineno"> 6367</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a1360fcb79edcab37b0a7b362bb6e7b2a">CanApplyResilience</a>())</div>
<div class="line"><a name="l06368"></a><span class="lineno"> 6368</span>&#160;    {</div>
<div class="line"><a name="l06369"></a><span class="lineno"> 6369</span>&#160;        <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> resilienceReduction = damage;</div>
<div class="line"><a name="l06370"></a><span class="lineno"> 6370</span>&#160;        <a class="code" href="../../da/db7/class_unit.html#a0bd6c785f03c6b0010f9da02b880cee3">Unit::ApplyResilience</a>(target, <span class="keyword">nullptr</span>, &amp;resilienceReduction, crit, <a class="code" href="../../d5/d32/_unit_8h.html#aa60e4ef21982cf41b489e5242f01b64fa40402f79e36b6c6687d2a6511bb19aad">CR_CRIT_TAKEN_SPELL</a>);</div>
<div class="line"><a name="l06371"></a><span class="lineno"> 6371</span>&#160; </div>
<div class="line"><a name="l06372"></a><span class="lineno"> 6372</span>&#160;        resilienceReduction = damage - resilienceReduction;</div>
<div class="line"><a name="l06373"></a><span class="lineno"> 6373</span>&#160;        damage -= resilienceReduction;</div>
<div class="line"><a name="l06374"></a><span class="lineno"> 6374</span>&#160;        cleanDamage.<a class="code" href="../../d1/d6c/struct_clean_damage.html#a6aeffc94560ac510c0b89e4384a2f41a">mitigated_damage</a> += resilienceReduction;</div>
<div class="line"><a name="l06375"></a><span class="lineno"> 6375</span>&#160;    }</div>
<div class="line"><a name="l06376"></a><span class="lineno"> 6376</span>&#160; </div>
<div class="line"><a name="l06377"></a><span class="lineno"> 6377</span>&#160;    <a class="code" href="../../d6/d2a/class_damage_info.html">DamageInfo</a> dmgInfo(caster, target, damage, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;GetSchoolMask(), <a class="code" href="../../d5/d32/_unit_8h.html#aff59f402d05917ab1de0c5f6bf148ea4a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>, cleanDamage.<a class="code" href="../../d1/d6c/struct_clean_damage.html#a6aeffc94560ac510c0b89e4384a2f41a">mitigated_damage</a>);</div>
<div class="line"><a name="l06378"></a><span class="lineno"> 6378</span>&#160;    <a class="code" href="../../da/db7/class_unit.html#af003db5856d82574c3db286a3a0186fd">Unit::CalcAbsorbResist</a>(dmgInfo);</div>
<div class="line"><a name="l06379"></a><span class="lineno"> 6379</span>&#160; </div>
<div class="line"><a name="l06380"></a><span class="lineno"> 6380</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> absorb = dmgInfo.GetAbsorb();</div>
<div class="line"><a name="l06381"></a><span class="lineno"> 6381</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> resist = dmgInfo.GetResist();</div>
<div class="line"><a name="l06382"></a><span class="lineno"> 6382</span>&#160;    damage = dmgInfo.GetDamage();</div>
<div class="line"><a name="l06383"></a><span class="lineno"> 6383</span>&#160; </div>
<div class="line"><a name="l06384"></a><span class="lineno"> 6384</span>&#160;    <span class="comment">// Set trigger flag</span></div>
<div class="line"><a name="l06385"></a><span class="lineno"> 6385</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> procAttacker = <a class="code" href="../../d3/d75/_spell_mgr_8h.html#ade1c2af066d4cf1bbcd88f13f01cd4d6a429d6c885f9687a1b041436cb45d74ce">PROC_FLAG_DONE_PERIODIC</a>;</div>
<div class="line"><a name="l06386"></a><span class="lineno"> 6386</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> procVictim   = <a class="code" href="../../d3/d75/_spell_mgr_8h.html#ade1c2af066d4cf1bbcd88f13f01cd4d6a968d75fc25f1413369015f9ba98870b4">PROC_FLAG_TAKEN_PERIODIC</a>;</div>
<div class="line"><a name="l06387"></a><span class="lineno"> 6387</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> procEx = (crit ? <a class="code" href="../../d3/d75/_spell_mgr_8h.html#ac9aaef596a1061b6b944e1dc0e679b46a970bdf3e5f6192a44f1047c0a9c01310">PROC_EX_CRITICAL_HIT</a> : <a class="code" href="../../d3/d75/_spell_mgr_8h.html#ac9aaef596a1061b6b944e1dc0e679b46aa0c2a4e7377d6217e94cc8fc7c77b5b2">PROC_EX_NORMAL_HIT</a>) | <a class="code" href="../../d3/d75/_spell_mgr_8h.html#ac9aaef596a1061b6b944e1dc0e679b46a94a1aa9ac3cd331d95f2d0c421f35f59">PROC_EX_INTERNAL_DOT</a>;</div>
<div class="line"><a name="l06388"></a><span class="lineno"> 6388</span>&#160;    <span class="keywordflow">if</span> (absorb &gt; 0)</div>
<div class="line"><a name="l06389"></a><span class="lineno"> 6389</span>&#160;        procEx |= <a class="code" href="../../d3/d75/_spell_mgr_8h.html#ac9aaef596a1061b6b944e1dc0e679b46ad0f376666fe646253e445dedfae7753f">PROC_EX_ABSORB</a>;</div>
<div class="line"><a name="l06390"></a><span class="lineno"> 6390</span>&#160; </div>
<div class="line"><a name="l06391"></a><span class="lineno"> 6391</span>&#160;    <span class="keywordflow">if</span> (dmgInfo.GetDamage())</div>
<div class="line"><a name="l06392"></a><span class="lineno"> 6392</span>&#160;        procVictim |= <a class="code" href="../../d3/d75/_spell_mgr_8h.html#ade1c2af066d4cf1bbcd88f13f01cd4d6abcffcf75e3fd5015383c586153dc32c1">PROC_FLAG_TAKEN_DAMAGE</a>;</div>
<div class="line"><a name="l06393"></a><span class="lineno"> 6393</span>&#160; </div>
<div class="line"><a name="l06394"></a><span class="lineno"> 6394</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a958172d6051b106e3b3c776e4f9f3952">GetHealth</a>() &lt; dmgInfo.GetDamage())</div>
<div class="line"><a name="l06395"></a><span class="lineno"> 6395</span>&#160;    {</div>
<div class="line"><a name="l06396"></a><span class="lineno"> 6396</span>&#160;        dmgInfo.ModifyDamage(dmgInfo.GetDamage() - target-&gt;<a class="code" href="../../da/db7/class_unit.html#a958172d6051b106e3b3c776e4f9f3952">GetHealth</a>());</div>
<div class="line"><a name="l06397"></a><span class="lineno"> 6397</span>&#160;    }</div>
<div class="line"><a name="l06398"></a><span class="lineno"> 6398</span>&#160; </div>
<div class="line"><a name="l06399"></a><span class="lineno"> 6399</span>&#160;    damage = dmgInfo.GetDamage();</div>
<div class="line"><a name="l06400"></a><span class="lineno"> 6400</span>&#160; </div>
<div class="line"><a name="l06401"></a><span class="lineno"> 6401</span>&#160;    <a class="code" href="../../d3/d07/src_2common_2_logging_2_log_8h.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura.effect&quot;</span>, <span class="stringliteral">&quot;PeriodicTick: %s health leech of %s for %u dmg inflicted by %u abs is %u&quot;</span>,</div>
<div class="line"><a name="l06402"></a><span class="lineno"> 6402</span>&#160;                    <a class="code" href="../../da/df1/class_aura_effect.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>().<a class="code" href="../../d1/d7d/namespace_acore.html#ac2cb308fb001c35fbaa90489ea6cf478">ToString</a>().c_str(), target-&gt;<a class="code" href="../../d8/d83/class_object.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>().<a class="code" href="../../d8/d03/class_object_guid.html#a78f5fb47e3b35addf8984000c175125b">ToString</a>().c_str(), damage, <a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), absorb);</div>
<div class="line"><a name="l06403"></a><span class="lineno"> 6403</span>&#160;    <span class="keywordflow">if</span> (caster)</div>
<div class="line"><a name="l06404"></a><span class="lineno"> 6404</span>&#160;        caster-&gt;<a class="code" href="../../da/db7/class_unit.html#aaf7877cad85523173a7bcd7af163e8cb">SendSpellNonMeleeDamageLog</a>(target, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), damage, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;GetSchoolMask(), absorb, resist, <span class="keyword">false</span>, 0, crit);</div>
<div class="line"><a name="l06405"></a><span class="lineno"> 6405</span>&#160; </div>
<div class="line"><a name="l06406"></a><span class="lineno"> 6406</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> new_damage;</div>
<div class="line"><a name="l06407"></a><span class="lineno"> 6407</span>&#160; </div>
<div class="line"><a name="l06408"></a><span class="lineno"> 6408</span>&#160;    new_damage = <a class="code" href="../../da/db7/class_unit.html#a17634e22688c21c1d7152d3b6c32edaa">Unit::DealDamage</a>(caster, target, damage, &amp;cleanDamage, <a class="code" href="../../d5/d32/_unit_8h.html#aff59f402d05917ab1de0c5f6bf148ea4a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;GetSchoolMask(), <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), <span class="keyword">false</span>);</div>
<div class="line"><a name="l06409"></a><span class="lineno"> 6409</span>&#160;    <span class="comment">// allow null caster to call this function</span></div>
<div class="line"><a name="l06410"></a><span class="lineno"> 6410</span>&#160;    caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a375e0763d4b957264485484db71be2d6">ProcDamageAndSpell</a>(target, caster ? procAttacker : 0, procVictim, procEx, damage, <a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), <span class="keyword">nullptr</span>, <a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>(), <span class="keyword">nullptr</span>, &amp;dmgInfo);</div>
<div class="line"><a name="l06411"></a><span class="lineno"> 6411</span>&#160; </div>
<div class="line"><a name="l06412"></a><span class="lineno"> 6412</span>&#160;    <span class="keywordflow">if</span> (!caster || !caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a5ea3f54af571493f7889220724667189">IsAlive</a>())</div>
<div class="line"><a name="l06413"></a><span class="lineno"> 6413</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06414"></a><span class="lineno"> 6414</span>&#160; </div>
<div class="line"><a name="l06415"></a><span class="lineno"> 6415</span>&#160;    <span class="keywordtype">float</span> gainMultiplier = <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].CalcValueMultiplier(caster);</div>
<div class="line"><a name="l06416"></a><span class="lineno"> 6416</span>&#160; </div>
<div class="line"><a name="l06417"></a><span class="lineno"> 6417</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> heal = <a class="code" href="../../df/de2/namespace_g3_d.html#ae911b90657d7162d47997c702af655a8">uint32</a>(caster-&gt;<a class="code" href="../../da/db7/class_unit.html#ae7c8abdd1c8486013192de0974a42415">SpellHealingBonusDone</a>(caster, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), <a class="code" href="../../df/de2/namespace_g3_d.html#ae911b90657d7162d47997c702af655a8">uint32</a>(new_damage * gainMultiplier), <a class="code" href="../../d5/d32/_unit_8h.html#aff59f402d05917ab1de0c5f6bf148ea4a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>, 0.0f, <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;GetStackAmount()));</div>
<div class="line"><a name="l06418"></a><span class="lineno"> 6418</span>&#160;    heal = <a class="code" href="../../df/de2/namespace_g3_d.html#ae911b90657d7162d47997c702af655a8">uint32</a>(caster-&gt;<a class="code" href="../../da/db7/class_unit.html#aeac23e55488fc69a1b90f0e92eaf1626">SpellHealingBonusTaken</a>(caster, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), heal, <a class="code" href="../../d5/d32/_unit_8h.html#aff59f402d05917ab1de0c5f6bf148ea4a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>, <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;GetStackAmount()));</div>
<div class="line"><a name="l06419"></a><span class="lineno"> 6419</span>&#160; </div>
<div class="line"><a name="l06420"></a><span class="lineno"> 6420</span>&#160;    <a class="code" href="../../db/d5d/class_heal_info.html">HealInfo</a> healInfo(caster, caster, heal, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;GetSchoolMask());</div>
<div class="line"><a name="l06421"></a><span class="lineno"> 6421</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> gain = caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a62382ca15ef5f687651acd024efa1714">HealBySpell</a>(healInfo);</div>
<div class="line"><a name="l06422"></a><span class="lineno"> 6422</span>&#160;    caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a7f568bbe5292ed618cd40bde9297b094">getHostileRefMgr</a>().<a class="code" href="../../d9/d07/class_hostile_ref_mgr.html#a69c355d1c078cfba9927c8c752912b48">threatAssist</a>(caster, gain * 0.5f, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>());</div>
<div class="line"><a name="l06423"></a><span class="lineno"> 6423</span>&#160;}</div>
<div class="ttc" id="aclass_unit_html_aaf7877cad85523173a7bcd7af163e8cb"><div class="ttname"><a href="../../da/db7/class_unit.html#aaf7877cad85523173a7bcd7af163e8cb">Unit::SendSpellNonMeleeDamageLog</a></div><div class="ttdeci">void SendSpellNonMeleeDamageLog(SpellNonMeleeDamage *log)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l05781">Unit.cpp:5781</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l18044">Unit::ApplyResilience()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00555">BASE_ATTACK</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01875">Unit::CalcAbsorbResist()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01752">Unit::CalcArmorReducedDamage()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00103">CanApplyResilience()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00579">CR_CRIT_TAKEN_SPELL</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l00773">Unit::DealDamage()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00596">DOT</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00386">DYNOBJ_AURA_TYPE</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00387">SpellInfo::Effects</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00933">DamageInfo::GetAbsorb()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">GetBase()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00041">GetCasterGUID()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00102">GetCasterLevel()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00100">GetCritChance()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00932">DamageInfo::GetDamage()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00049">GetEffIndex()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00098">Object::GetGUID()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01559">Unit::GetHealth()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02236">Unit::getHostileRefMgr()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">GetId()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00934">DamageInfo::GetResist()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00147">Aura::GetStackAmount()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l00476">Aura::GetType()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01519">Unit::HasUnitState()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l10619">Unit::HealBySpell()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01888">Unit::IsAlive()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01729">Unit::IsDamageReducedByArmor()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l12143">Unit::IsImmunedToDamageOrSchool()</a>, <a class="el" href="../../d3/d07/src_2common_2_logging_2_log_8h_source.html#l00273">LOG_DEBUG</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00137">m_effIndex</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00115">m_spellInfo</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l01386">max</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00865">MELEE_HIT_NORMAL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00893">CleanDamage::mitigated_damage</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l00138">DamageInfo::ModifyDamage()</a>, <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00204">PROC_EX_ABSORB</a>, <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00195">PROC_EX_CRITICAL_HIT</a>, <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00219">PROC_EX_INTERNAL_DOT</a>, <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00194">PROC_EX_NORMAL_HIT</a>, <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00134">PROC_FLAG_DONE_PERIODIC</a>, <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00137">PROC_FLAG_TAKEN_DAMAGE</a>, <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00135">PROC_FLAG_TAKEN_PERIODIC</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05823">Unit::ProcDamageAndSpell()</a>, <a class="el" href="../../d1/d65/src_2common_2_utilities_2_random_8h_source.html#l00053">roll_chance_f()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05781">Unit::SendSpellNonMeleeDamageLog()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01081">SendTickImmune()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00777">SPELL_EFFECT_PERSISTENT_AREA_AURA</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01491">SPELL_MISS_NONE</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l11621">Unit::SpellCriticalDamageBonus()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l10988">Unit::SpellDamageBonusDone()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l11131">Unit::SpellDamageBonusTaken()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l11795">Unit::SpellHealingBonusDone()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l11904">Unit::SpellHealingBonusTaken()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l03114">Unit::SpellHitResult()</a>, <a class="el" href="../../d0/d7d/_script_mgr_8h_source.html#l02048">sScriptMgr</a>, <a class="el" href="../../d1/d30/_hostile_ref_mgr_8cpp_source.html#l00035">HostileRefMgr::threatAssist()</a>, <a class="el" href="../../da/d5f/_object_guid_8cpp_source.html#l00047">ObjectGuid::ToString()</a>, <a class="el" href="../../de/d3c/_string_convert_8h_source.html#l00315">Acore::ToString()</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00497">UNIT_STATE_ISOLATED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01087">PeriodicTick()</a>.</p>

</div>
</div>
<a id="a20e3450e5f8299f76561cbe747d12c88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20e3450e5f8299f76561cbe747d12c88">&#9670;&nbsp;</a></span>HandlePeriodicManaLeechAuraTick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandlePeriodicManaLeechAuraTick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06596">6596</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l06597"></a><span class="lineno"> 6597</span>&#160;{</div>
<div class="line"><a name="l06598"></a><span class="lineno"> 6598</span>&#160;    <a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414">Powers</a> <a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a> = <a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414">Powers</a>(<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><a name="l06599"></a><span class="lineno"> 6599</span>&#160; </div>
<div class="line"><a name="l06600"></a><span class="lineno"> 6600</span>&#160;    <span class="keywordflow">if</span> (!caster || !caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a5ea3f54af571493f7889220724667189">IsAlive</a>() || !target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5ea3f54af571493f7889220724667189">IsAlive</a>() || target-&gt;<a class="code" href="../../da/db7/class_unit.html#ad44d31430fab9282a79e8682822ccd9c">getPowerType</a>() != <a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>)</div>
<div class="line"><a name="l06601"></a><span class="lineno"> 6601</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06602"></a><span class="lineno"> 6602</span>&#160; </div>
<div class="line"><a name="l06603"></a><span class="lineno"> 6603</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#ab78147cd520d2dac6be709b4c80a7de3">HasUnitState</a>(<a class="code" href="../../d5/d32/_unit_8h.html#ae51d2ecb71f7a5cb3882982a622c9544a7c4ae74029844364315885e02df35505">UNIT_STATE_ISOLATED</a>) || target-&gt;<a class="code" href="../../da/db7/class_unit.html#ae7269683ec5b0e44c3ee49bd6f896615">IsImmunedToDamageOrSchool</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()))</div>
<div class="line"><a name="l06604"></a><span class="lineno"> 6604</span>&#160;    {</div>
<div class="line"><a name="l06605"></a><span class="lineno"> 6605</span>&#160;        <a class="code" href="../../da/df1/class_aura_effect.html#a94ad6938ac754595a00f0f5a8e2019c5">SendTickImmune</a>(target, caster);</div>
<div class="line"><a name="l06606"></a><span class="lineno"> 6606</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06607"></a><span class="lineno"> 6607</span>&#160;    }</div>
<div class="line"><a name="l06608"></a><span class="lineno"> 6608</span>&#160; </div>
<div class="line"><a name="l06609"></a><span class="lineno"> 6609</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;Effects[<a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].Effect == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a292c893150c454dd75628b719db1fe97aa3290e738b6cd09859039989143f9ac1">SPELL_EFFECT_PERSISTENT_AREA_AURA</a> &amp;&amp;</div>
<div class="line"><a name="l06610"></a><span class="lineno"> 6610</span>&#160;            caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a8698eb184506578c00250d3c4c352722">SpellHitResult</a>(target, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), <span class="keyword">false</span>) != <a class="code" href="../../df/d0b/_shared_defines_8h.html#ac42174a036914cd9ca25c52e98bef65aa893d017f010f243616e70394c7fec096">SPELL_MISS_NONE</a>)</div>
<div class="line"><a name="l06611"></a><span class="lineno"> 6611</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06612"></a><span class="lineno"> 6612</span>&#160; </div>
<div class="line"><a name="l06613"></a><span class="lineno"> 6613</span>&#160;    <span class="comment">// ignore negative values (can be result apply spellmods to aura damage</span></div>
<div class="line"><a name="l06614"></a><span class="lineno"> 6614</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> drainAmount = <a class="code" href="../../d9/df6/my__global_8h.html#affe776513b24d84b39af8ab0930fef7f">std::max</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a>, 0);</div>
<div class="line"><a name="l06615"></a><span class="lineno"> 6615</span>&#160; </div>
<div class="line"><a name="l06616"></a><span class="lineno"> 6616</span>&#160;    <span class="comment">// Special case: draining x% of mana (up to a maximum of 2*x% of the caster&#39;s maximum mana)</span></div>
<div class="line"><a name="l06617"></a><span class="lineno"> 6617</span>&#160;    <span class="comment">// It&#39;s mana percent cost spells, m_amount is percent drain from target</span></div>
<div class="line"><a name="l06618"></a><span class="lineno"> 6618</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aad468ff1d83ba29cad67dc5d395337db">ManaCostPercentage</a>)</div>
<div class="line"><a name="l06619"></a><span class="lineno"> 6619</span>&#160;    {</div>
<div class="line"><a name="l06620"></a><span class="lineno"> 6620</span>&#160;        <span class="comment">// max value</span></div>
<div class="line"><a name="l06621"></a><span class="lineno"> 6621</span>&#160;        <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> maxmana = <a class="code" href="../../d9/de9/src_2common_2_utilities_2util_8h.html#ae00607f8188c59ffcea5a3997c0120b0">CalculatePct</a>(caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a93f83fd909310de2c76382d00d7dbbf1">GetMaxPower</a>(<a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>), drainAmount * 2.0f);</div>
<div class="line"><a name="l06622"></a><span class="lineno"> 6622</span>&#160;        <a class="code" href="../../d9/de9/src_2common_2_utilities_2util_8h.html#acc70a4cd7bafafa527a375b638ee2f9a">ApplyPct</a>(drainAmount, target-&gt;<a class="code" href="../../da/db7/class_unit.html#a93f83fd909310de2c76382d00d7dbbf1">GetMaxPower</a>(<a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>));</div>
<div class="line"><a name="l06623"></a><span class="lineno"> 6623</span>&#160;        <span class="keywordflow">if</span> (drainAmount &gt; maxmana)</div>
<div class="line"><a name="l06624"></a><span class="lineno"> 6624</span>&#160;            drainAmount = maxmana;</div>
<div class="line"><a name="l06625"></a><span class="lineno"> 6625</span>&#160;    }</div>
<div class="line"><a name="l06626"></a><span class="lineno"> 6626</span>&#160; </div>
<div class="line"><a name="l06627"></a><span class="lineno"> 6627</span>&#160;    <a class="code" href="../../d3/d07/src_2common_2_logging_2_log_8h.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura.effect&quot;</span>, <span class="stringliteral">&quot;PeriodicTick: %s power leech of %s for %u dmg inflicted by %u&quot;</span>,</div>
<div class="line"><a name="l06628"></a><span class="lineno"> 6628</span>&#160;                    <a class="code" href="../../da/df1/class_aura_effect.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>().<a class="code" href="../../d1/d7d/namespace_acore.html#ac2cb308fb001c35fbaa90489ea6cf478">ToString</a>().c_str(), target-&gt;<a class="code" href="../../d8/d83/class_object.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>().<a class="code" href="../../d8/d03/class_object_guid.html#a78f5fb47e3b35addf8984000c175125b">ToString</a>().c_str(), drainAmount, <a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><a name="l06629"></a><span class="lineno"> 6629</span>&#160;    <span class="comment">// resilience reduce mana draining effect at spell crit damage reduction (added in 2.4)</span></div>
<div class="line"><a name="l06630"></a><span class="lineno"> 6630</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a> == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a>)</div>
<div class="line"><a name="l06631"></a><span class="lineno"> 6631</span>&#160;        drainAmount -= target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5639a855e969bbb0d743322066a7ad19">GetSpellCritDamageReduction</a>(drainAmount);</div>
<div class="line"><a name="l06632"></a><span class="lineno"> 6632</span>&#160; </div>
<div class="line"><a name="l06633"></a><span class="lineno"> 6633</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> drainedAmount = -target-&gt;<a class="code" href="../../da/db7/class_unit.html#a71c66b7e4d8815d9ea68b838f4ff0f09">ModifyPower</a>(<a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>, -drainAmount);</div>
<div class="line"><a name="l06634"></a><span class="lineno"> 6634</span>&#160; </div>
<div class="line"><a name="l06635"></a><span class="lineno"> 6635</span>&#160;    <span class="keywordtype">float</span> gainMultiplier = <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].CalcValueMultiplier(caster);</div>
<div class="line"><a name="l06636"></a><span class="lineno"> 6636</span>&#160; </div>
<div class="line"><a name="l06637"></a><span class="lineno"> 6637</span>&#160;    <a class="code" href="../../db/d9b/struct_spell_periodic_aura_log_info.html">SpellPeriodicAuraLogInfo</a> pInfo(<span class="keyword">this</span>, drainedAmount, 0, 0, 0, gainMultiplier, <span class="keyword">false</span>);</div>
<div class="line"><a name="l06638"></a><span class="lineno"> 6638</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#ac6e545dc53605a0c05d8556cf66040c1">SendPeriodicAuraLog</a>(&amp;pInfo);</div>
<div class="line"><a name="l06639"></a><span class="lineno"> 6639</span>&#160; </div>
<div class="line"><a name="l06640"></a><span class="lineno"> 6640</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> gainAmount = <a class="code" href="../../df/de2/namespace_g3_d.html#af80d9dbc6fa48c9ff714c7158adb60ae">int32</a>(drainedAmount * gainMultiplier);</div>
<div class="line"><a name="l06641"></a><span class="lineno"> 6641</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> gainedAmount = 0;</div>
<div class="line"><a name="l06642"></a><span class="lineno"> 6642</span>&#160;    <span class="keywordflow">if</span> (gainAmount)</div>
<div class="line"><a name="l06643"></a><span class="lineno"> 6643</span>&#160;    {</div>
<div class="line"><a name="l06644"></a><span class="lineno"> 6644</span>&#160;        gainedAmount = caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a71c66b7e4d8815d9ea68b838f4ff0f09">ModifyPower</a>(<a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>, gainAmount);</div>
<div class="line"><a name="l06645"></a><span class="lineno"> 6645</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a3b4dad985e3b5dde28d89afc956999e4">AddThreat</a>(caster, <span class="keywordtype">float</span>(gainedAmount) * 0.5f, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;GetSchoolMask(), <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>());</div>
<div class="line"><a name="l06646"></a><span class="lineno"> 6646</span>&#160;    }</div>
<div class="line"><a name="l06647"></a><span class="lineno"> 6647</span>&#160; </div>
<div class="line"><a name="l06648"></a><span class="lineno"> 6648</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a3b4dad985e3b5dde28d89afc956999e4">AddThreat</a>(caster, <span class="keywordtype">float</span>(gainedAmount) * 0.5f, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;GetSchoolMask(), <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>());</div>
<div class="line"><a name="l06649"></a><span class="lineno"> 6649</span>&#160; </div>
<div class="line"><a name="l06650"></a><span class="lineno"> 6650</span>&#160;    <span class="comment">// remove CC auras</span></div>
<div class="line"><a name="l06651"></a><span class="lineno"> 6651</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a2be941a27d14de6da7676c6fdbd37bb9">RemoveAurasWithInterruptFlags</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a0709fc3ab848cf1b8b4853813b8fe011a043102900f6d0a56c4ba2aaf151fa41a">AURA_INTERRUPT_FLAG_TAKE_DAMAGE</a>);</div>
<div class="line"><a name="l06652"></a><span class="lineno"> 6652</span>&#160; </div>
<div class="line"><a name="l06653"></a><span class="lineno"> 6653</span>&#160;    <span class="comment">// Drain Mana</span></div>
<div class="line"><a name="l06654"></a><span class="lineno"> 6654</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#af6ec577353f7d3cc59badd7d332153b0">SpellFamilyName</a> == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0a134bc75d430da10f6c1df4977c29cf">SPELLFAMILY_WARLOCK</a></div>
<div class="line"><a name="l06655"></a><span class="lineno"> 6655</span>&#160;            &amp;&amp; <a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a30452de2bd62607418f3962d00124144">SpellFamilyFlags</a>[0] &amp; 0x00000010)</div>
<div class="line"><a name="l06656"></a><span class="lineno"> 6656</span>&#160;    {</div>
<div class="line"><a name="l06657"></a><span class="lineno"> 6657</span>&#160;        <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> manaFeedVal = 0;</div>
<div class="line"><a name="l06658"></a><span class="lineno"> 6658</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html">AuraEffect</a> <span class="keyword">const</span>* aurEff = <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;GetEffect(1))</div>
<div class="line"><a name="l06659"></a><span class="lineno"> 6659</span>&#160;            manaFeedVal = aurEff-&gt;GetAmount();</div>
<div class="line"><a name="l06660"></a><span class="lineno"> 6660</span>&#160;        <span class="comment">// Mana Feed - Drain Mana</span></div>
<div class="line"><a name="l06661"></a><span class="lineno"> 6661</span>&#160;        <span class="keywordflow">if</span> (manaFeedVal &gt; 0)</div>
<div class="line"><a name="l06662"></a><span class="lineno"> 6662</span>&#160;        {</div>
<div class="line"><a name="l06663"></a><span class="lineno"> 6663</span>&#160;            <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> feedAmount = <a class="code" href="../../d9/de9/src_2common_2_utilities_2util_8h.html#ae00607f8188c59ffcea5a3997c0120b0">CalculatePct</a>(gainedAmount, manaFeedVal);</div>
<div class="line"><a name="l06664"></a><span class="lineno"> 6664</span>&#160;            caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(caster, 32554, &amp;feedAmount, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l06665"></a><span class="lineno"> 6665</span>&#160;        }</div>
<div class="line"><a name="l06666"></a><span class="lineno"> 6666</span>&#160;    }</div>
<div class="line"><a name="l06667"></a><span class="lineno"> 6667</span>&#160;}</div>
<div class="ttc" id="a_unit_8h_html_a0709fc3ab848cf1b8b4853813b8fe011a043102900f6d0a56c4ba2aaf151fa41a"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a0709fc3ab848cf1b8b4853813b8fe011a043102900f6d0a56c4ba2aaf151fa41a">AURA_INTERRUPT_FLAG_TAKE_DAMAGE</a></div><div class="ttdeci">@ AURA_INTERRUPT_FLAG_TAKE_DAMAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00053">Unit.h:53</a></div></div>
<div class="ttc" id="aclass_spell_info_html_aad468ff1d83ba29cad67dc5d395337db"><div class="ttname"><a href="../../d4/d7d/class_spell_info.html#aad468ff1d83ba29cad67dc5d395337db">SpellInfo::ManaCostPercentage</a></div><div class="ttdeci">uint32 ManaCostPercentage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d70/_spell_info_8h_source.html#l00362">SpellInfo.h:362</a></div></div>
<div class="ttc" id="aclass_unit_html_a5639a855e969bbb0d743322066a7ad19"><div class="ttname"><a href="../../da/db7/class_unit.html#a5639a855e969bbb0d743322066a7ad19">Unit::GetSpellCritDamageReduction</a></div><div class="ttdeci">uint32 GetSpellCritDamageReduction(uint32 damage) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01685">Unit.h:1685</a></div></div>
<div class="ttc" id="asrc_2common_2_utilities_2util_8h_html_acc70a4cd7bafafa527a375b638ee2f9a"><div class="ttname"><a href="../../d9/de9/src_2common_2_utilities_2util_8h.html#acc70a4cd7bafafa527a375b638ee2f9a">ApplyPct</a></div><div class="ttdeci">T ApplyPct(T &amp;base, U pct)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/src_2common_2_utilities_2util_8h_source.html#l00110">Util.h:110</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l13814">Unit::AddThreat()</a>, <a class="el" href="../../d9/de9/src_2common_2_utilities_2util_8h_source.html#l00110">ApplyPct()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00053">AURA_INTERRUPT_FLAG_TAKE_DAMAGE</a>, <a class="el" href="../../d9/de9/src_2common_2_utilities_2util_8h_source.html#l00098">CalculatePct()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01144">Unit::CastCustomSpell()</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00387">SpellInfo::Effects</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">GetBase()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00041">GetCasterGUID()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00174">Aura::GetEffect()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00049">GetEffIndex()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00098">Object::GetGUID()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">GetId()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01581">Unit::GetMaxPower()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01578">Unit::getPowerType()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01685">Unit::GetSpellCritDamageReduction()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01519">Unit::HasUnitState()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01888">Unit::IsAlive()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l12143">Unit::IsImmunedToDamageOrSchool()</a>, <a class="el" href="../../d3/d07/src_2common_2_logging_2_log_8h_source.html#l00273">LOG_DEBUG</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00120">m_amount</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00115">m_spellInfo</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00362">SpellInfo::ManaCostPercentage</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l01386">max</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l13328">Unit::ModifyPower()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00241">POWER_MANA</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04681">Unit::RemoveAurasWithInterruptFlags()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05834">Unit::SendPeriodicAuraLog()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01081">SendTickImmune()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00777">SPELL_EFFECT_PERSISTENT_AREA_AURA</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01491">SPELL_MISS_NONE</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l03459">SPELLFAMILY_WARLOCK</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00382">SpellInfo::SpellFamilyFlags</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00381">SpellInfo::SpellFamilyName</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l03114">Unit::SpellHitResult()</a>, <a class="el" href="../../da/d5f/_object_guid_8cpp_source.html#l00047">ObjectGuid::ToString()</a>, <a class="el" href="../../de/d3c/_string_convert_8h_source.html#l00315">Acore::ToString()</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00497">UNIT_STATE_ISOLATED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01087">PeriodicTick()</a>.</p>

</div>
</div>
<a id="a0e5699c43a4f49c32daa9c1b6df068ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e5699c43a4f49c32daa9c1b6df068ce">&#9670;&nbsp;</a></span>HandlePeriodicPowerBurnAuraTick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandlePeriodicPowerBurnAuraTick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06737">6737</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l06738"></a><span class="lineno"> 6738</span>&#160;{</div>
<div class="line"><a name="l06739"></a><span class="lineno"> 6739</span>&#160;    <a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414">Powers</a> <a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a> = <a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414">Powers</a>(<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><a name="l06740"></a><span class="lineno"> 6740</span>&#160; </div>
<div class="line"><a name="l06741"></a><span class="lineno"> 6741</span>&#160;    <span class="keywordflow">if</span> (!caster || !target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5ea3f54af571493f7889220724667189">IsAlive</a>() || target-&gt;<a class="code" href="../../da/db7/class_unit.html#ad44d31430fab9282a79e8682822ccd9c">getPowerType</a>() != <a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>)</div>
<div class="line"><a name="l06742"></a><span class="lineno"> 6742</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06743"></a><span class="lineno"> 6743</span>&#160; </div>
<div class="line"><a name="l06744"></a><span class="lineno"> 6744</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#ab78147cd520d2dac6be709b4c80a7de3">HasUnitState</a>(<a class="code" href="../../d5/d32/_unit_8h.html#ae51d2ecb71f7a5cb3882982a622c9544a7c4ae74029844364315885e02df35505">UNIT_STATE_ISOLATED</a>) || target-&gt;<a class="code" href="../../da/db7/class_unit.html#ae7269683ec5b0e44c3ee49bd6f896615">IsImmunedToDamageOrSchool</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()))</div>
<div class="line"><a name="l06745"></a><span class="lineno"> 6745</span>&#160;    {</div>
<div class="line"><a name="l06746"></a><span class="lineno"> 6746</span>&#160;        <a class="code" href="../../da/df1/class_aura_effect.html#a94ad6938ac754595a00f0f5a8e2019c5">SendTickImmune</a>(target, caster);</div>
<div class="line"><a name="l06747"></a><span class="lineno"> 6747</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06748"></a><span class="lineno"> 6748</span>&#160;    }</div>
<div class="line"><a name="l06749"></a><span class="lineno"> 6749</span>&#160; </div>
<div class="line"><a name="l06750"></a><span class="lineno"> 6750</span>&#160;    <span class="comment">// ignore negative values (can be result apply spellmods to aura damage</span></div>
<div class="line"><a name="l06751"></a><span class="lineno"> 6751</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> damage = <a class="code" href="../../d9/df6/my__global_8h.html#affe776513b24d84b39af8ab0930fef7f">std::max</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a>, 0);</div>
<div class="line"><a name="l06752"></a><span class="lineno"> 6752</span>&#160; </div>
<div class="line"><a name="l06753"></a><span class="lineno"> 6753</span>&#160;    <span class="comment">// resilience reduce mana draining effect at spell crit damage reduction (added in 2.4)</span></div>
<div class="line"><a name="l06754"></a><span class="lineno"> 6754</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a> == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a>)</div>
<div class="line"><a name="l06755"></a><span class="lineno"> 6755</span>&#160;        damage -= target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5639a855e969bbb0d743322066a7ad19">GetSpellCritDamageReduction</a>(damage);</div>
<div class="line"><a name="l06756"></a><span class="lineno"> 6756</span>&#160; </div>
<div class="line"><a name="l06757"></a><span class="lineno"> 6757</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> gain = <a class="code" href="../../df/de2/namespace_g3_d.html#ae911b90657d7162d47997c702af655a8">uint32</a>(-target-&gt;<a class="code" href="../../da/db7/class_unit.html#a71c66b7e4d8815d9ea68b838f4ff0f09">ModifyPower</a>(<a class="code" href="../../dc/d0f/_vehicle_defines_8h.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>, -damage));</div>
<div class="line"><a name="l06758"></a><span class="lineno"> 6758</span>&#160; </div>
<div class="line"><a name="l06759"></a><span class="lineno"> 6759</span>&#160;    <span class="keywordtype">float</span> dmgMultiplier = <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].CalcValueMultiplier(caster);</div>
<div class="line"><a name="l06760"></a><span class="lineno"> 6760</span>&#160; </div>
<div class="line"><a name="l06761"></a><span class="lineno"> 6761</span>&#160;    <a class="code" href="../../d4/d7d/class_spell_info.html">SpellInfo</a> <span class="keyword">const</span>* spellProto = <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>();</div>
<div class="line"><a name="l06762"></a><span class="lineno"> 6762</span>&#160;    <span class="comment">// maybe has to be sent different to client, but not by SMSG_PERIODICAURALOG</span></div>
<div class="line"><a name="l06763"></a><span class="lineno"> 6763</span>&#160;    <a class="code" href="../../d3/d15/struct_spell_non_melee_damage.html">SpellNonMeleeDamage</a> damageInfo(caster, target, spellProto, spellProto-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a72ac013c860d3af649879442115971ab">SchoolMask</a>);</div>
<div class="line"><a name="l06764"></a><span class="lineno"> 6764</span>&#160;    <span class="comment">// no SpellDamageBonus for burn mana</span></div>
<div class="line"><a name="l06765"></a><span class="lineno"> 6765</span>&#160;    caster-&gt;<a class="code" href="../../da/db7/class_unit.html#af7dee3a5dbbc2970cec0ef851b81eaf7">CalculateSpellDamageTaken</a>(&amp;damageInfo, <a class="code" href="../../df/de2/namespace_g3_d.html#af80d9dbc6fa48c9ff714c7158adb60ae">int32</a>(gain * dmgMultiplier), spellProto);</div>
<div class="line"><a name="l06766"></a><span class="lineno"> 6766</span>&#160; </div>
<div class="line"><a name="l06767"></a><span class="lineno"> 6767</span>&#160;    <a class="code" href="../../da/db7/class_unit.html#af0c5f2f98b065f2d3976f18e4bc964a4">Unit::DealDamageMods</a>(damageInfo.target, damageInfo.damage, &amp;damageInfo.absorb);</div>
<div class="line"><a name="l06768"></a><span class="lineno"> 6768</span>&#160; </div>
<div class="line"><a name="l06769"></a><span class="lineno"> 6769</span>&#160;    caster-&gt;<a class="code" href="../../da/db7/class_unit.html#aaf7877cad85523173a7bcd7af163e8cb">SendSpellNonMeleeDamageLog</a>(&amp;damageInfo);</div>
<div class="line"><a name="l06770"></a><span class="lineno"> 6770</span>&#160; </div>
<div class="line"><a name="l06771"></a><span class="lineno"> 6771</span>&#160;    <span class="comment">// Set trigger flag</span></div>
<div class="line"><a name="l06772"></a><span class="lineno"> 6772</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> procAttacker = <a class="code" href="../../d3/d75/_spell_mgr_8h.html#ade1c2af066d4cf1bbcd88f13f01cd4d6a429d6c885f9687a1b041436cb45d74ce">PROC_FLAG_DONE_PERIODIC</a>;</div>
<div class="line"><a name="l06773"></a><span class="lineno"> 6773</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> procVictim   = <a class="code" href="../../d3/d75/_spell_mgr_8h.html#ade1c2af066d4cf1bbcd88f13f01cd4d6a968d75fc25f1413369015f9ba98870b4">PROC_FLAG_TAKEN_PERIODIC</a>;</div>
<div class="line"><a name="l06774"></a><span class="lineno"> 6774</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> procEx       = <a class="code" href="../../d2/d2e/_unit_8cpp.html#afb539370dad036ff97905efdbb4270c0">createProcExtendMask</a>(&amp;damageInfo, <a class="code" href="../../df/d0b/_shared_defines_8h.html#ac42174a036914cd9ca25c52e98bef65aa893d017f010f243616e70394c7fec096">SPELL_MISS_NONE</a>) | <a class="code" href="../../d3/d75/_spell_mgr_8h.html#ac9aaef596a1061b6b944e1dc0e679b46a94a1aa9ac3cd331d95f2d0c421f35f59">PROC_EX_INTERNAL_DOT</a>;</div>
<div class="line"><a name="l06775"></a><span class="lineno"> 6775</span>&#160;    <span class="keywordflow">if</span> (damageInfo.damage)</div>
<div class="line"><a name="l06776"></a><span class="lineno"> 6776</span>&#160;        procVictim |= <a class="code" href="../../d3/d75/_spell_mgr_8h.html#ade1c2af066d4cf1bbcd88f13f01cd4d6abcffcf75e3fd5015383c586153dc32c1">PROC_FLAG_TAKEN_DAMAGE</a>;</div>
<div class="line"><a name="l06777"></a><span class="lineno"> 6777</span>&#160; </div>
<div class="line"><a name="l06778"></a><span class="lineno"> 6778</span>&#160;    caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a6a55b5950949a73f0ca697bd2168b127">DealSpellDamage</a>(&amp;damageInfo, <span class="keyword">true</span>);</div>
<div class="line"><a name="l06779"></a><span class="lineno"> 6779</span>&#160; </div>
<div class="line"><a name="l06780"></a><span class="lineno"> 6780</span>&#160;    <a class="code" href="../../d6/d2a/class_damage_info.html">DamageInfo</a> dmgInfo(damageInfo, <a class="code" href="../../d5/d32/_unit_8h.html#aff59f402d05917ab1de0c5f6bf148ea4a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>);</div>
<div class="line"><a name="l06781"></a><span class="lineno"> 6781</span>&#160;    caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a375e0763d4b957264485484db71be2d6">ProcDamageAndSpell</a>(damageInfo.target, procAttacker, procVictim, procEx, damageInfo.damage, <a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, spellProto, <span class="keyword">nullptr</span>, <a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>(), <span class="keyword">nullptr</span>, &amp;dmgInfo);</div>
<div class="line"><a name="l06782"></a><span class="lineno"> 6782</span>&#160;}</div>
<div class="ttc" id="a_unit_8cpp_html_afb539370dad036ff97905efdbb4270c0"><div class="ttname"><a href="../../d2/d2e/_unit_8cpp.html#afb539370dad036ff97905efdbb4270c0">createProcExtendMask</a></div><div class="ttdeci">uint32 createProcExtendMask(SpellNonMeleeDamage *damageInfo, SpellMissInfo missCondition)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l15366">Unit.cpp:15366</a></div></div>
<div class="ttc" id="aclass_spell_info_html_a72ac013c860d3af649879442115971ab"><div class="ttname"><a href="../../d4/d7d/class_spell_info.html#a72ac013c860d3af649879442115971ab">SpellInfo::SchoolMask</a></div><div class="ttdeci">uint32 SchoolMask</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d70/_spell_info_8h_source.html#l00386">SpellInfo.h:386</a></div></div>
<div class="ttc" id="aclass_unit_html_a6a55b5950949a73f0ca697bd2168b127"><div class="ttname"><a href="../../da/db7/class_unit.html#a6a55b5950949a73f0ca697bd2168b127">Unit::DealSpellDamage</a></div><div class="ttdeci">void DealSpellDamage(SpellNonMeleeDamage *damageInfo, bool durabilityLoss)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l01346">Unit.cpp:1346</a></div></div>
<div class="ttc" id="aclass_unit_html_af7dee3a5dbbc2970cec0ef851b81eaf7"><div class="ttname"><a href="../../da/db7/class_unit.html#af7dee3a5dbbc2970cec0ef851b81eaf7">Unit::CalculateSpellDamageTaken</a></div><div class="ttdeci">void CalculateSpellDamageTaken(SpellNonMeleeDamage *damageInfo, int32 damage, SpellInfo const *spellInfo, WeaponAttackType attackType=BASE_ATTACK, bool crit=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l01215">Unit.cpp:1215</a></div></div>
<div class="ttc" id="astruct_spell_non_melee_damage_html"><div class="ttname"><a href="../../d3/d15/struct_spell_non_melee_damage.html">SpellNonMeleeDamage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l01035">Unit.h:1036</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/d32/_unit_8h_source.html#l01048">SpellNonMeleeDamage::absorb</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00555">BASE_ATTACK</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01215">Unit::CalculateSpellDamageTaken()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l15366">createProcExtendMask()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01045">SpellNonMeleeDamage::damage</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l00763">Unit::DealDamageMods()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01346">Unit::DealSpellDamage()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00596">DOT</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00387">SpellInfo::Effects</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00049">GetEffIndex()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01578">Unit::getPowerType()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01685">Unit::GetSpellCritDamageReduction()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01519">Unit::HasUnitState()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01888">Unit::IsAlive()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l12143">Unit::IsImmunedToDamageOrSchool()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00120">m_amount</a>, <a class="el" href="../../d9/df6/my__global_8h_source.html#l01386">max</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l13328">Unit::ModifyPower()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00241">POWER_MANA</a>, <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00219">PROC_EX_INTERNAL_DOT</a>, <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00134">PROC_FLAG_DONE_PERIODIC</a>, <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00137">PROC_FLAG_TAKEN_DAMAGE</a>, <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00135">PROC_FLAG_TAKEN_PERIODIC</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05823">Unit::ProcDamageAndSpell()</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00386">SpellInfo::SchoolMask</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05781">Unit::SendSpellNonMeleeDamageLog()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01081">SendTickImmune()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01491">SPELL_MISS_NONE</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01042">SpellNonMeleeDamage::target</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00497">UNIT_STATE_ISOLATED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01087">PeriodicTick()</a>.</p>

</div>
</div>
<a id="a545377a3f6c71f42c3897206a2dc0919"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a545377a3f6c71f42c3897206a2dc0919">&#9670;&nbsp;</a></span>HandlePeriodicTriggerSpellAuraTick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandlePeriodicTriggerSpellAuraTick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05861">5861</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05862"></a><span class="lineno"> 5862</span>&#160;{</div>
<div class="line"><a name="l05863"></a><span class="lineno"> 5863</span>&#160;    <span class="comment">// generic casting code with custom spells and target/caster customs</span></div>
<div class="line"><a name="l05864"></a><span class="lineno"> 5864</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> triggerSpellId = <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].TriggerSpell;</div>
<div class="line"><a name="l05865"></a><span class="lineno"> 5865</span>&#160; </div>
<div class="line"><a name="l05866"></a><span class="lineno"> 5866</span>&#160;    <a class="code" href="../../d4/d7d/class_spell_info.html">SpellInfo</a> <span class="keyword">const</span>* triggeredSpellInfo = <a class="code" href="../../d3/d75/_spell_mgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellInfo(triggerSpellId);</div>
<div class="line"><a name="l05867"></a><span class="lineno"> 5867</span>&#160;    <a class="code" href="../../d4/d7d/class_spell_info.html">SpellInfo</a> <span class="keyword">const</span>* auraSpellInfo = <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>();</div>
<div class="line"><a name="l05868"></a><span class="lineno"> 5868</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> auraId = auraSpellInfo-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a49bc14059c2bd3785231c52e0d54d382">Id</a>;</div>
<div class="line"><a name="l05869"></a><span class="lineno"> 5869</span>&#160; </div>
<div class="line"><a name="l05870"></a><span class="lineno"> 5870</span>&#160;    <span class="comment">// specific code for cases with no trigger spell provided in field</span></div>
<div class="line"><a name="l05871"></a><span class="lineno"> 5871</span>&#160;    <span class="keywordflow">if</span> (triggeredSpellInfo == <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l05872"></a><span class="lineno"> 5872</span>&#160;    {</div>
<div class="line"><a name="l05873"></a><span class="lineno"> 5873</span>&#160;        <span class="keywordflow">switch</span> (auraSpellInfo-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#af6ec577353f7d3cc59badd7d332153b0">SpellFamilyName</a>)</div>
<div class="line"><a name="l05874"></a><span class="lineno"> 5874</span>&#160;        {</div>
<div class="line"><a name="l05875"></a><span class="lineno"> 5875</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0ebbb6206eb92cdc484b416eb6f41743">SPELLFAMILY_GENERIC</a>:</div>
<div class="line"><a name="l05876"></a><span class="lineno"> 5876</span>&#160;                {</div>
<div class="line"><a name="l05877"></a><span class="lineno"> 5877</span>&#160;                    <span class="keywordflow">switch</span> (auraId)</div>
<div class="line"><a name="l05878"></a><span class="lineno"> 5878</span>&#160;                    {</div>
<div class="line"><a name="l05879"></a><span class="lineno"> 5879</span>&#160;                        <span class="comment">// Thaumaturgy Channel</span></div>
<div class="line"><a name="l05880"></a><span class="lineno"> 5880</span>&#160;                        <span class="keywordflow">case</span> 9712:</div>
<div class="line"><a name="l05881"></a><span class="lineno"> 5881</span>&#160;                            triggerSpellId = 21029;</div>
<div class="line"><a name="l05882"></a><span class="lineno"> 5882</span>&#160;                            <span class="keywordflow">if</span> (caster)</div>
<div class="line"><a name="l05883"></a><span class="lineno"> 5883</span>&#160;                                caster-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(caster, triggerSpellId, <span class="keyword">true</span>);</div>
<div class="line"><a name="l05884"></a><span class="lineno"> 5884</span>&#160;                            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05885"></a><span class="lineno"> 5885</span>&#160;                        <span class="comment">// Brood Affliction: Bronze</span></div>
<div class="line"><a name="l05886"></a><span class="lineno"> 5886</span>&#160;                        <span class="keywordflow">case</span> 23170:</div>
<div class="line"><a name="l05887"></a><span class="lineno"> 5887</span>&#160;                            triggerSpellId = 23171;</div>
<div class="line"><a name="l05888"></a><span class="lineno"> 5888</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05889"></a><span class="lineno"> 5889</span>&#160;                        <span class="comment">// Restoration</span></div>
<div class="line"><a name="l05890"></a><span class="lineno"> 5890</span>&#160;                        <span class="keywordflow">case</span> 24379:</div>
<div class="line"><a name="l05891"></a><span class="lineno"> 5891</span>&#160;                        <span class="keywordflow">case</span> 23493:</div>
<div class="line"><a name="l05892"></a><span class="lineno"> 5892</span>&#160;                            {</div>
<div class="line"><a name="l05893"></a><span class="lineno"> 5893</span>&#160;                                <span class="keywordflow">if</span> (caster)</div>
<div class="line"><a name="l05894"></a><span class="lineno"> 5894</span>&#160;                                {</div>
<div class="line"><a name="l05895"></a><span class="lineno"> 5895</span>&#160;                                    <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> heal = caster-&gt;<a class="code" href="../../da/db7/class_unit.html#ac6fc3f50b72cb6f2fd8bb988d48a8dba">CountPctFromMaxHealth</a>(10);</div>
<div class="line"><a name="l05896"></a><span class="lineno"> 5896</span>&#160;                                    <a class="code" href="../../db/d5d/class_heal_info.html">HealInfo</a> healInfo(caster, target, heal, auraSpellInfo, auraSpellInfo-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a8dc618d81b8658f72b686f8ac9e90829">GetSchoolMask</a>());</div>
<div class="line"><a name="l05897"></a><span class="lineno"> 5897</span>&#160;                                    caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a62382ca15ef5f687651acd024efa1714">HealBySpell</a>(healInfo);</div>
<div class="line"><a name="l05898"></a><span class="lineno"> 5898</span>&#160; </div>
<div class="line"><a name="l05899"></a><span class="lineno"> 5899</span>&#160;                                    <span class="keywordflow">if</span> (<a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> mana = caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a93f83fd909310de2c76382d00d7dbbf1">GetMaxPower</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a>))</div>
<div class="line"><a name="l05900"></a><span class="lineno"> 5900</span>&#160;                                    {</div>
<div class="line"><a name="l05901"></a><span class="lineno"> 5901</span>&#160;                                        mana /= 10;</div>
<div class="line"><a name="l05902"></a><span class="lineno"> 5902</span>&#160;                                        caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a1ed7bebb7769f200cc2625ae2a1988b0">EnergizeBySpell</a>(caster, 23493, mana, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a>);</div>
<div class="line"><a name="l05903"></a><span class="lineno"> 5903</span>&#160;                                    }</div>
<div class="line"><a name="l05904"></a><span class="lineno"> 5904</span>&#160;                                }</div>
<div class="line"><a name="l05905"></a><span class="lineno"> 5905</span>&#160;                                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05906"></a><span class="lineno"> 5906</span>&#160;                            }</div>
<div class="line"><a name="l05907"></a><span class="lineno"> 5907</span>&#160;                        <span class="comment">// Nitrous Boost</span></div>
<div class="line"><a name="l05908"></a><span class="lineno"> 5908</span>&#160;                        <span class="keywordflow">case</span> 27746:</div>
<div class="line"><a name="l05909"></a><span class="lineno"> 5909</span>&#160;                            <span class="keywordflow">if</span> (caster &amp;&amp; target-&gt;<a class="code" href="../../da/db7/class_unit.html#ad7e475d80b9af430cc076d7c01f967e9">GetPower</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a>) &gt;= 10)</div>
<div class="line"><a name="l05910"></a><span class="lineno"> 5910</span>&#160;                            {</div>
<div class="line"><a name="l05911"></a><span class="lineno"> 5911</span>&#160;                                target-&gt;<a class="code" href="../../da/db7/class_unit.html#a71c66b7e4d8815d9ea68b838f4ff0f09">ModifyPower</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a>, -10);</div>
<div class="line"><a name="l05912"></a><span class="lineno"> 5912</span>&#160;                                target-&gt;<a class="code" href="../../da/db7/class_unit.html#ab0862bc9abdba0e6cf232a1ebb4efd91">SendEnergizeSpellLog</a>(caster, 27746, 10, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a>);</div>
<div class="line"><a name="l05913"></a><span class="lineno"> 5913</span>&#160;                            }</div>
<div class="line"><a name="l05914"></a><span class="lineno"> 5914</span>&#160;                            <span class="keywordflow">else</span></div>
<div class="line"><a name="l05915"></a><span class="lineno"> 5915</span>&#160;                                target-&gt;<a class="code" href="../../da/db7/class_unit.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(27746);</div>
<div class="line"><a name="l05916"></a><span class="lineno"> 5916</span>&#160;                            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05917"></a><span class="lineno"> 5917</span>&#160;                        <span class="comment">// Frost Blast</span></div>
<div class="line"><a name="l05918"></a><span class="lineno"> 5918</span>&#160;                        <span class="keywordflow">case</span> 27808:</div>
<div class="line"><a name="l05919"></a><span class="lineno"> 5919</span>&#160;                            <span class="keywordflow">if</span> (caster)</div>
<div class="line"><a name="l05920"></a><span class="lineno"> 5920</span>&#160;                            {</div>
<div class="line"><a name="l05921"></a><span class="lineno"> 5921</span>&#160;                                caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(29879, <a class="code" href="../../d5/d32/_unit_8h.html#a4ad87b8c967acbbcb154a32bc123371bae5c19f392b2ebda372a39538fa9b592a">SPELLVALUE_BASE_POINT0</a>, <a class="code" href="../../df/de2/namespace_g3_d.html#af80d9dbc6fa48c9ff714c7158adb60ae">int32</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#ac6fc3f50b72cb6f2fd8bb988d48a8dba">CountPctFromMaxHealth</a>(21)), target, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l05922"></a><span class="lineno"> 5922</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a0c28e995bc0e15c692c24154bab9df4d">GetTickNumber</a>() == 1)</div>
<div class="line"><a name="l05923"></a><span class="lineno"> 5923</span>&#160;                                    caster-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 27808, <span class="keyword">true</span>);</div>
<div class="line"><a name="l05924"></a><span class="lineno"> 5924</span>&#160;                            }</div>
<div class="line"><a name="l05925"></a><span class="lineno"> 5925</span>&#160;                            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05926"></a><span class="lineno"> 5926</span>&#160;                        <span class="comment">// Inoculate Nestlewood Owlkin</span></div>
<div class="line"><a name="l05927"></a><span class="lineno"> 5927</span>&#160;                        <span class="keywordflow">case</span> 29528:</div>
<div class="line"><a name="l05928"></a><span class="lineno"> 5928</span>&#160;                            <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2a93dfa528ffc48db4993fb7ac62696db9">TYPEID_UNIT</a>) <span class="comment">// prevent error reports in case ignored player target</span></div>
<div class="line"><a name="l05929"></a><span class="lineno"> 5929</span>&#160;                                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05930"></a><span class="lineno"> 5930</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05931"></a><span class="lineno"> 5931</span>&#160;                        <span class="comment">// Feed Captured Animal</span></div>
<div class="line"><a name="l05932"></a><span class="lineno"> 5932</span>&#160;                        <span class="keywordflow">case</span> 29917:</div>
<div class="line"><a name="l05933"></a><span class="lineno"> 5933</span>&#160;                            triggerSpellId = 29916;</div>
<div class="line"><a name="l05934"></a><span class="lineno"> 5934</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05935"></a><span class="lineno"> 5935</span>&#160;                        <span class="comment">// Extract Gas</span></div>
<div class="line"><a name="l05936"></a><span class="lineno"> 5936</span>&#160;                        <span class="keywordflow">case</span> 30427:</div>
<div class="line"><a name="l05937"></a><span class="lineno"> 5937</span>&#160;                            {</div>
<div class="line"><a name="l05938"></a><span class="lineno"> 5938</span>&#160;                                <span class="comment">// move loot to player inventory and despawn target</span></div>
<div class="line"><a name="l05939"></a><span class="lineno"> 5939</span>&#160;                                <span class="keywordflow">if</span> (caster &amp;&amp; caster-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a> &amp;&amp;</div>
<div class="line"><a name="l05940"></a><span class="lineno"> 5940</span>&#160;                                        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2a93dfa528ffc48db4993fb7ac62696db9">TYPEID_UNIT</a> &amp;&amp;</div>
<div class="line"><a name="l05941"></a><span class="lineno"> 5941</span>&#160;                                        target-&gt;<a class="code" href="../../d8/d83/class_object.html#a4a4bdac0d151f9193aa3581bda31193c">ToCreature</a>()-&gt;<a class="code" href="../../d1/dac/class_creature.html#ad5f14814c48941c2c7205196064e7a60">GetCreatureTemplate</a>()-&gt;<a class="code" href="../../d2/d0b/struct_creature_template.html#a41b5b566ed4467063839cc328f31befe">type</a> == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a5bc40f1116d89138cda8ebd1a04694dfa42f63a8ac1c2beef9f57e0bee333c3af">CREATURE_TYPE_GAS_CLOUD</a>)</div>
<div class="line"><a name="l05942"></a><span class="lineno"> 5942</span>&#160;                                {</div>
<div class="line"><a name="l05943"></a><span class="lineno"> 5943</span>&#160;                                    <a class="code" href="../../d8/d53/class_player.html">Player</a>* player = caster-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>();</div>
<div class="line"><a name="l05944"></a><span class="lineno"> 5944</span>&#160;                                    <a class="code" href="../../d1/dac/class_creature.html">Creature</a>* creature = target-&gt;<a class="code" href="../../d8/d83/class_object.html#a4a4bdac0d151f9193aa3581bda31193c">ToCreature</a>();</div>
<div class="line"><a name="l05945"></a><span class="lineno"> 5945</span>&#160;                                    <span class="comment">// missing lootid has been reported on startup - just return</span></div>
<div class="line"><a name="l05946"></a><span class="lineno"> 5946</span>&#160;                                    <span class="keywordflow">if</span> (!creature-&gt;<a class="code" href="../../d1/dac/class_creature.html#ad5f14814c48941c2c7205196064e7a60">GetCreatureTemplate</a>()-&gt;<a class="code" href="../../d2/d0b/struct_creature_template.html#a587931c50c46f01ace454be66092683d">SkinLootId</a>)</div>
<div class="line"><a name="l05947"></a><span class="lineno"> 5947</span>&#160;                                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05948"></a><span class="lineno"> 5948</span>&#160; </div>
<div class="line"><a name="l05949"></a><span class="lineno"> 5949</span>&#160;                                    player-&gt;<a class="code" href="../../d8/d53/class_player.html#a0b1a642b3efc74f5e024686a93475914">AutoStoreLoot</a>(creature-&gt;<a class="code" href="../../d1/dac/class_creature.html#ad5f14814c48941c2c7205196064e7a60">GetCreatureTemplate</a>()-&gt;<a class="code" href="../../d2/d0b/struct_creature_template.html#a587931c50c46f01ace454be66092683d">SkinLootId</a>, <a class="code" href="../../d1/dbe/_loot_mgr_8cpp.html#a195e88b39c43d01cbf8b1871a7129a60">LootTemplates_Skinning</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l05950"></a><span class="lineno"> 5950</span>&#160; </div>
<div class="line"><a name="l05951"></a><span class="lineno"> 5951</span>&#160;                                    creature-&gt;<a class="code" href="../../d1/dac/class_creature.html#abce66404f36b926cf403555911bcb9f7">DespawnOrUnsummon</a>();</div>
<div class="line"><a name="l05952"></a><span class="lineno"> 5952</span>&#160;                                }</div>
<div class="line"><a name="l05953"></a><span class="lineno"> 5953</span>&#160;                                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05954"></a><span class="lineno"> 5954</span>&#160;                            }</div>
<div class="line"><a name="l05955"></a><span class="lineno"> 5955</span>&#160;                        <span class="comment">// Quake</span></div>
<div class="line"><a name="l05956"></a><span class="lineno"> 5956</span>&#160;                        <span class="keywordflow">case</span> 30576:</div>
<div class="line"><a name="l05957"></a><span class="lineno"> 5957</span>&#160;                            triggerSpellId = 30571;</div>
<div class="line"><a name="l05958"></a><span class="lineno"> 5958</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05959"></a><span class="lineno"> 5959</span>&#160;                        <span class="comment">// Doom</span></div>
<div class="line"><a name="l05960"></a><span class="lineno"> 5960</span>&#160;                        <span class="comment">// TODO: effect trigger spell may be independant on spell targets, and executed in spell finish phase</span></div>
<div class="line"><a name="l05961"></a><span class="lineno"> 5961</span>&#160;                        <span class="comment">// so instakill will be naturally done before trigger spell</span></div>
<div class="line"><a name="l05962"></a><span class="lineno"> 5962</span>&#160;                        <span class="keywordflow">case</span> 31347:</div>
<div class="line"><a name="l05963"></a><span class="lineno"> 5963</span>&#160;                            {</div>
<div class="line"><a name="l05964"></a><span class="lineno"> 5964</span>&#160;                                target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 31350, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l05965"></a><span class="lineno"> 5965</span>&#160;                                <a class="code" href="../../da/db7/class_unit.html#a9460fa097109489bcc6f710804be072a">Unit::Kill</a>(target, target);</div>
<div class="line"><a name="l05966"></a><span class="lineno"> 5966</span>&#160;                                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05967"></a><span class="lineno"> 5967</span>&#160;                            }</div>
<div class="line"><a name="l05968"></a><span class="lineno"> 5968</span>&#160;                        <span class="comment">// Spellcloth</span></div>
<div class="line"><a name="l05969"></a><span class="lineno"> 5969</span>&#160;                        <span class="keywordflow">case</span> 31373:</div>
<div class="line"><a name="l05970"></a><span class="lineno"> 5970</span>&#160;                            {</div>
<div class="line"><a name="l05971"></a><span class="lineno"> 5971</span>&#160;                                <span class="comment">// Summon Elemental after create item</span></div>
<div class="line"><a name="l05972"></a><span class="lineno"> 5972</span>&#160;                                target-&gt;<a class="code" href="../../db/df7/class_world_object.html#aaf7058bd6b40bbfd38cbcd4f740c0344">SummonCreature</a>(17870, 0, 0, 0, target-&gt;<a class="code" href="../../d1/d26/struct_position.html#a74cabfb8f441acb38e1abd5bf6ecdc84">GetOrientation</a>(), <a class="code" href="../../df/d30/_object_8h.html#a38c6d8d01cbe0c49b035f348f7724148a2ed37622e9cac6dbba3d2bb354307493">TEMPSUMMON_DEAD_DESPAWN</a>, 0);</div>
<div class="line"><a name="l05973"></a><span class="lineno"> 5973</span>&#160;                                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05974"></a><span class="lineno"> 5974</span>&#160;                            }</div>
<div class="line"><a name="l05975"></a><span class="lineno"> 5975</span>&#160;                        <span class="comment">// Eye of Grillok</span></div>
<div class="line"><a name="l05976"></a><span class="lineno"> 5976</span>&#160;                        <span class="keywordflow">case</span> 38495:</div>
<div class="line"><a name="l05977"></a><span class="lineno"> 5977</span>&#160;                            triggerSpellId = 38530;</div>
<div class="line"><a name="l05978"></a><span class="lineno"> 5978</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05979"></a><span class="lineno"> 5979</span>&#160;                        <span class="comment">// Absorb Eye of Grillok (Zezzak&#39;s Shard)</span></div>
<div class="line"><a name="l05980"></a><span class="lineno"> 5980</span>&#160;                        <span class="keywordflow">case</span> 38554:</div>
<div class="line"><a name="l05981"></a><span class="lineno"> 5981</span>&#160;                            {</div>
<div class="line"><a name="l05982"></a><span class="lineno"> 5982</span>&#160;                                <span class="keywordflow">if</span> (!caster || target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2a93dfa528ffc48db4993fb7ac62696db9">TYPEID_UNIT</a>)</div>
<div class="line"><a name="l05983"></a><span class="lineno"> 5983</span>&#160;                                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05984"></a><span class="lineno"> 5984</span>&#160; </div>
<div class="line"><a name="l05985"></a><span class="lineno"> 5985</span>&#160;                                caster-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(caster, 38495, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l05986"></a><span class="lineno"> 5986</span>&#160; </div>
<div class="line"><a name="l05987"></a><span class="lineno"> 5987</span>&#160;                                <a class="code" href="../../d1/dac/class_creature.html">Creature</a>* creatureTarget = target-&gt;<a class="code" href="../../d8/d83/class_object.html#a4a4bdac0d151f9193aa3581bda31193c">ToCreature</a>();</div>
<div class="line"><a name="l05988"></a><span class="lineno"> 5988</span>&#160; </div>
<div class="line"><a name="l05989"></a><span class="lineno"> 5989</span>&#160;                                creatureTarget-&gt;<a class="code" href="../../d1/dac/class_creature.html#abce66404f36b926cf403555911bcb9f7">DespawnOrUnsummon</a>();</div>
<div class="line"><a name="l05990"></a><span class="lineno"> 5990</span>&#160;                                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05991"></a><span class="lineno"> 5991</span>&#160;                            }</div>
<div class="line"><a name="l05992"></a><span class="lineno"> 5992</span>&#160;                        <span class="comment">// Tear of Azzinoth Summon Channel - it&#39;s not really supposed to do anything, and this only prevents the console spam</span></div>
<div class="line"><a name="l05993"></a><span class="lineno"> 5993</span>&#160;                        <span class="keywordflow">case</span> 39857:</div>
<div class="line"><a name="l05994"></a><span class="lineno"> 5994</span>&#160;                            triggerSpellId = 39856;</div>
<div class="line"><a name="l05995"></a><span class="lineno"> 5995</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05996"></a><span class="lineno"> 5996</span>&#160;                        <span class="comment">// Personalized Weather</span></div>
<div class="line"><a name="l05997"></a><span class="lineno"> 5997</span>&#160;                        <span class="keywordflow">case</span> 46736:</div>
<div class="line"><a name="l05998"></a><span class="lineno"> 5998</span>&#160;                            triggerSpellId = 46737;</div>
<div class="line"><a name="l05999"></a><span class="lineno"> 5999</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06000"></a><span class="lineno"> 6000</span>&#160;                        <span class="comment">// Shield Level 1</span></div>
<div class="line"><a name="l06001"></a><span class="lineno"> 6001</span>&#160;                        <span class="keywordflow">case</span> 63130:</div>
<div class="line"><a name="l06002"></a><span class="lineno"> 6002</span>&#160;                        <span class="comment">// Shield Level 2</span></div>
<div class="line"><a name="l06003"></a><span class="lineno"> 6003</span>&#160;                        <span class="keywordflow">case</span> 63131:</div>
<div class="line"><a name="l06004"></a><span class="lineno"> 6004</span>&#160;                        <span class="comment">// Shield Level 3</span></div>
<div class="line"><a name="l06005"></a><span class="lineno"> 6005</span>&#160;                        <span class="keywordflow">case</span> 63132:</div>
<div class="line"><a name="l06006"></a><span class="lineno"> 6006</span>&#160;                        <span class="comment">// Ball of Flames Visual</span></div>
<div class="line"><a name="l06007"></a><span class="lineno"> 6007</span>&#160;                        <span class="keywordflow">case</span> 71706:</div>
<div class="line"><a name="l06008"></a><span class="lineno"> 6008</span>&#160;                            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06009"></a><span class="lineno"> 6009</span>&#160;                        <span class="comment">// Oculus, Mage-Lord Urom, Time Bomb</span></div>
<div class="line"><a name="l06010"></a><span class="lineno"> 6010</span>&#160;                        <span class="keywordflow">case</span> 51121:</div>
<div class="line"><a name="l06011"></a><span class="lineno"> 6011</span>&#160;                        <span class="keywordflow">case</span> 59376:</div>
<div class="line"><a name="l06012"></a><span class="lineno"> 6012</span>&#160;                            {</div>
<div class="line"><a name="l06013"></a><span class="lineno"> 6013</span>&#160;                                <span class="keyword">const</span> <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> dmg = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5173c1774b09b42c409bf31280c37d36">GetMaxHealth</a>() - target-&gt;<a class="code" href="../../da/db7/class_unit.html#a958172d6051b106e3b3c776e4f9f3952">GetHealth</a>();</div>
<div class="line"><a name="l06014"></a><span class="lineno"> 6014</span>&#160;                                target-&gt;<a class="code" href="../../da/db7/class_unit.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(target, 51132, &amp;dmg, 0, 0, <span class="keyword">true</span>);</div>
<div class="line"><a name="l06015"></a><span class="lineno"> 6015</span>&#160;                                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06016"></a><span class="lineno"> 6016</span>&#160;                            }</div>
<div class="line"><a name="l06017"></a><span class="lineno"> 6017</span>&#160;                    }</div>
<div class="line"><a name="l06018"></a><span class="lineno"> 6018</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06019"></a><span class="lineno"> 6019</span>&#160;                }</div>
<div class="line"><a name="l06020"></a><span class="lineno"> 6020</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba9c8a9c6e102c760263471a93e58e80ea">SPELLFAMILY_SHAMAN</a>:</div>
<div class="line"><a name="l06021"></a><span class="lineno"> 6021</span>&#160;                {</div>
<div class="line"><a name="l06022"></a><span class="lineno"> 6022</span>&#160;                    <span class="keywordflow">switch</span> (auraId)</div>
<div class="line"><a name="l06023"></a><span class="lineno"> 6023</span>&#160;                    {</div>
<div class="line"><a name="l06024"></a><span class="lineno"> 6024</span>&#160;                        <span class="comment">// Lightning Shield (The Earthshatterer set trigger after cast Lighting Shield)</span></div>
<div class="line"><a name="l06025"></a><span class="lineno"> 6025</span>&#160;                        <span class="keywordflow">case</span> 28820:</div>
<div class="line"><a name="l06026"></a><span class="lineno"> 6026</span>&#160;                            {</div>
<div class="line"><a name="l06027"></a><span class="lineno"> 6027</span>&#160;                                <span class="comment">// Need remove self if Lightning Shield not active</span></div>
<div class="line"><a name="l06028"></a><span class="lineno"> 6028</span>&#160;                                <span class="keywordflow">if</span> (!target-&gt;<a class="code" href="../../da/db7/class_unit.html#a520e229dc1a93ea4a53d0ba81e586d11">GetAuraEffect</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a3c6e04ab343a9f5ef767f8e8dd71af5b">SPELL_AURA_PROC_TRIGGER_SPELL</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba9c8a9c6e102c760263471a93e58e80ea">SPELLFAMILY_SHAMAN</a>, 0x400, 0, 0))</div>
<div class="line"><a name="l06029"></a><span class="lineno"> 6029</span>&#160;                                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(28820);</div>
<div class="line"><a name="l06030"></a><span class="lineno"> 6030</span>&#160;                                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06031"></a><span class="lineno"> 6031</span>&#160;                            }</div>
<div class="line"><a name="l06032"></a><span class="lineno"> 6032</span>&#160;                    }</div>
<div class="line"><a name="l06033"></a><span class="lineno"> 6033</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06034"></a><span class="lineno"> 6034</span>&#160;                }</div>
<div class="line"><a name="l06035"></a><span class="lineno"> 6035</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l06036"></a><span class="lineno"> 6036</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06037"></a><span class="lineno"> 6037</span>&#160;        }</div>
<div class="line"><a name="l06038"></a><span class="lineno"> 6038</span>&#160;    }</div>
<div class="line"><a name="l06039"></a><span class="lineno"> 6039</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l06040"></a><span class="lineno"> 6040</span>&#160;    {</div>
<div class="line"><a name="l06041"></a><span class="lineno"> 6041</span>&#160;        <span class="comment">// Spell exist but require custom code</span></div>
<div class="line"><a name="l06042"></a><span class="lineno"> 6042</span>&#160;        <span class="keywordflow">switch</span> (auraId)</div>
<div class="line"><a name="l06043"></a><span class="lineno"> 6043</span>&#160;        {</div>
<div class="line"><a name="l06044"></a><span class="lineno"> 6044</span>&#160;            <span class="comment">// Mana Tide</span></div>
<div class="line"><a name="l06045"></a><span class="lineno"> 6045</span>&#160;            <span class="keywordflow">case</span> 16191:</div>
<div class="line"><a name="l06046"></a><span class="lineno"> 6046</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(target, triggerSpellId, &amp;<a class="code" href="../../da/df1/class_aura_effect.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l06047"></a><span class="lineno"> 6047</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06048"></a><span class="lineno"> 6048</span>&#160;            <span class="comment">// Poison (Grobbulus)</span></div>
<div class="line"><a name="l06049"></a><span class="lineno"> 6049</span>&#160;            <span class="keywordflow">case</span> 28158:</div>
<div class="line"><a name="l06050"></a><span class="lineno"> 6050</span>&#160;            <span class="keywordflow">case</span> 54362:</div>
<div class="line"><a name="l06051"></a><span class="lineno"> 6051</span>&#160;            <span class="comment">// Slime Pool (Dreadscale &amp; Acidmaw)</span></div>
<div class="line"><a name="l06052"></a><span class="lineno"> 6052</span>&#160;            <span class="keywordflow">case</span> 66882:</div>
<div class="line"><a name="l06053"></a><span class="lineno"> 6053</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(triggerSpellId, <a class="code" href="../../d5/d32/_unit_8h.html#a4ad87b8c967acbbcb154a32bc123371ba97ab1803f9ef6a623afef555025a6df8">SPELLVALUE_RADIUS_MOD</a>, (<a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>)((((<span class="keywordtype">float</span>)<a class="code" href="../../da/df1/class_aura_effect.html#ab8c7fb50eac3482a162cbbacd64f1625">m_tickNumber</a> / 60) * 0.9f + 0.1f) * 10000 * 2 / 3), <span class="keyword">nullptr</span>, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l06054"></a><span class="lineno"> 6054</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06055"></a><span class="lineno"> 6055</span>&#160;            <span class="comment">// Eye of Eternity, Malygos, Arcane Overload</span></div>
<div class="line"><a name="l06056"></a><span class="lineno"> 6056</span>&#160;            <span class="keywordflow">case</span> 56432:</div>
<div class="line"><a name="l06057"></a><span class="lineno"> 6057</span>&#160;                <span class="keywordflow">if</span> (triggerSpellId == 56438)</div>
<div class="line"><a name="l06058"></a><span class="lineno"> 6058</span>&#160;                {</div>
<div class="line"><a name="l06059"></a><span class="lineno"> 6059</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(triggerSpellId, <a class="code" href="../../d5/d32/_unit_8h.html#a4ad87b8c967acbbcb154a32bc123371ba97ab1803f9ef6a623afef555025a6df8">SPELLVALUE_RADIUS_MOD</a>, (<a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>)(10000 * (1.0f - 0.02f * (<a class="code" href="../../da/df1/class_aura_effect.html#ab8c7fb50eac3482a162cbbacd64f1625">m_tickNumber</a> + 1))), <span class="keyword">nullptr</span>, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l06060"></a><span class="lineno"> 6060</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06061"></a><span class="lineno"> 6061</span>&#160;                }</div>
<div class="line"><a name="l06062"></a><span class="lineno"> 6062</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06063"></a><span class="lineno"> 6063</span>&#160;            <span class="comment">// Beacon of Light</span></div>
<div class="line"><a name="l06064"></a><span class="lineno"> 6064</span>&#160;            <span class="keywordflow">case</span> 53563:</div>
<div class="line"><a name="l06065"></a><span class="lineno"> 6065</span>&#160;                {</div>
<div class="line"><a name="l06066"></a><span class="lineno"> 6066</span>&#160;                    <span class="comment">// area aura owner casts the spell</span></div>
<div class="line"><a name="l06067"></a><span class="lineno"> 6067</span>&#160;                    <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#aa2544b7425a5ec6df5d7e9ba26aff84f">GetUnitOwner</a>()-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, triggeredSpellInfo, <span class="keyword">true</span>, 0, <span class="keyword">this</span>, <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;GetUnitOwner()-&gt;GetGUID());</div>
<div class="line"><a name="l06068"></a><span class="lineno"> 6068</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06069"></a><span class="lineno"> 6069</span>&#160;                }</div>
<div class="line"><a name="l06070"></a><span class="lineno"> 6070</span>&#160;            <span class="comment">// Slime Spray - temporary here until preventing default effect works again</span></div>
<div class="line"><a name="l06071"></a><span class="lineno"> 6071</span>&#160;            <span class="comment">// added on 9.10.2010</span></div>
<div class="line"><a name="l06072"></a><span class="lineno"> 6072</span>&#160;            <span class="keywordflow">case</span> 69508:</div>
<div class="line"><a name="l06073"></a><span class="lineno"> 6073</span>&#160;                {</div>
<div class="line"><a name="l06074"></a><span class="lineno"> 6074</span>&#160;                    <span class="keywordflow">if</span> (caster)</div>
<div class="line"><a name="l06075"></a><span class="lineno"> 6075</span>&#160;                        caster-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, triggerSpellId, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, caster-&gt;<a class="code" href="../../d8/d83/class_object.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>());</div>
<div class="line"><a name="l06076"></a><span class="lineno"> 6076</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06077"></a><span class="lineno"> 6077</span>&#160;                }</div>
<div class="line"><a name="l06078"></a><span class="lineno"> 6078</span>&#160;            <span class="comment">// Trial of the Crusader, Jaraxxus, Spinning Pain Spike</span></div>
<div class="line"><a name="l06079"></a><span class="lineno"> 6079</span>&#160;            <span class="keywordflow">case</span> 66283:</div>
<div class="line"><a name="l06080"></a><span class="lineno"> 6080</span>&#160;                {</div>
<div class="line"><a name="l06081"></a><span class="lineno"> 6081</span>&#160;                    <span class="keyword">const</span> <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> dmg = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5173c1774b09b42c409bf31280c37d36">GetMaxHealth</a>() / 2;</div>
<div class="line"><a name="l06082"></a><span class="lineno"> 6082</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(target, 66316, &amp;dmg, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l06083"></a><span class="lineno"> 6083</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06084"></a><span class="lineno"> 6084</span>&#160;                }</div>
<div class="line"><a name="l06085"></a><span class="lineno"> 6085</span>&#160;            <span class="comment">// Violet Hold, Moragg, Ray of Suffering, Ray of Pain</span></div>
<div class="line"><a name="l06086"></a><span class="lineno"> 6086</span>&#160;            <span class="keywordflow">case</span> 54442:</div>
<div class="line"><a name="l06087"></a><span class="lineno"> 6087</span>&#160;            <span class="keywordflow">case</span> 59524:</div>
<div class="line"><a name="l06088"></a><span class="lineno"> 6088</span>&#160;            <span class="keywordflow">case</span> 54438:</div>
<div class="line"><a name="l06089"></a><span class="lineno"> 6089</span>&#160;            <span class="keywordflow">case</span> 59523:</div>
<div class="line"><a name="l06090"></a><span class="lineno"> 6090</span>&#160;                {</div>
<div class="line"><a name="l06091"></a><span class="lineno"> 6091</span>&#160;                    <span class="keywordflow">if</span> (caster)</div>
<div class="line"><a name="l06092"></a><span class="lineno"> 6092</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="../../da/db7/class_unit.html">Unit</a>* victim = caster-&gt;<a class="code" href="../../da/db7/class_unit.html#af8c91dcb86bd35e070c646e8baeaa4b4">GetVictim</a>())</div>
<div class="line"><a name="l06093"></a><span class="lineno"> 6093</span>&#160;                            <span class="keywordflow">if</span>(victim-&gt;GetDistance(caster) &lt; 45.0f)</div>
<div class="line"><a name="l06094"></a><span class="lineno"> 6094</span>&#160;                            {</div>
<div class="line"><a name="l06095"></a><span class="lineno"> 6095</span>&#160;                                target = victim;</div>
<div class="line"><a name="l06096"></a><span class="lineno"> 6096</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06097"></a><span class="lineno"> 6097</span>&#160;                            }</div>
<div class="line"><a name="l06098"></a><span class="lineno"> 6098</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06099"></a><span class="lineno"> 6099</span>&#160;                }</div>
<div class="line"><a name="l06100"></a><span class="lineno"> 6100</span>&#160;            <span class="keywordflow">case</span> 24745: <span class="comment">// Summon Templar, Trigger</span></div>
<div class="line"><a name="l06101"></a><span class="lineno"> 6101</span>&#160;            <span class="keywordflow">case</span> 24747: <span class="comment">// Summon Templar Fire, Trigger</span></div>
<div class="line"><a name="l06102"></a><span class="lineno"> 6102</span>&#160;            <span class="keywordflow">case</span> 24757: <span class="comment">// Summon Templar Air, Trigger</span></div>
<div class="line"><a name="l06103"></a><span class="lineno"> 6103</span>&#160;            <span class="keywordflow">case</span> 24759: <span class="comment">// Summon Templar Earth, Trigger</span></div>
<div class="line"><a name="l06104"></a><span class="lineno"> 6104</span>&#160;            <span class="keywordflow">case</span> 24761: <span class="comment">// Summon Templar Water, Trigger</span></div>
<div class="line"><a name="l06105"></a><span class="lineno"> 6105</span>&#160;            <span class="keywordflow">case</span> 24762: <span class="comment">// Summon Duke, Trigger</span></div>
<div class="line"><a name="l06106"></a><span class="lineno"> 6106</span>&#160;            <span class="keywordflow">case</span> 24766: <span class="comment">// Summon Duke Fire, Trigger</span></div>
<div class="line"><a name="l06107"></a><span class="lineno"> 6107</span>&#160;            <span class="keywordflow">case</span> 24769: <span class="comment">// Summon Duke Air, Trigger</span></div>
<div class="line"><a name="l06108"></a><span class="lineno"> 6108</span>&#160;            <span class="keywordflow">case</span> 24771: <span class="comment">// Summon Duke Earth, Trigger</span></div>
<div class="line"><a name="l06109"></a><span class="lineno"> 6109</span>&#160;            <span class="keywordflow">case</span> 24773: <span class="comment">// Summon Duke Water, Trigger</span></div>
<div class="line"><a name="l06110"></a><span class="lineno"> 6110</span>&#160;            <span class="keywordflow">case</span> 24785: <span class="comment">// Summon Royal, Trigger</span></div>
<div class="line"><a name="l06111"></a><span class="lineno"> 6111</span>&#160;            <span class="keywordflow">case</span> 24787: <span class="comment">// Summon Royal Fire, Trigger</span></div>
<div class="line"><a name="l06112"></a><span class="lineno"> 6112</span>&#160;            <span class="keywordflow">case</span> 24791: <span class="comment">// Summon Royal Air, Trigger</span></div>
<div class="line"><a name="l06113"></a><span class="lineno"> 6113</span>&#160;            <span class="keywordflow">case</span> 24792: <span class="comment">// Summon Royal Earth, Trigger</span></div>
<div class="line"><a name="l06114"></a><span class="lineno"> 6114</span>&#160;            <span class="keywordflow">case</span> 24793: <span class="comment">// Summon Royal Water, Trigger</span></div>
<div class="line"><a name="l06115"></a><span class="lineno"> 6115</span>&#160;                {</div>
<div class="line"><a name="l06116"></a><span class="lineno"> 6116</span>&#160;                    <span class="comment">// All this spells trigger a spell that requires reagents; if the</span></div>
<div class="line"><a name="l06117"></a><span class="lineno"> 6117</span>&#160;                    <span class="comment">// triggered spell is cast as &quot;triggered&quot;, reagents are not consumed</span></div>
<div class="line"><a name="l06118"></a><span class="lineno"> 6118</span>&#160;                    <span class="keywordflow">if</span> (caster)</div>
<div class="line"><a name="l06119"></a><span class="lineno"> 6119</span>&#160;                        caster-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, triggerSpellId, <span class="keyword">false</span>);</div>
<div class="line"><a name="l06120"></a><span class="lineno"> 6120</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06121"></a><span class="lineno"> 6121</span>&#160;                }</div>
<div class="line"><a name="l06122"></a><span class="lineno"> 6122</span>&#160;            <span class="comment">// Hunter - Rapid Recuperation</span></div>
<div class="line"><a name="l06123"></a><span class="lineno"> 6123</span>&#160;            <span class="keywordflow">case</span> 56654:</div>
<div class="line"><a name="l06124"></a><span class="lineno"> 6124</span>&#160;            <span class="keywordflow">case</span> 58882:</div>
<div class="line"><a name="l06125"></a><span class="lineno"> 6125</span>&#160;                <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> amount = <a class="code" href="../../df/de2/namespace_g3_d.html#af80d9dbc6fa48c9ff714c7158adb60ae">int32</a>(target-&gt;<a class="code" href="../../da/db7/class_unit.html#a93f83fd909310de2c76382d00d7dbbf1">GetMaxPower</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a>) * <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() / 100.0f);</div>
<div class="line"><a name="l06126"></a><span class="lineno"> 6126</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(target, triggerSpellId, &amp;amount, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l06127"></a><span class="lineno"> 6127</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06128"></a><span class="lineno"> 6128</span>&#160;        }</div>
<div class="line"><a name="l06129"></a><span class="lineno"> 6129</span>&#160;    }</div>
<div class="line"><a name="l06130"></a><span class="lineno"> 6130</span>&#160; </div>
<div class="line"><a name="l06131"></a><span class="lineno"> 6131</span>&#160;    <span class="comment">// Reget trigger spell proto</span></div>
<div class="line"><a name="l06132"></a><span class="lineno"> 6132</span>&#160;    triggeredSpellInfo = <a class="code" href="../../d3/d75/_spell_mgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellInfo(triggerSpellId);</div>
<div class="line"><a name="l06133"></a><span class="lineno"> 6133</span>&#160; </div>
<div class="line"><a name="l06134"></a><span class="lineno"> 6134</span>&#160;    <span class="keywordflow">if</span> (triggeredSpellInfo)</div>
<div class="line"><a name="l06135"></a><span class="lineno"> 6135</span>&#160;    {</div>
<div class="line"><a name="l06136"></a><span class="lineno"> 6136</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/db7/class_unit.html">Unit</a>* triggerCaster = triggeredSpellInfo-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a4c7c234798883a938f264f5ef9825e0a">NeedsToBeTriggeredByCaster</a>(<a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>, <a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()) ? caster : target)</div>
<div class="line"><a name="l06137"></a><span class="lineno"> 6137</span>&#160;        {</div>
<div class="line"><a name="l06138"></a><span class="lineno"> 6138</span>&#160;            <a class="code" href="../../dc/d05/class_spell_cast_targets.html">SpellCastTargets</a> targets;</div>
<div class="line"><a name="l06139"></a><span class="lineno"> 6139</span>&#160;            targets.<a class="code" href="../../dc/d05/class_spell_cast_targets.html#a981f7520eed4002d70d7b15eb5e710a7">SetUnitTarget</a>(target);</div>
<div class="line"><a name="l06140"></a><span class="lineno"> 6140</span>&#160;            <span class="keywordflow">if</span> (triggeredSpellInfo-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a3e2564cfe616fac133d4a81af36f6b5a">IsChannelCategorySpell</a>() &amp;&amp; <a class="code" href="../../da/df1/class_aura_effect.html#a256fe55e1c441e5dcc7c33abb4222e69">m_channelData</a>)</div>
<div class="line"><a name="l06141"></a><span class="lineno"> 6141</span>&#160;            {</div>
<div class="line"><a name="l06142"></a><span class="lineno"> 6142</span>&#160;                targets.<a class="code" href="../../dc/d05/class_spell_cast_targets.html#ad3c49b0121f60c337101ed9107dbc4e8">SetDstChannel</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a256fe55e1c441e5dcc7c33abb4222e69">m_channelData</a>-&gt;<a class="code" href="../../de/dc5/struct_channel_target_data.html#aa5cfec093a599f4bf33ebf0c73a2f4ac">spellDst</a>);</div>
<div class="line"><a name="l06143"></a><span class="lineno"> 6143</span>&#160;                targets.<a class="code" href="../../dc/d05/class_spell_cast_targets.html#aa1f08cea0af20a69bc9e3cea47a03e62">SetObjectTargetChannel</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a256fe55e1c441e5dcc7c33abb4222e69">m_channelData</a>-&gt;<a class="code" href="../../de/dc5/struct_channel_target_data.html#afad1c896d6a137ebb224fd636ba4d7f2">channelGUID</a>);</div>
<div class="line"><a name="l06144"></a><span class="lineno"> 6144</span>&#160;            }</div>
<div class="line"><a name="l06145"></a><span class="lineno"> 6145</span>&#160; </div>
<div class="line"><a name="l06146"></a><span class="lineno"> 6146</span>&#160;            <span class="comment">// Xinef: do not skip reagent cost for entry casts</span></div>
<div class="line"><a name="l06147"></a><span class="lineno"> 6147</span>&#160;            <a class="code" href="../../d5/d32/_unit_8h.html#a9f3c49d8db7e142b86eba36bc8951967">TriggerCastFlags</a> triggerFlags = <a class="code" href="../../d5/d32/_unit_8h.html#a9f3c49d8db7e142b86eba36bc8951967a10578b171eb74dc9851866cc6eb53f3a">TRIGGERED_FULL_MASK</a>;</div>
<div class="line"><a name="l06148"></a><span class="lineno"> 6148</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;Effects[<a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].TargetA.GetCheckType() == <a class="code" href="../../dc/d70/_spell_info_8h.html#a392c69714f880d43f8afb5510ba1fff7ab9ec49a9cbf57785f6e61d137e7d89dc">TARGET_CHECK_ENTRY</a> || <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;Effects[<a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].TargetB.GetCheckType() == <a class="code" href="../../dc/d70/_spell_info_8h.html#a392c69714f880d43f8afb5510ba1fff7ab9ec49a9cbf57785f6e61d137e7d89dc">TARGET_CHECK_ENTRY</a>)</div>
<div class="line"><a name="l06149"></a><span class="lineno"> 6149</span>&#160;                triggerFlags = <a class="code" href="../../d5/d32/_unit_8h.html#a9f3c49d8db7e142b86eba36bc8951967">TriggerCastFlags</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a9f3c49d8db7e142b86eba36bc8951967a10578b171eb74dc9851866cc6eb53f3a">TRIGGERED_FULL_MASK</a> &amp; ~<a class="code" href="../../d5/d32/_unit_8h.html#a9f3c49d8db7e142b86eba36bc8951967a1186247cfc7007358221bd431b828ba0">TRIGGERED_IGNORE_POWER_AND_REAGENT_COST</a>);</div>
<div class="line"><a name="l06150"></a><span class="lineno"> 6150</span>&#160; </div>
<div class="line"><a name="l06151"></a><span class="lineno"> 6151</span>&#160;            triggerCaster-&gt;CastSpell(targets, triggeredSpellInfo, <span class="keyword">nullptr</span>, triggerFlags, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l06152"></a><span class="lineno"> 6152</span>&#160;            <a class="code" href="../../d3/d07/src_2common_2_logging_2_log_8h.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura&quot;</span>, <span class="stringliteral">&quot;AuraEffect::HandlePeriodicTriggerSpellAuraTick: Spell %u Trigger %u&quot;</span>, <a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), triggeredSpellInfo-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a49bc14059c2bd3785231c52e0d54d382">Id</a>);</div>
<div class="line"><a name="l06153"></a><span class="lineno"> 6153</span>&#160;        }</div>
<div class="line"><a name="l06154"></a><span class="lineno"> 6154</span>&#160;    }</div>
<div class="line"><a name="l06155"></a><span class="lineno"> 6155</span>&#160;}</div>
<div class="ttc" id="a_loot_mgr_8cpp_html_a195e88b39c43d01cbf8b1871a7129a60"><div class="ttname"><a href="../../d1/dbe/_loot_mgr_8cpp.html#a195e88b39c43d01cbf8b1871a7129a60">LootTemplates_Skinning</a></div><div class="ttdeci">LootStore LootTemplates_Skinning(&quot;skinning_loot_template&quot;, &quot;creature skinning id&quot;, true)</div></div>
<div class="ttc" id="a_object_8h_html_a38c6d8d01cbe0c49b035f348f7724148a2ed37622e9cac6dbba3d2bb354307493"><div class="ttname"><a href="../../df/d30/_object_8h.html#a38c6d8d01cbe0c49b035f348f7724148a2ed37622e9cac6dbba3d2bb354307493">TEMPSUMMON_DEAD_DESPAWN</a></div><div class="ttdeci">@ TEMPSUMMON_DEAD_DESPAWN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d30/_object_8h_source.html#l00047">Object.h:47</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a5bc40f1116d89138cda8ebd1a04694dfa42f63a8ac1c2beef9f57e0bee333c3af"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a5bc40f1116d89138cda8ebd1a04694dfa42f63a8ac1c2beef9f57e0bee333c3af">CREATURE_TYPE_GAS_CLOUD</a></div><div class="ttdeci">@ CREATURE_TYPE_GAS_CLOUD</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l02611">SharedDefines.h:2610</a></div></div>
<div class="ttc" id="a_spell_info_8h_html_a392c69714f880d43f8afb5510ba1fff7ab9ec49a9cbf57785f6e61d137e7d89dc"><div class="ttname"><a href="../../dc/d70/_spell_info_8h.html#a392c69714f880d43f8afb5510ba1fff7ab9ec49a9cbf57785f6e61d137e7d89dc">TARGET_CHECK_ENTRY</a></div><div class="ttdeci">@ TARGET_CHECK_ENTRY</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d70/_spell_info_8h_source.html#l00115">SpellInfo.h:115</a></div></div>
<div class="ttc" id="a_unit_8h_html_a4ad87b8c967acbbcb154a32bc123371ba97ab1803f9ef6a623afef555025a6df8"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a4ad87b8c967acbbcb154a32bc123371ba97ab1803f9ef6a623afef555025a6df8">SPELLVALUE_RADIUS_MOD</a></div><div class="ttdeci">@ SPELLVALUE_RADIUS_MOD</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00125">Unit.h:125</a></div></div>
<div class="ttc" id="a_unit_8h_html_a9f3c49d8db7e142b86eba36bc8951967"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a9f3c49d8db7e142b86eba36bc8951967">TriggerCastFlags</a></div><div class="ttdeci">TriggerCastFlags</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00394">Unit.h:395</a></div></div>
<div class="ttc" id="a_unit_8h_html_a9f3c49d8db7e142b86eba36bc8951967a10578b171eb74dc9851866cc6eb53f3a"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a9f3c49d8db7e142b86eba36bc8951967a10578b171eb74dc9851866cc6eb53f3a">TRIGGERED_FULL_MASK</a></div><div class="ttdeci">@ TRIGGERED_FULL_MASK</div><div class="ttdoc">Will return SPELL_FAILED_DONT_REPORT in CheckCast functions.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00413">Unit.h:413</a></div></div>
<div class="ttc" id="a_unit_8h_html_a9f3c49d8db7e142b86eba36bc8951967a1186247cfc7007358221bd431b828ba0"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a9f3c49d8db7e142b86eba36bc8951967a1186247cfc7007358221bd431b828ba0">TRIGGERED_IGNORE_POWER_AND_REAGENT_COST</a></div><div class="ttdeci">@ TRIGGERED_IGNORE_POWER_AND_REAGENT_COST</div><div class="ttdoc">Will ignore Spell and Category cooldowns.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00399">Unit.h:399</a></div></div>
<div class="ttc" id="aclass_aura_html_aa2544b7425a5ec6df5d7e9ba26aff84f"><div class="ttname"><a href="../../d2/dde/class_aura.html#aa2544b7425a5ec6df5d7e9ba26aff84f">Aura::GetUnitOwner</a></div><div class="ttdeci">Unit * GetUnitOwner() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dcf/_spell_auras_8h_source.html#l00108">SpellAuras.h:108</a></div></div>
<div class="ttc" id="aclass_creature_html_abce66404f36b926cf403555911bcb9f7"><div class="ttname"><a href="../../d1/dac/class_creature.html#abce66404f36b926cf403555911bcb9f7">Creature::DespawnOrUnsummon</a></div><div class="ttdeci">void DespawnOrUnsummon(Milliseconds msTimeToDespawn, Seconds forcedRespawnTimer)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d9d/_creature_8cpp_source.html#l01945">Creature.cpp:1945</a></div></div>
<div class="ttc" id="aclass_creature_html_ad5f14814c48941c2c7205196064e7a60"><div class="ttname"><a href="../../d1/dac/class_creature.html#ad5f14814c48941c2c7205196064e7a60">Creature::GetCreatureTemplate</a></div><div class="ttdeci">CreatureTemplate const  * GetCreatureTemplate() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d93/_creature_8h_source.html#l00190">Creature.h:190</a></div></div>
<div class="ttc" id="aclass_player_html_a0b1a642b3efc74f5e024686a93475914"><div class="ttname"><a href="../../d8/d53/class_player.html#a0b1a642b3efc74f5e024686a93475914">Player::AutoStoreLoot</a></div><div class="ttdeci">void AutoStoreLoot(uint8 bag, uint8 slot, uint32 loot_id, LootStore const &amp;store, bool broadcast=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/_player_8cpp_source.html#l12677">Player.cpp:12677</a></div></div>
<div class="ttc" id="aclass_spell_cast_targets_html"><div class="ttname"><a href="../../dc/d05/class_spell_cast_targets.html">SpellCastTargets</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfa/_spell_8h_source.html#l00108">Spell.h:109</a></div></div>
<div class="ttc" id="aclass_spell_cast_targets_html_a981f7520eed4002d70d7b15eb5e710a7"><div class="ttname"><a href="../../dc/d05/class_spell_cast_targets.html#a981f7520eed4002d70d7b15eb5e710a7">SpellCastTargets::SetUnitTarget</a></div><div class="ttdeci">void SetUnitTarget(Unit *target)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d41/_spell_8cpp_source.html#l00241">Spell.cpp:241</a></div></div>
<div class="ttc" id="aclass_spell_cast_targets_html_aa1f08cea0af20a69bc9e3cea47a03e62"><div class="ttname"><a href="../../dc/d05/class_spell_cast_targets.html#aa1f08cea0af20a69bc9e3cea47a03e62">SpellCastTargets::SetObjectTargetChannel</a></div><div class="ttdeci">void SetObjectTargetChannel(ObjectGuid targetGUID)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d41/_spell_8cpp_source.html#l00456">Spell.cpp:456</a></div></div>
<div class="ttc" id="aclass_spell_cast_targets_html_ad3c49b0121f60c337101ed9107dbc4e8"><div class="ttname"><a href="../../dc/d05/class_spell_cast_targets.html#ad3c49b0121f60c337101ed9107dbc4e8">SpellCastTargets::SetDstChannel</a></div><div class="ttdeci">void SetDstChannel(SpellDestination const &amp;spellDest)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d41/_spell_8cpp_source.html#l00461">Spell.cpp:461</a></div></div>
<div class="ttc" id="aclass_spell_info_html_a3e2564cfe616fac133d4a81af36f6b5a"><div class="ttname"><a href="../../d4/d7d/class_spell_info.html#a3e2564cfe616fac133d4a81af36f6b5a">SpellInfo::IsChannelCategorySpell</a></div><div class="ttdeci">bool IsChannelCategorySpell() const</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7f/_spell_info_8cpp_source.html#l01066">SpellInfo.cpp:1066</a></div></div>
<div class="ttc" id="aclass_unit_html_a1ed7bebb7769f200cc2625ae2a1988b0"><div class="ttname"><a href="../../da/db7/class_unit.html#a1ed7bebb7769f200cc2625ae2a1988b0">Unit::EnergizeBySpell</a></div><div class="ttdeci">void EnergizeBySpell(Unit *victim, uint32 SpellID, uint32 Damage, Powers powertype)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l10644">Unit.cpp:10644</a></div></div>
<div class="ttc" id="aclass_unit_html_ab0862bc9abdba0e6cf232a1ebb4efd91"><div class="ttname"><a href="../../da/db7/class_unit.html#ab0862bc9abdba0e6cf232a1ebb4efd91">Unit::SendEnergizeSpellLog</a></div><div class="ttdeci">void SendEnergizeSpellLog(Unit *victim, uint32 SpellID, uint32 Damage, Powers powertype)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l10633">Unit.cpp:10633</a></div></div>
<div class="ttc" id="aclass_world_object_html_aaf7058bd6b40bbfd38cbcd4f740c0344"><div class="ttname"><a href="../../db/df7/class_world_object.html#aaf7058bd6b40bbfd38cbcd4f740c0344">WorldObject::SummonCreature</a></div><div class="ttdeci">TempSummon * SummonCreature(uint32 id, const Position &amp;pos, TempSummonType spwtype=TEMPSUMMON_MANUAL_DESPAWN, uint32 despwtime=0, uint32 vehId=0, SummonPropertiesEntry const *properties=nullptr) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/ded/_object_8cpp_source.html#l02436">Object.cpp:2436</a></div></div>
<div class="ttc" id="astruct_channel_target_data_html_aa5cfec093a599f4bf33ebf0c73a2f4ac"><div class="ttname"><a href="../../de/dc5/struct_channel_target_data.html#aa5cfec093a599f4bf33ebf0c73a2f4ac">ChannelTargetData::spellDst</a></div><div class="ttdeci">SpellDestination spellDst</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfa/_spell_8h_source.html#l00249">Spell.h:249</a></div></div>
<div class="ttc" id="astruct_channel_target_data_html_afad1c896d6a137ebb224fd636ba4d7f2"><div class="ttname"><a href="../../de/dc5/struct_channel_target_data.html#afad1c896d6a137ebb224fd636ba4d7f2">ChannelTargetData::channelGUID</a></div><div class="ttdeci">ObjectGuid channelGUID</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfa/_spell_8h_source.html#l00248">Spell.h:248</a></div></div>
<div class="ttc" id="astruct_creature_template_html_a41b5b566ed4467063839cc328f31befe"><div class="ttname"><a href="../../d2/d0b/struct_creature_template.html#a41b5b566ed4467063839cc328f31befe">CreatureTemplate::type</a></div><div class="ttdeci">uint32 type</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de2/_creature_data_8h_source.html#l00125">CreatureData.h:125</a></div></div>
<div class="ttc" id="astruct_creature_template_html_a587931c50c46f01ace454be66092683d"><div class="ttname"><a href="../../d2/d0b/struct_creature_template.html#a587931c50c46f01ace454be66092683d">CreatureTemplate::SkinLootId</a></div><div class="ttdeci">uint32 SkinLootId</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de2/_creature_data_8h_source.html#l00129">CreatureData.h:129</a></div></div>
<div class="ttc" id="astruct_position_html_a74cabfb8f441acb38e1abd5bf6ecdc84"><div class="ttname"><a href="../../d1/d26/struct_position.html#a74cabfb8f441acb38e1abd5bf6ecdc84">Position::GetOrientation</a></div><div class="ttdeci">float GetOrientation() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d30/_object_8h_source.html#l00337">Object.h:337</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d82/_player_8cpp_source.html#l12677">Player::AutoStoreLoot()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01144">Unit::CastCustomSpell()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01087">Unit::CastSpell()</a>, <a class="el" href="../../d5/dfa/_spell_8h_source.html#l00248">ChannelTargetData::channelGUID</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01568">Unit::CountPctFromMaxHealth()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l02610">CREATURE_TYPE_GAS_CLOUD</a>, <a class="el" href="../../d3/d9d/_creature_8cpp_source.html#l01945">Creature::DespawnOrUnsummon()</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00387">SpellInfo::Effects</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l10644">Unit::EnergizeBySpell()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04989">Unit::GetAuraEffect()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">GetBase()</a>, <a class="el" href="../../d8/d93/_creature_8h_source.html#l00190">Creature::GetCreatureTemplate()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00049">GetEffIndex()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00098">Object::GetGUID()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01559">Unit::GetHealth()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">GetId()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01560">Unit::GetMaxHealth()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01581">Unit::GetMaxPower()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00337">Position::GetOrientation()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01580">Unit::GetPower()</a>, <a class="el" href="../../da/d7f/_spell_info_8cpp_source.html#l01931">SpellInfo::GetSchoolMask()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00079">GetTickNumber()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00108">Aura::GetUnitOwner()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01508">Unit::GetVictim()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l10619">Unit::HealBySpell()</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00315">SpellInfo::Id</a>, <a class="el" href="../../da/d7f/_spell_info_8cpp_source.html#l01066">SpellInfo::IsChannelCategorySpell()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16879">Unit::Kill()</a>, <a class="el" href="../../d3/d07/src_2common_2_logging_2_log_8h_source.html#l00273">LOG_DEBUG</a>, <a class="el" href="../../d1/dbe/_loot_mgr_8cpp.html#a195e88b39c43d01cbf8b1871a7129a60">LootTemplates_Skinning</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00120">m_amount</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00129">m_channelData</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00115">m_spellInfo</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00135">m_tickNumber</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l13328">Unit::ModifyPower()</a>, <a class="el" href="../../da/d7f/_spell_info_8cpp_source.html#l01021">SpellInfo::NeedsToBeTriggeredByCaster()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00241">POWER_MANA</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04420">Unit::RemoveAurasDueToSpell()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l10633">Unit::SendEnergizeSpellLog()</a>, <a class="el" href="../../d8/d41/_spell_8cpp_source.html#l00461">SpellCastTargets::SetDstChannel()</a>, <a class="el" href="../../d8/d41/_spell_8cpp_source.html#l00456">SpellCastTargets::SetObjectTargetChannel()</a>, <a class="el" href="../../d8/d41/_spell_8cpp_source.html#l00241">SpellCastTargets::SetUnitTarget()</a>, <a class="el" href="../../dd/de2/_creature_data_8h_source.html#l00129">CreatureTemplate::SkinLootId</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00105">SPELL_AURA_PROC_TRIGGER_SPELL</a>, <a class="el" href="../../d5/dfa/_spell_8h_source.html#l00249">ChannelTargetData::spellDst</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l03454">SPELLFAMILY_GENERIC</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l03465">SPELLFAMILY_SHAMAN</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00381">SpellInfo::SpellFamilyName</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00122">SPELLVALUE_BASE_POINT0</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00125">SPELLVALUE_RADIUS_MOD</a>, <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00794">sSpellMgr</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l02436">WorldObject::SummonCreature()</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00115">TARGET_CHECK_ENTRY</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00047">TEMPSUMMON_DEAD_DESPAWN</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00183">Object::ToCreature()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00413">TRIGGERED_FULL_MASK</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00399">TRIGGERED_IGNORE_POWER_AND_REAGENT_COST</a>, <a class="el" href="../../dd/de2/_creature_data_8h_source.html#l00125">CreatureTemplate::type</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00037">TYPEID_UNIT</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01087">PeriodicTick()</a>.</p>

</div>
</div>
<a id="af605dc2f9174968cb77b9d3cc50a1fb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af605dc2f9174968cb77b9d3cc50a1fb4">&#9670;&nbsp;</a></span>HandlePeriodicTriggerSpellWithValueAuraTick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandlePeriodicTriggerSpellWithValueAuraTick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06157">6157</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l06158"></a><span class="lineno"> 6158</span>&#160;{</div>
<div class="line"><a name="l06159"></a><span class="lineno"> 6159</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> triggerSpellId = <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code" href="../../da/df1/class_aura_effect.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>].TriggerSpell;</div>
<div class="line"><a name="l06160"></a><span class="lineno"> 6160</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/d7d/class_spell_info.html">SpellInfo</a> <span class="keyword">const</span>* triggeredSpellInfo = <a class="code" href="../../d3/d75/_spell_mgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellInfo(triggerSpellId))</div>
<div class="line"><a name="l06161"></a><span class="lineno"> 6161</span>&#160;    {</div>
<div class="line"><a name="l06162"></a><span class="lineno"> 6162</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/db7/class_unit.html">Unit</a>* triggerCaster = triggeredSpellInfo-&gt;NeedsToBeTriggeredByCaster(<a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>, <a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()) ? caster : target)</div>
<div class="line"><a name="l06163"></a><span class="lineno"> 6163</span>&#160;        {</div>
<div class="line"><a name="l06164"></a><span class="lineno"> 6164</span>&#160;            <a class="code" href="../../dc/d05/class_spell_cast_targets.html">SpellCastTargets</a> targets;</div>
<div class="line"><a name="l06165"></a><span class="lineno"> 6165</span>&#160;            targets.<a class="code" href="../../dc/d05/class_spell_cast_targets.html#a981f7520eed4002d70d7b15eb5e710a7">SetUnitTarget</a>(target);</div>
<div class="line"><a name="l06166"></a><span class="lineno"> 6166</span>&#160;            <span class="keywordflow">if</span> (triggeredSpellInfo-&gt;IsChannelCategorySpell() &amp;&amp; <a class="code" href="../../da/df1/class_aura_effect.html#a256fe55e1c441e5dcc7c33abb4222e69">m_channelData</a>)</div>
<div class="line"><a name="l06167"></a><span class="lineno"> 6167</span>&#160;            {</div>
<div class="line"><a name="l06168"></a><span class="lineno"> 6168</span>&#160;                targets.<a class="code" href="../../dc/d05/class_spell_cast_targets.html#ad3c49b0121f60c337101ed9107dbc4e8">SetDstChannel</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a256fe55e1c441e5dcc7c33abb4222e69">m_channelData</a>-&gt;<a class="code" href="../../de/dc5/struct_channel_target_data.html#aa5cfec093a599f4bf33ebf0c73a2f4ac">spellDst</a>);</div>
<div class="line"><a name="l06169"></a><span class="lineno"> 6169</span>&#160;                targets.<a class="code" href="../../dc/d05/class_spell_cast_targets.html#aa1f08cea0af20a69bc9e3cea47a03e62">SetObjectTargetChannel</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a256fe55e1c441e5dcc7c33abb4222e69">m_channelData</a>-&gt;<a class="code" href="../../de/dc5/struct_channel_target_data.html#afad1c896d6a137ebb224fd636ba4d7f2">channelGUID</a>);</div>
<div class="line"><a name="l06170"></a><span class="lineno"> 6170</span>&#160;            }</div>
<div class="line"><a name="l06171"></a><span class="lineno"> 6171</span>&#160; </div>
<div class="line"><a name="l06172"></a><span class="lineno"> 6172</span>&#160;            <a class="code" href="../../d9/db0/class_custom_spell_values.html">CustomSpellValues</a> values;</div>
<div class="line"><a name="l06173"></a><span class="lineno"> 6173</span>&#160;            values.<a class="code" href="../../d9/db0/class_custom_spell_values.html#a1c14e27dd094be2fccff3d74a1414a80">AddSpellMod</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a4ad87b8c967acbbcb154a32bc123371bae5c19f392b2ebda372a39538fa9b592a">SPELLVALUE_BASE_POINT0</a>, <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><a name="l06174"></a><span class="lineno"> 6174</span>&#160; </div>
<div class="line"><a name="l06175"></a><span class="lineno"> 6175</span>&#160;            triggerCaster-&gt;CastSpell(targets, triggeredSpellInfo, &amp;values, <a class="code" href="../../d5/d32/_unit_8h.html#a9f3c49d8db7e142b86eba36bc8951967a10578b171eb74dc9851866cc6eb53f3a">TRIGGERED_FULL_MASK</a>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l06176"></a><span class="lineno"> 6176</span>&#160;            <a class="code" href="../../d3/d07/src_2common_2_logging_2_log_8h.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura&quot;</span>, <span class="stringliteral">&quot;AuraEffect::HandlePeriodicTriggerSpellWithValueAuraTick: Spell %u Trigger %u&quot;</span>, <a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), triggeredSpellInfo-&gt;Id);</div>
<div class="line"><a name="l06177"></a><span class="lineno"> 6177</span>&#160;        }</div>
<div class="line"><a name="l06178"></a><span class="lineno"> 6178</span>&#160;    }</div>
<div class="line"><a name="l06179"></a><span class="lineno"> 6179</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l06180"></a><span class="lineno"> 6180</span>&#160;    {</div>
<div class="line"><a name="l06181"></a><span class="lineno"> 6181</span>&#160;<span class="preprocessor">#ifdef ELUNA</span></div>
<div class="line"><a name="l06182"></a><span class="lineno"> 6182</span>&#160;        <a class="code" href="../../d1/dac/class_creature.html">Creature</a>* <a class="code" href="../../d4/d71/namespacempq.html#af509b98ca1ebe6c0248f215d23e06c93">c</a> = target-&gt;ToCreature();</div>
<div class="line"><a name="l06183"></a><span class="lineno"> 6183</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d4/d71/namespacempq.html#af509b98ca1ebe6c0248f215d23e06c93">c</a> &amp;&amp; caster)</div>
<div class="line"><a name="l06184"></a><span class="lineno"> 6184</span>&#160;            sEluna-&gt;OnDummyEffect(caster, <a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../df/d0b/_shared_defines_8h.html#a0b4a3c2c7210e88f82b3dc3abb6e6f77">SpellEffIndex</a>(<a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()), target-&gt;ToCreature());</div>
<div class="line"><a name="l06185"></a><span class="lineno"> 6185</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l06186"></a><span class="lineno"> 6186</span>&#160;        <a class="code" href="../../d3/d07/src_2common_2_logging_2_log_8h.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura&quot;</span>, <span class="stringliteral">&quot;AuraEffect::HandlePeriodicTriggerSpellWithValueAuraTick: Spell %u has non-existent spell %u in EffectTriggered[%d] and is therefor not triggered.&quot;</span>, <a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), triggerSpellId, <a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>());</div>
<div class="line"><a name="l06187"></a><span class="lineno"> 6187</span>&#160;    }</div>
<div class="line"><a name="l06188"></a><span class="lineno"> 6188</span>&#160;}</div>
<div class="ttc" id="a_shared_defines_8h_html_a0b4a3c2c7210e88f82b3dc3abb6e6f77"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a0b4a3c2c7210e88f82b3dc3abb6e6f77">SpellEffIndex</a></div><div class="ttdeci">SpellEffIndex</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00028">SharedDefines.h:29</a></div></div>
<div class="ttc" id="aclass_custom_spell_values_html"><div class="ttname"><a href="../../d9/db0/class_custom_spell_values.html">CustomSpellValues</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00133">Unit.h:134</a></div></div>
<div class="ttc" id="aclass_custom_spell_values_html_a1c14e27dd094be2fccff3d74a1414a80"><div class="ttname"><a href="../../d9/db0/class_custom_spell_values.html#a1c14e27dd094be2fccff3d74a1414a80">CustomSpellValues::AddSpellMod</a></div><div class="ttdeci">void AddSpellMod(SpellValueMod mod, int32 value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00136">Unit.h:136</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/d32/_unit_8h_source.html#l00136">CustomSpellValues::AddSpellMod()</a>, <a class="el" href="../../d6/d3e/mpq_8py_source.html#l00295">mpq::c</a>, <a class="el" href="../../d5/dfa/_spell_8h_source.html#l00248">ChannelTargetData::channelGUID</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00387">SpellInfo::Effects</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00049">GetEffIndex()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">GetId()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../d3/d07/src_2common_2_logging_2_log_8h_source.html#l00273">LOG_DEBUG</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00129">m_channelData</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00137">m_effIndex</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00115">m_spellInfo</a>, <a class="el" href="../../d8/d41/_spell_8cpp_source.html#l00461">SpellCastTargets::SetDstChannel()</a>, <a class="el" href="../../d8/d41/_spell_8cpp_source.html#l00456">SpellCastTargets::SetObjectTargetChannel()</a>, <a class="el" href="../../d8/d41/_spell_8cpp_source.html#l00241">SpellCastTargets::SetUnitTarget()</a>, <a class="el" href="../../d5/dfa/_spell_8h_source.html#l00249">ChannelTargetData::spellDst</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00122">SPELLVALUE_BASE_POINT0</a>, <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00794">sSpellMgr</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00183">Object::ToCreature()</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00413">TRIGGERED_FULL_MASK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01087">PeriodicTick()</a>.</p>

</div>
</div>
<a id="ae4ae88f1abefd9f50e42dce8e928b1c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4ae88f1abefd9f50e42dce8e928b1c9">&#9670;&nbsp;</a></span>HandlePhase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandlePhase </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01768">1768</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;{</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160; </div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160; </div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;    <span class="comment">// no-phase is also phase state so same code for apply and remove</span></div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> newPhase = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a839e8e5f55d1067217f39293663663eb">GetPhaseByAuras</a>();</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160; </div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d53/class_player.html">Player</a>* player = target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>())</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;    {</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;        <span class="keywordflow">if</span> (!newPhase)</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;            newPhase = <a class="code" href="../../df/d30/_object_8h.html#a154255f23e41069883118fc4f0d23157aa253161c3caae282ce3c6922048db060">PHASEMASK_NORMAL</a>;</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160; </div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;        <span class="comment">// do not change phase to GM with all phases enabled</span></div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;        <span class="keywordflow">if</span> (player-&gt;IsGameMaster())</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;            newPhase = <a class="code" href="../../df/d30/_object_8h.html#a154255f23e41069883118fc4f0d23157a212ead88887027cc3575f2b07c08af57">PHASEMASK_ANYWHERE</a>;</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160; </div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;        player-&gt;SetPhaseMask(newPhase, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;        player-&gt;GetSession()-&gt;SendSetPhaseShift(newPhase);</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    }</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    {</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;        <span class="keywordflow">if</span> (!newPhase)</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;        {</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;            newPhase = <a class="code" href="../../df/d30/_object_8h.html#a154255f23e41069883118fc4f0d23157aa253161c3caae282ce3c6922048db060">PHASEMASK_NORMAL</a>;</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d1/dac/class_creature.html">Creature</a>* creature = target-&gt;<a class="code" href="../../d8/d83/class_object.html#a4a4bdac0d151f9193aa3581bda31193c">ToCreature</a>())</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../da/d1d/struct_creature_data.html">CreatureData</a> <span class="keyword">const</span>* <a class="code" href="../../df/dea/structdata.html">data</a> = <a class="code" href="../../d9/d77/_object_mgr_8h.html#a736e30da2b5261060ac6cdbb5de3b787">sObjectMgr</a>-&gt;GetCreatureData(creature-&gt;GetSpawnId()))</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;                    newPhase = <a class="code" href="../../df/dea/structdata.html">data</a>-&gt;phaseMask;</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;        }</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160; </div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3f511c51aa1082be9d4777c770a3485">SetPhaseMask</a>(newPhase, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    }</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160; </div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;    <span class="comment">// call functions which may have additional effects after chainging state of unit</span></div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;    <span class="comment">// phase auras normally not expected at BG but anyway better check</span></div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    {</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;        <span class="comment">// drop flag at invisibiliy in bg</span></div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a2be941a27d14de6da7676c6fdbd37bb9">RemoveAurasWithInterruptFlags</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a0709fc3ab848cf1b8b4853813b8fe011a61b4509cc6643cd80da8b6c065d45f4a">AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</a>);</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;    }</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160; </div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    <span class="comment">// need triggering visibility update base at phase update of not GM invisible (other GMs anyway see in any phases)</span></div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9c7dedb1f44ae891b5d393ae1f377ade">IsVisible</a>())</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    {</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;        <span class="keywordflow">if</span> (!target-&gt;<a class="code" href="../../db/df7/class_world_object.html#a76c507a1b3adcebf2732572bc6b67fe0">GetMap</a>()-&gt;<a class="code" href="../../dd/d11/class_map.html#aae3a929aefb05046ef304ffba10aae71">Instanceable</a>())</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;        {</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5b2b731101a2c33063cef5c59e595249">UpdateObjectVisibility</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#aadd29d4cd956b08c12211c756b740d86">m_last_notify_position</a>.<a class="code" href="../../d1/d26/struct_position.html#afdbf0a257fcd7a48066fd92c4eacae3b">Relocate</a>(-5000.0f, -5000.0f, -5000.0f);</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;        }</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5b2b731101a2c33063cef5c59e595249">UpdateObjectVisibility</a>();</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;    }</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;}</div>
<div class="ttc" id="a_object_8h_html_a154255f23e41069883118fc4f0d23157a212ead88887027cc3575f2b07c08af57"><div class="ttname"><a href="../../df/d30/_object_8h.html#a154255f23e41069883118fc4f0d23157a212ead88887027cc3575f2b07c08af57">PHASEMASK_ANYWHERE</a></div><div class="ttdeci">@ PHASEMASK_ANYWHERE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d30/_object_8h_source.html#l00056">Object.h:55</a></div></div>
<div class="ttc" id="a_object_8h_html_a154255f23e41069883118fc4f0d23157aa253161c3caae282ce3c6922048db060"><div class="ttname"><a href="../../df/d30/_object_8h.html#a154255f23e41069883118fc4f0d23157aa253161c3caae282ce3c6922048db060">PHASEMASK_NORMAL</a></div><div class="ttdeci">@ PHASEMASK_NORMAL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d30/_object_8h_source.html#l00054">Object.h:54</a></div></div>
<div class="ttc" id="aclass_unit_html_a839e8e5f55d1067217f39293663663eb"><div class="ttname"><a href="../../da/db7/class_unit.html#a839e8e5f55d1067217f39293663663eb">Unit::GetPhaseByAuras</a></div><div class="ttdeci">uint32 GetPhaseByAuras() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l18152">Unit.cpp:18152</a></div></div>
<div class="ttc" id="aclass_unit_html_a9c7dedb1f44ae891b5d393ae1f377ade"><div class="ttname"><a href="../../da/db7/class_unit.html#a9c7dedb1f44ae891b5d393ae1f377ade">Unit::IsVisible</a></div><div class="ttdeci">bool IsVisible() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l02214">Unit.h:2214</a></div></div>
<div class="ttc" id="aclass_unit_html_aa3f511c51aa1082be9d4777c770a3485"><div class="ttname"><a href="../../da/db7/class_unit.html#aa3f511c51aa1082be9d4777c770a3485">Unit::SetPhaseMask</a></div><div class="ttdeci">void SetPhaseMask(uint32 newPhaseMask, bool update) override</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l18163">Unit.cpp:18163</a></div></div>
<div class="ttc" id="aclass_unit_html_aadd29d4cd956b08c12211c756b740d86"><div class="ttname"><a href="../../da/db7/class_unit.html#aadd29d4cd956b08c12211c756b740d86">Unit::m_last_notify_position</a></div><div class="ttdeci">Position m_last_notify_position</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l02478">Unit.h:2478</a></div></div>
<div class="ttc" id="astruct_creature_data_html"><div class="ttname"><a href="../../da/d1d/struct_creature_data.html">CreatureData</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de2/_creature_data_8h_source.html#l00268">CreatureData.h:269</a></div></div>
<div class="ttc" id="astruct_position_html_afdbf0a257fcd7a48066fd92c4eacae3b"><div class="ttname"><a href="../../d1/d26/struct_position.html#afdbf0a257fcd7a48066fd92c4eacae3b">Position::Relocate</a></div><div class="ttdeci">void Relocate(float x, float y)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d30/_object_8h_source.html#l00295">Object.h:295</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00072">AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00800">WorldObject::GetMap()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l18152">Unit::GetPhaseByAuras()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d3/d63/_map_8h_source.html#l00433">Map::Instanceable()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02214">Unit::IsVisible()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02478">Unit::m_last_notify_position</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00055">PHASEMASK_ANYWHERE</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00054">PHASEMASK_NORMAL</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00295">Position::Relocate()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04681">Unit::RemoveAurasWithInterruptFlags()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l18163">Unit::SetPhaseMask()</a>, <a class="el" href="../../d9/d77/_object_mgr_8h_source.html#l01546">sObjectMgr</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00183">Object::ToCreature()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, and <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l18229">Unit::UpdateObjectVisibility()</a>.</p>

</div>
</div>
<a id="a03f0b850af3051c8815fba75d502c658"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03f0b850af3051c8815fba75d502c658">&#9670;&nbsp;</a></span>HandlePreventFleeing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandlePreventFleeing </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>TODO: find a way to cancel fleeing for assistance. Currently this will only stop creatures fleeing due to low health that could not find nearby allies to flee towards.</p>

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03071">3071</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;{</div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160; </div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;    <span class="comment">// Since patch 3.0.2 this mechanic no longer affects fear effects. It will ONLY prevent humanoids from fleeing due to low health.</span></div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a> || !<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a> || target-&gt;<a class="code" href="../../da/db7/class_unit.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a44cf043145f5a78c5a4e36ecff8a034d">SPELL_AURA_MOD_FEAR</a>))</div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a2903449b4183e13866c6e98d77578887">SetControlled</a>(<span class="keyword">false</span>, <a class="code" href="../../d5/d32/_unit_8h.html#ae51d2ecb71f7a5cb3882982a622c9544ab254220382db03ed44e6cea86ad4c87d">UNIT_STATE_FLEEING</a>);</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05194">Unit::HasAuraType()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l17189">Unit::SetControlled()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00070">SPELL_AURA_MOD_FEAR</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00491">UNIT_STATE_FLEEING</a>.</p>

</div>
</div>
<a id="a683b73bc2152dcc1cf895731abccdd11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a683b73bc2152dcc1cf895731abccdd11">&#9670;&nbsp;</a></span>HandlePreventResurrection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandlePreventResurrection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05756">5756</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05757"></a><span class="lineno"> 5757</span>&#160;{</div>
<div class="line"><a name="l05758"></a><span class="lineno"> 5758</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l05759"></a><span class="lineno"> 5759</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05760"></a><span class="lineno"> 5760</span>&#160; </div>
<div class="line"><a name="l05761"></a><span class="lineno"> 5761</span>&#160;    <span class="keywordflow">if</span> (aurApp-&gt;GetTarget()-&gt;GetTypeId() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l05762"></a><span class="lineno"> 5762</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05763"></a><span class="lineno"> 5763</span>&#160; </div>
<div class="line"><a name="l05764"></a><span class="lineno"> 5764</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l05765"></a><span class="lineno"> 5765</span>&#160;        aurApp-&gt;GetTarget()-&gt;RemoveByteFlag(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881adec3c53fd2c3fb2d9849fb52e62f418c">PLAYER_FIELD_BYTES</a>, 0, <a class="code" href="../../d1/d39/_player_8h.html#a31ae2504a623eb1746ff5da8a1902333adf79443adab6dafc6a7ec2546b3db2b6">PLAYER_FIELD_BYTE_RELEASE_TIMER</a>);</div>
<div class="line"><a name="l05766"></a><span class="lineno"> 5766</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!aurApp-&gt;GetTarget()-&gt;GetMap()-&gt;Instanceable())</div>
<div class="line"><a name="l05767"></a><span class="lineno"> 5767</span>&#160;        aurApp-&gt;GetTarget()-&gt;SetByteFlag(<a class="code" href="../../dd/d65/_update_fields_8h.html#a0e42dc606678c9df7884e1aad621e881adec3c53fd2c3fb2d9849fb52e62f418c">PLAYER_FIELD_BYTES</a>, 0, <a class="code" href="../../d1/d39/_player_8h.html#a31ae2504a623eb1746ff5da8a1902333adf79443adab6dafc6a7ec2546b3db2b6">PLAYER_FIELD_BYTE_RELEASE_TIMER</a>);</div>
<div class="line"><a name="l05768"></a><span class="lineno"> 5768</span>&#160;}</div>
<div class="ttc" id="a_player_8h_html_a31ae2504a623eb1746ff5da8a1902333adf79443adab6dafc6a7ec2546b3db2b6"><div class="ttname"><a href="../../d1/d39/_player_8h.html#a31ae2504a623eb1746ff5da8a1902333adf79443adab6dafc6a7ec2546b3db2b6">PLAYER_FIELD_BYTE_RELEASE_TIMER</a></div><div class="ttdeci">@ PLAYER_FIELD_BYTE_RELEASE_TIMER</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l00541">Player.h:541</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00800">WorldObject::GetMap()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d3/d63/_map_8h_source.html#l00433">Map::Instanceable()</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l00541">PLAYER_FIELD_BYTE_RELEASE_TIMER</a>, <a class="el" href="../../dd/d65/_update_fields_8h_source.html#l00368">PLAYER_FIELD_BYTES</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00921">Object::RemoveByteFlag()</a>, <a class="el" href="../../d8/ded/_object_8cpp_source.html#l00902">Object::SetByteFlag()</a>, and <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>.</p>

</div>
</div>
<a id="ad2a6d0a6fcbf6f5d53633e0d1ab10dd3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2a6d0a6fcbf6f5d53633e0d1ab10dd3">&#9670;&nbsp;</a></span>HandleProc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleProc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/def/class_proc_event_info.html">ProcEventInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>eventInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01137">1137</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;{</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    <span class="keywordtype">bool</span> prevented = <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#a96d2072a3b0b06f82113eb9d3e186ac1">CallScriptEffectProcHandlers</a>(<span class="keyword">this</span>, aurApp, eventInfo);</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    <span class="keywordflow">if</span> (prevented)</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160; </div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>())</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    {</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a3c6e04ab343a9f5ef767f8e8dd71af5b">SPELL_AURA_PROC_TRIGGER_SPELL</a>:</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;            <a class="code" href="../../da/df1/class_aura_effect.html#af9b15db701d1d804b52a425b23c1e154">HandleProcTriggerSpellAuraProc</a>(aurApp, eventInfo);</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a651bba5033934ceb87de2329c845808a">SPELL_AURA_PROC_TRIGGER_SPELL_WITH_VALUE</a>:</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;            <a class="code" href="../../da/df1/class_aura_effect.html#a8457bab110c3818d1506a3b5d767a411">HandleProcTriggerSpellWithValueAuraProc</a>(aurApp, eventInfo);</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799acc5994eedad39ba63e84f1279bfd5e2f">SPELL_AURA_PROC_TRIGGER_DAMAGE</a>:</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;            <a class="code" href="../../da/df1/class_aura_effect.html#abf1a9e6c5d480b4a72634fd4d489c81f">HandleProcTriggerDamageAuraProc</a>(aurApp, eventInfo);</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a97e43d4f89788b97090ee8df08682157">SPELL_AURA_RAID_PROC_FROM_CHARGE</a>:</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;            <a class="code" href="../../da/df1/class_aura_effect.html#a71194f9e306aa0a2f477d59f9f0a3b97">HandleRaidProcFromChargeAuraProc</a>(aurApp, eventInfo);</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a2223f78228bf66cb54c15fea685c809c">SPELL_AURA_RAID_PROC_FROM_CHARGE_WITH_VALUE</a>:</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;            <a class="code" href="../../da/df1/class_aura_effect.html#ac49e3ca52e3aece117127e6712d2069f">HandleRaidProcFromChargeWithValueAuraProc</a>(aurApp, eventInfo);</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    }</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160; </div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#a97347f8dc5f2dd96c7c45a77c13988a5">CallScriptAfterEffectProcHandlers</a>(<span class="keyword">this</span>, aurApp, eventInfo);</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;}</div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a2223f78228bf66cb54c15fea685c809c"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a2223f78228bf66cb54c15fea685c809c">SPELL_AURA_RAID_PROC_FROM_CHARGE_WITH_VALUE</a></div><div class="ttdeci">@ SPELL_AURA_RAID_PROC_FROM_CHARGE_WITH_VALUE</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00288">SpellAuraDefines.h:288</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a651bba5033934ceb87de2329c845808a"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a651bba5033934ceb87de2329c845808a">SPELL_AURA_PROC_TRIGGER_SPELL_WITH_VALUE</a></div><div class="ttdeci">@ SPELL_AURA_PROC_TRIGGER_SPELL_WITH_VALUE</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00294">SpellAuraDefines.h:294</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a97e43d4f89788b97090ee8df08682157"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a97e43d4f89788b97090ee8df08682157">SPELL_AURA_RAID_PROC_FROM_CHARGE</a></div><div class="ttdeci">@ SPELL_AURA_RAID_PROC_FROM_CHARGE</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00286">SpellAuraDefines.h:286</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799acc5994eedad39ba63e84f1279bfd5e2f"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799acc5994eedad39ba63e84f1279bfd5e2f">SPELL_AURA_PROC_TRIGGER_DAMAGE</a></div><div class="ttdeci">@ SPELL_AURA_PROC_TRIGGER_DAMAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00106">SpellAuraDefines.h:106</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a71194f9e306aa0a2f477d59f9f0a3b97"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a71194f9e306aa0a2f477d59f9f0a3b97">AuraEffect::HandleRaidProcFromChargeAuraProc</a></div><div class="ttdeci">void HandleRaidProcFromChargeAuraProc(AuraApplication *aurApp, ProcEventInfo &amp;eventInfo)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06842">SpellAuraEffects.cpp:6842</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a8457bab110c3818d1506a3b5d767a411"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a8457bab110c3818d1506a3b5d767a411">AuraEffect::HandleProcTriggerSpellWithValueAuraProc</a></div><div class="ttdeci">void HandleProcTriggerSpellWithValueAuraProc(AuraApplication *aurApp, ProcEventInfo &amp;eventInfo)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06801">SpellAuraEffects.cpp:6801</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_abf1a9e6c5d480b4a72634fd4d489c81f"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#abf1a9e6c5d480b4a72634fd4d489c81f">AuraEffect::HandleProcTriggerDamageAuraProc</a></div><div class="ttdeci">void HandleProcTriggerDamageAuraProc(AuraApplication *aurApp, ProcEventInfo &amp;eventInfo)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06822">SpellAuraEffects.cpp:6822</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_ac49e3ca52e3aece117127e6712d2069f"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#ac49e3ca52e3aece117127e6712d2069f">AuraEffect::HandleRaidProcFromChargeWithValueAuraProc</a></div><div class="ttdeci">void HandleRaidProcFromChargeWithValueAuraProc(AuraApplication *aurApp, ProcEventInfo &amp;eventInfo)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06890">SpellAuraEffects.cpp:6890</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_af9b15db701d1d804b52a425b23c1e154"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#af9b15db701d1d804b52a425b23c1e154">AuraEffect::HandleProcTriggerSpellAuraProc</a></div><div class="ttdeci">void HandleProcTriggerSpellAuraProc(AuraApplication *aurApp, ProcEventInfo &amp;eventInfo)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06784">SpellAuraEffects.cpp:6784</a></div></div>
<div class="ttc" id="aclass_aura_html_a96d2072a3b0b06f82113eb9d3e186ac1"><div class="ttname"><a href="../../d2/dde/class_aura.html#a96d2072a3b0b06f82113eb9d3e186ac1">Aura::CallScriptEffectProcHandlers</a></div><div class="ttdeci">bool CallScriptEffectProcHandlers(AuraEffect const *aurEff, AuraApplication const *aurApp, ProcEventInfo &amp;eventInfo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/_spell_auras_8cpp_source.html#l02615">SpellAuras.cpp:2615</a></div></div>
<div class="ttc" id="aclass_aura_html_a97347f8dc5f2dd96c7c45a77c13988a5"><div class="ttname"><a href="../../d2/dde/class_aura.html#a97347f8dc5f2dd96c7c45a77c13988a5">Aura::CallScriptAfterEffectProcHandlers</a></div><div class="ttdeci">void CallScriptAfterEffectProcHandlers(AuraEffect const *aurEff, AuraApplication const *aurApp, ProcEventInfo &amp;eventInfo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/_spell_auras_8cpp_source.html#l02634">SpellAuras.cpp:2634</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l02634">Aura::CallScriptAfterEffectProcHandlers()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l02615">Aura::CallScriptEffectProcHandlers()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00446">GetAuraType()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">GetBase()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06822">HandleProcTriggerDamageAuraProc()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06784">HandleProcTriggerSpellAuraProc()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06801">HandleProcTriggerSpellWithValueAuraProc()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06842">HandleRaidProcFromChargeAuraProc()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06890">HandleRaidProcFromChargeWithValueAuraProc()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00106">SPELL_AURA_PROC_TRIGGER_DAMAGE</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00105">SPELL_AURA_PROC_TRIGGER_SPELL</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00294">SPELL_AURA_PROC_TRIGGER_SPELL_WITH_VALUE</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00286">SPELL_AURA_RAID_PROC_FROM_CHARGE</a>, and <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00288">SPELL_AURA_RAID_PROC_FROM_CHARGE_WITH_VALUE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l02248">Aura::TriggerProcOnEvent()</a>.</p>

</div>
</div>
<a id="abf1a9e6c5d480b4a72634fd4d489c81f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf1a9e6c5d480b4a72634fd4d489c81f">&#9670;&nbsp;</a></span>HandleProcTriggerDamageAuraProc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleProcTriggerDamageAuraProc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/def/class_proc_event_info.html">ProcEventInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>eventInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06822">6822</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l06823"></a><span class="lineno"> 6823</span>&#160;{</div>
<div class="line"><a name="l06824"></a><span class="lineno"> 6824</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../d8/da3/class_aura_application.html#a48f6d82daf06f6f2ced98484c2b56248">GetTarget</a>();</div>
<div class="line"><a name="l06825"></a><span class="lineno"> 6825</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* triggerTarget = eventInfo.<a class="code" href="../../df/def/class_proc_event_info.html#adf5334f3349343cbc93424ed11b97e46">GetProcTarget</a>();</div>
<div class="line"><a name="l06826"></a><span class="lineno"> 6826</span>&#160;    <span class="keywordflow">if</span> (triggerTarget-&gt;<a class="code" href="../../da/db7/class_unit.html#ab78147cd520d2dac6be709b4c80a7de3">HasUnitState</a>(<a class="code" href="../../d5/d32/_unit_8h.html#ae51d2ecb71f7a5cb3882982a622c9544a7c4ae74029844364315885e02df35505">UNIT_STATE_ISOLATED</a>) || triggerTarget-&gt;<a class="code" href="../../da/db7/class_unit.html#ae7269683ec5b0e44c3ee49bd6f896615">IsImmunedToDamageOrSchool</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()))</div>
<div class="line"><a name="l06827"></a><span class="lineno"> 6827</span>&#160;    {</div>
<div class="line"><a name="l06828"></a><span class="lineno"> 6828</span>&#160;        <a class="code" href="../../da/df1/class_aura_effect.html#a94ad6938ac754595a00f0f5a8e2019c5">SendTickImmune</a>(triggerTarget, target);</div>
<div class="line"><a name="l06829"></a><span class="lineno"> 6829</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06830"></a><span class="lineno"> 6830</span>&#160;    }</div>
<div class="line"><a name="l06831"></a><span class="lineno"> 6831</span>&#160; </div>
<div class="line"><a name="l06832"></a><span class="lineno"> 6832</span>&#160;    <a class="code" href="../../d3/d15/struct_spell_non_melee_damage.html">SpellNonMeleeDamage</a> damageInfo(target, triggerTarget, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;SchoolMask);</div>
<div class="line"><a name="l06833"></a><span class="lineno"> 6833</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> damage = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a0df9b48b0adee2815e7f9299ff615d46">SpellDamageBonusDone</a>(triggerTarget, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), <a class="code" href="../../d5/d32/_unit_8h.html#aff59f402d05917ab1de0c5f6bf148ea4a9308d3cdd6446af40814a12302809f54">SPELL_DIRECT_DAMAGE</a>);</div>
<div class="line"><a name="l06834"></a><span class="lineno"> 6834</span>&#160;    damage = triggerTarget-&gt;<a class="code" href="../../da/db7/class_unit.html#a8e8d13276a1ebef454bd4fc27fedc3f1">SpellDamageBonusTaken</a>(target, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), damage, <a class="code" href="../../d5/d32/_unit_8h.html#aff59f402d05917ab1de0c5f6bf148ea4a9308d3cdd6446af40814a12302809f54">SPELL_DIRECT_DAMAGE</a>);</div>
<div class="line"><a name="l06835"></a><span class="lineno"> 6835</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#af7dee3a5dbbc2970cec0ef851b81eaf7">CalculateSpellDamageTaken</a>(&amp;damageInfo, damage, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>());</div>
<div class="line"><a name="l06836"></a><span class="lineno"> 6836</span>&#160;    <a class="code" href="../../da/db7/class_unit.html#af0c5f2f98b065f2d3976f18e4bc964a4">Unit::DealDamageMods</a>(damageInfo.target, damageInfo.damage, &amp;damageInfo.absorb);</div>
<div class="line"><a name="l06837"></a><span class="lineno"> 6837</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aaf7877cad85523173a7bcd7af163e8cb">SendSpellNonMeleeDamageLog</a>(&amp;damageInfo);</div>
<div class="line"><a name="l06838"></a><span class="lineno"> 6838</span>&#160;    <a class="code" href="../../d3/d07/src_2common_2_logging_2_log_8h.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura&quot;</span>, <span class="stringliteral">&quot;AuraEffect::HandleProcTriggerDamageAuraProc: Triggering %u spell damage from aura %u proc&quot;</span>, damage, <a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><a name="l06839"></a><span class="lineno"> 6839</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a6a55b5950949a73f0ca697bd2168b127">DealSpellDamage</a>(&amp;damageInfo, <span class="keyword">true</span>);</div>
<div class="line"><a name="l06840"></a><span class="lineno"> 6840</span>&#160;}</div>
<div class="ttc" id="aclass_proc_event_info_html_adf5334f3349343cbc93424ed11b97e46"><div class="ttname"><a href="../../df/def/class_proc_event_info.html#adf5334f3349343cbc93424ed11b97e46">ProcEventInfo::GetProcTarget</a></div><div class="ttdeci">Unit * GetProcTarget() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00996">Unit.h:996</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/d32/_unit_8h_source.html#l01048">SpellNonMeleeDamage::absorb</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01215">Unit::CalculateSpellDamageTaken()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01045">SpellNonMeleeDamage::damage</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l00763">Unit::DealDamageMods()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01346">Unit::DealSpellDamage()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">GetId()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00996">ProcEventInfo::GetProcTarget()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01519">Unit::HasUnitState()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l12143">Unit::IsImmunedToDamageOrSchool()</a>, <a class="el" href="../../d3/d07/src_2common_2_logging_2_log_8h_source.html#l00273">LOG_DEBUG</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05781">Unit::SendSpellNonMeleeDamageLog()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01081">SendTickImmune()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00595">SPELL_DIRECT_DAMAGE</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l10988">Unit::SpellDamageBonusDone()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l11131">Unit::SpellDamageBonusTaken()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01042">SpellNonMeleeDamage::target</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00497">UNIT_STATE_ISOLATED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01137">HandleProc()</a>, and <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l15426">Unit::ProcDamageAndSpellFor()</a>.</p>

</div>
</div>
<a id="af9b15db701d1d804b52a425b23c1e154"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9b15db701d1d804b52a425b23c1e154">&#9670;&nbsp;</a></span>HandleProcTriggerSpellAuraProc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleProcTriggerSpellAuraProc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/def/class_proc_event_info.html">ProcEventInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>eventInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06784">6784</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l06785"></a><span class="lineno"> 6785</span>&#160;{</div>
<div class="line"><a name="l06786"></a><span class="lineno"> 6786</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* triggerCaster = aurApp-&gt;<a class="code" href="../../d8/da3/class_aura_application.html#a48f6d82daf06f6f2ced98484c2b56248">GetTarget</a>();</div>
<div class="line"><a name="l06787"></a><span class="lineno"> 6787</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* triggerTarget = eventInfo.<a class="code" href="../../df/def/class_proc_event_info.html#adf5334f3349343cbc93424ed11b97e46">GetProcTarget</a>();</div>
<div class="line"><a name="l06788"></a><span class="lineno"> 6788</span>&#160; </div>
<div class="line"><a name="l06789"></a><span class="lineno"> 6789</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> triggerSpellId = <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].TriggerSpell;</div>
<div class="line"><a name="l06790"></a><span class="lineno"> 6790</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/d7d/class_spell_info.html">SpellInfo</a> <span class="keyword">const</span>* triggeredSpellInfo = <a class="code" href="../../d3/d75/_spell_mgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellInfo(triggerSpellId))</div>
<div class="line"><a name="l06791"></a><span class="lineno"> 6791</span>&#160;    {</div>
<div class="line"><a name="l06792"></a><span class="lineno"> 6792</span>&#160;        <a class="code" href="../../d3/d07/src_2common_2_logging_2_log_8h.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura&quot;</span>, <span class="stringliteral">&quot;AuraEffect::HandleProcTriggerSpellAuraProc: Triggering spell %u from aura %u proc&quot;</span>, triggeredSpellInfo-&gt;Id, <a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><a name="l06793"></a><span class="lineno"> 6793</span>&#160;        triggerCaster-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(triggerTarget, triggeredSpellInfo, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l06794"></a><span class="lineno"> 6794</span>&#160;    }</div>
<div class="line"><a name="l06795"></a><span class="lineno"> 6795</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l06796"></a><span class="lineno"> 6796</span>&#160;    {</div>
<div class="line"><a name="l06797"></a><span class="lineno"> 6797</span>&#160;        <a class="code" href="../../d3/d07/src_2common_2_logging_2_log_8h.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura&quot;</span>, <span class="stringliteral">&quot;AuraEffect::HandleProcTriggerSpellAuraProc: Could not trigger spell %u from aura %u proc, because the spell does not have an entry in Spell.dbc.&quot;</span>, triggerSpellId, <a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><a name="l06798"></a><span class="lineno"> 6798</span>&#160;    }</div>
<div class="line"><a name="l06799"></a><span class="lineno"> 6799</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01087">Unit::CastSpell()</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00387">SpellInfo::Effects</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00049">GetEffIndex()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">GetId()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00996">ProcEventInfo::GetProcTarget()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d3/d07/src_2common_2_logging_2_log_8h_source.html#l00273">LOG_DEBUG</a>, and <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00794">sSpellMgr</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01137">HandleProc()</a>.</p>

</div>
</div>
<a id="a8457bab110c3818d1506a3b5d767a411"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8457bab110c3818d1506a3b5d767a411">&#9670;&nbsp;</a></span>HandleProcTriggerSpellWithValueAuraProc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleProcTriggerSpellWithValueAuraProc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/def/class_proc_event_info.html">ProcEventInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>eventInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06801">6801</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l06802"></a><span class="lineno"> 6802</span>&#160;{</div>
<div class="line"><a name="l06803"></a><span class="lineno"> 6803</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* triggerCaster = aurApp-&gt;<a class="code" href="../../d8/da3/class_aura_application.html#a48f6d82daf06f6f2ced98484c2b56248">GetTarget</a>();</div>
<div class="line"><a name="l06804"></a><span class="lineno"> 6804</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* triggerTarget = eventInfo.<a class="code" href="../../df/def/class_proc_event_info.html#adf5334f3349343cbc93424ed11b97e46">GetProcTarget</a>();</div>
<div class="line"><a name="l06805"></a><span class="lineno"> 6805</span>&#160; </div>
<div class="line"><a name="l06806"></a><span class="lineno"> 6806</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> triggerSpellId = <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code" href="../../da/df1/class_aura_effect.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>].TriggerSpell;</div>
<div class="line"><a name="l06807"></a><span class="lineno"> 6807</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/d7d/class_spell_info.html">SpellInfo</a> <span class="keyword">const</span>* triggeredSpellInfo = <a class="code" href="../../d3/d75/_spell_mgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellInfo(triggerSpellId))</div>
<div class="line"><a name="l06808"></a><span class="lineno"> 6808</span>&#160;    {</div>
<div class="line"><a name="l06809"></a><span class="lineno"> 6809</span>&#160;        <span class="comment">// used only with EXTRA_LOGS</span></div>
<div class="line"><a name="l06810"></a><span class="lineno"> 6810</span>&#160;        (void)triggeredSpellInfo;</div>
<div class="line"><a name="l06811"></a><span class="lineno"> 6811</span>&#160; </div>
<div class="line"><a name="l06812"></a><span class="lineno"> 6812</span>&#160;        <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> basepoints0 = <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>();</div>
<div class="line"><a name="l06813"></a><span class="lineno"> 6813</span>&#160;        <a class="code" href="../../d3/d07/src_2common_2_logging_2_log_8h.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura&quot;</span>, <span class="stringliteral">&quot;AuraEffect::HandleProcTriggerSpellWithValueAuraProc: Triggering spell %u with value %d from aura %u proc&quot;</span>, triggeredSpellInfo-&gt;Id, basepoints0, <a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><a name="l06814"></a><span class="lineno"> 6814</span>&#160;        triggerCaster-&gt;<a class="code" href="../../da/db7/class_unit.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(triggerTarget, triggerSpellId, &amp;basepoints0, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l06815"></a><span class="lineno"> 6815</span>&#160;    }</div>
<div class="line"><a name="l06816"></a><span class="lineno"> 6816</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l06817"></a><span class="lineno"> 6817</span>&#160;    {</div>
<div class="line"><a name="l06818"></a><span class="lineno"> 6818</span>&#160;        <a class="code" href="../../d3/d07/src_2common_2_logging_2_log_8h.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura&quot;</span>, <span class="stringliteral">&quot;AuraEffect::HandleProcTriggerSpellWithValueAuraProc: Could not trigger spell %u from aura %u proc, because the spell does not have an entry in Spell.dbc.&quot;</span>, triggerSpellId, <a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><a name="l06819"></a><span class="lineno"> 6819</span>&#160;    }</div>
<div class="line"><a name="l06820"></a><span class="lineno"> 6820</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01144">Unit::CastCustomSpell()</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00387">SpellInfo::Effects</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">GetId()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00996">ProcEventInfo::GetProcTarget()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d3/d07/src_2common_2_logging_2_log_8h_source.html#l00273">LOG_DEBUG</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00137">m_effIndex</a>, and <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00794">sSpellMgr</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01137">HandleProc()</a>.</p>

</div>
</div>
<a id="a71194f9e306aa0a2f477d59f9f0a3b97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71194f9e306aa0a2f477d59f9f0a3b97">&#9670;&nbsp;</a></span>HandleRaidProcFromChargeAuraProc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleRaidProcFromChargeAuraProc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/def/class_proc_event_info.html">ProcEventInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>eventInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06842">6842</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l06843"></a><span class="lineno"> 6843</span>&#160;{</div>
<div class="line"><a name="l06844"></a><span class="lineno"> 6844</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../d8/da3/class_aura_application.html#a48f6d82daf06f6f2ced98484c2b56248">GetTarget</a>();</div>
<div class="line"><a name="l06845"></a><span class="lineno"> 6845</span>&#160; </div>
<div class="line"><a name="l06846"></a><span class="lineno"> 6846</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> triggerSpellId;</div>
<div class="line"><a name="l06847"></a><span class="lineno"> 6847</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>())</div>
<div class="line"><a name="l06848"></a><span class="lineno"> 6848</span>&#160;    {</div>
<div class="line"><a name="l06849"></a><span class="lineno"> 6849</span>&#160;        <span class="keywordflow">case</span> 57949:            <span class="comment">// Shiver</span></div>
<div class="line"><a name="l06850"></a><span class="lineno"> 6850</span>&#160;            triggerSpellId = 57952;</div>
<div class="line"><a name="l06851"></a><span class="lineno"> 6851</span>&#160;            <span class="comment">//animationSpellId = 57951; dummy effects for jump spell have unknown use (see also 41637)</span></div>
<div class="line"><a name="l06852"></a><span class="lineno"> 6852</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06853"></a><span class="lineno"> 6853</span>&#160;        <span class="keywordflow">case</span> 59978:            <span class="comment">// Shiver</span></div>
<div class="line"><a name="l06854"></a><span class="lineno"> 6854</span>&#160;            triggerSpellId = 59979;</div>
<div class="line"><a name="l06855"></a><span class="lineno"> 6855</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06856"></a><span class="lineno"> 6856</span>&#160;        <span class="keywordflow">case</span> 43593:            <span class="comment">// Cold Stare</span></div>
<div class="line"><a name="l06857"></a><span class="lineno"> 6857</span>&#160;            triggerSpellId = 43594;</div>
<div class="line"><a name="l06858"></a><span class="lineno"> 6858</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06859"></a><span class="lineno"> 6859</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l06860"></a><span class="lineno"> 6860</span>&#160;            <a class="code" href="../../d3/d07/src_2common_2_logging_2_log_8h.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura&quot;</span>, <span class="stringliteral">&quot;AuraEffect::HandleRaidProcFromChargeAuraProc: received not handled spell: %u&quot;</span>, <a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><a name="l06861"></a><span class="lineno"> 6861</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06862"></a><span class="lineno"> 6862</span>&#160;    }</div>
<div class="line"><a name="l06863"></a><span class="lineno"> 6863</span>&#160; </div>
<div class="line"><a name="l06864"></a><span class="lineno"> 6864</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> jumps = <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#ab07705be94c0c10fce558c80d7208e0b">GetCharges</a>();</div>
<div class="line"><a name="l06865"></a><span class="lineno"> 6865</span>&#160; </div>
<div class="line"><a name="l06866"></a><span class="lineno"> 6866</span>&#160;    <span class="comment">// current aura expire on proc finish</span></div>
<div class="line"><a name="l06867"></a><span class="lineno"> 6867</span>&#160;    <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#a7f7d613279717173c13708425f3a8083">SetCharges</a>(0);</div>
<div class="line"><a name="l06868"></a><span class="lineno"> 6868</span>&#160;    <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#a357ceeec6595c847d01b5ed4713ffd2f">SetUsingCharges</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l06869"></a><span class="lineno"> 6869</span>&#160; </div>
<div class="line"><a name="l06870"></a><span class="lineno"> 6870</span>&#160;    <span class="comment">// next target selection</span></div>
<div class="line"><a name="l06871"></a><span class="lineno"> 6871</span>&#160;    <span class="keywordflow">if</span> (jumps &gt; 0)</div>
<div class="line"><a name="l06872"></a><span class="lineno"> 6872</span>&#160;    {</div>
<div class="line"><a name="l06873"></a><span class="lineno"> 6873</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/db7/class_unit.html">Unit</a>* caster = <a class="code" href="../../da/df1/class_aura_effect.html#a29cf330277aeb89d17d18f6e112f035b">GetCaster</a>())</div>
<div class="line"><a name="l06874"></a><span class="lineno"> 6874</span>&#160;        {</div>
<div class="line"><a name="l06875"></a><span class="lineno"> 6875</span>&#160;            <span class="keywordtype">float</span> radius = <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].CalcRadius(caster);</div>
<div class="line"><a name="l06876"></a><span class="lineno"> 6876</span>&#160; </div>
<div class="line"><a name="l06877"></a><span class="lineno"> 6877</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../da/db7/class_unit.html">Unit</a>* triggerTarget = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a71e5b56f73156a90439d5ca7f89b780f">GetNextRandomRaidMemberOrPet</a>(radius))</div>
<div class="line"><a name="l06878"></a><span class="lineno"> 6878</span>&#160;            {</div>
<div class="line"><a name="l06879"></a><span class="lineno"> 6879</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(triggerTarget, <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>(), <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>, <a class="code" href="../../da/df1/class_aura_effect.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>());</div>
<div class="line"><a name="l06880"></a><span class="lineno"> 6880</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d2/dde/class_aura.html">Aura</a>* aura = triggerTarget-&gt;GetAura(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../da/df1/class_aura_effect.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>()))</div>
<div class="line"><a name="l06881"></a><span class="lineno"> 6881</span>&#160;                    aura-&gt;SetCharges(jumps);</div>
<div class="line"><a name="l06882"></a><span class="lineno"> 6882</span>&#160;            }</div>
<div class="line"><a name="l06883"></a><span class="lineno"> 6883</span>&#160;        }</div>
<div class="line"><a name="l06884"></a><span class="lineno"> 6884</span>&#160;    }</div>
<div class="line"><a name="l06885"></a><span class="lineno"> 6885</span>&#160; </div>
<div class="line"><a name="l06886"></a><span class="lineno"> 6886</span>&#160;    <a class="code" href="../../d3/d07/src_2common_2_logging_2_log_8h.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura&quot;</span>, <span class="stringliteral">&quot;AuraEffect::HandleRaidProcFromChargeAuraProc: Triggering spell %u from aura %u proc&quot;</span>, triggerSpellId, <a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><a name="l06887"></a><span class="lineno"> 6887</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, triggerSpellId, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>, <a class="code" href="../../da/df1/class_aura_effect.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>());</div>
<div class="line"><a name="l06888"></a><span class="lineno"> 6888</span>&#160;}</div>
<div class="ttc" id="aclass_aura_html_a357ceeec6595c847d01b5ed4713ffd2f"><div class="ttname"><a href="../../d2/dde/class_aura.html#a357ceeec6595c847d01b5ed4713ffd2f">Aura::SetUsingCharges</a></div><div class="ttdeci">void SetUsingCharges(bool val)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dcf/_spell_auras_8h_source.html#l00200">SpellAuras.h:200</a></div></div>
<div class="ttc" id="aclass_unit_html_a71e5b56f73156a90439d5ca7f89b780f"><div class="ttname"><a href="../../da/db7/class_unit.html#a71e5b56f73156a90439d5ca7f89b780f">Unit::GetNextRandomRaidMemberOrPet</a></div><div class="ttdeci">Unit * GetNextRandomRaidMemberOrPet(float radius)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l10491">Unit.cpp:10491</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01087">Unit::CastSpell()</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00387">SpellInfo::Effects</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">GetBase()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00040">GetCaster()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00041">GetCasterGUID()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00140">Aura::GetCharges()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00049">GetEffIndex()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">GetId()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l10491">Unit::GetNextRandomRaidMemberOrPet()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d3/d07/src_2common_2_logging_2_log_8h_source.html#l00273">LOG_DEBUG</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l00904">Aura::SetCharges()</a>, and <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00200">Aura::SetUsingCharges()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01137">HandleProc()</a>.</p>

</div>
</div>
<a id="ac49e3ca52e3aece117127e6712d2069f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac49e3ca52e3aece117127e6712d2069f">&#9670;&nbsp;</a></span>HandleRaidProcFromChargeWithValueAuraProc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleRaidProcFromChargeWithValueAuraProc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/def/class_proc_event_info.html">ProcEventInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>eventInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06890">6890</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l06891"></a><span class="lineno"> 6891</span>&#160;{</div>
<div class="line"><a name="l06892"></a><span class="lineno"> 6892</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../d8/da3/class_aura_application.html#a48f6d82daf06f6f2ced98484c2b56248">GetTarget</a>();</div>
<div class="line"><a name="l06893"></a><span class="lineno"> 6893</span>&#160; </div>
<div class="line"><a name="l06894"></a><span class="lineno"> 6894</span>&#160;    <span class="comment">// Currently only Prayer of Mending</span></div>
<div class="line"><a name="l06895"></a><span class="lineno"> 6895</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;SpellFamilyName == <a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba04f59ec569a753b4e47a0a230782f207">SPELLFAMILY_PRIEST</a> &amp;&amp; <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;SpellFamilyFlags[1] &amp; 0x20))</div>
<div class="line"><a name="l06896"></a><span class="lineno"> 6896</span>&#160;    {</div>
<div class="line"><a name="l06897"></a><span class="lineno"> 6897</span>&#160;        <a class="code" href="../../d3/d07/src_2common_2_logging_2_log_8h.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura&quot;</span>, <span class="stringliteral">&quot;AuraEffect::HandleRaidProcFromChargeWithValueAuraProc: received not handled spell: %u&quot;</span>, <a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><a name="l06898"></a><span class="lineno"> 6898</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06899"></a><span class="lineno"> 6899</span>&#160;    }</div>
<div class="line"><a name="l06900"></a><span class="lineno"> 6900</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> triggerSpellId = 33110;</div>
<div class="line"><a name="l06901"></a><span class="lineno"> 6901</span>&#160; </div>
<div class="line"><a name="l06902"></a><span class="lineno"> 6902</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> <a class="code" href="../../d7/d71/classvalue.html">value</a> = <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>();</div>
<div class="line"><a name="l06903"></a><span class="lineno"> 6903</span>&#160; </div>
<div class="line"><a name="l06904"></a><span class="lineno"> 6904</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> jumps = <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#ab07705be94c0c10fce558c80d7208e0b">GetCharges</a>();</div>
<div class="line"><a name="l06905"></a><span class="lineno"> 6905</span>&#160; </div>
<div class="line"><a name="l06906"></a><span class="lineno"> 6906</span>&#160;    <span class="comment">// current aura expire on proc finish</span></div>
<div class="line"><a name="l06907"></a><span class="lineno"> 6907</span>&#160;    <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#a7f7d613279717173c13708425f3a8083">SetCharges</a>(0);</div>
<div class="line"><a name="l06908"></a><span class="lineno"> 6908</span>&#160;    <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#a357ceeec6595c847d01b5ed4713ffd2f">SetUsingCharges</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l06909"></a><span class="lineno"> 6909</span>&#160; </div>
<div class="line"><a name="l06910"></a><span class="lineno"> 6910</span>&#160;    <span class="comment">// next target selection</span></div>
<div class="line"><a name="l06911"></a><span class="lineno"> 6911</span>&#160;    <span class="keywordflow">if</span> (jumps &gt; 0)</div>
<div class="line"><a name="l06912"></a><span class="lineno"> 6912</span>&#160;    {</div>
<div class="line"><a name="l06913"></a><span class="lineno"> 6913</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/db7/class_unit.html">Unit</a>* caster = <a class="code" href="../../da/df1/class_aura_effect.html#a29cf330277aeb89d17d18f6e112f035b">GetCaster</a>())</div>
<div class="line"><a name="l06914"></a><span class="lineno"> 6914</span>&#160;        {</div>
<div class="line"><a name="l06915"></a><span class="lineno"> 6915</span>&#160;            <span class="keywordtype">float</span> radius = <a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].CalcRadius(caster);</div>
<div class="line"><a name="l06916"></a><span class="lineno"> 6916</span>&#160; </div>
<div class="line"><a name="l06917"></a><span class="lineno"> 6917</span>&#160;            <a class="code" href="../../da/db7/class_unit.html">Unit</a>*                                                         triggerTarget = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06918"></a><span class="lineno"> 6918</span>&#160;            <a class="code" href="../../da/d33/class_acore_1_1_most_h_p_missing_group_in_range.html">Acore::MostHPMissingGroupInRange</a>                              u_check(target, radius, 0);</div>
<div class="line"><a name="l06919"></a><span class="lineno"> 6919</span>&#160;            <a class="code" href="../../d4/df5/struct_acore_1_1_unit_last_searcher.html">Acore::UnitLastSearcher&lt;Acore::MostHPMissingGroupInRange&gt;</a>     searcher(target, triggerTarget, u_check);</div>
<div class="line"><a name="l06920"></a><span class="lineno"> 6920</span>&#160;            <a class="code" href="../../dc/d9f/struct_cell.html#a15697efba7478b6e227b5f3c7aafc961">Cell::VisitAllObjects</a>(target, searcher, radius);</div>
<div class="line"><a name="l06921"></a><span class="lineno"> 6921</span>&#160; </div>
<div class="line"><a name="l06922"></a><span class="lineno"> 6922</span>&#160;            <span class="keywordflow">if</span> (triggerTarget)</div>
<div class="line"><a name="l06923"></a><span class="lineno"> 6923</span>&#160;            {</div>
<div class="line"><a name="l06924"></a><span class="lineno"> 6924</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(triggerTarget, <a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), &amp;<a class="code" href="../../d7/d71/classvalue.html">value</a>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>, <a class="code" href="../../da/df1/class_aura_effect.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>());</div>
<div class="line"><a name="l06925"></a><span class="lineno"> 6925</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d2/dde/class_aura.html">Aura</a>* aura = triggerTarget-&gt;<a class="code" href="../../da/db7/class_unit.html#a135e4d345c338da83450a60528f71222">GetAura</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code" href="../../da/df1/class_aura_effect.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>()))</div>
<div class="line"><a name="l06926"></a><span class="lineno"> 6926</span>&#160;                    aura-&gt;SetCharges(jumps);</div>
<div class="line"><a name="l06927"></a><span class="lineno"> 6927</span>&#160;            }</div>
<div class="line"><a name="l06928"></a><span class="lineno"> 6928</span>&#160;        }</div>
<div class="line"><a name="l06929"></a><span class="lineno"> 6929</span>&#160;    }</div>
<div class="line"><a name="l06930"></a><span class="lineno"> 6930</span>&#160; </div>
<div class="line"><a name="l06931"></a><span class="lineno"> 6931</span>&#160;    <a class="code" href="../../d3/d07/src_2common_2_logging_2_log_8h.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura&quot;</span>, <span class="stringliteral">&quot;AuraEffect::HandleRaidProcFromChargeWithValueAuraProc: Triggering spell %u from aura %u proc&quot;</span>, triggerSpellId, <a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><a name="l06932"></a><span class="lineno"> 6932</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(target, triggerSpellId, &amp;<a class="code" href="../../d7/d71/classvalue.html">value</a>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>, <a class="code" href="../../da/df1/class_aura_effect.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>());</div>
<div class="line"><a name="l06933"></a><span class="lineno"> 6933</span>&#160;}</div>
<div class="ttc" id="aclass_acore_1_1_most_h_p_missing_group_in_range_html"><div class="ttname"><a href="../../da/d33/class_acore_1_1_most_h_p_missing_group_in_range.html">Acore::MostHPMissingGroupInRange</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dc9/_grid_notifiers_8h_source.html#l01358">GridNotifiers.h:1359</a></div></div>
<div class="ttc" id="astruct_acore_1_1_unit_last_searcher_html"><div class="ttname"><a href="../../d4/df5/struct_acore_1_1_unit_last_searcher.html">Acore::UnitLastSearcher</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dc9/_grid_notifiers_8h_source.html#l00374">GridNotifiers.h:375</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01144">Unit::CastCustomSpell()</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00387">SpellInfo::Effects</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05076">Unit::GetAura()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">GetBase()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00040">GetCaster()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00041">GetCasterGUID()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00140">Aura::GetCharges()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00049">GetEffIndex()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">GetId()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../d3/d07/src_2common_2_logging_2_log_8h_source.html#l00273">LOG_DEBUG</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l00904">Aura::SetCharges()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00200">Aura::SetUsingCharges()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l03460">SPELLFAMILY_PRIEST</a>, and <a class="el" href="../../d4/d39/_cell_impl_8h_source.html#l00207">Cell::VisitAllObjects()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01137">HandleProc()</a>.</p>

</div>
</div>
<a id="a964b95da784412c60c9310227a614549"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a964b95da784412c60c9310227a614549">&#9670;&nbsp;</a></span>HandleRangedAmmoHaste()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleRangedAmmoHaste </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04617">4617</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160;{</div>
<div class="line"><a name="l04619"></a><span class="lineno"> 4619</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04620"></a><span class="lineno"> 4620</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04621"></a><span class="lineno"> 4621</span>&#160; </div>
<div class="line"><a name="l04622"></a><span class="lineno"> 4622</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04623"></a><span class="lineno"> 4623</span>&#160; </div>
<div class="line"><a name="l04624"></a><span class="lineno"> 4624</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l04625"></a><span class="lineno"> 4625</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04626"></a><span class="lineno"> 4626</span>&#160; </div>
<div class="line"><a name="l04627"></a><span class="lineno"> 4627</span>&#160;    target-&gt;<a class="code" href="../../da/db7/class_unit.html#a60d7ad5197284d3caaed380dfc740ff0">ApplyAttackTimePercentMod</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a2a35652af7129b6f139b0f7a2af1876aaa2557af152c5f2b27bbf59915cbd1670">RANGED_ATTACK</a>, (<span class="keywordtype">float</span>)<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04628"></a><span class="lineno"> 4628</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16263">Unit::ApplyAttackTimePercentMod()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00557">RANGED_ATTACK</a>, and <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>.</p>

</div>
</div>
<a id="a66eb63a01dca27eaa327c72f03710c53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66eb63a01dca27eaa327c72f03710c53">&#9670;&nbsp;</a></span>HandleShapeshiftBoosts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleShapeshiftBoosts </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01189">1189</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;{</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellId = 0;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellId2 = 0;</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <span class="comment">//uint32 spellId3 = 0;</span></div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> HotWSpellId = 0;</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160; </div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>())</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    {</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547caa28b6421a1efdc3a6377c480e1f80809">FORM_CAT</a>:</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;            spellId = 3025;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;            HotWSpellId = 24900;</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cadede345fd72f3a48598be8a70afe65ca">FORM_TREE</a>:</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;            spellId = 34123;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca3d7db874597fdd74df839cebc5513230">FORM_TRAVEL</a>:</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;            spellId = 5419;</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cac2743246d577352cdae533578e3c8c1b">FORM_AQUA</a>:</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;            spellId = 5421;</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547caff14e446078e4fbc3d35a9826ae59a75">FORM_BEAR</a>:</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;            spellId = 1178;</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;            spellId2 = 21178;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;            HotWSpellId = 24899;</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca104eb15c414a7006998ae56cf4b64f4c">FORM_DIREBEAR</a>:</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;            spellId = 9635;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;            spellId2 = 21178;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;            HotWSpellId = 24899;</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cac6f4bdb76e70e28c403bbd02bf4a969d">FORM_BATTLESTANCE</a>:</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;            spellId = 21156;</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca740528acba7c88e26c5c6970b99ed18f">FORM_DEFENSIVESTANCE</a>:</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;            spellId = 7376;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca6a2bb66552732011772c2d2ac6dc21b0">FORM_BERSERKERSTANCE</a>:</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;            spellId = 7381;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca956565a0800ab3f327d90d6a413f4482">FORM_MOONKIN</a>:</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;            spellId = 24905;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;            spellId2 = 69366;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547caa2a3be49d483fe70fcffab38a9787557">FORM_FLIGHT</a>:</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;            spellId = 33948;</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;            spellId2 = 34764;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca84efb6dc7feed91df401b04c5d4f9353">FORM_FLIGHT_EPIC</a>:</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;            spellId  = 40122;</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;            spellId2 = 40121;</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cadc094fb8dc4c8a87fffe3eac62b84ad4">FORM_METAMORPHOSIS</a>:</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;            spellId  = 54817;</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;            spellId2 = 54879;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca6580b40dee982ab6f82c1c59d34988de">FORM_SPIRITOFREDEMPTION</a>:</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;            spellId  = 27792;</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;            spellId2 = 27795;                               <span class="comment">// must be second, this important at aura remove to prevent to early iterator invalidation.</span></div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca45e034d920948e0ba5085eb103660161">FORM_SHADOW</a>:</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;            spellId = 49868;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;            spellId2 = 71167;</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cab77bbfbe52ce8a4876d6c762735cfbc9">FORM_GHOSTWOLF</a>:</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;            spellId = 67116;</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cadcc1e9eb63ae2e0530c35f95767cfa5a">FORM_GHOUL</a>:</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cac0d940f97165e877e8c3ec0fed5074c6">FORM_AMBIENT</a>:</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cac5b4b27f0234cd99d2a201732a392b85">FORM_STEALTH</a>:</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547caa1fa851e463bf75f379d7b6a668c0cff">FORM_CREATURECAT</a>:</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca42d6a809df54cb1ee4efeeeed671aece">FORM_CREATUREBEAR</a>:</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    }</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160; </div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    <a class="code" href="../../d8/d53/class_player.html">Player</a>* player = target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>();</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    {</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;        <span class="comment">// Remove cooldown of spells triggered on stance change - they may share cooldown with stance spell</span></div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;        <span class="keywordflow">if</span> (spellId)</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;        {</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;            <span class="keywordflow">if</span> (player)</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;                player-&gt;<a class="code" href="../../d8/d53/class_player.html#ad52044947ef0aa2325b2688075bac34d">RemoveSpellCooldown</a>(spellId);</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, spellId, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>, target-&gt;<a class="code" href="../../d8/d83/class_object.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>());</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;        }</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160; </div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;        <span class="keywordflow">if</span> (spellId2)</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;        {</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;            <span class="keywordflow">if</span> (player)</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;                player-&gt;<a class="code" href="../../d8/d53/class_player.html#ad52044947ef0aa2325b2688075bac34d">RemoveSpellCooldown</a>(spellId2);</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, spellId2, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>, target-&gt;<a class="code" href="../../d8/d83/class_object.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>());</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;        }</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160; </div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;        <span class="keywordflow">if</span> (player)</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;        {</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;            <span class="keyword">const</span> <a class="code" href="../../d1/d39/_player_8h.html#a6829a36dad31b0ac277fae810007c700">PlayerSpellMap</a>&amp; sp_list = player-&gt;<a class="code" href="../../d8/d53/class_player.html#a1bb68bc662edb6bc40c580fe5af98785">GetSpellMap</a>();</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;            <span class="keywordflow">for</span> (PlayerSpellMap::const_iterator itr = sp_list.begin(); itr != sp_list.end(); ++itr)</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;            {</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;                <span class="keywordflow">if</span> (itr-&gt;second-&gt;State == <a class="code" href="../../d1/d39/_player_8h.html#aeba4f8d5fc0fa3fd00538df69077ba55a1a8411f74fdb6a5715ed8cfca6b96a50">PLAYERSPELL_REMOVED</a> || !itr-&gt;second-&gt;IsInSpec(player-&gt;<a class="code" href="../../d8/d53/class_player.html#aadce3b13b7dcab72e227e1b404ab87ab">GetActiveSpec</a>()))</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160; </div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;                <span class="keywordflow">if</span> (itr-&gt;first == spellId || itr-&gt;first == spellId2)</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160; </div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;                <a class="code" href="../../d4/d7d/class_spell_info.html">SpellInfo</a> <span class="keyword">const</span>* spellInfo = <a class="code" href="../../d3/d75/_spell_mgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellInfo(itr-&gt;first);</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;                <span class="keywordflow">if</span> (!spellInfo || !spellInfo-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a9dcd0ba8d94905ba214797c12e7c44ad">SpellAttr0</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a9dcd0ba8d94905ba214797c12e7c44ada407e023ed336f3c64aa20f11dd49f6bd">SPELL_ATTR0_PASSIVE</a> | <a class="code" href="../../df/d0b/_shared_defines_8h.html#a9dcd0ba8d94905ba214797c12e7c44ada9d53bd915f5409506cb045a0688a0a75">SPELL_ATTR0_DO_NOT_DISPLAY</a>)))</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160; </div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;                <span class="keywordflow">if</span> (spellInfo-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a21cf48a7eb77db7f731ebe746d2d6878">Stances</a> &amp; (1 &lt;&lt; (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() - 1)))</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, itr-&gt;first, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>, target-&gt;<a class="code" href="../../d8/d83/class_object.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>());</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;            }</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160; </div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;            <span class="comment">// xinef: talent stance auras are not on m_spells map, so iterate talents</span></div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;            <span class="keyword">const</span> <a class="code" href="../../d1/d39/_player_8h.html#a58b30b88955cb12b1f6441e41eed03b5">PlayerTalentMap</a>&amp; tl_list = player-&gt;<a class="code" href="../../d8/d53/class_player.html#a09de94c3f29084501439493983ac190a">GetTalentMap</a>();</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;            <span class="keywordflow">for</span> (PlayerTalentMap::const_iterator itr = tl_list.begin(); itr != tl_list.end(); ++itr)</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;            {</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;                <span class="keywordflow">if</span> (itr-&gt;second-&gt;State == <a class="code" href="../../d1/d39/_player_8h.html#aeba4f8d5fc0fa3fd00538df69077ba55a1a8411f74fdb6a5715ed8cfca6b96a50">PLAYERSPELL_REMOVED</a> || !itr-&gt;second-&gt;IsInSpec(player-&gt;<a class="code" href="../../d8/d53/class_player.html#aadce3b13b7dcab72e227e1b404ab87ab">GetActiveSpec</a>()))</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160; </div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;                <span class="keywordflow">if</span> (itr-&gt;first == spellId || itr-&gt;first == spellId2)</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160; </div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;                <span class="comment">// Xinef: skip talents with effect learn spell</span></div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;                <a class="code" href="../../d4/d7d/class_spell_info.html">SpellInfo</a> <span class="keyword">const</span>* spellInfo = <a class="code" href="../../d3/d75/_spell_mgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellInfo(itr-&gt;first);</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;                <span class="keywordflow">if</span> (!spellInfo || !spellInfo-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a9dcd0ba8d94905ba214797c12e7c44ad">SpellAttr0</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a9dcd0ba8d94905ba214797c12e7c44ada407e023ed336f3c64aa20f11dd49f6bd">SPELL_ATTR0_PASSIVE</a> | <a class="code" href="../../df/d0b/_shared_defines_8h.html#a9dcd0ba8d94905ba214797c12e7c44ada9d53bd915f5409506cb045a0688a0a75">SPELL_ATTR0_DO_NOT_DISPLAY</a>)) || spellInfo-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#ad66dd61ba67ee1626e7e8393f0c27498">HasEffect</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a292c893150c454dd75628b719db1fe97acef490c9f3480852d33dbbec7727fa7f">SPELL_EFFECT_LEARN_SPELL</a>))</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160; </div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;                <span class="keywordflow">if</span> (spellInfo-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a21cf48a7eb77db7f731ebe746d2d6878">Stances</a> &amp; (1 &lt;&lt; (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() - 1)))</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, itr-&gt;first, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>, target-&gt;<a class="code" href="../../d8/d83/class_object.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>());</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;            }</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160; </div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;            <span class="comment">// Also do it for Glyphs</span></div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> i = 0; i &lt; <a class="code" href="../../df/d0b/_shared_defines_8h.html#a81bad32063c8fa96f892b95fbcb156ca">MAX_GLYPH_SLOT_INDEX</a>; ++i)</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;            {</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> glyphId = player-&gt;<a class="code" href="../../d8/d53/class_player.html#a4b55b85a0c0a94c13e155c7031388757">GetGlyph</a>(i))</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;                {</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../d4/dcb/struct_glyph_properties_entry.html">GlyphPropertiesEntry</a> <span class="keyword">const</span>* glyph = <a class="code" href="../../dd/d17/_d_b_c_stores_8cpp.html#af61cd8fbbd2bde6fd6763ce7301e728e">sGlyphPropertiesStore</a>.LookupEntry(glyphId))</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;                    {</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;                        <a class="code" href="../../d4/d7d/class_spell_info.html">SpellInfo</a> <span class="keyword">const</span>* spellInfo = <a class="code" href="../../d3/d75/_spell_mgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellInfo(glyph-&gt;SpellId);</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;                        <span class="keywordflow">if</span> (!spellInfo || !spellInfo-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a9dcd0ba8d94905ba214797c12e7c44ad">SpellAttr0</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a9dcd0ba8d94905ba214797c12e7c44ada407e023ed336f3c64aa20f11dd49f6bd">SPELL_ATTR0_PASSIVE</a> | <a class="code" href="../../df/d0b/_shared_defines_8h.html#a9dcd0ba8d94905ba214797c12e7c44ada9d53bd915f5409506cb045a0688a0a75">SPELL_ATTR0_DO_NOT_DISPLAY</a>)))</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;                            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;                        <span class="keywordflow">if</span> (spellInfo-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a21cf48a7eb77db7f731ebe746d2d6878">Stances</a> &amp; (1 &lt;&lt; (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() - 1)))</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;                            target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, glyph-&gt;SpellId, <a class="code" href="../../d5/d32/_unit_8h.html#a9f3c49d8db7e142b86eba36bc8951967">TriggerCastFlags</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a9f3c49d8db7e142b86eba36bc8951967a10578b171eb74dc9851866cc6eb53f3a">TRIGGERED_FULL_MASK</a> &amp; ~(<a class="code" href="../../d5/d32/_unit_8h.html#a9f3c49d8db7e142b86eba36bc8951967a5e96b0ff258ff2655647102a361a7300">TRIGGERED_IGNORE_SHAPESHIFT</a> | <a class="code" href="../../d5/d32/_unit_8h.html#a9f3c49d8db7e142b86eba36bc8951967a3ab7cedf4f334dafece5849da2e0a4d1">TRIGGERED_IGNORE_CASTER_AURASTATE</a>)), <span class="keyword">nullptr</span>, <span class="keyword">this</span>, target-&gt;<a class="code" href="../../d8/d83/class_object.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>());</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;                    }</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;                }</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;            }</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160; </div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;            <span class="comment">// Leader of the Pack</span></div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;            <span class="keywordflow">if</span> (player-&gt;<a class="code" href="../../d8/d53/class_player.html#a681d507744410840b99ecf2ee14dfc72">HasTalent</a>(17007, player-&gt;<a class="code" href="../../d8/d53/class_player.html#aadce3b13b7dcab72e227e1b404ab87ab">GetActiveSpec</a>()))</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;            {</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;                <a class="code" href="../../d4/d7d/class_spell_info.html">SpellInfo</a> <span class="keyword">const</span>* spellInfo = <a class="code" href="../../d3/d75/_spell_mgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellInfo(24932);</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;                <span class="keywordflow">if</span> (spellInfo &amp;&amp; spellInfo-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a21cf48a7eb77db7f731ebe746d2d6878">Stances</a> &amp; (1 &lt;&lt; (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() - 1)))</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 24932, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>, target-&gt;<a class="code" href="../../d8/d83/class_object.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>());</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;            }</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;            <span class="comment">// Improved Barkskin - apply/remove armor bonus due to shapeshift</span></div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;            <span class="keywordflow">if</span> (player-&gt;<a class="code" href="../../d8/d53/class_player.html#a681d507744410840b99ecf2ee14dfc72">HasTalent</a>(63410, player-&gt;<a class="code" href="../../d8/d53/class_player.html#aadce3b13b7dcab72e227e1b404ab87ab">GetActiveSpec</a>()) || player-&gt;<a class="code" href="../../d8/d53/class_player.html#a681d507744410840b99ecf2ee14dfc72">HasTalent</a>(63411, player-&gt;<a class="code" href="../../d8/d53/class_player.html#aadce3b13b7dcab72e227e1b404ab87ab">GetActiveSpec</a>()))</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;            {</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(66530);</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca3d7db874597fdd74df839cebc5513230">FORM_TRAVEL</a> || <a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547caa094ef89cc14332f71872d1864ec2543">FORM_NONE</a>) <span class="comment">// &quot;while in Travel Form or while not shapeshifted&quot;</span></div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;                    target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 66530, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;            }</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;            <span class="comment">// Heart of the Wild</span></div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;            <span class="keywordflow">if</span> (HotWSpellId)</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;            {</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;                <span class="comment">// hacky, but the only way as spell family is not SPELLFAMILY_DRUID</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;                <a class="code" href="../../da/db7/class_unit.html#adcdd87d0c137619dfc869536c1315dd7">Unit::AuraEffectList</a> <span class="keyword">const</span>&amp; mModTotalStatPct = target-&gt;<a class="code" href="../../da/db7/class_unit.html#af00ac6c4dc7e639ac646fdafef336e85">GetAuraEffectsByType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a072316fcb58b6c8c67119d4682ab4b3c">SPELL_AURA_MOD_TOTAL_STAT_PERCENTAGE</a>);</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;                <span class="keywordflow">for</span> (Unit::AuraEffectList::const_iterator i = mModTotalStatPct.begin(); i != mModTotalStatPct.end(); ++i)</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;                {</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;                    <span class="comment">// Heart of the Wild</span></div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;                    <span class="keywordflow">if</span> ((*i)-&gt;GetSpellInfo()-&gt;SpellIconID == 240 &amp;&amp; (*i)-&gt;GetMiscValue() == <a class="code" href="../../df/d0b/_shared_defines_8h.html#ad28c24e82986133459dee232a5360bc4a18f70ee14d68f9a30bdc3b4022473db7">STAT_INTELLECT</a>)</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;                    {</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;                        <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> HotWMod = (*i)-&gt;GetAmount() / 2; <span class="comment">// For each 2% Intelligence, you get 1% stamina and 1% attack power.</span></div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160; </div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;                        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(target, HotWSpellId, &amp;HotWMod, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>, target-&gt;<a class="code" href="../../d8/d83/class_object.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>());</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;                    }</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;                }</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;            }</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;            <span class="keywordflow">switch</span> (<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>())</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;            {</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547caa28b6421a1efdc3a6377c480e1f80809">FORM_CAT</a>:</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;                    <span class="comment">// Savage Roar</span></div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;                    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a520e229dc1a93ea4a53d0ba81e586d11">GetAuraEffect</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a66cca11731d68512cb0bb652cb1e7caf">SPELL_AURA_DUMMY</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1bac3788ce010075b8bd4e6083638d8cd40">SPELLFAMILY_DRUID</a>, 0, 0x10000000, 0))</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;                        target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 62071, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;                    <span class="comment">// Nurturing Instinct</span></div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html">AuraEffect</a> <span class="keyword">const</span>* aurEff = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a520e229dc1a93ea4a53d0ba81e586d11">GetAuraEffect</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a7e920736925cc01608542567a3d2107e">SPELL_AURA_MOD_SPELL_HEALING_OF_STAT_PERCENT</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1bac3788ce010075b8bd4e6083638d8cd40">SPELLFAMILY_DRUID</a>, 2254, 0))</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;                    {</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;                        <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellId3 = 0;</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;                        <span class="keywordflow">switch</span> (aurEff-&gt;GetId())</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;                        {</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;                            <span class="keywordflow">case</span> 33872:</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;                                spellId3 = 47179;</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;                            <span class="keywordflow">case</span> 33873:</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;                                spellId3 = 47180;</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;                        }</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;                        target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, spellId3, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>, target-&gt;<a class="code" href="../../d8/d83/class_object.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>());</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;                    }</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;                    <span class="comment">// Master Shapeshifter - Cat</span></div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html">AuraEffect</a> <span class="keyword">const</span>* aurEff = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a8ef92f1d3a61f9fb2c8c24323d5d24af">GetDummyAuraEffect</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0ebbb6206eb92cdc484b416eb6f41743">SPELLFAMILY_GENERIC</a>, 2851, 0))</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;                    {</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;                        <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> bp = aurEff-&gt;GetAmount();</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;                        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(target, 48420, &amp;bp, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;                    }</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca104eb15c414a7006998ae56cf4b64f4c">FORM_DIREBEAR</a>:</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547caff14e446078e4fbc3d35a9826ae59a75">FORM_BEAR</a>:</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;                    <span class="comment">// Master Shapeshifter - Bear</span></div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html">AuraEffect</a> <span class="keyword">const</span>* aurEff = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a8ef92f1d3a61f9fb2c8c24323d5d24af">GetDummyAuraEffect</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0ebbb6206eb92cdc484b416eb6f41743">SPELLFAMILY_GENERIC</a>, 2851, 0))</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;                    {</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;                        <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> bp = aurEff-&gt;GetAmount();</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;                        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(target, 48418, &amp;bp, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;                    }</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;                    <span class="comment">// Survival of the Fittest</span></div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html">AuraEffect</a> <span class="keyword">const</span>* aurEff = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a520e229dc1a93ea4a53d0ba81e586d11">GetAuraEffect</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a072316fcb58b6c8c67119d4682ab4b3c">SPELL_AURA_MOD_TOTAL_STAT_PERCENTAGE</a>, <a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1bac3788ce010075b8bd4e6083638d8cd40">SPELLFAMILY_DRUID</a>, 961, 0))</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;                    {</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;                        <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> bp = aurEff-&gt;GetSpellInfo()-&gt;Effects[<a class="code" href="../../df/d0b/_shared_defines_8h.html#a0b4a3c2c7210e88f82b3dc3abb6e6f77af927c15d111e2212aaf1f8488ce751c1">EFFECT_2</a>].CalcValue();</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;                        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(target, 62069, &amp;bp, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>, 0, <span class="keyword">this</span>, target-&gt;<a class="code" href="../../d8/d83/class_object.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>());</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;                    }</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547ca956565a0800ab3f327d90d6a413f4482">FORM_MOONKIN</a>:</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;                    <span class="comment">// Master Shapeshifter - Moonkin</span></div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html">AuraEffect</a> <span class="keyword">const</span>* aurEff = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a8ef92f1d3a61f9fb2c8c24323d5d24af">GetDummyAuraEffect</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0ebbb6206eb92cdc484b416eb6f41743">SPELLFAMILY_GENERIC</a>, 2851, 0))</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;                    {</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;                        <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> bp = aurEff-&gt;GetAmount();</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;                        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(target, 48421, &amp;bp, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;                    }</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;                <span class="comment">// Master Shapeshifter - Tree of Life</span></div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="../../d5/d32/_unit_8h.html#ab1b67dd15f243c850f589f66747e547cadede345fd72f3a48598be8a70afe65ca">FORM_TREE</a>:</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html">AuraEffect</a> <span class="keyword">const</span>* aurEff = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a8ef92f1d3a61f9fb2c8c24323d5d24af">GetDummyAuraEffect</a>(<a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0ebbb6206eb92cdc484b416eb6f41743">SPELLFAMILY_GENERIC</a>, 2851, 0))</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;                    {</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;                        <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> bp = aurEff-&gt;GetAmount();</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;                        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(target, 48422, &amp;bp, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;                    }</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;            }</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;        }</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    }</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    {</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;        <span class="keywordflow">if</span> (spellId)</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a07e3ea0e73b3ac9987aedd33c99873c9">RemoveOwnedAura</a>(spellId);</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;        <span class="keywordflow">if</span> (spellId2)</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#a07e3ea0e73b3ac9987aedd33c99873c9">RemoveOwnedAura</a>(spellId2);</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160; </div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;        <span class="comment">// Improved Barkskin - apply/remove armor bonus due to shapeshift</span></div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;        <span class="keywordflow">if</span> (player)</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;        {</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;            <span class="keywordflow">if</span> (player-&gt;<a class="code" href="../../d8/d53/class_player.html#a681d507744410840b99ecf2ee14dfc72">HasTalent</a>(63410, player-&gt;<a class="code" href="../../d8/d53/class_player.html#aadce3b13b7dcab72e227e1b404ab87ab">GetActiveSpec</a>()) || player-&gt;<a class="code" href="../../d8/d53/class_player.html#a681d507744410840b99ecf2ee14dfc72">HasTalent</a>(63411, player-&gt;<a class="code" href="../../d8/d53/class_player.html#aadce3b13b7dcab72e227e1b404ab87ab">GetActiveSpec</a>()))</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;            {</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(66530);</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 66530, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;            }</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;        }</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160; </div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../da/db7/class_unit.html#adcdd87d0c137619dfc869536c1315dd7">Unit::AuraEffectList</a>&amp; shapeshifts = target-&gt;<a class="code" href="../../da/db7/class_unit.html#af00ac6c4dc7e639ac646fdafef336e85">GetAuraEffectsByType</a>(<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a1c3516bb8442ba5d970c928ffc976689">SPELL_AURA_MOD_SHAPESHIFT</a>);</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;        <a class="code" href="../../da/df1/class_aura_effect.html">AuraEffect</a>* newAura = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;        <span class="comment">// Iterate through all the shapeshift auras that the target has, if there is another aura with SPELL_AURA_MOD_SHAPESHIFT, then this aura is being removed due to that one being applied</span></div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;        <span class="keywordflow">for</span> (Unit::AuraEffectList::const_iterator itr = shapeshifts.begin(); itr != shapeshifts.end(); ++itr)</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;        {</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;            <span class="keywordflow">if</span> ((*itr) != <span class="keyword">this</span>)</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;            {</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;                newAura = *itr;</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;            }</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;        }</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160; </div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;        <span class="comment">// Use the new aura to see on what stance the target will be</span></div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;        <a class="code" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> newStance = (1 &lt;&lt; ((newAura ? newAura-&gt;<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() : 0) - 1));</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160; </div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;        <a class="code" href="../../da/db7/class_unit.html#a32f102f941cf4a53fe17e7f7e957150a">Unit::AuraApplicationMap</a>&amp; tAuras = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a60981060c43937360baec0ea09df4ff9">GetAppliedAuras</a>();</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;        <span class="keywordflow">for</span> (Unit::AuraApplicationMap::iterator itr = tAuras.begin(); itr != tAuras.end();)</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;        {</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;            <span class="comment">// If the stances are not compatible with the spell, remove it</span></div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;            <span class="comment">// Xinef: Remove all passive auras, they will be added if needed</span></div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;            <span class="keywordflow">if</span> (itr-&gt;second-&gt;GetBase()-&gt;IsRemovedOnShapeLost(target) &amp;&amp; (!(itr-&gt;second-&gt;GetBase()-&gt;GetSpellInfo()-&gt;Stances &amp; newStance) || itr-&gt;second-&gt;GetBase()-&gt;IsPassive()))</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;                target-&gt;<a class="code" href="../../da/db7/class_unit.html#a1be09c524dfdd2c3538f2ae977c58399">RemoveAura</a>(itr);</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;                ++itr;</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;        }</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160; </div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;        <span class="comment">// Xinef: Remove autoattack spells</span></div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d0d/class_spell.html">Spell</a>* spell = target-&gt;<a class="code" href="../../da/db7/class_unit.html#a6a942f7bfc8e8ea98ab52a0172970a35">GetCurrentSpell</a>(<a class="code" href="../../d5/d32/_unit_8h.html#ab791040bd6d685b1fd2cfd12c96d0a1fabf840fee2a2e133105c6a92a7b43a272">CURRENT_MELEE_SPELL</a>))</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;            <span class="keywordflow">if</span> (spell-&gt;GetSpellInfo()-&gt;CheckShapeshift(newAura ? newAura-&gt;<a class="code" href="../../da/df1/class_aura_effect.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() : 0) != <a class="code" href="../../df/d0b/_shared_defines_8h.html#ade9b4e913a84079f5311c2817e3de9daadb56426fd2113c3ff3ff3d1815d79fa6">SPELL_CAST_OK</a>)</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;                spell-&gt;cancel(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;    }</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;}</div>
<div class="ttc" id="a_d_b_c_stores_8cpp_html_af61cd8fbbd2bde6fd6763ce7301e728e"><div class="ttname"><a href="../../dd/d17/_d_b_c_stores_8cpp.html#af61cd8fbbd2bde6fd6763ce7301e728e">sGlyphPropertiesStore</a></div><div class="ttdeci">DBCStorage&lt; GlyphPropertiesEntry &gt; sGlyphPropertiesStore(GlyphPropertiesfmt)</div></div>
<div class="ttc" id="a_shared_defines_8h_html_a0b4a3c2c7210e88f82b3dc3abb6e6f77af927c15d111e2212aaf1f8488ce751c1"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a0b4a3c2c7210e88f82b3dc3abb6e6f77af927c15d111e2212aaf1f8488ce751c1">EFFECT_2</a></div><div class="ttdeci">@ EFFECT_2</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00032">SharedDefines.h:32</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a292c893150c454dd75628b719db1fe97acef490c9f3480852d33dbbec7727fa7f"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a292c893150c454dd75628b719db1fe97acef490c9f3480852d33dbbec7727fa7f">SPELL_EFFECT_LEARN_SPELL</a></div><div class="ttdeci">@ SPELL_EFFECT_LEARN_SPELL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00786">SharedDefines.h:786</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a81bad32063c8fa96f892b95fbcb156ca"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a81bad32063c8fa96f892b95fbcb156ca">MAX_GLYPH_SLOT_INDEX</a></div><div class="ttdeci">#define MAX_GLYPH_SLOT_INDEX</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00648">SharedDefines.h:648</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a9dcd0ba8d94905ba214797c12e7c44ad"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a9dcd0ba8d94905ba214797c12e7c44ad">SpellAttr0</a></div><div class="ttdeci">SpellAttr0</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00352">SharedDefines.h:353</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a9dcd0ba8d94905ba214797c12e7c44ada407e023ed336f3c64aa20f11dd49f6bd"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a9dcd0ba8d94905ba214797c12e7c44ada407e023ed336f3c64aa20f11dd49f6bd">SPELL_ATTR0_PASSIVE</a></div><div class="ttdeci">@ SPELL_ATTR0_PASSIVE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00360">SharedDefines.h:360</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_a9dcd0ba8d94905ba214797c12e7c44ada9d53bd915f5409506cb045a0688a0a75"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#a9dcd0ba8d94905ba214797c12e7c44ada9d53bd915f5409506cb045a0688a0a75">SPELL_ATTR0_DO_NOT_DISPLAY</a></div><div class="ttdeci">@ SPELL_ATTR0_DO_NOT_DISPLAY</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00361">SharedDefines.h:361</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_ad28c24e82986133459dee232a5360bc4a18f70ee14d68f9a30bdc3b4022473db7"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#ad28c24e82986133459dee232a5360bc4a18f70ee14d68f9a30bdc3b4022473db7">STAT_INTELLECT</a></div><div class="ttdeci">@ STAT_INTELLECT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l00233">SharedDefines.h:233</a></div></div>
<div class="ttc" id="a_shared_defines_8h_html_ade9b4e913a84079f5311c2817e3de9daadb56426fd2113c3ff3ff3d1815d79fa6"><div class="ttname"><a href="../../df/d0b/_shared_defines_8h.html#ade9b4e913a84079f5311c2817e3de9daadb56426fd2113c3ff3ff3d1815d79fa6">SPELL_CAST_OK</a></div><div class="ttdeci">@ SPELL_CAST_OK</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0b/_shared_defines_8h_source.html#l01111">SharedDefines.h:1110</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a072316fcb58b6c8c67119d4682ab4b3c"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a072316fcb58b6c8c67119d4682ab4b3c">SPELL_AURA_MOD_TOTAL_STAT_PERCENTAGE</a></div><div class="ttdeci">@ SPELL_AURA_MOD_TOTAL_STAT_PERCENTAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00200">SpellAuraDefines.h:200</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a66cca11731d68512cb0bb652cb1e7caf"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a66cca11731d68512cb0bb652cb1e7caf">SPELL_AURA_DUMMY</a></div><div class="ttdeci">@ SPELL_AURA_DUMMY</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00067">SpellAuraDefines.h:67</a></div></div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a7e920736925cc01608542567a3d2107e"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a7e920736925cc01608542567a3d2107e">SPELL_AURA_MOD_SPELL_HEALING_OF_STAT_PERCENT</a></div><div class="ttdeci">@ SPELL_AURA_MOD_SPELL_HEALING_OF_STAT_PERCENT</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00238">SpellAuraDefines.h:238</a></div></div>
<div class="ttc" id="a_unit_8h_html_a9f3c49d8db7e142b86eba36bc8951967a3ab7cedf4f334dafece5849da2e0a4d1"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a9f3c49d8db7e142b86eba36bc8951967a3ab7cedf4f334dafece5849da2e0a4d1">TRIGGERED_IGNORE_CASTER_AURASTATE</a></div><div class="ttdeci">@ TRIGGERED_IGNORE_CASTER_AURASTATE</div><div class="ttdoc">Will ignore shapeshift checks.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00408">Unit.h:408</a></div></div>
<div class="ttc" id="a_unit_8h_html_a9f3c49d8db7e142b86eba36bc8951967a5e96b0ff258ff2655647102a361a7300"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a9f3c49d8db7e142b86eba36bc8951967a5e96b0ff258ff2655647102a361a7300">TRIGGERED_IGNORE_SHAPESHIFT</a></div><div class="ttdeci">@ TRIGGERED_IGNORE_SHAPESHIFT</div><div class="ttdoc">Will not adjust facing to target (if any)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00407">Unit.h:407</a></div></div>
<div class="ttc" id="aclass_player_html_a4b55b85a0c0a94c13e155c7031388757"><div class="ttname"><a href="../../d8/d53/class_player.html#a4b55b85a0c0a94c13e155c7031388757">Player::GetGlyph</a></div><div class="ttdeci">uint32 GetGlyph(uint8 slot) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l01699">Player.h:1699</a></div></div>
<div class="ttc" id="aclass_player_html_a681d507744410840b99ecf2ee14dfc72"><div class="ttname"><a href="../../d8/d53/class_player.html#a681d507744410840b99ecf2ee14dfc72">Player::HasTalent</a></div><div class="ttdeci">bool HasTalent(uint32 spell_id, uint8 spec) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/_player_8cpp_source.html#l03776">Player.cpp:3776</a></div></div>
<div class="ttc" id="aclass_player_html_ad52044947ef0aa2325b2688075bac34d"><div class="ttname"><a href="../../d8/d53/class_player.html#ad52044947ef0aa2325b2688075bac34d">Player::RemoveSpellCooldown</a></div><div class="ttdeci">void RemoveSpellCooldown(uint32 spell_id, bool update=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/_player_8cpp_source.html#l03414">Player.cpp:3414</a></div></div>
<div class="ttc" id="aclass_spell_info_html_a21cf48a7eb77db7f731ebe746d2d6878"><div class="ttname"><a href="../../d4/d7d/class_spell_info.html#a21cf48a7eb77db7f731ebe746d2d6878">SpellInfo::Stances</a></div><div class="ttdeci">uint32 Stances</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d70/_spell_info_8h_source.html#l00328">SpellInfo.h:328</a></div></div>
<div class="ttc" id="aclass_spell_info_html_ad66dd61ba67ee1626e7e8393f0c27498"><div class="ttname"><a href="../../d4/d7d/class_spell_info.html#ad66dd61ba67ee1626e7e8393f0c27498">SpellInfo::HasEffect</a></div><div class="ttdeci">bool HasEffect(SpellEffects effect) const</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7f/_spell_info_8cpp_source.html#l00868">SpellInfo.cpp:868</a></div></div>
<div class="ttc" id="aclass_unit_html_a07e3ea0e73b3ac9987aedd33c99873c9"><div class="ttname"><a href="../../da/db7/class_unit.html#a07e3ea0e73b3ac9987aedd33c99873c9">Unit::RemoveOwnedAura</a></div><div class="ttdeci">void RemoveOwnedAura(AuraMap::iterator &amp;i, AuraRemoveMode removeMode=AURA_REMOVE_BY_DEFAULT)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l04222">Unit.cpp:4222</a></div></div>
<div class="ttc" id="astruct_glyph_properties_entry_html"><div class="ttname"><a href="../../d4/dcb/struct_glyph_properties_entry.html">GlyphPropertiesEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/_d_b_c_structure_8h_source.html#l00974">DBCStructure.h:975</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01144">Unit::CastCustomSpell()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01087">Unit::CastSpell()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01106">CURRENT_MELEE_SPELL</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00032">EFFECT_2</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00205">FORM_AMBIENT</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00203">FORM_AQUA</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00216">FORM_BATTLESTANCE</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00204">FORM_BEAR</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00218">FORM_BERSERKERSTANCE</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00200">FORM_CAT</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00213">FORM_CREATUREBEAR</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00214">FORM_CREATURECAT</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00217">FORM_DEFENSIVESTANCE</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00207">FORM_DIREBEAR</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00226">FORM_FLIGHT</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00224">FORM_FLIGHT_EPIC</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00215">FORM_GHOSTWOLF</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00206">FORM_GHOUL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00221">FORM_METAMORPHOSIS</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00228">FORM_MOONKIN</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00199">FORM_NONE</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00225">FORM_SHADOW</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00229">FORM_SPIRITOFREDEMPTION</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00227">FORM_STEALTH</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00202">FORM_TRAVEL</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00201">FORM_TREE</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l01673">Player::GetActiveSpec()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02004">Unit::GetAppliedAuras()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04989">Unit::GetAuraEffect()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02047">Unit::GetAuraEffectsByType()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02143">Unit::GetCurrentSpell()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l02056">Unit::GetDummyAuraEffect()</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l01699">Player::GetGlyph()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00098">Object::GetGUID()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l01705">Player::GetSpellMap()</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l02566">Player::GetTalentMap()</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00408">SpellInfo::HasAttribute()</a>, <a class="el" href="../../da/d7f/_spell_info_8cpp_source.html#l00868">SpellInfo::HasEffect()</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l03776">Player::HasTalent()</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00648">MAX_GLYPH_SLOT_INDEX</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l00117">PLAYERSPELL_REMOVED</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04293">Unit::RemoveAura()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04420">Unit::RemoveAurasDueToSpell()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04222">Unit::RemoveOwnedAura()</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l03414">Player::RemoveSpellCooldown()</a>, <a class="el" href="../../dd/d17/_d_b_c_stores_8cpp.html#af61cd8fbbd2bde6fd6763ce7301e728e">sGlyphPropertiesStore</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00361">SPELL_ATTR0_DO_NOT_DISPLAY</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00360">SPELL_ATTR0_PASSIVE</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00067">SPELL_AURA_DUMMY</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00099">SPELL_AURA_MOD_SHAPESHIFT</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00238">SPELL_AURA_MOD_SPELL_HEALING_OF_STAT_PERCENT</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00200">SPELL_AURA_MOD_TOTAL_STAT_PERCENTAGE</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l01110">SPELL_CAST_OK</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00786">SPELL_EFFECT_LEARN_SPELL</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l03461">SPELLFAMILY_DRUID</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l03454">SPELLFAMILY_GENERIC</a>, <a class="el" href="../../d3/d75/_spell_mgr_8h_source.html#l00794">sSpellMgr</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00328">SpellInfo::Stances</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l00233">STAT_INTELLECT</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00413">TRIGGERED_FULL_MASK</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00408">TRIGGERED_IGNORE_CASTER_AURASTATE</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00407">TRIGGERED_IGNORE_SHAPESHIFT</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01828">HandleAuraModShapeshift()</a>.</p>

</div>
</div>
<a id="ac3cf8ea3adbe4a9b6756c1759d515528"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3cf8ea3adbe4a9b6756c1759d515528">&#9670;&nbsp;</a></span>HandleShieldBlockValue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleShieldBlockValue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04877">4877</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04878"></a><span class="lineno"> 4878</span>&#160;{</div>
<div class="line"><a name="l04879"></a><span class="lineno"> 4879</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><a name="l04880"></a><span class="lineno"> 4880</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04881"></a><span class="lineno"> 4881</span>&#160; </div>
<div class="line"><a name="l04882"></a><span class="lineno"> 4882</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l04883"></a><span class="lineno"> 4883</span>&#160; </div>
<div class="line"><a name="l04884"></a><span class="lineno"> 4884</span>&#160;    <a class="code" href="../../d5/d32/_unit_8h.html#a114d5261840f2cea1ebee7abcad43e10">BaseModType</a> modType = <a class="code" href="../../d5/d32/_unit_8h.html#a114d5261840f2cea1ebee7abcad43e10a13f6d70c134b3744ab0581ab8df32177">FLAT_MOD</a>;</div>
<div class="line"><a name="l04885"></a><span class="lineno"> 4885</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>() == <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a580ae19464afb0d72ab7d3414e14796b">SPELL_AURA_MOD_SHIELD_BLOCKVALUE_PCT</a>)</div>
<div class="line"><a name="l04886"></a><span class="lineno"> 4886</span>&#160;        modType = <a class="code" href="../../d5/d32/_unit_8h.html#a114d5261840f2cea1ebee7abcad43e10ad445af08f58d13cde94091cab97f7deb">PCT_MOD</a>;</div>
<div class="line"><a name="l04887"></a><span class="lineno"> 4887</span>&#160; </div>
<div class="line"><a name="l04888"></a><span class="lineno"> 4888</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l04889"></a><span class="lineno"> 4889</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#af85e4f061186ef03c3561aaf1a99a72d">HandleBaseModValue</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a938646605f1e70b8f1613bf9bdb78b4fa63a0b2c814bdfeeb5e4979e43fe90ad0">SHIELD_BLOCK_VALUE</a>, modType, <span class="keywordtype">float</span>(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><a name="l04890"></a><span class="lineno"> 4890</span>&#160;}</div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a580ae19464afb0d72ab7d3414e14796b"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a580ae19464afb0d72ab7d3414e14796b">SPELL_AURA_MOD_SHIELD_BLOCKVALUE_PCT</a></div><div class="ttdeci">@ SPELL_AURA_MOD_SHIELD_BLOCKVALUE_PCT</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00213">SpellAuraDefines.h:213</a></div></div>
<div class="ttc" id="a_unit_8h_html_a114d5261840f2cea1ebee7abcad43e10"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a114d5261840f2cea1ebee7abcad43e10">BaseModType</a></div><div class="ttdeci">BaseModType</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00465">Unit.h:466</a></div></div>
<div class="ttc" id="a_unit_8h_html_a114d5261840f2cea1ebee7abcad43e10ad445af08f58d13cde94091cab97f7deb"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a114d5261840f2cea1ebee7abcad43e10ad445af08f58d13cde94091cab97f7deb">PCT_MOD</a></div><div class="ttdeci">@ PCT_MOD</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00469">Unit.h:468</a></div></div>
<div class="ttc" id="a_unit_8h_html_a938646605f1e70b8f1613bf9bdb78b4fa63a0b2c814bdfeeb5e4979e43fe90ad0"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a938646605f1e70b8f1613bf9bdb78b4fa63a0b2c814bdfeeb5e4979e43fe90ad0">SHIELD_BLOCK_VALUE</a></div><div class="ttdeci">@ SHIELD_BLOCK_VALUE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00461">Unit.h:461</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00467">FLAT_MOD</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00446">GetAuraType()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l04853">Player::HandleBaseModValue()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00468">PCT_MOD</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00461">SHIELD_BLOCK_VALUE</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00213">SPELL_AURA_MOD_SHIELD_BLOCKVALUE_PCT</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, and <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>.</p>

</div>
</div>
<a id="a40c4c923ea3038d2285ab82992e87dc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40c4c923ea3038d2285ab82992e87dc8">&#9670;&nbsp;</a></span>HandleSpiritOfRedemption()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleSpiritOfRedemption </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01706">1706</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;{</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160; </div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160; </div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160; </div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    <span class="comment">// prepare spirit state</span></div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    {</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;        <span class="comment">// disable breath/etc timers</span></div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#a6fcb0dcc0f5d2cd100b754165592cb00">StopMirrorTimers</a>();</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160; </div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;        <span class="comment">// set stand state (expected in this form)</span></div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;        <span class="keywordflow">if</span> (!target-&gt;<a class="code" href="../../da/db7/class_unit.html#a66120644adf09a45c139d48d4e4dce5b">IsStandState</a>())</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;            target-&gt;<a class="code" href="../../da/db7/class_unit.html#aeae261b4b6d3ccacc8819ca19b4ef0cc">SetStandState</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a809d475cf0ffeaa1ddad86f73e24a7c1ae36b6864d89399e04b14123d3194e224">UNIT_STAND_STATE_STAND</a>);</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160; </div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a6548d4bfff73fad6df63a0bd0d806e2e">SetHealth</a>(1);</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;    }</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    <span class="comment">// die at aura end</span></div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../da/db7/class_unit.html#a5ea3f54af571493f7889220724667189">IsAlive</a>())</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;        <span class="comment">// call functions which may have additional effects after chainging state of unit</span></div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#a0e26ac5eae65e908edf086ec7a68cb3e">setDeathState</a>(<a class="code" href="../../d5/d32/_unit_8h.html#a671007e5c9d47b3ccb212f971e65baedab1727b82509eb59005a3b6b60107f51b">JUST_DIED</a>);</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160; </div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;    <span class="comment">// xinef: damage immunity spell, not needed because of 93 aura (adds non_attackable state)</span></div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;    <span class="comment">// xinef: probably blizzard added it just in case in wotlk (id &gt; 46000)</span></div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d2e/namespace_byte_converter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 62371, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;        target-&gt;<a class="code" href="../../da/db7/class_unit.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(62371);</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;}</div>
<div class="ttc" id="a_unit_8h_html_a671007e5c9d47b3ccb212f971e65baedab1727b82509eb59005a3b6b60107f51b"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a671007e5c9d47b3ccb212f971e65baedab1727b82509eb59005a3b6b60107f51b">JUST_DIED</a></div><div class="ttdeci">@ JUST_DIED</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00476">Unit.h:476</a></div></div>
<div class="ttc" id="a_unit_8h_html_a809d475cf0ffeaa1ddad86f73e24a7c1ae36b6864d89399e04b14123d3194e224"><div class="ttname"><a href="../../d5/d32/_unit_8h.html#a809d475cf0ffeaa1ddad86f73e24a7c1ae36b6864d89399e04b14123d3194e224">UNIT_STAND_STATE_STAND</a></div><div class="ttdeci">@ UNIT_STAND_STATE_STAND</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d32/_unit_8h_source.html#l00162">Unit.h:162</a></div></div>
<div class="ttc" id="aclass_player_html_a6fcb0dcc0f5d2cd100b754165592cb00"><div class="ttname"><a href="../../d8/d53/class_player.html#a6fcb0dcc0f5d2cd100b754165592cb00">Player::StopMirrorTimers</a></div><div class="ttdeci">void StopMirrorTimers()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d39/_player_8h_source.html#l01997">Player.h:1997</a></div></div>
<div class="ttc" id="aclass_unit_html_a0e26ac5eae65e908edf086ec7a68cb3e"><div class="ttname"><a href="../../da/db7/class_unit.html#a0e26ac5eae65e908edf086ec7a68cb3e">Unit::setDeathState</a></div><div class="ttdeci">virtual void setDeathState(DeathState s, bool despawn=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l13712">Unit.cpp:13712</a></div></div>
<div class="ttc" id="aclass_unit_html_a66120644adf09a45c139d48d4e4dce5b"><div class="ttname"><a href="../../da/db7/class_unit.html#a66120644adf09a45c139d48d4e4dce5b">Unit::IsStandState</a></div><div class="ttdeci">bool IsStandState() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l16037">Unit.cpp:16037</a></div></div>
<div class="ttc" id="aclass_unit_html_aeae261b4b6d3ccacc8819ca19b4ef0cc"><div class="ttname"><a href="../../da/db7/class_unit.html#aeae261b4b6d3ccacc8819ca19b4ef0cc">Unit::SetStandState</a></div><div class="ttdeci">void SetStandState(uint8 state)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l16043">Unit.cpp:16043</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/db2/_byte_converter_8h_source.html#l00040">ByteConverter::apply()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01087">Unit::CastSpell()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l01888">Unit::IsAlive()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16037">Unit::IsStandState()</a>, <a class="el" href="../../d5/d32/_unit_8h_source.html#l00476">JUST_DIED</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l04420">Unit::RemoveAurasDueToSpell()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l13712">Unit::setDeathState()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l14619">Unit::SetHealth()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l16043">Unit::SetStandState()</a>, <a class="el" href="../../d1/d39/_player_8h_source.html#l01997">Player::StopMirrorTimers()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../d5/d32/_unit_8h_source.html#l00162">UNIT_STAND_STATE_STAND</a>.</p>

</div>
</div>
<a id="a49b7f5bcb03bab576c46e4db57e0625d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49b7f5bcb03bab576c46e4db57e0625d">&#9670;&nbsp;</a></span>HandleUnused()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleUnused </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00149">149</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="comment">// useless</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae0e6dfd8b1d19f6f3ab0d60f65e4427a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0e6dfd8b1d19f6f3ab0d60f65e4427a">&#9670;&nbsp;</a></span>HandleWaterBreathing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleWaterBreathing </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l02944">2944</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;{</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;    <span class="keywordflow">if</span> (!(mode &amp; <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160; </div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../da/db7/class_unit.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160; </div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;    <span class="comment">// update timers in client</span></div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;    <span class="keywordflow">if</span> (target-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() == <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;        target-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#aa4a31e21f267b78a58a6c2031b04c487">UpdateMirrorTimers</a>();</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;}</div>
<div class="ttc" id="aclass_player_html_aa4a31e21f267b78a58a6c2031b04c487"><div class="ttname"><a href="../../d8/d53/class_player.html#aa4a31e21f267b78a58a6c2031b04c487">Player::UpdateMirrorTimers</a></div><div class="ttdeci">void UpdateMirrorTimers()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d38/_player_updates_8cpp_source.html#l00438">PlayerUpdates.cpp:438</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>, and <a class="el" href="../../dc/d38/_player_updates_8cpp_source.html#l00438">Player::UpdateMirrorTimers()</a>.</p>

</div>
</div>
<a id="ac47f45d58ef676d9e242852a80c96b01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac47f45d58ef676d9e242852a80c96b01">&#9670;&nbsp;</a></span>HasSpellClassMask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> AuraEffect::HasSpellClassMask </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01076">1076</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;{</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code" href="../../da/df1/class_aura_effect.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>].SpellClassMask;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00387">SpellInfo::Effects</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00137">m_effIndex</a>, and <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00115">m_spellInfo</a>.</p>

</div>
</div>
<a id="a71cd3938d8e16b4f6363e6978077aa8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71cd3938d8e16b4f6363e6978077aa8f">&#9670;&nbsp;</a></span>IsAffectedOnSpell()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> AuraEffect::IsAffectedOnSpell </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d7d/class_spell_info.html">SpellInfo</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>spell</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01062">1062</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;{</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="keywordflow">if</span> (!spell)</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <span class="comment">// Check family name</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <span class="keywordflow">if</span> (spell-&gt;SpellFamilyName != <a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#af6ec577353f7d3cc59badd7d332153b0">SpellFamilyName</a>)</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160; </div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <span class="comment">// Check EffectClassMask</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code" href="../../da/df1/class_aura_effect.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>].SpellClassMask &amp; spell-&gt;SpellFamilyFlags)</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00387">SpellInfo::Effects</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00137">m_effIndex</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00115">m_spellInfo</a>, <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00382">SpellInfo::SpellFamilyFlags</a>, and <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00381">SpellInfo::SpellFamilyName</a>.</p>

</div>
</div>
<a id="a7d45367044e196745676c63d61fbd89d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d45367044e196745676c63d61fbd89d">&#9670;&nbsp;</a></span>IsPeriodic()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> AuraEffect::IsPeriodic </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00084">84</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../da/df1/class_aura_effect.html#ad6931b2764b92bc6c2a20b092c011f0a">m_isPeriodic</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00139">m_isPeriodic</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l00156">AuraApplication::_HandleEffect()</a>, and <a class="el" href="../../d8/d41/_spell_8cpp_source.html#l03243">Spell::prepare()</a>.</p>

</div>
</div>
<a id="af498cc64849486b0001f558da9c5c9ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af498cc64849486b0001f558da9c5c9ef">&#9670;&nbsp;</a></span>PeriodicTick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::PeriodicTick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da3/class_aura_application.html">AuraApplication</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01087">1087</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;{</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <span class="keywordtype">bool</span> prevented = <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#a3b0854e2019338fd16c9ca46e3997931">CallScriptEffectPeriodicHandlers</a>(<span class="keyword">this</span>, aurApp);</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <span class="keywordflow">if</span> (prevented)</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160; </div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <a class="code" href="../../da/db7/class_unit.html">Unit</a>* target = aurApp-&gt;<a class="code" href="../../d8/da3/class_aura_application.html#a48f6d82daf06f6f2ced98484c2b56248">GetTarget</a>();</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160; </div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>())</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    {</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799add498157825d0faca2c013bbcdfbae56">SPELL_AURA_PERIODIC_DUMMY</a>:</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;            <a class="code" href="../../da/df1/class_aura_effect.html#a61bdb07de2581972c79e3c3e46ecdbbe">HandlePeriodicDummyAuraTick</a>(target, caster);</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799af51e1877e096bbfd69505e5ab4fc69ad">SPELL_AURA_PERIODIC_TRIGGER_SPELL</a>:</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;            <a class="code" href="../../da/df1/class_aura_effect.html#a545377a3f6c71f42c3897206a2dc0919">HandlePeriodicTriggerSpellAuraTick</a>(target, caster);</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ab6c4d806c60e94fec189c27a7a205576">SPELL_AURA_PERIODIC_TRIGGER_SPELL_WITH_VALUE</a>:</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;            <a class="code" href="../../da/df1/class_aura_effect.html#af605dc2f9174968cb77b9d3cc50a1fb4">HandlePeriodicTriggerSpellWithValueAuraTick</a>(target, caster);</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a11166673929d2fda5967add284832fad">SPELL_AURA_PERIODIC_DAMAGE</a>:</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a65c8ec2c8667d6c49c278491c113a374">SPELL_AURA_PERIODIC_DAMAGE_PERCENT</a>:</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;            <a class="code" href="../../da/df1/class_aura_effect.html#a8f993bd36f255362d3801c708509a868">HandlePeriodicDamageAurasTick</a>(target, caster);</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ac84a600c9fc81cbda953c9f64074ab9f">SPELL_AURA_PERIODIC_LEECH</a>:</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;            <a class="code" href="../../da/df1/class_aura_effect.html#a757600361597c84413041214cd39dc22">HandlePeriodicHealthLeechAuraTick</a>(target, caster);</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a2b064a34862eb2f85ec873398d787012">SPELL_AURA_PERIODIC_HEALTH_FUNNEL</a>:</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;            <a class="code" href="../../da/df1/class_aura_effect.html#a35cc3b13cde9e1cfbdfee49d6bdcee57">HandlePeriodicHealthFunnelAuraTick</a>(target, caster);</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a6442a4a379f82e2f08734296e1e21c9f">SPELL_AURA_PERIODIC_HEAL</a>:</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a2616d80ed4951b4ff860a0e0e2a98da0">SPELL_AURA_OBS_MOD_HEALTH</a>:</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;            <a class="code" href="../../da/df1/class_aura_effect.html#a3c497a3c954b0bade630ac996c440fa3">HandlePeriodicHealAurasTick</a>(target, caster);</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a2eb3f6e6a49bc0b70fa9726b1fa12bb3">SPELL_AURA_PERIODIC_MANA_LEECH</a>:</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;            <a class="code" href="../../da/df1/class_aura_effect.html#a20e3450e5f8299f76561cbe747d12c88">HandlePeriodicManaLeechAuraTick</a>(target, caster);</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a4f1feb3950d2776a74c938c366adbbdf">SPELL_AURA_OBS_MOD_POWER</a>:</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;            <a class="code" href="../../da/df1/class_aura_effect.html#a2d4f436ab67e728f66577e043143f32d">HandleObsModPowerAuraTick</a>(target, caster);</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ab9f377f6e107ad1633d32a22da2ec7d2">SPELL_AURA_PERIODIC_ENERGIZE</a>:</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;            <a class="code" href="../../da/df1/class_aura_effect.html#a4cee5e983225342908700110067f258a">HandlePeriodicEnergizeAuraTick</a>(target, caster);</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799ad06611922c0cf903c24b220140daacab">SPELL_AURA_POWER_BURN</a>:</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;            <a class="code" href="../../da/df1/class_aura_effect.html#a0e5699c43a4f49c32daa9c1b6df068ce">HandlePeriodicPowerBurnAuraTick</a>(target, caster);</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    }</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;}</div>
<div class="ttc" id="aclass_aura_effect_html_a0e5699c43a4f49c32daa9c1b6df068ce"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a0e5699c43a4f49c32daa9c1b6df068ce">AuraEffect::HandlePeriodicPowerBurnAuraTick</a></div><div class="ttdeci">void HandlePeriodicPowerBurnAuraTick(Unit *target, Unit *caster) const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06737">SpellAuraEffects.cpp:6737</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a20e3450e5f8299f76561cbe747d12c88"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a20e3450e5f8299f76561cbe747d12c88">AuraEffect::HandlePeriodicManaLeechAuraTick</a></div><div class="ttdeci">void HandlePeriodicManaLeechAuraTick(Unit *target, Unit *caster) const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06596">SpellAuraEffects.cpp:6596</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a2d4f436ab67e728f66577e043143f32d"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a2d4f436ab67e728f66577e043143f32d">AuraEffect::HandleObsModPowerAuraTick</a></div><div class="ttdeci">void HandleObsModPowerAuraTick(Unit *target, Unit *caster) const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06669">SpellAuraEffects.cpp:6669</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a35cc3b13cde9e1cfbdfee49d6bdcee57"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a35cc3b13cde9e1cfbdfee49d6bdcee57">AuraEffect::HandlePeriodicHealthFunnelAuraTick</a></div><div class="ttdeci">void HandlePeriodicHealthFunnelAuraTick(Unit *target, Unit *caster) const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06425">SpellAuraEffects.cpp:6425</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a3c497a3c954b0bade630ac996c440fa3"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a3c497a3c954b0bade630ac996c440fa3">AuraEffect::HandlePeriodicHealAurasTick</a></div><div class="ttdeci">void HandlePeriodicHealAurasTick(Unit *target, Unit *caster) const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06454">SpellAuraEffects.cpp:6454</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a4cee5e983225342908700110067f258a"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a4cee5e983225342908700110067f258a">AuraEffect::HandlePeriodicEnergizeAuraTick</a></div><div class="ttdeci">void HandlePeriodicEnergizeAuraTick(Unit *target, Unit *caster) const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06703">SpellAuraEffects.cpp:6703</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a545377a3f6c71f42c3897206a2dc0919"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a545377a3f6c71f42c3897206a2dc0919">AuraEffect::HandlePeriodicTriggerSpellAuraTick</a></div><div class="ttdeci">void HandlePeriodicTriggerSpellAuraTick(Unit *target, Unit *caster) const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05861">SpellAuraEffects.cpp:5861</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a61bdb07de2581972c79e3c3e46ecdbbe"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a61bdb07de2581972c79e3c3e46ecdbbe">AuraEffect::HandlePeriodicDummyAuraTick</a></div><div class="ttdeci">void HandlePeriodicDummyAuraTick(Unit *target, Unit *caster) const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05770">SpellAuraEffects.cpp:5770</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a757600361597c84413041214cd39dc22"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a757600361597c84413041214cd39dc22">AuraEffect::HandlePeriodicHealthLeechAuraTick</a></div><div class="ttdeci">void HandlePeriodicHealthLeechAuraTick(Unit *target, Unit *caster) const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06329">SpellAuraEffects.cpp:6329</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a8f993bd36f255362d3801c708509a868"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a8f993bd36f255362d3801c708509a868">AuraEffect::HandlePeriodicDamageAurasTick</a></div><div class="ttdeci">void HandlePeriodicDamageAurasTick(Unit *target, Unit *caster) const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06190">SpellAuraEffects.cpp:6190</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_af605dc2f9174968cb77b9d3cc50a1fb4"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#af605dc2f9174968cb77b9d3cc50a1fb4">AuraEffect::HandlePeriodicTriggerSpellWithValueAuraTick</a></div><div class="ttdeci">void HandlePeriodicTriggerSpellWithValueAuraTick(Unit *target, Unit *caster) const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06157">SpellAuraEffects.cpp:6157</a></div></div>
<div class="ttc" id="aclass_aura_html_a3b0854e2019338fd16c9ca46e3997931"><div class="ttname"><a href="../../d2/dde/class_aura.html#a3b0854e2019338fd16c9ca46e3997931">Aura::CallScriptEffectPeriodicHandlers</a></div><div class="ttdeci">bool CallScriptEffectPeriodicHandlers(AuraEffect const *aurEff, AuraApplication const *aurApp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/_spell_auras_8cpp_source.html#l02400">SpellAuras.cpp:2400</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l02400">Aura::CallScriptEffectPeriodicHandlers()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00446">GetAuraType()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">GetBase()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06669">HandleObsModPowerAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06190">HandlePeriodicDamageAurasTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05770">HandlePeriodicDummyAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06703">HandlePeriodicEnergizeAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06454">HandlePeriodicHealAurasTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06425">HandlePeriodicHealthFunnelAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06329">HandlePeriodicHealthLeechAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06596">HandlePeriodicManaLeechAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06737">HandlePeriodicPowerBurnAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05861">HandlePeriodicTriggerSpellAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06157">HandlePeriodicTriggerSpellWithValueAuraTick()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00083">SPELL_AURA_OBS_MOD_HEALTH</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00084">SPELL_AURA_OBS_MOD_POWER</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00066">SPELL_AURA_PERIODIC_DAMAGE</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00152">SPELL_AURA_PERIODIC_DAMAGE_PERCENT</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00289">SPELL_AURA_PERIODIC_DUMMY</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00087">SPELL_AURA_PERIODIC_ENERGIZE</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00071">SPELL_AURA_PERIODIC_HEAL</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00125">SPELL_AURA_PERIODIC_HEALTH_FUNNEL</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00116">SPELL_AURA_PERIODIC_LEECH</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00127">SPELL_AURA_PERIODIC_MANA_LEECH</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00086">SPELL_AURA_PERIODIC_TRIGGER_SPELL</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00290">SPELL_AURA_PERIODIC_TRIGGER_SPELL_WITH_VALUE</a>, and <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00225">SPELL_AURA_POWER_BURN</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00889">Update()</a>.</p>

</div>
</div>
<a id="adc38a016285e442a485c9b9bc17a6105"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc38a016285e442a485c9b9bc17a6105">&#9670;&nbsp;</a></span>RecalculateAmount() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::RecalculateAmount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00068">68</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;{ <span class="keywordflow">if</span> (!<a class="code" href="../../da/df1/class_aura_effect.html#a2322ac1aaf1bdfe21733d082603c503c">CanBeRecalculated</a>()) <span class="keywordflow">return</span>; <a class="code" href="../../da/df1/class_aura_effect.html#a07673908af178ffaee01353a6d11a703">ChangeAmount</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a66f8fd3fa296b59cee26c35c433e52f2">CalculateAmount</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a29cf330277aeb89d17d18f6e112f035b">GetCaster</a>()), <span class="keyword">false</span>); }</div>
<div class="ttc" id="aclass_aura_effect_html_a07673908af178ffaee01353a6d11a703"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a07673908af178ffaee01353a6d11a703">AuraEffect::ChangeAmount</a></div><div class="ttdeci">void ChangeAmount(int32 newAmount, bool mark=true, bool onStackOrReapply=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00700">SpellAuraEffects.cpp:700</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_a2322ac1aaf1bdfe21733d082603c503c"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#a2322ac1aaf1bdfe21733d082603c503c">AuraEffect::CanBeRecalculated</a></div><div class="ttdeci">bool CanBeRecalculated() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/_spell_aura_effects_8h_source.html#l00070">SpellAuraEffects.h:70</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00451">CalculateAmount()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00070">CanBeRecalculated()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00700">ChangeAmount()</a>, and <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00040">GetCaster()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/d51/spell__dk_8cpp_source.html#l00801">spell_dk_pet_scaling::HandlePeriodic()</a>, <a class="el" href="../../d1/de4/spell__generic_8cpp_source.html#l00485">spell_pet_hit_expertise_scalling::HandlePeriodic()</a>, <a class="el" href="../../db/dee/spell__hunter_8cpp_source.html#l00230">spell_hun_generic_scaling::HandlePeriodic()</a>, <a class="el" href="../../d3/df8/spell__mage_8cpp_source.html#l00309">spell_mage_pet_scaling::HandlePeriodic()</a>, <a class="el" href="../../df/dd5/spell__shaman_8cpp_source.html#l00236">spell_sha_feral_spirit_scaling::HandlePeriodic()</a>, <a class="el" href="../../d1/dd5/spell__warlock_8cpp_source.html#l00194">spell_warl_improved_demonic_tactics::HandlePeriodic()</a>, <a class="el" href="../../d1/dd5/spell__warlock_8cpp_source.html#l00259">spell_warl_demonic_knowledge::HandlePeriodic()</a>, <a class="el" href="../../d1/dd5/spell__warlock_8cpp_source.html#l00333">spell_warl_generic_scaling::HandlePeriodic()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l01220">Aura::RecalculateAmountOfEffects()</a>, and <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l01191">Aura::SetLoadedState()</a>.</p>

</div>
</div>
<a id="a597dbfc9d3bbe964088f601528126818"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a597dbfc9d3bbe964088f601528126818">&#9670;&nbsp;</a></span>RecalculateAmount() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::RecalculateAmount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00069">69</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;{ <span class="keywordflow">if</span> (!<a class="code" href="../../da/df1/class_aura_effect.html#a2322ac1aaf1bdfe21733d082603c503c">CanBeRecalculated</a>()) <span class="keywordflow">return</span>; <a class="code" href="../../da/df1/class_aura_effect.html#a07673908af178ffaee01353a6d11a703">ChangeAmount</a>(<a class="code" href="../../da/df1/class_aura_effect.html#a66f8fd3fa296b59cee26c35c433e52f2">CalculateAmount</a>(caster), <span class="keyword">false</span>); }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00451">CalculateAmount()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00070">CanBeRecalculated()</a>, and <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00700">ChangeAmount()</a>.</p>

</div>
</div>
<a id="acc2bdb287922c879abcbab9e8a6f4fab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc2bdb287922c879abcbab9e8a6f4fab">&#9670;&nbsp;</a></span>ResetPeriodic()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::ResetPeriodic </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>resetPeriodicTimer</em> = <code><a class="el" href="../../d9/d5e/stdbool_8h.html#a65e9886d74aaee76545e83dd09011727">false</a></code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00081">81</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;{ <span class="keywordflow">if</span> (resetPeriodicTimer) <a class="code" href="../../da/df1/class_aura_effect.html#a2d9b475cbf04d8597953802e1accc938">m_periodicTimer</a> = <a class="code" href="../../da/df1/class_aura_effect.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a>; <a class="code" href="../../da/df1/class_aura_effect.html#ab8c7fb50eac3482a162cbbacd64f1625">m_tickNumber</a> = 0;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00134">m_amplitude</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00133">m_periodicTimer</a>, and <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00135">m_tickNumber</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l08200">Unit::HandleAuraProc()</a>.</p>

</div>
</div>
<a id="afc2f180bb606c2d4f11ae239d3293dbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc2f180bb606c2d4f11ae239d3293dbf">&#9670;&nbsp;</a></span>ResetTicks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::ResetTicks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00082">82</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;{ <a class="code" href="../../da/df1/class_aura_effect.html#ab8c7fb50eac3482a162cbbacd64f1625">m_tickNumber</a> = 0; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00135">m_tickNumber</a>.</p>

</div>
</div>
<a id="a94ad6938ac754595a00f0f5a8e2019c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94ad6938ac754595a00f0f5a8e2019c5">&#9670;&nbsp;</a></span>SendTickImmune()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::SendTickImmune </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01081">1081</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;{</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <span class="keywordflow">if</span> (caster)</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        caster-&gt;<a class="code" href="../../da/db7/class_unit.html#a43d885100b3d51bbc5c8ba7b78cdd60c">SendSpellDamageImmune</a>(target, <a class="code" href="../../da/df1/class_aura_effect.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code" href="../../d4/d7d/class_spell_info.html#a49bc14059c2bd3785231c52e0d54d382">Id</a>);</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;}</div>
<div class="ttc" id="aclass_unit_html_a43d885100b3d51bbc5c8ba7b78cdd60c"><div class="ttname"><a href="../../da/db7/class_unit.html#a43d885100b3d51bbc5c8ba7b78cdd60c">Unit::SendSpellDamageImmune</a></div><div class="ttdeci">void SendSpellDamageImmune(Unit *target, uint32 spellId)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2e/_unit_8cpp_source.html#l05914">Unit.cpp:5914</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d70/_spell_info_8h_source.html#l00315">SpellInfo::Id</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00115">m_spellInfo</a>, and <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l05914">Unit::SendSpellDamageImmune()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06669">HandleObsModPowerAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06190">HandlePeriodicDamageAurasTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06703">HandlePeriodicEnergizeAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06454">HandlePeriodicHealAurasTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06425">HandlePeriodicHealthFunnelAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06329">HandlePeriodicHealthLeechAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06596">HandlePeriodicManaLeechAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06737">HandlePeriodicPowerBurnAuraTick()</a>, and <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06822">HandleProcTriggerDamageAuraProc()</a>.</p>

</div>
</div>
<a id="a9790b9f33c52c6d3b830dc6f56f08bf0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9790b9f33c52c6d3b830dc6f56f08bf0">&#9670;&nbsp;</a></span>SetAmount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::SetAmount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td>
          <td class="paramname"><em>amount</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00058">58</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;{ <a class="code" href="../../da/df1/class_aura_effect.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a> = amount; <a class="code" href="../../da/df1/class_aura_effect.html#a334378fa304471045fd273f4d845c8dd">m_canBeRecalculated</a> = <span class="keyword">false</span>;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00120">m_amount</a>, and <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00138">m_canBeRecalculated</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d55/spell__druid_8cpp_source.html#l00792">spell_dru_savage_defense::Absorb()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l01875">Unit::CalcAbsorbResist()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00700">ChangeAmount()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l01253">Aura::HandleAuraSpecificMods()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l06013">Unit::HandleDummyAuraProc()</a>, <a class="el" href="../../d3/dec/hallows__end_8cpp_source.html#l00357">spell_hallows_end_base_fire::spell_hallows_end_base_fire_AuraScript::HandleEffectPeriodicUpdate()</a>, <a class="el" href="../../d1/de4/spell__generic_8cpp_source.html#l01322">spell_gen_burn_brutallus::HandleEffectPeriodicUpdate()</a>, <a class="el" href="../../d8/ddf/boss__professor__putricide_8cpp_source.html#l01330">spell_putricide_unbound_plague_dmg::spell_putricide_unbound_plague_dmg_AuraScript::HandlePeriodic()</a>, <a class="el" href="../../db/dee/spell__hunter_8cpp_source.html#l00720">spell_hun_sniper_training::HandleUpdatePeriodic()</a>, <a class="el" href="../../d4/dc9/boss__kalecgos_8cpp_source.html#l00690">spell_kalecgos_curse_of_boundless_agony::spell_kalecgos_curse_of_boundless_agony_AuraScript::OnPeriodic()</a>, <a class="el" href="../../da/d78/boss__the__lich__king_8cpp_source.html#l01893">spell_the_lich_king_infest::spell_the_lich_king_infest_AuraScript::OnUpdate()</a>, <a class="el" href="../../d0/d70/boss__moragg_8cpp_source.html#l00141">spell_optic_link::spell_optic_linkAuraScript::PrepareAuraScript()</a>, <a class="el" href="../../d2/d2e/_unit_8cpp_source.html#l15426">Unit::ProcDamageAndSpellFor()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l01191">Aura::SetLoadedState()</a>, and <a class="el" href="../../df/d41/instance__black__temple_8cpp_source.html#l00495">spell_black_temple_shadow_inferno::spell_black_temple_shadow_inferno_AuraScript::Update()</a>.</p>

</div>
</div>
<a id="af93cf68cd8854d93010663353043e4a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af93cf68cd8854d93010663353043e4a2">&#9670;&nbsp;</a></span>SetCanBeRecalculated()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::SetCanBeRecalculated </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>val</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00071">71</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;{ <a class="code" href="../../da/df1/class_aura_effect.html#a334378fa304471045fd273f4d845c8dd">m_canBeRecalculated</a> = val; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00138">m_canBeRecalculated</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l01191">Aura::SetLoadedState()</a>.</p>

</div>
</div>
<a id="aa5fa45a022f85bfea33ae5faf843cd69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5fa45a022f85bfea33ae5faf843cd69">&#9670;&nbsp;</a></span>SetCritChance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::SetCritChance </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>crit</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00101">101</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;{ <a class="code" href="../../da/df1/class_aura_effect.html#af7eff5d08a22189f99f66695367ae250">m_critChance</a> = crit; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00121">m_critChance</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00571">CalculatePeriodicData()</a>.</p>

</div>
</div>
<a id="a063903240b281f490908845ef93ec68a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a063903240b281f490908845ef93ec68a">&#9670;&nbsp;</a></span>SetEnabled()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::SetEnabled </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>enabled</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00110">110</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;{ <a class="code" href="../../da/df1/class_aura_effect.html#acec00491f0ec7f7c68d6a25d85b5b53f">m_isAuraEnabled</a> = enabled; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00127">m_isAuraEnabled</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l00156">AuraApplication::_HandleEffect()</a>.</p>

</div>
</div>
<a id="a04d3cc9ebda15ebf8f10650864d0724a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04d3cc9ebda15ebf8f10650864d0724a">&#9670;&nbsp;</a></span>SetOldAmount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::SetOldAmount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td>
          <td class="paramname"><em>amount</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00109">109</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;{ <a class="code" href="../../da/df1/class_aura_effect.html#a5fa9f61c77274c75e6f3d8222142ab4e">m_oldAmount</a> = amount; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00126">m_oldAmount</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00451">CalculateAmount()</a>.</p>

</div>
</div>
<a id="a8b39616fd9d0543194c9d6dbec186f55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b39616fd9d0543194c9d6dbec186f55">&#9670;&nbsp;</a></span>SetPeriodic()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::SetPeriodic </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>isPeriodic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00085">85</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;{ <a class="code" href="../../da/df1/class_aura_effect.html#ad6931b2764b92bc6c2a20b092c011f0a">m_isPeriodic</a> = isPeriodic; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00139">m_isPeriodic</a>.</p>

</div>
</div>
<a id="abc3f0fbe56a3974699db0056eed45664"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc3f0fbe56a3974699db0056eed45664">&#9670;&nbsp;</a></span>SetPeriodicTimer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::SetPeriodicTimer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td>
          <td class="paramname"><em>periodicTimer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00061">61</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;{ <a class="code" href="../../da/df1/class_aura_effect.html#a2d9b475cbf04d8597953802e1accc938">m_periodicTimer</a> = periodicTimer; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00133">m_periodicTimer</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/d1a/boss__valithria__dreamwalker_8cpp_source.html#l01285">spell_dreamwalker_decay_periodic_timer::spell_dreamwalker_decay_periodic_timer_AuraScript::DecayPeriodicTimer()</a>, <a class="el" href="../../d9/d3f/boss__muru_8cpp_source.html#l00337">spell_muru_summon_blood_elves_periodic::spell_muru_summon_blood_elves_periodic_AuraScript::HandleApply()</a>, <a class="el" href="../../d1/de4/spell__generic_8cpp_source.html#l00801">spell_gen_baby_murloc_passive::HandleApply()</a>, <a class="el" href="../../d1/de4/spell__generic_8cpp_source.html#l00806">spell_gen_baby_murloc_passive::HandlePeriodicTimer()</a>, <a class="el" href="../../d3/d18/boss__hadronox_8cpp_source.html#l00336">spell_hadronox_summon_periodic::spell_hadronox_summon_periodic_AuraScript::OnApply()</a>, and <a class="el" href="../../db/d6e/spell__item_8cpp_source.html#l00191">spell_item_goblin_gumbo_kettle::Update()</a>.</p>

</div>
</div>
<a id="a1e57c07b017695d76137b0d81074df1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e57c07b017695d76137b0d81074df1e">&#9670;&nbsp;</a></span>Update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::Update </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td>
          <td class="paramname"><em>diff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00889">889</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;{</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html#ad6931b2764b92bc6c2a20b092c011f0a">m_isPeriodic</a> &amp;&amp; (<a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;GetDuration() &gt;= 0 || <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;IsPassive() || <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;IsPermanent()))</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    {</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        <a class="code" href="../../da/df1/class_aura_effect.html#a2d9b475cbf04d8597953802e1accc938">m_periodicTimer</a> -= <a class="code" href="../../df/de2/namespace_g3_d.html#af80d9dbc6fa48c9ff714c7158adb60ae">int32</a>(<a class="code" href="../../d9/d39/dtoa_8c.html#a158860430cb5f139d88fdf19cf9ad511">diff</a>);</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a2d9b475cbf04d8597953802e1accc938">m_periodicTimer</a> &lt;= 0)</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        {</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;            ++<a class="code" href="../../da/df1/class_aura_effect.html#ab8c7fb50eac3482a162cbbacd64f1625">m_tickNumber</a>;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160; </div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;            <span class="comment">// update before tick (aura can be removed in TriggerSpell or PeriodicTick calls)</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;            <a class="code" href="../../da/df1/class_aura_effect.html#a2d9b475cbf04d8597953802e1accc938">m_periodicTimer</a> += <a class="code" href="../../da/df1/class_aura_effect.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a>;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;            <a class="code" href="../../da/df1/class_aura_effect.html#afebebaa8f9f33d8354d624561c34b461">UpdatePeriodic</a>(caster);</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160; </div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;            std::list&lt;AuraApplication*&gt; effectApplications;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;            <a class="code" href="../../da/df1/class_aura_effect.html#a3ea63ccc256382991e0802842f69e44f">GetApplicationList</a>(effectApplications);</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;            <span class="comment">// tick on targets of effects</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;            <span class="keywordflow">for</span> (std::list&lt;AuraApplication*&gt;::const_iterator apptItr = effectApplications.begin(); apptItr != effectApplications.end(); ++apptItr)</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                <span class="keywordflow">if</span> ((*apptItr)-&gt;HasEffect(<a class="code" href="../../da/df1/class_aura_effect.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()))</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                    <a class="code" href="../../da/df1/class_aura_effect.html#af498cc64849486b0001f558da9c5c9ef">PeriodicTick</a>(*apptItr, caster);</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        }</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    }</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;}</div>
<div class="ttc" id="aclass_aura_effect_html_af498cc64849486b0001f558da9c5c9ef"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#af498cc64849486b0001f558da9c5c9ef">AuraEffect::PeriodicTick</a></div><div class="ttdeci">void PeriodicTick(AuraApplication *aurApp, Unit *caster) const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01087">SpellAuraEffects.cpp:1087</a></div></div>
<div class="ttc" id="aclass_aura_effect_html_afebebaa8f9f33d8354d624561c34b461"><div class="ttname"><a href="../../da/df1/class_aura_effect.html#afebebaa8f9f33d8354d624561c34b461">AuraEffect::UpdatePeriodic</a></div><div class="ttdeci">void UpdatePeriodic(Unit *caster)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00912">SpellAuraEffects.cpp:912</a></div></div>
<div class="ttc" id="adtoa_8c_html_a158860430cb5f139d88fdf19cf9ad511"><div class="ttname"><a href="../../d9/d39/dtoa_8c.html#a158860430cb5f139d88fdf19cf9ad511">diff</a></div><div class="ttdeci">static Bigint * diff(Bigint *a, Bigint *b, Stack_alloc *alloc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d39/dtoa_8c_source.html#l01108">dtoa.c:1108</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/d39/dtoa_8c_source.html#l01108">diff()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00421">GetApplicationList()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">GetBase()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00133">Aura::GetDuration()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00049">GetEffIndex()</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l01034">Aura::IsPassive()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00138">Aura::IsPermanent()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00134">m_amplitude</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00139">m_isPeriodic</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00133">m_periodicTimer</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00135">m_tickNumber</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01087">PeriodicTick()</a>, and <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00912">UpdatePeriodic()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l00737">Aura::UpdateOwner()</a>.</p>

</div>
</div>
<a id="afebebaa8f9f33d8354d624561c34b461"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afebebaa8f9f33d8354d624561c34b461">&#9670;&nbsp;</a></span>UpdatePeriodic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::UpdatePeriodic </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00912">912</a> of file <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;{</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>())</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    {</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799add498157825d0faca2c013bbcdfbae56">SPELL_AURA_PERIODIC_DUMMY</a>:</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;            <span class="keywordflow">switch</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a93f49c4b2f8cabfc0372c8aef24f022e">GetSpellInfo</a>()-&gt;SpellFamilyName)</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;            {</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="../../df/d0b/_shared_defines_8h.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0ebbb6206eb92cdc484b416eb6f41743">SPELLFAMILY_GENERIC</a>:</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;                    <span class="keywordflow">switch</span> (<a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>())</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;                    {</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                        <span class="comment">// Drink</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;                        <span class="keywordflow">case</span> 430:</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;                        <span class="keywordflow">case</span> 431:</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;                        <span class="keywordflow">case</span> 432:</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                        <span class="keywordflow">case</span> 1133:</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;                        <span class="keywordflow">case</span> 1135:</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;                        <span class="keywordflow">case</span> 1137:</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;                        <span class="keywordflow">case</span> 10250:</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;                        <span class="keywordflow">case</span> 22734:</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;                        <span class="keywordflow">case</span> 27089:</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;                        <span class="keywordflow">case</span> 34291:</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;                        <span class="keywordflow">case</span> 43182:</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;                        <span class="keywordflow">case</span> 43183:</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                        <span class="keywordflow">case</span> 46755:</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                        <span class="keywordflow">case</span> 49472: <span class="comment">// Drink Coffee</span></div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;                        <span class="keywordflow">case</span> 57073:</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;                        <span class="keywordflow">case</span> 61830:</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;                            <span class="keywordflow">if</span> (!caster || caster-&gt;<a class="code" href="../../d8/d83/class_object.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>() != <a class="code" href="../../d9/d83/_object_guid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                            <span class="comment">// Get SPELL_AURA_MOD_POWER_REGEN aura from spell</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html">AuraEffect</a>* aurEff = <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;GetEffect(0))</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;                            {</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;                                <span class="keywordflow">if</span> (aurEff-&gt;GetAuraType() != <a class="code" href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a46b15fd937d6f84e680507c7dd110c2c">SPELL_AURA_MOD_POWER_REGEN</a>)</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                                {</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;                                    <a class="code" href="../../da/df1/class_aura_effect.html#ad6931b2764b92bc6c2a20b092c011f0a">m_isPeriodic</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                                    <a class="code" href="../../d3/d07/src_2common_2_logging_2_log_8h.html#a43832e3fa8508deb4ce43e520005fcd9">LOG_ERROR</a>(<span class="stringliteral">&quot;spells.aura.effect&quot;</span>, <span class="stringliteral">&quot;Aura %d structure has been changed - first aura is no longer SPELL_AURA_MOD_POWER_REGEN&quot;</span>, <a class="code" href="../../da/df1/class_aura_effect.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                                }</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                                {</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                                    <span class="comment">// default case - not in arena</span></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;                                    <span class="keywordflow">if</span> (!caster-&gt;<a class="code" href="../../d8/d83/class_object.html#ae635434021784608b659501867538c87">ToPlayer</a>()-&gt;<a class="code" href="../../d8/d53/class_player.html#ad08f358cbaa67f340fb1d50b756cc446">InArena</a>())</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;                                    {</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;                                        aurEff-&gt;ChangeAmount(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;                                        <a class="code" href="../../da/df1/class_aura_effect.html#ad6931b2764b92bc6c2a20b092c011f0a">m_isPeriodic</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;                                    }</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;                                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;                                    {</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;                                        <span class="comment">// **********************************************</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;                                        <span class="comment">// This feature uses only in arenas</span></div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                                        <span class="comment">// **********************************************</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;                                        <span class="comment">// Here need increase mana regen per tick (6 second rule)</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;                                        <span class="comment">// on 0 tick -   0  (handled in 2 second)</span></div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                                        <span class="comment">// on 1 tick - 166% (handled in 4 second)</span></div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                                        <span class="comment">// on 2 tick - 133% (handled in 6 second)</span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160; </div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                                        <span class="comment">// Apply bonus for 1 - 4 tick</span></div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                                        <span class="keywordflow">switch</span> (<a class="code" href="../../da/df1/class_aura_effect.html#ab8c7fb50eac3482a162cbbacd64f1625">m_tickNumber</a>)</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                                        {</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                                            <span class="keywordflow">case</span> 1:   <span class="comment">// 0%</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                                                aurEff-&gt;ChangeAmount(0);</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;                                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;                                            <span class="keywordflow">case</span> 2:   <span class="comment">// 166%</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;                                                aurEff-&gt;ChangeAmount(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() * 5 / 3);</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;                                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                                            <span class="keywordflow">case</span> 3:   <span class="comment">// 133%</span></div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                                                aurEff-&gt;ChangeAmount(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() * 4 / 3);</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                                            <span class="keywordflow">default</span>:  <span class="comment">// 100% - normal regen</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                                                aurEff-&gt;ChangeAmount(<a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                                                <span class="comment">// No need to update after 4th tick</span></div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                                                <a class="code" href="../../da/df1/class_aura_effect.html#ad6931b2764b92bc6c2a20b092c011f0a">m_isPeriodic</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                                        }</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                                    }</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                                }</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                            }</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                        <span class="keywordflow">case</span> 58549: <span class="comment">// Tenacity</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                        <span class="keywordflow">case</span> 59911: <span class="comment">// Tenacity (vehicle)</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;                            <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#a2f108f33766c253a827d41c2f3fdc45e">RefreshDuration</a>();</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                        <span class="keywordflow">case</span> 66823:</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                        <span class="keywordflow">case</span> 67618:</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                        <span class="keywordflow">case</span> 67619:</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;                        <span class="keywordflow">case</span> 67620: <span class="comment">// Paralytic Toxin</span></div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;                            <span class="comment">// Get 0 effect aura</span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html">AuraEffect</a>* slow = <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;GetEffect(0))</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                            {</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                                <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> newAmount = slow-&gt;GetAmount() - 10;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;                                <span class="keywordflow">if</span> (newAmount &lt; -100)</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;                                    newAmount = -100;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;                                slow-&gt;ChangeAmount(newAmount);</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;                            }</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                        <span class="keywordflow">case</span> 66020:</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;                            <span class="comment">// Get 0 effect aura</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/class_aura_effect.html">AuraEffect</a>* slow = <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;GetEffect(0))</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;                            {</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                                <a class="code" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> newAmount = slow-&gt;GetAmount() + <a class="code" href="../../da/df1/class_aura_effect.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>();</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;                                <span class="keywordflow">if</span> (newAmount &gt; 0)</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;                                    newAmount = 0;</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;                                slow-&gt;ChangeAmount(newAmount);</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;                            }</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;                        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;                    }</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;            }</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    }</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <a class="code" href="../../da/df1/class_aura_effect.html#a0417bd1d648cb9d2888937ddad75788c">GetBase</a>()-&gt;<a class="code" href="../../d2/dde/class_aura.html#adac81f948f034942046b45a94fea365f">CallScriptEffectUpdatePeriodicHandlers</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;}</div>
<div class="ttc" id="a_spell_aura_defines_8h_html_a538cdc259460b365f406fe0b3a981799a46b15fd937d6f84e680507c7dd110c2c"><div class="ttname"><a href="../../d7/d5a/_spell_aura_defines_8h.html#a538cdc259460b365f406fe0b3a981799a46b15fd937d6f84e680507c7dd110c2c">SPELL_AURA_MOD_POWER_REGEN</a></div><div class="ttdeci">@ SPELL_AURA_MOD_POWER_REGEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00148">SpellAuraDefines.h:148</a></div></div>
<div class="ttc" id="aclass_aura_html_a2f108f33766c253a827d41c2f3fdc45e"><div class="ttname"><a href="../../d2/dde/class_aura.html#a2f108f33766c253a827d41c2f3fdc45e">Aura::RefreshDuration</a></div><div class="ttdeci">void RefreshDuration(bool withMods=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/_spell_auras_8cpp_source.html#l00861">SpellAuras.cpp:861</a></div></div>
<div class="ttc" id="aclass_aura_html_adac81f948f034942046b45a94fea365f"><div class="ttname"><a href="../../d2/dde/class_aura.html#adac81f948f034942046b45a94fea365f">Aura::CallScriptEffectUpdatePeriodicHandlers</a></div><div class="ttdeci">void CallScriptEffectUpdatePeriodicHandlers(AuraEffect *aurEff)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/_spell_auras_8cpp_source.html#l02420">SpellAuras.cpp:2420</a></div></div>
<div class="ttc" id="aclass_player_html_ad08f358cbaa67f340fb1d50b756cc446"><div class="ttname"><a href="../../d8/d53/class_player.html#ad08f358cbaa67f340fb1d50b756cc446">Player::InArena</a></div><div class="ttdeci">bool InArena() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/_player_8cpp_source.html#l11498">Player.cpp:11498</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l02420">Aura::CallScriptEffectUpdatePeriodicHandlers()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00446">GetAuraType()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">GetBase()</a>, <a class="el" href="../../d5/dcf/_spell_auras_8h_source.html#l00174">Aura::GetEffect()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">GetId()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00107">Object::GetTypeId()</a>, <a class="el" href="../../d2/d82/_player_8cpp_source.html#l11498">Player::InArena()</a>, <a class="el" href="../../d3/d07/src_2common_2_logging_2_log_8h_source.html#l00261">LOG_ERROR</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00139">m_isPeriodic</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00135">m_tickNumber</a>, <a class="el" href="../../d7/db3/_spell_auras_8cpp_source.html#l00861">Aura::RefreshDuration()</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00148">SPELL_AURA_MOD_POWER_REGEN</a>, <a class="el" href="../../d7/d5a/_spell_aura_defines_8h_source.html#l00289">SPELL_AURA_PERIODIC_DUMMY</a>, <a class="el" href="../../df/d0b/_shared_defines_8h_source.html#l03454">SPELLFAMILY_GENERIC</a>, <a class="el" href="../../df/d30/_object_8h_source.html#l00181">Object::ToPlayer()</a>, and <a class="el" href="../../d9/d83/_object_guid_8h_source.html#l00038">TYPEID_PLAYER</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00889">Update()</a>.</p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="a80ab74fb057cffbba01f0b5bd038ccf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80ab74fb057cffbba01f0b5bd038ccf2">&#9670;&nbsp;</a></span>Aura::_InitEffects</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d2/dde/class_aura.html#ab477124f94af36e9be706451dce791f7">Aura::_InitEffects</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>effMask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> *&#160;</td>
          <td class="paramname"><em>baseAmount</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a06e65369f89484f7de1d3ad814fb4103"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06e65369f89484f7de1d3ad814fb4103">&#9670;&nbsp;</a></span>Unit::_TryStackingOrRefreshingExistingAura</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/dde/class_aura.html">Aura</a>* <a class="el" href="../../da/db7/class_unit.html#a9f63d861cbd0113802b941275e90208c">Unit::_TryStackingOrRefreshingExistingAura</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d7d/class_spell_info.html">SpellInfo</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> *&#160;</td>
          <td class="paramname"><em>newAura</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>effMask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/db7/class_unit.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> *&#160;</td>
          <td class="paramname"><em>baseAmount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d32/class_item.html">Item</a> *&#160;</td>
          <td class="paramname"><em>castItem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/d03/class_object_guid.html">ObjectGuid</a>&#160;</td>
          <td class="paramname"><em>casterGUID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>noPeriodicReset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a7f01908f09b465b6770f18c13e459f17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f01908f09b465b6770f18c13e459f17">&#9670;&nbsp;</a></span>m_amount</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> AuraEffect::m_amount</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00120">120</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00382">AuraEffect()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00700">ChangeAmount()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00057">GetForcedAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03198">HandleAuraControlVehicle()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05565">HandleAuraConvertRune()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05599">HandleAuraLinked()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05399">HandleChannelDeathItem()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05485">HandleForceReaction()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04023">HandleModPercentStat()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06669">HandleObsModPowerAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05770">HandlePeriodicDummyAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06703">HandlePeriodicEnergizeAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06454">HandlePeriodicHealAurasTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06596">HandlePeriodicManaLeechAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06737">HandlePeriodicPowerBurnAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05861">HandlePeriodicTriggerSpellAuraTick()</a>, and <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00058">SetAmount()</a>.</p>

</div>
</div>
<a id="a9b7657d41ca8a463e12dca94fffdddbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b7657d41ca8a463e12dca94fffdddbc">&#9670;&nbsp;</a></span>m_amplitude</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> AuraEffect::m_amplitude</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00134">134</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00586">CalculatePeriodic()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00051">GetAmplitude()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00080">GetTotalTicks()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00081">ResetPeriodic()</a>, and <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00889">Update()</a>.</p>

</div>
</div>
<a id="a4745b52e662a6dd92ec3b566ef7ca297"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4745b52e662a6dd92ec3b566ef7ca297">&#9670;&nbsp;</a></span>m_applyResilience</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> AuraEffect::m_applyResilience</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00118">118</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00382">AuraEffect()</a>, and <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00103">CanApplyResilience()</a>.</p>

</div>
</div>
<a id="ada78fc2515cb55583bf83667e475c7fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada78fc2515cb55583bf83667e475c7fe">&#9670;&nbsp;</a></span>m_auraGroup</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> AuraEffect::m_auraGroup</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00125">125</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00382">AuraEffect()</a>, and <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00107">GetAuraGroup()</a>.</p>

</div>
</div>
<a id="aff934af743b5031d558ffc9a4b55d6de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff934af743b5031d558ffc9a4b55d6de">&#9670;&nbsp;</a></span>m_base</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/dde/class_aura.html">Aura</a>* <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> AuraEffect::m_base</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00113">113</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00042">GetBase()</a>.</p>

</div>
</div>
<a id="aba194c9071a1b0551768b397abc9ebeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba194c9071a1b0551768b397abc9ebeb">&#9670;&nbsp;</a></span>m_baseAmount</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> AuraEffect::m_baseAmount</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00116">116</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00451">CalculateAmount()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00050">GetBaseAmount()</a>, and <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06454">HandlePeriodicHealAurasTick()</a>.</p>

</div>
</div>
<a id="a334378fa304471045fd273f4d845c8dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a334378fa304471045fd273f4d845c8dd">&#9670;&nbsp;</a></span>m_canBeRecalculated</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> AuraEffect::m_canBeRecalculated</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00138">138</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00451">CalculateAmount()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00070">CanBeRecalculated()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00058">SetAmount()</a>, and <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00071">SetCanBeRecalculated()</a>.</p>

</div>
</div>
<a id="a3f9c2c6496be1ffad249825f86074def"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f9c2c6496be1ffad249825f86074def">&#9670;&nbsp;</a></span>m_casterLevel</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> AuraEffect::m_casterLevel</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00119">119</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00382">AuraEffect()</a>, and <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00102">GetCasterLevel()</a>.</p>

</div>
</div>
<a id="a256fe55e1c441e5dcc7c33abb4222e69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a256fe55e1c441e5dcc7c33abb4222e69">&#9670;&nbsp;</a></span>m_channelData</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/dc5/struct_channel_target_data.html">ChannelTargetData</a>* AuraEffect::m_channelData</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00129">129</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00382">AuraEffect()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05861">HandlePeriodicTriggerSpellAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06157">HandlePeriodicTriggerSpellWithValueAuraTick()</a>, and <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00404">~AuraEffect()</a>.</p>

</div>
</div>
<a id="af7eff5d08a22189f99f66695367ae250"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7eff5d08a22189f99f66695367ae250">&#9670;&nbsp;</a></span>m_critChance</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float AuraEffect::m_critChance</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00121">121</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00100">GetCritChance()</a>, and <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00101">SetCritChance()</a>.</p>

</div>
</div>
<a id="a355d61580194626ea54b22ff9a3ac96a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a355d61580194626ea54b22ff9a3ac96a">&#9670;&nbsp;</a></span>m_effIndex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/df6/my__global_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> AuraEffect::m_effIndex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00137">137</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00451">CalculateAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00586">CalculatePeriodic()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00446">GetAuraType()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00049">GetEffIndex()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00436">GetMiscValueB()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04980">HandleAuraDummy()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05599">HandleAuraLinked()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05399">HandleChannelDeathItem()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06454">HandlePeriodicHealAurasTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06329">HandlePeriodicHealthLeechAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06157">HandlePeriodicTriggerSpellWithValueAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06801">HandleProcTriggerSpellWithValueAuraProc()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01076">HasSpellClassMask()</a>, and <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01062">IsAffectedOnSpell()</a>.</p>

</div>
</div>
<a id="acec00491f0ec7f7c68d6a25d85b5b53f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acec00491f0ec7f7c68d6a25d85b5b53f">&#9670;&nbsp;</a></span>m_isAuraEnabled</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> AuraEffect::m_isAuraEnabled</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00127">127</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00056">GetAmount()</a>, and <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00110">SetEnabled()</a>.</p>

</div>
</div>
<a id="ad6931b2764b92bc6c2a20b092c011f0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6931b2764b92bc6c2a20b092c011f0a">&#9670;&nbsp;</a></span>m_isPeriodic</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/df6/my__global_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> AuraEffect::m_isPeriodic</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00139">139</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00586">CalculatePeriodic()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00084">IsPeriodic()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00085">SetPeriodic()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00889">Update()</a>, and <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00912">UpdatePeriodic()</a>.</p>

</div>
</div>
<a id="a5fa9f61c77274c75e6f3d8222142ab4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fa9f61c77274c75e6f3d8222142ab4e">&#9670;&nbsp;</a></span>m_oldAmount</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> AuraEffect::m_oldAmount</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00126">126</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00108">GetOldAmount()</a>, and <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00109">SetOldAmount()</a>.</p>

</div>
</div>
<a id="a8e00da47192a4d1c9139b037d07d565b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e00da47192a4d1c9139b037d07d565b">&#9670;&nbsp;</a></span>m_pctMods</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float AuraEffect::m_pctMods</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00122">122</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00571">CalculatePeriodicData()</a>, and <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00104">GetPctMods()</a>.</p>

</div>
</div>
<a id="a2d9b475cbf04d8597953802e1accc938"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d9b475cbf04d8597953802e1accc938">&#9670;&nbsp;</a></span>m_periodicTimer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d35/_define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> AuraEffect::m_periodicTimer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00133">133</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00586">CalculatePeriodic()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00060">GetPeriodicTimer()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00081">ResetPeriodic()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00061">SetPeriodicTimer()</a>, and <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00889">Update()</a>.</p>

</div>
</div>
<a id="ac4df84854746b8de74f64e2abfec76c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4df84854746b8de74f64e2abfec76c1">&#9670;&nbsp;</a></span>m_spellInfo</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d7d/class_spell_info.html">SpellInfo</a> <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a>* <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> AuraEffect::m_spellInfo</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00115">115</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00451">CalculateAmount()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00586">CalculatePeriodic()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00571">CalculatePeriodicData()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01167">CleanupTriggeredSpells()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00446">GetAuraType()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00431">GetId()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00441">GetMiscValue()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00436">GetMiscValueB()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00047">GetSpellInfo()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04980">HandleAuraDummy()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05599">HandleAuraLinked()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l03849">HandleAuraModDispelImmunity()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01828">HandleAuraModShapeshift()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05459">HandleFarSight()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l04121">HandleModTotalPercentStat()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06190">HandlePeriodicDamageAurasTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06703">HandlePeriodicEnergizeAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06454">HandlePeriodicHealAurasTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06329">HandlePeriodicHealthLeechAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06596">HandlePeriodicManaLeechAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05861">HandlePeriodicTriggerSpellAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06157">HandlePeriodicTriggerSpellWithValueAuraTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01076">HasSpellClassMask()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01062">IsAffectedOnSpell()</a>, and <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l01081">SendTickImmune()</a>.</p>

</div>
</div>
<a id="a25ce25c5ff12969bd62d0547c48b5753"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25ce25c5ff12969bd62d0547c48b5753">&#9670;&nbsp;</a></span>m_spellmod</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d39/struct_spell_modifier.html">SpellModifier</a>* AuraEffect::m_spellmod</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00131">131</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00791">ApplySpellMod()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00676">CalculateSpellMod()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00045">GetSpellModifier()</a>, and <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00404">~AuraEffect()</a>.</p>

</div>
</div>
<a id="ab8c7fb50eac3482a162cbbacd64f1625"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8c7fb50eac3482a162cbbacd64f1625">&#9670;&nbsp;</a></span>m_tickNumber</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d35/_define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> AuraEffect::m_tickNumber</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00135">135</a> of file <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00586">CalculatePeriodic()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00079">GetTickNumber()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l06190">HandlePeriodicDamageAurasTick()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l05861">HandlePeriodicTriggerSpellAuraTick()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00081">ResetPeriodic()</a>, <a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html#l00082">ResetTicks()</a>, <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00889">Update()</a>, and <a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html#l00912">UpdatePeriodic()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/server/game/Spells/Auras/<a class="el" href="../../db/d82/_spell_aura_effects_8h_source.html">SpellAuraEffects.h</a></li>
<li>src/server/game/Spells/Auras/<a class="el" href="../../dc/d3c/_spell_aura_effects_8cpp_source.html">SpellAuraEffects.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
