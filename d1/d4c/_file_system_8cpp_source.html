<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Azerotcore-wotlk: deps/g3dlite/source/FileSystem.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Azerotcore-wotlk
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_94a36784afa54c0b50996002372b429e.html">deps</a></li><li class="navelem"><a class="el" href="../../dir_1a26d17b2244c39687b699ce717a254c.html">g3dlite</a></li><li class="navelem"><a class="el" href="../../dir_f717d890d6194d9ff7486f2d91bd2e1b.html">source</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">FileSystem.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d1/d4c/_file_system_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160; </div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/d58/_file_system_8h.html">G3D/FileSystem.h</a>&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d78/_system_8h.html">G3D/System.h</a>&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/d9e/stringutils_8h.html">G3D/stringutils.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/dd3/fileutils_8h.html">G3D/fileutils.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &lt;sys/stat.h&gt;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;sys/types.h&gt;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#if _HAVE_ZIP </span><span class="comment">/* G3DFIX: Use ZIP-library only if defined */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">    #include &quot;zip.h&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/d64/g3dfnmatch_8h.html">G3D/g3dfnmatch.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/d46/_binary_input_8h.html">G3D/BinaryInput.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/da8/_binary_output_8h.html">G3D/BinaryOutput.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#ifdef G3D_WINDOWS</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    <span class="comment">// Needed for _getcwd</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#   include &lt;direct.h&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    <span class="comment">// Needed for _findfirst</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#   include &lt;io.h&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#  ifdef __MINGW32__</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#    define stat64 stat</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#  else</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#    define stat64 _stat64</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#  endif</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#   include &lt;<a class="code" href="../../d7/da9/dirent_8h.html">dirent.h</a>&gt;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#   include &lt;fnmatch.h&gt;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#   include &lt;unistd.h&gt;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="../../d1/d4c/_file_system_8cpp.html#a300f297d84aa903d52cc236608f854c3">   37</a></span>&#160;<span class="preprocessor">#   define _getcwd getcwd</span></div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="../../d1/d4c/_file_system_8cpp.html#a2ac0f0c422c4f69864f72ed959d099d8">   38</a></span>&#160;<span class="preprocessor">#   define _stat stat</span></div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="../../d1/d4c/_file_system_8cpp.html#a4e0be90a3757e352f42612d09a7d1aa5">   39</a></span>&#160;<span class="preprocessor">#   define stricmp strcasecmp </span></div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="../../d1/d4c/_file_system_8cpp.html#a16a19b1831112e876b010468ec15916f">   40</a></span>&#160;<span class="preprocessor">#   define strnicmp strncasecmp </span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="keyword">namespace </span><a class="code" href="../../df/de2/namespace_g3_d.html">G3D</a> {</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="../../df/de2/namespace_g3_d.html#a2c7d70e92321a763dcdc34c1c761cc97">   45</a></span>&#160;<span class="keyword">static</span> <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html">FileSystem</a>* <a class="code" href="../../df/de2/namespace_g3_d.html#a2c7d70e92321a763dcdc34c1c761cc97">common</a> = <a class="code" href="../../d9/d33/jemalloc__internal_8h.html#ae89ee89f41328ac0ade1e3e26c103570">NULL</a>;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<a class="code" href="../../dd/da8/class_g3_d_1_1_g_mutex.html">GMutex</a> <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a15c12e3683c7a0d972533ab42220c3ea">FileSystem::mutex</a>;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="../../db/d41/class_g3_d_1_1_file_system.html#a4ddcde64d6c9990145fd11a2d7faecbc">   49</a></span>&#160;<a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html">FileSystem</a>&amp; <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a4ddcde64d6c9990145fd11a2d7faecbc">FileSystem::instance</a>() {</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a8d244d19a57d756ca7051686aeb76942">init</a>();</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keywordflow">return</span> *<a class="code" href="../../df/de2/namespace_g3_d.html#a2c7d70e92321a763dcdc34c1c761cc97">common</a>;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;}</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="../../db/d41/class_g3_d_1_1_file_system.html#a8d244d19a57d756ca7051686aeb76942">   55</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a8d244d19a57d756ca7051686aeb76942">FileSystem::init</a>() {</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../df/de2/namespace_g3_d.html#a2c7d70e92321a763dcdc34c1c761cc97">common</a> == <a class="code" href="../../d9/d33/jemalloc__internal_8h.html#ae89ee89f41328ac0ade1e3e26c103570">NULL</a>) {</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <a class="code" href="../../df/de2/namespace_g3_d.html#a2c7d70e92321a763dcdc34c1c761cc97">common</a> = <span class="keyword">new</span> <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a3a2af1883eed5c451aa40e07d2bfac17">FileSystem</a>();</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    }</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;}</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="../../db/d41/class_g3_d_1_1_file_system.html#a6f95070bc63cddf8a79972ceaa10cffe">   62</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a6f95070bc63cddf8a79972ceaa10cffe">FileSystem::cleanup</a>() {</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../df/de2/namespace_g3_d.html#a2c7d70e92321a763dcdc34c1c761cc97">common</a> != <a class="code" href="../../d9/d33/jemalloc__internal_8h.html#ae89ee89f41328ac0ade1e3e26c103570">NULL</a>) {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <span class="keyword">delete</span> <a class="code" href="../../df/de2/namespace_g3_d.html#a2c7d70e92321a763dcdc34c1c761cc97">common</a>;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <a class="code" href="../../df/de2/namespace_g3_d.html#a2c7d70e92321a763dcdc34c1c761cc97">common</a> = <a class="code" href="../../d9/d33/jemalloc__internal_8h.html#ae89ee89f41328ac0ade1e3e26c103570">NULL</a>;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    }</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;}</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="../../db/d41/class_g3_d_1_1_file_system.html#a3a2af1883eed5c451aa40e07d2bfac17">   69</a></span>&#160;<a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a3a2af1883eed5c451aa40e07d2bfac17">FileSystem::FileSystem</a>() : m_cacheLifetime(10) {}</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html#aa227ac15ff51cbfcb7e8768a460f4e77">   73</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html#aa227ac15ff51cbfcb7e8768a460f4e77">FileSystem::Dir::contains</a>(<span class="keyword">const</span> std::string&amp; <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>, <span class="keywordtype">bool</span> caseSensitive)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html#a7f7a0cde2d33203ca61afbc0814295a2">nodeArray</a>.size(); ++i) {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <span class="keywordflow">if</span> (caseSensitive) {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a> == <a class="code" href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html#a7f7a0cde2d33203ca61afbc0814295a2">nodeArray</a>[i].name) {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;            }</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d1/d4c/_file_system_8cpp.html#a4e0be90a3757e352f42612d09a7d1aa5">stricmp</a>(<a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.c_str(), <a class="code" href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html#a7f7a0cde2d33203ca61afbc0814295a2">nodeArray</a>[i].name.c_str()) == 0) {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        }</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    }</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;}</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    </div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html#a8f752fbbc82ea53d9e2e64ae5c9d52cb">   88</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html#a8f752fbbc82ea53d9e2e64ae5c9d52cb">FileSystem::Dir::computeZipListing</a>(<span class="keyword">const</span> std::string&amp; zipfile, <span class="keyword">const</span> std::string&amp; _pathInsideZipfile) {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor">#if _HAVE_ZIP </span><span class="comment">/* G3DFIX: Use ZIP-library only if defined */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keyword">const</span> std::string&amp; pathInsideZipfile = <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a42e350854634e96375f59bb4f23a3906">FilePath::canonicalize</a>(_pathInsideZipfile);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keyword">struct </span>zip* <a class="code" href="../../df/de2/namespace_g3_d.html#a05e047033db3919db794d0f77e38797f">z</a> = zip_open( <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a3194a8d19a3f0d7ddc2794f33939f15d">FilePath::removeTrailingSlash</a>(zipfile).c_str(), ZIP_CHECKCONS, <a class="code" href="../../d9/d33/jemalloc__internal_8h.html#ae89ee89f41328ac0ade1e3e26c103570">NULL</a> );</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="../../d3/d67/debug_assert_8h.html#adb3cef18983da8440d55b7557f83358c">debugAssert</a>(<a class="code" href="../../df/de2/namespace_g3_d.html#a05e047033db3919db794d0f77e38797f">z</a>);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a501bb1bb2f0cc5706178ed237958e73b">count</a> = zip_get_num_files( <a class="code" href="../../df/de2/namespace_g3_d.html#a05e047033db3919db794d0f77e38797f">z</a> );</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <a class="code" href="../../de/dbb/class_g3_d_1_1_set.html">Set&lt;std::string&gt;</a> alreadyAdded;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a501bb1bb2f0cc5706178ed237958e73b">count</a>; ++i) {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keyword">struct </span>zip_stat info;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        zip_stat_init( &amp;info );    <span class="comment">// TODO: Docs unclear if zip_stat_init is required.</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        zip_stat_index( <a class="code" href="../../df/de2/namespace_g3_d.html#a05e047033db3919db794d0f77e38797f">z</a>, i, ZIP_FL_NOCASE, &amp;info );</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="comment">// Fully-qualified name of a file inside zipfile</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        std::string <a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaab068931cc450442b63f5b3d276ea4297">name</a> = <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a42e350854634e96375f59bb4f23a3906">FilePath::canonicalize</a>(info.name);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../df/de2/namespace_g3_d.html#a4f9cce2b618dc4aa9da295eb3a0f9abf">beginsWith</a>(<a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaab068931cc450442b63f5b3d276ea4297">name</a>, pathInsideZipfile)) {</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            <span class="comment">// We found something inside the directory we were looking for,</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            <span class="comment">// so the directory itself must exist</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a56c5b4a91612b3f693f1ace3c1540629">exists</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            <span class="comment">// For building the cached directory listing, extract only elements that do not contain </span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            <span class="comment">// additional subdirectories.</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            <span class="keywordtype">size_t</span> start = pathInsideZipfile.size();</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaab068931cc450442b63f5b3d276ea4297">name</a>.length() &gt; start) &amp;&amp; <a class="code" href="../../df/de2/namespace_g3_d.html#ac04d920621daeb663fa63bfba7ca1192">isSlash</a>(<a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaab068931cc450442b63f5b3d276ea4297">name</a>[start])) {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                ++start;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <span class="keywordtype">size_t</span> end = <a class="code" href="../../df/de2/namespace_g3_d.html#a7bffa4b07bdf42ee62766b992f2553c7">findSlash</a>(<a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaab068931cc450442b63f5b3d276ea4297">name</a>, start);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            <span class="keywordflow">if</span> (end == std::string::npos) {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                <span class="comment">// There are no more slashes; add this name</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                <a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaab068931cc450442b63f5b3d276ea4297">name</a> = <a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaab068931cc450442b63f5b3d276ea4297">name</a>.substr(start);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                <span class="keywordflow">if</span> (alreadyAdded.<a class="code" href="../../de/dbb/class_g3_d_1_1_set.html#a5763cab7e9f6b71548623487fe083536">insert</a>(<a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaab068931cc450442b63f5b3d276ea4297">name</a>)) {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                    <a class="code" href="../../d4/d71/class_g3_d_1_1_file_system_1_1_entry.html">Entry</a>&amp; e = nodeArray.next();</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                    e.<a class="code" href="../../d4/d71/class_g3_d_1_1_file_system_1_1_entry.html#a188ec3e4aa91591e5e5b88699a4d2cf2">name</a> = <a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaab068931cc450442b63f5b3d276ea4297">name</a>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                    e.<a class="code" href="../../d4/d71/class_g3_d_1_1_file_system_1_1_entry.html#af69822c22e292304165f74206bc727a6">type</a> = <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#ada238c53a1dedf92f5887f9eba5b0882aa5f6c78fca435625aab0041655a9ac61">FILE_TYPE</a>;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                }</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                <span class="comment">// There are more slashes, indicating that this is a directory</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                <a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaab068931cc450442b63f5b3d276ea4297">name</a> = <a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaab068931cc450442b63f5b3d276ea4297">name</a>.substr(start, end);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                <span class="keywordflow">if</span> (alreadyAdded.<a class="code" href="../../de/dbb/class_g3_d_1_1_set.html#a5763cab7e9f6b71548623487fe083536">insert</a>(<a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaab068931cc450442b63f5b3d276ea4297">name</a>)) {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                    <a class="code" href="../../d4/d71/class_g3_d_1_1_file_system_1_1_entry.html">Entry</a>&amp; e = nodeArray.next();                    </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                    e.<a class="code" href="../../d4/d71/class_g3_d_1_1_file_system_1_1_entry.html#a188ec3e4aa91591e5e5b88699a4d2cf2">name</a> = <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a3194a8d19a3f0d7ddc2794f33939f15d">FilePath::removeTrailingSlash</a>(<a class="code" href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaab068931cc450442b63f5b3d276ea4297">name</a>);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                    e.<a class="code" href="../../d4/d71/class_g3_d_1_1_file_system_1_1_entry.html#af69822c22e292304165f74206bc727a6">type</a> = <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#ada238c53a1dedf92f5887f9eba5b0882a172bb757b3924d9f4ba7c1d979dc6aea">DIR_TYPE</a>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                }</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            }</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        }</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    zip_close(<a class="code" href="../../df/de2/namespace_g3_d.html#a05e047033db3919db794d0f77e38797f">z</a>);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="../../df/de2/namespace_g3_d.html#a05e047033db3919db794d0f77e38797f">z</a> = <a class="code" href="../../d9/d33/jemalloc__internal_8h.html#ae89ee89f41328ac0ade1e3e26c103570">NULL</a>;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    (void)zipfile;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    (void)_pathInsideZipfile;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;}</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="../../db/d41/class_g3_d_1_1_file_system.html#af25ea408886cd8f04e5479620b68ab49">  147</a></span>&#160;<a class="code" href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html">FileSystem::Dir</a>&amp; <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#af25ea408886cd8f04e5479620b68ab49">FileSystem::getContents</a>(<span class="keyword">const</span> std::string&amp; path, <span class="keywordtype">bool</span> forceUpdate) {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keyword">const</span> std::string&amp; key = </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="preprocessor">#   if defined(G3D_WINDOWS)</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a42e350854634e96375f59bb4f23a3906">FilePath::canonicalize</a>(<a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a3194a8d19a3f0d7ddc2794f33939f15d">FilePath::removeTrailingSlash</a>(<a class="code" href="../../df/de2/namespace_g3_d.html#aa3b94c92cc334739473c9b295923ffce">toLower</a>(<a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a42e350854634e96375f59bb4f23a3906">FilePath::canonicalize</a>(<a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#af6356494d349c39c04b919acc4e35638">resolve</a>(path)))));</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="preprocessor">#   else</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a42e350854634e96375f59bb4f23a3906">FilePath::canonicalize</a>(<a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a3194a8d19a3f0d7ddc2794f33939f15d">FilePath::removeTrailingSlash</a>(<a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a42e350854634e96375f59bb4f23a3906">FilePath::canonicalize</a>(<a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#af6356494d349c39c04b919acc4e35638">resolve</a>(path))));</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="preprocessor">#   endif</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <a class="code" href="../../df/de2/namespace_g3_d.html#ad49e47c89967bad86fea21371fbceaa5">RealTime</a> now = <a class="code" href="../../d6/d54/class_g3_d_1_1_system.html#adf8d5720adab77d7b1b40c455750033d">System::time</a>();</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <a class="code" href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html">Dir</a>&amp; dir = <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a215d0a7663d0c04ad5f19091f9b38e63">m_cache</a>.getCreate(key);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160; </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">if</span> ((now &gt; dir.<a class="code" href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html#ae832db4aad192b2fa2e6a6c50773d585">lastChecked</a> + <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a740cf4deaa41b0ab8364e6cdaa7a3181">cacheLifetime</a>()) || forceUpdate) {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        dir = <a class="code" href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html">Dir</a>();</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="comment">// Out of date: update</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        dir.<a class="code" href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html#ae832db4aad192b2fa2e6a6c50773d585">lastChecked</a> = now;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="preprocessor">#       ifdef G3D_WINDOWS</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            <span class="comment">// On windows, we have to use GetFileAttributes (http://msdn.microsoft.com/en-us/library/aa364944(v=vs.85).aspx) instead of </span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            <span class="comment">// stat in order to work with network shares</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            <span class="keyword">const</span> DWORD st = GetFileAttributesA(key.c_str());</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a56c5b4a91612b3f693f1ace3c1540629">exists</a> = (st != INVALID_FILE_ATTRIBUTES);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#aac0f8bfdaa8fe8f0dc7fc1a2930a4ab6">isDirectory</a> = (st &amp; FILE_ATTRIBUTE_DIRECTORY) != 0;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="preprocessor">#       else</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            <span class="keyword">struct </span><a class="code" href="../../d1/d4c/_file_system_8cpp.html#a2ac0f0c422c4f69864f72ed959d099d8">_stat</a> st;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a56c5b4a91612b3f693f1ace3c1540629">exists</a> = <a class="code" href="../../d1/d4c/_file_system_8cpp.html#a2ac0f0c422c4f69864f72ed959d099d8">_stat</a>(key.c_str(), &amp;st) != -1;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#aac0f8bfdaa8fe8f0dc7fc1a2930a4ab6">isDirectory</a> = (st.st_mode &amp; S_IFDIR) != 0;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="preprocessor">#       endif</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="comment">// Does this path exist on the real filesystem?</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a56c5b4a91612b3f693f1ace3c1540629">exists</a> &amp;&amp; <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#aac0f8bfdaa8fe8f0dc7fc1a2930a4ab6">isDirectory</a>) {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160; </div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            <span class="comment">// Is this path actually a directory?</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#aac0f8bfdaa8fe8f0dc7fc1a2930a4ab6">isDirectory</a>) {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                dir.<a class="code" href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html#ac548d08a5467f04fab5b41bc8327fc3a">exists</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                <span class="comment">// Update contents</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="preprocessor">#               ifdef G3D_WINDOWS</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                    <span class="keyword">const</span> std::string&amp; filespec = <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a5a92f635d24400cd4084fe42eb564c11">FilePath::concat</a>(key, <span class="stringliteral">&quot;*&quot;</span>);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                    <span class="keyword">struct </span>_finddata_t <a class="code" href="../../da/d5c/structfileinfo.html">fileinfo</a>;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                    <a class="code" href="../../d1/db8/jemalloc_2include_2msvc__compat_2_c99_2stdint_8h.html#abd3131a20f4053d808d4277db3e39a23">intptr_t</a> handle = _findfirst(filespec.c_str(), &amp;<a class="code" href="../../da/d5c/structfileinfo.html">fileinfo</a>);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                    <a class="code" href="../../d3/d67/debug_assert_8h.html#adb3cef18983da8440d55b7557f83358c">debugAssert</a>(handle != -1);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                    <span class="keywordtype">int</span> <a class="code" href="../../df/d60/namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a> = 0;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                        <span class="keywordflow">if</span> ((strcmp(<a class="code" href="../../da/d5c/structfileinfo.html">fileinfo</a>.<a class="code" href="../../da/d5c/structfileinfo.html#aa230fad5128bb37a7fe1c694e6930edb">name</a>, <span class="stringliteral">&quot;.&quot;</span>) != 0) &amp;&amp; (strcmp(<a class="code" href="../../da/d5c/structfileinfo.html">fileinfo</a>.<a class="code" href="../../da/d5c/structfileinfo.html#aa230fad5128bb37a7fe1c694e6930edb">name</a>, <span class="stringliteral">&quot;..&quot;</span>) != 0)) {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                            <a class="code" href="../../d4/d71/class_g3_d_1_1_file_system_1_1_entry.html">Entry</a>&amp; e = dir.<a class="code" href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html#a7f7a0cde2d33203ca61afbc0814295a2">nodeArray</a>.next();</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                            e.<a class="code" href="../../d4/d71/class_g3_d_1_1_file_system_1_1_entry.html#a188ec3e4aa91591e5e5b88699a4d2cf2">name</a> = <a class="code" href="../../da/d5c/structfileinfo.html">fileinfo</a>.<a class="code" href="../../da/d5c/structfileinfo.html#aa230fad5128bb37a7fe1c694e6930edb">name</a>;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                            <span class="keywordflow">if</span> ((<a class="code" href="../../da/d5c/structfileinfo.html">fileinfo</a>.attrib &amp; _A_SUBDIR) != 0) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                                e.<a class="code" href="../../d4/d71/class_g3_d_1_1_file_system_1_1_entry.html#af69822c22e292304165f74206bc727a6">type</a> = <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#ada238c53a1dedf92f5887f9eba5b0882a172bb757b3924d9f4ba7c1d979dc6aea">DIR_TYPE</a>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                                e.<a class="code" href="../../d4/d71/class_g3_d_1_1_file_system_1_1_entry.html#af69822c22e292304165f74206bc727a6">type</a> = <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#ada238c53a1dedf92f5887f9eba5b0882aa5f6c78fca435625aab0041655a9ac61">FILE_TYPE</a>;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                            }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                        }</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                        <a class="code" href="../../df/d60/namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a> = _findnext(handle, &amp;<a class="code" href="../../da/d5c/structfileinfo.html">fileinfo</a>);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                    } <span class="keywordflow">while</span> (<a class="code" href="../../df/d60/namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a> == 0);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                    _findclose(handle);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="preprocessor">#               else</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                    <a class="code" href="../../d9/d31/struct_d_i_r.html">DIR</a>* listing = <a class="code" href="../../d7/da9/dirent_8h.html#a56af8d3cfb4a2b2f44e20b276db71f2a">opendir</a>(key.c_str());</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                    <a class="code" href="../../d3/d67/debug_assert_8h.html#af7e8ca29ffa4af20db0de5a93e1b81e9">debugAssertM</a>(listing, <span class="stringliteral">&quot;opendir failed on &#39;&quot;</span> + key + <span class="stringliteral">&quot;&#39;&quot;</span>);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                    <span class="keyword">struct </span><a class="code" href="../../d5/de2/structdirent.html">dirent</a>* entry = <a class="code" href="../../d7/da9/dirent_8h.html#aff48ec2514bda89769c968c66db181f3">readdir</a>(listing);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                    <span class="keywordflow">while</span> (entry != <a class="code" href="../../d9/d33/jemalloc__internal_8h.html#ae89ee89f41328ac0ade1e3e26c103570">NULL</a>) {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                        <span class="keywordflow">if</span> ((strcmp(entry-&gt;<a class="code" href="../../d5/de2/structdirent.html#a1450b4488b7067c7dc9d627b61fd4aa1">d_name</a>, <span class="stringliteral">&quot;..&quot;</span>) != 0) &amp;&amp; (strcmp(entry-&gt;<a class="code" href="../../d5/de2/structdirent.html#a1450b4488b7067c7dc9d627b61fd4aa1">d_name</a>, <span class="stringliteral">&quot;.&quot;</span>) != 0)) {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                            <a class="code" href="../../d4/d71/class_g3_d_1_1_file_system_1_1_entry.html">Entry</a>&amp; e = dir.<a class="code" href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html#a7f7a0cde2d33203ca61afbc0814295a2">nodeArray</a>.next();</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                            e.<a class="code" href="../../d4/d71/class_g3_d_1_1_file_system_1_1_entry.html#a188ec3e4aa91591e5e5b88699a4d2cf2">name</a> = entry-&gt;<a class="code" href="../../d5/de2/structdirent.html#a1450b4488b7067c7dc9d627b61fd4aa1">d_name</a>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="preprocessor">#                           ifdef _DIRENT_HAVE_D_TYPE</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                                <span class="comment">// Not all POSIX systems support this field</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                                <span class="comment">// http://www.delorie.com/gnu/docs/glibc/libc_270.html</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                                <span class="keywordflow">switch</span> (entry-&gt;d_type) {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                                <span class="keywordflow">case</span> DT_DIR:</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                                    e.<a class="code" href="../../d4/d71/class_g3_d_1_1_file_system_1_1_entry.html#af69822c22e292304165f74206bc727a6">type</a> = <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#ada238c53a1dedf92f5887f9eba5b0882a172bb757b3924d9f4ba7c1d979dc6aea">DIR_TYPE</a>;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                                    </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                                <span class="keywordflow">case</span> DT_REG:</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                                    e.<a class="code" href="../../d4/d71/class_g3_d_1_1_file_system_1_1_entry.html#af69822c22e292304165f74206bc727a6">type</a> = <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#ada238c53a1dedf92f5887f9eba5b0882aa5f6c78fca435625aab0041655a9ac61">FILE_TYPE</a>;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                                    </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                                <span class="keywordflow">case</span> DT_UNKNOWN:</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                                    e.<a class="code" href="../../d4/d71/class_g3_d_1_1_file_system_1_1_entry.html#af69822c22e292304165f74206bc727a6">type</a> = <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#ada238c53a1dedf92f5887f9eba5b0882adfb0a11fa5d79ef9cdc9d5be8b4639e7">UNKNOWN</a>;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                                }</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="preprocessor">#                           endif</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                        }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                        entry = <a class="code" href="../../d7/da9/dirent_8h.html#aff48ec2514bda89769c968c66db181f3">readdir</a>(listing);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                    }</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                    <a class="code" href="../../d7/da9/dirent_8h.html#a748b9bd26c040c2ad9107c9d8c1aab42">closedir</a>(listing);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                    listing = <a class="code" href="../../d9/d33/jemalloc__internal_8h.html#ae89ee89f41328ac0ade1e3e26c103570">NULL</a>;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                    entry = <a class="code" href="../../d9/d33/jemalloc__internal_8h.html#ae89ee89f41328ac0ade1e3e26c103570">NULL</a>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="preprocessor">#               endif</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            std::string zip;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a56c5b4a91612b3f693f1ace3c1540629">exists</a> &amp;&amp; <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a05f9183810e0ce0c960707774dd658c2">isZipfile</a>(path)) {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                <span class="comment">// This is a zipfile; get its root</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                dir.<a class="code" href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html#ae158e4f868f5b26531a30da50f29c18f">isZipfile</a> = <span class="keyword">true</span>;                </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                dir.<a class="code" href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html#a8f752fbbc82ea53d9e2e64ae5c9d52cb">computeZipListing</a>(path, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a32d4f14319862edf34c9b448a6b1da2c">inZipfile</a>(path, zip)) {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                <span class="comment">// There is a zipfile somewhere in the path.  Does</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                <span class="comment">// the rest of the path exist inside the zipfile?</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                dir.<a class="code" href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html#a961a53d77498a1d7439885bafeedb9df">inZipfile</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                dir.<a class="code" href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html#a8f752fbbc82ea53d9e2e64ae5c9d52cb">computeZipListing</a>(zip, path.substr(zip.length() + 1));</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            }</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        }        </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">return</span> dir;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;}</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160; </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno"><a class="line" href="../../db/d41/class_g3_d_1_1_file_system.html#ad3f1fa08390925076f71fe931ca696c2">  261</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#ad3f1fa08390925076f71fe931ca696c2">FileSystem::_inZipfile</a>(<span class="keyword">const</span> std::string&amp; _path, std::string&amp; <a class="code" href="../../df/de2/namespace_g3_d.html#a05e047033db3919db794d0f77e38797f">z</a>) {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keyword">const</span> std::string&amp; path = <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a15073b5f53ae1789e3351292c841980c">FilePath::expandEnvironmentVariables</a>(_path);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; </div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="comment">// Reject trivial cases before parsing</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; </div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="comment">// Look at all sub-paths containing periods.</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="comment">// For each, ask if it is a zipfile.</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordtype">size_t</span> current = 0;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    current = path.find(<span class="charliteral">&#39;.&#39;</span>, current);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">while</span> (current != std::string::npos) {</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="comment">// xxxxx/foo.zip/yyyyy</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        current = path.find(<span class="charliteral">&#39;.&#39;</span>, current);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="comment">// Look forward for the next slash</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <span class="keywordtype">size_t</span> s = <a class="code" href="../../df/de2/namespace_g3_d.html#a7bffa4b07bdf42ee62766b992f2553c7">findSlash</a>(path, current);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <span class="keywordflow">if</span> (s == std::string::npos) {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            <span class="comment">// No more slashes</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <a class="code" href="../../df/de2/namespace_g3_d.html#a05e047033db3919db794d0f77e38797f">z</a> = path.substr(0, s); </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#aac82a07c9a9b2b9e73c161f1461f93a5">_isZipfile</a>(<a class="code" href="../../df/de2/namespace_g3_d.html#a05e047033db3919db794d0f77e38797f">z</a>)) {</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        }</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        current = s + 1;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    }</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160; </div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <a class="code" href="../../df/de2/namespace_g3_d.html#a05e047033db3919db794d0f77e38797f">z</a> = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;}</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160; </div>
<div class="line"><a name="l00296"></a><span class="lineno"><a class="line" href="../../db/d41/class_g3_d_1_1_file_system.html#aac82a07c9a9b2b9e73c161f1461f93a5">  296</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#aac82a07c9a9b2b9e73c161f1461f93a5">FileSystem::_isZipfile</a>(<span class="keyword">const</span> std::string&amp; <a class="code" href="../../d2/db4/namespaceanonymous__namespace_02_config_8cpp_03.html#a8bfa20db83fbdc4e649e394ea8d05d0d">_filename</a>) {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keyword">const</span> std::string&amp; filename = <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a42e350854634e96375f59bb4f23a3906">FilePath::canonicalize</a>(<a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a15073b5f53ae1789e3351292c841980c">FilePath::expandEnvironmentVariables</a>(<a class="code" href="../../d2/db4/namespaceanonymous__namespace_02_config_8cpp_03.html#a8bfa20db83fbdc4e649e394ea8d05d0d">_filename</a>));</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160; </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    FILE* <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a> = <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#acd416408aa1fc76c013b9875d15348a7">fopen</a>(<a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a3194a8d19a3f0d7ddc2794f33939f15d">FilePath::removeTrailingSlash</a>(filename).c_str(), <span class="stringliteral">&quot;r&quot;</span>);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a> == <a class="code" href="../../d9/d33/jemalloc__internal_8h.html#ae89ee89f41328ac0ade1e3e26c103570">NULL</a>) {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="../../df/de2/namespace_g3_d.html#aef6949de035da2287649c9db11ec3ba4">uint8</a> header[4];</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    (void)fread(header, 4, 1, <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    </div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../df/de2/namespace_g3_d.html#aef6949de035da2287649c9db11ec3ba4">uint8</a> zipHeader[4] = {0x50, 0x4b, 0x03, 0x04};</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; ++i) {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="keywordflow">if</span> (header[i] != zipHeader[i]) {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a92c404ad74d76c967f38e7aff22a44ee">fclose</a>(<a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        }</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    }</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a92c404ad74d76c967f38e7aff22a44ee">fclose</a>(<a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;}</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno"><a class="line" href="../../db/d41/class_g3_d_1_1_file_system.html#a32759e77ec5197b27f47af5207a3e7c7">  321</a></span>&#160;FILE* <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a32759e77ec5197b27f47af5207a3e7c7">FileSystem::_fopen</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d2/db4/namespaceanonymous__namespace_02_config_8cpp_03.html#a8bfa20db83fbdc4e649e394ea8d05d0d">_filename</a>, <span class="keyword">const</span> <span class="keywordtype">char</span>* mode) {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keyword">const</span> std::string&amp; filename = <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a42e350854634e96375f59bb4f23a3906">FilePath::canonicalize</a>(<a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a15073b5f53ae1789e3351292c841980c">FilePath::expandEnvironmentVariables</a>(<a class="code" href="../../d2/db4/namespaceanonymous__namespace_02_config_8cpp_03.html#a8bfa20db83fbdc4e649e394ea8d05d0d">_filename</a>));</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keywordtype">char</span>* m = mode; *m != <span class="charliteral">&#39;\0&#39;</span>; ++m) {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="keywordflow">if</span> (*m == <span class="charliteral">&#39;w&#39;</span>) {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            <span class="comment">// Purge the cache entry for the parent of this directory</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#affb5c2e7622c3da6e774488ce259aa30">_clearCache</a>(<a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a0c12f73ce508f1e1d0e8daec5fec517e">FilePath::parent</a>(<a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a0153565d510589cee3757a740c0f82c0">_resolve</a>(filename)));</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    }</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#abc0978ba2ea86c84b3786934dbe32d33">markFileUsed</a>(filename);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    return ::fopen(filename.c_str(), mode);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;}</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160; </div>
<div class="line"><a name="l00337"></a><span class="lineno"><a class="line" href="../../db/d41/class_g3_d_1_1_file_system.html#affb5c2e7622c3da6e774488ce259aa30">  337</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#affb5c2e7622c3da6e774488ce259aa30">FileSystem::_clearCache</a>(<span class="keyword">const</span> std::string&amp; _path) {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keyword">const</span> std::string&amp; path = <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a15073b5f53ae1789e3351292c841980c">FilePath::expandEnvironmentVariables</a>(_path);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160; </div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordflow">if</span> ((path == <span class="stringliteral">&quot;&quot;</span>) || <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a43f6253ca5c5a0844fc72c7bf00e2786">FilePath::isRoot</a>(path)) {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a215d0a7663d0c04ad5f19091f9b38e63">m_cache</a>.clear();</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <a class="code" href="../../d3/d92/class_g3_d_1_1_array.html">Array&lt;std::string&gt;</a> keys;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a215d0a7663d0c04ad5f19091f9b38e63">m_cache</a>.getKeys(keys);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        <span class="keyword">const</span> std::string&amp; prefix = </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="preprocessor">#           ifdef G3D_WINDOWS</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                <a class="code" href="../../df/de2/namespace_g3_d.html#aa3b94c92cc334739473c9b295923ffce">toLower</a>(<a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a42e350854634e96375f59bb4f23a3906">FilePath::canonicalize</a>(<a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a3194a8d19a3f0d7ddc2794f33939f15d">FilePath::removeTrailingSlash</a>(<a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a0153565d510589cee3757a740c0f82c0">_resolve</a>(path))));</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="preprocessor">#           else</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a42e350854634e96375f59bb4f23a3906">FilePath::canonicalize</a>(<a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a3194a8d19a3f0d7ddc2794f33939f15d">FilePath::removeTrailingSlash</a>(<a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a0153565d510589cee3757a740c0f82c0">_resolve</a>(path)));</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="preprocessor">#           endif</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <span class="keyword">const</span> std::string&amp; prefixSlash = prefix + <span class="stringliteral">&quot;/&quot;</span>;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160; </div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; keys.<a class="code" href="../../d3/d92/class_g3_d_1_1_array.html#ab0008321250181c65ffe7f06500caf92">size</a>(); ++k) {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            <span class="keyword">const</span> std::string&amp; key = keys[k];</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            <span class="keywordflow">if</span> ((key == prefix) || <a class="code" href="../../df/de2/namespace_g3_d.html#a4f9cce2b618dc4aa9da295eb3a0f9abf">beginsWith</a>(key, prefixSlash)) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a215d0a7663d0c04ad5f19091f9b38e63">m_cache</a>.remove(keys[k]);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            }</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        }</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    }</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;}</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno"><a class="line" href="../../db/d41/class_g3_d_1_1_file_system.html#adb1ed342fa39a9a0b05b434073e1c1b9">  364</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#adb1ed342fa39a9a0b05b434073e1c1b9">FileSystem::_setCacheLifetime</a>(<span class="keywordtype">float</span> t) {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a9f6174899a0e7baca0163d1a0c9f44d7">m_cacheLifetime</a> = t;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;}</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno"><a class="line" href="../../db/d41/class_g3_d_1_1_file_system.html#ad28e358545724a0b6bc8c37d961b4d65">  369</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#ad28e358545724a0b6bc8c37d961b4d65">FileSystem::_createDirectory</a>(<span class="keyword">const</span> std::string&amp; _dir) {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keyword">const</span> std::string&amp; dir = <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a15073b5f53ae1789e3351292c841980c">FilePath::expandEnvironmentVariables</a>(_dir);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160; </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordflow">if</span> (dir == <span class="stringliteral">&quot;&quot;</span>) {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    std::string <a class="code" href="../../d4/d71/namespacempq.html#a9fbd3a52049cfe1e11371096a422d94e">d</a> = <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a0153565d510589cee3757a740c0f82c0">_resolve</a>(dir);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="comment">// Add a trailing / if there isn&#39;t one.</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="../../d4/d71/namespacempq.html#a9fbd3a52049cfe1e11371096a422d94e">d</a>[<a class="code" href="../../d4/d71/namespacempq.html#a9fbd3a52049cfe1e11371096a422d94e">d</a>.size() - 1]) {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;/&#39;</span>:</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;\\&#39;</span>:</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <a class="code" href="../../d4/d71/namespacempq.html#a9fbd3a52049cfe1e11371096a422d94e">d</a> += <span class="stringliteral">&quot;/&quot;</span>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    }</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="comment">// If it already exists, do nothing</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#adedffc7506d5dcecd0fbab8aeb731ed0">_exists</a>(<a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a3194a8d19a3f0d7ddc2794f33939f15d">FilePath::removeTrailingSlash</a>(<a class="code" href="../../d4/d71/namespacempq.html#a9fbd3a52049cfe1e11371096a422d94e">d</a>))) {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160; </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="comment">// Parse the name apart</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    std::string root, base, ext;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <a class="code" href="../../d3/d92/class_g3_d_1_1_array.html">Array&lt;std::string&gt;</a> path;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    std::string lead;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#accb26ae9cb00ef10fcafe16ddb8828b7">FilePath::parse</a>(<a class="code" href="../../d4/d71/namespacempq.html#a9fbd3a52049cfe1e11371096a422d94e">d</a>, root, path, base, ext);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <a class="code" href="../../d3/d67/debug_assert_8h.html#adb3cef18983da8440d55b7557f83358c">debugAssert</a>(base == <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <a class="code" href="../../d3/d67/debug_assert_8h.html#adb3cef18983da8440d55b7557f83358c">debugAssert</a>(ext == <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="comment">// Begin with an extra period so &quot;c:\&quot; becomes &quot;c:\.\&quot; after</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="comment">// appending a path and &quot;c:&quot; becomes &quot;c:.\&quot;, not root: &quot;c:\&quot;</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    std::string p = root + <span class="stringliteral">&quot;.&quot;</span>;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160; </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="comment">// Create any intermediate that doesn&#39;t exist</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; path.<a class="code" href="../../d3/d92/class_g3_d_1_1_array.html#ab0008321250181c65ffe7f06500caf92">size</a>(); ++i) {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        p += <span class="stringliteral">&quot;/&quot;</span> + path[i];</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <span class="keywordflow">if</span> (! <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#adedffc7506d5dcecd0fbab8aeb731ed0">_exists</a>(p)) {</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            <span class="comment">// Windows only requires one argument to mkdir,</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            <span class="comment">// where as unix also requires the permissions.</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="preprocessor">#           ifndef G3D_WINDOWS</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                mkdir(p.c_str(), 0777);</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="preprocessor">#           else</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                _mkdir(p.c_str());</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="preprocessor">#           endif</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        }</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    }</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#affb5c2e7622c3da6e774488ce259aa30">_clearCache</a>(<a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a0c12f73ce508f1e1d0e8daec5fec517e">FilePath::parent</a>(<a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a3194a8d19a3f0d7ddc2794f33939f15d">FilePath::removeTrailingSlash</a>(<a class="code" href="../../d4/d71/namespacempq.html#a9fbd3a52049cfe1e11371096a422d94e">d</a>)));</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;}</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno"><a class="line" href="../../db/d41/class_g3_d_1_1_file_system.html#ae04312e3fa56e9f922b7a56e4db12a24">  424</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#ae04312e3fa56e9f922b7a56e4db12a24">FileSystem::_copyFile</a>(<span class="keyword">const</span> std::string&amp; _source, <span class="keyword">const</span> std::string&amp; _dest) {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keyword">const</span> std::string&amp; source = <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a15073b5f53ae1789e3351292c841980c">FilePath::expandEnvironmentVariables</a>(_source);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keyword">const</span> std::string&amp; dest = <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a15073b5f53ae1789e3351292c841980c">FilePath::expandEnvironmentVariables</a>(_dest);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="preprocessor">#   ifdef G3D_WINDOWS</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <span class="comment">// TODO: handle case where srcPath is in a zipfile</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        CopyFileA(source.c_str(), dest.c_str(), <a class="code" href="../../d8/dec/mpq-internal_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#affb5c2e7622c3da6e774488ce259aa30">_clearCache</a>(<a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a0c12f73ce508f1e1d0e8daec5fec517e">FilePath::parent</a>(<a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a0153565d510589cee3757a740c0f82c0">_resolve</a>(dest)));</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="preprocessor">#   else</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <span class="comment">// Read it all in, then dump it out</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <a class="code" href="../../d4/d0c/class_g3_d_1_1_binary_input.html">BinaryInput</a>  in(source, <a class="code" href="../../df/de2/namespace_g3_d.html#adddfd9dd263aa8d3e2ea04a92d3aa1f9a99b43ff80d759e7de6565799f9cf1a5c">G3D_LITTLE_ENDIAN</a>);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <a class="code" href="../../df/d33/class_g3_d_1_1_binary_output.html">BinaryOutput</a> out(dest, <a class="code" href="../../df/de2/namespace_g3_d.html#adddfd9dd263aa8d3e2ea04a92d3aa1f9a99b43ff80d759e7de6565799f9cf1a5c">G3D_LITTLE_ENDIAN</a>);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        out.<a class="code" href="../../df/d33/class_g3_d_1_1_binary_output.html#a20be2de9e1d4d53dcd5d7f78882af253">writeBytes</a>(in.<a class="code" href="../../d4/d0c/class_g3_d_1_1_binary_input.html#a8e781b151046538cb833fb2c295049a8">getCArray</a>(), in.<a class="code" href="../../d4/d0c/class_g3_d_1_1_binary_input.html#a20a75bb8879abcbef199b27a5b85f843">size</a>());</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        out.<a class="code" href="../../df/d33/class_g3_d_1_1_binary_output.html#a93f77fcfa3e0431539fe93db39d5d1e6">commit</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="preprocessor">#   endif        </span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;}</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160; </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160; </div>
<div class="line"><a name="l00441"></a><span class="lineno"><a class="line" href="../../db/d41/class_g3_d_1_1_file_system.html#adedffc7506d5dcecd0fbab8aeb731ed0">  441</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#adedffc7506d5dcecd0fbab8aeb731ed0">FileSystem::_exists</a>(<span class="keyword">const</span> std::string&amp; _f, <span class="keywordtype">bool</span> trustCache, <span class="keywordtype">bool</span> caseSensitive) {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keyword">const</span> std::string&amp; <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a> = <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a15073b5f53ae1789e3351292c841980c">FilePath::expandEnvironmentVariables</a>(_f);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a43f6253ca5c5a0844fc72c7bf00e2786">FilePath::isRoot</a>(<a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>)) {</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="preprocessor">#       ifdef G3D_WINDOWS</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            <span class="keyword">const</span> std::string&amp; winname = <a class="code" href="../../df/de2/namespace_g3_d.html#aa3b94c92cc334739473c9b295923ffce">toLower</a>(<a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.substr(0, 1)) + <span class="stringliteral">&quot;:\\&quot;</span>;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            <span class="keywordflow">return</span> _drives().contains(winname);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="preprocessor">#       else</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="preprocessor">#       endif</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    }</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160; </div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keyword">const</span> std::string&amp; path = <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a3194a8d19a3f0d7ddc2794f33939f15d">FilePath::removeTrailingSlash</a>(<a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keyword">const</span> std::string&amp; parentPath = <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a0c12f73ce508f1e1d0e8daec5fec517e">FilePath::parent</a>(path);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> forceUpdate = ! trustCache;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html">Dir</a>&amp; entry = <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#af25ea408886cd8f04e5479620b68ab49">getContents</a>(parentPath, forceUpdate);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#aaedc0d7159d9bd53690c0cbccd9c147c">FilePath::containsWildcards</a>(<a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>)) {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        <span class="keywordflow">if</span> (! entry.<a class="code" href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html#ac548d08a5467f04fab5b41bc8327fc3a">exists</a>) {</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            <span class="comment">// The directory didn&#39;t exist, so neither do its contents</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        } </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160; </div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <span class="keyword">const</span> std::string&amp; pattern = <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a0661a25051c7ba81e9ed8fafe39d521f">FilePath::baseExt</a>(path);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160; </div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <span class="comment">// See if any element of entry matches the wild card</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; entry.<a class="code" href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html#a7f7a0cde2d33203ca61afbc0814295a2">nodeArray</a>.size(); ++i) {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#af013a5ec0960994f3e0fc5e9023b8007">FilePath::matches</a>(entry.<a class="code" href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html#a7f7a0cde2d33203ca61afbc0814295a2">nodeArray</a>[i].name, pattern, caseSensitive)) {</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            }</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        }</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160; </div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <span class="comment">// Could not find a match</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160; </div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="keywordflow">return</span> entry.<a class="code" href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html#ac548d08a5467f04fab5b41bc8327fc3a">exists</a> &amp;&amp; entry.<a class="code" href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html#aa227ac15ff51cbfcb7e8768a460f4e77">contains</a>(<a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a0661a25051c7ba81e9ed8fafe39d521f">FilePath::baseExt</a>(path), caseSensitive);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    }</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;}</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160; </div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160; </div>
<div class="line"><a name="l00483"></a><span class="lineno"><a class="line" href="../../db/d41/class_g3_d_1_1_file_system.html#ab181e7be8496569f2e09b1071f248324">  483</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#ab181e7be8496569f2e09b1071f248324">FileSystem::_isDirectory</a>(<span class="keyword">const</span> std::string&amp; <a class="code" href="../../d2/db4/namespaceanonymous__namespace_02_config_8cpp_03.html#a8bfa20db83fbdc4e649e394ea8d05d0d">_filename</a>) {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keyword">const</span> std::string&amp; filename = <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a15073b5f53ae1789e3351292c841980c">FilePath::expandEnvironmentVariables</a>(<a class="code" href="../../d2/db4/namespaceanonymous__namespace_02_config_8cpp_03.html#a8bfa20db83fbdc4e649e394ea8d05d0d">_filename</a>);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="comment">// TODO: work with zipfiles and cache</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d1/d4c/_file_system_8cpp.html#a2ac0f0c422c4f69864f72ed959d099d8">_stat</a> st;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a56c5b4a91612b3f693f1ace3c1540629">exists</a> = <a class="code" href="../../d1/d4c/_file_system_8cpp.html#a2ac0f0c422c4f69864f72ed959d099d8">_stat</a>(<a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a3194a8d19a3f0d7ddc2794f33939f15d">FilePath::removeTrailingSlash</a>(filename).c_str(), &amp;st) != -1;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a56c5b4a91612b3f693f1ace3c1540629">exists</a> &amp;&amp; ((st.st_mode &amp; S_IFDIR) != 0);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;}</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160; </div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160; </div>
<div class="line"><a name="l00492"></a><span class="lineno"><a class="line" href="../../db/d41/class_g3_d_1_1_file_system.html#a3e3bbc82646eda979400989fb2f034b2">  492</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a3e3bbc82646eda979400989fb2f034b2">FileSystem::_removeFile</a>(<span class="keyword">const</span> std::string&amp; path) {</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <a class="code" href="../../d3/d67/debug_assert_8h.html#aec9f6cdb1305e9da834facaf2816069d">alwaysAssertM</a>(! <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a32d4f14319862edf34c9b448a6b1da2c">inZipfile</a>(path), <span class="stringliteral">&quot;Cannot invoke removeFile() on files inside zipfiles.&quot;</span>);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <a class="code" href="../../d3/d92/class_g3_d_1_1_array.html">Array&lt;std::string&gt;</a> <a class="code" href="../../d4/d4b/deps_2_s_f_m_t_2_readme_8txt.html#aac939c3bd649f24d0faa40c551bd3da7">files</a>;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a731e77742979c9bed6cc8540a8f04d9d">getFiles</a>(path, <a class="code" href="../../d4/d4b/deps_2_s_f_m_t_2_readme_8txt.html#aac939c3bd649f24d0faa40c551bd3da7">files</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160; </div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d4/d4b/deps_2_s_f_m_t_2_readme_8txt.html#aac939c3bd649f24d0faa40c551bd3da7">files</a>.size(); ++i) {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        <span class="keyword">const</span> std::string&amp; filename = <a class="code" href="../../d4/d4b/deps_2_s_f_m_t_2_readme_8txt.html#aac939c3bd649f24d0faa40c551bd3da7">files</a>[i];</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        <span class="keywordtype">int</span> retval = ::remove(filename.c_str());</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        (void)retval;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    }</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    </div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="comment">// Remove from cache</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#affb5c2e7622c3da6e774488ce259aa30">_clearCache</a>(<a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a0c12f73ce508f1e1d0e8daec5fec517e">FilePath::parent</a>(path));</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;}</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160; </div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160; </div>
<div class="line"><a name="l00508"></a><span class="lineno"><a class="line" href="../../db/d41/class_g3_d_1_1_file_system.html#a0153565d510589cee3757a740c0f82c0">  508</a></span>&#160;std::string <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a0153565d510589cee3757a740c0f82c0">FileSystem::_resolve</a>(<span class="keyword">const</span> std::string&amp; <a class="code" href="../../d2/db4/namespaceanonymous__namespace_02_config_8cpp_03.html#a8bfa20db83fbdc4e649e394ea8d05d0d">_filename</a>, <span class="keyword">const</span> std::string&amp; _cwd) {</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keyword">const</span> std::string&amp; filename = <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a15073b5f53ae1789e3351292c841980c">FilePath::expandEnvironmentVariables</a>(<a class="code" href="../../d2/db4/namespaceanonymous__namespace_02_config_8cpp_03.html#a8bfa20db83fbdc4e649e394ea8d05d0d">_filename</a>);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="keyword">const</span> std::string&amp; cwd = <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a15073b5f53ae1789e3351292c841980c">FilePath::expandEnvironmentVariables</a>(_cwd);</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160; </div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="keywordflow">if</span> (filename.size() &gt;= 1) {</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../df/de2/namespace_g3_d.html#ac04d920621daeb663fa63bfba7ca1192">isSlash</a>(filename[0])) {</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            <span class="comment">// Already resolved</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            <span class="keywordflow">return</span> filename;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160; </div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="preprocessor">            #ifdef G3D_WINDOWS</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                <span class="keywordflow">if</span> ((filename.size() &gt;= 2) &amp;&amp; (filename[1] == <span class="charliteral">&#39;:&#39;</span>)) {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                    <span class="comment">// There is a drive spec on the front.</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                    <span class="keywordflow">if</span> ((filename.size() &gt;= 3) &amp;&amp; <a class="code" href="../../df/de2/namespace_g3_d.html#ac04d920621daeb663fa63bfba7ca1192">isSlash</a>(filename[2])) {</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                        <span class="comment">// Already fully qualified</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                        <span class="keywordflow">return</span> filename;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                        <span class="comment">// The drive spec is relative to the</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                        <span class="comment">// working directory on that drive.</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                        <a class="code" href="../../d3/d67/debug_assert_8h.html#af7e8ca29ffa4af20db0de5a93e1b81e9">debugAssertM</a>(<span class="keyword">false</span>, <span class="stringliteral">&quot;Files of the form d:path are&quot;</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                                     <span class="stringliteral">&quot; not supported (use a fully qualified&quot;</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                                     <span class="stringliteral">&quot; name).&quot;</span>);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                        <span class="keywordflow">return</span> filename;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                    }</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                }</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="preprocessor">            #endif</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        }</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    }</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160; </div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="comment">// Prepend the working directory.</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a5a92f635d24400cd4084fe42eb564c11">FilePath::concat</a>(cwd, filename);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;}</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160; </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; </div>
<div class="line"><a name="l00542"></a><span class="lineno"><a class="line" href="../../db/d41/class_g3_d_1_1_file_system.html#af51bfdb19c8df796f56626f63ec9e1ae">  542</a></span>&#160;std::string <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#af51bfdb19c8df796f56626f63ec9e1ae">FileSystem::_currentDirectory</a>() {</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> N = 2048;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordtype">char</span> <a class="code" href="../../da/d40/classbuffer.html">buffer</a>[N];</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160; </div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    (void)<a class="code" href="../../d1/d4c/_file_system_8cpp.html#a300f297d84aa903d52cc236608f854c3">_getcwd</a>(<a class="code" href="../../da/d40/classbuffer.html">buffer</a>, N);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keywordflow">return</span> std::string(<a class="code" href="../../da/d40/classbuffer.html">buffer</a>);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;}</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160; </div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160; </div>
<div class="line"><a name="l00551"></a><span class="lineno"><a class="line" href="../../df/de2/namespace_g3_d.html#a5e0f6e18f39019dbf40a9d9a684866b3">  551</a></span>&#160;<span class="keyword">static</span> <a class="code" href="../../de/dbb/class_g3_d_1_1_set.html">Set&lt;std::string&gt;</a> <a class="code" href="../../df/de2/namespace_g3_d.html#a5e0f6e18f39019dbf40a9d9a684866b3">_filesUsed</a>;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160; </div>
<div class="line"><a name="l00553"></a><span class="lineno"><a class="line" href="../../db/d41/class_g3_d_1_1_file_system.html#abc0978ba2ea86c84b3786934dbe32d33">  553</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#abc0978ba2ea86c84b3786934dbe32d33">FileSystem::markFileUsed</a>(<span class="keyword">const</span> std::string&amp; filename) {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a15c12e3683c7a0d972533ab42220c3ea">mutex</a>.<a class="code" href="../../dd/da8/class_g3_d_1_1_g_mutex.html#a1e8c37d50418feaeaf4156a80cda0abf">lock</a>();</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <a class="code" href="../../df/de2/namespace_g3_d.html#a5e0f6e18f39019dbf40a9d9a684866b3">_filesUsed</a>.<a class="code" href="../../de/dbb/class_g3_d_1_1_set.html#a5763cab7e9f6b71548623487fe083536">insert</a>(filename);</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a15c12e3683c7a0d972533ab42220c3ea">mutex</a>.<a class="code" href="../../dd/da8/class_g3_d_1_1_g_mutex.html#a3fe1a129473b931ad1f352ae7ff19d19">unlock</a>();</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;}</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160; </div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160; </div>
<div class="line"><a name="l00560"></a><span class="lineno"><a class="line" href="../../db/d41/class_g3_d_1_1_file_system.html#aa2d0186f68d106f3302e18feff6c2536">  560</a></span>&#160;<span class="keyword">const</span> <a class="code" href="../../de/dbb/class_g3_d_1_1_set.html">Set&lt;std::string&gt;</a>&amp; <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#aa2d0186f68d106f3302e18feff6c2536">FileSystem::usedFiles</a>() {</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../df/de2/namespace_g3_d.html#a5e0f6e18f39019dbf40a9d9a684866b3">_filesUsed</a>;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;}</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160; </div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160; </div>
<div class="line"><a name="l00565"></a><span class="lineno"><a class="line" href="../../db/d41/class_g3_d_1_1_file_system.html#a9582a312f50b37e7f8c041785e94b980">  565</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a9582a312f50b37e7f8c041785e94b980">FileSystem::_isNewer</a>(<span class="keyword">const</span> std::string&amp; _src, <span class="keyword">const</span> std::string&amp; _dst) {</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="keyword">const</span> std::string&amp; src = <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a15073b5f53ae1789e3351292c841980c">FilePath::expandEnvironmentVariables</a>(_src);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="keyword">const</span> std::string&amp; dst = <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a15073b5f53ae1789e3351292c841980c">FilePath::expandEnvironmentVariables</a>(_dst);</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160; </div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="comment">// TODO: work with cache and zipfiles</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d1/d4c/_file_system_8cpp.html#a2ac0f0c422c4f69864f72ed959d099d8">_stat</a> sts;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="keywordtype">bool</span> sexists = <a class="code" href="../../d1/d4c/_file_system_8cpp.html#a2ac0f0c422c4f69864f72ed959d099d8">_stat</a>(src.c_str(), &amp;sts) != -1;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160; </div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d1/d4c/_file_system_8cpp.html#a2ac0f0c422c4f69864f72ed959d099d8">_stat</a> dts;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keywordtype">bool</span> dexists = <a class="code" href="../../d1/d4c/_file_system_8cpp.html#a2ac0f0c422c4f69864f72ed959d099d8">_stat</a>(dst.c_str(), &amp;dts) != -1;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="keywordflow">return</span> sexists &amp;&amp; ((! dexists) || (sts.st_mtime &gt; dts.st_mtime));</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;}</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160; </div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160; </div>
<div class="line"><a name="l00580"></a><span class="lineno"><a class="line" href="../../db/d41/class_g3_d_1_1_file_system.html#a36e00088164b6dd1104bbd9703e18123">  580</a></span>&#160;<a class="code" href="../../df/de2/namespace_g3_d.html#a490645e193e5c5942f123ca123440fa0">int64</a> <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a36e00088164b6dd1104bbd9703e18123">FileSystem::_size</a>(<span class="keyword">const</span> std::string&amp; <a class="code" href="../../d2/db4/namespaceanonymous__namespace_02_config_8cpp_03.html#a8bfa20db83fbdc4e649e394ea8d05d0d">_filename</a>) {</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keyword">const</span> std::string&amp; filename = <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a42e350854634e96375f59bb4f23a3906">FilePath::canonicalize</a>(<a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a15073b5f53ae1789e3351292c841980c">FilePath::expandEnvironmentVariables</a>(<a class="code" href="../../d2/db4/namespaceanonymous__namespace_02_config_8cpp_03.html#a8bfa20db83fbdc4e649e394ea8d05d0d">_filename</a>));</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160; </div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="keyword">struct </span>stat64 st;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../df/d60/namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a> = stat64(filename.c_str(), &amp;st);</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    </div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../df/d60/namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a> == -1) {</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="preprocessor">#if _HAVE_ZIP </span><span class="comment">/* G3DFIX: Use ZIP-library only if defined */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        std::string zip, contents;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../df/de2/namespace_g3_d.html#ac6a9e50d8d6d5c31ade0f59f97b3eee9">zipfileExists</a>(filename, zip, contents)) {</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            <a class="code" href="../../df/de2/namespace_g3_d.html#a490645e193e5c5942f123ca123440fa0">int64</a> requiredMem;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;            </div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            <span class="keyword">struct </span>zip *<a class="code" href="../../df/de2/namespace_g3_d.html#a05e047033db3919db794d0f77e38797f">z</a> = zip_open( zip.c_str(), ZIP_CHECKCONS, <a class="code" href="../../d9/d33/jemalloc__internal_8h.html#ae89ee89f41328ac0ade1e3e26c103570">NULL</a> );</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            <a class="code" href="../../d3/d67/debug_assert_8h.html#af7e8ca29ffa4af20db0de5a93e1b81e9">debugAssertM</a>(<a class="code" href="../../df/de2/namespace_g3_d.html#a05e047033db3919db794d0f77e38797f">z</a> != <a class="code" href="../../d9/d33/jemalloc__internal_8h.html#ae89ee89f41328ac0ade1e3e26c103570">NULL</a>, zip + <span class="stringliteral">&quot;: zip open failed.&quot;</span>);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                <span class="keyword">struct </span>zip_stat info;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                zip_stat_init( &amp;info );    <span class="comment">// Docs unclear if zip_stat_init is required.</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                <span class="keywordtype">int</span> success = zip_stat( <a class="code" href="../../df/de2/namespace_g3_d.html#a05e047033db3919db794d0f77e38797f">z</a>, contents.c_str(), ZIP_FL_NOCASE, &amp;info );</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                (void) success;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                <a class="code" href="../../d3/d67/debug_assert_8h.html#af7e8ca29ffa4af20db0de5a93e1b81e9">debugAssertM</a>(success == 0, zip + <span class="stringliteral">&quot;: &quot;</span> + contents + <span class="stringliteral">&quot;: zip stat failed.&quot;</span>);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                requiredMem = info.size;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            }</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;            zip_close(<a class="code" href="../../df/de2/namespace_g3_d.html#a05e047033db3919db794d0f77e38797f">z</a>);</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            <span class="keywordflow">return</span> requiredMem;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="preprocessor">#if _HAVE_ZIP </span><span class="comment">/* G3DFIX: Use ZIP-library only if defined */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;         }</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    }</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    </div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="keywordflow">return</span> st.st_size;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;}</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160; </div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160; </div>
<div class="line"><a name="l00616"></a><span class="lineno"><a class="line" href="../../db/d41/class_g3_d_1_1_file_system.html#a6734207d2c5a9827826611987930c7d3">  616</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a6734207d2c5a9827826611987930c7d3">FileSystem::listHelper</a></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;(<span class="keyword">const</span> std::string&amp;  shortSpec,</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160; <span class="keyword">const</span> std::string&amp;  parentPath, </div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160; <a class="code" href="../../d3/d92/class_g3_d_1_1_array.html">Array&lt;std::string&gt;</a>&amp; <a class="code" href="../../df/d60/namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>, </div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160; <span class="keyword">const</span> <a class="code" href="../../d4/dde/class_g3_d_1_1_file_system_1_1_list_settings.html">ListSettings</a>&amp; <a class="code" href="../../d5/df8/structsettings.html">settings</a>) {</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160; </div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <a class="code" href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html">Dir</a>&amp; dir = <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#af25ea408886cd8f04e5479620b68ab49">getContents</a>(parentPath, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160; </div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="keywordflow">if</span> (! dir.<a class="code" href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html#ac548d08a5467f04fab5b41bc8327fc3a">exists</a>) {</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    }</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160; </div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; dir.<a class="code" href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html#a7f7a0cde2d33203ca61afbc0814295a2">nodeArray</a>.size(); ++i) {</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        <a class="code" href="../../d4/d71/class_g3_d_1_1_file_system_1_1_entry.html">Entry</a>&amp; entry = dir.<a class="code" href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html#a7f7a0cde2d33203ca61afbc0814295a2">nodeArray</a>[i];</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        <span class="comment">// See if it matches the spec</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#af013a5ec0960994f3e0fc5e9023b8007">FilePath::matches</a>(entry.<a class="code" href="../../d4/d71/class_g3_d_1_1_file_system_1_1_entry.html#a188ec3e4aa91591e5e5b88699a4d2cf2">name</a>, shortSpec, <a class="code" href="../../d5/df8/structsettings.html">settings</a>.caseSensitive)) {</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160; </div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            <span class="keywordflow">if</span> ((entry.<a class="code" href="../../d4/d71/class_g3_d_1_1_file_system_1_1_entry.html#af69822c22e292304165f74206bc727a6">type</a> == <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#ada238c53a1dedf92f5887f9eba5b0882adfb0a11fa5d79ef9cdc9d5be8b4639e7">UNKNOWN</a>) &amp;&amp; </div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                (! (<a class="code" href="../../d5/df8/structsettings.html">settings</a>.files &amp;&amp; <a class="code" href="../../d5/df8/structsettings.html">settings</a>.directories) ||</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                 <a class="code" href="../../d5/df8/structsettings.html">settings</a>.recursive)) {</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                <span class="comment">// Update the type: it is unknown and we&#39;ll need to branch onit below</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                entry.<a class="code" href="../../d4/d71/class_g3_d_1_1_file_system_1_1_entry.html#af69822c22e292304165f74206bc727a6">type</a> = <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#aac0f8bfdaa8fe8f0dc7fc1a2930a4ab6">isDirectory</a>(<a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a5a92f635d24400cd4084fe42eb564c11">FilePath::concat</a>(parentPath, entry.<a class="code" href="../../d4/d71/class_g3_d_1_1_file_system_1_1_entry.html#a188ec3e4aa91591e5e5b88699a4d2cf2">name</a>)) ? <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#ada238c53a1dedf92f5887f9eba5b0882a172bb757b3924d9f4ba7c1d979dc6aea">DIR_TYPE</a> : <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#ada238c53a1dedf92f5887f9eba5b0882aa5f6c78fca435625aab0041655a9ac61">FILE_TYPE</a>;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            }</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            </div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="../../d5/df8/structsettings.html">settings</a>.files &amp;&amp; <a class="code" href="../../d5/df8/structsettings.html">settings</a>.directories) ||</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                (<a class="code" href="../../d5/df8/structsettings.html">settings</a>.files &amp;&amp; (entry.<a class="code" href="../../d4/d71/class_g3_d_1_1_file_system_1_1_entry.html#af69822c22e292304165f74206bc727a6">type</a> == <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#ada238c53a1dedf92f5887f9eba5b0882aa5f6c78fca435625aab0041655a9ac61">FILE_TYPE</a>)) ||</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                (<a class="code" href="../../d5/df8/structsettings.html">settings</a>.directories &amp;&amp; (entry.<a class="code" href="../../d4/d71/class_g3_d_1_1_file_system_1_1_entry.html#af69822c22e292304165f74206bc727a6">type</a> == <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#ada238c53a1dedf92f5887f9eba5b0882a172bb757b3924d9f4ba7c1d979dc6aea">DIR_TYPE</a>))) {</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                </div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d5/df8/structsettings.html">settings</a>.includeParentPath) {</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                    <a class="code" href="../../df/d60/namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>.append(<a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a5a92f635d24400cd4084fe42eb564c11">FilePath::concat</a>(parentPath, entry.<a class="code" href="../../d4/d71/class_g3_d_1_1_file_system_1_1_entry.html#a188ec3e4aa91591e5e5b88699a4d2cf2">name</a>));</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                    <a class="code" href="../../df/d60/namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>.append(entry.<a class="code" href="../../d4/d71/class_g3_d_1_1_file_system_1_1_entry.html#a188ec3e4aa91591e5e5b88699a4d2cf2">name</a>);</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                }</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;            }</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        } <span class="comment">// match</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  </div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d5/df8/structsettings.html">settings</a>.recursive) {</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;            <span class="keywordflow">if</span> (entry.<a class="code" href="../../d4/d71/class_g3_d_1_1_file_system_1_1_entry.html#af69822c22e292304165f74206bc727a6">type</a> == <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#ada238c53a1dedf92f5887f9eba5b0882adfb0a11fa5d79ef9cdc9d5be8b4639e7">UNKNOWN</a>) {</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                entry.<a class="code" href="../../d4/d71/class_g3_d_1_1_file_system_1_1_entry.html#af69822c22e292304165f74206bc727a6">type</a> = <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#aac0f8bfdaa8fe8f0dc7fc1a2930a4ab6">isDirectory</a>(<a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a5a92f635d24400cd4084fe42eb564c11">FilePath::concat</a>(parentPath, entry.<a class="code" href="../../d4/d71/class_g3_d_1_1_file_system_1_1_entry.html#a188ec3e4aa91591e5e5b88699a4d2cf2">name</a>)) ? <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#ada238c53a1dedf92f5887f9eba5b0882a172bb757b3924d9f4ba7c1d979dc6aea">DIR_TYPE</a> : <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#ada238c53a1dedf92f5887f9eba5b0882aa5f6c78fca435625aab0041655a9ac61">FILE_TYPE</a>;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            }</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160; </div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;            <span class="keywordflow">if</span> (entry.<a class="code" href="../../d4/d71/class_g3_d_1_1_file_system_1_1_entry.html#af69822c22e292304165f74206bc727a6">type</a> == <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#ada238c53a1dedf92f5887f9eba5b0882a172bb757b3924d9f4ba7c1d979dc6aea">DIR_TYPE</a>) {</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a6734207d2c5a9827826611987930c7d3">listHelper</a>(shortSpec, <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a5a92f635d24400cd4084fe42eb564c11">FilePath::concat</a>(parentPath, entry.<a class="code" href="../../d4/d71/class_g3_d_1_1_file_system_1_1_entry.html#a188ec3e4aa91591e5e5b88699a4d2cf2">name</a>), <a class="code" href="../../df/d60/namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>, <a class="code" href="../../d5/df8/structsettings.html">settings</a>);</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            }</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        }</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    } <span class="comment">// for</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;}</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160; </div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160; </div>
<div class="line"><a name="l00665"></a><span class="lineno"><a class="line" href="../../db/d41/class_g3_d_1_1_file_system.html#aff3f714e12162669d5c45b66b31d5cc5">  665</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#aff3f714e12162669d5c45b66b31d5cc5">FileSystem::_list</a>(<span class="keyword">const</span> std::string&amp; _spec, <a class="code" href="../../d3/d92/class_g3_d_1_1_array.html">Array&lt;std::string&gt;</a>&amp; <a class="code" href="../../df/d60/namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>, <span class="keyword">const</span> <a class="code" href="../../d4/dde/class_g3_d_1_1_file_system_1_1_list_settings.html">ListSettings</a>&amp; <a class="code" href="../../d5/df8/structsettings.html">settings</a>) {</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="keyword">const</span> std::string&amp; spec = <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a15073b5f53ae1789e3351292c841980c">FilePath::expandEnvironmentVariables</a>(_spec);</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160; </div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="keyword">const</span> std::string&amp; shortSpec = <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a0661a25051c7ba81e9ed8fafe39d521f">FilePath::baseExt</a>(spec);</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="keyword">const</span> std::string&amp; parentPath = <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a0c12f73ce508f1e1d0e8daec5fec517e">FilePath::parent</a>(spec);</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160; </div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#a6734207d2c5a9827826611987930c7d3">listHelper</a>(shortSpec, parentPath, <a class="code" href="../../df/d60/namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>, <a class="code" href="../../d5/df8/structsettings.html">settings</a>);</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;}</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160; </div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160; </div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160; </div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="preprocessor">#ifdef G3D_WINDOWS</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="keyword">const</span> <a class="code" href="../../d3/d92/class_g3_d_1_1_array.html">Array&lt;std::string&gt;</a>&amp; FileSystem::_drives() {</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#ae3ff33d6e21d60234cb637b9b6a497e1">m_winDrive</a>.<a class="code" href="../../d3/d92/class_g3_d_1_1_array.html#ae491aa13eb36e9e00867b3ebc0985c68">length</a>() == 0) {</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        <span class="comment">// See http://msdn.microsoft.com/en-us/library/aa364975(VS.85).aspx</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> bufSize = 5000;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        <span class="keywordtype">char</span> bufData[bufSize];</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        GetLogicalDriveStringsA(bufSize, bufData);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160; </div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        <span class="comment">// Drive list is a series of NULL-terminated strings, itself terminated with a NULL.</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; bufData[i] != <span class="charliteral">&#39;\0&#39;</span>; ++i) {</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span>* thisString = bufData + i;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#ae3ff33d6e21d60234cb637b9b6a497e1">m_winDrive</a>.<a class="code" href="../../d3/d92/class_g3_d_1_1_array.html#a56183c682e174ccb813ac3bfb2657376">append</a>(<a class="code" href="../../df/de2/namespace_g3_d.html#aa3b94c92cc334739473c9b295923ffce">toLower</a>(thisString));</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;            i += strlen(thisString);</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        }</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    }</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160; </div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../db/d41/class_g3_d_1_1_file_system.html#ae3ff33d6e21d60234cb637b9b6a497e1">m_winDrive</a>;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;}</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160; </div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160; </div>
<div class="line"><a name="l00698"></a><span class="lineno"><a class="line" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a43f6253ca5c5a0844fc72c7bf00e2786">  698</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a43f6253ca5c5a0844fc72c7bf00e2786">FilePath::isRoot</a>(<span class="keyword">const</span> std::string&amp; <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>) {</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="preprocessor">#   ifdef G3D_WINDOWS</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.length() &lt; 2) {</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        }</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160; </div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>[1] == <span class="charliteral">&#39;:&#39;</span>) {</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.length() == 2) {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                <span class="comment">// e.g.,   &quot;x:&quot;</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.length() == 3) &amp;&amp; <a class="code" href="../../df/de2/namespace_g3_d.html#ac04d920621daeb663fa63bfba7ca1192">isSlash</a>(<a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>[2])) {</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                <span class="comment">// e.g.,   &quot;x:\&quot;</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;            }</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        }</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160; </div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        <span class="comment">// Windows shares are considered roots, but only if this does not include a path inside the share</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../df/de2/namespace_g3_d.html#ac04d920621daeb663fa63bfba7ca1192">isSlash</a>(<a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>[0]) &amp;&amp; <a class="code" href="../../df/de2/namespace_g3_d.html#ac04d920621daeb663fa63bfba7ca1192">isSlash</a>(<a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>[1])) {</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;            <span class="keywordtype">size_t</span> i = <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.find(<span class="stringliteral">&quot;/&quot;</span>, 3);</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;            <span class="keywordtype">size_t</span> j = <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.find(<span class="stringliteral">&quot;\\&quot;</span>, 3);</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160; </div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            <span class="keywordflow">if</span> (i == std::string::npos) {</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                i = j;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;            }</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160; </div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;            <span class="comment">// e.g., &quot;\\foo\&quot;, &quot;\\foo&quot;</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;            <span class="keywordflow">return</span> ((i == std::string::npos) || (i == <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.length() - 1));</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        }</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="preprocessor">#   else</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a> == <span class="stringliteral">&quot;/&quot;</span>) {</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        }</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="preprocessor">#   endif</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160; </div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;}</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160; </div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160; </div>
<div class="line"><a name="l00736"></a><span class="lineno"><a class="line" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a3194a8d19a3f0d7ddc2794f33939f15d">  736</a></span>&#160;std::string <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a3194a8d19a3f0d7ddc2794f33939f15d">FilePath::removeTrailingSlash</a>(<span class="keyword">const</span> std::string&amp; <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>) {</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="keywordtype">bool</span> removeSlash = ((<a class="code" href="../../df/de2/namespace_g3_d.html#a099ad667c3d882502da845397741fafc">endsWith</a>(<a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>, <span class="stringliteral">&quot;/&quot;</span>) || <a class="code" href="../../df/de2/namespace_g3_d.html#a099ad667c3d882502da845397741fafc">endsWith</a>(<a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>, <span class="stringliteral">&quot;\\&quot;</span>))) &amp;&amp; ! isRoot(<a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160; </div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="keywordflow">return</span> removeSlash ? <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.substr(0, <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.length() - 1) : <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;}</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160; </div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160; </div>
<div class="line"><a name="l00743"></a><span class="lineno"><a class="line" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a5a92f635d24400cd4084fe42eb564c11">  743</a></span>&#160;std::string <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a5a92f635d24400cd4084fe42eb564c11">FilePath::concat</a>(<span class="keyword">const</span> std::string&amp; dirname, <span class="keyword">const</span> std::string&amp; <a class="code" href="../../d4/d71/namespacempq.html#a4d9e28a606ab362cda8f825daad0fb49">file</a>) {</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="comment">// Ensure that the directory ends in a slash</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="keywordflow">if</span> (! dirname.empty() &amp;&amp; </div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        ! <a class="code" href="../../df/de2/namespace_g3_d.html#ac04d920621daeb663fa63bfba7ca1192">isSlash</a>(dirname[dirname.size() - 1]) &amp;&amp;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        (dirname[dirname.size() - 1] != <span class="charliteral">&#39;:&#39;</span>)) {</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        <span class="keywordflow">return</span> dirname + <span class="charliteral">&#39;/&#39;</span> + <a class="code" href="../../d4/d71/namespacempq.html#a4d9e28a606ab362cda8f825daad0fb49">file</a>;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;        <span class="keywordflow">return</span> dirname + <a class="code" href="../../d4/d71/namespacempq.html#a4d9e28a606ab362cda8f825daad0fb49">file</a>;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    }</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;}</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160; </div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160; </div>
<div class="line"><a name="l00755"></a><span class="lineno"><a class="line" href="../../d0/d5d/class_g3_d_1_1_file_path.html#aa1190e8fcc24a4c7e9942dc8c6229a0a">  755</a></span>&#160;std::string <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#aa1190e8fcc24a4c7e9942dc8c6229a0a">FilePath::ext</a>(<span class="keyword">const</span> std::string&amp; filename) {</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="keywordtype">size_t</span> i = filename.rfind(<span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="keywordflow">if</span> (i != std::string::npos) {</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <span class="keywordflow">return</span> filename.substr(i + 1, filename.length() - i);</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    }</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;}</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160; </div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160; </div>
<div class="line"><a name="l00765"></a><span class="lineno"><a class="line" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a0661a25051c7ba81e9ed8fafe39d521f">  765</a></span>&#160;std::string <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a0661a25051c7ba81e9ed8fafe39d521f">FilePath::baseExt</a>(<span class="keyword">const</span> std::string&amp; filename) {</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="keywordtype">size_t</span> i = <a class="code" href="../../df/de2/namespace_g3_d.html#a142152311de10d8595e1d8bfe8daf5ca">findLastSlash</a>(filename);</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160; </div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="preprocessor">#   ifdef G3D_WINDOWS</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        <span class="keywordtype">size_t</span> j = filename.rfind(<span class="stringliteral">&quot;:&quot;</span>);</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        <span class="keywordflow">if</span> ((i == std::string::npos) &amp;&amp; (j != std::string::npos)) {</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;            i = j;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        }</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="preprocessor">#   endif</span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160; </div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <span class="keywordflow">if</span> (i == std::string::npos) {</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        <span class="keywordflow">return</span> filename;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        <span class="keywordflow">return</span> filename.substr(i + 1, filename.length() - i);</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    }</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;}</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160; </div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160; </div>
<div class="line"><a name="l00783"></a><span class="lineno"><a class="line" href="../../d0/d5d/class_g3_d_1_1_file_path.html#aa28a9568b6567d019810a9eb2be2cac2">  783</a></span>&#160;std::string <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#aa28a9568b6567d019810a9eb2be2cac2">FilePath::base</a>(<span class="keyword">const</span> std::string&amp; path) {</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    std::string filename = baseExt(path);</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="keywordtype">size_t</span> i = filename.rfind(<span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="keywordflow">if</span> (i == std::string::npos) {</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        <span class="comment">// No extension</span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        <span class="keywordflow">return</span> filename;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        <span class="keywordflow">return</span> filename.substr(0, i);</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    }</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;}</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160; </div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160; </div>
<div class="line"><a name="l00795"></a><span class="lineno"><a class="line" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a0c12f73ce508f1e1d0e8daec5fec517e">  795</a></span>&#160;std::string <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a0c12f73ce508f1e1d0e8daec5fec517e">FilePath::parent</a>(<span class="keyword">const</span> std::string&amp; path) {    </div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="keywordtype">size_t</span> i = <a class="code" href="../../df/de2/namespace_g3_d.html#a142152311de10d8595e1d8bfe8daf5ca">findLastSlash</a>(removeTrailingSlash(path));</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160; </div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="preprocessor">#   ifdef G3D_WINDOWS</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        <span class="keywordtype">size_t</span> j = path.rfind(<span class="stringliteral">&quot;:&quot;</span>);</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        <span class="keywordflow">if</span> ((i == std::string::npos) &amp;&amp; (j != std::string::npos)) {</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;            i = j;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        }</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="preprocessor">#   endif</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160; </div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="keywordflow">if</span> (i == std::string::npos) {</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        <span class="keywordflow">return</span> path.substr(0, i + 1);</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    }</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;}</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160; </div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160; </div>
<div class="line"><a name="l00813"></a><span class="lineno"><a class="line" href="../../d0/d5d/class_g3_d_1_1_file_path.html#aaedc0d7159d9bd53690c0cbccd9c147c">  813</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#aaedc0d7159d9bd53690c0cbccd9c147c">FilePath::containsWildcards</a>(<span class="keyword">const</span> std::string&amp; filename) {</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="keywordflow">return</span> (filename.find(<span class="charliteral">&#39;*&#39;</span>) != std::string::npos) || (filename.find(<span class="charliteral">&#39;?&#39;</span>) != std::string::npos);</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;}</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160; </div>
<div class="line"><a name="l00818"></a><span class="lineno"><a class="line" href="../../d0/d5d/class_g3_d_1_1_file_path.html#af013a5ec0960994f3e0fc5e9023b8007">  818</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#af013a5ec0960994f3e0fc5e9023b8007">FilePath::matches</a>(<span class="keyword">const</span> std::string&amp; path, <span class="keyword">const</span> std::string&amp; pattern, <span class="keywordtype">bool</span> caseSensitive) {</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <span class="keywordtype">int</span> flags = FNM_PERIOD | FNM_NOESCAPE | FNM_PATHNAME;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <span class="keywordflow">if</span> (!  caseSensitive) {</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        flags |= FNM_CASEFOLD;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    }</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../df/de2/namespace_g3_d.html#ac16a7733535dbbe8df3a5c9cf47111e5">g3dfnmatch</a>(pattern.c_str(), path.c_str(), flags) == 0;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;}</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160; </div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160; </div>
<div class="line"><a name="l00827"></a><span class="lineno"><a class="line" href="../../df/de2/namespace_g3_d.html#a3465b08445daa9893e8654adff6bcffa">  827</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/de2/namespace_g3_d.html#a3465b08445daa9893e8654adff6bcffa">fixslash</a>(<span class="keywordtype">int</span> <a class="code" href="../../d4/d71/namespacempq.html#af509b98ca1ebe6c0248f215d23e06c93">c</a>) {</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="../../d4/d71/namespacempq.html#af509b98ca1ebe6c0248f215d23e06c93">c</a> == <span class="charliteral">&#39;\\&#39;</span>) ? <span class="charliteral">&#39;/&#39;</span> : <a class="code" href="../../d4/d71/namespacempq.html#af509b98ca1ebe6c0248f215d23e06c93">c</a>;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;}</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160; </div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160; </div>
<div class="line"><a name="l00832"></a><span class="lineno"><a class="line" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a42e350854634e96375f59bb4f23a3906">  832</a></span>&#160;std::string <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a42e350854634e96375f59bb4f23a3906">FilePath::canonicalize</a>(std::string <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>) {</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    std::transform(<a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>.begin(), <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>.end(), <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>.begin(), <a class="code" href="../../df/de2/namespace_g3_d.html#a3465b08445daa9893e8654adff6bcffa">fixslash</a>);</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">x</a>;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;}</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160; </div>
<div class="line"><a name="l00837"></a><span class="lineno"><a class="line" href="../../d0/d5d/class_g3_d_1_1_file_path.html#accb26ae9cb00ef10fcafe16ddb8828b7">  837</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#accb26ae9cb00ef10fcafe16ddb8828b7">FilePath::parse</a></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;(<span class="keyword">const</span> std::string&amp;     filename,</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160; std::string&amp;           root,</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160; <a class="code" href="../../d3/d92/class_g3_d_1_1_array.html">Array&lt;std::string&gt;</a>&amp;    path,</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160; std::string&amp;           base,</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160; std::string&amp;           ext) {</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160; </div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    std::string <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a> = filename;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160; </div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    root = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    path.<a class="code" href="../../d3/d92/class_g3_d_1_1_array.html#a29b4b423c6124e13e993aeb2ff8f2fa1">clear</a>();</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    base = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    ext = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160; </div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a> == <span class="stringliteral">&quot;&quot;</span>) {</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        <span class="comment">// Empty filename</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    }</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160; </div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <span class="comment">// See if there is a root/drive spec.</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.size() &gt;= 2) &amp;&amp; (<a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>[1] == <span class="charliteral">&#39;:&#39;</span>)) {</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        </div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.size() &gt; 2) &amp;&amp; <a class="code" href="../../df/de2/namespace_g3_d.html#ac04d920621daeb663fa63bfba7ca1192">isSlash</a>(<a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>[2])) {</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        </div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;            <span class="comment">// e.g.  c:\foo</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;            root = <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.substr(0, 3);</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;            <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a> = <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.substr(3, <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.size() - 3);</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        </div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        </div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;            <span class="comment">// e.g.  c:foo</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;            root = <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.substr(2);</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;            <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a> = <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.substr(2, <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.size() - 2);</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160; </div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        }</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160; </div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.size() &gt;= 2) &amp;&amp; <a class="code" href="../../df/de2/namespace_g3_d.html#ac04d920621daeb663fa63bfba7ca1192">isSlash</a>(<a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>[0]) &amp;&amp; <a class="code" href="../../df/de2/namespace_g3_d.html#ac04d920621daeb663fa63bfba7ca1192">isSlash</a>(<a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>[1])) {</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        </div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        <span class="comment">// e.g. //foo</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        root = <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.substr(0, 2);</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a> = <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.substr(2, <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.size() - 2);</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160; </div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../df/de2/namespace_g3_d.html#ac04d920621daeb663fa63bfba7ca1192">isSlash</a>(<a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>[0])) {</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        </div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        root = <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.substr(0, 1);</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a> = <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.substr(1, <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.size() - 1);</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160; </div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    }</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160; </div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <span class="comment">// Pull the extension off</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    {</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;        <span class="comment">// Find the period</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        <span class="keywordtype">size_t</span> i = <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.rfind(<span class="charliteral">&#39;.&#39;</span>);</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160; </div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        <span class="keywordflow">if</span> (i != std::string::npos) {</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;            <span class="comment">// Make sure it is after the last slash!</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        <span class="keywordtype">size_t</span> j = <a class="code" href="../../df/de2/namespace_g3_d.html#a142152311de10d8595e1d8bfe8daf5ca">findLastSlash</a>(<a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>);</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;            <span class="keywordflow">if</span> ((j == std::string::npos) || (i &gt; j)) {</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                ext = <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.substr(i + 1, <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.size() - i - 1);</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a> = <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.substr(0, i);</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;            }</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        }</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    }</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160; </div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="comment">// Pull the basename off</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    {</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        <span class="comment">// Find the last slash</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        <span class="keywordtype">size_t</span> i = <a class="code" href="../../df/de2/namespace_g3_d.html#a142152311de10d8595e1d8bfe8daf5ca">findLastSlash</a>(<a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>);</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;        </div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;        <span class="keywordflow">if</span> (i == std::string::npos) {</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;            </div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;            <span class="comment">// There is no slash; the basename is the whole thing</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;            base = <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;            <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>    = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160; </div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((i != std::string::npos) &amp;&amp; (i &lt; <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.size() - 1)) {</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;            </div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;            base = <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.substr(i + 1, <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.size() - i - 1);</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;            <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>    = <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.substr(0, i);</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160; </div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        }</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    }</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160; </div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="comment">// Parse what remains into path.</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="../../de/d0e/_recast_contour_8cpp.html#a6f1109916123abdff2b46675c13307e3">prev</a>, cur = 0;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160; </div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="keywordflow">while</span> (cur &lt; <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.size()) {</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        <a class="code" href="../../de/d0e/_recast_contour_8cpp.html#a6f1109916123abdff2b46675c13307e3">prev</a> = cur;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        </div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        <span class="comment">// Allow either slash</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;        <span class="keywordtype">size_t</span> i = <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.find(<span class="charliteral">&#39;/&#39;</span>, <a class="code" href="../../de/d0e/_recast_contour_8cpp.html#a6f1109916123abdff2b46675c13307e3">prev</a> + 1);</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;        <span class="keywordtype">size_t</span> j = <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.find(<span class="charliteral">&#39;\\&#39;</span>, <a class="code" href="../../de/d0e/_recast_contour_8cpp.html#a6f1109916123abdff2b46675c13307e3">prev</a> + 1);</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        <span class="keywordflow">if</span> (i == std::string::npos) {</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;            i = <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.size();</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;        }</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160; </div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;        <span class="keywordflow">if</span> (j == std::string::npos) {</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;            j = <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.size();</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        }</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160; </div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;        cur = <a class="code" href="../../df/de2/namespace_g3_d.html#ac963e578ad7f1b9c9ad9fbc82b0f034c">min</a>(i, j);</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160; </div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        <span class="keywordflow">if</span> (cur == std::string::npos) {</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;            cur = <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.size();</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        }</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160; </div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;        path.<a class="code" href="../../d3/d92/class_g3_d_1_1_array.html#a56183c682e174ccb813ac3bfb2657376">append</a>(<a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.substr(<a class="code" href="../../de/d0e/_recast_contour_8cpp.html#a6f1109916123abdff2b46675c13307e3">prev</a>, cur - <a class="code" href="../../de/d0e/_recast_contour_8cpp.html#a6f1109916123abdff2b46675c13307e3">prev</a>));</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        ++cur;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    }</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;}</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160; </div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160; </div>
<div class="line"><a name="l00949"></a><span class="lineno"><a class="line" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a15073b5f53ae1789e3351292c841980c">  949</a></span>&#160;std::string <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#a15073b5f53ae1789e3351292c841980c">FilePath::expandEnvironmentVariables</a>(<span class="keyword">const</span> std::string&amp; path) {</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="comment">// Search for pattern</span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <span class="keywordtype">size_t</span> end = path.find_first_of(<span class="charliteral">&#39;$&#39;</span>, 0);</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <span class="keywordflow">if</span> (end == std::string::npos) {</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        <span class="comment">// Pattern does not exist</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        <span class="keywordflow">return</span> path;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    }</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160; </div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <span class="keywordtype">size_t</span> start = 0;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    std::string <a class="code" href="../../df/d60/namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <span class="keywordflow">while</span> (end != std::string::npos) {</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        <span class="keyword">const</span> std::string&amp; before = path.substr(start, end - start);</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;        <a class="code" href="../../df/d60/namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a> += before;</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;        start = end + 1;</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        std::string <a class="code" href="../../df/de2/namespace_g3_d.html#a29a4576316c55785d3d63bd982849fc6">var</a>;</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        <span class="keywordflow">if</span> (path[start] == <span class="charliteral">&#39;(&#39;</span>) {</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;            <span class="comment">// Search for close paren</span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;            end = path.find_first_of(<span class="charliteral">&#39;)&#39;</span>, start + 1);</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;            <span class="keywordflow">if</span> (end == std::string::npos) {</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                <span class="keywordflow">throw</span> std::string(<span class="stringliteral">&quot;Missing close paren in environment variable in \&quot;&quot;</span>) + path + <span class="stringliteral">&quot;\&quot;&quot;</span>;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;            }</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;            <a class="code" href="../../df/de2/namespace_g3_d.html#a29a4576316c55785d3d63bd982849fc6">var</a> = path.substr(start + 1, end - start - 1);</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;            <span class="comment">// Search for slash or end of string</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;            end = path.find_first_of(<span class="charliteral">&#39;/&#39;</span>, start);</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;            <span class="keywordtype">size_t</span> i = path.find_first_of(<span class="charliteral">&#39;\\&#39;</span>, start);</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;            <span class="keywordflow">if</span> ((<span class="keywordtype">size_t</span>(i) != std::string::npos) &amp;&amp; ((end == std::string::npos) || (<span class="keywordtype">size_t</span>(i) &lt; end))) {</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                end = i;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;            }</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;            <span class="keywordflow">if</span> (end == std::string::npos) {</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                <span class="comment">// If the varible goes to the end of the string, it is the rest of the string</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                end = path.size();</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                --end;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;            }</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;            <a class="code" href="../../df/de2/namespace_g3_d.html#a29a4576316c55785d3d63bd982849fc6">var</a> = path.substr(start, end - start + 1);</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;        }</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160; </div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;        <span class="keywordflow">if</span> (! <a class="code" href="../../df/de2/namespace_g3_d.html#a29a4576316c55785d3d63bd982849fc6">var</a>.empty()) {</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d7/d71/classvalue.html">value</a> = getenv(<a class="code" href="../../df/de2/namespace_g3_d.html#a29a4576316c55785d3d63bd982849fc6">var</a>.c_str());</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160; </div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d7/d71/classvalue.html">value</a> == <a class="code" href="../../d9/d33/jemalloc__internal_8h.html#ae89ee89f41328ac0ade1e3e26c103570">NULL</a>) {</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;                <span class="keywordflow">throw</span> (std::string(<span class="stringliteral">&quot;LocalLightingEnvironment variable \&quot;&quot;</span>) + <a class="code" href="../../df/de2/namespace_g3_d.html#a29a4576316c55785d3d63bd982849fc6">var</a> + <span class="stringliteral">&quot;\&quot; not defined for path \&quot;&quot;</span> + path + <span class="stringliteral">&quot;\&quot;&quot;</span>);</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                <a class="code" href="../../df/d60/namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a> += <a class="code" href="../../d7/d71/classvalue.html">value</a>;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;            }</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;            <span class="comment">// We just parsed an &quot;empty&quot; variable, which was probably a default share on Windows, e.g.,</span></div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;            <span class="comment">// &quot;\\mycomputer\c$&quot;, and not a variable name.</span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;            <a class="code" href="../../df/d60/namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a> += <span class="stringliteral">&quot;$&quot;</span>;            </div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        }</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160; </div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;        start = end + 1;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;        end = path.find_first_of(<span class="charliteral">&#39;$&#39;</span>, start);</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    }</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160; </div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    <span class="comment">// Paste on the remainder of the source path</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <span class="keywordflow">if</span> (start &lt; path.size()) {</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;        <a class="code" href="../../df/d60/namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a> += path.substr(start);</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    }</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160; </div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../df/d60/namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>;</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;}</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160; </div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160; </div>
<div class="line"><a name="l01015"></a><span class="lineno"><a class="line" href="../../d0/d5d/class_g3_d_1_1_file_path.html#ab30a1c1e4d3f77b9b03740b8b5cd12ab"> 1015</a></span>&#160;std::string <a class="code" href="../../d0/d5d/class_g3_d_1_1_file_path.html#ab30a1c1e4d3f77b9b03740b8b5cd12ab">FilePath::makeLegalFilename</a>(<span class="keyword">const</span> std::string&amp; <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>, <span class="keywordtype">size_t</span> maxLength) {</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    std::string tentative;</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    </div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="../../df/de2/namespace_g3_d.html#ac963e578ad7f1b9c9ad9fbc82b0f034c">G3D::min</a>(maxLength, <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>.size()); ++i) {</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="../../d4/d71/namespacempq.html#af509b98ca1ebe6c0248f215d23e06c93">c</a> = <a class="code" href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a>[i];</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../df/de2/namespace_g3_d.html#a42821b62bfb515bbef75d1178eb9a5f4">isLetter</a>(<a class="code" href="../../d4/d71/namespacempq.html#af509b98ca1ebe6c0248f215d23e06c93">c</a>) || <a class="code" href="../../df/de2/namespace_g3_d.html#abf14bbddcbcabba8c5f6cbf75f16b7a0">isDigit</a>(<a class="code" href="../../d4/d71/namespacempq.html#af509b98ca1ebe6c0248f215d23e06c93">c</a>) || (<a class="code" href="../../d4/d71/namespacempq.html#af509b98ca1ebe6c0248f215d23e06c93">c</a> == <span class="charliteral">&#39;-&#39;</span>) || (<a class="code" href="../../d4/d71/namespacempq.html#af509b98ca1ebe6c0248f215d23e06c93">c</a> == <span class="charliteral">&#39;+&#39;</span>) || (<a class="code" href="../../d4/d71/namespacempq.html#af509b98ca1ebe6c0248f215d23e06c93">c</a> == <span class="charliteral">&#39;=&#39;</span>) || (<a class="code" href="../../d4/d71/namespacempq.html#af509b98ca1ebe6c0248f215d23e06c93">c</a> == <span class="charliteral">&#39;(&#39;</span>) || (<a class="code" href="../../d4/d71/namespacempq.html#af509b98ca1ebe6c0248f215d23e06c93">c</a> == <span class="charliteral">&#39;)&#39;</span>)) {</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;            tentative += <a class="code" href="../../d4/d71/namespacempq.html#af509b98ca1ebe6c0248f215d23e06c93">c</a>;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;            tentative += <span class="stringliteral">&quot;_&quot;</span>;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        }</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    }</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160; </div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    <span class="keywordflow">return</span> tentative;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;}</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160; </div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;}</div>
<div class="ttc" id="a_binary_input_8h_html"><div class="ttname"><a href="../../d7/d46/_binary_input_8h.html">BinaryInput.h</a></div></div>
<div class="ttc" id="a_binary_output_8h_html"><div class="ttname"><a href="../../d8/da8/_binary_output_8h.html">BinaryOutput.h</a></div></div>
<div class="ttc" id="a_file_system_8cpp_html_a2ac0f0c422c4f69864f72ed959d099d8"><div class="ttname"><a href="../../d1/d4c/_file_system_8cpp.html#a2ac0f0c422c4f69864f72ed959d099d8">_stat</a></div><div class="ttdeci">#define _stat</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00038">FileSystem.cpp:38</a></div></div>
<div class="ttc" id="a_file_system_8cpp_html_a300f297d84aa903d52cc236608f854c3"><div class="ttname"><a href="../../d1/d4c/_file_system_8cpp.html#a300f297d84aa903d52cc236608f854c3">_getcwd</a></div><div class="ttdeci">#define _getcwd</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00037">FileSystem.cpp:37</a></div></div>
<div class="ttc" id="a_file_system_8cpp_html_a4e0be90a3757e352f42612d09a7d1aa5"><div class="ttname"><a href="../../d1/d4c/_file_system_8cpp.html#a4e0be90a3757e352f42612d09a7d1aa5">stricmp</a></div><div class="ttdeci">#define stricmp</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00039">FileSystem.cpp:39</a></div></div>
<div class="ttc" id="a_file_system_8h_html"><div class="ttname"><a href="../../d2/d58/_file_system_8h.html">FileSystem.h</a></div></div>
<div class="ttc" id="a_recast_contour_8cpp_html_a6f1109916123abdff2b46675c13307e3"><div class="ttname"><a href="../../de/d0e/_recast_contour_8cpp.html#a6f1109916123abdff2b46675c13307e3">prev</a></div><div class="ttdeci">int prev(int i, int n)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d0e/_recast_contour_8cpp_source.html#l00468">RecastContour.cpp:468</a></div></div>
<div class="ttc" id="a_system_8h_html"><div class="ttname"><a href="../../df/d78/_system_8h.html">System.h</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_array_html"><div class="ttname"><a href="../../d3/d92/class_g3_d_1_1_array.html">G3D::Array&lt; std::string &gt;</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_array_html_a29b4b423c6124e13e993aeb2ff8f2fa1"><div class="ttname"><a href="../../d3/d92/class_g3_d_1_1_array.html#a29b4b423c6124e13e993aeb2ff8f2fa1">G3D::Array::clear</a></div><div class="ttdeci">void clear(bool shrink=true)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc5/_array_8h_source.html#l00409">Array.h:409</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_array_html_a56183c682e174ccb813ac3bfb2657376"><div class="ttname"><a href="../../d3/d92/class_g3_d_1_1_array.html#a56183c682e174ccb813ac3bfb2657376">G3D::Array::append</a></div><div class="ttdeci">void append(const T &amp;value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc5/_array_8h_source.html#l00585">Array.h:585</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_array_html_ab0008321250181c65ffe7f06500caf92"><div class="ttname"><a href="../../d3/d92/class_g3_d_1_1_array.html#ab0008321250181c65ffe7f06500caf92">G3D::Array::size</a></div><div class="ttdeci">int size() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc5/_array_8h_source.html#l00432">Array.h:432</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_array_html_ae491aa13eb36e9e00867b3ebc0985c68"><div class="ttname"><a href="../../d3/d92/class_g3_d_1_1_array.html#ae491aa13eb36e9e00867b3ebc0985c68">G3D::Array::length</a></div><div class="ttdeci">int length() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc5/_array_8h_source.html#l00440">Array.h:440</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_binary_input_html"><div class="ttname"><a href="../../d4/d0c/class_g3_d_1_1_binary_input.html">G3D::BinaryInput</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d46/_binary_input_8h_source.html#l00069">BinaryInput.h:69</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_binary_input_html_a20a75bb8879abcbef199b27a5b85f843"><div class="ttname"><a href="../../d4/d0c/class_g3_d_1_1_binary_input.html#a20a75bb8879abcbef199b27a5b85f843">G3D::BinaryInput::size</a></div><div class="ttdeci">int64 size() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d46/_binary_input_8h_source.html#l00225">BinaryInput.h:225</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_binary_input_html_a8e781b151046538cb833fb2c295049a8"><div class="ttname"><a href="../../d4/d0c/class_g3_d_1_1_binary_input.html#a8e781b151046538cb833fb2c295049a8">G3D::BinaryInput::getCArray</a></div><div class="ttdeci">const uint8 * getCArray()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d46/_binary_input_8h_source.html#l00241">BinaryInput.h:241</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_binary_output_html"><div class="ttname"><a href="../../df/d33/class_g3_d_1_1_binary_output.html">G3D::BinaryOutput</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da8/_binary_output_8h_source.html#l00052">BinaryOutput.h:52</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_binary_output_html_a20be2de9e1d4d53dcd5d7f78882af253"><div class="ttname"><a href="../../df/d33/class_g3_d_1_1_binary_output.html#a20be2de9e1d4d53dcd5d7f78882af253">G3D::BinaryOutput::writeBytes</a></div><div class="ttdeci">void writeBytes(const void *b, size_t count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da8/_binary_output_8h_source.html#l00259">BinaryOutput.h:260</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_binary_output_html_a93f77fcfa3e0431539fe93db39d5d1e6"><div class="ttname"><a href="../../df/d33/class_g3_d_1_1_binary_output.html#a93f77fcfa3e0431539fe93db39d5d1e6">G3D::BinaryOutput::commit</a></div><div class="ttdeci">void commit(bool flush=true)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d8a/_binary_output_8cpp_source.html#l00322">BinaryOutput.cpp:322</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_path_html_a0661a25051c7ba81e9ed8fafe39d521f"><div class="ttname"><a href="../../d0/d5d/class_g3_d_1_1_file_path.html#a0661a25051c7ba81e9ed8fafe39d521f">G3D::FilePath::baseExt</a></div><div class="ttdeci">static std::string baseExt(const std::string &amp;path)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00765">FileSystem.cpp:765</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_path_html_a0c12f73ce508f1e1d0e8daec5fec517e"><div class="ttname"><a href="../../d0/d5d/class_g3_d_1_1_file_path.html#a0c12f73ce508f1e1d0e8daec5fec517e">G3D::FilePath::parent</a></div><div class="ttdeci">static std::string parent(const std::string &amp;path)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00795">FileSystem.cpp:795</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_path_html_a15073b5f53ae1789e3351292c841980c"><div class="ttname"><a href="../../d0/d5d/class_g3_d_1_1_file_path.html#a15073b5f53ae1789e3351292c841980c">G3D::FilePath::expandEnvironmentVariables</a></div><div class="ttdeci">static std::string expandEnvironmentVariables(const std::string &amp;path)</div><div class="ttdoc">Replaces $VAR and  patterns with the corresponding environment variable. Throws std::string if the en...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00949">FileSystem.cpp:949</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_path_html_a3194a8d19a3f0d7ddc2794f33939f15d"><div class="ttname"><a href="../../d0/d5d/class_g3_d_1_1_file_path.html#a3194a8d19a3f0d7ddc2794f33939f15d">G3D::FilePath::removeTrailingSlash</a></div><div class="ttdeci">static std::string removeTrailingSlash(const std::string &amp;f)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00736">FileSystem.cpp:736</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_path_html_a42e350854634e96375f59bb4f23a3906"><div class="ttname"><a href="../../d0/d5d/class_g3_d_1_1_file_path.html#a42e350854634e96375f59bb4f23a3906">G3D::FilePath::canonicalize</a></div><div class="ttdeci">static std::string canonicalize(std::string x)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00832">FileSystem.cpp:832</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_path_html_a43f6253ca5c5a0844fc72c7bf00e2786"><div class="ttname"><a href="../../d0/d5d/class_g3_d_1_1_file_path.html#a43f6253ca5c5a0844fc72c7bf00e2786">G3D::FilePath::isRoot</a></div><div class="ttdeci">static bool isRoot(const std::string &amp;f)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00698">FileSystem.cpp:698</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_path_html_a5a92f635d24400cd4084fe42eb564c11"><div class="ttname"><a href="../../d0/d5d/class_g3_d_1_1_file_path.html#a5a92f635d24400cd4084fe42eb564c11">G3D::FilePath::concat</a></div><div class="ttdeci">static std::string concat(const std::string &amp;a, const std::string &amp;b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00743">FileSystem.cpp:743</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_path_html_aa1190e8fcc24a4c7e9942dc8c6229a0a"><div class="ttname"><a href="../../d0/d5d/class_g3_d_1_1_file_path.html#aa1190e8fcc24a4c7e9942dc8c6229a0a">G3D::FilePath::ext</a></div><div class="ttdeci">static std::string ext(const std::string &amp;path)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00755">FileSystem.cpp:755</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_path_html_aa28a9568b6567d019810a9eb2be2cac2"><div class="ttname"><a href="../../d0/d5d/class_g3_d_1_1_file_path.html#aa28a9568b6567d019810a9eb2be2cac2">G3D::FilePath::base</a></div><div class="ttdeci">static std::string base(const std::string &amp;path)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00783">FileSystem.cpp:783</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_path_html_aaedc0d7159d9bd53690c0cbccd9c147c"><div class="ttname"><a href="../../d0/d5d/class_g3_d_1_1_file_path.html#aaedc0d7159d9bd53690c0cbccd9c147c">G3D::FilePath::containsWildcards</a></div><div class="ttdeci">static bool containsWildcards(const std::string &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00813">FileSystem.cpp:813</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_path_html_ab30a1c1e4d3f77b9b03740b8b5cd12ab"><div class="ttname"><a href="../../d0/d5d/class_g3_d_1_1_file_path.html#ab30a1c1e4d3f77b9b03740b8b5cd12ab">G3D::FilePath::makeLegalFilename</a></div><div class="ttdeci">static std::string makeLegalFilename(const std::string &amp;f, size_t maxLength=100000)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l01015">FileSystem.cpp:1015</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_path_html_accb26ae9cb00ef10fcafe16ddb8828b7"><div class="ttname"><a href="../../d0/d5d/class_g3_d_1_1_file_path.html#accb26ae9cb00ef10fcafe16ddb8828b7">G3D::FilePath::parse</a></div><div class="ttdeci">static void parse(const std::string &amp;filename, std::string &amp;drive, Array&lt; std::string &gt; &amp;path, std::string &amp;base, std::string &amp;ext)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00837">FileSystem.cpp:838</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_path_html_af013a5ec0960994f3e0fc5e9023b8007"><div class="ttname"><a href="../../d0/d5d/class_g3_d_1_1_file_path.html#af013a5ec0960994f3e0fc5e9023b8007">G3D::FilePath::matches</a></div><div class="ttdeci">static bool matches(const std::string &amp;path, const std::string &amp;pattern, bool caseSensitive=true)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00818">FileSystem.cpp:818</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_1_1_dir_html"><div class="ttname"><a href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html">G3D::FileSystem::Dir</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d58/_file_system_8h_source.html#l00102">FileSystem.h:102</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_1_1_dir_html_a7f7a0cde2d33203ca61afbc0814295a2"><div class="ttname"><a href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html#a7f7a0cde2d33203ca61afbc0814295a2">G3D::FileSystem::Dir::nodeArray</a></div><div class="ttdeci">Array&lt; Entry &gt; nodeArray</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d58/_file_system_8h_source.html#l00112">FileSystem.h:112</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_1_1_dir_html_a8f752fbbc82ea53d9e2e64ae5c9d52cb"><div class="ttname"><a href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html#a8f752fbbc82ea53d9e2e64ae5c9d52cb">G3D::FileSystem::Dir::computeZipListing</a></div><div class="ttdeci">void computeZipListing(const std::string &amp;zipfile, const std::string &amp;pathInsideZipfile)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00088">FileSystem.cpp:88</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_1_1_dir_html_a961a53d77498a1d7439885bafeedb9df"><div class="ttname"><a href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html#a961a53d77498a1d7439885bafeedb9df">G3D::FileSystem::Dir::inZipfile</a></div><div class="ttdeci">bool inZipfile</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d58/_file_system_8h_source.html#l00109">FileSystem.h:109</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_1_1_dir_html_aa227ac15ff51cbfcb7e8768a460f4e77"><div class="ttname"><a href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html#aa227ac15ff51cbfcb7e8768a460f4e77">G3D::FileSystem::Dir::contains</a></div><div class="ttdeci">bool contains(const std::string &amp;child, bool caseSensitive=true) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00073">FileSystem.cpp:73</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_1_1_dir_html_ac548d08a5467f04fab5b41bc8327fc3a"><div class="ttname"><a href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html#ac548d08a5467f04fab5b41bc8327fc3a">G3D::FileSystem::Dir::exists</a></div><div class="ttdeci">bool exists</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d58/_file_system_8h_source.html#l00106">FileSystem.h:106</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_1_1_dir_html_ae158e4f868f5b26531a30da50f29c18f"><div class="ttname"><a href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html#ae158e4f868f5b26531a30da50f29c18f">G3D::FileSystem::Dir::isZipfile</a></div><div class="ttdeci">bool isZipfile</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d58/_file_system_8h_source.html#l00108">FileSystem.h:108</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_1_1_dir_html_ae832db4aad192b2fa2e6a6c50773d585"><div class="ttname"><a href="../../d4/d60/class_g3_d_1_1_file_system_1_1_dir.html#ae832db4aad192b2fa2e6a6c50773d585">G3D::FileSystem::Dir::lastChecked</a></div><div class="ttdeci">double lastChecked</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d58/_file_system_8h_source.html#l00115">FileSystem.h:115</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_1_1_entry_html"><div class="ttname"><a href="../../d4/d71/class_g3_d_1_1_file_system_1_1_entry.html">G3D::FileSystem::Entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d58/_file_system_8h_source.html#l00093">FileSystem.h:93</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_1_1_entry_html_a188ec3e4aa91591e5e5b88699a4d2cf2"><div class="ttname"><a href="../../d4/d71/class_g3_d_1_1_file_system_1_1_entry.html#a188ec3e4aa91591e5e5b88699a4d2cf2">G3D::FileSystem::Entry::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d58/_file_system_8h_source.html#l00096">FileSystem.h:96</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_1_1_entry_html_af69822c22e292304165f74206bc727a6"><div class="ttname"><a href="../../d4/d71/class_g3_d_1_1_file_system_1_1_entry.html#af69822c22e292304165f74206bc727a6">G3D::FileSystem::Entry::type</a></div><div class="ttdeci">Type type</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d58/_file_system_8h_source.html#l00097">FileSystem.h:97</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_1_1_list_settings_html"><div class="ttname"><a href="../../d4/dde/class_g3_d_1_1_file_system_1_1_list_settings.html">G3D::FileSystem::ListSettings</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d58/_file_system_8h_source.html#l00049">FileSystem.h:49</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html">G3D::FileSystem</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d58/_file_system_8h_source.html#l00046">FileSystem.h:46</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_a0153565d510589cee3757a740c0f82c0"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#a0153565d510589cee3757a740c0f82c0">G3D::FileSystem::_resolve</a></div><div class="ttdeci">std::string _resolve(const std::string &amp;path, const std::string &amp;cwd=currentDirectory())</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00508">FileSystem.cpp:508</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_a05f9183810e0ce0c960707774dd658c2"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#a05f9183810e0ce0c960707774dd658c2">G3D::FileSystem::isZipfile</a></div><div class="ttdeci">static bool isZipfile(const std::string &amp;path)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d58/_file_system_8h_source.html#l00323">FileSystem.h:323</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_a15c12e3683c7a0d972533ab42220c3ea"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#a15c12e3683c7a0d972533ab42220c3ea">G3D::FileSystem::mutex</a></div><div class="ttdeci">static GMutex mutex</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d58/_file_system_8h_source.html#l00143">FileSystem.h:143</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_a215d0a7663d0c04ad5f19091f9b38e63"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#a215d0a7663d0c04ad5f19091f9b38e63">G3D::FileSystem::m_cache</a></div><div class="ttdeci">Table&lt; std::string, Dir &gt; m_cache</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d58/_file_system_8h_source.html#l00133">FileSystem.h:133</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_a32759e77ec5197b27f47af5207a3e7c7"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#a32759e77ec5197b27f47af5207a3e7c7">G3D::FileSystem::_fopen</a></div><div class="ttdeci">FILE * _fopen(const char *filename, const char *mode)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00321">FileSystem.cpp:321</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_a32d4f14319862edf34c9b448a6b1da2c"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#a32d4f14319862edf34c9b448a6b1da2c">G3D::FileSystem::inZipfile</a></div><div class="ttdeci">static bool inZipfile(const std::string &amp;path, std::string &amp;zipfile)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d58/_file_system_8h_source.html#l00264">FileSystem.h:264</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_a36e00088164b6dd1104bbd9703e18123"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#a36e00088164b6dd1104bbd9703e18123">G3D::FileSystem::_size</a></div><div class="ttdeci">int64 _size(const std::string &amp;path)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00580">FileSystem.cpp:580</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_a3a2af1883eed5c451aa40e07d2bfac17"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#a3a2af1883eed5c451aa40e07d2bfac17">G3D::FileSystem::FileSystem</a></div><div class="ttdeci">FileSystem()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00069">FileSystem.cpp:69</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_a3e3bbc82646eda979400989fb2f034b2"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#a3e3bbc82646eda979400989fb2f034b2">G3D::FileSystem::_removeFile</a></div><div class="ttdeci">void _removeFile(const std::string &amp;path)</div><div class="ttdoc">Delete this file. No effect if path does not exist.</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00492">FileSystem.cpp:492</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_a4ddcde64d6c9990145fd11a2d7faecbc"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#a4ddcde64d6c9990145fd11a2d7faecbc">G3D::FileSystem::instance</a></div><div class="ttdeci">static FileSystem &amp; instance()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00049">FileSystem.cpp:49</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_a56c5b4a91612b3f693f1ace3c1540629"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#a56c5b4a91612b3f693f1ace3c1540629">G3D::FileSystem::exists</a></div><div class="ttdeci">static bool exists(const std::string &amp;f, bool trustCache=true, bool caseSensitive=true)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d58/_file_system_8h_source.html#l00401">FileSystem.h:401</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_a6734207d2c5a9827826611987930c7d3"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#a6734207d2c5a9827826611987930c7d3">G3D::FileSystem::listHelper</a></div><div class="ttdeci">void listHelper(const std::string &amp;shortSpec, const std::string &amp;parentPath, Array&lt; std::string &gt; &amp;result, const ListSettings &amp;settings)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00616">FileSystem.cpp:617</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_a6f95070bc63cddf8a79972ceaa10cffe"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#a6f95070bc63cddf8a79972ceaa10cffe">G3D::FileSystem::cleanup</a></div><div class="ttdeci">static void cleanup()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00062">FileSystem.cpp:62</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_a731e77742979c9bed6cc8540a8f04d9d"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#a731e77742979c9bed6cc8540a8f04d9d">G3D::FileSystem::getFiles</a></div><div class="ttdeci">static void getFiles(const std::string &amp;spec, Array&lt; std::string &gt; &amp;result, bool includeParentPath=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d58/_file_system_8h_source.html#l00488">FileSystem.h:488</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_a740cf4deaa41b0ab8364e6cdaa7a3181"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#a740cf4deaa41b0ab8364e6cdaa7a3181">G3D::FileSystem::cacheLifetime</a></div><div class="ttdeci">static float cacheLifetime()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d58/_file_system_8h_source.html#l00341">FileSystem.h:341</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_a8d244d19a57d756ca7051686aeb76942"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#a8d244d19a57d756ca7051686aeb76942">G3D::FileSystem::init</a></div><div class="ttdeci">static void init()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00055">FileSystem.cpp:55</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_a92c404ad74d76c967f38e7aff22a44ee"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#a92c404ad74d76c967f38e7aff22a44ee">G3D::FileSystem::fclose</a></div><div class="ttdeci">static void fclose(FILE *f)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d58/_file_system_8h_source.html#l00290">FileSystem.h:290</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_a9582a312f50b37e7f8c041785e94b980"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#a9582a312f50b37e7f8c041785e94b980">G3D::FileSystem::_isNewer</a></div><div class="ttdeci">bool _isNewer(const std::string &amp;src, const std::string &amp;dst)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00565">FileSystem.cpp:565</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_a9f6174899a0e7baca0163d1a0c9f44d7"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#a9f6174899a0e7baca0163d1a0c9f44d7">G3D::FileSystem::m_cacheLifetime</a></div><div class="ttdeci">float m_cacheLifetime</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d58/_file_system_8h_source.html#l00084">FileSystem.h:84</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_aa2d0186f68d106f3302e18feff6c2536"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#aa2d0186f68d106f3302e18feff6c2536">G3D::FileSystem::usedFiles</a></div><div class="ttdeci">static const Set&lt; std::string &gt; &amp; usedFiles()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00560">FileSystem.cpp:560</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_aac0f8bfdaa8fe8f0dc7fc1a2930a4ab6"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#aac0f8bfdaa8fe8f0dc7fc1a2930a4ab6">G3D::FileSystem::isDirectory</a></div><div class="ttdeci">static bool isDirectory(const std::string &amp;path)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d58/_file_system_8h_source.html#l00416">FileSystem.h:416</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_aac82a07c9a9b2b9e73c161f1461f93a5"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#aac82a07c9a9b2b9e73c161f1461f93a5">G3D::FileSystem::_isZipfile</a></div><div class="ttdeci">bool _isZipfile(const std::string &amp;path)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00296">FileSystem.cpp:296</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_ab181e7be8496569f2e09b1071f248324"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#ab181e7be8496569f2e09b1071f248324">G3D::FileSystem::_isDirectory</a></div><div class="ttdeci">bool _isDirectory(const std::string &amp;path)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00483">FileSystem.cpp:483</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_abc0978ba2ea86c84b3786934dbe32d33"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#abc0978ba2ea86c84b3786934dbe32d33">G3D::FileSystem::markFileUsed</a></div><div class="ttdeci">static void markFileUsed(const std::string &amp;filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00553">FileSystem.cpp:553</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_acd416408aa1fc76c013b9875d15348a7"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#acd416408aa1fc76c013b9875d15348a7">G3D::FileSystem::fopen</a></div><div class="ttdeci">static FILE * fopen(const char *filename, const char *mode)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d58/_file_system_8h_source.html#l00282">FileSystem.h:282</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_ad28e358545724a0b6bc8c37d961b4d65"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#ad28e358545724a0b6bc8c37d961b4d65">G3D::FileSystem::_createDirectory</a></div><div class="ttdeci">void _createDirectory(const std::string &amp;path)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00369">FileSystem.cpp:369</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_ad3f1fa08390925076f71fe931ca696c2"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#ad3f1fa08390925076f71fe931ca696c2">G3D::FileSystem::_inZipfile</a></div><div class="ttdeci">bool _inZipfile(const std::string &amp;path, std::string &amp;zipfile)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00261">FileSystem.cpp:261</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_ada238c53a1dedf92f5887f9eba5b0882a172bb757b3924d9f4ba7c1d979dc6aea"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#ada238c53a1dedf92f5887f9eba5b0882a172bb757b3924d9f4ba7c1d979dc6aea">G3D::FileSystem::DIR_TYPE</a></div><div class="ttdeci">@ DIR_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d58/_file_system_8h_source.html#l00091">FileSystem.h:90</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_ada238c53a1dedf92f5887f9eba5b0882aa5f6c78fca435625aab0041655a9ac61"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#ada238c53a1dedf92f5887f9eba5b0882aa5f6c78fca435625aab0041655a9ac61">G3D::FileSystem::FILE_TYPE</a></div><div class="ttdeci">@ FILE_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d58/_file_system_8h_source.html#l00089">FileSystem.h:89</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_ada238c53a1dedf92f5887f9eba5b0882adfb0a11fa5d79ef9cdc9d5be8b4639e7"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#ada238c53a1dedf92f5887f9eba5b0882adfb0a11fa5d79ef9cdc9d5be8b4639e7">G3D::FileSystem::UNKNOWN</a></div><div class="ttdeci">@ UNKNOWN</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d58/_file_system_8h_source.html#l00088">FileSystem.h:88</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_adb1ed342fa39a9a0b05b434073e1c1b9"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#adb1ed342fa39a9a0b05b434073e1c1b9">G3D::FileSystem::_setCacheLifetime</a></div><div class="ttdeci">void _setCacheLifetime(float t)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00364">FileSystem.cpp:364</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_adedffc7506d5dcecd0fbab8aeb731ed0"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#adedffc7506d5dcecd0fbab8aeb731ed0">G3D::FileSystem::_exists</a></div><div class="ttdeci">bool _exists(const std::string &amp;f, bool trustCache=true, bool caseSensitive=true)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00441">FileSystem.cpp:441</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_ae04312e3fa56e9f922b7a56e4db12a24"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#ae04312e3fa56e9f922b7a56e4db12a24">G3D::FileSystem::_copyFile</a></div><div class="ttdeci">void _copyFile(const std::string &amp;srcPath, const std::string &amp;dstPath)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00424">FileSystem.cpp:424</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_ae3ff33d6e21d60234cb637b9b6a497e1"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#ae3ff33d6e21d60234cb637b9b6a497e1">G3D::FileSystem::m_winDrive</a></div><div class="ttdeci">Array&lt; std::string &gt; m_winDrive</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d58/_file_system_8h_source.html#l00082">FileSystem.h:82</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_af25ea408886cd8f04e5479620b68ab49"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#af25ea408886cd8f04e5479620b68ab49">G3D::FileSystem::getContents</a></div><div class="ttdeci">Dir &amp; getContents(const std::string &amp;path, bool forceUpdate)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00147">FileSystem.cpp:147</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_af51bfdb19c8df796f56626f63ec9e1ae"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#af51bfdb19c8df796f56626f63ec9e1ae">G3D::FileSystem::_currentDirectory</a></div><div class="ttdeci">std::string _currentDirectory()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00542">FileSystem.cpp:542</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_af6356494d349c39c04b919acc4e35638"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#af6356494d349c39c04b919acc4e35638">G3D::FileSystem::resolve</a></div><div class="ttdeci">static std::string resolve(const std::string &amp;path, const std::string &amp;cwd=currentDirectory())</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d58/_file_system_8h_source.html#l00440">FileSystem.h:440</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_aff3f714e12162669d5c45b66b31d5cc5"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#aff3f714e12162669d5c45b66b31d5cc5">G3D::FileSystem::_list</a></div><div class="ttdeci">void _list(const std::string &amp;spec, Array&lt; std::string &gt; &amp;result, const ListSettings &amp;listSettings=ListSettings())</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00665">FileSystem.cpp:665</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_file_system_html_affb5c2e7622c3da6e774488ce259aa30"><div class="ttname"><a href="../../db/d41/class_g3_d_1_1_file_system.html#affb5c2e7622c3da6e774488ce259aa30">G3D::FileSystem::_clearCache</a></div><div class="ttdeci">void _clearCache(const std::string &amp;path)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00337">FileSystem.cpp:337</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_g_mutex_html"><div class="ttname"><a href="../../dd/da8/class_g3_d_1_1_g_mutex.html">G3D::GMutex</a></div><div class="ttdoc">Mutual exclusion lock used for synchronization.</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d5b/_g_mutex_8h_source.html#l00076">GMutex.h:76</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_g_mutex_html_a1e8c37d50418feaeaf4156a80cda0abf"><div class="ttname"><a href="../../dd/da8/class_g3_d_1_1_g_mutex.html#a1e8c37d50418feaeaf4156a80cda0abf">G3D::GMutex::lock</a></div><div class="ttdeci">void lock()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/db7/_g_thread_8cpp_source.html#l00248">GThread.cpp:248</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_g_mutex_html_a3fe1a129473b931ad1f352ae7ff19d19"><div class="ttname"><a href="../../dd/da8/class_g3_d_1_1_g_mutex.html#a3fe1a129473b931ad1f352ae7ff19d19">G3D::GMutex::unlock</a></div><div class="ttdeci">void unlock()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/db7/_g_thread_8cpp_source.html#l00256">GThread.cpp:256</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_set_html"><div class="ttname"><a href="../../de/dbb/class_g3_d_1_1_set.html">G3D::Set&lt; std::string &gt;</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_set_html_a5763cab7e9f6b71548623487fe083536"><div class="ttname"><a href="../../de/dbb/class_g3_d_1_1_set.html#a5763cab7e9f6b71548623487fe083536">G3D::Set::insert</a></div><div class="ttdeci">bool insert(const T &amp;member)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d09/_set_8h_source.html#l00062">Set.h:62</a></div></div>
<div class="ttc" id="aclass_g3_d_1_1_system_html_adf8d5720adab77d7b1b40c455750033d"><div class="ttname"><a href="../../d6/d54/class_g3_d_1_1_system.html#adf8d5720adab77d7b1b40c455750033d">G3D::System::time</a></div><div class="ttdeci">static RealTime time()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7b/deps_2g3dlite_2source_2_system_8cpp_source.html#l00936">System.cpp:936</a></div></div>
<div class="ttc" id="aclassbuffer_html"><div class="ttname"><a href="../../da/d40/classbuffer.html">buffer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d71/fmt_2include_2fmt_2core_8h_source.html#l00749">core.h:749</a></div></div>
<div class="ttc" id="aclassvalue_html"><div class="ttname"><a href="../../d7/d71/classvalue.html">value</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d71/fmt_2include_2fmt_2core_8h_source.html#l01120">core.h:1120</a></div></div>
<div class="ttc" id="adebug_assert_8h_html_adb3cef18983da8440d55b7557f83358c"><div class="ttname"><a href="../../d3/d67/debug_assert_8h.html#adb3cef18983da8440d55b7557f83358c">debugAssert</a></div><div class="ttdeci">#define debugAssert(exp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d67/debug_assert_8h_source.html#l00160">debugAssert.h:160</a></div></div>
<div class="ttc" id="adebug_assert_8h_html_aec9f6cdb1305e9da834facaf2816069d"><div class="ttname"><a href="../../d3/d67/debug_assert_8h.html#aec9f6cdb1305e9da834facaf2816069d">alwaysAssertM</a></div><div class="ttdeci">#define alwaysAssertM(exp, message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d67/debug_assert_8h_source.html#l00165">debugAssert.h:165</a></div></div>
<div class="ttc" id="adebug_assert_8h_html_af7e8ca29ffa4af20db0de5a93e1b81e9"><div class="ttname"><a href="../../d3/d67/debug_assert_8h.html#af7e8ca29ffa4af20db0de5a93e1b81e9">debugAssertM</a></div><div class="ttdeci">#define debugAssertM(exp, message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d67/debug_assert_8h_source.html#l00161">debugAssert.h:161</a></div></div>
<div class="ttc" id="adeps_2_s_f_m_t_2_readme_8txt_html_aac939c3bd649f24d0faa40c551bd3da7"><div class="ttname"><a href="../../d4/d4b/deps_2_s_f_m_t_2_readme_8txt.html#aac939c3bd649f24d0faa40c551bd3da7">files</a></div><div class="ttdeci">Mutsuo Makoto Matsumoto and Hiroshima University Makoto Hiroshima University and The University of Tokyo All rights reserved see LICENSE see html index html To make test see html howto compile html If you want to redistribute and or change source files</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d4b/deps_2_s_f_m_t_2_readme_8txt_source.html#l00023">README.txt:23</a></div></div>
<div class="ttc" id="adirent_8h_html"><div class="ttname"><a href="../../d7/da9/dirent_8h.html">dirent.h</a></div></div>
<div class="ttc" id="adirent_8h_html_a56af8d3cfb4a2b2f44e20b276db71f2a"><div class="ttname"><a href="../../d7/da9/dirent_8h.html#a56af8d3cfb4a2b2f44e20b276db71f2a">opendir</a></div><div class="ttdeci">static DIR * opendir(const char *dirname)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da9/dirent_8h_source.html#l00102">dirent.h:102</a></div></div>
<div class="ttc" id="adirent_8h_html_a748b9bd26c040c2ad9107c9d8c1aab42"><div class="ttname"><a href="../../d7/da9/dirent_8h.html#a748b9bd26c040c2ad9107c9d8c1aab42">closedir</a></div><div class="ttdeci">static int closedir(DIR *dirp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da9/dirent_8h_source.html#l00186">dirent.h:186</a></div></div>
<div class="ttc" id="adirent_8h_html_aff48ec2514bda89769c968c66db181f3"><div class="ttname"><a href="../../d7/da9/dirent_8h.html#aff48ec2514bda89769c968c66db181f3">readdir</a></div><div class="ttdeci">static struct dirent * readdir(DIR *dirp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da9/dirent_8h_source.html#l00148">dirent.h:148</a></div></div>
<div class="ttc" id="afileutils_8h_html"><div class="ttname"><a href="../../dd/dd3/fileutils_8h.html">fileutils.h</a></div></div>
<div class="ttc" id="afmt_2include_2fmt_2core_8h_html_a501bb1bb2f0cc5706178ed237958e73b"><div class="ttname"><a href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a501bb1bb2f0cc5706178ed237958e73b">count</a></div><div class="ttdeci">constexpr auto count() -&gt; size_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d71/fmt_2include_2fmt_2core_8h_source.html#l01039">core.h:1039</a></div></div>
<div class="ttc" id="afmt_2include_2fmt_2core_8h_html_a7fc0249f0f8ba720115d2430f5b86cbaab068931cc450442b63f5b3d276ea4297"><div class="ttname"><a href="../../d5/d71/fmt_2include_2fmt_2core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaab068931cc450442b63f5b3d276ea4297">arg_id_kind::name</a></div><div class="ttdeci">@ name</div></div>
<div class="ttc" id="ag3dfnmatch_8h_html"><div class="ttname"><a href="../../d7/d64/g3dfnmatch_8h.html">g3dfnmatch.h</a></div></div>
<div class="ttc" id="ajemalloc_2include_2msvc__compat_2_c99_2stdint_8h_html_abd3131a20f4053d808d4277db3e39a23"><div class="ttname"><a href="../../d1/db8/jemalloc_2include_2msvc__compat_2_c99_2stdint_8h.html#abd3131a20f4053d808d4277db3e39a23">intptr_t</a></div><div class="ttdeci">_W64 signed int intptr_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db8/jemalloc_2include_2msvc__compat_2_c99_2stdint_8h_source.html#l00118">stdint.h:118</a></div></div>
<div class="ttc" id="ajemalloc__internal_8h_html_ae89ee89f41328ac0ade1e3e26c103570"><div class="ttname"><a href="../../d9/d33/jemalloc__internal_8h.html#ae89ee89f41328ac0ade1e3e26c103570">NULL</a></div><div class="ttdeci">arena_t NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d33/jemalloc__internal_8h_source.html#l00624">jemalloc_internal.h:624</a></div></div>
<div class="ttc" id="ampq-internal_8h_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="../../d8/dec/mpq-internal_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dec/mpq-internal_8h_source.html#l00059">mpq-internal.h:59</a></div></div>
<div class="ttc" id="anamespace_g3_d_html"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html">G3D</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dbe/_a_a_box_8h_source.html#l00025">AABox.h:25</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_a05e047033db3919db794d0f77e38797f"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#a05e047033db3919db794d0f77e38797f">G3D::z</a></div><div class="ttdeci">G3D::int16 z</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d5d/_vector3int16_8h_source.html#l00046">Vector3int16.h:46</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_a099ad667c3d882502da845397741fafc"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#a099ad667c3d882502da845397741fafc">G3D::endsWith</a></div><div class="ttdeci">bool endsWith(const std::string &amp;test, const std::string &amp;pattern)</div><div class="ttdoc">Returns true if the test string ends with the pattern string.</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dbf/stringutils_8cpp_source.html#l00127">stringutils.cpp:127</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_a142152311de10d8595e1d8bfe8daf5ca"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#a142152311de10d8595e1d8bfe8daf5ca">G3D::findLastSlash</a></div><div class="ttdeci">size_t findLastSlash(const std::string &amp;f, size_t start=std::string::npos)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9e/stringutils_8h_source.html#l00058">stringutils.h:58</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_a29a4576316c55785d3d63bd982849fc6"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#a29a4576316c55785d3d63bd982849fc6">G3D::var</a></div><div class="ttdeci">static void var(TextOutput &amp;t, const std::string &amp;name, const std::string &amp;val)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7b/deps_2g3dlite_2source_2_system_8cpp_source.html#l01584">System.cpp:1584</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_a2c7d70e92321a763dcdc34c1c761cc97"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#a2c7d70e92321a763dcdc34c1c761cc97">G3D::common</a></div><div class="ttdeci">static FileSystem * common</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00045">FileSystem.cpp:45</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_a3465b08445daa9893e8654adff6bcffa"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#a3465b08445daa9893e8654adff6bcffa">G3D::fixslash</a></div><div class="ttdeci">static int fixslash(int c)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00827">FileSystem.cpp:827</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_a42821b62bfb515bbef75d1178eb9a5f4"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#a42821b62bfb515bbef75d1178eb9a5f4">G3D::isLetter</a></div><div class="ttdeci">bool isLetter(const unsigned char c)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9e/stringutils_8h_source.html#l00171">stringutils.h:171</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_a490645e193e5c5942f123ca123440fa0"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#a490645e193e5c5942f123ca123440fa0">G3D::int64</a></div><div class="ttdeci">int64_t int64</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dfa/g3dmath_8h_source.html#l00169">g3dmath.h:169</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_a4f9cce2b618dc4aa9da295eb3a0f9abf"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#a4f9cce2b618dc4aa9da295eb3a0f9abf">G3D::beginsWith</a></div><div class="ttdeci">bool beginsWith(const std::string &amp;test, const std::string &amp;pattern)</div><div class="ttdoc">Returns true if the test string begins with the pattern string.</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dbf/stringutils_8cpp_source.html#l00081">stringutils.cpp:81</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_a55ae91213b07da3a9e14fcd5068d497f"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#a55ae91213b07da3a9e14fcd5068d497f">G3D::x</a></div><div class="ttdeci">G3D::int16 x</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d14/_vector2int16_8h_source.html#l00037">Vector2int16.h:37</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_a5e0f6e18f39019dbf40a9d9a684866b3"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#a5e0f6e18f39019dbf40a9d9a684866b3">G3D::_filesUsed</a></div><div class="ttdeci">static Set&lt; std::string &gt; _filesUsed</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/_file_system_8cpp_source.html#l00551">FileSystem.cpp:551</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_a7bffa4b07bdf42ee62766b992f2553c7"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#a7bffa4b07bdf42ee62766b992f2553c7">G3D::findSlash</a></div><div class="ttdeci">size_t findSlash(const std::string &amp;f, size_t start=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9e/stringutils_8h_source.html#l00034">stringutils.h:34</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_aa3b94c92cc334739473c9b295923ffce"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#aa3b94c92cc334739473c9b295923ffce">G3D::toLower</a></div><div class="ttdeci">std::string toLower(const std::string &amp;x)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dbf/stringutils_8cpp_source.html#l00223">stringutils.cpp:223</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_abf14bbddcbcabba8c5f6cbf75f16b7a0"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#abf14bbddcbcabba8c5f6cbf75f16b7a0">G3D::isDigit</a></div><div class="ttdeci">bool isDigit(const unsigned char c)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9e/stringutils_8h_source.html#l00164">stringutils.h:164</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_ac04d920621daeb663fa63bfba7ca1192"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#ac04d920621daeb663fa63bfba7ca1192">G3D::isSlash</a></div><div class="ttdeci">bool isSlash(const unsigned char c)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9e/stringutils_8h_source.html#l00175">stringutils.h:175</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_ac16a7733535dbbe8df3a5c9cf47111e5"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#ac16a7733535dbbe8df3a5c9cf47111e5">G3D::g3dfnmatch</a></div><div class="ttdeci">int g3dfnmatch(const char *pattern, const char *string, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d01/g3dfnmatch_8cpp_source.html#l00217">g3dfnmatch.cpp:217</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_ac6a9e50d8d6d5c31ade0f59f97b3eee9"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#ac6a9e50d8d6d5c31ade0f59f97b3eee9">G3D::zipfileExists</a></div><div class="ttdeci">bool zipfileExists(const std::string &amp;filename, std::string &amp;outZipfile, std::string &amp;outInternalFile)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9f/fileutils_8cpp_source.html#l00335">fileutils.cpp:335</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_ac963e578ad7f1b9c9ad9fbc82b0f034c"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#ac963e578ad7f1b9c9ad9fbc82b0f034c">G3D::min</a></div><div class="ttdeci">T min(const T &amp;x, const T &amp;y)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dfa/g3dmath_8h_source.html#l00305">g3dmath.h:305</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_ad49e47c89967bad86fea21371fbceaa5"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#ad49e47c89967bad86fea21371fbceaa5">G3D::RealTime</a></div><div class="ttdeci">double RealTime</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db2/_g3_d_game_units_8h_source.html#l00027">G3DGameUnits.h:27</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_adddfd9dd263aa8d3e2ea04a92d3aa1f9a99b43ff80d759e7de6565799f9cf1a5c"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#adddfd9dd263aa8d3e2ea04a92d3aa1f9a99b43ff80d759e7de6565799f9cf1a5c">G3D::G3D_LITTLE_ENDIAN</a></div><div class="ttdeci">@ G3D_LITTLE_ENDIAN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d78/_system_8h_source.html#l00055">System.h:54</a></div></div>
<div class="ttc" id="anamespace_g3_d_html_aef6949de035da2287649c9db11ec3ba4"><div class="ttname"><a href="../../df/de2/namespace_g3_d.html#aef6949de035da2287649c9db11ec3ba4">G3D::uint8</a></div><div class="ttdeci">uint8_t uint8</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dfa/g3dmath_8h_source.html#l00164">g3dmath.h:164</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02_config_8cpp_03_html_a8bfa20db83fbdc4e649e394ea8d05d0d"><div class="ttname"><a href="../../d2/db4/namespaceanonymous__namespace_02_config_8cpp_03.html#a8bfa20db83fbdc4e649e394ea8d05d0d">anonymous_namespace{Config.cpp}::_filename</a></div><div class="ttdeci">std::string _filename</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd3/_config_8cpp_source.html#l00029">Config.cpp:29</a></div></div>
<div class="ttc" id="anamespacedetail_1_1digits_html_aad69d2373aa047bdd9e81494bf3da5ae"><div class="ttname"><a href="../../df/d60/namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">detail::digits::result</a></div><div class="ttdeci">result</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d50/format-inl_8h_source.html#l00622">format-inl.h:622</a></div></div>
<div class="ttc" id="anamespacempq_html_a4d9e28a606ab362cda8f825daad0fb49"><div class="ttname"><a href="../../d4/d71/namespacempq.html#a4d9e28a606ab362cda8f825daad0fb49">mpq.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d3e/mpq_8py_source.html#l00283">mpq.py:283</a></div></div>
<div class="ttc" id="anamespacempq_html_a9fbd3a52049cfe1e11371096a422d94e"><div class="ttname"><a href="../../d4/d71/namespacempq.html#a9fbd3a52049cfe1e11371096a422d94e">mpq.d</a></div><div class="ttdeci">d</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d3e/mpq_8py_source.html#l00298">mpq.py:298</a></div></div>
<div class="ttc" id="anamespacempq_html_af509b98ca1ebe6c0248f215d23e06c93"><div class="ttname"><a href="../../d4/d71/namespacempq.html#af509b98ca1ebe6c0248f215d23e06c93">mpq.c</a></div><div class="ttdeci">list c</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d3e/mpq_8py_source.html#l00295">mpq.py:295</a></div></div>
<div class="ttc" id="astack__direction_8c_html_a163af97e64bb0d7abc2c0b18e6210367"><div class="ttname"><a href="../../d5/dfc/stack__direction_8c.html#a163af97e64bb0d7abc2c0b18e6210367">f</a></div><div class="ttdeci">int f(int *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfc/stack__direction_8c_source.html#l00017">stack_direction.c:17</a></div></div>
<div class="ttc" id="astringutils_8h_html"><div class="ttname"><a href="../../d9/d9e/stringutils_8h.html">stringutils.h</a></div></div>
<div class="ttc" id="astruct_d_i_r_html"><div class="ttname"><a href="../../d9/d31/struct_d_i_r.html">DIR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da9/dirent_8h_source.html#l00073">dirent.h:74</a></div></div>
<div class="ttc" id="astructdirent_html"><div class="ttname"><a href="../../d5/de2/structdirent.html">dirent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da9/dirent_8h_source.html#l00066">dirent.h:67</a></div></div>
<div class="ttc" id="astructdirent_html_a1450b4488b7067c7dc9d627b61fd4aa1"><div class="ttname"><a href="../../d5/de2/structdirent.html#a1450b4488b7067c7dc9d627b61fd4aa1">dirent::d_name</a></div><div class="ttdeci">char d_name[MAX_PATH+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da9/dirent_8h_source.html#l00068">dirent.h:68</a></div></div>
<div class="ttc" id="astructfileinfo_html"><div class="ttname"><a href="../../da/d5c/structfileinfo.html">fileinfo</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d09/my__dir_8h_source.html#l00081">my_dir.h:82</a></div></div>
<div class="ttc" id="astructfileinfo_html_aa230fad5128bb37a7fe1c694e6930edb"><div class="ttname"><a href="../../da/d5c/structfileinfo.html#aa230fad5128bb37a7fe1c694e6930edb">fileinfo::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d09/my__dir_8h_source.html#l00083">my_dir.h:83</a></div></div>
<div class="ttc" id="astructsettings_html"><div class="ttname"><a href="../../d5/df8/structsettings.html">settings</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d51/dbug_8c_source.html#l00216">dbug.c:216</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
