<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Azerotcore-wotlk: deps/zlib/gzwrite.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Azerotcore-wotlk
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_94a36784afa54c0b50996002372b429e.html">deps</a></li><li class="navelem"><a class="el" href="../../dir_8b577a9a0c240daeb4e6fd5909be327b.html">zlib</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">gzwrite.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../d5/d6d/gzguts_8h_source.html">gzguts.h</a>&quot;</code><br />
</div>
<p><a href="../../d8/db6/gzwrite_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:adf8c7b20b9049ed662bfe3408c8a4524"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../d8/db6/gzwrite_8c.html#ac40fbfaf148025a6fe940ca6c4313e9c">gz_init</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/db6/gzwrite_8c.html#adf8c7b20b9049ed662bfe3408c8a4524">OF</a> ((<a class="el" href="../../d5/d6d/gzguts_8h.html#a15adc208a26903dbfe8c57720cf401c8">gz_statep</a>))</td></tr>
<tr class="separator:adf8c7b20b9049ed662bfe3408c8a4524"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6bd6b7ef8bf5b68ddbcc2dbe8d98757"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../d8/db6/gzwrite_8c.html#a4df5a8f6e323ea9874c8de14f8f1fe49">gz_comp</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/db6/gzwrite_8c.html#aa6bd6b7ef8bf5b68ddbcc2dbe8d98757">OF</a> ((<a class="el" href="../../d5/d6d/gzguts_8h.html#a15adc208a26903dbfe8c57720cf401c8">gz_statep</a>, int))</td></tr>
<tr class="separator:aa6bd6b7ef8bf5b68ddbcc2dbe8d98757"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad9b669f8ceed4b1d5f732cde398b7be"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../d8/db6/gzwrite_8c.html#ac51b44560d2898b88fa94510b838e82a">gz_zero</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/db6/gzwrite_8c.html#aad9b669f8ceed4b1d5f732cde398b7be">OF</a> ((<a class="el" href="../../d5/d6d/gzguts_8h.html#a15adc208a26903dbfe8c57720cf401c8">gz_statep</a>, <a class="el" href="../../de/d95/zconf_8h.html#ab9923767082c7a76924b31493e60d42c">z_off64_t</a>))</td></tr>
<tr class="separator:aad9b669f8ceed4b1d5f732cde398b7be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac40fbfaf148025a6fe940ca6c4313e9c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/db6/gzwrite_8c.html#ac40fbfaf148025a6fe940ca6c4313e9c">gz_init</a> (<a class="el" href="../../d5/d6d/gzguts_8h.html#a15adc208a26903dbfe8c57720cf401c8">gz_statep</a> state)</td></tr>
<tr class="separator:ac40fbfaf148025a6fe940ca6c4313e9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4df5a8f6e323ea9874c8de14f8f1fe49"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/db6/gzwrite_8c.html#a4df5a8f6e323ea9874c8de14f8f1fe49">gz_comp</a> (<a class="el" href="../../d5/d6d/gzguts_8h.html#a15adc208a26903dbfe8c57720cf401c8">gz_statep</a> state, int flush)</td></tr>
<tr class="separator:a4df5a8f6e323ea9874c8de14f8f1fe49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac51b44560d2898b88fa94510b838e82a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/db6/gzwrite_8c.html#ac51b44560d2898b88fa94510b838e82a">gz_zero</a> (<a class="el" href="../../d5/d6d/gzguts_8h.html#a15adc208a26903dbfe8c57720cf401c8">gz_statep</a> state, <a class="el" href="../../de/d95/zconf_8h.html#ab9923767082c7a76924b31493e60d42c">z_off64_t</a> len)</td></tr>
<tr class="separator:ac51b44560d2898b88fa94510b838e82a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93323ef1288f105db8a89e80f2764d3b"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../de/d95/zconf_8h.html#a181415878f03b95a7094309d824a14b6">ZEXPORT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/db6/gzwrite_8c.html#a93323ef1288f105db8a89e80f2764d3b">gzwrite</a> (<a class="el" href="../../d4/dae/zlib_8h.html#a8e80bd9e2c359bc5bdabb2e97b4e62bf">gzFile</a> <a class="el" href="../../d2/dbc/deps_2gsoap_2_c_make_lists_8txt.html#ad0ce1f991d58ccbbb91f81e55e48bf2e">file</a>, <a class="el" href="../../de/d95/zconf_8h.html#a7db54413d7060e4b57868c2b23c0ec1c">voidpc</a> buf, unsigned len)</td></tr>
<tr class="separator:a93323ef1288f105db8a89e80f2764d3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37f7621e057bd71abdbe2f2480b69935"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../de/d95/zconf_8h.html#a181415878f03b95a7094309d824a14b6">ZEXPORT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/db6/gzwrite_8c.html#a37f7621e057bd71abdbe2f2480b69935">gzputc</a> (<a class="el" href="../../d4/dae/zlib_8h.html#a8e80bd9e2c359bc5bdabb2e97b4e62bf">gzFile</a> <a class="el" href="../../d2/dbc/deps_2gsoap_2_c_make_lists_8txt.html#ad0ce1f991d58ccbbb91f81e55e48bf2e">file</a>, int c)</td></tr>
<tr class="separator:a37f7621e057bd71abdbe2f2480b69935"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2760b9a721dd2950d101046d9b57c461"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../de/d95/zconf_8h.html#a181415878f03b95a7094309d824a14b6">ZEXPORT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/db6/gzwrite_8c.html#a2760b9a721dd2950d101046d9b57c461">gzputs</a> (<a class="el" href="../../d4/dae/zlib_8h.html#a8e80bd9e2c359bc5bdabb2e97b4e62bf">gzFile</a> <a class="el" href="../../d2/dbc/deps_2gsoap_2_c_make_lists_8txt.html#ad0ce1f991d58ccbbb91f81e55e48bf2e">file</a>, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *str)</td></tr>
<tr class="separator:a2760b9a721dd2950d101046d9b57c461"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23cb6f01c1de1f861e22091d0ca092ef"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../de/d95/zconf_8h.html#af38d1853df635eee27f1a02f96457b22">ZEXPORTVA</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/db6/gzwrite_8c.html#a23cb6f01c1de1f861e22091d0ca092ef">gzprintf</a> (<a class="el" href="../../d4/dae/zlib_8h.html#a8e80bd9e2c359bc5bdabb2e97b4e62bf">gzFile</a> <a class="el" href="../../d2/dbc/deps_2gsoap_2_c_make_lists_8txt.html#ad0ce1f991d58ccbbb91f81e55e48bf2e">file</a>, <a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *<a class="el" href="../../dc/d12/xchar_8h.html#adbec664fb40387a823078cb103b965f9">format</a>, int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20)</td></tr>
<tr class="separator:a23cb6f01c1de1f861e22091d0ca092ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b70d5783d03b12adfd369bd9b7394a2"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../de/d95/zconf_8h.html#a181415878f03b95a7094309d824a14b6">ZEXPORT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/db6/gzwrite_8c.html#a6b70d5783d03b12adfd369bd9b7394a2">gzflush</a> (<a class="el" href="../../d4/dae/zlib_8h.html#a8e80bd9e2c359bc5bdabb2e97b4e62bf">gzFile</a> <a class="el" href="../../d2/dbc/deps_2gsoap_2_c_make_lists_8txt.html#ad0ce1f991d58ccbbb91f81e55e48bf2e">file</a>, int flush)</td></tr>
<tr class="separator:a6b70d5783d03b12adfd369bd9b7394a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20e49f282c69489d3733593736212876"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../de/d95/zconf_8h.html#a181415878f03b95a7094309d824a14b6">ZEXPORT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/db6/gzwrite_8c.html#a20e49f282c69489d3733593736212876">gzsetparams</a> (<a class="el" href="../../d4/dae/zlib_8h.html#a8e80bd9e2c359bc5bdabb2e97b4e62bf">gzFile</a> <a class="el" href="../../d2/dbc/deps_2gsoap_2_c_make_lists_8txt.html#ad0ce1f991d58ccbbb91f81e55e48bf2e">file</a>, int level, int strategy)</td></tr>
<tr class="separator:a20e49f282c69489d3733593736212876"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f657e5b498bef603821cdf41c8375d4"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../de/d95/zconf_8h.html#a181415878f03b95a7094309d824a14b6">ZEXPORT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/db6/gzwrite_8c.html#a6f657e5b498bef603821cdf41c8375d4">gzclose_w</a> (<a class="el" href="../../d4/dae/zlib_8h.html#a8e80bd9e2c359bc5bdabb2e97b4e62bf">gzFile</a> <a class="el" href="../../d2/dbc/deps_2gsoap_2_c_make_lists_8txt.html#ad0ce1f991d58ccbbb91f81e55e48bf2e">file</a>)</td></tr>
<tr class="separator:a6f657e5b498bef603821cdf41c8375d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a4df5a8f6e323ea9874c8de14f8f1fe49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4df5a8f6e323ea9874c8de14f8f1fe49">&#9670;&nbsp;</a></span>gz_comp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gz_comp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d6d/gzguts_8h.html#a15adc208a26903dbfe8c57720cf401c8">gz_statep</a>&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flush</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00070">70</a> of file <a class="el" href="../../d8/db6/gzwrite_8c_source.html">gzwrite.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;{</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../df/d31/prof_8c.html#a339672ff94e6199019102f50d317c3d7">ret</a>, got;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordtype">unsigned</span> have;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="../../d4/dae/zlib_8h.html#a6ede25c84d3c9f8632305866acffb1d6">z_streamp</a> strm = &amp;(state-&gt;strm);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="comment">/* allocate memory if this is the first time through */</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordflow">if</span> (state-&gt;size == 0 &amp;&amp; <a class="code" href="../../d8/db6/gzwrite_8c.html#ac40fbfaf148025a6fe940ca6c4313e9c">gz_init</a>(state) == -1)</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="comment">/* write directly if requested */</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordflow">if</span> (state-&gt;direct) {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        got = <a class="code" href="../../d7/dff/hooks_8h.html#ac40a1eaac5f8dbc1eef9b944d494770c">write</a>(state-&gt;fd, strm-&gt;next_in, strm-&gt;avail_in);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <span class="keywordflow">if</span> (got &lt; 0 || (<span class="keywordtype">unsigned</span>)got != strm-&gt;avail_in) {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            <a class="code" href="../../d3/dd9/gzlib_8c.html#abfa9d832c83a5f58ad064e1a617ae910">gz_error</a>(state, <a class="code" href="../../d4/dae/zlib_8h.html#a3c66d64c427c0337c64e578537478737">Z_ERRNO</a>, <a class="code" href="../../d5/d6d/gzguts_8h.html#af252c05931f39dd0b297fe9b8e174b8b">zstrerror</a>());</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        }</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        strm-&gt;avail_in = 0;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    }</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="comment">/* run deflate() on provided input until it produces no more output */</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <a class="code" href="../../df/d31/prof_8c.html#a339672ff94e6199019102f50d317c3d7">ret</a> = <a class="code" href="../../d4/dae/zlib_8h.html#a8cb802b6a11e926478dc6547c514c65c">Z_OK</a>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <span class="comment">/* write out current buffer contents if full, or if flushing, but if</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">           doing Z_FINISH then don&#39;t write until we get to Z_STREAM_END */</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="keywordflow">if</span> (strm-&gt;avail_out == 0 || (flush != <a class="code" href="../../d4/dae/zlib_8h.html#ac3b62e37b9922d9496014515acd6083a">Z_NO_FLUSH</a> &amp;&amp;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            (flush != <a class="code" href="../../d4/dae/zlib_8h.html#a876a626ba14eb12eea4bbf6823b6ca50">Z_FINISH</a> || <a class="code" href="../../df/d31/prof_8c.html#a339672ff94e6199019102f50d317c3d7">ret</a> == <a class="code" href="../../d4/dae/zlib_8h.html#a7d94a4a852228a899864a0053162e7a8">Z_STREAM_END</a>))) {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            have = (unsigned)(strm-&gt;next_out - state-&gt;x.next);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            <span class="keywordflow">if</span> (have &amp;&amp; ((got = <a class="code" href="../../d7/dff/hooks_8h.html#ac40a1eaac5f8dbc1eef9b944d494770c">write</a>(state-&gt;fd, state-&gt;x.next, have)) &lt; 0 ||</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                         (<span class="keywordtype">unsigned</span>)got != have)) {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                <a class="code" href="../../d3/dd9/gzlib_8c.html#abfa9d832c83a5f58ad064e1a617ae910">gz_error</a>(state, <a class="code" href="../../d4/dae/zlib_8h.html#a3c66d64c427c0337c64e578537478737">Z_ERRNO</a>, <a class="code" href="../../d5/d6d/gzguts_8h.html#af252c05931f39dd0b297fe9b8e174b8b">zstrerror</a>());</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            <span class="keywordflow">if</span> (strm-&gt;avail_out == 0) {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                strm-&gt;avail_out = state-&gt;size;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                strm-&gt;next_out = state-&gt;out;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            }</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            state-&gt;x.next = strm-&gt;next_out;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="comment">/* compress */</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        have = strm-&gt;avail_out;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <a class="code" href="../../df/d31/prof_8c.html#a339672ff94e6199019102f50d317c3d7">ret</a> = <a class="code" href="../../d2/d0e/deflate_8c.html#aedba3a94d6e827d61b660443ae5b9f09">deflate</a>(strm, flush);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../df/d31/prof_8c.html#a339672ff94e6199019102f50d317c3d7">ret</a> == <a class="code" href="../../d4/dae/zlib_8h.html#aad97cde83a9a4bb77f5c3b03bb68e483">Z_STREAM_ERROR</a>) {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <a class="code" href="../../d3/dd9/gzlib_8c.html#abfa9d832c83a5f58ad064e1a617ae910">gz_error</a>(state, <a class="code" href="../../d4/dae/zlib_8h.html#aad97cde83a9a4bb77f5c3b03bb68e483">Z_STREAM_ERROR</a>,</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                      <span class="stringliteral">&quot;internal error: deflate stream corrupt&quot;</span>);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        }</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        have -= strm-&gt;avail_out;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    } <span class="keywordflow">while</span> (have);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="comment">/* if that completed a deflate stream, allow another to start */</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">if</span> (flush == <a class="code" href="../../d4/dae/zlib_8h.html#a876a626ba14eb12eea4bbf6823b6ca50">Z_FINISH</a>)</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <a class="code" href="../../d2/d0e/deflate_8c.html#a4f17a4d330d76066b4b26c27f7cde5dc">deflateReset</a>(strm);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="comment">/* all done, no errors */</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;}</div>
<div class="ttc" id="adeflate_8c_html_a4f17a4d330d76066b4b26c27f7cde5dc"><div class="ttname"><a href="../../d2/d0e/deflate_8c.html#a4f17a4d330d76066b4b26c27f7cde5dc">deflateReset</a></div><div class="ttdeci">int ZEXPORT deflateReset(z_streamp strm)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0e/deflate_8c_source.html#l00427">deflate.c:427</a></div></div>
<div class="ttc" id="adeflate_8c_html_aedba3a94d6e827d61b660443ae5b9f09"><div class="ttname"><a href="../../d2/d0e/deflate_8c.html#aedba3a94d6e827d61b660443ae5b9f09">deflate</a></div><div class="ttdeci">int ZEXPORT deflate(z_streamp strm, int flush)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0e/deflate_8c_source.html#l00663">deflate.c:663</a></div></div>
<div class="ttc" id="agzguts_8h_html_af252c05931f39dd0b297fe9b8e174b8b"><div class="ttname"><a href="../../d5/d6d/gzguts_8h.html#af252c05931f39dd0b297fe9b8e174b8b">zstrerror</a></div><div class="ttdeci">#define zstrerror()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d6d/gzguts_8h_source.html#l00109">gzguts.h:109</a></div></div>
<div class="ttc" id="agzlib_8c_html_abfa9d832c83a5f58ad064e1a617ae910"><div class="ttname"><a href="../../d3/dd9/gzlib_8c.html#abfa9d832c83a5f58ad064e1a617ae910">gz_error</a></div><div class="ttdeci">void ZLIB_INTERNAL gz_error(gz_statep state, int err, const char *msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd9/gzlib_8c_source.html#l00564">gzlib.c:564</a></div></div>
<div class="ttc" id="agzwrite_8c_html_ac40fbfaf148025a6fe940ca6c4313e9c"><div class="ttname"><a href="../../d8/db6/gzwrite_8c.html#ac40fbfaf148025a6fe940ca6c4313e9c">gz_init</a></div><div class="ttdeci">int gz_init(gz_statep state)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/db6/gzwrite_8c_source.html#l00015">gzwrite.c:15</a></div></div>
<div class="ttc" id="ahooks_8h_html_ac40a1eaac5f8dbc1eef9b944d494770c"><div class="ttname"><a href="../../d7/dff/hooks_8h.html#ac40a1eaac5f8dbc1eef9b944d494770c">write</a></div><div class="ttdeci">#define write</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dff/hooks_8h_source.html#l00011">hooks.h:11</a></div></div>
<div class="ttc" id="aprof_8c_html_a339672ff94e6199019102f50d317c3d7"><div class="ttname"><a href="../../df/d31/prof_8c.html#a339672ff94e6199019102f50d317c3d7">ret</a></div><div class="ttdeci">int ret</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d31/prof_8c_source.html#l00281">prof.c:281</a></div></div>
<div class="ttc" id="azlib_8h_html_a3c66d64c427c0337c64e578537478737"><div class="ttname"><a href="../../d4/dae/zlib_8h.html#a3c66d64c427c0337c64e578537478737">Z_ERRNO</a></div><div class="ttdeci">#define Z_ERRNO</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dae/zlib_8h_source.html#l00176">zlib.h:176</a></div></div>
<div class="ttc" id="azlib_8h_html_a6ede25c84d3c9f8632305866acffb1d6"><div class="ttname"><a href="../../d4/dae/zlib_8h.html#a6ede25c84d3c9f8632305866acffb1d6">z_streamp</a></div><div class="ttdeci">z_stream FAR * z_streamp</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dae/zlib_8h_source.html#l00106">zlib.h:106</a></div></div>
<div class="ttc" id="azlib_8h_html_a7d94a4a852228a899864a0053162e7a8"><div class="ttname"><a href="../../d4/dae/zlib_8h.html#a7d94a4a852228a899864a0053162e7a8">Z_STREAM_END</a></div><div class="ttdeci">#define Z_STREAM_END</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dae/zlib_8h_source.html#l00174">zlib.h:174</a></div></div>
<div class="ttc" id="azlib_8h_html_a876a626ba14eb12eea4bbf6823b6ca50"><div class="ttname"><a href="../../d4/dae/zlib_8h.html#a876a626ba14eb12eea4bbf6823b6ca50">Z_FINISH</a></div><div class="ttdeci">#define Z_FINISH</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dae/zlib_8h_source.html#l00168">zlib.h:168</a></div></div>
<div class="ttc" id="azlib_8h_html_a8cb802b6a11e926478dc6547c514c65c"><div class="ttname"><a href="../../d4/dae/zlib_8h.html#a8cb802b6a11e926478dc6547c514c65c">Z_OK</a></div><div class="ttdeci">#define Z_OK</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dae/zlib_8h_source.html#l00173">zlib.h:173</a></div></div>
<div class="ttc" id="azlib_8h_html_aad97cde83a9a4bb77f5c3b03bb68e483"><div class="ttname"><a href="../../d4/dae/zlib_8h.html#aad97cde83a9a4bb77f5c3b03bb68e483">Z_STREAM_ERROR</a></div><div class="ttdeci">#define Z_STREAM_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dae/zlib_8h_source.html#l00177">zlib.h:177</a></div></div>
<div class="ttc" id="azlib_8h_html_ac3b62e37b9922d9496014515acd6083a"><div class="ttname"><a href="../../d4/dae/zlib_8h.html#ac3b62e37b9922d9496014515acd6083a">Z_NO_FLUSH</a></div><div class="ttdeci">#define Z_NO_FLUSH</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dae/zlib_8h_source.html#l00164">zlib.h:164</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d0e/deflate_8c_source.html#l00663">deflate()</a>, <a class="el" href="../../d2/d0e/deflate_8c_source.html#l00427">deflateReset()</a>, <a class="el" href="../../d3/dd9/gzlib_8c_source.html#l00564">gz_error()</a>, <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00015">gz_init()</a>, <a class="el" href="../../df/d31/prof_8c_source.html#l00281">ret</a>, <a class="el" href="../../d7/dff/hooks_8h_source.html#l00011">write</a>, <a class="el" href="../../d4/dae/zlib_8h_source.html#l00176">Z_ERRNO</a>, <a class="el" href="../../d4/dae/zlib_8h_source.html#l00168">Z_FINISH</a>, <a class="el" href="../../d4/dae/zlib_8h_source.html#l00164">Z_NO_FLUSH</a>, <a class="el" href="../../d4/dae/zlib_8h_source.html#l00173">Z_OK</a>, <a class="el" href="../../d4/dae/zlib_8h_source.html#l00174">Z_STREAM_END</a>, <a class="el" href="../../d4/dae/zlib_8h_source.html#l00177">Z_STREAM_ERROR</a>, and <a class="el" href="../../d5/d6d/gzguts_8h_source.html#l00109">zstrerror</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00133">gz_zero()</a>, <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00527">gzclose_w()</a>, <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00453">gzflush()</a>, <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00374">gzprintf()</a>, <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00485">gzsetparams()</a>, and <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00165">gzwrite()</a>.</p>

</div>
</div>
<a id="ac40fbfaf148025a6fe940ca6c4313e9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac40fbfaf148025a6fe940ca6c4313e9c">&#9670;&nbsp;</a></span>gz_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gz_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d6d/gzguts_8h.html#a15adc208a26903dbfe8c57720cf401c8">gz_statep</a>&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00015">15</a> of file <a class="el" href="../../d8/db6/gzwrite_8c_source.html">gzwrite.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;{</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../df/d31/prof_8c.html#a339672ff94e6199019102f50d317c3d7">ret</a>;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    <a class="code" href="../../d4/dae/zlib_8h.html#a6ede25c84d3c9f8632305866acffb1d6">z_streamp</a> strm = &amp;(state-&gt;strm);</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160; </div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    <span class="comment">/* allocate input buffer */</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    state-&gt;in = malloc(state-&gt;want);</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    <span class="keywordflow">if</span> (state-&gt;in == <a class="code" href="../../d9/d33/jemalloc__internal_8h.html#ae89ee89f41328ac0ade1e3e26c103570">NULL</a>) {</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;        <a class="code" href="../../d3/dd9/gzlib_8c.html#abfa9d832c83a5f58ad064e1a617ae910">gz_error</a>(state, <a class="code" href="../../d4/dae/zlib_8h.html#ae2be6be871e377c6e2c25a7296ce320c">Z_MEM_ERROR</a>, <span class="stringliteral">&quot;out of memory&quot;</span>);</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    }</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160; </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <span class="comment">/* only need output buffer and deflate state if compressing */</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <span class="keywordflow">if</span> (!state-&gt;direct) {</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        <span class="comment">/* allocate output buffer */</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        state-&gt;out = malloc(state-&gt;want);</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        <span class="keywordflow">if</span> (state-&gt;out == <a class="code" href="../../d9/d33/jemalloc__internal_8h.html#ae89ee89f41328ac0ade1e3e26c103570">NULL</a>) {</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;            free(state-&gt;in);</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;            <a class="code" href="../../d3/dd9/gzlib_8c.html#abfa9d832c83a5f58ad064e1a617ae910">gz_error</a>(state, <a class="code" href="../../d4/dae/zlib_8h.html#ae2be6be871e377c6e2c25a7296ce320c">Z_MEM_ERROR</a>, <span class="stringliteral">&quot;out of memory&quot;</span>);</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        }</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        <span class="comment">/* allocate deflate memory, set up for gzip compression */</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        strm-&gt;zalloc = <a class="code" href="../../d4/dae/zlib_8h.html#ad15afa2776b41b2f4d8582dd152bd736">Z_NULL</a>;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        strm-&gt;zfree = <a class="code" href="../../d4/dae/zlib_8h.html#ad15afa2776b41b2f4d8582dd152bd736">Z_NULL</a>;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        strm-&gt;opaque = <a class="code" href="../../d4/dae/zlib_8h.html#ad15afa2776b41b2f4d8582dd152bd736">Z_NULL</a>;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        <a class="code" href="../../df/d31/prof_8c.html#a339672ff94e6199019102f50d317c3d7">ret</a> = <a class="code" href="../../d4/dae/zlib_8h.html#a59b575a521efe7ea0d3b9dd3c8d315c1">deflateInit2</a>(strm, state-&gt;level, <a class="code" href="../../d4/dae/zlib_8h.html#a27a96226f3dc88e4743131c632adf32f">Z_DEFLATED</a>,</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;                           <a class="code" href="../../de/d95/zconf_8h.html#abd2f406ac1f9c49236376115d78ccb5b">MAX_WBITS</a> + 16, <a class="code" href="../../d5/d6d/gzguts_8h.html#a19c8e60fa32d4ddf303ce988ba97af61">DEF_MEM_LEVEL</a>, state-&gt;strategy);</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../df/d31/prof_8c.html#a339672ff94e6199019102f50d317c3d7">ret</a> != <a class="code" href="../../d4/dae/zlib_8h.html#a8cb802b6a11e926478dc6547c514c65c">Z_OK</a>) {</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;            free(state-&gt;out);</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;            free(state-&gt;in);</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;            <a class="code" href="../../d3/dd9/gzlib_8c.html#abfa9d832c83a5f58ad064e1a617ae910">gz_error</a>(state, <a class="code" href="../../d4/dae/zlib_8h.html#ae2be6be871e377c6e2c25a7296ce320c">Z_MEM_ERROR</a>, <span class="stringliteral">&quot;out of memory&quot;</span>);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        }</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    }</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="comment">/* mark state as initialized */</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    state-&gt;size = state-&gt;want;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="comment">/* initialize write buffer if compressing */</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordflow">if</span> (!state-&gt;direct) {</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        strm-&gt;avail_out = state-&gt;size;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        strm-&gt;next_out = state-&gt;out;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        state-&gt;x.next = strm-&gt;next_out;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    }</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;}</div>
<div class="ttc" id="agzguts_8h_html_a19c8e60fa32d4ddf303ce988ba97af61"><div class="ttname"><a href="../../d5/d6d/gzguts_8h.html#a19c8e60fa32d4ddf303ce988ba97af61">DEF_MEM_LEVEL</a></div><div class="ttdeci">#define DEF_MEM_LEVEL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d6d/gzguts_8h_source.html#l00125">gzguts.h:125</a></div></div>
<div class="ttc" id="ajemalloc__internal_8h_html_ae89ee89f41328ac0ade1e3e26c103570"><div class="ttname"><a href="../../d9/d33/jemalloc__internal_8h.html#ae89ee89f41328ac0ade1e3e26c103570">NULL</a></div><div class="ttdeci">arena_t NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d33/jemalloc__internal_8h_source.html#l00624">jemalloc_internal.h:624</a></div></div>
<div class="ttc" id="azconf_8h_html_abd2f406ac1f9c49236376115d78ccb5b"><div class="ttname"><a href="../../de/d95/zconf_8h.html#abd2f406ac1f9c49236376115d78ccb5b">MAX_WBITS</a></div><div class="ttdeci">#define MAX_WBITS</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d95/zconf_8h_source.html#l00244">zconf.h:244</a></div></div>
<div class="ttc" id="azlib_8h_html_a27a96226f3dc88e4743131c632adf32f"><div class="ttname"><a href="../../d4/dae/zlib_8h.html#a27a96226f3dc88e4743131c632adf32f">Z_DEFLATED</a></div><div class="ttdeci">#define Z_DEFLATED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dae/zlib_8h_source.html#l00205">zlib.h:205</a></div></div>
<div class="ttc" id="azlib_8h_html_a59b575a521efe7ea0d3b9dd3c8d315c1"><div class="ttname"><a href="../../d4/dae/zlib_8h.html#a59b575a521efe7ea0d3b9dd3c8d315c1">deflateInit2</a></div><div class="ttdeci">#define deflateInit2(strm, level, method, windowBits, memLevel, strategy)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dae/zlib_8h_source.html#l01634">zlib.h:1634</a></div></div>
<div class="ttc" id="azlib_8h_html_ad15afa2776b41b2f4d8582dd152bd736"><div class="ttname"><a href="../../d4/dae/zlib_8h.html#ad15afa2776b41b2f4d8582dd152bd736">Z_NULL</a></div><div class="ttdeci">#define Z_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dae/zlib_8h_source.html#l00208">zlib.h:208</a></div></div>
<div class="ttc" id="azlib_8h_html_ae2be6be871e377c6e2c25a7296ce320c"><div class="ttname"><a href="../../d4/dae/zlib_8h.html#ae2be6be871e377c6e2c25a7296ce320c">Z_MEM_ERROR</a></div><div class="ttdeci">#define Z_MEM_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dae/zlib_8h_source.html#l00179">zlib.h:179</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/d6d/gzguts_8h_source.html#l00125">DEF_MEM_LEVEL</a>, <a class="el" href="../../d4/dae/zlib_8h_source.html#l01634">deflateInit2</a>, <a class="el" href="../../d3/dd9/gzlib_8c_source.html#l00564">gz_error()</a>, <a class="el" href="../../de/d95/zconf_8h_source.html#l00244">MAX_WBITS</a>, <a class="el" href="../../d9/d33/jemalloc__internal_8h_source.html#l00624">NULL</a>, <a class="el" href="../../df/d31/prof_8c_source.html#l00281">ret</a>, <a class="el" href="../../d4/dae/zlib_8h_source.html#l00205">Z_DEFLATED</a>, <a class="el" href="../../d4/dae/zlib_8h_source.html#l00179">Z_MEM_ERROR</a>, <a class="el" href="../../d4/dae/zlib_8h_source.html#l00208">Z_NULL</a>, and <a class="el" href="../../d4/dae/zlib_8h_source.html#l00173">Z_OK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00070">gz_comp()</a>, <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00374">gzprintf()</a>, and <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00165">gzwrite()</a>.</p>

</div>
</div>
<a id="ac51b44560d2898b88fa94510b838e82a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac51b44560d2898b88fa94510b838e82a">&#9670;&nbsp;</a></span>gz_zero()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gz_zero </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d6d/gzguts_8h.html#a15adc208a26903dbfe8c57720cf401c8">gz_statep</a>&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#ab9923767082c7a76924b31493e60d42c">z_off64_t</a>&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00133">133</a> of file <a class="el" href="../../d8/db6/gzwrite_8c_source.html">gzwrite.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;{</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../dd/d39/namespacedetail.html#a5a2850c394261d60aece52dbd93d3df1">first</a>;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordtype">unsigned</span> n;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="../../d4/dae/zlib_8h.html#a6ede25c84d3c9f8632305866acffb1d6">z_streamp</a> strm = &amp;(state-&gt;strm);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="comment">/* consume whatever&#39;s left in the input buffer */</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">if</span> (strm-&gt;avail_in &amp;&amp; <a class="code" href="../../d8/db6/gzwrite_8c.html#a4df5a8f6e323ea9874c8de14f8f1fe49">gz_comp</a>(state, <a class="code" href="../../d4/dae/zlib_8h.html#ac3b62e37b9922d9496014515acd6083a">Z_NO_FLUSH</a>) == -1)</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="comment">/* compress len zeros (len guaranteed &gt; 0) */</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <a class="code" href="../../dd/d39/namespacedetail.html#a5a2850c394261d60aece52dbd93d3df1">first</a> = 1;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">while</span> (len) {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        n = <a class="code" href="../../d5/d6d/gzguts_8h.html#a87ad28552e786eaa1c31fed1950fdff4">GT_OFF</a>(state-&gt;size) || (<a class="code" href="../../de/d95/zconf_8h.html#ab9923767082c7a76924b31493e60d42c">z_off64_t</a>)state-&gt;size &gt; len ?</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            (<span class="keywordtype">unsigned</span>)len : state-&gt;size;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/d39/namespacedetail.html#a5a2850c394261d60aece52dbd93d3df1">first</a>) {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            <a class="code" href="../../d6/dda/m__string_8h.html#af1756e67d46227b3333bc21a1fadd361">memset</a>(state-&gt;in, 0, n);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            <a class="code" href="../../dd/d39/namespacedetail.html#a5a2850c394261d60aece52dbd93d3df1">first</a> = 0;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        strm-&gt;avail_in = n;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        strm-&gt;next_in = state-&gt;in;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        state-&gt;x.pos += n;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/db6/gzwrite_8c.html#a4df5a8f6e323ea9874c8de14f8f1fe49">gz_comp</a>(state, <a class="code" href="../../d4/dae/zlib_8h.html#ac3b62e37b9922d9496014515acd6083a">Z_NO_FLUSH</a>) == -1)</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        len -= n;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;}</div>
<div class="ttc" id="agzguts_8h_html_a87ad28552e786eaa1c31fed1950fdff4"><div class="ttname"><a href="../../d5/d6d/gzguts_8h.html#a87ad28552e786eaa1c31fed1950fdff4">GT_OFF</a></div><div class="ttdeci">#define GT_OFF(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d6d/gzguts_8h_source.html#l00192">gzguts.h:192</a></div></div>
<div class="ttc" id="agzwrite_8c_html_a4df5a8f6e323ea9874c8de14f8f1fe49"><div class="ttname"><a href="../../d8/db6/gzwrite_8c.html#a4df5a8f6e323ea9874c8de14f8f1fe49">gz_comp</a></div><div class="ttdeci">int gz_comp(gz_statep state, int flush)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/db6/gzwrite_8c_source.html#l00070">gzwrite.c:70</a></div></div>
<div class="ttc" id="am__string_8h_html_af1756e67d46227b3333bc21a1fadd361"><div class="ttname"><a href="../../d6/dda/m__string_8h.html#af1756e67d46227b3333bc21a1fadd361">memset</a></div><div class="ttdeci">#define memset(A, C, B)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dda/m__string_8h_source.html#l00051">m_string.h:51</a></div></div>
<div class="ttc" id="anamespacedetail_html_a5a2850c394261d60aece52dbd93d3df1"><div class="ttname"><a href="../../dd/d39/namespacedetail.html#a5a2850c394261d60aece52dbd93d3df1">detail::first</a></div><div class="ttdeci">const T &amp; first(const T &amp;value, const Tail &amp;...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d03/compile_8h_source.html#l00178">compile.h:178</a></div></div>
<div class="ttc" id="azconf_8h_html_ab9923767082c7a76924b31493e60d42c"><div class="ttname"><a href="../../de/d95/zconf_8h.html#ab9923767082c7a76924b31493e60d42c">z_off64_t</a></div><div class="ttdeci">#define z_off64_t</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d95/zconf_8h_source.html#l00485">zconf.h:485</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d4/d03/compile_8h_source.html#l00178">detail::first()</a>, <a class="el" href="../../d5/d6d/gzguts_8h_source.html#l00192">GT_OFF</a>, <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00070">gz_comp()</a>, <a class="el" href="../../d6/dda/m__string_8h_source.html#l00051">memset</a>, <a class="el" href="../../d4/dae/zlib_8h_source.html#l00164">Z_NO_FLUSH</a>, and <a class="el" href="../../de/d95/zconf_8h_source.html#l00485">z_off64_t</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00527">gzclose_w()</a>, <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00453">gzflush()</a>, <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00374">gzprintf()</a>, <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00243">gzputc()</a>, <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00485">gzsetparams()</a>, and <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00165">gzwrite()</a>.</p>

</div>
</div>
<a id="a6f657e5b498bef603821cdf41c8375d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f657e5b498bef603821cdf41c8375d4">&#9670;&nbsp;</a></span>gzclose_w()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../de/d95/zconf_8h.html#a181415878f03b95a7094309d824a14b6">ZEXPORT</a> gzclose_w </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/dae/zlib_8h.html#a8e80bd9e2c359bc5bdabb2e97b4e62bf">gzFile</a>&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00527">527</a> of file <a class="el" href="../../d8/db6/gzwrite_8c_source.html">gzwrite.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;{</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../df/d31/prof_8c.html#a339672ff94e6199019102f50d317c3d7">ret</a> = <a class="code" href="../../d4/dae/zlib_8h.html#a8cb802b6a11e926478dc6547c514c65c">Z_OK</a>;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <a class="code" href="../../d5/d6d/gzguts_8h.html#a15adc208a26903dbfe8c57720cf401c8">gz_statep</a> state;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160; </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="comment">/* get internal structure */</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/d71/namespacempq.html#a4d9e28a606ab362cda8f825daad0fb49">file</a> == <a class="code" href="../../d9/d33/jemalloc__internal_8h.html#ae89ee89f41328ac0ade1e3e26c103570">NULL</a>)</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d4/dae/zlib_8h.html#aad97cde83a9a4bb77f5c3b03bb68e483">Z_STREAM_ERROR</a>;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    state = (<a class="code" href="../../d5/d6d/gzguts_8h.html#a15adc208a26903dbfe8c57720cf401c8">gz_statep</a>)<a class="code" href="../../d4/d71/namespacempq.html#a4d9e28a606ab362cda8f825daad0fb49">file</a>;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160; </div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="comment">/* check that we&#39;re writing */</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="keywordflow">if</span> (state-&gt;mode != <a class="code" href="../../d5/d6d/gzguts_8h.html#a357c4f5723c26966ed9d68c9bd6490c0">GZ_WRITE</a>)</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d4/dae/zlib_8h.html#aad97cde83a9a4bb77f5c3b03bb68e483">Z_STREAM_ERROR</a>;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; </div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="comment">/* check for seek request */</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keywordflow">if</span> (state-&gt;seek) {</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        state-&gt;seek = 0;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/db6/gzwrite_8c.html#ac51b44560d2898b88fa94510b838e82a">gz_zero</a>(state, state-&gt;skip) == -1)</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            <a class="code" href="../../df/d31/prof_8c.html#a339672ff94e6199019102f50d317c3d7">ret</a> = state-&gt;err;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    }</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160; </div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="comment">/* flush, free memory, and close file */</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="keywordflow">if</span> (state-&gt;size) {</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/db6/gzwrite_8c.html#a4df5a8f6e323ea9874c8de14f8f1fe49">gz_comp</a>(state, <a class="code" href="../../d4/dae/zlib_8h.html#a876a626ba14eb12eea4bbf6823b6ca50">Z_FINISH</a>) == -1)</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            <a class="code" href="../../df/d31/prof_8c.html#a339672ff94e6199019102f50d317c3d7">ret</a> = state-&gt;err;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <a class="code" href="../../dd/d68/_c_make_lists_8txt.html#a0b5da418382bdd0db6dff439e2863979">if</a> (!state-&gt;direct) {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            (void)<a class="code" href="../../d2/d0e/deflate_8c.html#ada68769789b1d84de7e708d6e848a075">deflateEnd</a>(&amp;(state-&gt;strm));</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            free(state-&gt;out);</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        }</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        free(state-&gt;in);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    }</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <a class="code" href="../../d3/dd9/gzlib_8c.html#abfa9d832c83a5f58ad064e1a617ae910">gz_error</a>(state, <a class="code" href="../../d4/dae/zlib_8h.html#a8cb802b6a11e926478dc6547c514c65c">Z_OK</a>, <a class="code" href="../../d9/d33/jemalloc__internal_8h.html#ae89ee89f41328ac0ade1e3e26c103570">NULL</a>);</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    free(state-&gt;path);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d7/dff/hooks_8h.html#a9c7f6d5331abb2692a876d5ee67474b7">close</a>(state-&gt;fd) == -1)</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        <a class="code" href="../../df/d31/prof_8c.html#a339672ff94e6199019102f50d317c3d7">ret</a> = <a class="code" href="../../d4/dae/zlib_8h.html#a3c66d64c427c0337c64e578537478737">Z_ERRNO</a>;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    free(state);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../df/d31/prof_8c.html#a339672ff94e6199019102f50d317c3d7">ret</a>;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;}</div>
<div class="ttc" id="a_c_make_lists_8txt_html_a0b5da418382bdd0db6dff439e2863979"><div class="ttname"><a href="../../dd/d68/_c_make_lists_8txt.html#a0b5da418382bdd0db6dff439e2863979">if</a></div><div class="ttdeci">NAME if(&quot;;${DISABLED_AC_MODULES};&quot; MATCHES &quot;;${MODULENAME};&quot;) continue() endif() if(EXISTS &quot;$</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d68/_c_make_lists_8txt_source.html#l00068">CMakeLists.txt:68</a></div></div>
<div class="ttc" id="adeflate_8c_html_ada68769789b1d84de7e708d6e848a075"><div class="ttname"><a href="../../d2/d0e/deflate_8c.html#ada68769789b1d84de7e708d6e848a075">deflateEnd</a></div><div class="ttdeci">int ZEXPORT deflateEnd(z_streamp strm)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0e/deflate_8c_source.html#l00977">deflate.c:977</a></div></div>
<div class="ttc" id="agzguts_8h_html_a15adc208a26903dbfe8c57720cf401c8"><div class="ttname"><a href="../../d5/d6d/gzguts_8h.html#a15adc208a26903dbfe8c57720cf401c8">gz_statep</a></div><div class="ttdeci">gz_state FAR * gz_statep</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d6d/gzguts_8h_source.html#l00177">gzguts.h:177</a></div></div>
<div class="ttc" id="agzguts_8h_html_a357c4f5723c26966ed9d68c9bd6490c0"><div class="ttname"><a href="../../d5/d6d/gzguts_8h.html#a357c4f5723c26966ed9d68c9bd6490c0">GZ_WRITE</a></div><div class="ttdeci">#define GZ_WRITE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d6d/gzguts_8h_source.html#l00136">gzguts.h:136</a></div></div>
<div class="ttc" id="agzwrite_8c_html_ac51b44560d2898b88fa94510b838e82a"><div class="ttname"><a href="../../d8/db6/gzwrite_8c.html#ac51b44560d2898b88fa94510b838e82a">gz_zero</a></div><div class="ttdeci">int gz_zero(gz_statep state, z_off64_t len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/db6/gzwrite_8c_source.html#l00133">gzwrite.c:133</a></div></div>
<div class="ttc" id="ahooks_8h_html_a9c7f6d5331abb2692a876d5ee67474b7"><div class="ttname"><a href="../../d7/dff/hooks_8h.html#a9c7f6d5331abb2692a876d5ee67474b7">close</a></div><div class="ttdeci">#define close</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dff/hooks_8h_source.html#l00013">hooks.h:13</a></div></div>
<div class="ttc" id="anamespacempq_html_a4d9e28a606ab362cda8f825daad0fb49"><div class="ttname"><a href="../../d4/d71/namespacempq.html#a4d9e28a606ab362cda8f825daad0fb49">mpq.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d3e/mpq_8py_source.html#l00283">mpq.py:283</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/dff/hooks_8h_source.html#l00013">close</a>, <a class="el" href="../../d2/d0e/deflate_8c_source.html#l00977">deflateEnd()</a>, <a class="el" href="../../d6/d3e/mpq_8py_source.html#l00283">mpq::file</a>, <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00070">gz_comp()</a>, <a class="el" href="../../d3/dd9/gzlib_8c_source.html#l00564">gz_error()</a>, <a class="el" href="../../d5/d6d/gzguts_8h_source.html#l00136">GZ_WRITE</a>, <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00133">gz_zero()</a>, <a class="el" href="../../dd/d68/_c_make_lists_8txt_source.html#l00068">if()</a>, <a class="el" href="../../d9/d33/jemalloc__internal_8h_source.html#l00624">NULL</a>, <a class="el" href="../../df/d31/prof_8c_source.html#l00281">ret</a>, <a class="el" href="../../d4/dae/zlib_8h_source.html#l00176">Z_ERRNO</a>, <a class="el" href="../../d4/dae/zlib_8h_source.html#l00168">Z_FINISH</a>, <a class="el" href="../../d4/dae/zlib_8h_source.html#l00173">Z_OK</a>, and <a class="el" href="../../d4/dae/zlib_8h_source.html#l00177">Z_STREAM_ERROR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d41/gzclose_8c_source.html#l00011">gzclose()</a>.</p>

</div>
</div>
<a id="a6b70d5783d03b12adfd369bd9b7394a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b70d5783d03b12adfd369bd9b7394a2">&#9670;&nbsp;</a></span>gzflush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../de/d95/zconf_8h.html#a181415878f03b95a7094309d824a14b6">ZEXPORT</a> gzflush </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/dae/zlib_8h.html#a8e80bd9e2c359bc5bdabb2e97b4e62bf">gzFile</a>&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flush</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00453">453</a> of file <a class="el" href="../../d8/db6/gzwrite_8c_source.html">gzwrite.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;{</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <a class="code" href="../../d5/d6d/gzguts_8h.html#a15adc208a26903dbfe8c57720cf401c8">gz_statep</a> state;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="comment">/* get internal structure */</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/d71/namespacempq.html#a4d9e28a606ab362cda8f825daad0fb49">file</a> == <a class="code" href="../../d9/d33/jemalloc__internal_8h.html#ae89ee89f41328ac0ade1e3e26c103570">NULL</a>)</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    state = (<a class="code" href="../../d5/d6d/gzguts_8h.html#a15adc208a26903dbfe8c57720cf401c8">gz_statep</a>)<a class="code" href="../../d4/d71/namespacempq.html#a4d9e28a606ab362cda8f825daad0fb49">file</a>;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="comment">/* check that we&#39;re writing and that there&#39;s no error */</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="keywordflow">if</span> (state-&gt;mode != <a class="code" href="../../d5/d6d/gzguts_8h.html#a357c4f5723c26966ed9d68c9bd6490c0">GZ_WRITE</a> || state-&gt;err != <a class="code" href="../../d4/dae/zlib_8h.html#a8cb802b6a11e926478dc6547c514c65c">Z_OK</a>)</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d4/dae/zlib_8h.html#aad97cde83a9a4bb77f5c3b03bb68e483">Z_STREAM_ERROR</a>;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160; </div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="comment">/* check flush parameter */</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keywordflow">if</span> (flush &lt; 0 || flush &gt; <a class="code" href="../../d4/dae/zlib_8h.html#a876a626ba14eb12eea4bbf6823b6ca50">Z_FINISH</a>)</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d4/dae/zlib_8h.html#aad97cde83a9a4bb77f5c3b03bb68e483">Z_STREAM_ERROR</a>;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160; </div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="comment">/* check for seek request */</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="keywordflow">if</span> (state-&gt;seek) {</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        state-&gt;seek = 0;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/db6/gzwrite_8c.html#ac51b44560d2898b88fa94510b838e82a">gz_zero</a>(state, state-&gt;skip) == -1)</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160; </div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="comment">/* compress remaining data with requested flush */</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <a class="code" href="../../d8/db6/gzwrite_8c.html#a4df5a8f6e323ea9874c8de14f8f1fe49">gz_comp</a>(state, flush);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="keywordflow">return</span> state-&gt;err;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d6/d3e/mpq_8py_source.html#l00283">mpq::file</a>, <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00070">gz_comp()</a>, <a class="el" href="../../d5/d6d/gzguts_8h_source.html#l00136">GZ_WRITE</a>, <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00133">gz_zero()</a>, <a class="el" href="../../d9/d33/jemalloc__internal_8h_source.html#l00624">NULL</a>, <a class="el" href="../../d4/dae/zlib_8h_source.html#l00168">Z_FINISH</a>, <a class="el" href="../../d4/dae/zlib_8h_source.html#l00173">Z_OK</a>, and <a class="el" href="../../d4/dae/zlib_8h_source.html#l00177">Z_STREAM_ERROR</a>.</p>

</div>
</div>
<a id="a23cb6f01c1de1f861e22091d0ca092ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23cb6f01c1de1f861e22091d0ca092ef">&#9670;&nbsp;</a></span>gzprintf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../de/d95/zconf_8h.html#af38d1853df635eee27f1a02f96457b22">ZEXPORTVA</a> gzprintf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/dae/zlib_8h.html#a8e80bd9e2c359bc5bdabb2e97b4e62bf">gzFile</a>&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>a1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>a2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>a3</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>a4</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>a5</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>a6</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>a7</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>a8</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>a9</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>a10</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>a11</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>a12</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>a13</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>a14</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>a15</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>a16</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>a17</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>a18</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>a19</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>a20</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00374">374</a> of file <a class="el" href="../../d8/db6/gzwrite_8c_source.html">gzwrite.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;{</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordtype">int</span> size, len;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <a class="code" href="../../d5/d6d/gzguts_8h.html#a15adc208a26903dbfe8c57720cf401c8">gz_statep</a> state;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <a class="code" href="../../d4/dae/zlib_8h.html#a6ede25c84d3c9f8632305866acffb1d6">z_streamp</a> strm;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160; </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="comment">/* get internal structure */</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/d71/namespacempq.html#a4d9e28a606ab362cda8f825daad0fb49">file</a> == <a class="code" href="../../d9/d33/jemalloc__internal_8h.html#ae89ee89f41328ac0ade1e3e26c103570">NULL</a>)</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    state = (<a class="code" href="../../d5/d6d/gzguts_8h.html#a15adc208a26903dbfe8c57720cf401c8">gz_statep</a>)<a class="code" href="../../d4/d71/namespacempq.html#a4d9e28a606ab362cda8f825daad0fb49">file</a>;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    strm = &amp;(state-&gt;strm);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160; </div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="comment">/* check that can really pass pointer in ints */</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) != <span class="keyword">sizeof</span>(<span class="keywordtype">void</span> *))</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="comment">/* check that we&#39;re writing and that there&#39;s no error */</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordflow">if</span> (state-&gt;mode != <a class="code" href="../../d5/d6d/gzguts_8h.html#a357c4f5723c26966ed9d68c9bd6490c0">GZ_WRITE</a> || state-&gt;err != <a class="code" href="../../d4/dae/zlib_8h.html#a8cb802b6a11e926478dc6547c514c65c">Z_OK</a>)</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160; </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="comment">/* make sure we have some buffer space */</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordflow">if</span> (state-&gt;size == 0 &amp;&amp; <a class="code" href="../../d8/db6/gzwrite_8c.html#ac40fbfaf148025a6fe940ca6c4313e9c">gz_init</a>(state) == -1)</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160; </div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="comment">/* check for seek request */</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordflow">if</span> (state-&gt;seek) {</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        state-&gt;seek = 0;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/db6/gzwrite_8c.html#ac51b44560d2898b88fa94510b838e82a">gz_zero</a>(state, state-&gt;skip) == -1)</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    }</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160; </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="comment">/* consume whatever&#39;s left in the input buffer */</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordflow">if</span> (strm-&gt;avail_in &amp;&amp; <a class="code" href="../../d8/db6/gzwrite_8c.html#a4df5a8f6e323ea9874c8de14f8f1fe49">gz_comp</a>(state, <a class="code" href="../../d4/dae/zlib_8h.html#ac3b62e37b9922d9496014515acd6083a">Z_NO_FLUSH</a>) == -1)</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="comment">/* do the printf() into the input buffer, put length in len */</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    size = (int)(state-&gt;size);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    state-&gt;in[size - 1] = 0;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="preprocessor">#ifdef NO_snprintf</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="preprocessor">#  ifdef HAS_sprintf_void</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <a class="code" href="../../d3/d6b/printf_8h.html#aa7d2e7e454d3fe606a71504a119dc894">sprintf</a>((<span class="keywordtype">char</span> *)(state-&gt;in), <a class="code" href="../../da/dec/color_8h.html#a5237d5a1dab3f47a095266bf83d2b5ea">format</a>, a1, a2, a3, a4, a5, a6, a7, a8,</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            a9, a10, a11, a12, a13, a14, a15, a16, a17, a18, a19, a20);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordflow">for</span> (len = 0; len &lt; size; len++)</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <span class="keywordflow">if</span> (state-&gt;in[len] == 0) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="preprocessor">#  else</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    len = <a class="code" href="../../d3/d6b/printf_8h.html#aa7d2e7e454d3fe606a71504a119dc894">sprintf</a>((<span class="keywordtype">char</span> *)(state-&gt;in), <a class="code" href="../../da/dec/color_8h.html#a5237d5a1dab3f47a095266bf83d2b5ea">format</a>, a1, a2, a3, a4, a5, a6, a7, a8,</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                  a9, a10, a11, a12, a13, a14, a15, a16, a17, a18, a19, a20);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="preprocessor">#  endif</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="preprocessor">#  ifdef HAS_snprintf_void</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    snprintf((<span class="keywordtype">char</span> *)(state-&gt;in), size, <a class="code" href="../../da/dec/color_8h.html#a5237d5a1dab3f47a095266bf83d2b5ea">format</a>, a1, a2, a3, a4, a5, a6, a7, a8,</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;             a9, a10, a11, a12, a13, a14, a15, a16, a17, a18, a19, a20);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    len = strlen((<span class="keywordtype">char</span> *)(state-&gt;in));</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="preprocessor">#  else</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    len = snprintf((<span class="keywordtype">char</span> *)(state-&gt;in), size, <a class="code" href="../../da/dec/color_8h.html#a5237d5a1dab3f47a095266bf83d2b5ea">format</a>, a1, a2, a3, a4, a5, a6,</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                   a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18,</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                   a19, a20);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="preprocessor">#  endif</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160; </div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="comment">/* check that printf() results fit in buffer */</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordflow">if</span> (len &lt;= 0 || len &gt;= (<span class="keywordtype">int</span>)size || state-&gt;in[size - 1] != 0)</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160; </div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="comment">/* update buffer and position, defer compression until needed */</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    strm-&gt;avail_in = (unsigned)len;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    strm-&gt;next_in = state-&gt;in;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    state-&gt;x.pos += len;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">return</span> len;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;}</div>
<div class="ttc" id="acolor_8h_html_a5237d5a1dab3f47a095266bf83d2b5ea"><div class="ttname"><a href="../../da/dec/color_8h.html#a5237d5a1dab3f47a095266bf83d2b5ea">format</a></div><div class="ttdeci">std::basic_string&lt; Char &gt; format(const text_style &amp;ts, const S &amp;format_str, const Args &amp;... args)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dec/color_8h_source.html#l00583">color.h:583</a></div></div>
<div class="ttc" id="aprintf_8h_html_aa7d2e7e454d3fe606a71504a119dc894"><div class="ttname"><a href="../../d3/d6b/printf_8h.html#aa7d2e7e454d3fe606a71504a119dc894">sprintf</a></div><div class="ttdeci">auto sprintf(const S &amp;fmt, const T &amp;... args) -&gt; std::basic_string&lt; Char &gt;</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/printf_8h_source.html#l00574">printf.h:574</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d6/d3e/mpq_8py_source.html#l00283">mpq::file</a>, <a class="el" href="../../da/dec/color_8h_source.html#l00583">format()</a>, <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00070">gz_comp()</a>, <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00015">gz_init()</a>, <a class="el" href="../../d5/d6d/gzguts_8h_source.html#l00136">GZ_WRITE</a>, <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00133">gz_zero()</a>, <a class="el" href="../../d9/d33/jemalloc__internal_8h_source.html#l00624">NULL</a>, <a class="el" href="../../d3/d6b/printf_8h_source.html#l00574">sprintf()</a>, <a class="el" href="../../d4/dae/zlib_8h_source.html#l00164">Z_NO_FLUSH</a>, and <a class="el" href="../../d4/dae/zlib_8h_source.html#l00173">Z_OK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dac/example_8c_source.html#l00085">test_gzio()</a>.</p>

</div>
</div>
<a id="a37f7621e057bd71abdbe2f2480b69935"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37f7621e057bd71abdbe2f2480b69935">&#9670;&nbsp;</a></span>gzputc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../de/d95/zconf_8h.html#a181415878f03b95a7094309d824a14b6">ZEXPORT</a> gzputc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/dae/zlib_8h.html#a8e80bd9e2c359bc5bdabb2e97b4e62bf">gzFile</a>&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>c</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00243">243</a> of file <a class="el" href="../../d8/db6/gzwrite_8c_source.html">gzwrite.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;{</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> buf[1];</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <a class="code" href="../../d5/d6d/gzguts_8h.html#a15adc208a26903dbfe8c57720cf401c8">gz_statep</a> state;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <a class="code" href="../../d4/dae/zlib_8h.html#a6ede25c84d3c9f8632305866acffb1d6">z_streamp</a> strm;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160; </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="comment">/* get internal structure */</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/d71/namespacempq.html#a4d9e28a606ab362cda8f825daad0fb49">file</a> == <a class="code" href="../../d9/d33/jemalloc__internal_8h.html#ae89ee89f41328ac0ade1e3e26c103570">NULL</a>)</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    state = (<a class="code" href="../../d5/d6d/gzguts_8h.html#a15adc208a26903dbfe8c57720cf401c8">gz_statep</a>)<a class="code" href="../../d4/d71/namespacempq.html#a4d9e28a606ab362cda8f825daad0fb49">file</a>;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    strm = &amp;(state-&gt;strm);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="comment">/* check that we&#39;re writing and that there&#39;s no error */</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">if</span> (state-&gt;mode != <a class="code" href="../../d5/d6d/gzguts_8h.html#a357c4f5723c26966ed9d68c9bd6490c0">GZ_WRITE</a> || state-&gt;err != <a class="code" href="../../d4/dae/zlib_8h.html#a8cb802b6a11e926478dc6547c514c65c">Z_OK</a>)</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="comment">/* check for seek request */</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">if</span> (state-&gt;seek) {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        state-&gt;seek = 0;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/db6/gzwrite_8c.html#ac51b44560d2898b88fa94510b838e82a">gz_zero</a>(state, state-&gt;skip) == -1)</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="comment">/* try writing to input buffer for speed (state-&gt;size == 0 if buffer not</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">       initialized) */</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordflow">if</span> (strm-&gt;avail_in &lt; state-&gt;size) {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="keywordflow">if</span> (strm-&gt;avail_in == 0)</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            strm-&gt;next_in = state-&gt;in;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        strm-&gt;next_in[strm-&gt;avail_in++] = <a class="code" href="../../d4/d71/namespacempq.html#af509b98ca1ebe6c0248f215d23e06c93">c</a>;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        state-&gt;x.pos++;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d4/d71/namespacempq.html#af509b98ca1ebe6c0248f215d23e06c93">c</a> &amp; 0xff;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="comment">/* no room in buffer or not initialized, use gz_write() */</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    buf[0] = <a class="code" href="../../d4/d71/namespacempq.html#af509b98ca1ebe6c0248f215d23e06c93">c</a>;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/db6/gzwrite_8c.html#a93323ef1288f105db8a89e80f2764d3b">gzwrite</a>(<a class="code" href="../../d4/d71/namespacempq.html#a4d9e28a606ab362cda8f825daad0fb49">file</a>, buf, 1) != 1)</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d4/d71/namespacempq.html#af509b98ca1ebe6c0248f215d23e06c93">c</a> &amp; 0xff;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;}</div>
<div class="ttc" id="agzwrite_8c_html_a93323ef1288f105db8a89e80f2764d3b"><div class="ttname"><a href="../../d8/db6/gzwrite_8c.html#a93323ef1288f105db8a89e80f2764d3b">gzwrite</a></div><div class="ttdeci">int ZEXPORT gzwrite(gzFile file, voidpc buf, unsigned len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/db6/gzwrite_8c_source.html#l00165">gzwrite.c:165</a></div></div>
<div class="ttc" id="anamespacempq_html_af509b98ca1ebe6c0248f215d23e06c93"><div class="ttname"><a href="../../d4/d71/namespacempq.html#af509b98ca1ebe6c0248f215d23e06c93">mpq.c</a></div><div class="ttdeci">list c</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d3e/mpq_8py_source.html#l00295">mpq.py:295</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d6/d3e/mpq_8py_source.html#l00295">mpq::c</a>, <a class="el" href="../../d6/d3e/mpq_8py_source.html#l00283">mpq::file</a>, <a class="el" href="../../d5/d6d/gzguts_8h_source.html#l00136">GZ_WRITE</a>, <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00133">gz_zero()</a>, <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00165">gzwrite()</a>, <a class="el" href="../../d9/d33/jemalloc__internal_8h_source.html#l00624">NULL</a>, and <a class="el" href="../../d4/dae/zlib_8h_source.html#l00173">Z_OK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dac/example_8c_source.html#l00085">test_gzio()</a>.</p>

</div>
</div>
<a id="a2760b9a721dd2950d101046d9b57c461"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2760b9a721dd2950d101046d9b57c461">&#9670;&nbsp;</a></span>gzputs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../de/d95/zconf_8h.html#a181415878f03b95a7094309d824a14b6">ZEXPORT</a> gzputs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/dae/zlib_8h.html#a8e80bd9e2c359bc5bdabb2e97b4e62bf">gzFile</a>&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *&#160;</td>
          <td class="paramname"><em>str</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00286">286</a> of file <a class="el" href="../../d8/db6/gzwrite_8c_source.html">gzwrite.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;{</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../df/d31/prof_8c.html#a339672ff94e6199019102f50d317c3d7">ret</a>;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordtype">unsigned</span> len;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="comment">/* write string */</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    len = (unsigned)strlen(str);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <a class="code" href="../../df/d31/prof_8c.html#a339672ff94e6199019102f50d317c3d7">ret</a> = <a class="code" href="../../d8/db6/gzwrite_8c.html#a93323ef1288f105db8a89e80f2764d3b">gzwrite</a>(<a class="code" href="../../d4/d71/namespacempq.html#a4d9e28a606ab362cda8f825daad0fb49">file</a>, str, len);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../df/d31/prof_8c.html#a339672ff94e6199019102f50d317c3d7">ret</a> == 0 &amp;&amp; len != 0 ? -1 : <a class="code" href="../../df/d31/prof_8c.html#a339672ff94e6199019102f50d317c3d7">ret</a>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d6/d3e/mpq_8py_source.html#l00283">mpq::file</a>, <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00165">gzwrite()</a>, and <a class="el" href="../../df/d31/prof_8c_source.html#l00281">ret</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dac/example_8c_source.html#l00085">test_gzio()</a>.</p>

</div>
</div>
<a id="a20e49f282c69489d3733593736212876"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20e49f282c69489d3733593736212876">&#9670;&nbsp;</a></span>gzsetparams()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../de/d95/zconf_8h.html#a181415878f03b95a7094309d824a14b6">ZEXPORT</a> gzsetparams </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/dae/zlib_8h.html#a8e80bd9e2c359bc5bdabb2e97b4e62bf">gzFile</a>&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>strategy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00485">485</a> of file <a class="el" href="../../d8/db6/gzwrite_8c_source.html">gzwrite.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;{</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <a class="code" href="../../d5/d6d/gzguts_8h.html#a15adc208a26903dbfe8c57720cf401c8">gz_statep</a> state;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <a class="code" href="../../d4/dae/zlib_8h.html#a6ede25c84d3c9f8632305866acffb1d6">z_streamp</a> strm;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160; </div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="comment">/* get internal structure */</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/d71/namespacempq.html#a4d9e28a606ab362cda8f825daad0fb49">file</a> == <a class="code" href="../../d9/d33/jemalloc__internal_8h.html#ae89ee89f41328ac0ade1e3e26c103570">NULL</a>)</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d4/dae/zlib_8h.html#aad97cde83a9a4bb77f5c3b03bb68e483">Z_STREAM_ERROR</a>;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    state = (<a class="code" href="../../d5/d6d/gzguts_8h.html#a15adc208a26903dbfe8c57720cf401c8">gz_statep</a>)<a class="code" href="../../d4/d71/namespacempq.html#a4d9e28a606ab362cda8f825daad0fb49">file</a>;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    strm = &amp;(state-&gt;strm);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160; </div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="comment">/* check that we&#39;re writing and that there&#39;s no error */</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordflow">if</span> (state-&gt;mode != <a class="code" href="../../d5/d6d/gzguts_8h.html#a357c4f5723c26966ed9d68c9bd6490c0">GZ_WRITE</a> || state-&gt;err != <a class="code" href="../../d4/dae/zlib_8h.html#a8cb802b6a11e926478dc6547c514c65c">Z_OK</a>)</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d4/dae/zlib_8h.html#aad97cde83a9a4bb77f5c3b03bb68e483">Z_STREAM_ERROR</a>;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160; </div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="comment">/* if no change is requested, then do nothing */</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordflow">if</span> (level == state-&gt;level &amp;&amp; strategy == state-&gt;strategy)</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d4/dae/zlib_8h.html#a8cb802b6a11e926478dc6547c514c65c">Z_OK</a>;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160; </div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="comment">/* check for seek request */</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordflow">if</span> (state-&gt;seek) {</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        state-&gt;seek = 0;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/db6/gzwrite_8c.html#ac51b44560d2898b88fa94510b838e82a">gz_zero</a>(state, state-&gt;skip) == -1)</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    }</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160; </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="comment">/* change compression parameters for subsequent input */</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keywordflow">if</span> (state-&gt;size) {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <span class="comment">/* flush previous input with previous parameters before changing */</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <span class="keywordflow">if</span> (strm-&gt;avail_in &amp;&amp; <a class="code" href="../../d8/db6/gzwrite_8c.html#a4df5a8f6e323ea9874c8de14f8f1fe49">gz_comp</a>(state, <a class="code" href="../../d4/dae/zlib_8h.html#adbd49089a5611593f05ac80c9e12cc7f">Z_PARTIAL_FLUSH</a>) == -1)</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            <span class="keywordflow">return</span> state-&gt;err;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        <a class="code" href="../../d2/d0e/deflate_8c.html#a6be3d26b7e317aa4db6c7870b1911d4d">deflateParams</a>(strm, level, strategy);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    }</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    state-&gt;level = level;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    state-&gt;strategy = strategy;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d4/dae/zlib_8h.html#a8cb802b6a11e926478dc6547c514c65c">Z_OK</a>;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;}</div>
<div class="ttc" id="adeflate_8c_html_a6be3d26b7e317aa4db6c7870b1911d4d"><div class="ttname"><a href="../../d2/d0e/deflate_8c.html#a6be3d26b7e317aa4db6c7870b1911d4d">deflateParams</a></div><div class="ttdeci">int ZEXPORT deflateParams(z_streamp strm, int level, int strategy)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0e/deflate_8c_source.html#l00490">deflate.c:490</a></div></div>
<div class="ttc" id="azlib_8h_html_adbd49089a5611593f05ac80c9e12cc7f"><div class="ttname"><a href="../../d4/dae/zlib_8h.html#adbd49089a5611593f05ac80c9e12cc7f">Z_PARTIAL_FLUSH</a></div><div class="ttdeci">#define Z_PARTIAL_FLUSH</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dae/zlib_8h_source.html#l00165">zlib.h:165</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d0e/deflate_8c_source.html#l00490">deflateParams()</a>, <a class="el" href="../../d6/d3e/mpq_8py_source.html#l00283">mpq::file</a>, <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00070">gz_comp()</a>, <a class="el" href="../../d5/d6d/gzguts_8h_source.html#l00136">GZ_WRITE</a>, <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00133">gz_zero()</a>, <a class="el" href="../../d9/d33/jemalloc__internal_8h_source.html#l00624">NULL</a>, <a class="el" href="../../d4/dae/zlib_8h_source.html#l00173">Z_OK</a>, <a class="el" href="../../d4/dae/zlib_8h_source.html#l00165">Z_PARTIAL_FLUSH</a>, and <a class="el" href="../../d4/dae/zlib_8h_source.html#l00177">Z_STREAM_ERROR</a>.</p>

</div>
</div>
<a id="a93323ef1288f105db8a89e80f2764d3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93323ef1288f105db8a89e80f2764d3b">&#9670;&nbsp;</a></span>gzwrite()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../de/d95/zconf_8h.html#a181415878f03b95a7094309d824a14b6">ZEXPORT</a> gzwrite </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/dae/zlib_8h.html#a8e80bd9e2c359bc5bdabb2e97b4e62bf">gzFile</a>&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d95/zconf_8h.html#a7db54413d7060e4b57868c2b23c0ec1c">voidpc</a>&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00165">165</a> of file <a class="el" href="../../d8/db6/gzwrite_8c_source.html">gzwrite.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;{</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordtype">unsigned</span> put = len;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordtype">unsigned</span> n;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <a class="code" href="../../d5/d6d/gzguts_8h.html#a15adc208a26903dbfe8c57720cf401c8">gz_statep</a> state;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <a class="code" href="../../d4/dae/zlib_8h.html#a6ede25c84d3c9f8632305866acffb1d6">z_streamp</a> strm;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="comment">/* get internal structure */</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/d71/namespacempq.html#a4d9e28a606ab362cda8f825daad0fb49">file</a> == <a class="code" href="../../d9/d33/jemalloc__internal_8h.html#ae89ee89f41328ac0ade1e3e26c103570">NULL</a>)</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    state = (<a class="code" href="../../d5/d6d/gzguts_8h.html#a15adc208a26903dbfe8c57720cf401c8">gz_statep</a>)<a class="code" href="../../d4/d71/namespacempq.html#a4d9e28a606ab362cda8f825daad0fb49">file</a>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    strm = &amp;(state-&gt;strm);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="comment">/* check that we&#39;re writing and that there&#39;s no error */</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">if</span> (state-&gt;mode != <a class="code" href="../../d5/d6d/gzguts_8h.html#a357c4f5723c26966ed9d68c9bd6490c0">GZ_WRITE</a> || state-&gt;err != <a class="code" href="../../d4/dae/zlib_8h.html#a8cb802b6a11e926478dc6547c514c65c">Z_OK</a>)</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160; </div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="comment">/* since an int is returned, make sure len fits in one, otherwise return</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">       with an error (this avoids the flaw in the interface) */</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)len &lt; 0) {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <a class="code" href="../../d3/dd9/gzlib_8c.html#abfa9d832c83a5f58ad064e1a617ae910">gz_error</a>(state, <a class="code" href="../../d4/dae/zlib_8h.html#a9eda83d428a71752d148f38b5dbe04f2">Z_DATA_ERROR</a>, <span class="stringliteral">&quot;requested length does not fit in int&quot;</span>);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="comment">/* if len is zero, avoid unnecessary operations */</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">if</span> (len == 0)</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="comment">/* allocate memory if this is the first time through */</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordflow">if</span> (state-&gt;size == 0 &amp;&amp; <a class="code" href="../../d8/db6/gzwrite_8c.html#ac40fbfaf148025a6fe940ca6c4313e9c">gz_init</a>(state) == -1)</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="comment">/* check for seek request */</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">if</span> (state-&gt;seek) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        state-&gt;seek = 0;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/db6/gzwrite_8c.html#ac51b44560d2898b88fa94510b838e82a">gz_zero</a>(state, state-&gt;skip) == -1)</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    }</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="comment">/* for small len, copy to input buffer, otherwise compress directly */</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">if</span> (len &lt; state-&gt;size) {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="comment">/* copy to input buffer, compress when full */</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            <span class="keywordflow">if</span> (strm-&gt;avail_in == 0)</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                strm-&gt;next_in = state-&gt;in;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            n = state-&gt;size - strm-&gt;avail_in;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <span class="keywordflow">if</span> (n &gt; len)</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                n = len;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            <a class="code" href="../../d6/dda/m__string_8h.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a>(strm-&gt;next_in + strm-&gt;avail_in, buf, n);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            strm-&gt;avail_in += n;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            state-&gt;x.pos += n;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            buf = (<span class="keywordtype">char</span> *)buf + n;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            len -= n;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            <span class="keywordflow">if</span> (len &amp;&amp; <a class="code" href="../../d8/db6/gzwrite_8c.html#a4df5a8f6e323ea9874c8de14f8f1fe49">gz_comp</a>(state, <a class="code" href="../../d4/dae/zlib_8h.html#ac3b62e37b9922d9496014515acd6083a">Z_NO_FLUSH</a>) == -1)</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        } <span class="keywordflow">while</span> (len);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    }</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="comment">/* consume whatever&#39;s left in the input buffer */</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="keywordflow">if</span> (strm-&gt;avail_in &amp;&amp; <a class="code" href="../../d8/db6/gzwrite_8c.html#a4df5a8f6e323ea9874c8de14f8f1fe49">gz_comp</a>(state, <a class="code" href="../../d4/dae/zlib_8h.html#ac3b62e37b9922d9496014515acd6083a">Z_NO_FLUSH</a>) == -1)</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <span class="comment">/* directly compress user buffer to file */</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        strm-&gt;avail_in = len;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        strm-&gt;next_in = (<a class="code" href="../../de/d95/zconf_8h.html#aa3397ff439b5e076528b04bc9b8b086a">voidp</a>)buf;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        state-&gt;x.pos += len;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/db6/gzwrite_8c.html#a4df5a8f6e323ea9874c8de14f8f1fe49">gz_comp</a>(state, <a class="code" href="../../d4/dae/zlib_8h.html#ac3b62e37b9922d9496014515acd6083a">Z_NO_FLUSH</a>) == -1)</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    }</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="comment">/* input was all buffered or compressed (put will fit in int) */</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">return</span> (<span class="keywordtype">int</span>)put;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;}</div>
<div class="ttc" id="am__string_8h_html_aed653b4838032a2c5ce8960421c8cfd7"><div class="ttname"><a href="../../d6/dda/m__string_8h.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a></div><div class="ttdeci">#define memcpy(d, s, n)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dda/m__string_8h_source.html#l00050">m_string.h:50</a></div></div>
<div class="ttc" id="azconf_8h_html_aa3397ff439b5e076528b04bc9b8b086a"><div class="ttname"><a href="../../de/d95/zconf_8h.html#aa3397ff439b5e076528b04bc9b8b086a">voidp</a></div><div class="ttdeci">Byte * voidp</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d95/zconf_8h_source.html#l00388">zconf.h:388</a></div></div>
<div class="ttc" id="azlib_8h_html_a9eda83d428a71752d148f38b5dbe04f2"><div class="ttname"><a href="../../d4/dae/zlib_8h.html#a9eda83d428a71752d148f38b5dbe04f2">Z_DATA_ERROR</a></div><div class="ttdeci">#define Z_DATA_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dae/zlib_8h_source.html#l00178">zlib.h:178</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d6/d3e/mpq_8py_source.html#l00283">mpq::file</a>, <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00070">gz_comp()</a>, <a class="el" href="../../d3/dd9/gzlib_8c_source.html#l00564">gz_error()</a>, <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00015">gz_init()</a>, <a class="el" href="../../d5/d6d/gzguts_8h_source.html#l00136">GZ_WRITE</a>, <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00133">gz_zero()</a>, <a class="el" href="../../d6/dda/m__string_8h_source.html#l00050">memcpy</a>, <a class="el" href="../../d9/d33/jemalloc__internal_8h_source.html#l00624">NULL</a>, <a class="el" href="../../d4/dae/zlib_8h_source.html#l00178">Z_DATA_ERROR</a>, <a class="el" href="../../d4/dae/zlib_8h_source.html#l00164">Z_NO_FLUSH</a>, and <a class="el" href="../../d4/dae/zlib_8h_source.html#l00173">Z_OK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dc6/minigzip_8c_source.html#l00167">gz_compress()</a>, <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00243">gzputc()</a>, and <a class="el" href="../../d8/db6/gzwrite_8c_source.html#l00286">gzputs()</a>.</p>

</div>
</div>
<a id="adf8c7b20b9049ed662bfe3408c8a4524"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf8c7b20b9049ed662bfe3408c8a4524">&#9670;&nbsp;</a></span>OF() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d8/db6/gzwrite_8c.html#ac40fbfaf148025a6fe940ca6c4313e9c">gz_init</a> OF </td>
          <td>(</td>
          <td class="paramtype">(<a class="el" href="../../d5/d6d/gzguts_8h.html#a15adc208a26903dbfe8c57720cf401c8">gz_statep</a>)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa6bd6b7ef8bf5b68ddbcc2dbe8d98757"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6bd6b7ef8bf5b68ddbcc2dbe8d98757">&#9670;&nbsp;</a></span>OF() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d8/db6/gzwrite_8c.html#a4df5a8f6e323ea9874c8de14f8f1fe49">gz_comp</a> OF </td>
          <td>(</td>
          <td class="paramtype">(<a class="el" href="../../d5/d6d/gzguts_8h.html#a15adc208a26903dbfe8c57720cf401c8">gz_statep</a>, int)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aad9b669f8ceed4b1d5f732cde398b7be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad9b669f8ceed4b1d5f732cde398b7be">&#9670;&nbsp;</a></span>OF() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d8/db6/gzwrite_8c.html#ac51b44560d2898b88fa94510b838e82a">gz_zero</a> OF </td>
          <td>(</td>
          <td class="paramtype">(<a class="el" href="../../d5/d6d/gzguts_8h.html#a15adc208a26903dbfe8c57720cf401c8">gz_statep</a>, <a class="el" href="../../de/d95/zconf_8h.html#ab9923767082c7a76924b31493e60d42c">z_off64_t</a>)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
